var e0=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var t0=e0((exports,module)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var assertNever$1={},hasRequiredAssertNever$1;function requireAssertNever$1(){if(hasRequiredAssertNever$1)return assertNever$1;hasRequiredAssertNever$1=1,Object.defineProperty(assertNever$1,"__esModule",{value:!0}),assertNever$1.assertNever=e;function e(t,r){if(typeof r=="string")throw new Error(r);if(typeof r=="function")throw new Error(r(t));if(r)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}return assertNever$1.default=e,assertNever$1}var assertNeverExports$1=requireAssertNever$1();const Tr=getDefaultExportFromCjs$1(assertNeverExports$1);var ajv$1={exports:{}},core$3={},validate$1={},boolSchema$1={},errors$1={},codegen$1={},code$3={},hasRequiredCode$3;function requireCode$3(){return hasRequiredCode$3||(hasRequiredCode$3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(C){if(super(),!e.IDENTIFIER.test(C))throw new Error("CodeGen: name must be a valid identifier");this.str=C}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(C){super(),this._items=typeof C=="string"?[C]:C}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const C=this._items[0];return C===""||C==='""'}get str(){var C;return(C=this._str)!==null&&C!==void 0?C:this._str=this._items.reduce((D,G)=>`${D}${G}`,"")}get names(){var C;return(C=this._names)!==null&&C!==void 0?C:this._names=this._items.reduce((D,G)=>(G instanceof r&&(D[G.str]=(D[G.str]||0)+1),D),{})}}e._Code=n,e.nil=new n("");function i(q,...C){const D=[q[0]];let G=0;for(;G<C.length;)u(D,C[G]),D.push(q[++G]);return new n(D)}e._=i;const a=new n("+");function l(q,...C){const D=[T(q[0])];let G=0;for(;G<C.length;)D.push(a),u(D,C[G]),D.push(a,T(q[++G]));return d(D),new n(D)}e.str=l;function u(q,C){C instanceof n?q.push(...C._items):C instanceof r?q.push(C):q.push(x(C))}e.addCodeArg=u;function d(q){let C=1;for(;C<q.length-1;){if(q[C]===a){const D=m(q[C-1],q[C+1]);if(D!==void 0){q.splice(C-1,3,D);continue}q[C++]="+"}C++}}function m(q,C){if(C==='""')return q;if(q==='""')return C;if(typeof q=="string")return C instanceof r||q[q.length-1]!=='"'?void 0:typeof C!="string"?`${q.slice(0,-1)}${C}"`:C[0]==='"'?q.slice(0,-1)+C.slice(1):void 0;if(typeof C=="string"&&C[0]==='"'&&!(q instanceof r))return`"${q}${C.slice(1)}`}function v(q,C){return C.emptyStr()?q:q.emptyStr()?C:l`${q}${C}`}e.strConcat=v;function x(q){return typeof q=="number"||typeof q=="boolean"||q===null?q:T(Array.isArray(q)?q.join(","):q)}function $(q){return new n(T(q))}e.stringify=$;function T(q){return JSON.stringify(q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=T;function A(q){return typeof q=="string"&&e.IDENTIFIER.test(q)?new n(`.${q}`):i`[${q}]`}e.getProperty=A;function L(q){if(typeof q=="string"&&e.IDENTIFIER.test(q))return new n(`${q}`);throw new Error(`CodeGen: invalid export name: ${q}, use explicit $id name mapping`)}e.getEsmExportName=L;function P(q){return new n(q.toString())}e.regexpCode=P})(code$3)),code$3}var scope$1={},hasRequiredScope$1;function requireScope$1(){return hasRequiredScope$1||(hasRequiredScope$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=requireCode$3();class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var n;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:m,parent:v}={}){this._names={},this._prefixes=m,this._parent=v}toName(m){return m instanceof t.Name?m:this.name(m)}name(m){return new t.Name(this._newName(m))}_newName(m){const v=this._names[m]||this._nameGroup(m);return`${m}${v.index++}`}_nameGroup(m){var v,x;if(!((x=(v=this._parent)===null||v===void 0?void 0:v._prefixes)===null||x===void 0)&&x.has(m)||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}e.Scope=i;class a extends t.Name{constructor(m,v){super(v),this.prefix=m}setValue(m,{property:v,itemIndex:x}){this.value=m,this.scopePath=(0,t._)`.${new t.Name(v)}[${x}]`}}e.ValueScopeName=a;const l=(0,t._)`\n`;class u extends i{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts={...m,_n:m.lines?l:t.nil}}get(){return this._scope}name(m){return new a(m,this._newName(m))}value(m,v){var x;if(v.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(m),{prefix:T}=$,A=(x=v.key)!==null&&x!==void 0?x:v.ref;let L=this._values[T];if(L){const C=L.get(A);if(C)return C}else L=this._values[T]=new Map;L.set(A,$);const P=this._scope[T]||(this._scope[T]=[]),q=P.length;return P[q]=v.ref,$.setValue(v,{property:T,itemIndex:q}),$}getValue(m,v){const x=this._values[m];if(x)return x.get(v)}scopeRefs(m,v=this._values){return this._reduceValues(v,x=>{if(x.scopePath===void 0)throw new Error(`CodeGen: name "${x}" has no value`);return(0,t._)`${m}${x.scopePath}`})}scopeCode(m=this._values,v,x){return this._reduceValues(m,$=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},v,x)}_reduceValues(m,v,x={},$){let T=t.nil;for(const A in m){const L=m[A];if(!L)continue;const P=x[A]=x[A]||new Map;L.forEach(q=>{if(P.has(q))return;P.set(q,n.Started);let C=v(q);if(C){const D=this.opts.es5?e.varKinds.var:e.varKinds.const;T=(0,t._)`${T}${D} ${q} = ${C};${this.opts._n}`}else if(C=$?.(q))T=(0,t._)`${T}${C}${this.opts._n}`;else throw new r(q);P.set(q,n.Completed)})}return T}}e.ValueScope=u})(scope$1)),scope$1}var hasRequiredCodegen$1;function requireCodegen$1(){return hasRequiredCodegen$1||(hasRequiredCodegen$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=requireCode$3(),r=requireScope$1();var n=requireCode$3();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var i=requireScope$1();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class a{optimizeNodes(){return this}optimizeNames(Q,ee){return this}}class l extends a{constructor(Q,ee,ve){super(),this.varKind=Q,this.name=ee,this.rhs=ve}render({es5:Q,_n:ee}){const ve=Q?r.varKinds.var:this.varKind,Ke=this.rhs===void 0?"":` = ${this.rhs}`;return`${ve} ${this.name}${Ke};`+ee}optimizeNames(Q,ee){if(Q[this.name.str])return this.rhs&&(this.rhs=Ar(this.rhs,Q,ee)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends a{constructor(Q,ee,ve){super(),this.lhs=Q,this.rhs=ee,this.sideEffects=ve}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,ee){if(!(this.lhs instanceof t.Name&&!Q[this.lhs.str]&&!this.sideEffects))return this.rhs=Ar(this.rhs,Q,ee),this}get names(){const Q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Ye(Q,this.rhs)}}class d extends u{constructor(Q,ee,ve,Ke){super(Q,ve,Ke),this.op=ee}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class m extends a{constructor(Q){super(),this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class v extends a{constructor(Q){super(),this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class x extends a{constructor(Q){super(),this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class $ extends a{constructor(Q){super(),this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,ee){return this.code=Ar(this.code,Q,ee),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class T extends a{constructor(Q=[]){super(),this.nodes=Q}render(Q){return this.nodes.reduce((ee,ve)=>ee+ve.render(Q),"")}optimizeNodes(){const{nodes:Q}=this;let ee=Q.length;for(;ee--;){const ve=Q[ee].optimizeNodes();Array.isArray(ve)?Q.splice(ee,1,...ve):ve?Q[ee]=ve:Q.splice(ee,1)}return Q.length>0?this:void 0}optimizeNames(Q,ee){const{nodes:ve}=this;let Ke=ve.length;for(;Ke--;){const Ve=ve[Ke];Ve.optimizeNames(Q,ee)||(hi(Q,Ve.names),ve.splice(Ke,1))}return ve.length>0?this:void 0}get names(){return this.nodes.reduce((Q,ee)=>Ne(Q,ee.names),{})}}class A extends T{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class L extends T{}class P extends A{}P.kind="else";class q extends A{constructor(Q,ee){super(ee),this.condition=Q}render(Q){let ee=`if(${this.condition})`+super.render(Q);return this.else&&(ee+="else "+this.else.render(Q)),ee}optimizeNodes(){super.optimizeNodes();const Q=this.condition;if(Q===!0)return this.nodes;let ee=this.else;if(ee){const ve=ee.optimizeNodes();ee=this.else=Array.isArray(ve)?new P(ve):ve}if(ee)return Q===!1?ee instanceof q?ee:ee.nodes:this.nodes.length?this:new q(gi(Q),ee instanceof q?[ee]:ee.nodes);if(!(Q===!1||!this.nodes.length))return this}optimizeNames(Q,ee){var ve;if(this.else=(ve=this.else)===null||ve===void 0?void 0:ve.optimizeNames(Q,ee),!!(super.optimizeNames(Q,ee)||this.else))return this.condition=Ar(this.condition,Q,ee),this}get names(){const Q=super.names;return Ye(Q,this.condition),this.else&&Ne(Q,this.else.names),Q}}q.kind="if";class C extends A{}C.kind="for";class D extends C{constructor(Q){super(),this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,ee){if(super.optimizeNames(Q,ee))return this.iteration=Ar(this.iteration,Q,ee),this}get names(){return Ne(super.names,this.iteration.names)}}class G extends C{constructor(Q,ee,ve,Ke){super(),this.varKind=Q,this.name=ee,this.from=ve,this.to=Ke}render(Q){const ee=Q.es5?r.varKinds.var:this.varKind,{name:ve,from:Ke,to:Ve}=this;return`for(${ee} ${ve}=${Ke}; ${ve}<${Ve}; ${ve}++)`+super.render(Q)}get names(){const Q=Ye(super.names,this.from);return Ye(Q,this.to)}}class B extends C{constructor(Q,ee,ve,Ke){super(),this.loop=Q,this.varKind=ee,this.name=ve,this.iterable=Ke}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,ee){if(super.optimizeNames(Q,ee))return this.iterable=Ar(this.iterable,Q,ee),this}get names(){return Ne(super.names,this.iterable.names)}}class H extends A{constructor(Q,ee,ve){super(),this.name=Q,this.args=ee,this.async=ve}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}H.kind="func";class X extends T{render(Q){return"return "+super.render(Q)}}X.kind="return";class re extends A{render(Q){let ee="try"+super.render(Q);return this.catch&&(ee+=this.catch.render(Q)),this.finally&&(ee+=this.finally.render(Q)),ee}optimizeNodes(){var Q,ee;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(ee=this.finally)===null||ee===void 0||ee.optimizeNodes(),this}optimizeNames(Q,ee){var ve,Ke;return super.optimizeNames(Q,ee),(ve=this.catch)===null||ve===void 0||ve.optimizeNames(Q,ee),(Ke=this.finally)===null||Ke===void 0||Ke.optimizeNames(Q,ee),this}get names(){const Q=super.names;return this.catch&&Ne(Q,this.catch.names),this.finally&&Ne(Q,this.finally.names),Q}}class pe extends A{constructor(Q){super(),this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}pe.kind="catch";class $e extends A{render(Q){return"finally"+super.render(Q)}}$e.kind="finally";class ke{constructor(Q,ee={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ee,_n:ee.lines?`
`:""},this._extScope=Q,this._scope=new r.Scope({parent:Q}),this._nodes=[new L]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,ee){const ve=this._extScope.value(Q,ee);return(this._values[ve.prefix]||(this._values[ve.prefix]=new Set)).add(ve),ve}getScopeValue(Q,ee){return this._extScope.getValue(Q,ee)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,ee,ve,Ke){const Ve=this._scope.toName(ee);return ve!==void 0&&Ke&&(this._constants[Ve.str]=ve),this._leafNode(new l(Q,Ve,ve)),Ve}const(Q,ee,ve){return this._def(r.varKinds.const,Q,ee,ve)}let(Q,ee,ve){return this._def(r.varKinds.let,Q,ee,ve)}var(Q,ee,ve){return this._def(r.varKinds.var,Q,ee,ve)}assign(Q,ee,ve){return this._leafNode(new u(Q,ee,ve))}add(Q,ee){return this._leafNode(new d(Q,e.operators.ADD,ee))}code(Q){return typeof Q=="function"?Q():Q!==t.nil&&this._leafNode(new $(Q)),this}object(...Q){const ee=["{"];for(const[ve,Ke]of Q)ee.length>1&&ee.push(","),ee.push(ve),(ve!==Ke||this.opts.es5)&&(ee.push(":"),(0,t.addCodeArg)(ee,Ke));return ee.push("}"),new t._Code(ee)}if(Q,ee,ve){if(this._blockNode(new q(Q)),ee&&ve)this.code(ee).else().code(ve).endIf();else if(ee)this.code(ee).endIf();else if(ve)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new q(Q))}else(){return this._elseNode(new P)}endIf(){return this._endBlockNode(q,P)}_for(Q,ee){return this._blockNode(Q),ee&&this.code(ee).endFor(),this}for(Q,ee){return this._for(new D(Q),ee)}forRange(Q,ee,ve,Ke,Ve=this.opts.es5?r.varKinds.var:r.varKinds.let){const at=this._scope.toName(Q);return this._for(new G(Ve,at,ee,ve),()=>Ke(at))}forOf(Q,ee,ve,Ke=r.varKinds.const){const Ve=this._scope.toName(Q);if(this.opts.es5){const at=ee instanceof t.Name?ee:this.var("_arr",ee);return this.forRange("_i",0,(0,t._)`${at}.length`,vr=>{this.var(Ve,(0,t._)`${at}[${vr}]`),ve(Ve)})}return this._for(new B("of",Ke,Ve,ee),()=>ve(Ve))}forIn(Q,ee,ve,Ke=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,(0,t._)`Object.keys(${ee})`,ve);const Ve=this._scope.toName(Q);return this._for(new B("in",Ke,Ve,ee),()=>ve(Ve))}endFor(){return this._endBlockNode(C)}label(Q){return this._leafNode(new m(Q))}break(Q){return this._leafNode(new v(Q))}return(Q){const ee=new X;if(this._blockNode(ee),this.code(Q),ee.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(Q,ee,ve){if(!ee&&!ve)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ke=new re;if(this._blockNode(Ke),this.code(Q),ee){const Ve=this.name("e");this._currNode=Ke.catch=new pe(Ve),ee(Ve)}return ve&&(this._currNode=Ke.finally=new $e,this.code(ve)),this._endBlockNode(pe,$e)}throw(Q){return this._leafNode(new x(Q))}block(Q,ee){return this._blockStarts.push(this._nodes.length),Q&&this.code(Q).endBlock(ee),this}endBlock(Q){const ee=this._blockStarts.pop();if(ee===void 0)throw new Error("CodeGen: not in self-balancing block");const ve=this._nodes.length-ee;if(ve<0||Q!==void 0&&ve!==Q)throw new Error(`CodeGen: wrong number of nodes: ${ve} vs ${Q} expected`);return this._nodes.length=ee,this}func(Q,ee=t.nil,ve,Ke){return this._blockNode(new H(Q,ee,ve)),Ke&&this.code(Ke).endFunc(),this}endFunc(){return this._endBlockNode(H)}optimize(Q=1){for(;Q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,ee){const ve=this._currNode;if(ve instanceof Q||ee&&ve instanceof ee)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ee?`${Q.kind}/${ee.kind}`:Q.kind}"`)}_elseNode(Q){const ee=this._currNode;if(!(ee instanceof q))throw new Error('CodeGen: "else" without "if"');return this._currNode=ee.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){const Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){const ee=this._nodes;ee[ee.length-1]=Q}}e.CodeGen=ke;function Ne(ye,Q){for(const ee in Q)ye[ee]=(ye[ee]||0)+(Q[ee]||0);return ye}function Ye(ye,Q){return Q instanceof t._CodeOrName?Ne(ye,Q.names):ye}function Ar(ye,Q,ee){if(ye instanceof t.Name)return ve(ye);if(!Ke(ye))return ye;return new t._Code(ye._items.reduce((Ve,at)=>(at instanceof t.Name&&(at=ve(at)),at instanceof t._Code?Ve.push(...at._items):Ve.push(at),Ve),[]));function ve(Ve){const at=ee[Ve.str];return at===void 0||Q[Ve.str]!==1?Ve:(delete Q[Ve.str],at)}function Ke(Ve){return Ve instanceof t._Code&&Ve._items.some(at=>at instanceof t.Name&&Q[at.str]===1&&ee[at.str]!==void 0)}}function hi(ye,Q){for(const ee in Q)ye[ee]=(ye[ee]||0)-(Q[ee]||0)}function gi(ye){return typeof ye=="boolean"||typeof ye=="number"||ye===null?!ye:(0,t._)`!${Re(ye)}`}e.not=gi;const Ui=ce(e.operators.AND);function ws(...ye){return ye.reduce(Ui)}e.and=ws;const Gi=ce(e.operators.OR);function Ee(...ye){return ye.reduce(Gi)}e.or=Ee;function ce(ye){return(Q,ee)=>Q===t.nil?ee:ee===t.nil?Q:(0,t._)`${Re(Q)} ${ye} ${Re(ee)}`}function Re(ye){return ye instanceof t.Name?ye:(0,t._)`(${ye})`}})(codegen$1)),codegen$1}var util$1={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1,Object.defineProperty(util$1,"__esModule",{value:!0}),util$1.checkStrictMode=util$1.getErrorPath=util$1.Type=util$1.useFunc=util$1.setEvaluated=util$1.evaluatedPropsToName=util$1.mergeEvaluated=util$1.eachItem=util$1.unescapeJsonPointer=util$1.escapeJsonPointer=util$1.escapeFragment=util$1.unescapeFragment=util$1.schemaRefOrVal=util$1.schemaHasRulesButRef=util$1.schemaHasRules=util$1.checkUnknownRules=util$1.alwaysValidSchema=util$1.toHash=void 0;const e=requireCodegen$1(),t=requireCode$3();function r(B){const H={};for(const X of B)H[X]=!0;return H}util$1.toHash=r;function n(B,H){return typeof H=="boolean"?H:Object.keys(H).length===0?!0:(i(B,H),!a(H,B.self.RULES.all))}util$1.alwaysValidSchema=n;function i(B,H=B.schema){const{opts:X,self:re}=B;if(!X.strictSchema||typeof H=="boolean")return;const pe=re.RULES.keywords;for(const $e in H)pe[$e]||G(B,`unknown keyword: "${$e}"`)}util$1.checkUnknownRules=i;function a(B,H){if(typeof B=="boolean")return!B;for(const X in B)if(H[X])return!0;return!1}util$1.schemaHasRules=a;function l(B,H){if(typeof B=="boolean")return!B;for(const X in B)if(X!=="$ref"&&H.all[X])return!0;return!1}util$1.schemaHasRulesButRef=l;function u({topSchemaRef:B,schemaPath:H},X,re,pe){if(!pe){if(typeof X=="number"||typeof X=="boolean")return X;if(typeof X=="string")return(0,e._)`${X}`}return(0,e._)`${B}${H}${(0,e.getProperty)(re)}`}util$1.schemaRefOrVal=u;function d(B){return x(decodeURIComponent(B))}util$1.unescapeFragment=d;function m(B){return encodeURIComponent(v(B))}util$1.escapeFragment=m;function v(B){return typeof B=="number"?`${B}`:B.replace(/~/g,"~0").replace(/\//g,"~1")}util$1.escapeJsonPointer=v;function x(B){return B.replace(/~1/g,"/").replace(/~0/g,"~")}util$1.unescapeJsonPointer=x;function $(B,H){if(Array.isArray(B))for(const X of B)H(X);else H(B)}util$1.eachItem=$;function T({mergeNames:B,mergeToName:H,mergeValues:X,resultToName:re}){return(pe,$e,ke,Ne)=>{const Ye=ke===void 0?$e:ke instanceof e.Name?($e instanceof e.Name?B(pe,$e,ke):H(pe,$e,ke),ke):$e instanceof e.Name?(H(pe,ke,$e),$e):X($e,ke);return Ne===e.Name&&!(Ye instanceof e.Name)?re(pe,Ye):Ye}}util$1.mergeEvaluated={props:T({mergeNames:(B,H,X)=>B.if((0,e._)`${X} !== true && ${H} !== undefined`,()=>{B.if((0,e._)`${H} === true`,()=>B.assign(X,!0),()=>B.assign(X,(0,e._)`${X} || {}`).code((0,e._)`Object.assign(${X}, ${H})`))}),mergeToName:(B,H,X)=>B.if((0,e._)`${X} !== true`,()=>{H===!0?B.assign(X,!0):(B.assign(X,(0,e._)`${X} || {}`),L(B,X,H))}),mergeValues:(B,H)=>B===!0?!0:{...B,...H},resultToName:A}),items:T({mergeNames:(B,H,X)=>B.if((0,e._)`${X} !== true && ${H} !== undefined`,()=>B.assign(X,(0,e._)`${H} === true ? true : ${X} > ${H} ? ${X} : ${H}`)),mergeToName:(B,H,X)=>B.if((0,e._)`${X} !== true`,()=>B.assign(X,H===!0?!0:(0,e._)`${X} > ${H} ? ${X} : ${H}`)),mergeValues:(B,H)=>B===!0?!0:Math.max(B,H),resultToName:(B,H)=>B.var("items",H)})};function A(B,H){if(H===!0)return B.var("props",!0);const X=B.var("props",(0,e._)`{}`);return H!==void 0&&L(B,X,H),X}util$1.evaluatedPropsToName=A;function L(B,H,X){Object.keys(X).forEach(re=>B.assign((0,e._)`${H}${(0,e.getProperty)(re)}`,!0))}util$1.setEvaluated=L;const P={};function q(B,H){return B.scopeValue("func",{ref:H,code:P[H.code]||(P[H.code]=new t._Code(H.code))})}util$1.useFunc=q;var C;(function(B){B[B.Num=0]="Num",B[B.Str=1]="Str"})(C||(util$1.Type=C={}));function D(B,H,X){if(B instanceof e.Name){const re=H===C.Num;return X?re?(0,e._)`"[" + ${B} + "]"`:(0,e._)`"['" + ${B} + "']"`:re?(0,e._)`"/" + ${B}`:(0,e._)`"/" + ${B}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return X?(0,e.getProperty)(B).toString():"/"+v(B)}util$1.getErrorPath=D;function G(B,H,X=B.opts.strictSchema){if(X){if(H=`strict mode: ${H}`,X===!0)throw new Error(H);B.self.logger.warn(H)}}return util$1.checkStrictMode=G,util$1}var names$1={},hasRequiredNames$1;function requireNames$1(){if(hasRequiredNames$1)return names$1;hasRequiredNames$1=1,Object.defineProperty(names$1,"__esModule",{value:!0});const e=requireCodegen$1(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return names$1.default=t,names$1}var hasRequiredErrors$1;function requireErrors$1(){return hasRequiredErrors$1||(hasRequiredErrors$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=requireCodegen$1(),r=requireUtil$1(),n=requireNames$1();e.keywordError={message:({keyword:P})=>(0,t.str)`must pass "${P}" keyword validation`},e.keyword$DataError={message:({keyword:P,schemaType:q})=>q?(0,t.str)`"${P}" keyword must be ${q} ($data)`:(0,t.str)`"${P}" keyword is invalid ($data)`};function i(P,q=e.keywordError,C,D){const{it:G}=P,{gen:B,compositeRule:H,allErrors:X}=G,re=x(P,q,C);D??(H||X)?d(B,re):m(G,(0,t._)`[${re}]`)}e.reportError=i;function a(P,q=e.keywordError,C){const{it:D}=P,{gen:G,compositeRule:B,allErrors:H}=D,X=x(P,q,C);d(G,X),B||H||m(D,n.default.vErrors)}e.reportExtraError=a;function l(P,q){P.assign(n.default.errors,q),P.if((0,t._)`${n.default.vErrors} !== null`,()=>P.if(q,()=>P.assign((0,t._)`${n.default.vErrors}.length`,q),()=>P.assign(n.default.vErrors,null)))}e.resetErrorsCount=l;function u({gen:P,keyword:q,schemaValue:C,data:D,errsCount:G,it:B}){if(G===void 0)throw new Error("ajv implementation error");const H=P.name("err");P.forRange("i",G,n.default.errors,X=>{P.const(H,(0,t._)`${n.default.vErrors}[${X}]`),P.if((0,t._)`${H}.instancePath === undefined`,()=>P.assign((0,t._)`${H}.instancePath`,(0,t.strConcat)(n.default.instancePath,B.errorPath))),P.assign((0,t._)`${H}.schemaPath`,(0,t.str)`${B.errSchemaPath}/${q}`),B.opts.verbose&&(P.assign((0,t._)`${H}.schema`,C),P.assign((0,t._)`${H}.data`,D))})}e.extendErrors=u;function d(P,q){const C=P.const("err",q);P.if((0,t._)`${n.default.vErrors} === null`,()=>P.assign(n.default.vErrors,(0,t._)`[${C}]`),(0,t._)`${n.default.vErrors}.push(${C})`),P.code((0,t._)`${n.default.errors}++`)}function m(P,q){const{gen:C,validateName:D,schemaEnv:G}=P;G.$async?C.throw((0,t._)`new ${P.ValidationError}(${q})`):(C.assign((0,t._)`${D}.errors`,q),C.return(!1))}const v={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function x(P,q,C){const{createErrors:D}=P.it;return D===!1?(0,t._)`{}`:$(P,q,C)}function $(P,q,C={}){const{gen:D,it:G}=P,B=[T(G,C),A(P,C)];return L(P,q,B),D.object(...B)}function T({errorPath:P},{instancePath:q}){const C=q?(0,t.str)`${P}${(0,r.getErrorPath)(q,r.Type.Str)}`:P;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,C)]}function A({keyword:P,it:{errSchemaPath:q}},{schemaPath:C,parentSchema:D}){let G=D?q:(0,t.str)`${q}/${P}`;return C&&(G=(0,t.str)`${G}${(0,r.getErrorPath)(C,r.Type.Str)}`),[v.schemaPath,G]}function L(P,{params:q,message:C},D){const{keyword:G,data:B,schemaValue:H,it:X}=P,{opts:re,propertyName:pe,topSchemaRef:$e,schemaPath:ke}=X;D.push([v.keyword,G],[v.params,typeof q=="function"?q(P):q||(0,t._)`{}`]),re.messages&&D.push([v.message,typeof C=="function"?C(P):C]),re.verbose&&D.push([v.schema,H],[v.parentSchema,(0,t._)`${$e}${ke}`],[n.default.data,B]),pe&&D.push([v.propertyName,pe])}})(errors$1)),errors$1}var hasRequiredBoolSchema$1;function requireBoolSchema$1(){if(hasRequiredBoolSchema$1)return boolSchema$1;hasRequiredBoolSchema$1=1,Object.defineProperty(boolSchema$1,"__esModule",{value:!0}),boolSchema$1.boolOrEmptySchema=boolSchema$1.topBoolOrEmptySchema=void 0;const e=requireErrors$1(),t=requireCodegen$1(),r=requireNames$1(),n={message:"boolean schema is false"};function i(u){const{gen:d,schema:m,validateName:v}=u;m===!1?l(u,!1):typeof m=="object"&&m.$async===!0?d.return(r.default.data):(d.assign((0,t._)`${v}.errors`,null),d.return(!0))}boolSchema$1.topBoolOrEmptySchema=i;function a(u,d){const{gen:m,schema:v}=u;v===!1?(m.var(d,!1),l(u)):m.var(d,!0)}boolSchema$1.boolOrEmptySchema=a;function l(u,d){const{gen:m,data:v}=u,x={gen:m,keyword:"false schema",data:v,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,e.reportError)(x,n,void 0,d)}return boolSchema$1}var dataType$1={},rules$1={},hasRequiredRules$1;function requireRules$1(){if(hasRequiredRules$1)return rules$1;hasRequiredRules$1=1,Object.defineProperty(rules$1,"__esModule",{value:!0}),rules$1.getRules=rules$1.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(i){return typeof i=="string"&&t.has(i)}rules$1.isJSONType=r;function n(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return rules$1.getRules=n,rules$1}var applicability$1={},hasRequiredApplicability$1;function requireApplicability$1(){if(hasRequiredApplicability$1)return applicability$1;hasRequiredApplicability$1=1,Object.defineProperty(applicability$1,"__esModule",{value:!0}),applicability$1.shouldUseRule=applicability$1.shouldUseGroup=applicability$1.schemaHasRulesForType=void 0;function e({schema:n,self:i},a){const l=i.RULES.types[a];return l&&l!==!0&&t(n,l)}applicability$1.schemaHasRulesForType=e;function t(n,i){return i.rules.some(a=>r(n,a))}applicability$1.shouldUseGroup=t;function r(n,i){var a;return n[i.keyword]!==void 0||((a=i.definition.implements)===null||a===void 0?void 0:a.some(l=>n[l]!==void 0))}return applicability$1.shouldUseRule=r,applicability$1}var hasRequiredDataType$1;function requireDataType$1(){if(hasRequiredDataType$1)return dataType$1;hasRequiredDataType$1=1,Object.defineProperty(dataType$1,"__esModule",{value:!0}),dataType$1.reportTypeError=dataType$1.checkDataTypes=dataType$1.checkDataType=dataType$1.coerceAndCheckDataType=dataType$1.getJSONTypes=dataType$1.getSchemaTypes=dataType$1.DataType=void 0;const e=requireRules$1(),t=requireApplicability$1(),r=requireErrors$1(),n=requireCodegen$1(),i=requireUtil$1();var a;(function(C){C[C.Correct=0]="Correct",C[C.Wrong=1]="Wrong"})(a||(dataType$1.DataType=a={}));function l(C){const D=u(C.type);if(D.includes("null")){if(C.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!D.length&&C.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');C.nullable===!0&&D.push("null")}return D}dataType$1.getSchemaTypes=l;function u(C){const D=Array.isArray(C)?C:C?[C]:[];if(D.every(e.isJSONType))return D;throw new Error("type must be JSONType or JSONType[]: "+D.join(","))}dataType$1.getJSONTypes=u;function d(C,D){const{gen:G,data:B,opts:H}=C,X=v(D,H.coerceTypes),re=D.length>0&&!(X.length===0&&D.length===1&&(0,t.schemaHasRulesForType)(C,D[0]));if(re){const pe=A(D,B,H.strictNumbers,a.Wrong);G.if(pe,()=>{X.length?x(C,D,X):P(C)})}return re}dataType$1.coerceAndCheckDataType=d;const m=new Set(["string","number","integer","boolean","null"]);function v(C,D){return D?C.filter(G=>m.has(G)||D==="array"&&G==="array"):[]}function x(C,D,G){const{gen:B,data:H,opts:X}=C,re=B.let("dataType",(0,n._)`typeof ${H}`),pe=B.let("coerced",(0,n._)`undefined`);X.coerceTypes==="array"&&B.if((0,n._)`${re} == 'object' && Array.isArray(${H}) && ${H}.length == 1`,()=>B.assign(H,(0,n._)`${H}[0]`).assign(re,(0,n._)`typeof ${H}`).if(A(D,H,X.strictNumbers),()=>B.assign(pe,H))),B.if((0,n._)`${pe} !== undefined`);for(const ke of G)(m.has(ke)||ke==="array"&&X.coerceTypes==="array")&&$e(ke);B.else(),P(C),B.endIf(),B.if((0,n._)`${pe} !== undefined`,()=>{B.assign(H,pe),$(C,pe)});function $e(ke){switch(ke){case"string":B.elseIf((0,n._)`${re} == "number" || ${re} == "boolean"`).assign(pe,(0,n._)`"" + ${H}`).elseIf((0,n._)`${H} === null`).assign(pe,(0,n._)`""`);return;case"number":B.elseIf((0,n._)`${re} == "boolean" || ${H} === null
              || (${re} == "string" && ${H} && ${H} == +${H})`).assign(pe,(0,n._)`+${H}`);return;case"integer":B.elseIf((0,n._)`${re} === "boolean" || ${H} === null
              || (${re} === "string" && ${H} && ${H} == +${H} && !(${H} % 1))`).assign(pe,(0,n._)`+${H}`);return;case"boolean":B.elseIf((0,n._)`${H} === "false" || ${H} === 0 || ${H} === null`).assign(pe,!1).elseIf((0,n._)`${H} === "true" || ${H} === 1`).assign(pe,!0);return;case"null":B.elseIf((0,n._)`${H} === "" || ${H} === 0 || ${H} === false`),B.assign(pe,null);return;case"array":B.elseIf((0,n._)`${re} === "string" || ${re} === "number"
              || ${re} === "boolean" || ${H} === null`).assign(pe,(0,n._)`[${H}]`)}}}function $({gen:C,parentData:D,parentDataProperty:G},B){C.if((0,n._)`${D} !== undefined`,()=>C.assign((0,n._)`${D}[${G}]`,B))}function T(C,D,G,B=a.Correct){const H=B===a.Correct?n.operators.EQ:n.operators.NEQ;let X;switch(C){case"null":return(0,n._)`${D} ${H} null`;case"array":X=(0,n._)`Array.isArray(${D})`;break;case"object":X=(0,n._)`${D} && typeof ${D} == "object" && !Array.isArray(${D})`;break;case"integer":X=re((0,n._)`!(${D} % 1) && !isNaN(${D})`);break;case"number":X=re();break;default:return(0,n._)`typeof ${D} ${H} ${C}`}return B===a.Correct?X:(0,n.not)(X);function re(pe=n.nil){return(0,n.and)((0,n._)`typeof ${D} == "number"`,pe,G?(0,n._)`isFinite(${D})`:n.nil)}}dataType$1.checkDataType=T;function A(C,D,G,B){if(C.length===1)return T(C[0],D,G,B);let H;const X=(0,i.toHash)(C);if(X.array&&X.object){const re=(0,n._)`typeof ${D} != "object"`;H=X.null?re:(0,n._)`!${D} || ${re}`,delete X.null,delete X.array,delete X.object}else H=n.nil;X.number&&delete X.integer;for(const re in X)H=(0,n.and)(H,T(re,D,G,B));return H}dataType$1.checkDataTypes=A;const L={message:({schema:C})=>`must be ${C}`,params:({schema:C,schemaValue:D})=>typeof C=="string"?(0,n._)`{type: ${C}}`:(0,n._)`{type: ${D}}`};function P(C){const D=q(C);(0,r.reportError)(D,L)}dataType$1.reportTypeError=P;function q(C){const{gen:D,data:G,schema:B}=C,H=(0,i.schemaRefOrVal)(C,B,"type");return{gen:D,keyword:"type",data:G,schema:B.type,schemaCode:H,schemaValue:H,parentSchema:B,params:{},it:C}}return dataType$1}var defaults$2={},hasRequiredDefaults$1;function requireDefaults$1(){if(hasRequiredDefaults$1)return defaults$2;hasRequiredDefaults$1=1,Object.defineProperty(defaults$2,"__esModule",{value:!0}),defaults$2.assignDefaults=void 0;const e=requireCodegen$1(),t=requireUtil$1();function r(i,a){const{properties:l,items:u}=i.schema;if(a==="object"&&l)for(const d in l)n(i,d,l[d].default);else a==="array"&&Array.isArray(u)&&u.forEach((d,m)=>n(i,m,d.default))}defaults$2.assignDefaults=r;function n(i,a,l){const{gen:u,compositeRule:d,data:m,opts:v}=i;if(l===void 0)return;const x=(0,e._)`${m}${(0,e.getProperty)(a)}`;if(d){(0,t.checkStrictMode)(i,`default is ignored for: ${x}`);return}let $=(0,e._)`${x} === undefined`;v.useDefaults==="empty"&&($=(0,e._)`${$} || ${x} === null || ${x} === ""`),u.if($,(0,e._)`${x} = ${(0,e.stringify)(l)}`)}return defaults$2}var keyword$1={},code$2={},hasRequiredCode$2;function requireCode$2(){if(hasRequiredCode$2)return code$2;hasRequiredCode$2=1,Object.defineProperty(code$2,"__esModule",{value:!0}),code$2.validateUnion=code$2.validateArray=code$2.usePattern=code$2.callValidateCode=code$2.schemaProperties=code$2.allSchemaProperties=code$2.noPropertyInData=code$2.propertyInData=code$2.isOwnProperty=code$2.hasPropFunc=code$2.reportMissingProp=code$2.checkMissingProp=code$2.checkReportMissingProp=void 0;const e=requireCodegen$1(),t=requireUtil$1(),r=requireNames$1(),n=requireUtil$1();function i(C,D){const{gen:G,data:B,it:H}=C;G.if(v(G,B,D,H.opts.ownProperties),()=>{C.setParams({missingProperty:(0,e._)`${D}`},!0),C.error()})}code$2.checkReportMissingProp=i;function a({gen:C,data:D,it:{opts:G}},B,H){return(0,e.or)(...B.map(X=>(0,e.and)(v(C,D,X,G.ownProperties),(0,e._)`${H} = ${X}`)))}code$2.checkMissingProp=a;function l(C,D){C.setParams({missingProperty:D},!0),C.error()}code$2.reportMissingProp=l;function u(C){return C.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}code$2.hasPropFunc=u;function d(C,D,G){return(0,e._)`${u(C)}.call(${D}, ${G})`}code$2.isOwnProperty=d;function m(C,D,G,B){const H=(0,e._)`${D}${(0,e.getProperty)(G)} !== undefined`;return B?(0,e._)`${H} && ${d(C,D,G)}`:H}code$2.propertyInData=m;function v(C,D,G,B){const H=(0,e._)`${D}${(0,e.getProperty)(G)} === undefined`;return B?(0,e.or)(H,(0,e.not)(d(C,D,G))):H}code$2.noPropertyInData=v;function x(C){return C?Object.keys(C).filter(D=>D!=="__proto__"):[]}code$2.allSchemaProperties=x;function $(C,D){return x(D).filter(G=>!(0,t.alwaysValidSchema)(C,D[G]))}code$2.schemaProperties=$;function T({schemaCode:C,data:D,it:{gen:G,topSchemaRef:B,schemaPath:H,errorPath:X},it:re},pe,$e,ke){const Ne=ke?(0,e._)`${C}, ${D}, ${B}${H}`:D,Ye=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,X)],[r.default.parentData,re.parentData],[r.default.parentDataProperty,re.parentDataProperty],[r.default.rootData,r.default.rootData]];re.opts.dynamicRef&&Ye.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Ar=(0,e._)`${Ne}, ${G.object(...Ye)}`;return $e!==e.nil?(0,e._)`${pe}.call(${$e}, ${Ar})`:(0,e._)`${pe}(${Ar})`}code$2.callValidateCode=T;const A=(0,e._)`new RegExp`;function L({gen:C,it:{opts:D}},G){const B=D.unicodeRegExp?"u":"",{regExp:H}=D.code,X=H(G,B);return C.scopeValue("pattern",{key:X.toString(),ref:X,code:(0,e._)`${H.code==="new RegExp"?A:(0,n.useFunc)(C,H)}(${G}, ${B})`})}code$2.usePattern=L;function P(C){const{gen:D,data:G,keyword:B,it:H}=C,X=D.name("valid");if(H.allErrors){const pe=D.let("valid",!0);return re(()=>D.assign(pe,!1)),pe}return D.var(X,!0),re(()=>D.break()),X;function re(pe){const $e=D.const("len",(0,e._)`${G}.length`);D.forRange("i",0,$e,ke=>{C.subschema({keyword:B,dataProp:ke,dataPropType:t.Type.Num},X),D.if((0,e.not)(X),pe)})}}code$2.validateArray=P;function q(C){const{gen:D,schema:G,keyword:B,it:H}=C;if(!Array.isArray(G))throw new Error("ajv implementation error");if(G.some($e=>(0,t.alwaysValidSchema)(H,$e))&&!H.opts.unevaluated)return;const re=D.let("valid",!1),pe=D.name("_valid");D.block(()=>G.forEach(($e,ke)=>{const Ne=C.subschema({keyword:B,schemaProp:ke,compositeRule:!0},pe);D.assign(re,(0,e._)`${re} || ${pe}`),C.mergeValidEvaluated(Ne,pe)||D.if((0,e.not)(re))})),C.result(re,()=>C.reset(),()=>C.error(!0))}return code$2.validateUnion=q,code$2}var hasRequiredKeyword$1;function requireKeyword$1(){if(hasRequiredKeyword$1)return keyword$1;hasRequiredKeyword$1=1,Object.defineProperty(keyword$1,"__esModule",{value:!0}),keyword$1.validateKeywordUsage=keyword$1.validSchemaType=keyword$1.funcKeywordCode=keyword$1.macroKeywordCode=void 0;const e=requireCodegen$1(),t=requireNames$1(),r=requireCode$2(),n=requireErrors$1();function i($,T){const{gen:A,keyword:L,schema:P,parentSchema:q,it:C}=$,D=T.macro.call(C.self,P,q,C),G=m(A,L,D);C.opts.validateSchema!==!1&&C.self.validateSchema(D,!0);const B=A.name("valid");$.subschema({schema:D,schemaPath:e.nil,errSchemaPath:`${C.errSchemaPath}/${L}`,topSchemaRef:G,compositeRule:!0},B),$.pass(B,()=>$.error(!0))}keyword$1.macroKeywordCode=i;function a($,T){var A;const{gen:L,keyword:P,schema:q,parentSchema:C,$data:D,it:G}=$;d(G,T);const B=!D&&T.compile?T.compile.call(G.self,q,C,G):T.validate,H=m(L,P,B),X=L.let("valid");$.block$data(X,re),$.ok((A=T.valid)!==null&&A!==void 0?A:X);function re(){if(T.errors===!1)ke(),T.modifying&&l($),Ne(()=>$.error());else{const Ye=T.async?pe():$e();T.modifying&&l($),Ne(()=>u($,Ye))}}function pe(){const Ye=L.let("ruleErrs",null);return L.try(()=>ke((0,e._)`await `),Ar=>L.assign(X,!1).if((0,e._)`${Ar} instanceof ${G.ValidationError}`,()=>L.assign(Ye,(0,e._)`${Ar}.errors`),()=>L.throw(Ar))),Ye}function $e(){const Ye=(0,e._)`${H}.errors`;return L.assign(Ye,null),ke(e.nil),Ye}function ke(Ye=T.async?(0,e._)`await `:e.nil){const Ar=G.opts.passContext?t.default.this:t.default.self,hi=!("compile"in T&&!D||T.schema===!1);L.assign(X,(0,e._)`${Ye}${(0,r.callValidateCode)($,H,Ar,hi)}`,T.modifying)}function Ne(Ye){var Ar;L.if((0,e.not)((Ar=T.valid)!==null&&Ar!==void 0?Ar:X),Ye)}}keyword$1.funcKeywordCode=a;function l($){const{gen:T,data:A,it:L}=$;T.if(L.parentData,()=>T.assign(A,(0,e._)`${L.parentData}[${L.parentDataProperty}]`))}function u($,T){const{gen:A}=$;A.if((0,e._)`Array.isArray(${T})`,()=>{A.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${T} : ${t.default.vErrors}.concat(${T})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)($)},()=>$.error())}function d({schemaEnv:$},T){if(T.async&&!$.$async)throw new Error("async keyword in sync schema")}function m($,T,A){if(A===void 0)throw new Error(`keyword "${T}" failed to compile`);return $.scopeValue("keyword",typeof A=="function"?{ref:A}:{ref:A,code:(0,e.stringify)(A)})}function v($,T,A=!1){return!T.length||T.some(L=>L==="array"?Array.isArray($):L==="object"?$&&typeof $=="object"&&!Array.isArray($):typeof $==L||A&&typeof $>"u")}keyword$1.validSchemaType=v;function x({schema:$,opts:T,self:A,errSchemaPath:L},P,q){if(Array.isArray(P.keyword)?!P.keyword.includes(q):P.keyword!==q)throw new Error("ajv implementation error");const C=P.dependencies;if(C?.some(D=>!Object.prototype.hasOwnProperty.call($,D)))throw new Error(`parent schema must have dependencies of ${q}: ${C.join(",")}`);if(P.validateSchema&&!P.validateSchema($[q])){const G=`keyword "${q}" value is invalid at path "${L}": `+A.errorsText(P.validateSchema.errors);if(T.validateSchema==="log")A.logger.error(G);else throw new Error(G)}}return keyword$1.validateKeywordUsage=x,keyword$1}var subschema$1={},hasRequiredSubschema$1;function requireSubschema$1(){if(hasRequiredSubschema$1)return subschema$1;hasRequiredSubschema$1=1,Object.defineProperty(subschema$1,"__esModule",{value:!0}),subschema$1.extendSubschemaMode=subschema$1.extendSubschemaData=subschema$1.getSubschema=void 0;const e=requireCodegen$1(),t=requireUtil$1();function r(a,{keyword:l,schemaProp:u,schema:d,schemaPath:m,errSchemaPath:v,topSchemaRef:x}){if(l!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const $=a.schema[l];return u===void 0?{schema:$,schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(l)}`,errSchemaPath:`${a.errSchemaPath}/${l}`}:{schema:$[u],schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(l)}${(0,e.getProperty)(u)}`,errSchemaPath:`${a.errSchemaPath}/${l}/${(0,t.escapeFragment)(u)}`}}if(d!==void 0){if(m===void 0||v===void 0||x===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:m,topSchemaRef:x,errSchemaPath:v}}throw new Error('either "keyword" or "schema" must be passed')}subschema$1.getSubschema=r;function n(a,l,{dataProp:u,dataPropType:d,data:m,dataTypes:v,propertyName:x}){if(m!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:$}=l;if(u!==void 0){const{errorPath:A,dataPathArr:L,opts:P}=l,q=$.let("data",(0,e._)`${l.data}${(0,e.getProperty)(u)}`,!0);T(q),a.errorPath=(0,e.str)`${A}${(0,t.getErrorPath)(u,d,P.jsPropertySyntax)}`,a.parentDataProperty=(0,e._)`${u}`,a.dataPathArr=[...L,a.parentDataProperty]}if(m!==void 0){const A=m instanceof e.Name?m:$.let("data",m,!0);T(A),x!==void 0&&(a.propertyName=x)}v&&(a.dataTypes=v);function T(A){a.data=A,a.dataLevel=l.dataLevel+1,a.dataTypes=[],l.definedProperties=new Set,a.parentData=l.data,a.dataNames=[...l.dataNames,A]}}subschema$1.extendSubschemaData=n;function i(a,{jtdDiscriminator:l,jtdMetadata:u,compositeRule:d,createErrors:m,allErrors:v}){d!==void 0&&(a.compositeRule=d),m!==void 0&&(a.createErrors=m),v!==void 0&&(a.allErrors=v),a.jtdDiscriminator=l,a.jtdMetadata=u}return subschema$1.extendSubschemaMode=i,subschema$1}var resolve$1={},fastDeepEqual$1,hasRequiredFastDeepEqual$1;function requireFastDeepEqual$1(){return hasRequiredFastDeepEqual$1||(hasRequiredFastDeepEqual$1=1,fastDeepEqual$1=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var l=a[i];if(!e(t[l],r[l]))return!1}return!0}return t!==t&&r!==r}),fastDeepEqual$1}var jsonSchemaTraverse$1={exports:{}},hasRequiredJsonSchemaTraverse$1;function requireJsonSchemaTraverse$1(){if(hasRequiredJsonSchemaTraverse$1)return jsonSchemaTraverse$1.exports;hasRequiredJsonSchemaTraverse$1=1;var e=jsonSchemaTraverse$1.exports=function(n,i,a){typeof i=="function"&&(a=i,i={}),a=i.cb||a;var l=typeof a=="function"?a:a.pre||function(){},u=a.post||function(){};t(i,l,u,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,i,a,l,u,d,m,v,x,$){if(l&&typeof l=="object"&&!Array.isArray(l)){i(l,u,d,m,v,x,$);for(var T in l){var A=l[T];if(Array.isArray(A)){if(T in e.arrayKeywords)for(var L=0;L<A.length;L++)t(n,i,a,A[L],u+"/"+T+"/"+L,d,u,T,l,L)}else if(T in e.propsKeywords){if(A&&typeof A=="object")for(var P in A)t(n,i,a,A[P],u+"/"+T+"/"+r(P),d,u,T,l,P)}else(T in e.keywords||n.allKeys&&!(T in e.skipKeywords))&&t(n,i,a,A,u+"/"+T,d,u,T,l)}a(l,u,d,m,v,x,$)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse$1.exports}var hasRequiredResolve$1;function requireResolve$1(){if(hasRequiredResolve$1)return resolve$1;hasRequiredResolve$1=1,Object.defineProperty(resolve$1,"__esModule",{value:!0}),resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const e=requireUtil$1(),t=requireFastDeepEqual$1(),r=requireJsonSchemaTraverse$1(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(L,P=!0){return typeof L=="boolean"?!0:P===!0?!l(L):P?u(L)<=P:!1}resolve$1.inlineRef=i;const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(L){for(const P in L){if(a.has(P))return!0;const q=L[P];if(Array.isArray(q)&&q.some(l)||typeof q=="object"&&l(q))return!0}return!1}function u(L){let P=0;for(const q in L){if(q==="$ref")return 1/0;if(P++,!n.has(q)&&(typeof L[q]=="object"&&(0,e.eachItem)(L[q],C=>P+=u(C)),P===1/0))return 1/0}return P}function d(L,P="",q){q!==!1&&(P=x(P));const C=L.parse(P);return m(L,C)}resolve$1.getFullPath=d;function m(L,P){return L.serialize(P).split("#")[0]+"#"}resolve$1._getFullPath=m;const v=/#\/?$/;function x(L){return L?L.replace(v,""):""}resolve$1.normalizeId=x;function $(L,P,q){return q=x(q),L.resolve(P,q)}resolve$1.resolveUrl=$;const T=/^[a-z_][-a-z0-9._]*$/i;function A(L,P){if(typeof L=="boolean")return{};const{schemaId:q,uriResolver:C}=this.opts,D=x(L[q]||P),G={"":D},B=d(C,D,!1),H={},X=new Set;return r(L,{allKeys:!0},($e,ke,Ne,Ye)=>{if(Ye===void 0)return;const Ar=B+ke;let hi=G[Ye];typeof $e[q]=="string"&&(hi=gi.call(this,$e[q])),Ui.call(this,$e.$anchor),Ui.call(this,$e.$dynamicAnchor),G[ke]=hi;function gi(ws){const Gi=this.opts.uriResolver.resolve;if(ws=x(hi?Gi(hi,ws):ws),X.has(ws))throw pe(ws);X.add(ws);let Ee=this.refs[ws];return typeof Ee=="string"&&(Ee=this.refs[Ee]),typeof Ee=="object"?re($e,Ee.schema,ws):ws!==x(Ar)&&(ws[0]==="#"?(re($e,H[ws],ws),H[ws]=$e):this.refs[ws]=Ar),ws}function Ui(ws){if(typeof ws=="string"){if(!T.test(ws))throw new Error(`invalid anchor "${ws}"`);gi.call(this,`#${ws}`)}}}),H;function re($e,ke,Ne){if(ke!==void 0&&!t($e,ke))throw pe(Ne)}function pe($e){return new Error(`reference "${$e}" resolves to more than one schema`)}}return resolve$1.getSchemaRefs=A,resolve$1}var hasRequiredValidate$1;function requireValidate$1(){if(hasRequiredValidate$1)return validate$1;hasRequiredValidate$1=1,Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.getData=validate$1.KeywordCxt=validate$1.validateFunctionCode=void 0;const e=requireBoolSchema$1(),t=requireDataType$1(),r=requireApplicability$1(),n=requireDataType$1(),i=requireDefaults$1(),a=requireKeyword$1(),l=requireSubschema$1(),u=requireCodegen$1(),d=requireNames$1(),m=requireResolve$1(),v=requireUtil$1(),x=requireErrors$1();function $(se){if(B(se)&&(X(se),G(se))){P(se);return}T(se,()=>(0,e.topBoolOrEmptySchema)(se))}validate$1.validateFunctionCode=$;function T({gen:se,validateName:ae,schema:Se,schemaEnv:De,opts:bs},Je){bs.code.es5?se.func(ae,(0,u._)`${d.default.data}, ${d.default.valCxt}`,De.$async,()=>{se.code((0,u._)`"use strict"; ${C(Se,bs)}`),L(se,bs),se.code(Je)}):se.func(ae,(0,u._)`${d.default.data}, ${A(bs)}`,De.$async,()=>se.code(C(Se,bs)).code(Je))}function A(se){return(0,u._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${se.dynamicRef?(0,u._)`, ${d.default.dynamicAnchors}={}`:u.nil}}={}`}function L(se,ae){se.if(d.default.valCxt,()=>{se.var(d.default.instancePath,(0,u._)`${d.default.valCxt}.${d.default.instancePath}`),se.var(d.default.parentData,(0,u._)`${d.default.valCxt}.${d.default.parentData}`),se.var(d.default.parentDataProperty,(0,u._)`${d.default.valCxt}.${d.default.parentDataProperty}`),se.var(d.default.rootData,(0,u._)`${d.default.valCxt}.${d.default.rootData}`),ae.dynamicRef&&se.var(d.default.dynamicAnchors,(0,u._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{se.var(d.default.instancePath,(0,u._)`""`),se.var(d.default.parentData,(0,u._)`undefined`),se.var(d.default.parentDataProperty,(0,u._)`undefined`),se.var(d.default.rootData,d.default.data),ae.dynamicRef&&se.var(d.default.dynamicAnchors,(0,u._)`{}`)})}function P(se){const{schema:ae,opts:Se,gen:De}=se;T(se,()=>{Se.$comment&&ae.$comment&&Ye(se),$e(se),De.let(d.default.vErrors,null),De.let(d.default.errors,0),Se.unevaluated&&q(se),re(se),Ar(se)})}function q(se){const{gen:ae,validateName:Se}=se;se.evaluated=ae.const("evaluated",(0,u._)`${Se}.evaluated`),ae.if((0,u._)`${se.evaluated}.dynamicProps`,()=>ae.assign((0,u._)`${se.evaluated}.props`,(0,u._)`undefined`)),ae.if((0,u._)`${se.evaluated}.dynamicItems`,()=>ae.assign((0,u._)`${se.evaluated}.items`,(0,u._)`undefined`))}function C(se,ae){const Se=typeof se=="object"&&se[ae.schemaId];return Se&&(ae.code.source||ae.code.process)?(0,u._)`/*# sourceURL=${Se} */`:u.nil}function D(se,ae){if(B(se)&&(X(se),G(se))){H(se,ae);return}(0,e.boolOrEmptySchema)(se,ae)}function G({schema:se,self:ae}){if(typeof se=="boolean")return!se;for(const Se in se)if(ae.RULES.all[Se])return!0;return!1}function B(se){return typeof se.schema!="boolean"}function H(se,ae){const{schema:Se,gen:De,opts:bs}=se;bs.$comment&&Se.$comment&&Ye(se),ke(se),Ne(se);const Je=De.const("_errs",d.default.errors);re(se,Je),De.var(ae,(0,u._)`${Je} === ${d.default.errors}`)}function X(se){(0,v.checkUnknownRules)(se),pe(se)}function re(se,ae){if(se.opts.jtd)return gi(se,[],!1,ae);const Se=(0,t.getSchemaTypes)(se.schema),De=(0,t.coerceAndCheckDataType)(se,Se);gi(se,Se,!De,ae)}function pe(se){const{schema:ae,errSchemaPath:Se,opts:De,self:bs}=se;ae.$ref&&De.ignoreKeywordsWithRef&&(0,v.schemaHasRulesButRef)(ae,bs.RULES)&&bs.logger.warn(`$ref: keywords ignored in schema at path "${Se}"`)}function $e(se){const{schema:ae,opts:Se}=se;ae.default!==void 0&&Se.useDefaults&&Se.strictSchema&&(0,v.checkStrictMode)(se,"default is ignored in the schema root")}function ke(se){const ae=se.schema[se.opts.schemaId];ae&&(se.baseId=(0,m.resolveUrl)(se.opts.uriResolver,se.baseId,ae))}function Ne(se){if(se.schema.$async&&!se.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ye({gen:se,schemaEnv:ae,schema:Se,errSchemaPath:De,opts:bs}){const Je=Se.$comment;if(bs.$comment===!0)se.code((0,u._)`${d.default.self}.logger.log(${Je})`);else if(typeof bs.$comment=="function"){const pi=(0,u.str)`${De}/$comment`,Os=se.scopeValue("root",{ref:ae.root});se.code((0,u._)`${d.default.self}.opts.$comment(${Je}, ${pi}, ${Os}.schema)`)}}function Ar(se){const{gen:ae,schemaEnv:Se,validateName:De,ValidationError:bs,opts:Je}=se;Se.$async?ae.if((0,u._)`${d.default.errors} === 0`,()=>ae.return(d.default.data),()=>ae.throw((0,u._)`new ${bs}(${d.default.vErrors})`)):(ae.assign((0,u._)`${De}.errors`,d.default.vErrors),Je.unevaluated&&hi(se),ae.return((0,u._)`${d.default.errors} === 0`))}function hi({gen:se,evaluated:ae,props:Se,items:De}){Se instanceof u.Name&&se.assign((0,u._)`${ae}.props`,Se),De instanceof u.Name&&se.assign((0,u._)`${ae}.items`,De)}function gi(se,ae,Se,De){const{gen:bs,schema:Je,data:pi,allErrors:Os,opts:ji,self:ua}=se,{RULES:da}=ua;if(Je.$ref&&(ji.ignoreKeywordsWithRef||!(0,v.schemaHasRulesButRef)(Je,da))){bs.block(()=>Ke(se,"$ref",da.all.$ref.definition));return}ji.jtd||ws(se,ae),bs.block(()=>{for(const ca of da.rules)ga(ca);ga(da.post)});function ga(ca){(0,r.shouldUseGroup)(Je,ca)&&(ca.type?(bs.if((0,n.checkDataType)(ca.type,pi,ji.strictNumbers)),Ui(se,ca),ae.length===1&&ae[0]===ca.type&&Se&&(bs.else(),(0,n.reportTypeError)(se)),bs.endIf()):Ui(se,ca),Os||bs.if((0,u._)`${d.default.errors} === ${De||0}`))}}function Ui(se,ae){const{gen:Se,schema:De,opts:{useDefaults:bs}}=se;bs&&(0,i.assignDefaults)(se,ae.type),Se.block(()=>{for(const Je of ae.rules)(0,r.shouldUseRule)(De,Je)&&Ke(se,Je.keyword,Je.definition,ae.type)})}function ws(se,ae){se.schemaEnv.meta||!se.opts.strictTypes||(Gi(se,ae),se.opts.allowUnionTypes||Ee(se,ae),ce(se,se.dataTypes))}function Gi(se,ae){if(ae.length){if(!se.dataTypes.length){se.dataTypes=ae;return}ae.forEach(Se=>{ye(se.dataTypes,Se)||ee(se,`type "${Se}" not allowed by context "${se.dataTypes.join(",")}"`)}),Q(se,ae)}}function Ee(se,ae){ae.length>1&&!(ae.length===2&&ae.includes("null"))&&ee(se,"use allowUnionTypes to allow union type keyword")}function ce(se,ae){const Se=se.self.RULES.all;for(const De in Se){const bs=Se[De];if(typeof bs=="object"&&(0,r.shouldUseRule)(se.schema,bs)){const{type:Je}=bs.definition;Je.length&&!Je.some(pi=>Re(ae,pi))&&ee(se,`missing type "${Je.join(",")}" for keyword "${De}"`)}}}function Re(se,ae){return se.includes(ae)||ae==="number"&&se.includes("integer")}function ye(se,ae){return se.includes(ae)||ae==="integer"&&se.includes("number")}function Q(se,ae){const Se=[];for(const De of se.dataTypes)ye(ae,De)?Se.push(De):ae.includes("integer")&&De==="number"&&Se.push("integer");se.dataTypes=Se}function ee(se,ae){const Se=se.schemaEnv.baseId+se.errSchemaPath;ae+=` at "${Se}" (strictTypes)`,(0,v.checkStrictMode)(se,ae,se.opts.strictTypes)}class ve{constructor(ae,Se,De){if((0,a.validateKeywordUsage)(ae,Se,De),this.gen=ae.gen,this.allErrors=ae.allErrors,this.keyword=De,this.data=ae.data,this.schema=ae.schema[De],this.$data=Se.$data&&ae.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,v.schemaRefOrVal)(ae,this.schema,De,this.$data),this.schemaType=Se.schemaType,this.parentSchema=ae.schema,this.params={},this.it=ae,this.def=Se,this.$data)this.schemaCode=ae.gen.const("vSchema",vr(this.$data,ae));else if(this.schemaCode=this.schemaValue,!(0,a.validSchemaType)(this.schema,Se.schemaType,Se.allowUndefined))throw new Error(`${De} value must be ${JSON.stringify(Se.schemaType)}`);("code"in Se?Se.trackErrors:Se.errors!==!1)&&(this.errsCount=ae.gen.const("_errs",d.default.errors))}result(ae,Se,De){this.failResult((0,u.not)(ae),Se,De)}failResult(ae,Se,De){this.gen.if(ae),De?De():this.error(),Se?(this.gen.else(),Se(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(ae,Se){this.failResult((0,u.not)(ae),void 0,Se)}fail(ae){if(ae===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(ae),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(ae){if(!this.$data)return this.fail(ae);const{schemaCode:Se}=this;this.fail((0,u._)`${Se} !== undefined && (${(0,u.or)(this.invalid$data(),ae)})`)}error(ae,Se,De){if(Se){this.setParams(Se),this._error(ae,De),this.setParams({});return}this._error(ae,De)}_error(ae,Se){(ae?x.reportExtraError:x.reportError)(this,this.def.error,Se)}$dataError(){(0,x.reportError)(this,this.def.$dataError||x.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,x.resetErrorsCount)(this.gen,this.errsCount)}ok(ae){this.allErrors||this.gen.if(ae)}setParams(ae,Se){Se?Object.assign(this.params,ae):this.params=ae}block$data(ae,Se,De=u.nil){this.gen.block(()=>{this.check$data(ae,De),Se()})}check$data(ae=u.nil,Se=u.nil){if(!this.$data)return;const{gen:De,schemaCode:bs,schemaType:Je,def:pi}=this;De.if((0,u.or)((0,u._)`${bs} === undefined`,Se)),ae!==u.nil&&De.assign(ae,!0),(Je.length||pi.validateSchema)&&(De.elseIf(this.invalid$data()),this.$dataError(),ae!==u.nil&&De.assign(ae,!1)),De.else()}invalid$data(){const{gen:ae,schemaCode:Se,schemaType:De,def:bs,it:Je}=this;return(0,u.or)(pi(),Os());function pi(){if(De.length){if(!(Se instanceof u.Name))throw new Error("ajv implementation error");const ji=Array.isArray(De)?De:[De];return(0,u._)`${(0,n.checkDataTypes)(ji,Se,Je.opts.strictNumbers,n.DataType.Wrong)}`}return u.nil}function Os(){if(bs.validateSchema){const ji=ae.scopeValue("validate$data",{ref:bs.validateSchema});return(0,u._)`!${ji}(${Se})`}return u.nil}}subschema(ae,Se){const De=(0,l.getSubschema)(this.it,ae);(0,l.extendSubschemaData)(De,this.it,ae),(0,l.extendSubschemaMode)(De,ae);const bs={...this.it,...De,items:void 0,props:void 0};return D(bs,Se),bs}mergeEvaluated(ae,Se){const{it:De,gen:bs}=this;De.opts.unevaluated&&(De.props!==!0&&ae.props!==void 0&&(De.props=v.mergeEvaluated.props(bs,ae.props,De.props,Se)),De.items!==!0&&ae.items!==void 0&&(De.items=v.mergeEvaluated.items(bs,ae.items,De.items,Se)))}mergeValidEvaluated(ae,Se){const{it:De,gen:bs}=this;if(De.opts.unevaluated&&(De.props!==!0||De.items!==!0))return bs.if(Se,()=>this.mergeEvaluated(ae,u.Name)),!0}}validate$1.KeywordCxt=ve;function Ke(se,ae,Se,De){const bs=new ve(se,Se,ae);"code"in Se?Se.code(bs,De):bs.$data&&Se.validate?(0,a.funcKeywordCode)(bs,Se):"macro"in Se?(0,a.macroKeywordCode)(bs,Se):(Se.compile||Se.validate)&&(0,a.funcKeywordCode)(bs,Se)}const Ve=/^\/(?:[^~]|~0|~1)*$/,at=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function vr(se,{dataLevel:ae,dataNames:Se,dataPathArr:De}){let bs,Je;if(se==="")return d.default.rootData;if(se[0]==="/"){if(!Ve.test(se))throw new Error(`Invalid JSON-pointer: ${se}`);bs=se,Je=d.default.rootData}else{const ua=at.exec(se);if(!ua)throw new Error(`Invalid JSON-pointer: ${se}`);const da=+ua[1];if(bs=ua[2],bs==="#"){if(da>=ae)throw new Error(ji("property/index",da));return De[ae-da]}if(da>ae)throw new Error(ji("data",da));if(Je=Se[ae-da],!bs)return Je}let pi=Je;const Os=bs.split("/");for(const ua of Os)ua&&(Je=(0,u._)`${Je}${(0,u.getProperty)((0,v.unescapeJsonPointer)(ua))}`,pi=(0,u._)`${pi} && ${Je}`);return pi;function ji(ua,da){return`Cannot access ${ua} ${da} levels up, current level is ${ae}`}}return validate$1.getData=vr,validate$1}var validation_error$1={},hasRequiredValidation_error$1;function requireValidation_error$1(){if(hasRequiredValidation_error$1)return validation_error$1;hasRequiredValidation_error$1=1,Object.defineProperty(validation_error$1,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return validation_error$1.default=e,validation_error$1}var ref_error$1={},hasRequiredRef_error$1;function requireRef_error$1(){if(hasRequiredRef_error$1)return ref_error$1;hasRequiredRef_error$1=1,Object.defineProperty(ref_error$1,"__esModule",{value:!0});const e=requireResolve$1();class t extends Error{constructor(n,i,a,l){super(l||`can't resolve reference ${a} from id ${i}`),this.missingRef=(0,e.resolveUrl)(n,i,a),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return ref_error$1.default=t,ref_error$1}var compile$1={},hasRequiredCompile$1;function requireCompile$1(){if(hasRequiredCompile$1)return compile$1;hasRequiredCompile$1=1,Object.defineProperty(compile$1,"__esModule",{value:!0}),compile$1.resolveSchema=compile$1.getCompilingSchema=compile$1.resolveRef=compile$1.compileSchema=compile$1.SchemaEnv=void 0;const e=requireCodegen$1(),t=requireValidation_error$1(),r=requireNames$1(),n=requireResolve$1(),i=requireUtil$1(),a=requireValidate$1();class l{constructor(q){var C;this.refs={},this.dynamicAnchors={};let D;typeof q.schema=="object"&&(D=q.schema),this.schema=q.schema,this.schemaId=q.schemaId,this.root=q.root||this,this.baseId=(C=q.baseId)!==null&&C!==void 0?C:(0,n.normalizeId)(D?.[q.schemaId||"$id"]),this.schemaPath=q.schemaPath,this.localRefs=q.localRefs,this.meta=q.meta,this.$async=D?.$async,this.refs={}}}compile$1.SchemaEnv=l;function u(P){const q=v.call(this,P);if(q)return q;const C=(0,n.getFullPath)(this.opts.uriResolver,P.root.baseId),{es5:D,lines:G}=this.opts.code,{ownProperties:B}=this.opts,H=new e.CodeGen(this.scope,{es5:D,lines:G,ownProperties:B});let X;P.$async&&(X=H.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const re=H.scopeName("validate");P.validateName=re;const pe={gen:H,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:H.scopeValue("schema",this.opts.code.source===!0?{ref:P.schema,code:(0,e.stringify)(P.schema)}:{ref:P.schema}),validateName:re,ValidationError:X,schema:P.schema,schemaEnv:P,rootId:C,baseId:P.baseId||C,schemaPath:e.nil,errSchemaPath:P.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let $e;try{this._compilations.add(P),(0,a.validateFunctionCode)(pe),H.optimize(this.opts.code.optimize);const ke=H.toString();$e=`${H.scopeRefs(r.default.scope)}return ${ke}`,this.opts.code.process&&($e=this.opts.code.process($e,P));const Ye=new Function(`${r.default.self}`,`${r.default.scope}`,$e)(this,this.scope.get());if(this.scope.value(re,{ref:Ye}),Ye.errors=null,Ye.schema=P.schema,Ye.schemaEnv=P,P.$async&&(Ye.$async=!0),this.opts.code.source===!0&&(Ye.source={validateName:re,validateCode:ke,scopeValues:H._values}),this.opts.unevaluated){const{props:Ar,items:hi}=pe;Ye.evaluated={props:Ar instanceof e.Name?void 0:Ar,items:hi instanceof e.Name?void 0:hi,dynamicProps:Ar instanceof e.Name,dynamicItems:hi instanceof e.Name},Ye.source&&(Ye.source.evaluated=(0,e.stringify)(Ye.evaluated))}return P.validate=Ye,P}catch(ke){throw delete P.validate,delete P.validateName,$e&&this.logger.error("Error compiling schema, function code:",$e),ke}finally{this._compilations.delete(P)}}compile$1.compileSchema=u;function d(P,q,C){var D;C=(0,n.resolveUrl)(this.opts.uriResolver,q,C);const G=P.refs[C];if(G)return G;let B=$.call(this,P,C);if(B===void 0){const H=(D=P.localRefs)===null||D===void 0?void 0:D[C],{schemaId:X}=this.opts;H&&(B=new l({schema:H,schemaId:X,root:P,baseId:q}))}if(B!==void 0)return P.refs[C]=m.call(this,B)}compile$1.resolveRef=d;function m(P){return(0,n.inlineRef)(P.schema,this.opts.inlineRefs)?P.schema:P.validate?P:u.call(this,P)}function v(P){for(const q of this._compilations)if(x(q,P))return q}compile$1.getCompilingSchema=v;function x(P,q){return P.schema===q.schema&&P.root===q.root&&P.baseId===q.baseId}function $(P,q){let C;for(;typeof(C=this.refs[q])=="string";)q=C;return C||this.schemas[q]||T.call(this,P,q)}function T(P,q){const C=this.opts.uriResolver.parse(q),D=(0,n._getFullPath)(this.opts.uriResolver,C);let G=(0,n.getFullPath)(this.opts.uriResolver,P.baseId,void 0);if(Object.keys(P.schema).length>0&&D===G)return L.call(this,C,P);const B=(0,n.normalizeId)(D),H=this.refs[B]||this.schemas[B];if(typeof H=="string"){const X=T.call(this,P,H);return typeof X?.schema!="object"?void 0:L.call(this,C,X)}if(typeof H?.schema=="object"){if(H.validate||u.call(this,H),B===(0,n.normalizeId)(q)){const{schema:X}=H,{schemaId:re}=this.opts,pe=X[re];return pe&&(G=(0,n.resolveUrl)(this.opts.uriResolver,G,pe)),new l({schema:X,schemaId:re,root:P,baseId:G})}return L.call(this,C,H)}}compile$1.resolveSchema=T;const A=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function L(P,{baseId:q,schema:C,root:D}){var G;if(((G=P.fragment)===null||G===void 0?void 0:G[0])!=="/")return;for(const X of P.fragment.slice(1).split("/")){if(typeof C=="boolean")return;const re=C[(0,i.unescapeFragment)(X)];if(re===void 0)return;C=re;const pe=typeof C=="object"&&C[this.opts.schemaId];!A.has(X)&&pe&&(q=(0,n.resolveUrl)(this.opts.uriResolver,q,pe))}let B;if(typeof C!="boolean"&&C.$ref&&!(0,i.schemaHasRulesButRef)(C,this.RULES)){const X=(0,n.resolveUrl)(this.opts.uriResolver,q,C.$ref);B=T.call(this,D,X)}const{schemaId:H}=this.opts;if(B=B||new l({schema:C,schemaId:H,root:D,baseId:q}),B.schema!==B.root.schema)return B}return compile$1}const $id$3="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description$1="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$3="object",required$3=["$data"],properties$5={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$3=!1,require$$9$1={$id:$id$3,description:description$1,type:type$3,required:required$3,properties:properties$5,additionalProperties:additionalProperties$3};var uri$1={},fastUri$1={exports:{}},utils$1,hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r($){let T="",A=0,L=0;for(L=0;L<$.length;L++)if(A=$[L].charCodeAt(0),A!==48){if(!(A>=48&&A<=57||A>=65&&A<=70||A>=97&&A<=102))return"";T+=$[L];break}for(L+=1;L<$.length;L++){if(A=$[L].charCodeAt(0),!(A>=48&&A<=57||A>=65&&A<=70||A>=97&&A<=102))return"";T+=$[L]}return T}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i($){return $.length=0,!0}function a($,T,A){if($.length){const L=r($);if(L!=="")T.push(L);else return A.error=!0,!1;$.length=0}return!0}function l($){let T=0;const A={error:!1,address:"",zone:""},L=[],P=[];let q=!1,C=!1,D=a;for(let G=0;G<$.length;G++){const B=$[G];if(!(B==="["||B==="]"))if(B===":"){if(q===!0&&(C=!0),!D(P,L,A))break;if(++T>7){A.error=!0;break}G>0&&$[G-1]===":"&&(q=!0),L.push(":");continue}else if(B==="%"){if(!D(P,L,A))break;D=i}else{P.push(B);continue}}return P.length&&(D===i?A.zone=P.join(""):C?L.push(P.join("")):L.push(r(P))),A.address=L.join(""),A}function u($){if(d($,":")<2)return{host:$,isIPV6:!1};const T=l($);if(T.error)return{host:$,isIPV6:!1};{let A=T.address,L=T.address;return T.zone&&(A+="%"+T.zone,L+="%25"+T.zone),{host:A,isIPV6:!0,escapedHost:L}}}function d($,T){let A=0;for(let L=0;L<$.length;L++)$[L]===T&&A++;return A}function m($){let T=$;const A=[];let L=-1,P=0;for(;P=T.length;){if(P===1){if(T===".")break;if(T==="/"){A.push("/");break}else{A.push(T);break}}else if(P===2){if(T[0]==="."){if(T[1]===".")break;if(T[1]==="/"){T=T.slice(2);continue}}else if(T[0]==="/"&&(T[1]==="."||T[1]==="/")){A.push("/");break}}else if(P===3&&T==="/.."){A.length!==0&&A.pop(),A.push("/");break}if(T[0]==="."){if(T[1]==="."){if(T[2]==="/"){T=T.slice(3);continue}}else if(T[1]==="/"){T=T.slice(2);continue}}else if(T[0]==="/"&&T[1]==="."){if(T[2]==="/"){T=T.slice(2);continue}else if(T[2]==="."&&T[3]==="/"){T=T.slice(3),A.length!==0&&A.pop();continue}}if((L=T.indexOf("/",1))===-1){A.push(T);break}else A.push(T.slice(0,L)),T=T.slice(L)}return A.join("")}function v($,T){const A=T!==!0?escape:unescape;return $.scheme!==void 0&&($.scheme=A($.scheme)),$.userinfo!==void 0&&($.userinfo=A($.userinfo)),$.host!==void 0&&($.host=A($.host)),$.path!==void 0&&($.path=A($.path)),$.query!==void 0&&($.query=A($.query)),$.fragment!==void 0&&($.fragment=A($.fragment)),$}function x($){const T=[];if($.userinfo!==void 0&&(T.push($.userinfo),T.push("@")),$.host!==void 0){let A=unescape($.host);if(!t(A)){const L=u(A);L.isIPV6===!0?A=`[${L.escapedHost}]`:A=$.host}T.push(A)}return(typeof $.port=="number"||typeof $.port=="string")&&(T.push(":"),T.push(String($.port))),T.length?T.join(""):void 0}return utils$1={nonSimpleDomain:n,recomposeAuthority:x,normalizeComponentEncoding:v,removeDotSegments:m,isIPv4:t,isUUID:e,normalizeIPv6:u,stringArrayToHexStripped:r},utils$1}var schemes$1,hasRequiredSchemes$1;function requireSchemes$1(){if(hasRequiredSchemes$1)return schemes$1;hasRequiredSchemes$1=1;const{isUUID:e}=requireUtils$1(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(B){return r.indexOf(B)!==-1}function i(B){return B.secure===!0?!0:B.secure===!1?!1:B.scheme?B.scheme.length===3&&(B.scheme[0]==="w"||B.scheme[0]==="W")&&(B.scheme[1]==="s"||B.scheme[1]==="S")&&(B.scheme[2]==="s"||B.scheme[2]==="S"):!1}function a(B){return B.host||(B.error=B.error||"HTTP URIs must have a host."),B}function l(B){const H=String(B.scheme).toLowerCase()==="https";return(B.port===(H?443:80)||B.port==="")&&(B.port=void 0),B.path||(B.path="/"),B}function u(B){return B.secure=i(B),B.resourceName=(B.path||"/")+(B.query?"?"+B.query:""),B.path=void 0,B.query=void 0,B}function d(B){if((B.port===(i(B)?443:80)||B.port==="")&&(B.port=void 0),typeof B.secure=="boolean"&&(B.scheme=B.secure?"wss":"ws",B.secure=void 0),B.resourceName){const[H,X]=B.resourceName.split("?");B.path=H&&H!=="/"?H:void 0,B.query=X,B.resourceName=void 0}return B.fragment=void 0,B}function m(B,H){if(!B.path)return B.error="URN can not be parsed",B;const X=B.path.match(t);if(X){const re=H.scheme||B.scheme||"urn";B.nid=X[1].toLowerCase(),B.nss=X[2];const pe=`${re}:${H.nid||B.nid}`,$e=G(pe);B.path=void 0,$e&&(B=$e.parse(B,H))}else B.error=B.error||"URN can not be parsed.";return B}function v(B,H){if(B.nid===void 0)throw new Error("URN without nid cannot be serialized");const X=H.scheme||B.scheme||"urn",re=B.nid.toLowerCase(),pe=`${X}:${H.nid||re}`,$e=G(pe);$e&&(B=$e.serialize(B,H));const ke=B,Ne=B.nss;return ke.path=`${re||H.nid}:${Ne}`,H.skipEscape=!0,ke}function x(B,H){const X=B;return X.uuid=X.nss,X.nss=void 0,!H.tolerant&&(!X.uuid||!e(X.uuid))&&(X.error=X.error||"UUID is not valid."),X}function $(B){const H=B;return H.nss=(B.uuid||"").toLowerCase(),H}const T={scheme:"http",domainHost:!0,parse:a,serialize:l},A={scheme:"https",domainHost:T.domainHost,parse:a,serialize:l},L={scheme:"ws",domainHost:!0,parse:u,serialize:d},P={scheme:"wss",domainHost:L.domainHost,parse:L.parse,serialize:L.serialize},D={http:T,https:A,ws:L,wss:P,urn:{scheme:"urn",parse:m,serialize:v,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:x,serialize:$,skipNormalize:!0}};Object.setPrototypeOf(D,null);function G(B){return B&&(D[B]||D[B.toLowerCase()])||void 0}return schemes$1={wsIsSecure:i,SCHEMES:D,isValidSchemeName:n,getSchemeHandler:G},schemes$1}var hasRequiredFastUri$1;function requireFastUri$1(){if(hasRequiredFastUri$1)return fastUri$1.exports;hasRequiredFastUri$1=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:i,nonSimpleDomain:a}=requireUtils$1(),{SCHEMES:l,getSchemeHandler:u}=requireSchemes$1();function d(P,q){return typeof P=="string"?P=$(A(P,q),q):typeof P=="object"&&(P=A($(P,q),q)),P}function m(P,q,C){const D=C?Object.assign({scheme:"null"},C):{scheme:"null"},G=v(A(P,D),A(q,D),D,!0);return D.skipEscape=!0,$(G,D)}function v(P,q,C,D){const G={};return D||(P=A($(P,C),C),q=A($(q,C),C)),C=C||{},!C.tolerant&&q.scheme?(G.scheme=q.scheme,G.userinfo=q.userinfo,G.host=q.host,G.port=q.port,G.path=t(q.path||""),G.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(G.userinfo=q.userinfo,G.host=q.host,G.port=q.port,G.path=t(q.path||""),G.query=q.query):(q.path?(q.path[0]==="/"?G.path=t(q.path):((P.userinfo!==void 0||P.host!==void 0||P.port!==void 0)&&!P.path?G.path="/"+q.path:P.path?G.path=P.path.slice(0,P.path.lastIndexOf("/")+1)+q.path:G.path=q.path,G.path=t(G.path)),G.query=q.query):(G.path=P.path,q.query!==void 0?G.query=q.query:G.query=P.query),G.userinfo=P.userinfo,G.host=P.host,G.port=P.port),G.scheme=P.scheme),G.fragment=q.fragment,G}function x(P,q,C){return typeof P=="string"?(P=unescape(P),P=$(n(A(P,C),!0),{...C,skipEscape:!0})):typeof P=="object"&&(P=$(n(P,!0),{...C,skipEscape:!0})),typeof q=="string"?(q=unescape(q),q=$(n(A(q,C),!0),{...C,skipEscape:!0})):typeof q=="object"&&(q=$(n(q,!0),{...C,skipEscape:!0})),P.toLowerCase()===q.toLowerCase()}function $(P,q){const C={host:P.host,scheme:P.scheme,userinfo:P.userinfo,port:P.port,path:P.path,query:P.query,nid:P.nid,nss:P.nss,uuid:P.uuid,fragment:P.fragment,reference:P.reference,resourceName:P.resourceName,secure:P.secure,error:""},D=Object.assign({},q),G=[],B=u(D.scheme||C.scheme);B&&B.serialize&&B.serialize(C,D),C.path!==void 0&&(D.skipEscape?C.path=unescape(C.path):(C.path=escape(C.path),C.scheme!==void 0&&(C.path=C.path.split("%3A").join(":")))),D.reference!=="suffix"&&C.scheme&&G.push(C.scheme,":");const H=r(C);if(H!==void 0&&(D.reference!=="suffix"&&G.push("//"),G.push(H),C.path&&C.path[0]!=="/"&&G.push("/")),C.path!==void 0){let X=C.path;!D.absolutePath&&(!B||!B.absolutePath)&&(X=t(X)),H===void 0&&X[0]==="/"&&X[1]==="/"&&(X="/%2F"+X.slice(2)),G.push(X)}return C.query!==void 0&&G.push("?",C.query),C.fragment!==void 0&&G.push("#",C.fragment),G.join("")}const T=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function A(P,q){const C=Object.assign({},q),D={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let G=!1;C.reference==="suffix"&&(C.scheme?P=C.scheme+":"+P:P="//"+P);const B=P.match(T);if(B){if(D.scheme=B[1],D.userinfo=B[3],D.host=B[4],D.port=parseInt(B[5],10),D.path=B[6]||"",D.query=B[7],D.fragment=B[8],isNaN(D.port)&&(D.port=B[5]),D.host)if(i(D.host)===!1){const re=e(D.host);D.host=re.host.toLowerCase(),G=re.isIPV6}else G=!0;D.scheme===void 0&&D.userinfo===void 0&&D.host===void 0&&D.port===void 0&&D.query===void 0&&!D.path?D.reference="same-document":D.scheme===void 0?D.reference="relative":D.fragment===void 0?D.reference="absolute":D.reference="uri",C.reference&&C.reference!=="suffix"&&C.reference!==D.reference&&(D.error=D.error||"URI is not a "+C.reference+" reference.");const H=u(C.scheme||D.scheme);if(!C.unicodeSupport&&(!H||!H.unicodeSupport)&&D.host&&(C.domainHost||H&&H.domainHost)&&G===!1&&a(D.host))try{D.host=URL.domainToASCII(D.host.toLowerCase())}catch(X){D.error=D.error||"Host's domain name can not be converted to ASCII: "+X}(!H||H&&!H.skipNormalize)&&(P.indexOf("%")!==-1&&(D.scheme!==void 0&&(D.scheme=unescape(D.scheme)),D.host!==void 0&&(D.host=unescape(D.host))),D.path&&(D.path=escape(unescape(D.path))),D.fragment&&(D.fragment=encodeURI(decodeURIComponent(D.fragment)))),H&&H.parse&&H.parse(D,C)}else D.error=D.error||"URI can not be parsed.";return D}const L={SCHEMES:l,normalize:d,resolve:m,resolveComponent:v,equal:x,serialize:$,parse:A};return fastUri$1.exports=L,fastUri$1.exports.default=L,fastUri$1.exports.fastUri=L,fastUri$1.exports}var hasRequiredUri$1;function requireUri$1(){if(hasRequiredUri$1)return uri$1;hasRequiredUri$1=1,Object.defineProperty(uri$1,"__esModule",{value:!0});const e=requireFastUri$1();return e.code='require("ajv/dist/runtime/uri").default',uri$1.default=e,uri$1}var hasRequiredCore$3;function requireCore$3(){return hasRequiredCore$3||(hasRequiredCore$3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=requireValidate$1();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=requireCodegen$1();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=requireValidation_error$1(),i=requireRef_error$1(),a=requireRules$1(),l=requireCompile$1(),u=requireCodegen$1(),d=requireResolve$1(),m=requireDataType$1(),v=requireUtil$1(),x=require$$9$1,$=requireUri$1(),T=(Ee,ce)=>new RegExp(Ee,ce);T.code="new RegExp";const A=["removeAdditional","useDefaults","coerceTypes"],L=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),P={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},q={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},C=200;function D(Ee){var ce,Re,ye,Q,ee,ve,Ke,Ve,at,vr,se,ae,Se,De,bs,Je,pi,Os,ji,ua,da,ga,ca,ma,ya;const vi=Ee.strict,fa=(ce=Ee.code)===null||ce===void 0?void 0:ce.optimize,ha=fa===!0||fa===void 0?1:fa||0,$a=(ye=(Re=Ee.code)===null||Re===void 0?void 0:Re.regExp)!==null&&ye!==void 0?ye:T,ue=(Q=Ee.uriResolver)!==null&&Q!==void 0?Q:$.default;return{strictSchema:(ve=(ee=Ee.strictSchema)!==null&&ee!==void 0?ee:vi)!==null&&ve!==void 0?ve:!0,strictNumbers:(Ve=(Ke=Ee.strictNumbers)!==null&&Ke!==void 0?Ke:vi)!==null&&Ve!==void 0?Ve:!0,strictTypes:(vr=(at=Ee.strictTypes)!==null&&at!==void 0?at:vi)!==null&&vr!==void 0?vr:"log",strictTuples:(ae=(se=Ee.strictTuples)!==null&&se!==void 0?se:vi)!==null&&ae!==void 0?ae:"log",strictRequired:(De=(Se=Ee.strictRequired)!==null&&Se!==void 0?Se:vi)!==null&&De!==void 0?De:!1,code:Ee.code?{...Ee.code,optimize:ha,regExp:$a}:{optimize:ha,regExp:$a},loopRequired:(bs=Ee.loopRequired)!==null&&bs!==void 0?bs:C,loopEnum:(Je=Ee.loopEnum)!==null&&Je!==void 0?Je:C,meta:(pi=Ee.meta)!==null&&pi!==void 0?pi:!0,messages:(Os=Ee.messages)!==null&&Os!==void 0?Os:!0,inlineRefs:(ji=Ee.inlineRefs)!==null&&ji!==void 0?ji:!0,schemaId:(ua=Ee.schemaId)!==null&&ua!==void 0?ua:"$id",addUsedSchema:(da=Ee.addUsedSchema)!==null&&da!==void 0?da:!0,validateSchema:(ga=Ee.validateSchema)!==null&&ga!==void 0?ga:!0,validateFormats:(ca=Ee.validateFormats)!==null&&ca!==void 0?ca:!0,unicodeRegExp:(ma=Ee.unicodeRegExp)!==null&&ma!==void 0?ma:!0,int32range:(ya=Ee.int32range)!==null&&ya!==void 0?ya:!0,uriResolver:ue}}class G{constructor(ce={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ce=this.opts={...ce,...D(ce)};const{es5:Re,lines:ye}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:L,es5:Re,lines:ye}),this.logger=Ne(ce.logger);const Q=ce.validateFormats;ce.validateFormats=!1,this.RULES=(0,a.getRules)(),B.call(this,P,ce,"NOT SUPPORTED"),B.call(this,q,ce,"DEPRECATED","warn"),this._metaOpts=$e.call(this),ce.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ce.keywords&&pe.call(this,ce.keywords),typeof ce.meta=="object"&&this.addMetaSchema(ce.meta),X.call(this),ce.validateFormats=Q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ce,meta:Re,schemaId:ye}=this.opts;let Q=x;ye==="id"&&(Q={...x},Q.id=Q.$id,delete Q.$id),Re&&ce&&this.addMetaSchema(Q,Q[ye],!1)}defaultMeta(){const{meta:ce,schemaId:Re}=this.opts;return this.opts.defaultMeta=typeof ce=="object"?ce[Re]||ce:void 0}validate(ce,Re){let ye;if(typeof ce=="string"){if(ye=this.getSchema(ce),!ye)throw new Error(`no schema with key or ref "${ce}"`)}else ye=this.compile(ce);const Q=ye(Re);return"$async"in ye||(this.errors=ye.errors),Q}compile(ce,Re){const ye=this._addSchema(ce,Re);return ye.validate||this._compileSchemaEnv(ye)}compileAsync(ce,Re){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ye}=this.opts;return Q.call(this,ce,Re);async function Q(vr,se){await ee.call(this,vr.$schema);const ae=this._addSchema(vr,se);return ae.validate||ve.call(this,ae)}async function ee(vr){vr&&!this.getSchema(vr)&&await Q.call(this,{$ref:vr},!0)}async function ve(vr){try{return this._compileSchemaEnv(vr)}catch(se){if(!(se instanceof i.default))throw se;return Ke.call(this,se),await Ve.call(this,se.missingSchema),ve.call(this,vr)}}function Ke({missingSchema:vr,missingRef:se}){if(this.refs[vr])throw new Error(`AnySchema ${vr} is loaded but ${se} cannot be resolved`)}async function Ve(vr){const se=await at.call(this,vr);this.refs[vr]||await ee.call(this,se.$schema),this.refs[vr]||this.addSchema(se,vr,Re)}async function at(vr){const se=this._loading[vr];if(se)return se;try{return await(this._loading[vr]=ye(vr))}finally{delete this._loading[vr]}}}addSchema(ce,Re,ye,Q=this.opts.validateSchema){if(Array.isArray(ce)){for(const ve of ce)this.addSchema(ve,void 0,ye,Q);return this}let ee;if(typeof ce=="object"){const{schemaId:ve}=this.opts;if(ee=ce[ve],ee!==void 0&&typeof ee!="string")throw new Error(`schema ${ve} must be string`)}return Re=(0,d.normalizeId)(Re||ee),this._checkUnique(Re),this.schemas[Re]=this._addSchema(ce,ye,Re,Q,!0),this}addMetaSchema(ce,Re,ye=this.opts.validateSchema){return this.addSchema(ce,Re,!0,ye),this}validateSchema(ce,Re){if(typeof ce=="boolean")return!0;let ye;if(ye=ce.$schema,ye!==void 0&&typeof ye!="string")throw new Error("$schema must be a string");if(ye=ye||this.opts.defaultMeta||this.defaultMeta(),!ye)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Q=this.validate(ye,ce);if(!Q&&Re){const ee="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ee);else throw new Error(ee)}return Q}getSchema(ce){let Re;for(;typeof(Re=H.call(this,ce))=="string";)ce=Re;if(Re===void 0){const{schemaId:ye}=this.opts,Q=new l.SchemaEnv({schema:{},schemaId:ye});if(Re=l.resolveSchema.call(this,Q,ce),!Re)return;this.refs[ce]=Re}return Re.validate||this._compileSchemaEnv(Re)}removeSchema(ce){if(ce instanceof RegExp)return this._removeAllSchemas(this.schemas,ce),this._removeAllSchemas(this.refs,ce),this;switch(typeof ce){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Re=H.call(this,ce);return typeof Re=="object"&&this._cache.delete(Re.schema),delete this.schemas[ce],delete this.refs[ce],this}case"object":{const Re=ce;this._cache.delete(Re);let ye=ce[this.opts.schemaId];return ye&&(ye=(0,d.normalizeId)(ye),delete this.schemas[ye],delete this.refs[ye]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ce){for(const Re of ce)this.addKeyword(Re);return this}addKeyword(ce,Re){let ye;if(typeof ce=="string")ye=ce,typeof Re=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Re.keyword=ye);else if(typeof ce=="object"&&Re===void 0){if(Re=ce,ye=Re.keyword,Array.isArray(ye)&&!ye.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ar.call(this,ye,Re),!Re)return(0,v.eachItem)(ye,ee=>hi.call(this,ee)),this;Ui.call(this,Re);const Q={...Re,type:(0,m.getJSONTypes)(Re.type),schemaType:(0,m.getJSONTypes)(Re.schemaType)};return(0,v.eachItem)(ye,Q.type.length===0?ee=>hi.call(this,ee,Q):ee=>Q.type.forEach(ve=>hi.call(this,ee,Q,ve))),this}getKeyword(ce){const Re=this.RULES.all[ce];return typeof Re=="object"?Re.definition:!!Re}removeKeyword(ce){const{RULES:Re}=this;delete Re.keywords[ce],delete Re.all[ce];for(const ye of Re.rules){const Q=ye.rules.findIndex(ee=>ee.keyword===ce);Q>=0&&ye.rules.splice(Q,1)}return this}addFormat(ce,Re){return typeof Re=="string"&&(Re=new RegExp(Re)),this.formats[ce]=Re,this}errorsText(ce=this.errors,{separator:Re=", ",dataVar:ye="data"}={}){return!ce||ce.length===0?"No errors":ce.map(Q=>`${ye}${Q.instancePath} ${Q.message}`).reduce((Q,ee)=>Q+Re+ee)}$dataMetaSchema(ce,Re){const ye=this.RULES.all;ce=JSON.parse(JSON.stringify(ce));for(const Q of Re){const ee=Q.split("/").slice(1);let ve=ce;for(const Ke of ee)ve=ve[Ke];for(const Ke in ye){const Ve=ye[Ke];if(typeof Ve!="object")continue;const{$data:at}=Ve.definition,vr=ve[Ke];at&&vr&&(ve[Ke]=Gi(vr))}}return ce}_removeAllSchemas(ce,Re){for(const ye in ce){const Q=ce[ye];(!Re||Re.test(ye))&&(typeof Q=="string"?delete ce[ye]:Q&&!Q.meta&&(this._cache.delete(Q.schema),delete ce[ye]))}}_addSchema(ce,Re,ye,Q=this.opts.validateSchema,ee=this.opts.addUsedSchema){let ve;const{schemaId:Ke}=this.opts;if(typeof ce=="object")ve=ce[Ke];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ce!="boolean")throw new Error("schema must be object or boolean")}let Ve=this._cache.get(ce);if(Ve!==void 0)return Ve;ye=(0,d.normalizeId)(ve||ye);const at=d.getSchemaRefs.call(this,ce,ye);return Ve=new l.SchemaEnv({schema:ce,schemaId:Ke,meta:Re,baseId:ye,localRefs:at}),this._cache.set(Ve.schema,Ve),ee&&!ye.startsWith("#")&&(ye&&this._checkUnique(ye),this.refs[ye]=Ve),Q&&this.validateSchema(ce,!0),Ve}_checkUnique(ce){if(this.schemas[ce]||this.refs[ce])throw new Error(`schema with key or id "${ce}" already exists`)}_compileSchemaEnv(ce){if(ce.meta?this._compileMetaSchema(ce):l.compileSchema.call(this,ce),!ce.validate)throw new Error("ajv implementation error");return ce.validate}_compileMetaSchema(ce){const Re=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,ce)}finally{this.opts=Re}}}G.ValidationError=n.default,G.MissingRefError=i.default,e.default=G;function B(Ee,ce,Re,ye="error"){for(const Q in Ee){const ee=Q;ee in ce&&this.logger[ye](`${Re}: option ${Q}. ${Ee[ee]}`)}}function H(Ee){return Ee=(0,d.normalizeId)(Ee),this.schemas[Ee]||this.refs[Ee]}function X(){const Ee=this.opts.schemas;if(Ee)if(Array.isArray(Ee))this.addSchema(Ee);else for(const ce in Ee)this.addSchema(Ee[ce],ce)}function re(){for(const Ee in this.opts.formats){const ce=this.opts.formats[Ee];ce&&this.addFormat(Ee,ce)}}function pe(Ee){if(Array.isArray(Ee)){this.addVocabulary(Ee);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ce in Ee){const Re=Ee[ce];Re.keyword||(Re.keyword=ce),this.addKeyword(Re)}}function $e(){const Ee={...this.opts};for(const ce of A)delete Ee[ce];return Ee}const ke={log(){},warn(){},error(){}};function Ne(Ee){if(Ee===!1)return ke;if(Ee===void 0)return console;if(Ee.log&&Ee.warn&&Ee.error)return Ee;throw new Error("logger must implement log, warn and error methods")}const Ye=/^[a-z_$][a-z0-9_$:-]*$/i;function Ar(Ee,ce){const{RULES:Re}=this;if((0,v.eachItem)(Ee,ye=>{if(Re.keywords[ye])throw new Error(`Keyword ${ye} is already defined`);if(!Ye.test(ye))throw new Error(`Keyword ${ye} has invalid name`)}),!!ce&&ce.$data&&!("code"in ce||"validate"in ce))throw new Error('$data keyword must have "code" or "validate" function')}function hi(Ee,ce,Re){var ye;const Q=ce?.post;if(Re&&Q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ee}=this;let ve=Q?ee.post:ee.rules.find(({type:Ve})=>Ve===Re);if(ve||(ve={type:Re,rules:[]},ee.rules.push(ve)),ee.keywords[Ee]=!0,!ce)return;const Ke={keyword:Ee,definition:{...ce,type:(0,m.getJSONTypes)(ce.type),schemaType:(0,m.getJSONTypes)(ce.schemaType)}};ce.before?gi.call(this,ve,Ke,ce.before):ve.rules.push(Ke),ee.all[Ee]=Ke,(ye=ce.implements)===null||ye===void 0||ye.forEach(Ve=>this.addKeyword(Ve))}function gi(Ee,ce,Re){const ye=Ee.rules.findIndex(Q=>Q.keyword===Re);ye>=0?Ee.rules.splice(ye,0,ce):(Ee.rules.push(ce),this.logger.warn(`rule ${Re} is not defined`))}function Ui(Ee){let{metaSchema:ce}=Ee;ce!==void 0&&(Ee.$data&&this.opts.$data&&(ce=Gi(ce)),Ee.validateSchema=this.compile(ce,!0))}const ws={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Gi(Ee){return{anyOf:[Ee,ws]}}})(core$3)),core$3}var draft7$1={},core$2={},id$2={},hasRequiredId$1;function requireId$1(){if(hasRequiredId$1)return id$2;hasRequiredId$1=1,Object.defineProperty(id$2,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id$2.default=e,id$2}var ref$1={},hasRequiredRef$1;function requireRef$1(){if(hasRequiredRef$1)return ref$1;hasRequiredRef$1=1,Object.defineProperty(ref$1,"__esModule",{value:!0}),ref$1.callRef=ref$1.getValidate=void 0;const e=requireRef_error$1(),t=requireCode$2(),r=requireCodegen$1(),n=requireNames$1(),i=requireCompile$1(),a=requireUtil$1(),l={keyword:"$ref",schemaType:"string",code(m){const{gen:v,schema:x,it:$}=m,{baseId:T,schemaEnv:A,validateName:L,opts:P,self:q}=$,{root:C}=A;if((x==="#"||x==="#/")&&T===C.baseId)return G();const D=i.resolveRef.call(q,C,T,x);if(D===void 0)throw new e.default($.opts.uriResolver,T,x);if(D instanceof i.SchemaEnv)return B(D);return H(D);function G(){if(A===C)return d(m,L,A,A.$async);const X=v.scopeValue("root",{ref:C});return d(m,(0,r._)`${X}.validate`,C,C.$async)}function B(X){const re=u(m,X);d(m,re,X,X.$async)}function H(X){const re=v.scopeValue("schema",P.code.source===!0?{ref:X,code:(0,r.stringify)(X)}:{ref:X}),pe=v.name("valid"),$e=m.subschema({schema:X,dataTypes:[],schemaPath:r.nil,topSchemaRef:re,errSchemaPath:x},pe);m.mergeEvaluated($e),m.ok(pe)}}};function u(m,v){const{gen:x}=m;return v.validate?x.scopeValue("validate",{ref:v.validate}):(0,r._)`${x.scopeValue("wrapper",{ref:v})}.validate`}ref$1.getValidate=u;function d(m,v,x,$){const{gen:T,it:A}=m,{allErrors:L,schemaEnv:P,opts:q}=A,C=q.passContext?n.default.this:r.nil;$?D():G();function D(){if(!P.$async)throw new Error("async schema referenced by sync schema");const X=T.let("valid");T.try(()=>{T.code((0,r._)`await ${(0,t.callValidateCode)(m,v,C)}`),H(v),L||T.assign(X,!0)},re=>{T.if((0,r._)`!(${re} instanceof ${A.ValidationError})`,()=>T.throw(re)),B(re),L||T.assign(X,!1)}),m.ok(X)}function G(){m.result((0,t.callValidateCode)(m,v,C),()=>H(v),()=>B(v))}function B(X){const re=(0,r._)`${X}.errors`;T.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${re} : ${n.default.vErrors}.concat(${re})`),T.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function H(X){var re;if(!A.opts.unevaluated)return;const pe=(re=x?.validate)===null||re===void 0?void 0:re.evaluated;if(A.props!==!0)if(pe&&!pe.dynamicProps)pe.props!==void 0&&(A.props=a.mergeEvaluated.props(T,pe.props,A.props));else{const $e=T.var("props",(0,r._)`${X}.evaluated.props`);A.props=a.mergeEvaluated.props(T,$e,A.props,r.Name)}if(A.items!==!0)if(pe&&!pe.dynamicItems)pe.items!==void 0&&(A.items=a.mergeEvaluated.items(T,pe.items,A.items));else{const $e=T.var("items",(0,r._)`${X}.evaluated.items`);A.items=a.mergeEvaluated.items(T,$e,A.items,r.Name)}}}return ref$1.callRef=d,ref$1.default=l,ref$1}var hasRequiredCore$2;function requireCore$2(){if(hasRequiredCore$2)return core$2;hasRequiredCore$2=1,Object.defineProperty(core$2,"__esModule",{value:!0});const e=requireId$1(),t=requireRef$1(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return core$2.default=r,core$2}var validation$1={},limitNumber$1={},hasRequiredLimitNumber$1;function requireLimitNumber$1(){if(hasRequiredLimitNumber$1)return limitNumber$1;hasRequiredLimitNumber$1=1,Object.defineProperty(limitNumber$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:a,schemaCode:l})=>(0,e.str)`must be ${r[a].okStr} ${l}`,params:({keyword:a,schemaCode:l})=>(0,e._)`{comparison: ${r[a].okStr}, limit: ${l}}`},i={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(a){const{keyword:l,data:u,schemaCode:d}=a;a.fail$data((0,e._)`${u} ${r[l].fail} ${d} || isNaN(${u})`)}};return limitNumber$1.default=i,limitNumber$1}var multipleOf$1={},hasRequiredMultipleOf$1;function requireMultipleOf$1(){if(hasRequiredMultipleOf$1)return multipleOf$1;hasRequiredMultipleOf$1=1,Object.defineProperty(multipleOf$1,"__esModule",{value:!0});const e=requireCodegen$1(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,e._)`{multipleOf: ${n}}`},code(n){const{gen:i,data:a,schemaCode:l,it:u}=n,d=u.opts.multipleOfPrecision,m=i.let("res"),v=d?(0,e._)`Math.abs(Math.round(${m}) - ${m}) > 1e-${d}`:(0,e._)`${m} !== parseInt(${m})`;n.fail$data((0,e._)`(${l} === 0 || (${m} = ${a}/${l}, ${v}))`)}};return multipleOf$1.default=r,multipleOf$1}var limitLength$1={},ucs2length$1={},hasRequiredUcs2length$1;function requireUcs2length$1(){if(hasRequiredUcs2length$1)return ucs2length$1;hasRequiredUcs2length$1=1,Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,i=0,a;for(;i<r;)n++,a=t.charCodeAt(i++),a>=55296&&a<=56319&&i<r&&(a=t.charCodeAt(i),(a&64512)===56320&&i++);return n}return ucs2length$1.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',ucs2length$1}var hasRequiredLimitLength$1;function requireLimitLength$1(){if(hasRequiredLimitLength$1)return limitLength$1;hasRequiredLimitLength$1=1,Object.defineProperty(limitLength$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireUcs2length$1(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:l}){const u=a==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${u} than ${l} characters`},params:({schemaCode:a})=>(0,e._)`{limit: ${a}}`},code(a){const{keyword:l,data:u,schemaCode:d,it:m}=a,v=l==="maxLength"?e.operators.GT:e.operators.LT,x=m.opts.unicode===!1?(0,e._)`${u}.length`:(0,e._)`${(0,t.useFunc)(a.gen,r.default)}(${u})`;a.fail$data((0,e._)`${x} ${v} ${d}`)}};return limitLength$1.default=i,limitLength$1}var pattern$1={},hasRequiredPattern$1;function requirePattern$1(){if(hasRequiredPattern$1)return pattern$1;hasRequiredPattern$1=1,Object.defineProperty(pattern$1,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:a,$data:l,schema:u,schemaCode:d,it:m}=i,v=m.opts.unicodeRegExp?"u":"",x=l?(0,t._)`(new RegExp(${d}, ${v}))`:(0,e.usePattern)(i,u);i.fail$data((0,t._)`!${x}.test(${a})`)}};return pattern$1.default=n,pattern$1}var limitProperties$1={},hasRequiredLimitProperties$1;function requireLimitProperties$1(){if(hasRequiredLimitProperties$1)return limitProperties$1;hasRequiredLimitProperties$1=1,Object.defineProperty(limitProperties$1,"__esModule",{value:!0});const e=requireCodegen$1(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const a=n==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${i} properties`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:i,data:a,schemaCode:l}=n,u=i==="maxProperties"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`Object.keys(${a}).length ${u} ${l}`)}};return limitProperties$1.default=r,limitProperties$1}var required$2={},hasRequiredRequired$1;function requireRequired$1(){if(hasRequiredRequired$1)return required$2;hasRequiredRequired$1=1,Object.defineProperty(required$2,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),r=requireUtil$1(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:a}})=>(0,t.str)`must have required property '${a}'`,params:({params:{missingProperty:a}})=>(0,t._)`{missingProperty: ${a}}`},code(a){const{gen:l,schema:u,schemaCode:d,data:m,$data:v,it:x}=a,{opts:$}=x;if(!v&&u.length===0)return;const T=u.length>=$.loopRequired;if(x.allErrors?A():L(),$.strictRequired){const C=a.parentSchema.properties,{definedProperties:D}=a.it;for(const G of u)if(C?.[G]===void 0&&!D.has(G)){const B=x.schemaEnv.baseId+x.errSchemaPath,H=`required property "${G}" is not defined at "${B}" (strictRequired)`;(0,r.checkStrictMode)(x,H,x.opts.strictRequired)}}function A(){if(T||v)a.block$data(t.nil,P);else for(const C of u)(0,e.checkReportMissingProp)(a,C)}function L(){const C=l.let("missing");if(T||v){const D=l.let("valid",!0);a.block$data(D,()=>q(C,D)),a.ok(D)}else l.if((0,e.checkMissingProp)(a,u,C)),(0,e.reportMissingProp)(a,C),l.else()}function P(){l.forOf("prop",d,C=>{a.setParams({missingProperty:C}),l.if((0,e.noPropertyInData)(l,m,C,$.ownProperties),()=>a.error())})}function q(C,D){a.setParams({missingProperty:C}),l.forOf(C,d,()=>{l.assign(D,(0,e.propertyInData)(l,m,C,$.ownProperties)),l.if((0,t.not)(D),()=>{a.error(),l.break()})},t.nil)}}};return required$2.default=i,required$2}var limitItems$1={},hasRequiredLimitItems$1;function requireLimitItems$1(){if(hasRequiredLimitItems$1)return limitItems$1;hasRequiredLimitItems$1=1,Object.defineProperty(limitItems$1,"__esModule",{value:!0});const e=requireCodegen$1(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const a=n==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${i} items`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:i,data:a,schemaCode:l}=n,u=i==="maxItems"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`${a}.length ${u} ${l}`)}};return limitItems$1.default=r,limitItems$1}var uniqueItems$1={},equal$1={},hasRequiredEqual$1;function requireEqual$1(){if(hasRequiredEqual$1)return equal$1;hasRequiredEqual$1=1,Object.defineProperty(equal$1,"__esModule",{value:!0});const e=requireFastDeepEqual$1();return e.code='require("ajv/dist/runtime/equal").default',equal$1.default=e,equal$1}var hasRequiredUniqueItems$1;function requireUniqueItems$1(){if(hasRequiredUniqueItems$1)return uniqueItems$1;hasRequiredUniqueItems$1=1,Object.defineProperty(uniqueItems$1,"__esModule",{value:!0});const e=requireDataType$1(),t=requireCodegen$1(),r=requireUtil$1(),n=requireEqual$1(),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:l,j:u}})=>(0,t.str)`must NOT have duplicate items (items ## ${u} and ${l} are identical)`,params:({params:{i:l,j:u}})=>(0,t._)`{i: ${l}, j: ${u}}`},code(l){const{gen:u,data:d,$data:m,schema:v,parentSchema:x,schemaCode:$,it:T}=l;if(!m&&!v)return;const A=u.let("valid"),L=x.items?(0,e.getSchemaTypes)(x.items):[];l.block$data(A,P,(0,t._)`${$} === false`),l.ok(A);function P(){const G=u.let("i",(0,t._)`${d}.length`),B=u.let("j");l.setParams({i:G,j:B}),u.assign(A,!0),u.if((0,t._)`${G} > 1`,()=>(q()?C:D)(G,B))}function q(){return L.length>0&&!L.some(G=>G==="object"||G==="array")}function C(G,B){const H=u.name("item"),X=(0,e.checkDataTypes)(L,H,T.opts.strictNumbers,e.DataType.Wrong),re=u.const("indices",(0,t._)`{}`);u.for((0,t._)`;${G}--;`,()=>{u.let(H,(0,t._)`${d}[${G}]`),u.if(X,(0,t._)`continue`),L.length>1&&u.if((0,t._)`typeof ${H} == "string"`,(0,t._)`${H} += "_"`),u.if((0,t._)`typeof ${re}[${H}] == "number"`,()=>{u.assign(B,(0,t._)`${re}[${H}]`),l.error(),u.assign(A,!1).break()}).code((0,t._)`${re}[${H}] = ${G}`)})}function D(G,B){const H=(0,r.useFunc)(u,n.default),X=u.name("outer");u.label(X).for((0,t._)`;${G}--;`,()=>u.for((0,t._)`${B} = ${G}; ${B}--;`,()=>u.if((0,t._)`${H}(${d}[${G}], ${d}[${B}])`,()=>{l.error(),u.assign(A,!1).break(X)})))}}};return uniqueItems$1.default=a,uniqueItems$1}var _const$1={},hasRequired_const$1;function require_const$1(){if(hasRequired_const$1)return _const$1;hasRequired_const$1=1,Object.defineProperty(_const$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireEqual$1(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:a})=>(0,e._)`{allowedValue: ${a}}`},code(a){const{gen:l,data:u,$data:d,schemaCode:m,schema:v}=a;d||v&&typeof v=="object"?a.fail$data((0,e._)`!${(0,t.useFunc)(l,r.default)}(${u}, ${m})`):a.fail((0,e._)`${v} !== ${u}`)}};return _const$1.default=i,_const$1}var _enum$1={},hasRequired_enum$1;function require_enum$1(){if(hasRequired_enum$1)return _enum$1;hasRequired_enum$1=1,Object.defineProperty(_enum$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireEqual$1(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:a})=>(0,e._)`{allowedValues: ${a}}`},code(a){const{gen:l,data:u,$data:d,schema:m,schemaCode:v,it:x}=a;if(!d&&m.length===0)throw new Error("enum must have non-empty array");const $=m.length>=x.opts.loopEnum;let T;const A=()=>T??(T=(0,t.useFunc)(l,r.default));let L;if($||d)L=l.let("valid"),a.block$data(L,P);else{if(!Array.isArray(m))throw new Error("ajv implementation error");const C=l.const("vSchema",v);L=(0,e.or)(...m.map((D,G)=>q(C,G)))}a.pass(L);function P(){l.assign(L,!1),l.forOf("v",v,C=>l.if((0,e._)`${A()}(${u}, ${C})`,()=>l.assign(L,!0).break()))}function q(C,D){const G=m[D];return typeof G=="object"&&G!==null?(0,e._)`${A()}(${u}, ${C}[${D}])`:(0,e._)`${u} === ${G}`}}};return _enum$1.default=i,_enum$1}var hasRequiredValidation$1;function requireValidation$1(){if(hasRequiredValidation$1)return validation$1;hasRequiredValidation$1=1,Object.defineProperty(validation$1,"__esModule",{value:!0});const e=requireLimitNumber$1(),t=requireMultipleOf$1(),r=requireLimitLength$1(),n=requirePattern$1(),i=requireLimitProperties$1(),a=requireRequired$1(),l=requireLimitItems$1(),u=requireUniqueItems$1(),d=require_const$1(),m=require_enum$1(),v=[e.default,t.default,r.default,n.default,i.default,a.default,l.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,m.default];return validation$1.default=v,validation$1}var applicator$1={},additionalItems$1={},hasRequiredAdditionalItems$1;function requireAdditionalItems$1(){if(hasRequiredAdditionalItems$1)return additionalItems$1;hasRequiredAdditionalItems$1=1,Object.defineProperty(additionalItems$1,"__esModule",{value:!0}),additionalItems$1.validateAdditionalItems=void 0;const e=requireCodegen$1(),t=requireUtil$1(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{parentSchema:l,it:u}=a,{items:d}=l;if(!Array.isArray(d)){(0,t.checkStrictMode)(u,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(a,d)}};function i(a,l){const{gen:u,schema:d,data:m,keyword:v,it:x}=a;x.items=!0;const $=u.const("len",(0,e._)`${m}.length`);if(d===!1)a.setParams({len:l.length}),a.pass((0,e._)`${$} <= ${l.length}`);else if(typeof d=="object"&&!(0,t.alwaysValidSchema)(x,d)){const A=u.var("valid",(0,e._)`${$} <= ${l.length}`);u.if((0,e.not)(A),()=>T(A)),a.ok(A)}function T(A){u.forRange("i",l.length,$,L=>{a.subschema({keyword:v,dataProp:L,dataPropType:t.Type.Num},A),x.allErrors||u.if((0,e.not)(A),()=>u.break())})}}return additionalItems$1.validateAdditionalItems=i,additionalItems$1.default=n,additionalItems$1}var prefixItems$1={},items$1={},hasRequiredItems$1;function requireItems$1(){if(hasRequiredItems$1)return items$1;hasRequiredItems$1=1,Object.defineProperty(items$1,"__esModule",{value:!0}),items$1.validateTuple=void 0;const e=requireCodegen$1(),t=requireUtil$1(),r=requireCode$2(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(a){const{schema:l,it:u}=a;if(Array.isArray(l))return i(a,"additionalItems",l);u.items=!0,!(0,t.alwaysValidSchema)(u,l)&&a.ok((0,r.validateArray)(a))}};function i(a,l,u=a.schema){const{gen:d,parentSchema:m,data:v,keyword:x,it:$}=a;L(m),$.opts.unevaluated&&u.length&&$.items!==!0&&($.items=t.mergeEvaluated.items(d,u.length,$.items));const T=d.name("valid"),A=d.const("len",(0,e._)`${v}.length`);u.forEach((P,q)=>{(0,t.alwaysValidSchema)($,P)||(d.if((0,e._)`${A} > ${q}`,()=>a.subschema({keyword:x,schemaProp:q,dataProp:q},T)),a.ok(T))});function L(P){const{opts:q,errSchemaPath:C}=$,D=u.length,G=D===P.minItems&&(D===P.maxItems||P[l]===!1);if(q.strictTuples&&!G){const B=`"${x}" is ${D}-tuple, but minItems or maxItems/${l} are not specified or different at path "${C}"`;(0,t.checkStrictMode)($,B,q.strictTuples)}}}return items$1.validateTuple=i,items$1.default=n,items$1}var hasRequiredPrefixItems$1;function requirePrefixItems$1(){if(hasRequiredPrefixItems$1)return prefixItems$1;hasRequiredPrefixItems$1=1,Object.defineProperty(prefixItems$1,"__esModule",{value:!0});const e=requireItems$1(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return prefixItems$1.default=t,prefixItems$1}var items2020$1={},hasRequiredItems2020$1;function requireItems2020$1(){if(hasRequiredItems2020$1)return items2020$1;hasRequiredItems2020$1=1,Object.defineProperty(items2020$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireCode$2(),n=requireAdditionalItems$1(),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,e.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,e._)`{limit: ${l}}`},code(l){const{schema:u,parentSchema:d,it:m}=l,{prefixItems:v}=d;m.items=!0,!(0,t.alwaysValidSchema)(m,u)&&(v?(0,n.validateAdditionalItems)(l,v):l.ok((0,r.validateArray)(l)))}};return items2020$1.default=a,items2020$1}var contains$1={},hasRequiredContains$1;function requireContains$1(){if(hasRequiredContains$1)return contains$1;hasRequiredContains$1=1,Object.defineProperty(contains$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:a}})=>a===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${a} valid item(s)`,params:({params:{min:i,max:a}})=>a===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${a}}`},code(i){const{gen:a,schema:l,parentSchema:u,data:d,it:m}=i;let v,x;const{minContains:$,maxContains:T}=u;m.opts.next?(v=$===void 0?1:$,x=T):v=1;const A=a.const("len",(0,e._)`${d}.length`);if(i.setParams({min:v,max:x}),x===void 0&&v===0){(0,t.checkStrictMode)(m,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(x!==void 0&&v>x){(0,t.checkStrictMode)(m,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(m,l)){let D=(0,e._)`${A} >= ${v}`;x!==void 0&&(D=(0,e._)`${D} && ${A} <= ${x}`),i.pass(D);return}m.items=!0;const L=a.name("valid");x===void 0&&v===1?q(L,()=>a.if(L,()=>a.break())):v===0?(a.let(L,!0),x!==void 0&&a.if((0,e._)`${d}.length > 0`,P)):(a.let(L,!1),P()),i.result(L,()=>i.reset());function P(){const D=a.name("_valid"),G=a.let("count",0);q(D,()=>a.if(D,()=>C(G)))}function q(D,G){a.forRange("i",0,A,B=>{i.subschema({keyword:"contains",dataProp:B,dataPropType:t.Type.Num,compositeRule:!0},D),G()})}function C(D){a.code((0,e._)`${D}++`),x===void 0?a.if((0,e._)`${D} >= ${v}`,()=>a.assign(L,!0).break()):(a.if((0,e._)`${D} > ${x}`,()=>a.assign(L,!1).break()),v===1?a.assign(L,!0):a.if((0,e._)`${D} >= ${v}`,()=>a.assign(L,!0)))}}};return contains$1.default=n,contains$1}var dependencies$1={},hasRequiredDependencies$1;function requireDependencies$1(){return hasRequiredDependencies$1||(hasRequiredDependencies$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=requireCodegen$1(),r=requireUtil$1(),n=requireCode$2();e.error={message:({params:{property:d,depsCount:m,deps:v}})=>{const x=m===1?"property":"properties";return(0,t.str)`must have ${x} ${v} when property ${d} is present`},params:({params:{property:d,depsCount:m,deps:v,missingProperty:x}})=>(0,t._)`{property: ${d},
    missingProperty: ${x},
    depsCount: ${m},
    deps: ${v}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[m,v]=a(d);l(d,m),u(d,v)}};function a({schema:d}){const m={},v={};for(const x in d){if(x==="__proto__")continue;const $=Array.isArray(d[x])?m:v;$[x]=d[x]}return[m,v]}function l(d,m=d.schema){const{gen:v,data:x,it:$}=d;if(Object.keys(m).length===0)return;const T=v.let("missing");for(const A in m){const L=m[A];if(L.length===0)continue;const P=(0,n.propertyInData)(v,x,A,$.opts.ownProperties);d.setParams({property:A,depsCount:L.length,deps:L.join(", ")}),$.allErrors?v.if(P,()=>{for(const q of L)(0,n.checkReportMissingProp)(d,q)}):(v.if((0,t._)`${P} && (${(0,n.checkMissingProp)(d,L,T)})`),(0,n.reportMissingProp)(d,T),v.else())}}e.validatePropertyDeps=l;function u(d,m=d.schema){const{gen:v,data:x,keyword:$,it:T}=d,A=v.name("valid");for(const L in m)(0,r.alwaysValidSchema)(T,m[L])||(v.if((0,n.propertyInData)(v,x,L,T.opts.ownProperties),()=>{const P=d.subschema({keyword:$,schemaProp:L},A);d.mergeValidEvaluated(P,A)},()=>v.var(A,!0)),d.ok(A))}e.validateSchemaDeps=u,e.default=i})(dependencies$1)),dependencies$1}var propertyNames$1={},hasRequiredPropertyNames$1;function requirePropertyNames$1(){if(hasRequiredPropertyNames$1)return propertyNames$1;hasRequiredPropertyNames$1=1,Object.defineProperty(propertyNames$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:a,schema:l,data:u,it:d}=i;if((0,t.alwaysValidSchema)(d,l))return;const m=a.name("valid");a.forIn("key",u,v=>{i.setParams({propertyName:v}),i.subschema({keyword:"propertyNames",data:v,dataTypes:["string"],propertyName:v,compositeRule:!0},m),a.if((0,e.not)(m),()=>{i.error(!0),d.allErrors||a.break()})}),i.ok(m)}};return propertyNames$1.default=n,propertyNames$1}var additionalProperties$2={},hasRequiredAdditionalProperties$1;function requireAdditionalProperties$1(){if(hasRequiredAdditionalProperties$1)return additionalProperties$2;hasRequiredAdditionalProperties$1=1,Object.defineProperty(additionalProperties$2,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),r=requireNames$1(),n=requireUtil$1(),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:l})=>(0,t._)`{additionalProperty: ${l.additionalProperty}}`},code(l){const{gen:u,schema:d,parentSchema:m,data:v,errsCount:x,it:$}=l;if(!x)throw new Error("ajv implementation error");const{allErrors:T,opts:A}=$;if($.props=!0,A.removeAdditional!=="all"&&(0,n.alwaysValidSchema)($,d))return;const L=(0,e.allSchemaProperties)(m.properties),P=(0,e.allSchemaProperties)(m.patternProperties);q(),l.ok((0,t._)`${x} === ${r.default.errors}`);function q(){u.forIn("key",v,H=>{!L.length&&!P.length?G(H):u.if(C(H),()=>G(H))})}function C(H){let X;if(L.length>8){const re=(0,n.schemaRefOrVal)($,m.properties,"properties");X=(0,e.isOwnProperty)(u,re,H)}else L.length?X=(0,t.or)(...L.map(re=>(0,t._)`${H} === ${re}`)):X=t.nil;return P.length&&(X=(0,t.or)(X,...P.map(re=>(0,t._)`${(0,e.usePattern)(l,re)}.test(${H})`))),(0,t.not)(X)}function D(H){u.code((0,t._)`delete ${v}[${H}]`)}function G(H){if(A.removeAdditional==="all"||A.removeAdditional&&d===!1){D(H);return}if(d===!1){l.setParams({additionalProperty:H}),l.error(),T||u.break();return}if(typeof d=="object"&&!(0,n.alwaysValidSchema)($,d)){const X=u.name("valid");A.removeAdditional==="failing"?(B(H,X,!1),u.if((0,t.not)(X),()=>{l.reset(),D(H)})):(B(H,X),T||u.if((0,t.not)(X),()=>u.break()))}}function B(H,X,re){const pe={keyword:"additionalProperties",dataProp:H,dataPropType:n.Type.Str};re===!1&&Object.assign(pe,{compositeRule:!0,createErrors:!1,allErrors:!1}),l.subschema(pe,X)}}};return additionalProperties$2.default=a,additionalProperties$2}var properties$4={},hasRequiredProperties$1;function requireProperties$1(){if(hasRequiredProperties$1)return properties$4;hasRequiredProperties$1=1,Object.defineProperty(properties$4,"__esModule",{value:!0});const e=requireValidate$1(),t=requireCode$2(),r=requireUtil$1(),n=requireAdditionalProperties$1(),i={keyword:"properties",type:"object",schemaType:"object",code(a){const{gen:l,schema:u,parentSchema:d,data:m,it:v}=a;v.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(v,n.default,"additionalProperties"));const x=(0,t.allSchemaProperties)(u);for(const P of x)v.definedProperties.add(P);v.opts.unevaluated&&x.length&&v.props!==!0&&(v.props=r.mergeEvaluated.props(l,(0,r.toHash)(x),v.props));const $=x.filter(P=>!(0,r.alwaysValidSchema)(v,u[P]));if($.length===0)return;const T=l.name("valid");for(const P of $)A(P)?L(P):(l.if((0,t.propertyInData)(l,m,P,v.opts.ownProperties)),L(P),v.allErrors||l.else().var(T,!0),l.endIf()),a.it.definedProperties.add(P),a.ok(T);function A(P){return v.opts.useDefaults&&!v.compositeRule&&u[P].default!==void 0}function L(P){a.subschema({keyword:"properties",schemaProp:P,dataProp:P},T)}}};return properties$4.default=i,properties$4}var patternProperties$1={},hasRequiredPatternProperties$1;function requirePatternProperties$1(){if(hasRequiredPatternProperties$1)return patternProperties$1;hasRequiredPatternProperties$1=1,Object.defineProperty(patternProperties$1,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),r=requireUtil$1(),n=requireUtil$1(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(a){const{gen:l,schema:u,data:d,parentSchema:m,it:v}=a,{opts:x}=v,$=(0,e.allSchemaProperties)(u),T=$.filter(G=>(0,r.alwaysValidSchema)(v,u[G]));if($.length===0||T.length===$.length&&(!v.opts.unevaluated||v.props===!0))return;const A=x.strictSchema&&!x.allowMatchingProperties&&m.properties,L=l.name("valid");v.props!==!0&&!(v.props instanceof t.Name)&&(v.props=(0,n.evaluatedPropsToName)(l,v.props));const{props:P}=v;q();function q(){for(const G of $)A&&C(G),v.allErrors?D(G):(l.var(L,!0),D(G),l.if(L))}function C(G){for(const B in A)new RegExp(G).test(B)&&(0,r.checkStrictMode)(v,`property ${B} matches pattern ${G} (use allowMatchingProperties)`)}function D(G){l.forIn("key",d,B=>{l.if((0,t._)`${(0,e.usePattern)(a,G)}.test(${B})`,()=>{const H=T.includes(G);H||a.subschema({keyword:"patternProperties",schemaProp:G,dataProp:B,dataPropType:n.Type.Str},L),v.opts.unevaluated&&P!==!0?l.assign((0,t._)`${P}[${B}]`,!0):!H&&!v.allErrors&&l.if((0,t.not)(L),()=>l.break())})})}}};return patternProperties$1.default=i,patternProperties$1}var not$1={},hasRequiredNot$1;function requireNot$1(){if(hasRequiredNot$1)return not$1;hasRequiredNot$1=1,Object.defineProperty(not$1,"__esModule",{value:!0});const e=requireUtil$1(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:i,it:a}=r;if((0,e.alwaysValidSchema)(a,i)){r.fail();return}const l=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),r.failResult(l,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return not$1.default=t,not$1}var anyOf$1={},hasRequiredAnyOf$1;function requireAnyOf$1(){if(hasRequiredAnyOf$1)return anyOf$1;hasRequiredAnyOf$1=1,Object.defineProperty(anyOf$1,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode$2().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf$1.default=t,anyOf$1}var oneOf$1={},hasRequiredOneOf$1;function requireOneOf$1(){if(hasRequiredOneOf$1)return oneOf$1;hasRequiredOneOf$1=1,Object.defineProperty(oneOf$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:a,schema:l,parentSchema:u,it:d}=i;if(!Array.isArray(l))throw new Error("ajv implementation error");if(d.opts.discriminator&&u.discriminator)return;const m=l,v=a.let("valid",!1),x=a.let("passing",null),$=a.name("_valid");i.setParams({passing:x}),a.block(T),i.result(v,()=>i.reset(),()=>i.error(!0));function T(){m.forEach((A,L)=>{let P;(0,t.alwaysValidSchema)(d,A)?a.var($,!0):P=i.subschema({keyword:"oneOf",schemaProp:L,compositeRule:!0},$),L>0&&a.if((0,e._)`${$} && ${v}`).assign(v,!1).assign(x,(0,e._)`[${x}, ${L}]`).else(),a.if($,()=>{a.assign(v,!0),a.assign(x,L),P&&i.mergeEvaluated(P,e.Name)})})}}};return oneOf$1.default=n,oneOf$1}var allOf$1={},hasRequiredAllOf$1;function requireAllOf$1(){if(hasRequiredAllOf$1)return allOf$1;hasRequiredAllOf$1=1,Object.defineProperty(allOf$1,"__esModule",{value:!0});const e=requireUtil$1(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:i,it:a}=r;if(!Array.isArray(i))throw new Error("ajv implementation error");const l=n.name("valid");i.forEach((u,d)=>{if((0,e.alwaysValidSchema)(a,u))return;const m=r.subschema({keyword:"allOf",schemaProp:d},l);r.ok(l),r.mergeEvaluated(m)})}};return allOf$1.default=t,allOf$1}var _if$1={},hasRequired_if$1;function require_if$1(){if(hasRequired_if$1)return _if$1;hasRequired_if$1=1,Object.defineProperty(_if$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:a})=>(0,e.str)`must match "${a.ifClause}" schema`,params:({params:a})=>(0,e._)`{failingKeyword: ${a.ifClause}}`},code(a){const{gen:l,parentSchema:u,it:d}=a;u.then===void 0&&u.else===void 0&&(0,t.checkStrictMode)(d,'"if" without "then" and "else" is ignored');const m=i(d,"then"),v=i(d,"else");if(!m&&!v)return;const x=l.let("valid",!0),$=l.name("_valid");if(T(),a.reset(),m&&v){const L=l.let("ifClause");a.setParams({ifClause:L}),l.if($,A("then",L),A("else",L))}else m?l.if($,A("then")):l.if((0,e.not)($),A("else"));a.pass(x,()=>a.error(!0));function T(){const L=a.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},$);a.mergeEvaluated(L)}function A(L,P){return()=>{const q=a.subschema({keyword:L},$);l.assign(x,$),a.mergeValidEvaluated(q,x),P?l.assign(P,(0,e._)`${L}`):a.setParams({ifClause:L})}}}};function i(a,l){const u=a.schema[l];return u!==void 0&&!(0,t.alwaysValidSchema)(a,u)}return _if$1.default=n,_if$1}var thenElse$1={},hasRequiredThenElse$1;function requireThenElse$1(){if(hasRequiredThenElse$1)return thenElse$1;hasRequiredThenElse$1=1,Object.defineProperty(thenElse$1,"__esModule",{value:!0});const e=requireUtil$1(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:i}){n.if===void 0&&(0,e.checkStrictMode)(i,`"${r}" without "if" is ignored`)}};return thenElse$1.default=t,thenElse$1}var hasRequiredApplicator$1;function requireApplicator$1(){if(hasRequiredApplicator$1)return applicator$1;hasRequiredApplicator$1=1,Object.defineProperty(applicator$1,"__esModule",{value:!0});const e=requireAdditionalItems$1(),t=requirePrefixItems$1(),r=requireItems$1(),n=requireItems2020$1(),i=requireContains$1(),a=requireDependencies$1(),l=requirePropertyNames$1(),u=requireAdditionalProperties$1(),d=requireProperties$1(),m=requirePatternProperties$1(),v=requireNot$1(),x=requireAnyOf$1(),$=requireOneOf$1(),T=requireAllOf$1(),A=require_if$1(),L=requireThenElse$1();function P(q=!1){const C=[v.default,x.default,$.default,T.default,A.default,L.default,l.default,u.default,a.default,d.default,m.default];return q?C.push(t.default,n.default):C.push(e.default,r.default),C.push(i.default),C}return applicator$1.default=P,applicator$1}var format$4={},format$3={},hasRequiredFormat$3;function requireFormat$3(){if(hasRequiredFormat$3)return format$3;hasRequiredFormat$3=1,Object.defineProperty(format$3,"__esModule",{value:!0});const e=requireCodegen$1(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,e._)`{format: ${n}}`},code(n,i){const{gen:a,data:l,$data:u,schema:d,schemaCode:m,it:v}=n,{opts:x,errSchemaPath:$,schemaEnv:T,self:A}=v;if(!x.validateFormats)return;u?L():P();function L(){const q=a.scopeValue("formats",{ref:A.formats,code:x.code.formats}),C=a.const("fDef",(0,e._)`${q}[${m}]`),D=a.let("fType"),G=a.let("format");a.if((0,e._)`typeof ${C} == "object" && !(${C} instanceof RegExp)`,()=>a.assign(D,(0,e._)`${C}.type || "string"`).assign(G,(0,e._)`${C}.validate`),()=>a.assign(D,(0,e._)`"string"`).assign(G,C)),n.fail$data((0,e.or)(B(),H()));function B(){return x.strictSchema===!1?e.nil:(0,e._)`${m} && !${G}`}function H(){const X=T.$async?(0,e._)`(${C}.async ? await ${G}(${l}) : ${G}(${l}))`:(0,e._)`${G}(${l})`,re=(0,e._)`(typeof ${G} == "function" ? ${X} : ${G}.test(${l}))`;return(0,e._)`${G} && ${G} !== true && ${D} === ${i} && !${re}`}}function P(){const q=A.formats[d];if(!q){B();return}if(q===!0)return;const[C,D,G]=H(q);C===i&&n.pass(X());function B(){if(x.strictSchema===!1){A.logger.warn(re());return}throw new Error(re());function re(){return`unknown format "${d}" ignored in schema at path "${$}"`}}function H(re){const pe=re instanceof RegExp?(0,e.regexpCode)(re):x.code.formats?(0,e._)`${x.code.formats}${(0,e.getProperty)(d)}`:void 0,$e=a.scopeValue("formats",{key:d,ref:re,code:pe});return typeof re=="object"&&!(re instanceof RegExp)?[re.type||"string",re.validate,(0,e._)`${$e}.validate`]:["string",re,$e]}function X(){if(typeof q=="object"&&!(q instanceof RegExp)&&q.async){if(!T.$async)throw new Error("async format in sync schema");return(0,e._)`await ${G}(${l})`}return typeof D=="function"?(0,e._)`${G}(${l})`:(0,e._)`${G}.test(${l})`}}}};return format$3.default=r,format$3}var hasRequiredFormat$2;function requireFormat$2(){if(hasRequiredFormat$2)return format$4;hasRequiredFormat$2=1,Object.defineProperty(format$4,"__esModule",{value:!0});const t=[requireFormat$3().default];return format$4.default=t,format$4}var metadata$1={},hasRequiredMetadata$1;function requireMetadata$1(){return hasRequiredMetadata$1||(hasRequiredMetadata$1=1,Object.defineProperty(metadata$1,"__esModule",{value:!0}),metadata$1.contentVocabulary=metadata$1.metadataVocabulary=void 0,metadata$1.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata$1.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata$1}var hasRequiredDraft7$1;function requireDraft7$1(){if(hasRequiredDraft7$1)return draft7$1;hasRequiredDraft7$1=1,Object.defineProperty(draft7$1,"__esModule",{value:!0});const e=requireCore$2(),t=requireValidation$1(),r=requireApplicator$1(),n=requireFormat$2(),i=requireMetadata$1(),a=[e.default,t.default,(0,r.default)(),n.default,i.metadataVocabulary,i.contentVocabulary];return draft7$1.default=a,draft7$1}var discriminator$1={},types$1={},hasRequiredTypes$1;function requireTypes$1(){if(hasRequiredTypes$1)return types$1;hasRequiredTypes$1=1,Object.defineProperty(types$1,"__esModule",{value:!0}),types$1.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(types$1.DiscrError=e={})),types$1}var hasRequiredDiscriminator$1;function requireDiscriminator$1(){if(hasRequiredDiscriminator$1)return discriminator$1;hasRequiredDiscriminator$1=1,Object.defineProperty(discriminator$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireTypes$1(),r=requireCompile$1(),n=requireRef_error$1(),i=requireUtil$1(),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:u,tagName:d}})=>u===t.DiscrError.Tag?`tag "${d}" must be string`:`value of tag "${d}" must be in oneOf`,params:({params:{discrError:u,tag:d,tagName:m}})=>(0,e._)`{error: ${u}, tag: ${m}, tagValue: ${d}}`},code(u){const{gen:d,data:m,schema:v,parentSchema:x,it:$}=u,{oneOf:T}=x;if(!$.opts.discriminator)throw new Error("discriminator: requires discriminator option");const A=v.propertyName;if(typeof A!="string")throw new Error("discriminator: requires propertyName");if(v.mapping)throw new Error("discriminator: mapping is not supported");if(!T)throw new Error("discriminator: requires oneOf keyword");const L=d.let("valid",!1),P=d.const("tag",(0,e._)`${m}${(0,e.getProperty)(A)}`);d.if((0,e._)`typeof ${P} == "string"`,()=>q(),()=>u.error(!1,{discrError:t.DiscrError.Tag,tag:P,tagName:A})),u.ok(L);function q(){const G=D();d.if(!1);for(const B in G)d.elseIf((0,e._)`${P} === ${B}`),d.assign(L,C(G[B]));d.else(),u.error(!1,{discrError:t.DiscrError.Mapping,tag:P,tagName:A}),d.endIf()}function C(G){const B=d.name("valid"),H=u.subschema({keyword:"oneOf",schemaProp:G},B);return u.mergeEvaluated(H,e.Name),B}function D(){var G;const B={},H=re(x);let X=!0;for(let ke=0;ke<T.length;ke++){let Ne=T[ke];if(Ne?.$ref&&!(0,i.schemaHasRulesButRef)(Ne,$.self.RULES)){const Ar=Ne.$ref;if(Ne=r.resolveRef.call($.self,$.schemaEnv.root,$.baseId,Ar),Ne instanceof r.SchemaEnv&&(Ne=Ne.schema),Ne===void 0)throw new n.default($.opts.uriResolver,$.baseId,Ar)}const Ye=(G=Ne?.properties)===null||G===void 0?void 0:G[A];if(typeof Ye!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${A}"`);X=X&&(H||re(Ne)),pe(Ye,ke)}if(!X)throw new Error(`discriminator: "${A}" must be required`);return B;function re({required:ke}){return Array.isArray(ke)&&ke.includes(A)}function pe(ke,Ne){if(ke.const)$e(ke.const,Ne);else if(ke.enum)for(const Ye of ke.enum)$e(Ye,Ne);else throw new Error(`discriminator: "properties/${A}" must have "const" or "enum"`)}function $e(ke,Ne){if(typeof ke!="string"||ke in B)throw new Error(`discriminator: "${A}" values must be unique strings`);B[ke]=Ne}}}};return discriminator$1.default=l,discriminator$1}const $schema$1="http://json-schema.org/draft-07/schema#",$id$2="http://json-schema.org/draft-07/schema#",title$1="Core schema meta-schema",definitions$1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$2=["object","boolean"],properties$3={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3$1={$schema:$schema$1,$id:$id$2,title:title$1,definitions:definitions$1,type:type$2,properties:properties$3,default:!0};var hasRequiredAjv$1;function requireAjv$1(){return hasRequiredAjv$1||(hasRequiredAjv$1=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=requireCore$3(),n=requireDraft7$1(),i=requireDiscriminator$1(),a=require$$3$1,l=["/properties"],u="http://json-schema.org/draft-07/schema";class d extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(A=>this.addVocabulary(A)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const A=this.opts.$data?this.$dataMetaSchema(a,l):a;this.addMetaSchema(A,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=d,e.exports=t=d,e.exports.Ajv=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var m=requireValidate$1();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var v=requireCodegen$1();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return v._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return v.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return v.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return v.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return v.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return v.CodeGen}});var x=requireValidation_error$1();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return x.default}});var $=requireRef_error$1();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return $.default}})})(ajv$1,ajv$1.exports)),ajv$1.exports}var ajvExports=requireAjv$1();const Ajv2=getDefaultExportFromCjs$1(ajvExports);function __awaiter$3(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(v){try{m(n.next(v))}catch(x){l(x)}}function d(v){try{m(n.throw(v))}catch(x){l(x)}}function m(v){v.done?a(v.value):i(v.value).then(u,d)}m((n=n.apply(e,[])).next())})}function __generator$2(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(v){return d([m,v])}}function d(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=m[0]&2?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function __read$1(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],l;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){l={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a}function __spreadArray$1(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var defaultErrorConfig$1={withStackTrace:!1},createNeverThrowError$1=function(e,t,r){r===void 0&&(r=defaultErrorConfig$1);var n=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},i=r.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:i}},Result$1;(function(e){function t(r,n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];try{var l=r.apply(void 0,__spreadArray$1([],__read$1(i),!1));return ok$2(l)}catch(u){return err$2(n?n(u):u)}}}e.fromThrowable=t})(Result$1||(Result$1={}));var ok$2=function(e){return new Ok$2(e)},err$2=function(e){return new Err$2(e)},Ok$2=(function(){function e(t){this.value=t}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$2(t(this.value))},e.prototype.mapErr=function(t){return ok$2(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.orElse=function(t){return ok$2(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$2.fromSafePromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype.match=function(t,r){return t(this.value)},e.prototype._unsafeUnwrap=function(t){return this.value},e.prototype._unsafeUnwrapErr=function(t){throw createNeverThrowError$1("Called `_unsafeUnwrapErr` on an Ok",this,t)},e})(),Err$2=(function(){function e(t){this.error=t}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$2(this.error)},e.prototype.mapErr=function(t){return err$2(t(this.error))},e.prototype.andThen=function(t){return err$2(this.error)},e.prototype.orElse=function(t){return t(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$2(this.error)},e.prototype.asyncMap=function(t){return errAsync$2(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype.match=function(t,r){return r(this.error)},e.prototype._unsafeUnwrap=function(t){throw createNeverThrowError$1("Called `_unsafeUnwrap` on an Err",this,t)},e.prototype._unsafeUnwrapErr=function(t){return this.error},e})();Result$1.fromThrowable;var ResultAsync$2=(function(){function e(t){this._promise=t}return e.fromSafePromise=function(t){var r=t.then(function(n){return new Ok$2(n)});return new e(r)},e.fromPromise=function(t,r){var n=t.then(function(i){return new Ok$2(i)}).catch(function(i){return new Err$2(r(i))});return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){var i;return __generator$2(this,function(a){switch(a.label){case 0:return n.isErr()?[2,new Err$2(n.error)]:(i=Ok$2.bind,[4,t(n.value)]);case 1:return[2,new(i.apply(Ok$2,[void 0,a.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){var i;return __generator$2(this,function(a){switch(a.label){case 0:return n.isOk()?[2,new Ok$2(n.value)]:(i=Err$2.bind,[4,t(n.error)]);case 1:return[2,new(i.apply(Err$2,[void 0,a.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$2(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.orElse=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){return __generator$2(this,function(i){return n.isErr()?[2,t(n.error)]:[2,new Ok$2(n.value)]})})}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t,r){return this._promise.then(t,r)},e})(),errAsync$2=function(e){return new ResultAsync$2(Promise.resolve(new Err$2(e)))};ResultAsync$2.fromPromise;ResultAsync$2.fromSafePromise;const ALIAS=Symbol.for("yaml.alias"),DOC=Symbol.for("yaml.document"),MAP=Symbol.for("yaml.map"),PAIR=Symbol.for("yaml.pair"),SCALAR$1=Symbol.for("yaml.scalar"),SEQ=Symbol.for("yaml.seq"),NODE_TYPE=Symbol.for("yaml.node.type"),isAlias=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===ALIAS,isDocument=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===DOC,isMap=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===MAP,isPair=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===PAIR,isScalar$1=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===SCALAR$1,isSeq=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===SEQ;function isCollection$1(e){if(e&&typeof e=="object")switch(e[NODE_TYPE]){case MAP:case SEQ:return!0}return!1}function isNode(e){if(e&&typeof e=="object")switch(e[NODE_TYPE]){case ALIAS:case MAP:case SCALAR$1:case SEQ:return!0}return!1}const hasAnchor=e=>(isScalar$1(e)||isCollection$1(e))&&!!e.anchor,BREAK$1=Symbol("break visit"),SKIP$1=Symbol("skip children"),REMOVE$1=Symbol("remove node");function visit$1(e,t){const r=initVisitor(t);isDocument(e)?visit_(null,e.contents,r,Object.freeze([e]))===REMOVE$1&&(e.contents=null):visit_(null,e,r,Object.freeze([]))}visit$1.BREAK=BREAK$1;visit$1.SKIP=SKIP$1;visit$1.REMOVE=REMOVE$1;function visit_(e,t,r,n){const i=callVisitor(e,t,r,n);if(isNode(i)||isPair(i))return replaceNode(e,n,i),visit_(e,i,r,n);if(typeof i!="symbol"){if(isCollection$1(t)){n=Object.freeze(n.concat(t));for(let a=0;a<t.items.length;++a){const l=visit_(a,t.items[a],r,n);if(typeof l=="number")a=l-1;else{if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.items.splice(a,1),a-=1)}}}else if(isPair(t)){n=Object.freeze(n.concat(t));const a=visit_("key",t.key,r,n);if(a===BREAK$1)return BREAK$1;a===REMOVE$1&&(t.key=null);const l=visit_("value",t.value,r,n);if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.value=null)}}return i}async function visitAsync(e,t){const r=initVisitor(t);isDocument(e)?await visitAsync_(null,e.contents,r,Object.freeze([e]))===REMOVE$1&&(e.contents=null):await visitAsync_(null,e,r,Object.freeze([]))}visitAsync.BREAK=BREAK$1;visitAsync.SKIP=SKIP$1;visitAsync.REMOVE=REMOVE$1;async function visitAsync_(e,t,r,n){const i=await callVisitor(e,t,r,n);if(isNode(i)||isPair(i))return replaceNode(e,n,i),visitAsync_(e,i,r,n);if(typeof i!="symbol"){if(isCollection$1(t)){n=Object.freeze(n.concat(t));for(let a=0;a<t.items.length;++a){const l=await visitAsync_(a,t.items[a],r,n);if(typeof l=="number")a=l-1;else{if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.items.splice(a,1),a-=1)}}}else if(isPair(t)){n=Object.freeze(n.concat(t));const a=await visitAsync_("key",t.key,r,n);if(a===BREAK$1)return BREAK$1;a===REMOVE$1&&(t.key=null);const l=await visitAsync_("value",t.value,r,n);if(l===BREAK$1)return BREAK$1;l===REMOVE$1&&(t.value=null)}}return i}function initVisitor(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function callVisitor(e,t,r,n){if(typeof r=="function")return r(e,t,n);if(isMap(t))return r.Map?.(e,t,n);if(isSeq(t))return r.Seq?.(e,t,n);if(isPair(t))return r.Pair?.(e,t,n);if(isScalar$1(t))return r.Scalar?.(e,t,n);if(isAlias(t))return r.Alias?.(e,t,n)}function replaceNode(e,t,r){const n=t[t.length-1];if(isCollection$1(n))n.items[e]=r;else if(isPair(n))e==="key"?n.key=r:n.value=r;else if(isDocument(n))n.contents=r;else{const i=isAlias(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const escapeChars={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},escapeTagName=e=>e.replace(/[!,[\]{}]/g,t=>escapeChars[t]);class Directives{constructor(t,r){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Directives.defaultYaml,t),this.tags=Object.assign({},Directives.defaultTags,r)}clone(){const t=new Directives(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Directives(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Directives.defaultTags);break}return t}add(t,r){this.atNextDocument&&(this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Directives.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[a,l]=n;return this.tags[a]=l,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return r(0,"%YAML directive should contain exactly one part"),!1;const[a]=n;if(a==="1.1"||a==="1.2")return this.yaml.version=a,!0;{const l=/^\d+\.\d+$/.test(a);return r(6,`Unsupported YAML version ${a}`,l),!1}}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(t,r){if(t==="!")return"!";if(t[0]!=="!")return r(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const l=t.slice(2,-1);return l==="!"||l==="!!"?(r(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&r("Verbatim tags must end with a >"),l)}const[,n,i]=t.match(/^(.*!)([^!]*)$/s);i||r(`The ${t} tag has no suffix`);const a=this.tags[n];if(a)try{return a+decodeURIComponent(i)}catch(l){return r(String(l)),null}return n==="!"?t:(r(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[r,n]of Object.entries(this.tags))if(t.startsWith(n))return r+escapeTagName(t.substring(n.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let i;if(t&&n.length>0&&isNode(t.contents)){const a={};visit$1(t.contents,(l,u)=>{isNode(u)&&u.tag&&(a[u.tag]=!0)}),i=Object.keys(a)}else i=[];for(const[a,l]of n)a==="!!"&&l==="tag:yaml.org,2002:"||(!t||i.some(u=>u.startsWith(l)))&&r.push(`%TAG ${a} ${l}`);return r.join(`
`)}}Directives.defaultYaml={explicit:!1,version:"1.2"};Directives.defaultTags={"!!":"tag:yaml.org,2002:"};function anchorIsValid(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(r)}return!0}function anchorNames(e){const t=new Set;return visit$1(e,{Value(r,n){n.anchor&&t.add(n.anchor)}}),t}function findNewAnchor(e,t){for(let r=1;;++r){const n=`${e}${r}`;if(!t.has(n))return n}}function createNodeAnchors(e,t){const r=[],n=new Map;let i=null;return{onAnchor:a=>{r.push(a),i??(i=anchorNames(e));const l=findNewAnchor(t,i);return i.add(l),l},setAnchors:()=>{for(const a of r){const l=n.get(a);if(typeof l=="object"&&l.anchor&&(isScalar$1(l.node)||isCollection$1(l.node)))l.node.anchor=l.anchor;else{const u=new Error("Failed to resolve repeated object (this should not happen)");throw u.source=a,u}}},sourceObjects:n}}function applyReviver(e,t,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,a=n.length;i<a;++i){const l=n[i],u=applyReviver(e,n,String(i),l);u===void 0?delete n[i]:u!==l&&(n[i]=u)}else if(n instanceof Map)for(const i of Array.from(n.keys())){const a=n.get(i),l=applyReviver(e,n,i,a);l===void 0?n.delete(i):l!==a&&n.set(i,l)}else if(n instanceof Set)for(const i of Array.from(n)){const a=applyReviver(e,n,i,i);a===void 0?n.delete(i):a!==i&&(n.delete(i),n.add(a))}else for(const[i,a]of Object.entries(n)){const l=applyReviver(e,n,i,a);l===void 0?delete n[i]:l!==a&&(n[i]=l)}return e.call(t,r,n)}function toJS(e,t,r){if(Array.isArray(e))return e.map((n,i)=>toJS(n,String(i),r));if(e&&typeof e.toJSON=="function"){if(!r||!hasAnchor(e))return e.toJSON(t,r);const n={aliasCount:0,count:1,res:void 0};r.anchors.set(e,n),r.onCreate=a=>{n.res=a,delete r.onCreate};const i=e.toJSON(t,r);return r.onCreate&&r.onCreate(i),i}return typeof e=="bigint"&&!r?.keep?Number(e):e}class NodeBase{constructor(t){Object.defineProperty(this,NODE_TYPE,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:r,maxAliasCount:n,onAnchor:i,reviver:a}={}){if(!isDocument(t))throw new TypeError("A document argument is required");const l={anchors:new Map,doc:t,keep:!0,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},u=toJS(this,"",l);if(typeof i=="function")for(const{count:d,res:m}of l.anchors.values())i(m,d);return typeof a=="function"?applyReviver(a,{"":u},"",u):u}}class Alias extends NodeBase{constructor(t){super(ALIAS),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,r){let n;r?.aliasResolveCache?n=r.aliasResolveCache:(n=[],visit$1(t,{Node:(a,l)=>{(isAlias(l)||hasAnchor(l))&&n.push(l)}}),r&&(r.aliasResolveCache=n));let i;for(const a of n){if(a===this)break;a.anchor===this.source&&(i=a)}return i}toJSON(t,r){if(!r)return{source:this.source};const{anchors:n,doc:i,maxAliasCount:a}=r,l=this.resolve(i,r);if(!l){const d=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(d)}let u=n.get(l);if(u||(toJS(l,null,r),u=n.get(l)),u?.res===void 0){const d="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(d)}if(a>=0&&(u.count+=1,u.aliasCount===0&&(u.aliasCount=getAliasCount(i,l,n)),u.count*u.aliasCount>a)){const d="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(d)}return u.res}toString(t,r,n){const i=`*${this.source}`;if(t){if(anchorIsValid(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(a)}if(t.implicitKey)return`${i} `}return i}}function getAliasCount(e,t,r){if(isAlias(t)){const n=t.resolve(e),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(isCollection$1(t)){let n=0;for(const i of t.items){const a=getAliasCount(e,i,r);a>n&&(n=a)}return n}else if(isPair(t)){const n=getAliasCount(e,t.key,r),i=getAliasCount(e,t.value,r);return Math.max(n,i)}return 1}const isScalarValue=e=>!e||typeof e!="function"&&typeof e!="object";class Scalar extends NodeBase{constructor(t){super(SCALAR$1),this.value=t}toJSON(t,r){return r?.keep?this.value:toJS(this.value,t,r)}toString(){return String(this.value)}}Scalar.BLOCK_FOLDED="BLOCK_FOLDED";Scalar.BLOCK_LITERAL="BLOCK_LITERAL";Scalar.PLAIN="PLAIN";Scalar.QUOTE_DOUBLE="QUOTE_DOUBLE";Scalar.QUOTE_SINGLE="QUOTE_SINGLE";const defaultTagPrefix="tag:yaml.org,2002:";function findTagObject(e,t,r){if(t){const n=r.filter(a=>a.tag===t),i=n.find(a=>!a.format)??n[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return r.find(n=>n.identify?.(e)&&!n.format)}function createNode(e,t,r){if(isDocument(e)&&(e=e.contents),isNode(e))return e;if(isPair(e)){const x=r.schema[MAP].createNode?.(r.schema,null,r);return x.items.push(e),x}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:n,onAnchor:i,onTagObj:a,schema:l,sourceObjects:u}=r;let d;if(n&&e&&typeof e=="object"){if(d=u.get(e),d)return d.anchor??(d.anchor=i(e)),new Alias(d.anchor);d={anchor:null,node:null},u.set(e,d)}t?.startsWith("!!")&&(t=defaultTagPrefix+t.slice(2));let m=findTagObject(e,t,l.tags);if(!m){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){const x=new Scalar(e);return d&&(d.node=x),x}m=e instanceof Map?l[MAP]:Symbol.iterator in Object(e)?l[SEQ]:l[MAP]}a&&(a(m),delete r.onTagObj);const v=m?.createNode?m.createNode(r.schema,e,r):typeof m?.nodeClass?.from=="function"?m.nodeClass.from(r.schema,e,r):new Scalar(e);return t?v.tag=t:m.default||(v.tag=m.tag),d&&(d.node=v),v}function collectionFromPath(e,t,r){let n=r;for(let i=t.length-1;i>=0;--i){const a=t[i];if(typeof a=="number"&&Number.isInteger(a)&&a>=0){const l=[];l[a]=n,n=l}else n=new Map([[a,n]])}return createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const isEmptyPath=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done;class Collection extends NodeBase{constructor(t,r){super(t),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(t){const r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(r.schema=t),r.items=r.items.map(n=>isNode(n)||isPair(n)?n.clone(t):n),this.range&&(r.range=this.range.slice()),r}addIn(t,r){if(isEmptyPath(t))this.add(r);else{const[n,...i]=t,a=this.get(n,!0);if(isCollection$1(a))a.addIn(i,r);else if(a===void 0&&this.schema)this.set(n,collectionFromPath(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(t){const[r,...n]=t;if(n.length===0)return this.delete(r);const i=this.get(r,!0);if(isCollection$1(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(t,r){const[n,...i]=t,a=this.get(n,!0);return i.length===0?!r&&isScalar$1(a)?a.value:a:isCollection$1(a)?a.getIn(i,r):void 0}hasAllNullValues(t){return this.items.every(r=>{if(!isPair(r))return!1;const n=r.value;return n==null||t&&isScalar$1(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(t){const[r,...n]=t;if(n.length===0)return this.has(r);const i=this.get(r,!0);return isCollection$1(i)?i.hasIn(n):!1}setIn(t,r){const[n,...i]=t;if(i.length===0)this.set(n,r);else{const a=this.get(n,!0);if(isCollection$1(a))a.setIn(i,r);else if(a===void 0&&this.schema)this.set(n,collectionFromPath(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}}const stringifyComment=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function indentComment(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const lineComment=(e,t,r)=>e.endsWith(`
`)?indentComment(r,t):r.includes(`
`)?`
`+indentComment(r,t):(e.endsWith(" ")?"":" ")+r,FOLD_FLOW="flow",FOLD_BLOCK="block",FOLD_QUOTED="quoted";function foldFlowLines(e,t,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:a=20,onFold:l,onOverflow:u}={}){if(!i||i<0)return e;i<a&&(a=0);const d=Math.max(1+a,1+i-t.length);if(e.length<=d)return e;const m=[],v={};let x=i-t.length;typeof n=="number"&&(n>i-Math.max(2,a)?m.push(0):x=i-n);let $,T,A=!1,L=-1,P=-1,q=-1;r===FOLD_BLOCK&&(L=consumeMoreIndentedLines(e,L,t.length),L!==-1&&(x=L+d));for(let D;D=e[L+=1];){if(r===FOLD_QUOTED&&D==="\\"){switch(P=L,e[L+1]){case"x":L+=3;break;case"u":L+=5;break;case"U":L+=9;break;default:L+=1}q=L}if(D===`
`)r===FOLD_BLOCK&&(L=consumeMoreIndentedLines(e,L,t.length)),x=L+t.length+d,$=void 0;else{if(D===" "&&T&&T!==" "&&T!==`
`&&T!=="	"){const G=e[L+1];G&&G!==" "&&G!==`
`&&G!=="	"&&($=L)}if(L>=x)if($)m.push($),x=$+d,$=void 0;else if(r===FOLD_QUOTED){for(;T===" "||T==="	";)T=D,D=e[L+=1],A=!0;const G=L>q+1?L-2:P-1;if(v[G])return e;m.push(G),v[G]=!0,x=G+d,$=void 0}else A=!0}T=D}if(A&&u&&u(),m.length===0)return e;l&&l();let C=e.slice(0,m[0]);for(let D=0;D<m.length;++D){const G=m[D],B=m[D+1]||e.length;G===0?C=`
${t}${e.slice(0,B)}`:(r===FOLD_QUOTED&&v[G]&&(C+=`${e[G]}\\`),C+=`
${t}${e.slice(G+1,B)}`)}return C}function consumeMoreIndentedLines(e,t,r){let n=t,i=t+1,a=e[i];for(;a===" "||a==="	";)if(t<i+r)a=e[++t];else{do a=e[++t];while(a&&a!==`
`);n=t,i=t+1,a=e[i]}return n}const getFoldOptions=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),containsDocumentMarker=e=>/^(%|---|\.\.\.)/m.test(e);function lineLengthOverLimit(e,t,r){if(!t||t<0)return!1;const n=t-r,i=e.length;if(i<=n)return!1;for(let a=0,l=0;a<i;++a)if(e[a]===`
`){if(a-l>n)return!0;if(l=a+1,i-l<=n)return!1}return!0}function doubleQuotedString(e,t){const r=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return r;const{implicitKey:n}=t,i=t.options.doubleQuotedMinMultiLineLength,a=t.indent||(containsDocumentMarker(e)?"  ":"");let l="",u=0;for(let d=0,m=r[d];m;m=r[++d])if(m===" "&&r[d+1]==="\\"&&r[d+2]==="n"&&(l+=r.slice(u,d)+"\\ ",d+=1,u=d,m="\\"),m==="\\")switch(r[d+1]){case"u":{l+=r.slice(u,d);const v=r.substr(d+2,4);switch(v){case"0000":l+="\\0";break;case"0007":l+="\\a";break;case"000b":l+="\\v";break;case"001b":l+="\\e";break;case"0085":l+="\\N";break;case"00a0":l+="\\_";break;case"2028":l+="\\L";break;case"2029":l+="\\P";break;default:v.substr(0,2)==="00"?l+="\\x"+v.substr(2):l+=r.substr(d,6)}d+=5,u=d+1}break;case"n":if(n||r[d+2]==='"'||r.length<i)d+=1;else{for(l+=r.slice(u,d)+`

`;r[d+2]==="\\"&&r[d+3]==="n"&&r[d+4]!=='"';)l+=`
`,d+=2;l+=a,r[d+2]===" "&&(l+="\\"),d+=1,u=d+1}break;default:d+=1}return l=u?l+r.slice(u):r,n?l:foldFlowLines(l,a,FOLD_QUOTED,getFoldOptions(t,!1))}function singleQuotedString(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return doubleQuotedString(e,t);const r=t.indent||(containsDocumentMarker(e)?"  ":""),n="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return t.implicitKey?n:foldFlowLines(n,r,FOLD_FLOW,getFoldOptions(t,!1))}function quotedString(e,t){const{singleQuote:r}=t.options;let n;if(r===!1)n=doubleQuotedString;else{const i=e.includes('"'),a=e.includes("'");i&&!a?n=singleQuotedString:a&&!i?n=doubleQuotedString:n=r?singleQuotedString:doubleQuotedString}return n(e,t)}let blockEndNewlines$1;try{blockEndNewlines$1=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{blockEndNewlines$1=/\n+(?!\n|$)/g}function blockString({comment:e,type:t,value:r},n,i,a){const{blockQuote:l,commentString:u,lineWidth:d}=n.options;if(!l||/\n[\t ]+$/.test(r))return quotedString(r,n);const m=n.indent||(n.forceBlockIndent||containsDocumentMarker(r)?"  ":""),v=l==="literal"?!0:l==="folded"||t===Scalar.BLOCK_FOLDED?!1:t===Scalar.BLOCK_LITERAL?!0:!lineLengthOverLimit(r,d,m.length);if(!r)return v?`|
`:`>
`;let x,$;for($=r.length;$>0;--$){const B=r[$-1];if(B!==`
`&&B!=="	"&&B!==" ")break}let T=r.substring($);const A=T.indexOf(`
`);A===-1?x="-":r===T||A!==T.length-1?(x="+",a&&a()):x="",T&&(r=r.slice(0,-T.length),T[T.length-1]===`
`&&(T=T.slice(0,-1)),T=T.replace(blockEndNewlines$1,`$&${m}`));let L=!1,P,q=-1;for(P=0;P<r.length;++P){const B=r[P];if(B===" ")L=!0;else if(B===`
`)q=P;else break}let C=r.substring(0,q<P?q+1:P);C&&(r=r.substring(C.length),C=C.replace(/\n+/g,`$&${m}`));let G=(L?m?"2":"1":"")+x;if(e&&(G+=" "+u(e.replace(/ ?[\r\n]+/g," ")),i&&i()),!v){const B=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${m}`);let H=!1;const X=getFoldOptions(n,!0);l!=="folded"&&t!==Scalar.BLOCK_FOLDED&&(X.onOverflow=()=>{H=!0});const re=foldFlowLines(`${C}${B}${T}`,m,FOLD_BLOCK,X);if(!H)return`>${G}
${m}${re}`}return r=r.replace(/\n+/g,`$&${m}`),`|${G}
${m}${C}${r}${T}`}function plainString(e,t,r,n){const{type:i,value:a}=e,{actualString:l,implicitKey:u,indent:d,indentStep:m,inFlow:v}=t;if(u&&a.includes(`
`)||v&&/[[\]{},]/.test(a))return quotedString(a,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return u||v||!a.includes(`
`)?quotedString(a,t):blockString(e,t,r,n);if(!u&&!v&&i!==Scalar.PLAIN&&a.includes(`
`))return blockString(e,t,r,n);if(containsDocumentMarker(a)){if(d==="")return t.forceBlockIndent=!0,blockString(e,t,r,n);if(u&&d===m)return quotedString(a,t)}const x=a.replace(/\n+/g,`$&
${d}`);if(l){const $=L=>L.default&&L.tag!=="tag:yaml.org,2002:str"&&L.test?.test(x),{compat:T,tags:A}=t.doc.schema;if(A.some($)||T?.some($))return quotedString(a,t)}return u?x:foldFlowLines(x,d,FOLD_FLOW,getFoldOptions(t,!1))}function stringifyString(e,t,r,n){const{implicitKey:i,inFlow:a}=t,l=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)});let{type:u}=e;u!==Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(l.value)&&(u=Scalar.QUOTE_DOUBLE);const d=v=>{switch(v){case Scalar.BLOCK_FOLDED:case Scalar.BLOCK_LITERAL:return i||a?quotedString(l.value,t):blockString(l,t,r,n);case Scalar.QUOTE_DOUBLE:return doubleQuotedString(l.value,t);case Scalar.QUOTE_SINGLE:return singleQuotedString(l.value,t);case Scalar.PLAIN:return plainString(l,t,r,n);default:return null}};let m=d(u);if(m===null){const{defaultKeyType:v,defaultStringType:x}=t.options,$=i&&v||x;if(m=d($),m===null)throw new Error(`Unsupported default string type ${$}`)}return m}function createStringifyContext(e,t){const r=Object.assign({blockQuote:!0,commentString:stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:e,flowCollectionPadding:r.flowCollectionPadding?" ":"",indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function getTagObject(e,t){if(t.tag){const i=e.filter(a=>a.tag===t.tag);if(i.length>0)return i.find(a=>a.format===t.format)??i[0]}let r,n;if(isScalar$1(t)){n=t.value;let i=e.filter(a=>a.identify?.(n));if(i.length>1){const a=i.filter(l=>l.test);a.length>0&&(i=a)}r=i.find(a=>a.format===t.format)??i.find(a=>!a.format)}else n=t,r=e.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){const i=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${i} value`)}return r}function stringifyProps(e,t,{anchors:r,doc:n}){if(!n.directives)return"";const i=[],a=(isScalar$1(e)||isCollection$1(e))&&e.anchor;a&&anchorIsValid(a)&&(r.add(a),i.push(`&${a}`));const l=e.tag??(t.default?null:t.tag);return l&&i.push(n.directives.tagString(l)),i.join(" ")}function stringify$2(e,t,r,n){if(isPair(e))return e.toString(t,r,n);if(isAlias(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i;const a=isNode(e)?e:t.doc.createNode(e,{onTagObj:d=>i=d});i??(i=getTagObject(t.doc.schema.tags,a));const l=stringifyProps(a,i,t);l.length>0&&(t.indentAtStart=(t.indentAtStart??0)+l.length+1);const u=typeof i.stringify=="function"?i.stringify(a,t,r,n):isScalar$1(a)?stringifyString(a,t,r,n):a.toString(t,r,n);return l?isScalar$1(a)||u[0]==="{"||u[0]==="["?`${l} ${u}`:`${l}
${t.indent}${u}`:u}function stringifyPair({key:e,value:t},r,n,i){const{allNullValues:a,doc:l,indent:u,indentStep:d,options:{commentString:m,indentSeq:v,simpleKeys:x}}=r;let $=isNode(e)&&e.comment||null;if(x){if($)throw new Error("With simple keys, key nodes cannot have comments");if(isCollection$1(e)||!isNode(e)&&typeof e=="object"){const X="With simple keys, collection cannot be used as a key value";throw new Error(X)}}let T=!x&&(!e||$&&t==null&&!r.inFlow||isCollection$1(e)||(isScalar$1(e)?e.type===Scalar.BLOCK_FOLDED||e.type===Scalar.BLOCK_LITERAL:typeof e=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!T&&(x||!a),indent:u+d});let A=!1,L=!1,P=stringify$2(e,r,()=>A=!0,()=>L=!0);if(!T&&!r.inFlow&&P.length>1024){if(x)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");T=!0}if(r.inFlow){if(a||t==null)return A&&n&&n(),P===""?"?":T?`? ${P}`:P}else if(a&&!x||t==null&&T)return P=`? ${P}`,$&&!A?P+=lineComment(P,r.indent,m($)):L&&i&&i(),P;A&&($=null),T?($&&(P+=lineComment(P,r.indent,m($))),P=`? ${P}
${u}:`):(P=`${P}:`,$&&(P+=lineComment(P,r.indent,m($))));let q,C,D;isNode(t)?(q=!!t.spaceBefore,C=t.commentBefore,D=t.comment):(q=!1,C=null,D=null,t&&typeof t=="object"&&(t=l.createNode(t))),r.implicitKey=!1,!T&&!$&&isScalar$1(t)&&(r.indentAtStart=P.length+1),L=!1,!v&&d.length>=2&&!r.inFlow&&!T&&isSeq(t)&&!t.flow&&!t.tag&&!t.anchor&&(r.indent=r.indent.substring(2));let G=!1;const B=stringify$2(t,r,()=>G=!0,()=>L=!0);let H=" ";if($||q||C){if(H=q?`
`:"",C){const X=m(C);H+=`
${indentComment(X,r.indent)}`}B===""&&!r.inFlow?H===`
`&&D&&(H=`

`):H+=`
${r.indent}`}else if(!T&&isCollection$1(t)){const X=B[0],re=B.indexOf(`
`),pe=re!==-1,$e=r.inFlow??t.flow??t.items.length===0;if(pe||!$e){let ke=!1;if(pe&&(X==="&"||X==="!")){let Ne=B.indexOf(" ");X==="&"&&Ne!==-1&&Ne<re&&B[Ne+1]==="!"&&(Ne=B.indexOf(" ",Ne+1)),(Ne===-1||re<Ne)&&(ke=!0)}ke||(H=`
${r.indent}`)}}else(B===""||B[0]===`
`)&&(H="");return P+=H+B,r.inFlow?G&&n&&n():D&&!G?P+=lineComment(P,r.indent,m(D)):L&&i&&i(),P}function warn$1(e,t){(e==="debug"||e==="warn")&&console.warn(t)}const MERGE_KEY="<<",merge={identify:e=>e===MERGE_KEY||typeof e=="symbol"&&e.description===MERGE_KEY,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Scalar(Symbol(MERGE_KEY)),{addToJSMap:addMergeToJSMap}),stringify:()=>MERGE_KEY},isMergeKey=(e,t)=>(merge.identify(t)||isScalar$1(t)&&(!t.type||t.type===Scalar.PLAIN)&&merge.identify(t.value))&&e?.doc.schema.tags.some(r=>r.tag===merge.tag&&r.default);function addMergeToJSMap(e,t,r){if(r=e&&isAlias(r)?r.resolve(e.doc):r,isSeq(r))for(const n of r.items)mergeValue(e,t,n);else if(Array.isArray(r))for(const n of r)mergeValue(e,t,n);else mergeValue(e,t,r)}function mergeValue(e,t,r){const n=e&&isAlias(r)?r.resolve(e.doc):r;if(!isMap(n))throw new Error("Merge sources must be maps or map aliases");const i=n.toJSON(null,e,Map);for(const[a,l]of i)t instanceof Map?t.has(a)||t.set(a,l):t instanceof Set?t.add(a):Object.prototype.hasOwnProperty.call(t,a)||Object.defineProperty(t,a,{value:l,writable:!0,enumerable:!0,configurable:!0});return t}function addPairToJSMap(e,t,{key:r,value:n}){if(isNode(r)&&r.addToJSMap)r.addToJSMap(e,t,n);else if(isMergeKey(e,r))addMergeToJSMap(e,t,n);else{const i=toJS(r,"",e);if(t instanceof Map)t.set(i,toJS(n,i,e));else if(t instanceof Set)t.add(i);else{const a=stringifyKey(r,i,e),l=toJS(n,a,e);a in t?Object.defineProperty(t,a,{value:l,writable:!0,enumerable:!0,configurable:!0}):t[a]=l}}return t}function stringifyKey(e,t,r){if(t===null)return"";if(typeof t!="object")return String(t);if(isNode(e)&&r?.doc){const n=createStringifyContext(r.doc,{});n.anchors=new Set;for(const a of r.anchors.keys())n.anchors.add(a.anchor);n.inFlow=!0,n.inStringifyKey=!0;const i=e.toString(n);if(!r.mapKeyWarned){let a=JSON.stringify(i);a.length>40&&(a=a.substring(0,36)+'..."'),warn$1(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${a}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(t)}function createPair(e,t,r){const n=createNode(e,void 0,r),i=createNode(t,void 0,r);return new Pair(n,i)}class Pair{constructor(t,r=null){Object.defineProperty(this,NODE_TYPE,{value:PAIR}),this.key=t,this.value=r}clone(t){let{key:r,value:n}=this;return isNode(r)&&(r=r.clone(t)),isNode(n)&&(n=n.clone(t)),new Pair(r,n)}toJSON(t,r){const n=r?.mapAsMap?new Map:{};return addPairToJSMap(r,n,this)}toString(t,r,n){return t?.doc?stringifyPair(this,t,r,n):JSON.stringify(this)}}function stringifyCollection(e,t,r){return(t.inFlow??e.flow?stringifyFlowCollection:stringifyBlockCollection)(e,t,r)}function stringifyBlockCollection({comment:e,items:t},r,{blockItemPrefix:n,flowChars:i,itemIndent:a,onChompKeep:l,onComment:u}){const{indent:d,options:{commentString:m}}=r,v=Object.assign({},r,{indent:a,type:null});let x=!1;const $=[];for(let A=0;A<t.length;++A){const L=t[A];let P=null;if(isNode(L))!x&&L.spaceBefore&&$.push(""),addCommentBefore(r,$,L.commentBefore,x),L.comment&&(P=L.comment);else if(isPair(L)){const C=isNode(L.key)?L.key:null;C&&(!x&&C.spaceBefore&&$.push(""),addCommentBefore(r,$,C.commentBefore,x))}x=!1;let q=stringify$2(L,v,()=>P=null,()=>x=!0);P&&(q+=lineComment(q,a,m(P))),x&&P&&(x=!1),$.push(n+q)}let T;if($.length===0)T=i.start+i.end;else{T=$[0];for(let A=1;A<$.length;++A){const L=$[A];T+=L?`
${d}${L}`:`
`}}return e?(T+=`
`+indentComment(m(e),d),u&&u()):x&&l&&l(),T}function stringifyFlowCollection({items:e},t,{flowChars:r,itemIndent:n}){const{indent:i,indentStep:a,flowCollectionPadding:l,options:{commentString:u}}=t;n+=a;const d=Object.assign({},t,{indent:n,inFlow:!0,type:null});let m=!1,v=0;const x=[];for(let A=0;A<e.length;++A){const L=e[A];let P=null;if(isNode(L))L.spaceBefore&&x.push(""),addCommentBefore(t,x,L.commentBefore,!1),L.comment&&(P=L.comment);else if(isPair(L)){const C=isNode(L.key)?L.key:null;C&&(C.spaceBefore&&x.push(""),addCommentBefore(t,x,C.commentBefore,!1),C.comment&&(m=!0));const D=isNode(L.value)?L.value:null;D?(D.comment&&(P=D.comment),D.commentBefore&&(m=!0)):L.value==null&&C?.comment&&(P=C.comment)}P&&(m=!0);let q=stringify$2(L,d,()=>P=null);A<e.length-1&&(q+=","),P&&(q+=lineComment(q,n,u(P))),!m&&(x.length>v||q.includes(`
`))&&(m=!0),x.push(q),v=x.length}const{start:$,end:T}=r;if(x.length===0)return $+T;if(!m){const A=x.reduce((L,P)=>L+P.length+2,2);m=t.options.lineWidth>0&&A>t.options.lineWidth}if(m){let A=$;for(const L of x)A+=L?`
${a}${i}${L}`:`
`;return`${A}
${i}${T}`}else return`${$}${l}${x.join(" ")}${l}${T}`}function addCommentBefore({indent:e,options:{commentString:t}},r,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){const a=indentComment(t(n),e);r.push(a.trimStart())}}function findPair(e,t){const r=isScalar$1(t)?t.value:t;for(const n of e)if(isPair(n)&&(n.key===t||n.key===r||isScalar$1(n.key)&&n.key.value===r))return n}class YAMLMap extends Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(MAP,t),this.items=[]}static from(t,r,n){const{keepUndefined:i,replacer:a}=n,l=new this(t),u=(d,m)=>{if(typeof a=="function")m=a.call(r,d,m);else if(Array.isArray(a)&&!a.includes(d))return;(m!==void 0||i)&&l.items.push(createPair(d,m,n))};if(r instanceof Map)for(const[d,m]of r)u(d,m);else if(r&&typeof r=="object")for(const d of Object.keys(r))u(d,r[d]);return typeof t.sortMapEntries=="function"&&l.items.sort(t.sortMapEntries),l}add(t,r){let n;isPair(t)?n=t:!t||typeof t!="object"||!("key"in t)?n=new Pair(t,t?.value):n=new Pair(t.key,t.value);const i=findPair(this.items,n.key),a=this.schema?.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);isScalar$1(i.value)&&isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(a){const l=this.items.findIndex(u=>a(n,u)<0);l===-1?this.items.push(n):this.items.splice(l,0,n)}else this.items.push(n)}delete(t){const r=findPair(this.items,t);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(t,r){const i=findPair(this.items,t)?.value;return(!r&&isScalar$1(i)?i.value:i)??void 0}has(t){return!!findPair(this.items,t)}set(t,r){this.add(new Pair(t,r),!0)}toJSON(t,r,n){const i=n?new n:r?.mapAsMap?new Map:{};r?.onCreate&&r.onCreate(i);for(const a of this.items)addPairToJSMap(r,i,a);return i}toString(t,r,n){if(!t)return JSON.stringify(this);for(const i of this.items)if(!isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),stringifyCollection(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:r})}}const map$1={collection:"map",default:!0,nodeClass:YAMLMap,tag:"tag:yaml.org,2002:map",resolve(e,t){return isMap(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,r)=>YAMLMap.from(e,t,r)};class YAMLSeq extends Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(SEQ,t),this.items=[]}add(t){this.items.push(t)}delete(t){const r=asItemIndex(t);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(t,r){const n=asItemIndex(t);if(typeof n!="number")return;const i=this.items[n];return!r&&isScalar$1(i)?i.value:i}has(t){const r=asItemIndex(t);return typeof r=="number"&&r<this.items.length}set(t,r){const n=asItemIndex(t);if(typeof n!="number")throw new Error(`Expected a valid index, not ${t}.`);const i=this.items[n];isScalar$1(i)&&isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(t,r){const n=[];r?.onCreate&&r.onCreate(n);let i=0;for(const a of this.items)n.push(toJS(a,String(i++),r));return n}toString(t,r,n){return t?stringifyCollection(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}static from(t,r,n){const{replacer:i}=n,a=new this(t);if(r&&Symbol.iterator in Object(r)){let l=0;for(let u of r){if(typeof i=="function"){const d=r instanceof Set?u:String(l++);u=i.call(r,d,u)}a.items.push(createNode(u,void 0,n))}}return a}}function asItemIndex(e){let t=isScalar$1(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const seq={collection:"seq",default:!0,nodeClass:YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(e,t){return isSeq(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,r)=>YAMLSeq.from(e,t,r)},string={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,r,n){return t=Object.assign({actualString:!0},t),stringifyString(e,t,r,n)}},nullTag={identify:e=>e==null,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Scalar(null),stringify:({source:e},t)=>typeof e=="string"&&nullTag.test.test(e)?e:t.options.nullStr},boolTag={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Scalar(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},r){if(e&&boolTag.test.test(e)){const n=e[0]==="t"||e[0]==="T";if(t===n)return e}return t?r.options.trueStr:r.options.falseStr}};function stringifyNumber({format:e,minFractionDigits:t,tag:r,value:n}){if(typeof n=="bigint")return String(n);const i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let a=Object.is(n,-0)?"-0":JSON.stringify(n);if(!e&&t&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(a)){let l=a.indexOf(".");l<0&&(l=a.length,a+=".");let u=t-(a.length-l-1);for(;u-- >0;)a+="0"}return a}const floatNaN$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:stringifyNumber},floatExp$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():stringifyNumber(e)}},float$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Scalar(parseFloat(e)),r=e.indexOf(".");return r!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-r-1),t},stringify:stringifyNumber},intIdentify$2=e=>typeof e=="bigint"||Number.isInteger(e),intResolve$1=(e,t,r,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),r);function intStringify$1(e,t,r){const{value:n}=e;return intIdentify$2(n)&&n>=0?r+n.toString(t):stringifyNumber(e)}const intOct$1={identify:e=>intIdentify$2(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,r)=>intResolve$1(e,2,8,r),stringify:e=>intStringify$1(e,8,"0o")},int$1={identify:intIdentify$2,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,r)=>intResolve$1(e,0,10,r),stringify:stringifyNumber},intHex$1={identify:e=>intIdentify$2(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,r)=>intResolve$1(e,2,16,r),stringify:e=>intStringify$1(e,16,"0x")},schema$2=[map$1,seq,string,nullTag,boolTag,intOct$1,int$1,intHex$1,floatNaN$1,floatExp$1,float$1];function intIdentify$1(e){return typeof e=="bigint"||Number.isInteger(e)}const stringifyJSON=({value:e})=>JSON.stringify(e),jsonScalars=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:stringifyJSON},{identify:e=>e==null,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:stringifyJSON},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:stringifyJSON},{identify:intIdentify$1,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:r})=>r?BigInt(e):parseInt(e,10),stringify:({value:e})=>intIdentify$1(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:stringifyJSON}],jsonError={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},schema$1=[map$1,seq].concat(jsonScalars,jsonError),binary={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){const r=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:r},n,i,a){if(!r)return"";const l=r;let u;if(typeof btoa=="function"){let d="";for(let m=0;m<l.length;++m)d+=String.fromCharCode(l[m]);u=btoa(d)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=Scalar.BLOCK_LITERAL),t!==Scalar.QUOTE_DOUBLE){const d=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),m=Math.ceil(u.length/d),v=new Array(m);for(let x=0,$=0;x<m;++x,$+=d)v[x]=u.substr($,d);u=v.join(t===Scalar.BLOCK_LITERAL?`
`:" ")}return stringifyString({comment:e,type:t,value:u},n,i,a)}};function resolvePairs(e,t){if(isSeq(e))for(let r=0;r<e.items.length;++r){let n=e.items[r];if(!isPair(n)){if(isMap(n)){n.items.length>1&&t("Each pair must have its own sequence indicator");const i=n.items[0]||new Pair(new Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){const a=i.value??i.key;a.comment=a.comment?`${n.comment}
${a.comment}`:n.comment}n=i}e.items[r]=isPair(n)?n:new Pair(n)}}else t("Expected a sequence for this tag");return e}function createPairs(e,t,r){const{replacer:n}=r,i=new YAMLSeq(e);i.tag="tag:yaml.org,2002:pairs";let a=0;if(t&&Symbol.iterator in Object(t))for(let l of t){typeof n=="function"&&(l=n.call(t,String(a++),l));let u,d;if(Array.isArray(l))if(l.length===2)u=l[0],d=l[1];else throw new TypeError(`Expected [key, value] tuple: ${l}`);else if(l&&l instanceof Object){const m=Object.keys(l);if(m.length===1)u=m[0],d=l[u];else throw new TypeError(`Expected tuple with one key, not ${m.length} keys`)}else u=l;i.items.push(createPair(u,d,r))}return i}const pairs={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:resolvePairs,createNode:createPairs};class YAMLOMap extends YAMLSeq{constructor(){super(),this.add=YAMLMap.prototype.add.bind(this),this.delete=YAMLMap.prototype.delete.bind(this),this.get=YAMLMap.prototype.get.bind(this),this.has=YAMLMap.prototype.has.bind(this),this.set=YAMLMap.prototype.set.bind(this),this.tag=YAMLOMap.tag}toJSON(t,r){if(!r)return super.toJSON(t);const n=new Map;r?.onCreate&&r.onCreate(n);for(const i of this.items){let a,l;if(isPair(i)?(a=toJS(i.key,"",r),l=toJS(i.value,a,r)):a=toJS(i,"",r),n.has(a))throw new Error("Ordered maps must not include duplicate keys");n.set(a,l)}return n}static from(t,r,n){const i=createPairs(t,r,n),a=new this;return a.items=i.items,a}}YAMLOMap.tag="tag:yaml.org,2002:omap";const omap={collection:"seq",identify:e=>e instanceof Map,nodeClass:YAMLOMap,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const r=resolvePairs(e,t),n=[];for(const{key:i}of r.items)isScalar$1(i)&&(n.includes(i.value)?t(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new YAMLOMap,r)},createNode:(e,t,r)=>YAMLOMap.from(e,t,r)};function boolStringify({value:e,source:t},r){return t&&(e?trueTag:falseTag).test.test(t)?t:e?r.options.trueStr:r.options.falseStr}const trueTag={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Scalar(!0),stringify:boolStringify},falseTag={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Scalar(!1),stringify:boolStringify},floatNaN={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:stringifyNumber},floatExp={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():stringifyNumber(e)}},float={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Scalar(parseFloat(e.replace(/_/g,""))),r=e.indexOf(".");if(r!==-1){const n=e.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(t.minFractionDigits=n.length)}return t},stringify:stringifyNumber},intIdentify=e=>typeof e=="bigint"||Number.isInteger(e);function intResolve(e,t,r,{intAsBigInt:n}){const i=e[0];if((i==="-"||i==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(r){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const l=BigInt(e);return i==="-"?BigInt(-1)*l:l}const a=parseInt(e,r);return i==="-"?-1*a:a}function intStringify(e,t,r){const{value:n}=e;if(intIdentify(n)){const i=n.toString(t);return n<0?"-"+r+i.substr(1):r+i}return stringifyNumber(e)}const intBin={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,r)=>intResolve(e,2,2,r),stringify:e=>intStringify(e,2,"0b")},intOct={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,r)=>intResolve(e,1,8,r),stringify:e=>intStringify(e,8,"0")},int={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,r)=>intResolve(e,0,10,r),stringify:stringifyNumber},intHex={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,r)=>intResolve(e,2,16,r),stringify:e=>intStringify(e,16,"0x")};class YAMLSet extends YAMLMap{constructor(t){super(t),this.tag=YAMLSet.tag}add(t){let r;isPair(t)?r=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?r=new Pair(t.key,null):r=new Pair(t,null),findPair(this.items,r.key)||this.items.push(r)}get(t,r){const n=findPair(this.items,t);return!r&&isPair(n)?isScalar$1(n.key)?n.key.value:n.key:n}set(t,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);const n=findPair(this.items,t);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new Pair(t))}toJSON(t,r){return super.toJSON(t,r,Set)}toString(t,r,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}static from(t,r,n){const{replacer:i}=n,a=new this(t);if(r&&Symbol.iterator in Object(r))for(let l of r)typeof i=="function"&&(l=i.call(r,l,l)),a.items.push(createPair(l,null,n));return a}}YAMLSet.tag="tag:yaml.org,2002:set";const set$2={collection:"map",identify:e=>e instanceof Set,nodeClass:YAMLSet,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,r)=>YAMLSet.from(e,t,r),resolve(e,t){if(isMap(e)){if(e.hasAllNullValues(!0))return Object.assign(new YAMLSet,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function parseSexagesimal(e,t){const r=e[0],n=r==="-"||r==="+"?e.substring(1):e,i=l=>t?BigInt(l):Number(l),a=n.replace(/_/g,"").split(":").reduce((l,u)=>l*i(60)+i(u),i(0));return r==="-"?i(-1)*a:a}function stringifySexagesimal(e){let{value:t}=e,r=l=>l;if(typeof t=="bigint")r=l=>BigInt(l);else if(isNaN(t)||!isFinite(t))return stringifyNumber(e);let n="";t<0&&(n="-",t*=r(-1));const i=r(60),a=[t%i];return t<60?a.unshift(0):(t=(t-a[0])/i,a.unshift(t%i),t>=60&&(t=(t-a[0])/i,a.unshift(t))),n+a.map(l=>String(l).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const intTime={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:r})=>parseSexagesimal(e,r),stringify:stringifySexagesimal},floatTime={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>parseSexagesimal(e,!1),stringify:stringifySexagesimal},timestamp={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(timestamp.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,r,n,i,a,l,u]=t.map(Number),d=t[7]?Number((t[7]+"00").substr(1,3)):0;let m=Date.UTC(r,n-1,i,a||0,l||0,u||0,d);const v=t[8];if(v&&v!=="Z"){let x=parseSexagesimal(v,!1);Math.abs(x)<30&&(x*=60),m-=6e4*x}return new Date(m)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},schema=[map$1,seq,string,nullTag,trueTag,falseTag,intBin,intOct,int,intHex,floatNaN,floatExp,float,binary,merge,omap,pairs,set$2,intTime,floatTime,timestamp],schemas=new Map([["core",schema$2],["failsafe",[map$1,seq,string]],["json",schema$1],["yaml11",schema],["yaml-1.1",schema]]),tagsByName={binary,bool:boolTag,float:float$1,floatExp:floatExp$1,floatNaN:floatNaN$1,floatTime,int:int$1,intHex:intHex$1,intOct:intOct$1,intTime,map:map$1,merge,null:nullTag,omap,pairs,seq,set:set$2,timestamp},coreKnownTags={"tag:yaml.org,2002:binary":binary,"tag:yaml.org,2002:merge":merge,"tag:yaml.org,2002:omap":omap,"tag:yaml.org,2002:pairs":pairs,"tag:yaml.org,2002:set":set$2,"tag:yaml.org,2002:timestamp":timestamp};function getTags(e,t,r){const n=schemas.get(t);if(n&&!e)return r&&!n.includes(merge)?n.concat(merge):n.slice();let i=n;if(!i)if(Array.isArray(e))i=[];else{const a=Array.from(schemas.keys()).filter(l=>l!=="yaml11").map(l=>JSON.stringify(l)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${a} or define customTags array`)}if(Array.isArray(e))for(const a of e)i=i.concat(a);else typeof e=="function"&&(i=e(i.slice()));return r&&(i=i.concat(merge)),i.reduce((a,l)=>{const u=typeof l=="string"?tagsByName[l]:l;if(!u){const d=JSON.stringify(l),m=Object.keys(tagsByName).map(v=>JSON.stringify(v)).join(", ");throw new Error(`Unknown custom tag ${d}; use one of ${m}`)}return a.includes(u)||a.push(u),a},[])}const sortMapEntriesByKey=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Schema{constructor({compat:t,customTags:r,merge:n,resolveKnownTags:i,schema:a,sortMapEntries:l,toStringDefaults:u}){this.compat=Array.isArray(t)?getTags(t,"compat"):t?getTags(null,t):null,this.name=typeof a=="string"&&a||"core",this.knownTags=i?coreKnownTags:{},this.tags=getTags(r,this.name,n),this.toStringOptions=u??null,Object.defineProperty(this,MAP,{value:map$1}),Object.defineProperty(this,SCALAR$1,{value:string}),Object.defineProperty(this,SEQ,{value:seq}),this.sortMapEntries=typeof l=="function"?l:l===!0?sortMapEntriesByKey:null}clone(){const t=Object.create(Schema.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function stringifyDocument(e,t){const r=[];let n=t.directives===!0;if(t.directives!==!1&&e.directives){const d=e.directives.toString(e);d?(r.push(d),n=!0):e.directives.docStart&&(n=!0)}n&&r.push("---");const i=createStringifyContext(e,t),{commentString:a}=i.options;if(e.commentBefore){r.length!==1&&r.unshift("");const d=a(e.commentBefore);r.unshift(indentComment(d,""))}let l=!1,u=null;if(e.contents){if(isNode(e.contents)){if(e.contents.spaceBefore&&n&&r.push(""),e.contents.commentBefore){const v=a(e.contents.commentBefore);r.push(indentComment(v,""))}i.forceBlockIndent=!!e.comment,u=e.contents.comment}const d=u?void 0:()=>l=!0;let m=stringify$2(e.contents,i,()=>u=null,d);u&&(m+=lineComment(m,"",a(u))),(m[0]==="|"||m[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${m}`:r.push(m)}else r.push(stringify$2(e.contents,i));if(e.directives?.docEnd)if(e.comment){const d=a(e.comment);d.includes(`
`)?(r.push("..."),r.push(indentComment(d,""))):r.push(`... ${d}`)}else r.push("...");else{let d=e.comment;d&&l&&(d=d.replace(/^\n+/,"")),d&&((!l||u)&&r[r.length-1]!==""&&r.push(""),r.push(indentComment(a(d),"")))}return r.join(`
`)+`
`}class Document{constructor(t,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,NODE_TYPE,{value:DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);const a=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=a;let{version:l}=a;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(l=this.directives.yaml.version)):this.directives=new Directives({version:l}),this.setSchema(l,n),this.contents=t===void 0?null:this.createNode(t,i,n)}clone(){const t=Object.create(Document.prototype,{[NODE_TYPE]:{value:DOC}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=isNode(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){assertCollection(this.contents)&&this.contents.add(t)}addIn(t,r){assertCollection(this.contents)&&this.contents.addIn(t,r)}createAlias(t,r){if(!t.anchor){const n=anchorNames(this);t.anchor=!r||n.has(r)?findNewAnchor(r||"a",n):r}return new Alias(t.anchor)}createNode(t,r,n){let i;if(typeof r=="function")t=r.call({"":t},"",t),i=r;else if(Array.isArray(r)){const P=C=>typeof C=="number"||C instanceof String||C instanceof Number,q=r.filter(P).map(String);q.length>0&&(r=r.concat(q)),i=r}else n===void 0&&r&&(n=r,r=void 0);const{aliasDuplicateObjects:a,anchorPrefix:l,flow:u,keepUndefined:d,onTagObj:m,tag:v}=n??{},{onAnchor:x,setAnchors:$,sourceObjects:T}=createNodeAnchors(this,l||"a"),A={aliasDuplicateObjects:a??!0,keepUndefined:d??!1,onAnchor:x,onTagObj:m,replacer:i,schema:this.schema,sourceObjects:T},L=createNode(t,v,A);return u&&isCollection$1(L)&&(L.flow=!0),$(),L}createPair(t,r,n={}){const i=this.createNode(t,null,n),a=this.createNode(r,null,n);return new Pair(i,a)}delete(t){return assertCollection(this.contents)?this.contents.delete(t):!1}deleteIn(t){return isEmptyPath(t)?this.contents==null?!1:(this.contents=null,!0):assertCollection(this.contents)?this.contents.deleteIn(t):!1}get(t,r){return isCollection$1(this.contents)?this.contents.get(t,r):void 0}getIn(t,r){return isEmptyPath(t)?!r&&isScalar$1(this.contents)?this.contents.value:this.contents:isCollection$1(this.contents)?this.contents.getIn(t,r):void 0}has(t){return isCollection$1(this.contents)?this.contents.has(t):!1}hasIn(t){return isEmptyPath(t)?this.contents!==void 0:isCollection$1(this.contents)?this.contents.hasIn(t):!1}set(t,r){this.contents==null?this.contents=collectionFromPath(this.schema,[t],r):assertCollection(this.contents)&&this.contents.set(t,r)}setIn(t,r){isEmptyPath(t)?this.contents=r:this.contents==null?this.contents=collectionFromPath(this.schema,Array.from(t),r):assertCollection(this.contents)&&this.contents.setIn(t,r)}setSchema(t,r={}){typeof t=="number"&&(t=String(t));let n;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Directives({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Directives({version:t}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const i=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:a,reviver:l}={}){const u={anchors:new Map,doc:this,keep:!t,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},d=toJS(this.contents,r??"",u);if(typeof a=="function")for(const{count:m,res:v}of u.anchors.values())a(v,m);return typeof l=="function"?applyReviver(l,{"":d},"",d):d}toJSON(t,r){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:r})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const r=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return stringifyDocument(this,t)}}function assertCollection(e){if(isCollection$1(e))return!0;throw new Error("Expected a YAML collection as document contents")}class YAMLError extends Error{constructor(t,r,n,i){super(),this.name=t,this.code=n,this.message=i,this.pos=r}}class YAMLParseError extends YAMLError{constructor(t,r,n){super("YAMLParseError",t,r,n)}}class YAMLWarning extends YAMLError{constructor(t,r,n){super("YAMLWarning",t,r,n)}}const prettifyError=(e,t)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(u=>t.linePos(u));const{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let a=i-1,l=e.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(a>=60&&l.length>80){const u=Math.min(a-39,l.length-79);l=""+l.substring(u),a-=u-1}if(l.length>80&&(l=l.substring(0,79)+""),n>1&&/^ *$/.test(l.substring(0,a))){let u=e.substring(t.lineStarts[n-2],t.lineStarts[n-1]);u.length>80&&(u=u.substring(0,79)+`
`),l=u+l}if(/[^ ]/.test(l)){let u=1;const d=r.linePos[1];d?.line===n&&d.col>i&&(u=Math.max(1,Math.min(d.col-i,80-a)));const m=" ".repeat(a)+"^".repeat(u);r.message+=`:

${l}
${m}
`}};function resolveProps(e,{flow:t,indicator:r,next:n,offset:i,onError:a,parentIndent:l,startOnNewline:u}){let d=!1,m=u,v=u,x="",$="",T=!1,A=!1,L=null,P=null,q=null,C=null,D=null,G=null,B=null;for(const re of e)switch(A&&(re.type!=="space"&&re.type!=="newline"&&re.type!=="comma"&&a(re.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),A=!1),L&&(m&&re.type!=="comment"&&re.type!=="newline"&&a(L,"TAB_AS_INDENT","Tabs are not allowed as indentation"),L=null),re.type){case"space":!t&&(r!=="doc-start"||n?.type!=="flow-collection")&&re.source.includes("	")&&(L=re),v=!0;break;case"comment":{v||a(re,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const pe=re.source.substring(1)||" ";x?x+=$+pe:x=pe,$="",m=!1;break}case"newline":m?x?x+=re.source:(!G||r!=="seq-item-ind")&&(d=!0):$+=re.source,m=!0,T=!0,(P||q)&&(C=re),v=!0;break;case"anchor":P&&a(re,"MULTIPLE_ANCHORS","A node can have at most one anchor"),re.source.endsWith(":")&&a(re.offset+re.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),P=re,B??(B=re.offset),m=!1,v=!1,A=!0;break;case"tag":{q&&a(re,"MULTIPLE_TAGS","A node can have at most one tag"),q=re,B??(B=re.offset),m=!1,v=!1,A=!0;break}case r:(P||q)&&a(re,"BAD_PROP_ORDER",`Anchors and tags must be after the ${re.source} indicator`),G&&a(re,"UNEXPECTED_TOKEN",`Unexpected ${re.source} in ${t??"collection"}`),G=re,m=r==="seq-item-ind"||r==="explicit-key-ind",v=!1;break;case"comma":if(t){D&&a(re,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),D=re,m=!1,v=!1;break}default:a(re,"UNEXPECTED_TOKEN",`Unexpected ${re.type} token`),m=!1,v=!1}const H=e[e.length-1],X=H?H.offset+H.source.length:i;return A&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&a(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),L&&(m&&L.indent<=l||n?.type==="block-map"||n?.type==="block-seq")&&a(L,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:D,found:G,spaceBefore:d,comment:x,hasNewline:T,anchor:P,tag:q,newlineAfterProp:C,end:X,start:B??X}}function containsNewline(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(const t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of e.items){for(const r of t.start)if(r.type==="newline")return!0;if(t.sep){for(const r of t.sep)if(r.type==="newline")return!0}if(containsNewline(t.key)||containsNewline(t.value))return!0}return!1;default:return!0}}function flowIndentCheck(e,t,r){if(t?.type==="flow-collection"){const n=t.end[0];n.indent===e&&(n.source==="]"||n.source==="}")&&containsNewline(t)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function mapIncludes(e,t,r){const{uniqueKeys:n}=e.options;if(n===!1)return!1;const i=typeof n=="function"?n:(a,l)=>a===l||isScalar$1(a)&&isScalar$1(l)&&a.value===l.value;return t.some(a=>i(a.key,r))}const startColMsg="All mapping items must start at the same column";function resolveBlockMap({composeNode:e,composeEmptyNode:t},r,n,i,a){const l=a?.nodeClass??YAMLMap,u=new l(r.schema);r.atRoot&&(r.atRoot=!1);let d=n.offset,m=null;for(const v of n.items){const{start:x,key:$,sep:T,value:A}=v,L=resolveProps(x,{indicator:"explicit-key-ind",next:$??T?.[0],offset:d,onError:i,parentIndent:n.indent,startOnNewline:!0}),P=!L.found;if(P){if($&&($.type==="block-seq"?i(d,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in $&&$.indent!==n.indent&&i(d,"BAD_INDENT",startColMsg)),!L.anchor&&!L.tag&&!T){m=L.end,L.comment&&(u.comment?u.comment+=`
`+L.comment:u.comment=L.comment);continue}(L.newlineAfterProp||containsNewline($))&&i($??x[x.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else L.found?.indent!==n.indent&&i(d,"BAD_INDENT",startColMsg);r.atKey=!0;const q=L.end,C=$?e(r,$,L,i):t(r,q,x,null,L,i);r.schema.compat&&flowIndentCheck(n.indent,$,i),r.atKey=!1,mapIncludes(r,u.items,C)&&i(q,"DUPLICATE_KEY","Map keys must be unique");const D=resolveProps(T??[],{indicator:"map-value-ind",next:A,offset:C.range[2],onError:i,parentIndent:n.indent,startOnNewline:!$||$.type==="block-scalar"});if(d=D.end,D.found){P&&(A?.type==="block-map"&&!D.hasNewline&&i(d,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&L.start<D.found.offset-1024&&i(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const G=A?e(r,A,D,i):t(r,d,T,null,D,i);r.schema.compat&&flowIndentCheck(n.indent,A,i),d=G.range[2];const B=new Pair(C,G);r.options.keepSourceTokens&&(B.srcToken=v),u.items.push(B)}else{P&&i(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),D.comment&&(C.comment?C.comment+=`
`+D.comment:C.comment=D.comment);const G=new Pair(C);r.options.keepSourceTokens&&(G.srcToken=v),u.items.push(G)}}return m&&m<d&&i(m,"IMPOSSIBLE","Map comment with trailing content"),u.range=[n.offset,d,m??d],u}function resolveBlockSeq({composeNode:e,composeEmptyNode:t},r,n,i,a){const l=a?.nodeClass??YAMLSeq,u=new l(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let d=n.offset,m=null;for(const{start:v,value:x}of n.items){const $=resolveProps(v,{indicator:"seq-item-ind",next:x,offset:d,onError:i,parentIndent:n.indent,startOnNewline:!0});if(!$.found)if($.anchor||$.tag||x)x?.type==="block-seq"?i($.end,"BAD_INDENT","All sequence items must start at the same column"):i(d,"MISSING_CHAR","Sequence item without - indicator");else{m=$.end,$.comment&&(u.comment=$.comment);continue}const T=x?e(r,x,$,i):t(r,$.end,v,null,$,i);r.schema.compat&&flowIndentCheck(n.indent,x,i),d=T.range[2],u.items.push(T)}return u.range=[n.offset,d,m??d],u}function resolveEnd(e,t,r,n){let i="";if(e){let a=!1,l="";for(const u of e){const{source:d,type:m}=u;switch(m){case"space":a=!0;break;case"comment":{r&&!a&&n(u,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const v=d.substring(1)||" ";i?i+=l+v:i=v,l="";break}case"newline":i&&(l+=d),a=!0;break;default:n(u,"UNEXPECTED_TOKEN",`Unexpected ${m} at node end`)}t+=d.length}}return{comment:i,offset:t}}const blockMsg="Block collections are not allowed within flow collections",isBlock=e=>e&&(e.type==="block-map"||e.type==="block-seq");function resolveFlowCollection({composeNode:e,composeEmptyNode:t},r,n,i,a){const l=n.start.source==="{",u=l?"flow map":"flow sequence",d=a?.nodeClass??(l?YAMLMap:YAMLSeq),m=new d(r.schema);m.flow=!0;const v=r.atRoot;v&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let x=n.offset+n.start.source.length;for(let P=0;P<n.items.length;++P){const q=n.items[P],{start:C,key:D,sep:G,value:B}=q,H=resolveProps(C,{flow:u,indicator:"explicit-key-ind",next:D??G?.[0],offset:x,onError:i,parentIndent:n.indent,startOnNewline:!1});if(!H.found){if(!H.anchor&&!H.tag&&!G&&!B){P===0&&H.comma?i(H.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${u}`):P<n.items.length-1&&i(H.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${u}`),H.comment&&(m.comment?m.comment+=`
`+H.comment:m.comment=H.comment),x=H.end;continue}!l&&r.options.strict&&containsNewline(D)&&i(D,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(P===0)H.comma&&i(H.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${u}`);else if(H.comma||i(H.start,"MISSING_CHAR",`Missing , between ${u} items`),H.comment){let X="";e:for(const re of C)switch(re.type){case"comma":case"space":break;case"comment":X=re.source.substring(1);break e;default:break e}if(X){let re=m.items[m.items.length-1];isPair(re)&&(re=re.value??re.key),re.comment?re.comment+=`
`+X:re.comment=X,H.comment=H.comment.substring(X.length+1)}}if(!l&&!G&&!H.found){const X=B?e(r,B,H,i):t(r,H.end,G,null,H,i);m.items.push(X),x=X.range[2],isBlock(B)&&i(X.range,"BLOCK_IN_FLOW",blockMsg)}else{r.atKey=!0;const X=H.end,re=D?e(r,D,H,i):t(r,X,C,null,H,i);isBlock(D)&&i(re.range,"BLOCK_IN_FLOW",blockMsg),r.atKey=!1;const pe=resolveProps(G??[],{flow:u,indicator:"map-value-ind",next:B,offset:re.range[2],onError:i,parentIndent:n.indent,startOnNewline:!1});if(pe.found){if(!l&&!H.found&&r.options.strict){if(G)for(const Ne of G){if(Ne===pe.found)break;if(Ne.type==="newline"){i(Ne,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}H.start<pe.found.offset-1024&&i(pe.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else B&&("source"in B&&B.source?.[0]===":"?i(B,"MISSING_CHAR",`Missing space after : in ${u}`):i(pe.start,"MISSING_CHAR",`Missing , or : between ${u} items`));const $e=B?e(r,B,pe,i):pe.found?t(r,pe.end,G,null,pe,i):null;$e?isBlock(B)&&i($e.range,"BLOCK_IN_FLOW",blockMsg):pe.comment&&(re.comment?re.comment+=`
`+pe.comment:re.comment=pe.comment);const ke=new Pair(re,$e);if(r.options.keepSourceTokens&&(ke.srcToken=q),l){const Ne=m;mapIncludes(r,Ne.items,re)&&i(X,"DUPLICATE_KEY","Map keys must be unique"),Ne.items.push(ke)}else{const Ne=new YAMLMap(r.schema);Ne.flow=!0,Ne.items.push(ke);const Ye=($e??re).range;Ne.range=[re.range[0],Ye[1],Ye[2]],m.items.push(Ne)}x=$e?$e.range[2]:pe.end}}const $=l?"}":"]",[T,...A]=n.end;let L=x;if(T?.source===$)L=T.offset+T.source.length;else{const P=u[0].toUpperCase()+u.substring(1),q=v?`${P} must end with a ${$}`:`${P} in block collection must be sufficiently indented and end with a ${$}`;i(x,v?"MISSING_CHAR":"BAD_INDENT",q),T&&T.source.length!==1&&A.unshift(T)}if(A.length>0){const P=resolveEnd(A,L,r.options.strict,i);P.comment&&(m.comment?m.comment+=`
`+P.comment:m.comment=P.comment),m.range=[n.offset,L,P.offset]}else m.range=[n.offset,L,L];return m}function resolveCollection(e,t,r,n,i,a){const l=r.type==="block-map"?resolveBlockMap(e,t,r,n,a):r.type==="block-seq"?resolveBlockSeq(e,t,r,n,a):resolveFlowCollection(e,t,r,n,a),u=l.constructor;return i==="!"||i===u.tagName?(l.tag=u.tagName,l):(i&&(l.tag=i),l)}function composeCollection(e,t,r,n,i){const a=n.tag,l=a?t.directives.tagName(a.source,$=>i(a,"TAG_RESOLVE_FAILED",$)):null;if(r.type==="block-seq"){const{anchor:$,newlineAfterProp:T}=n,A=$&&a?$.offset>a.offset?$:a:$??a;A&&(!T||T.offset<A.offset)&&i(A,"MISSING_CHAR","Missing newline after block sequence props")}const u=r.type==="block-map"?"map":r.type==="block-seq"?"seq":r.start.source==="{"?"map":"seq";if(!a||!l||l==="!"||l===YAMLMap.tagName&&u==="map"||l===YAMLSeq.tagName&&u==="seq")return resolveCollection(e,t,r,i,l);let d=t.schema.tags.find($=>$.tag===l&&$.collection===u);if(!d){const $=t.schema.knownTags[l];if($?.collection===u)t.schema.tags.push(Object.assign({},$,{default:!1})),d=$;else return $?i(a,"BAD_COLLECTION_TYPE",`${$.tag} used for ${u} collection, but expects ${$.collection??"scalar"}`,!0):i(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${l}`,!0),resolveCollection(e,t,r,i,l)}const m=resolveCollection(e,t,r,i,l,d),v=d.resolve?.(m,$=>i(a,"TAG_RESOLVE_FAILED",$),t.options)??m,x=isNode(v)?v:new Scalar(v);return x.range=m.range,x.tag=l,d?.format&&(x.format=d.format),x}function resolveBlockScalar(e,t,r){const n=t.offset,i=parseBlockScalarHeader(t,e.options.strict,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};const a=i.mode===">"?Scalar.BLOCK_FOLDED:Scalar.BLOCK_LITERAL,l=t.source?splitLines(t.source):[];let u=l.length;for(let L=l.length-1;L>=0;--L){const P=l[L][1];if(P===""||P==="\r")u=L;else break}if(u===0){const L=i.chomp==="+"&&l.length>0?`
`.repeat(Math.max(1,l.length-1)):"";let P=n+i.length;return t.source&&(P+=t.source.length),{value:L,type:a,comment:i.comment,range:[n,P,P]}}let d=t.indent+i.indent,m=t.offset+i.length,v=0;for(let L=0;L<u;++L){const[P,q]=l[L];if(q===""||q==="\r")i.indent===0&&P.length>d&&(d=P.length);else{P.length<d&&r(m+P.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(d=P.length),v=L,d===0&&!e.atRoot&&r(m,"BAD_INDENT","Block scalar values in collections must be indented");break}m+=P.length+q.length+1}for(let L=l.length-1;L>=u;--L)l[L][0].length>d&&(u=L+1);let x="",$="",T=!1;for(let L=0;L<v;++L)x+=l[L][0].slice(d)+`
`;for(let L=v;L<u;++L){let[P,q]=l[L];m+=P.length+q.length+1;const C=q[q.length-1]==="\r";if(C&&(q=q.slice(0,-1)),q&&P.length<d){const G=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(m-q.length-(C?2:1),"BAD_INDENT",G),P=""}a===Scalar.BLOCK_LITERAL?(x+=$+P.slice(d)+q,$=`
`):P.length>d||q[0]==="	"?($===" "?$=`
`:!T&&$===`
`&&($=`

`),x+=$+P.slice(d)+q,$=`
`,T=!0):q===""?$===`
`?x+=`
`:$=`
`:(x+=$+q,$=" ",T=!1)}switch(i.chomp){case"-":break;case"+":for(let L=u;L<l.length;++L)x+=`
`+l[L][0].slice(d);x[x.length-1]!==`
`&&(x+=`
`);break;default:x+=`
`}const A=n+i.length+t.source.length;return{value:x,type:a,comment:i.comment,range:[n,A,A]}}function parseBlockScalarHeader({offset:e,props:t},r,n){if(t[0].type!=="block-scalar-header")return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],a=i[0];let l=0,u="",d=-1;for(let $=1;$<i.length;++$){const T=i[$];if(!u&&(T==="-"||T==="+"))u=T;else{const A=Number(T);!l&&A?l=A:d===-1&&(d=e+$)}}d!==-1&&n(d,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let m=!1,v="",x=i.length;for(let $=1;$<t.length;++$){const T=t[$];switch(T.type){case"space":m=!0;case"newline":x+=T.source.length;break;case"comment":r&&!m&&n(T,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),x+=T.source.length,v=T.source.substring(1);break;case"error":n(T,"UNEXPECTED_TOKEN",T.message),x+=T.source.length;break;default:{const A=`Unexpected token in block scalar header: ${T.type}`;n(T,"UNEXPECTED_TOKEN",A);const L=T.source;L&&typeof L=="string"&&(x+=L.length)}}}return{mode:a,indent:l,chomp:u,comment:v,length:x}}function splitLines(e){const t=e.split(/\n( *)/),r=t[0],n=r.match(/^( *)/),a=[n?.[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let l=1;l<t.length;l+=2)a.push([t[l],t[l+1]]);return a}function resolveFlowScalar(e,t,r){const{offset:n,type:i,source:a,end:l}=e;let u,d;const m=($,T,A)=>r(n+$,T,A);switch(i){case"scalar":u=Scalar.PLAIN,d=plainValue(a,m);break;case"single-quoted-scalar":u=Scalar.QUOTE_SINGLE,d=singleQuotedValue(a,m);break;case"double-quoted-scalar":u=Scalar.QUOTE_DOUBLE,d=doubleQuotedValue(a,m);break;default:return r(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+a.length,n+a.length]}}const v=n+a.length,x=resolveEnd(l,v,t,r);return{value:d,type:u,comment:x.comment,range:[n,v,x.offset]}}function plainValue(e,t){let r="";switch(e[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${e[0]}`;break}case"@":case"`":{r=`reserved character ${e[0]}`;break}}return r&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),foldLines(e)}function singleQuotedValue(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),foldLines(e.slice(1,-1)).replace(/''/g,"'")}function foldLines(e){let t,r;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(e);if(!n)return e;let i=n[1],a=" ",l=t.lastIndex;for(r.lastIndex=l;n=r.exec(e);)n[1]===""?a===`
`?i+=a:a=`
`:(i+=a+n[1],a=" "),l=r.lastIndex;const u=/[ \t]*(.*)/sy;return u.lastIndex=l,n=u.exec(e),i+a+(n?.[1]??"")}function doubleQuotedValue(e,t){let r="";for(let n=1;n<e.length-1;++n){const i=e[n];if(!(i==="\r"&&e[n+1]===`
`))if(i===`
`){const{fold:a,offset:l}=foldNewline(e,n);r+=a,n=l}else if(i==="\\"){let a=e[++n];const l=escapeCodes[a];if(l)r+=l;else if(a===`
`)for(a=e[n+1];a===" "||a==="	";)a=e[++n+1];else if(a==="\r"&&e[n+1]===`
`)for(a=e[++n+1];a===" "||a==="	";)a=e[++n+1];else if(a==="x"||a==="u"||a==="U"){const u={x:2,u:4,U:8}[a];r+=parseCharCode(e,n+1,u,t),n+=u}else{const u=e.substr(n-1,2);t(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${u}`),r+=u}}else if(i===" "||i==="	"){const a=n;let l=e[n+1];for(;l===" "||l==="	";)l=e[++n+1];l!==`
`&&!(l==="\r"&&e[n+2]===`
`)&&(r+=n>a?e.slice(a,n+1):i)}else r+=i}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),r}function foldNewline(e,t){let r="",n=e[t+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&e[t+2]!==`
`);)n===`
`&&(r+=`
`),t+=1,n=e[t+1];return r||(r=" "),{fold:r,offset:t}}const escapeCodes={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function parseCharCode(e,t,r,n){const i=e.substr(t,r),l=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(l)){const u=e.substr(t-2,r+2);return n(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${u}`),u}return String.fromCodePoint(l)}function composeScalar(e,t,r,n){const{value:i,type:a,comment:l,range:u}=t.type==="block-scalar"?resolveBlockScalar(e,t,n):resolveFlowScalar(t,e.options.strict,n),d=r?e.directives.tagName(r.source,x=>n(r,"TAG_RESOLVE_FAILED",x)):null;let m;e.options.stringKeys&&e.atKey?m=e.schema[SCALAR$1]:d?m=findScalarTagByName(e.schema,i,d,r,n):t.type==="scalar"?m=findScalarTagByTest(e,i,t,n):m=e.schema[SCALAR$1];let v;try{const x=m.resolve(i,$=>n(r??t,"TAG_RESOLVE_FAILED",$),e.options);v=isScalar$1(x)?x:new Scalar(x)}catch(x){const $=x instanceof Error?x.message:String(x);n(r??t,"TAG_RESOLVE_FAILED",$),v=new Scalar(i)}return v.range=u,v.source=i,a&&(v.type=a),d&&(v.tag=d),m.format&&(v.format=m.format),l&&(v.comment=l),v}function findScalarTagByName(e,t,r,n,i){if(r==="!")return e[SCALAR$1];const a=[];for(const u of e.tags)if(!u.collection&&u.tag===r)if(u.default&&u.test)a.push(u);else return u;for(const u of a)if(u.test?.test(t))return u;const l=e.knownTags[r];return l&&!l.collection?(e.tags.push(Object.assign({},l,{default:!1,test:void 0})),l):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),e[SCALAR$1])}function findScalarTagByTest({atKey:e,directives:t,schema:r},n,i,a){const l=r.tags.find(u=>(u.default===!0||e&&u.default==="key")&&u.test?.test(n))||r[SCALAR$1];if(r.compat){const u=r.compat.find(d=>d.default&&d.test?.test(n))??r[SCALAR$1];if(l.tag!==u.tag){const d=t.tagString(l.tag),m=t.tagString(u.tag),v=`Value may be parsed as either ${d} or ${m}`;a(i,"TAG_RESOLVE_FAILED",v,!0)}}return l}function emptyScalarPosition(e,t,r){if(t){r??(r=t.length);for(let n=r-1;n>=0;--n){let i=t[n];switch(i.type){case"space":case"comment":case"newline":e-=i.source.length;continue}for(i=t[++n];i?.type==="space";)e+=i.source.length,i=t[++n];break}}return e}const CN={composeNode,composeEmptyNode};function composeNode(e,t,r,n){const i=e.atKey,{spaceBefore:a,comment:l,anchor:u,tag:d}=r;let m,v=!0;switch(t.type){case"alias":m=composeAlias(e,t,n),(u||d)&&n(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":m=composeScalar(e,t,d,n),u&&(m.anchor=u.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":m=composeCollection(CN,e,t,r,n),u&&(m.anchor=u.source.substring(1));break;default:{const x=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;n(t,"UNEXPECTED_TOKEN",x),m=composeEmptyNode(e,t.offset,void 0,null,r,n),v=!1}}return u&&m.anchor===""&&n(u,"BAD_ALIAS","Anchor cannot be an empty string"),i&&e.options.stringKeys&&(!isScalar$1(m)||typeof m.value!="string"||m.tag&&m.tag!=="tag:yaml.org,2002:str")&&n(d??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),a&&(m.spaceBefore=!0),l&&(t.type==="scalar"&&t.source===""?m.comment=l:m.commentBefore=l),e.options.keepSourceTokens&&v&&(m.srcToken=t),m}function composeEmptyNode(e,t,r,n,{spaceBefore:i,comment:a,anchor:l,tag:u,end:d},m){const v={type:"scalar",offset:emptyScalarPosition(t,r,n),indent:-1,source:""},x=composeScalar(e,v,u,m);return l&&(x.anchor=l.source.substring(1),x.anchor===""&&m(l,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(x.spaceBefore=!0),a&&(x.comment=a,x.range[2]=d),x}function composeAlias({options:e},{offset:t,source:r,end:n},i){const a=new Alias(r.substring(1));a.source===""&&i(t,"BAD_ALIAS","Alias cannot be an empty string"),a.source.endsWith(":")&&i(t+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const l=t+r.length,u=resolveEnd(n,l,e.strict,i);return a.range=[t,l,u.offset],u.comment&&(a.comment=u.comment),a}function composeDoc(e,t,{offset:r,start:n,value:i,end:a},l){const u=Object.assign({_directives:t},e),d=new Document(void 0,u),m={atKey:!1,atRoot:!0,directives:d.directives,options:d.options,schema:d.schema},v=resolveProps(n,{indicator:"doc-start",next:i??a?.[0],offset:r,onError:l,parentIndent:0,startOnNewline:!0});v.found&&(d.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!v.hasNewline&&l(v.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),d.contents=i?composeNode(m,i,v,l):composeEmptyNode(m,v.end,n,null,v,l);const x=d.contents.range[2],$=resolveEnd(a,x,!1,l);return $.comment&&(d.comment=$.comment),d.range=[r,x,$.offset],d}function getErrorPos(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:t,source:r}=e;return[t,t+(typeof r=="string"?r.length:1)]}function parsePrelude(e){let t="",r=!1,n=!1;for(let i=0;i<e.length;++i){const a=e[i];switch(a[0]){case"#":t+=(t===""?"":n?`

`:`
`)+(a.substring(1)||" "),r=!0,n=!1;break;case"%":e[i+1]?.[0]!=="#"&&(i+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:t,afterEmptyLine:n}}class Composer{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,a)=>{const l=getErrorPos(r);a?this.warnings.push(new YAMLWarning(l,n,i)):this.errors.push(new YAMLParseError(l,n,i))},this.directives=new Directives({version:t.version||"1.2"}),this.options=t}decorate(t,r){const{comment:n,afterEmptyLine:i}=parsePrelude(this.prelude);if(n){const a=t.contents;if(r)t.comment=t.comment?`${t.comment}
${n}`:n;else if(i||t.directives.docStart||!a)t.commentBefore=n;else if(isCollection$1(a)&&!a.flow&&a.items.length>0){let l=a.items[0];isPair(l)&&(l=l.key);const u=l.commentBefore;l.commentBefore=u?`${n}
${u}`:n}else{const l=a.commentBefore;a.commentBefore=l?`${n}
${l}`:n}}r?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:parsePrelude(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,r=!1,n=-1){for(const i of t)yield*this.next(i);yield*this.end(r,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(r,n,i)=>{const a=getErrorPos(t);a[0]+=r,this.onError(a,"BAD_DIRECTIVE",n,i)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const r=composeDoc(this.options,this.directives,t,this.onError);this.atDirectives&&!r.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const r=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const n="Unexpected doc-end without preceding document";this.errors.push(new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;const r=resolveEnd(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){const n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const n=Object.assign({_directives:this.directives},this.options),i=new Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}}function resolveAsScalar(e,t=!0,r){if(e){const n=(i,a,l)=>{const u=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(u,a,l);else throw new YAMLParseError([u,u+1],a,l)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return resolveFlowScalar(e,t,n);case"block-scalar":return resolveBlockScalar({options:{strict:t}},e,n)}}return null}function createScalarToken(e,t){const{implicitKey:r=!1,indent:n,inFlow:i=!1,offset:a=-1,type:l="PLAIN"}=t,u=stringifyString({type:l,value:e},{implicitKey:r,indent:n>0?" ".repeat(n):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),d=t.end??[{type:"newline",offset:-1,indent:n,source:`
`}];switch(u[0]){case"|":case">":{const m=u.indexOf(`
`),v=u.substring(0,m),x=u.substring(m+1)+`
`,$=[{type:"block-scalar-header",offset:a,indent:n,source:v}];return addEndtoBlockProps($,d)||$.push({type:"newline",offset:-1,indent:n,source:`
`}),{type:"block-scalar",offset:a,indent:n,props:$,source:x}}case'"':return{type:"double-quoted-scalar",offset:a,indent:n,source:u,end:d};case"'":return{type:"single-quoted-scalar",offset:a,indent:n,source:u,end:d};default:return{type:"scalar",offset:a,indent:n,source:u,end:d}}}function setScalarValue(e,t,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:a=!1,type:l}=r,u="indent"in e?e.indent:null;if(n&&typeof u=="number"&&(u+=2),!l)switch(e.type){case"single-quoted-scalar":l="QUOTE_SINGLE";break;case"double-quoted-scalar":l="QUOTE_DOUBLE";break;case"block-scalar":{const m=e.props[0];if(m.type!=="block-scalar-header")throw new Error("Invalid block scalar header");l=m.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:l="PLAIN"}const d=stringifyString({type:l,value:t},{implicitKey:i||u===null,indent:u!==null&&u>0?" ".repeat(u):"",inFlow:a,options:{blockQuote:!0,lineWidth:-1}});switch(d[0]){case"|":case">":setBlockScalarValue(e,d);break;case'"':setFlowScalarValue(e,d,"double-quoted-scalar");break;case"'":setFlowScalarValue(e,d,"single-quoted-scalar");break;default:setFlowScalarValue(e,d,"scalar")}}function setBlockScalarValue(e,t){const r=t.indexOf(`
`),n=t.substring(0,r),i=t.substring(r+1)+`
`;if(e.type==="block-scalar"){const a=e.props[0];if(a.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a.source=n,e.source=i}else{const{offset:a}=e,l="indent"in e?e.indent:-1,u=[{type:"block-scalar-header",offset:a,indent:l,source:n}];addEndtoBlockProps(u,"end"in e?e.end:void 0)||u.push({type:"newline",offset:-1,indent:l,source:`
`});for(const d of Object.keys(e))d!=="type"&&d!=="offset"&&delete e[d];Object.assign(e,{type:"block-scalar",indent:l,props:u,source:i})}}function addEndtoBlockProps(e,t){if(t)for(const r of t)switch(r.type){case"space":case"comment":e.push(r);break;case"newline":return e.push(r),!0}return!1}function setFlowScalarValue(e,t,r){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=r,e.source=t;break;case"block-scalar":{const n=e.props.slice(1);let i=t.length;e.props[0].type==="block-scalar-header"&&(i-=e.props[0].source.length);for(const a of n)a.offset+=i;delete e.props,Object.assign(e,{type:r,source:t,end:n});break}case"block-map":case"block-seq":{const i={type:"newline",offset:e.offset+t.length,indent:e.indent,source:`
`};delete e.items,Object.assign(e,{type:r,source:t,end:[i]});break}default:{const n="indent"in e?e.indent:-1,i="end"in e&&Array.isArray(e.end)?e.end.filter(a=>a.type==="space"||a.type==="comment"||a.type==="newline"):[];for(const a of Object.keys(e))a!=="type"&&a!=="offset"&&delete e[a];Object.assign(e,{type:r,indent:n,source:t,end:i})}}}const stringify$1=e=>"type"in e?stringifyToken(e):stringifyItem(e);function stringifyToken(e){switch(e.type){case"block-scalar":{let t="";for(const r of e.props)t+=stringifyToken(r);return t+e.source}case"block-map":case"block-seq":{let t="";for(const r of e.items)t+=stringifyItem(r);return t}case"flow-collection":{let t=e.start.source;for(const r of e.items)t+=stringifyItem(r);for(const r of e.end)t+=r.source;return t}case"document":{let t=stringifyItem(e);if(e.end)for(const r of e.end)t+=r.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const r of e.end)t+=r.source;return t}}}function stringifyItem({start:e,key:t,sep:r,value:n}){let i="";for(const a of e)i+=a.source;if(t&&(i+=stringifyToken(t)),r)for(const a of r)i+=a.source;return n&&(i+=stringifyToken(n)),i}const BREAK=Symbol("break visit"),SKIP=Symbol("skip children"),REMOVE=Symbol("remove item");function visit(e,t){"type"in e&&e.type==="document"&&(e={start:e.start,value:e.value}),_visit(Object.freeze([]),e,t)}visit.BREAK=BREAK;visit.SKIP=SKIP;visit.REMOVE=REMOVE;visit.itemAtPath=(e,t)=>{let r=e;for(const[n,i]of t){const a=r?.[n];if(a&&"items"in a)r=a.items[i];else return}return r};visit.parentCollection=(e,t)=>{const r=visit.itemAtPath(e,t.slice(0,-1)),n=t[t.length-1][0],i=r?.[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function _visit(e,t,r){let n=r(t,e);if(typeof n=="symbol")return n;for(const i of["key","value"]){const a=t[i];if(a&&"items"in a){for(let l=0;l<a.items.length;++l){const u=_visit(Object.freeze(e.concat([[i,l]])),a.items[l],r);if(typeof u=="number")l=u-1;else{if(u===BREAK)return BREAK;u===REMOVE&&(a.items.splice(l,1),l-=1)}}typeof n=="function"&&i==="key"&&(n=n(t,e))}}return typeof n=="function"?n(t,e):n}const BOM="\uFEFF",DOCUMENT="",FLOW_END="",SCALAR="",isCollection=e=>!!e&&"items"in e,isScalar=e=>!!e&&(e.type==="scalar"||e.type==="single-quoted-scalar"||e.type==="double-quoted-scalar"||e.type==="block-scalar");function prettyToken(e){switch(e){case BOM:return"<BOM>";case DOCUMENT:return"<DOC>";case FLOW_END:return"<FLOW_END>";case SCALAR:return"<SCALAR>";default:return JSON.stringify(e)}}function tokenType(e){switch(e){case BOM:return"byte-order-mark";case DOCUMENT:return"doc-mode";case FLOW_END:return"flow-error-end";case SCALAR:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const cst=Object.freeze(Object.defineProperty({__proto__:null,BOM,DOCUMENT,FLOW_END,SCALAR,createScalarToken,isCollection,isScalar,prettyToken,resolveAsScalar,setScalarValue,stringify:stringify$1,tokenType,visit},Symbol.toStringTag,{value:"Module"}));function isEmpty(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const hexDigits=new Set("0123456789ABCDEFabcdef"),tagChars=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),flowIndicatorChars=new Set(",[]{}"),invalidAnchorChars=new Set(` ,[]{}
\r	`),isNotAnchorChar=e=>!e||invalidAnchorChars.has(e);class Lexer{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,r=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!r;let n=this.next??"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,r=this.buffer[t];for(;r===" "||r==="	";)r=this.buffer[++t];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let r=this.buffer[t];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+t];if(r==="\r"){const i=this.buffer[n+t+1];if(i===`
`||!i&&!this.atEnd)return t+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?t+n:-1}if(r==="-"||r==="."){const n=this.buffer.substr(t,3);if((n==="---"||n==="...")&&isEmpty(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===BOM&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let r=t.length,n=t.indexOf("#");for(;n!==-1;){const a=t[n-1];if(a===" "||a==="	"){r=n-1;break}else n=t.indexOf("#",n+1)}for(;;){const a=t[r-1];if(a===" "||a==="	")r-=1;else break}const i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const r=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-r),yield*this.pushNewline(),"stream"}return yield DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const r=this.peek(3);if((r==="---"||r==="...")&&isEmpty(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,r==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!isEmpty(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&isEmpty(r)){const n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(t[r]){case"#":yield*this.pushCount(t.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(isNotAnchorChar),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,r,n=-1;do t=yield*this.pushNewline(),t>0?(r=yield*this.pushSpaces(!1),this.indentValue=n=r):r=0,r+=yield*this.pushSpaces(!0);while(t+r>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&isEmpty(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield FLOW_END,yield*this.parseLineStart();let a=0;for(;i[a]===",";)a+=yield*this.pushCount(1),a+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(a+=yield*this.pushIndicators(),i[a]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-a),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(isNotAnchorChar),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const l=this.charAt(1);if(this.flowKey||isEmpty(l)||l===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let r=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let a=0;for(;this.buffer[r-1-a]==="\\";)a+=1;if(a%2===0)break;r=this.buffer.indexOf('"',r+1)}const n=this.buffer.substring(0,r);let i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const a=this.continueScalar(i+1);if(a===-1)break;i=n.indexOf(`
`,a)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const r=this.buffer[++t];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>isEmpty(r)||r==="#")}*parseBlockScalar(){let t=this.pos-1,r=0,n;e:for(let a=this.pos;n=this.buffer[a];++a)switch(n){case" ":r+=1;break;case`
`:t=a,r=0;break;case"\r":{const l=this.buffer[a+1];if(!l&&!this.atEnd)return this.setNext("block-scalar");if(l===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const a=this.continueScalar(t+1);if(a===-1)break;t=this.buffer.indexOf(`
`,a)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let i=t+1;for(n=this.buffer[i];n===" ";)n=this.buffer[++i];if(n==="	"){for(;n==="	"||n===" "||n==="\r"||n===`
`;)n=this.buffer[++i];t=i-1}else if(!this.blockScalarKeep)do{let a=t-1,l=this.buffer[a];l==="\r"&&(l=this.buffer[--a]);const u=a;for(;l===" ";)l=this.buffer[--a];if(l===`
`&&a>=this.pos&&a+1+r>u)t=a;else break}while(!0);return yield SCALAR,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){const a=this.buffer[n+1];if(isEmpty(a)||t&&flowIndicatorChars.has(a))break;r=n}else if(isEmpty(i)){let a=this.buffer[n+1];if(i==="\r"&&(a===`
`?(n+=1,i=`
`,a=this.buffer[n+1]):r=n),a==="#"||t&&flowIndicatorChars.has(a))break;if(i===`
`){const l=this.continueScalar(n+1);if(l===-1)break;n=Math.max(n,l-2)}}else{if(t&&flowIndicatorChars.has(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield SCALAR,yield*this.pushToIndex(r+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,r){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(isNotAnchorChar))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,r=this.charAt(1);if(isEmpty(r)||t&&flowIndicatorChars.has(r))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,r=this.buffer[t];for(;!isEmpty(r)&&r!==">";)r=this.buffer[++t];return yield*this.pushToIndex(r===">"?t+1:t,!1)}else{let t=this.pos+1,r=this.buffer[t];for(;r;)if(tagChars.has(r))r=this.buffer[++t];else if(r==="%"&&hexDigits.has(this.buffer[t+1])&&hexDigits.has(this.buffer[t+2]))r=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||t&&n==="	");const i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(t){let r=this.pos,n=this.buffer[r];for(;!t(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}}class LineCounter{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let r=0,n=this.lineStarts.length;for(;r<n;){const a=r+n>>1;this.lineStarts[a]<t?r=a+1:n=a}if(this.lineStarts[r]===t)return{line:r+1,col:1};if(r===0)return{line:0,col:t};const i=this.lineStarts[r-1];return{line:r,col:t-i+1}}}}function includesToken(e,t){for(let r=0;r<e.length;++r)if(e[r].type===t)return!0;return!1}function findNonEmptyIndex(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function isFlowToken(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function getPrevProps(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function getFirstKeyStartProps(e){if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;e[++t]?.type==="space";);return e.splice(t,e.length)}function fixFlowSeqItems(e){if(e.start.type==="flow-seq-start")for(const t of e.items)t.sep&&!t.value&&!includesToken(t.start,"explicit-key-ind")&&!includesToken(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,isFlowToken(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Parser{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Lexer,this.onNewLine=t}*parse(t,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const n of this.lexer.lex(t,r))yield*this.next(n);r||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const r=tokenType(t);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const n=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&t?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const r=t??this.stack.pop();if(!r)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield r;else{const n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&fixFlowSeqItems(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{const i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{const i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){const i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&findNonEmptyIndex(i.start)===-1&&(r.indent===0||i.start.every(a=>a.type!=="comment"||a.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{findNonEmptyIndex(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const r=this.startBlockValue(t);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const r=getPrevProps(this.peek(2)),n=getFirstKeyStartProps(r);let i;t.end?(i=t.end,i.push(this.sourceToken),delete t.end):i=[this.sourceToken];const a={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const r=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,r.value){const n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)t.items.push({start:[this.sourceToken]});else if(r.sep)r.sep.push(this.sourceToken);else{if(this.atIndentedComment(r.start,t.indent)){const i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,r.start),i.push(this.sourceToken),t.items.pop();return}}r.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const n=!this.onKeyLine&&this.indent===t.indent,i=n&&(r.sep||r.explicitKey)&&this.type!=="seq-item-ind";let a=[];if(i&&r.sep&&!r.value){const l=[];for(let u=0;u<r.sep.length;++u){const d=r.sep[u];switch(d.type){case"newline":l.push(u);break;case"space":break;case"comment":d.indent>t.indent&&(l.length=0);break;default:l.length=0}}l.length>=2&&(a=r.sep.splice(l[1]))}switch(this.type){case"anchor":case"tag":i||r.value?(a.push(this.sourceToken),t.items.push({start:a}),this.onKeyLine=!0):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"explicit-key-ind":!r.sep&&!r.explicitKey?(r.start.push(this.sourceToken),r.explicitKey=!0):i||r.value?(a.push(this.sourceToken),t.items.push({start:a,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(r.explicitKey)if(r.sep)if(r.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(includesToken(r.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]});else if(isFlowToken(r.key)&&!includesToken(r.sep,"newline")){const l=getFirstKeyStartProps(r.start),u=r.key,d=r.sep;d.push(this.sourceToken),delete r.key,delete r.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:l,key:u,sep:d}]})}else a.length>0?r.sep=r.sep.concat(a,this.sourceToken):r.sep.push(this.sourceToken);else if(includesToken(r.start,"newline"))Object.assign(r,{key:null,sep:[this.sourceToken]});else{const l=getFirstKeyStartProps(r.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:l,key:null,sep:[this.sourceToken]}]})}else r.sep?r.value||i?t.items.push({start:a,key:null,sep:[this.sourceToken]}):includesToken(r.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const l=this.flowScalar(this.type);i||r.value?(t.items.push({start:a,key:l,sep:[]}),this.onKeyLine=!0):r.sep?this.stack.push(l):(Object.assign(r,{key:l,sep:[]}),this.onKeyLine=!0);return}default:{const l=this.startBlockValue(t);if(l){if(l.type==="block-seq"){if(!r.explicitKey&&r.sep&&!includesToken(r.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else n&&t.items.push({start:a});this.stack.push(l);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const r=t.items[t.items.length-1];switch(this.type){case"newline":if(r.value){const n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(r.start,t.indent)){const i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,r.start),i.push(this.sourceToken),t.items.pop();return}}r.start.push(this.sourceToken)}return;case"anchor":case"tag":if(r.value||this.indent<=t.indent)break;r.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;r.value||includesToken(r.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return}if(this.indent>t.indent){const n=this.startBlockValue(t);if(n){this.stack.push(n);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const r=t.items[t.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n?.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?t.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?t.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!r||r.value?t.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===t.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){const i=getPrevProps(n),a=getFirstKeyStartProps(i);fixFlowSeqItems(t);const l=t.end.splice(1,t.end.length);l.push(this.sourceToken);const u={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:a,key:t,sep:l}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=u}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const r=getPrevProps(t),n=getFirstKeyStartProps(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const r=getPrevProps(t),n=getFirstKeyStartProps(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,r){return this.type!=="comment"||this.indent<=r?!1:t.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function parseOptions(e){const t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new LineCounter||null,prettyErrors:t}}function parseAllDocuments(e,t={}){const{lineCounter:r,prettyErrors:n}=parseOptions(t),i=new Parser(r?.addNewLine),a=new Composer(t),l=Array.from(a.compose(i.parse(e)));if(n&&r)for(const u of l)u.errors.forEach(prettifyError(e,r)),u.warnings.forEach(prettifyError(e,r));return l.length>0?l:Object.assign([],{empty:!0},a.streamInfo())}function parseDocument(e,t={}){const{lineCounter:r,prettyErrors:n}=parseOptions(t),i=new Parser(r?.addNewLine),a=new Composer(t);let l=null;for(const u of a.compose(i.parse(e),!0,e.length))if(!l)l=u;else if(l.options.logLevel!=="silent"){l.errors.push(new YAMLParseError(u.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(l.errors.forEach(prettifyError(e,r)),l.warnings.forEach(prettifyError(e,r))),l}function parse(e,t,r){let n;typeof t=="function"?n=t:r===void 0&&t&&typeof t=="object"&&(r=t);const i=parseDocument(e,r);if(!i)return null;if(i.warnings.forEach(a=>warn$1(i.options.logLevel,a)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function stringify(e,t,r){let n=null;if(typeof t=="function"||Array.isArray(t)?n=t:r===void 0&&t&&(r=t),typeof r=="string"&&(r=r.length),typeof r=="number"){const i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(e===void 0){const{keepUndefined:i}=r??t??{};if(!i)return}return isDocument(e)&&!n?e.toString(r):new Document(e,n,r).toString(r)}const YAML=Object.freeze(Object.defineProperty({__proto__:null,Alias,CST:cst,Composer,Document,Lexer,LineCounter,Pair,Parser,Scalar,Schema,YAMLError,YAMLMap,YAMLParseError,YAMLSeq,YAMLWarning,isAlias,isCollection:isCollection$1,isDocument,isMap,isNode,isPair,isScalar:isScalar$1,isSeq,parse,parseAllDocuments,parseDocument,stringify,visit:visit$1,visitAsync},Symbol.toStringTag,{value:"Module"}));var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(e,t,r)=>t in e?__defProp$1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues$1=(e,t)=>{for(var r in t||(t={}))__hasOwnProp$1.call(t,r)&&__defNormalProp$1(e,r,t[r]);if(__getOwnPropSymbols$1)for(var r of __getOwnPropSymbols$1(t))__propIsEnum$1.call(t,r)&&__defNormalProp$1(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__async=(e,t,r)=>new Promise((n,i)=>{var a=d=>{try{u(r.next(d))}catch(m){i(m)}},l=d=>{try{u(r.throw(d))}catch(m){i(m)}},u=d=>d.done?n(d.value):Promise.resolve(d.value).then(a,l);u((r=r.apply(e,t)).next())}),TaskQueue=class jm{constructor(t){this.executors=t,this.taskKeyQueue=[],this.taskMap=new Map,this.idleListeners=[],this.processing=!1,this.stopped=!1}static initialize(t){if(t.size===0)throw new Error("Must provide at least one executor");this.instance=new jm(t)}static getInstance(){if(!this.instance)throw new Error("TaskQueue not initialized; must call `initialize` first");return this.instance}addTask(t){if(!this.stopped){if(this.taskMap.has(t.key))throw new Error(`Task already added for key ${t.key}`);this.taskKeyQueue.push(t.key),this.taskMap.set(t.key,t),this.processTasksIfNeeded()}}cancelTask(t){const r=this.taskKeyQueue.indexOf(t);r>=0&&this.taskKeyQueue.splice(r,1),this.taskMap.delete(t)}onIdle(t){this.idleListeners.push(t)}removeIdleListener(t){this.idleListeners.splice(this.idleListeners.indexOf(t),1)}notifyIdle(t){for(const r of this.idleListeners)r(t)}shutdown(){this.stopped=!0,this.taskKeyQueue.length=0,this.taskMap.clear()}processTasksIfNeeded(){!this.stopped&&!this.processing&&(this.processing=!0,setTimeout(()=>{this.processNextTasks()}))}processNextTasks(){return __async(this,null,function*(){const t=this.taskKeyQueue.splice(0,this.executors.size);if(t.length===0){this.processing=!1,this.stopped||this.notifyIdle();return}const r=[],n=Array.from(this.executors.keys());for(const i of t){const a=this.taskMap.get(i);if(!a)continue;this.taskMap.delete(i);const l=n.shift(),u=this.executors.get(l);if(!u)throw new Error(`No executor found for key ${l}`);r.push(u.execute(a))}try{yield Promise.all(r)}catch(i){this.stopped||(this.shutdown(),this.notifyIdle(i));return}this.taskKeyQueue.length>0?setTimeout(()=>{this.processNextTasks()}):(this.processing=!1,this.stopped||this.notifyIdle())})}};function createExecutor(e,t){return{execute:r=>__async(this,null,function*(){return r.process({L:e,R:t})})}}var CheckDataCoordinator=class{constructor(e){this.taskQueue=e}requestDataset(e,t,r,n){const i={key:e,kind:"check-data-coordinator",process:a=>__async(this,null,function*(){const d=(yield a.R.getDatasetsForScenario(t,[r])).datasetMap.get(r);n(d)})};this.taskQueue.addTask(i)}cancelRequest(e){this.taskQueue.cancelTask(e)}};function createCheckDataCoordinator(){return new CheckDataCoordinator(TaskQueue.getInstance())}function symbolForPredicateOp(e){switch(e){case"gt":return">";case"gte":return">=";case"lt":return"<";case"lte":return"<=";case"eq":return"==";case"approx":return"";default:Tr(e)}}function buildCheckReport(e,t){const r=[];for(const n of e.groups){const i=[];for(const a of n.tests){let l="passed";const u=[];for(const d of a.scenarios){let m="passed";d.checkScenario.spec===void 0&&(l="error",m="error");const v=[];for(const x of d.datasets){let $="passed";x.checkDataset.datasetKey===void 0&&(l="error",m="error",$="error");const T=[];for(const A of x.predicates){const L=A.checkKey,P=t.get(L);P?(P.status!=="passed"&&(P.status==="error"?(l="error",m="error",$="error"):P.status==="failed"&&l!=="error"?(l="failed",m="failed",$="failed"):P.status==="skipped"&&l==="passed"&&(l="skipped",m="skipped",$="skipped")),T.push(predicateReport(A,L,P))):T.push(predicateReport(A,L,{status:"passed"}))}v.push({checkDataset:x.checkDataset,status:$,predicates:T})}u.push({checkScenario:d.checkScenario,status:m,datasets:v})}i.push({name:a.name,status:l,scenarios:u})}r.push({name:n.name,tests:i})}return{groups:r}}function predicateReport(e,t,r){if(r.status==="error")return{checkKey:t,result:r,opRefs:new Map,opValues:[]};const n=e.action.predicateSpec,i=new Map,a=[];function l(u){var d,m;const v=symbolForPredicateOp(u),x=n[u];if(x!==void 0){let $,T;if(typeof x=="number")$={kind:"constant",value:x},T=`${v} ${x}`;else{const A=(d=e.dataRefs)==null?void 0:d.get(u);if(!A)return;$={kind:"data",dataRef:A},T=`${v} '${A.dataset.name}'`;const P=(m=A.scenario)==null?void 0:m.spec;if(!P)return;x.scenario==="inherit"?T+=" (w/ same scenario)":P.kind==="all-inputs"&&P.position==="at-default"?T+=" (w/ default scenario)":T+=" (w/ configured scenario)"}if(u==="approx"){const A=n.tolerance||.1;T+=` ${A}`}i.set(u,$),a.push(T)}}return l("gt"),l("gte"),l("lt"),l("lte"),l("eq"),l("approx"),a.length===0&&a.push("INVALID PREDICATE"),{checkKey:t,result:r,opRefs:i,opValues:a,time:n.time,tolerance:n.tolerance}}function scenarioMessage(e,t){const r=e.checkScenario;if(r.spec===void 0)if(r.error)switch(r.error.kind){case"unknown-input-group":return`error: input group ${t(r.error.name)} is unknown`;case"empty-input-group":return`error: input group ${t(r.error.name)} is empty`;default:Tr(r.error.kind)}else{const a=r.inputDescs.filter(u=>u.inputVar===void 0).map(u=>t(u.name));return`error: unknown ${a.length===1?"input":"inputs"} ${a.join(", ")}`}function n(a){switch(a){case"at-default":return"default";case"at-minimum":return"minimum";case"at-maximum":return"maximum";default:Tr(a)}}function i(a){let l=t(a.name);return a.position?(l+=` is at ${t(n(a.position))}`,a.value!==void 0&&(l+=` (${a.value})`)):a.value!==void 0&&(l+=` is ${t(a.value.toString())}`),l}if(r.spec.kind==="all-inputs"){const a=r.spec.position;return`when ${t("all inputs")} are at ${t(n(a))}...`}else if(r.inputGroupName){let a="at-default";r.spec.settings[0].kind==="position"&&(a=r.spec.settings[0].position);const l=r.inputGroupName;return`when all inputs in ${t(l)} are at ${t(n(a))}...`}else return`when ${r.inputDescs.map(i).join(" and ")}...`}function datasetMessage(e,t){const r=e.checkDataset;return r.datasetKey===void 0?`error: ${t(r.name)} did not match any datasets`:`then ${t(r.name)}...`}function predicateMessage(e,t){const r=e.result;if(r.status==="error"){if(r.message)return`error: ${e.result.message}`;if(r.errorInfo)switch(r.errorInfo.kind){case"unknown-dataset":return`error: referenced dataset ${t(r.errorInfo.name)} is unknown`;case"unknown-input":return`error: referenced input ${t(r.errorInfo.name)} is unknown`;case"unknown-input-group":return`error: referenced input group ${t(r.errorInfo.name)} is unknown`;case"empty-input-group":return`error: referenced input group ${t(r.errorInfo.name)} is empty`;default:Tr(r.errorInfo.kind)}else return"unknown error"}let i=`should be ${e.opValues.map(t).join(" and ")}`;if(e.time!==void 0)if(typeof e.time=="number")i+=` in ${t(e.time.toString())}`;else{let a,l,u,d;if(Array.isArray(e.time)){const m=e.time;a=m[0],l=m[1],u=!0,d=!0}else{const m=e.time;m.after_excl!==void 0?(a=m.after_excl,u=!1):m.after_incl!==void 0&&(a=m.after_incl,u=!0),m.before_excl!==void 0?(l=m.before_excl,d=!1):m.before_incl!==void 0&&(l=m.before_incl,d=!0)}if(a!==void 0&&l!==void 0){const x=`${u?"[":"("}${a}, ${l}${d?"]":")"}`;i+=` in ${t(x)}`}else a!==void 0?i+=` ${u?"in/after":"after"} ${t(a.toString())}`:l!==void 0&&(i+=` ${d?"in/before":"before"} ${t(l.toString())}`)}if(e.result.status==="failed"){if(e.result.failValue!==void 0){if(i+=` but got ${t(e.result.failValue.toString())}`,e.result.failRefValue!==void 0){const l=`${symbolForPredicateOp(e.result.failOp)} ${e.result.failRefValue.toString()}`;i+=` (expected ${t(l)})`}}else e.result.message&&(i+=` but got ${t(e.result.message)}`);e.result.failTime!==void 0&&(i+=` in ${t(e.result.failTime.toString())}`)}else e.result.status==="error"&&e.result.message&&(i+=` but got error: ${t(e.result.message)}`);return i}var check_schema_default={$schema:"http://json-schema.org/draft-07/schema#",title:"Model Check Test",type:"array",description:"A group of tests.",items:{$ref:"#/$defs/group"},$defs:{group:{type:"object",additionalProperties:!1,properties:{describe:{type:"string"},tests:{type:"array",items:{$ref:"#/$defs/test"}}},required:["describe","tests"]},test:{type:"object",additionalProperties:!1,properties:{it:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/scenario"},minItems:1},datasets:{type:"array",items:{$ref:"#/$defs/dataset"},minItems:1},predicates:{type:"array",items:{$ref:"#/$defs/predicate"},minItems:1}},required:["it","datasets","predicates"]},scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_with_inputs_in_group_at_position"},{$ref:"#/$defs/scenario_preset"},{$ref:"#/$defs/scenario_expand_for_each_input_in_group"}]},scenario_position:{type:"string",enum:["min","max","default"]},scenario_with_input_at_position:{type:"object",additionalProperties:!1,properties:{with:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with","at"]},scenario_with_input_at_value:{type:"object",additionalProperties:!1,properties:{with:{type:"string"},at:{type:"number"}},required:["with","at"]},scenario_input_at_position:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["input","at"]},scenario_input_at_value:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{type:"number"}},required:["input","at"]},scenario_input_setting:{oneOf:[{$ref:"#/$defs/scenario_input_at_position"},{$ref:"#/$defs/scenario_input_at_value"}]},scenario_input_setting_array:{type:"array",items:{$ref:"#/$defs/scenario_input_setting"},minItems:1},scenario_with_multiple_input_settings:{type:"object",additionalProperties:!1,properties:{with:{$ref:"#/$defs/scenario_input_setting_array"}},required:["with"]},scenario_with_inputs_in_preset_at_position:{type:"object",additionalProperties:!1,properties:{with_inputs:{type:"string",enum:["all"]},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs","at"]},scenario_with_inputs_in_group_at_position:{type:"object",additionalProperties:!1,properties:{with_inputs_in:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs_in","at"]},scenario_preset:{type:"object",additionalProperties:!1,properties:{preset:{type:"string",enum:["matrix"]}},required:["preset"]},scenario_expand_for_each_input_in_group:{type:"object",additionalProperties:!1,properties:{scenarios_for_each_input_in:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["scenarios_for_each_input_in","at"]},dataset:{oneOf:[{$ref:"#/$defs/dataset_name"},{$ref:"#/$defs/dataset_group"},{$ref:"#/$defs/dataset_matching"}]},dataset_name:{type:"object",additionalProperties:!1,properties:{name:{type:"string"},source:{type:"string"}},required:["name"]},dataset_group:{type:"object",additionalProperties:!1,properties:{group:{type:"string"}},required:["group"]},dataset_matching:{type:"object",additionalProperties:!1,properties:{matching:{type:"object",additionalProperties:!1,properties:{type:{type:"string"}},required:["type"]}},required:["matching"]},predicate:{type:"object",oneOf:[{$ref:"#/$defs/predicate_gt"},{$ref:"#/$defs/predicate_gte"},{$ref:"#/$defs/predicate_lt"},{$ref:"#/$defs/predicate_lte"},{$ref:"#/$defs/predicate_gt_lt"},{$ref:"#/$defs/predicate_gt_lte"},{$ref:"#/$defs/predicate_gte_lt"},{$ref:"#/$defs/predicate_gte_lte"},{$ref:"#/$defs/predicate_eq"},{$ref:"#/$defs/predicate_approx"}]},predicate_gt:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt"]},predicate_gte:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte"]},predicate_lt:{type:"object",additionalProperties:!1,properties:{lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["lt"]},predicate_lte:{type:"object",additionalProperties:!1,properties:{lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["lte"]},predicate_gt_lt:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt","lt"]},predicate_gt_lte:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt","lte"]},predicate_gte_lt:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte","lt"]},predicate_gte_lte:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte","lte"]},predicate_eq:{type:"object",additionalProperties:!1,properties:{eq:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["eq"]},predicate_approx:{type:"object",additionalProperties:!1,properties:{approx:{$ref:"#/$defs/predicate_ref"},tolerance:{type:"number"},time:{$ref:"#/$defs/predicate_time"}},required:["approx"]},predicate_ref:{oneOf:[{$ref:"#/$defs/predicate_ref_constant"},{$ref:"#/$defs/predicate_ref_data"}]},predicate_ref_constant:{type:"number"},predicate_ref_data:{type:"object",additionalProperties:!1,properties:{dataset:{$ref:"#/$defs/predicate_ref_data_dataset"},scenario:{$ref:"#/$defs/predicate_ref_data_scenario"}},required:["dataset"]},predicate_ref_data_dataset:{oneOf:[{$ref:"#/$defs/dataset_name"},{$ref:"#/$defs/predicate_ref_data_dataset_special"}]},predicate_ref_data_dataset_special:{type:"string",enum:["inherit"]},predicate_ref_data_scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_with_inputs_in_group_at_position"},{$ref:"#/$defs/predicate_ref_data_scenario_special"}]},predicate_ref_data_scenario_special:{type:"string",enum:["inherit"]},predicate_time:{oneOf:[{$ref:"#/$defs/predicate_time_single"},{$ref:"#/$defs/predicate_time_pair"},{$ref:"#/$defs/predicate_time_gt"},{$ref:"#/$defs/predicate_time_gte"},{$ref:"#/$defs/predicate_time_lt"},{$ref:"#/$defs/predicate_time_lte"},{$ref:"#/$defs/predicate_time_gt_lt"},{$ref:"#/$defs/predicate_time_gt_lte"},{$ref:"#/$defs/predicate_time_gte_lt"},{$ref:"#/$defs/predicate_time_gte_lte"}]},predicate_time_single:{type:"number"},predicate_time_pair:{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},predicate_time_gt:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"}},required:["after_excl"]},predicate_time_gte:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"}},required:["after_incl"]},predicate_time_lt:{type:"object",additionalProperties:!1,properties:{before_excl:{type:"number"}},required:["before_excl"]},predicate_time_lte:{type:"object",additionalProperties:!1,properties:{before_incl:{type:"number"}},required:["before_incl"]},predicate_time_gt_lt:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"},before_excl:{type:"number"}},required:["after_excl","before_excl"]},predicate_time_gt_lte:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"},before_incl:{type:"number"}},required:["after_excl","before_incl"]},predicate_time_gte_lt:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"},before_excl:{type:"number"}},required:["after_incl","before_excl"]},predicate_time_gte_lte:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"},before_incl:{type:"number"}},required:["after_incl","before_incl"]}}};function parseTestYaml(e){const t=[],n=new Ajv2().compile(check_schema_default);for(const a of e){const l=YAML.parse(a);if(n(l))for(const u of l)t.push(u);else{let u="Failed to parse YAML check definitions";for(const d of n.errors||[])d.message&&(u+=`
${d.message}`);return err$2(new Error(u))}}return ok$2({groups:t})}var passed={status:"passed"},gt$1=(e,t)=>e>t,gte=(e,t)=>e>=t,lt$1=(e,t)=>e<t,lte=(e,t)=>e<=t,eq=(e,t)=>e===t,approx=e=>(r,n)=>r>=n-e&&r<=n+e;function checkFunc(e){function t(i,a){const l=e[i];l!==void 0&&(typeof l=="number"?r.push((u,d)=>a(u,l)?passed:{status:"failed",failValue:u,failTime:d}):r.push((u,d,m)=>{const v=m?.get(i);if(v===void 0)return{status:"error",message:"unhandled data reference"};const x=v.get(d);return x!==void 0?a(u,x)?passed:{status:"failed",failValue:u,failOp:i,failRefValue:x,failTime:d}:{status:"failed",message:"no reference value",failTime:d}}))}const r=[];if(t("gt",gt$1),t("gte",gte),t("lt",lt$1),t("lte",lte),t("eq",eq),e.approx!==void 0){const i=e.tolerance||.1;t("approx",approx(i))}const n=(i,a,l)=>{for(const u of r){const d=u(i,a,l);if(d.status!=="passed")return d}return passed};if(e.time!==void 0&&typeof e.time=="number"){const i=e.time;return(a,l)=>{const u=a.get(i);return u!==void 0?n(u,i,l):{status:"failed",message:"no value",failTime:i}}}else{let i;if(e.time!==void 0)if(Array.isArray(e.time)){const a=e.time;i=l=>l>=a[0]&&l<=a[1]}else{const a=[],l=e.time;l.after_excl!==void 0&&a.push(u=>u>l.after_excl),l.after_incl!==void 0&&a.push(u=>u>=l.after_incl),l.before_excl!==void 0&&a.push(u=>u<l.before_excl),l.before_incl!==void 0&&a.push(u=>u<=l.before_incl),i=u=>{for(const d of a)if(!d(u))return!1;return!0}}else i=()=>!0;return(a,l)=>{for(const[u,d]of a)if(i(u)){const m=n(d,u,l);if(m.status!=="passed")return m}return passed}}}function actionForPredicate(e){return{predicateSpec:e,run:checkFunc(e)}}function expandDatasets(e,t){var r;let n;if(t.name?n=matchByName(e,t.name,t.source):t.group?n=matchByGroup(e,t.group):(r=t.matching)!=null&&r.type&&(n=matchByType(e,t.matching.type)),n.error)return[{name:n.error.name,error:n.error.kind}];const i=n.matches,a=[];for(const l of i)l.outputVar?a.push({datasetKey:l.datasetKey,name:l.outputVar.varName}):l.implVar&&a.push({datasetKey:l.datasetKey,name:l.implVar.varName});return a}function matchByName(e,t,r){var n;const i=t.toLowerCase(),a=r?.toLowerCase();for(const[l,u]of e.outputVars)if(((n=u.sourceName)==null?void 0:n.toLowerCase())===a&&u.varName.toLowerCase()===i)return{matches:[{datasetKey:l,outputVar:u}]};for(const[l,u]of e.implVars)if(u.varName.toLowerCase()===i)return{matches:[{datasetKey:l,implVar:u}]};return{matches:[],error:{kind:"no-matches-for-dataset",name:t}}}function matchByGroup(e,t){let r,n;if(e.datasetGroups){const a=t.toLowerCase();for(const[l,u]of e.datasetGroups)if(l.toLowerCase()===a){r=l,n=u;break}}if(r===void 0)return{matches:[],error:{kind:"no-matches-for-group",name:t}};const i=[];for(const a of n){const l=e.outputVars.get(a);if(l){i.push({datasetKey:a,outputVar:l});continue}const u=e.implVars.get(a);if(u){i.push({datasetKey:a,implVar:u});continue}return{matches:[],error:{kind:"no-matches-for-dataset",name:a}}}return i.length===0?{matches:[],error:{kind:"no-matches-for-group",name:r}}:{matches:i}}function matchByType(e,t){const r=[];for(const[n,i]of e.implVars)i.varType===t&&r.push({datasetKey:n,implVar:i});return r.length===0?{matches:[],error:{kind:"no-matches-for-type",name:t}}:{matches:r}}function positionSetting(e,t){return{kind:"position",inputVarId:e,position:t}}function valueSetting(e,t){return{kind:"value",inputVarId:e,value:t}}function inputSettingsSpec(e){return{kind:"input-settings",uid:`inputs_${e.map(n=>{switch(n.kind){case"position":return`${n.inputVarId}_at_${keyForInputPosition(n.position)}`;case"value":return`${n.inputVarId}_at_${n.value}`;default:assertNeverExports$1.assertNever(n)}}).sort().join("_")}`,settings:e}}function inputAtPositionSpec(e,t){return inputSettingsSpec([positionSetting(e,t)])}function allInputsAtPositionSpec(e){return{kind:"all-inputs",uid:`all_inputs_at_${keyForInputPosition(e)}`,position:e}}function keyForInputPosition(e){switch(e){case"at-default":return"default";case"at-minimum":return"min";case"at-maximum":return"max";default:assertNeverExports$1.assertNever(e)}}function expandScenarios(e,t,r){if(t.length===0)return checkScenariosFromSpec(e,{with_inputs:"all",at:"default"},r);const n=[];for(const i of t)n.push(...checkScenariosFromSpec(e,i,r));return n}function inputPosition(e){switch(e){case"default":return"at-default";case"min":return"at-minimum";case"max":return"at-maximum";default:return}}function inputValueAtPosition(e,t){switch(t){case"at-default":return e.defaultValue;case"at-minimum":return e.minValue;case"at-maximum":return e.maxValue;default:Tr(t)}}function inputDescAtPosition(e,t){return{name:e.varName,inputVar:e,position:t,value:inputValueAtPosition(e,t)}}function inputDescAtValue(e,t){return{name:e.varName,inputVar:e,value:t}}function inputDescForVar(e,t){if(typeof t=="number")return inputDescAtValue(e,t);{const r=inputPosition(t);return inputDescAtPosition(e,r)}}function inputDescForName(e,t,r){const n=t.toLowerCase(),i=[...e.inputVars.values()].find(a=>a.varName.toLowerCase()===n);return i?inputDescForVar(i,r):{name:t}}function groupForName(e,t){if(e.inputGroups){const r=t.toLowerCase();for(const[n,i]of e.inputGroups)if(n.toLowerCase()===r)return[n,i]}}function errorScenarioForInputGroup(e,t){return{inputDescs:[],error:{kind:e,name:t}}}function checkScenarioWithAllInputsAtPosition(e){return{spec:allInputsAtPositionSpec(e),inputDescs:[]}}function checkScenarioWithInputAtPosition(e,t){const r=e.varId;return{spec:inputAtPositionSpec(r,t),inputDescs:[inputDescAtPosition(e,t)]}}function checkScenarioForInputDescs(e,t){let r;if(t.every(n=>n.inputVar!==void 0)){const n=t.map(i=>{const a=i.inputVar.varId;return i.position?positionSetting(a,i.position):valueSetting(a,i.value)});r=inputSettingsSpec(n)}else r=void 0;return{spec:r,inputGroupName:e,inputDescs:t}}function checkScenarioForInputSpecs(e,t){const r=t.map(n=>inputDescForName(e,n.input,n.at));return checkScenarioForInputDescs(void 0,r)}function checkScenarioMatrix(e,t){const r=[];if(r.push(checkScenarioWithAllInputsAtPosition("at-default")),!t){r.push(checkScenarioWithAllInputsAtPosition("at-minimum")),r.push(checkScenarioWithAllInputsAtPosition("at-maximum"));for(const n of e.inputVars.values())r.push(checkScenarioWithInputAtPosition(n,"at-minimum")),r.push(checkScenarioWithInputAtPosition(n,"at-maximum"))}return r}function checkScenarioWithAllInputsInGroupAtPosition(e,t,r){const n=groupForName(e,t);if(n===void 0)return errorScenarioForInputGroup("unknown-input-group",t);const[i,a]=n;if(a.length===0)return errorScenarioForInputGroup("empty-input-group",i);const l=[];for(const u of a)l.push(inputDescForVar(u,r));return checkScenarioForInputDescs(i,l)}function checkScenariosForEachInputInGroup(e,t,r){const n=groupForName(e,t);if(n===void 0)return[errorScenarioForInputGroup("unknown-input-group",t)];const[i,a]=n;if(a.length===0)return[errorScenarioForInputGroup("empty-input-group",i)];const l=[];for(const u of a){const d=inputDescForVar(u,r);l.push(checkScenarioForInputDescs(void 0,[d]))}return l}function checkScenariosFromSpec(e,t,r){if(t.preset==="matrix")return checkScenarioMatrix(e,r);if(t.scenarios_for_each_input_in!==void 0){const n=t.scenarios_for_each_input_in,i=t.at;return checkScenariosForEachInputInGroup(e,n,i)}if(t.with!==void 0)if(Array.isArray(t.with)){const n=t.with;return[checkScenarioForInputSpecs(e,n)]}else{const n={input:t.with,at:t.at};return[checkScenarioForInputSpecs(e,[n])]}if(t.with_inputs==="all"){const n=inputPosition(t.at);return[checkScenarioWithAllInputsAtPosition(n)]}if(t.with_inputs_in!==void 0){const n=t.with_inputs_in,i=t.at;return[checkScenarioWithAllInputsInGroupAtPosition(e,n,i)]}throw new Error(`Unhandled scenario spec: ${JSON.stringify(t)}`)}var CheckPlanner=class{constructor(e){this.modelSpec=e,this.groups=[],this.tasks=new Map,this.dataRefs=new Map,this.checkKey=1}addAllChecks(e,t){function r(i,a){return`${i.toLowerCase()} :: ${a.toLowerCase()}`}const n=new Set(t.map(i=>r(i.groupName,i.testName)));for(const i of e.groups){const a=i.describe,l=[];for(const u of i.tests){const d=u.it,m=n.has(r(a,d)),x=expandScenarios(this.modelSpec,u.scenarios||[],!1),$=[];for(const L of u.datasets)$.push(...expandDatasets(this.modelSpec,L));const T=[];for(const L of u.predicates)T.push(actionForPredicate(L));const A=[];for(const L of x){if(L.spec===void 0){A.push({checkScenario:L,datasets:[]});continue}const P=[];for(const q of $){if(q.datasetKey===void 0){P.push({checkDataset:q,predicates:[]});continue}const C=[];for(const D of T){const G=this.addDataRefs(D.predicateSpec,L,q),B=this.checkKey++;C.push({checkKey:B,action:D,dataRefs:G}),this.tasks.set(B,{scenario:L,dataset:q,action:D,dataRefs:G,skip:m})}P.push({checkDataset:q,predicates:C})}A.push({checkScenario:L,datasets:P})}l.push({name:d,scenarios:A})}this.groups.push({name:a,tests:l})}}buildPlan(){return{groups:this.groups,tasks:this.tasks,dataRefs:this.dataRefs}}addDataRefs(e,t,r){let n;const i=a=>{const l=e[a];if(l===void 0||typeof l=="number")return;let u;if(typeof l.dataset=="string")switch(l.dataset){case"inherit":u=r;break;default:Tr(l.dataset)}else{const x={name:l.dataset.name},$=expandDatasets(this.modelSpec,x);$.length===1?u=$[0]:u={name:l.dataset.name}}let d;if(typeof l.scenario=="string")switch(l.scenario){case"inherit":d=t;break;default:Tr(l.scenario)}else{const x=l.scenario?[l.scenario]:[],$=expandScenarios(this.modelSpec,x,!0);$.length===1&&(d=$[0]),d===void 0&&(d={inputDescs:[]})}let m;d.spec&&u.datasetKey&&(m=`${d.spec.uid}::${u.datasetKey}`);const v={key:m,dataset:u,scenario:d};m&&this.dataRefs.set(m,v),n===void 0&&(n=new Map),n.set(a,v)};return i("gt"),i("gte"),i("lt"),i("lte"),i("eq"),i("approx"),n}};function checkReportFromSummary(e,t,r=[]){const n=parseTestYaml(e.tests);if(n.isErr())return;const i=n.value,a=new CheckPlanner(e.bundle.modelSpec);a.addAllChecks(i,r);const l=a.buildPlan(),u=new Map;for(const d of t.predicateSummaries)u.set(d.checkKey,d.result);return buildCheckReport(l,u)}var ComparisonDataCoordinator=class{constructor(e){this.taskQueue=e}requestDatasetMaps(e,t,r,n,i,a,l){function u(m,v){return __async(this,null,function*(){if(v)return m.getDatasetsForScenario(v,a)})}const d={key:e,kind:"comparison-data-coordinator",process:m=>__async(this,null,function*(){const v=t==="left"?m.L:m.R,x=n==="left"?m.L:m.R;let $,T;if(v===x)$=yield u(v,r),T=yield u(x,i);else{const A=yield Promise.all([u(v,r),u(x,i)]);$=A[0],T=A[1]}l($?.datasetMap,T?.datasetMap)})};this.taskQueue.addTask(d)}requestGraphData(e,t,r,n,i,a,l){function u(m,v){return __async(this,null,function*(){if(v)return m.getGraphDataForScenario(v,a)})}const d={key:e,kind:"comparison-data-coordinator",process:m=>__async(this,null,function*(){const v=t==="left"?m.L:m.R,x=n==="left"?m.L:m.R;let $,T;if(v===x)$=yield u(v,r),T=yield u(x,i);else{const A=yield Promise.all([u(v,r),u(x,i)]);$=A[0],T=A[1]}l($,T)})};this.taskQueue.addTask(d)}cancelRequest(e){this.taskQueue.cancelTask(e)}};function createComparisonDataCoordinator(){return new ComparisonDataCoordinator(TaskQueue.getInstance())}function diffDatasets(e,t){let r=Number.MAX_VALUE,n=Number.MIN_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,l=Number.MAX_VALUE,u=Number.MIN_VALUE,d=Number.MAX_VALUE,m=-1,v,x=0,$=0;if(e&&t){const C=new Set([...e.keys(),...t.keys()]);for(const D of C){const G=e.get(D);G!==void 0&&(G<r&&(r=G),G>n&&(n=G),G<l&&(l=G),G>u&&(u=G));const B=t.get(D);if(B!==void 0&&(B<i&&(i=B),B>a&&(a=B),B<l&&(l=B),B>u&&(u=B)),G===void 0||B===void 0)continue;const H=Math.abs(B-G);H<d&&(d=H),H>m&&(m=H,v={time:D,valueL:G,valueR:B}),x++,$+=H}}function T(C){return C*100}let A,L,P;if(r===n&&i===a){const C=T(n!==0?Math.abs((a-n)/n):1);A=C,L=C,P=C}else{const C=u-l;A=T(C>0?d/C:0),L=T(C>0?m/C:0);const D=$/x;P=T(C>0?D/C:0)}let q;return e&&t?q="both":e?q="left-only":t?q="right-only":q="neither",{validity:q,minValue:l,maxValue:u,avgDiff:P,minDiff:A,maxDiff:L,maxDiffPoint:v}}function diffGraphs(e,t,r,n){let i;e&&t?i="both":e?i="left-only":t?i="right-only":i="neither";const a=[];if(e?.metadata&&t?.metadata){const u=new Set;for(const d of e.metadata.keys())u.add(d);for(const d of t.metadata.keys())u.add(d);for(const d of u){const m=e.metadata.get(d),v=t.metadata.get(d);m!==v&&a.push({key:d,valueL:m,valueR:v})}}const l=[];if(e&&t){const u=new Set;for(const d of e.datasets)u.add(d.datasetKey);for(const d of t.datasets)u.add(d.datasetKey);for(const d of u){const m=n.find(x=>x.d===d&&x.s===r),v=m?.md;l.push({datasetKey:d,maxDiff:v})}}return{inclusion:i,metadataReports:a,datasetReports:l}}function comparisonSummaryFromReport(e){var t,r;const n=[];for(const i of e.testReports){const a=(t=i.baselineDiffReport)==null?void 0:t.maxDiff,l=(r=i.baselineDiffReport)==null?void 0:r.avgDiff,u=testSummaryFromReport(i,a,l);u&&n.push(u)}return{testSummaries:n,perfReportL:e.perfReportL,perfReportR:e.perfReportR}}function testSummaryFromReport(e,t,r){var n;function i(a,l){return l!==void 0?(l===0&&(l=1e-6),a/l):a===0?0:1}if(e.diffReport===void 0)return{s:e.scenarioKey,d:e.datasetKey};if(((n=e.diffReport)==null?void 0:n.validity)==="both"&&e.diffReport.maxDiff>0){const a=i(e.diffReport.maxDiff,t),l=i(e.diffReport.avgDiff,r);return{s:e.scenarioKey,d:e.datasetKey,md:e.diffReport.maxDiff,ad:e.diffReport.avgDiff,mdb:a,adb:l}}else return}function restoreFromTerseSummaries(e,t){const r=new Map;for(const i of t){const a=`${i.s}::${i.d}`;r.set(a,i)}const n=[];for(const i of e.scenarios.getAllScenarios()){const a=e.datasets.getDatasetKeysForScenario(i);for(const l of a){const u=`${i.key}::${l}`,d=r.get(u);d?n.push(d):n.push({s:i.key,d:l,md:0,ad:0,mdb:0,adb:0})}}return n}function getBucketIndex(e,t){if(e===void 0)return t.length+2;if(e===0)return 0;for(let r=0;r<t.length;r++)if(e<t[r])return r+1;return t.length+1}function getScoresForTestSummaries(e,t,r){const n=Array(t.length+3).fill(0),i=Array(t.length+3).fill(0);let a=0,l;switch(r){case"max-diff":l="md";break;case"avg-diff":l="ad";break;case"max-diff-relative":l="mdb";break;case"avg-diff-relative":l="adb";break}for(const d of e){const m=d[l],v=getBucketIndex(m,t);n[v]++,m!==void 0&&(i[v]+=m),a++}let u;return a>0?u=n.map(d=>d/a*100):u=[],{totalDiffCount:a,totalDiffByBucket:i,diffCountByBucket:n,diffPercentByBucket:u}}function categorizeComparisonTestSummaries(e,t,r){const n=restoreFromTerseSummaries(e,t),i=groupComparisonTestSummaries(n,"by-scenario"),a=categorizeComparisonGroups(e,[...i.values()],r),l=groupComparisonTestSummaries(n,"by-dataset"),u=categorizeComparisonGroups(e,[...l.values()],r);return{allTestSummaries:n,byScenario:a,byDataset:u}}function groupComparisonTestSummaries(e,t){const r=new Map;for(const n of e){let i;switch(t){case"by-dataset":i=n.d;break;case"by-scenario":i=n.s;break;default:assertNeverExports$1.assertNever(t)}const a=r.get(i);a?a.testSummaries.push(n):r.set(i,{kind:t,key:i,testSummaries:[n]})}return r}function categorizeComparisonGroups(e,t,r){const n=new Map,i=[],a=[],l=[];let u=[];const d=[];function m(v,x,$,T){let A;if($&&T){const q=r==="max-diff-relative"||r==="avg-diff-relative"?e.ratioThresholds:e.thresholds;A=getScoresForTestSummaries(v.testSummaries,q,r)}const L={root:x,group:v,scores:A};if(n.set(v.key,L),$&&T){const P=A.diffCountByBucket[0],q=A.diffCountByBucket[5];A.totalDiffCount!==P+q?u.push(L):d.push(L)}else $?a.push(L):T?l.push(L):i.push(L)}for(const v of t.values())switch(v.kind){case"by-dataset":{const x=e.datasets.getDataset(v.key),$=x?.outputVarL!==void 0,T=x?.outputVarR!==void 0;m(v,x,$,T);break}case"by-scenario":{const x=e.scenarios.getScenario(v.key),$=x?.specL!==void 0,T=x?.specR!==void 0;m(v,x,$,T);break}default:assertNeverExports$1.assertNever(v.kind)}return u.length>1&&(u[0].group.kind==="by-dataset"?u=sortDatasetGroupSummaries(u):u[0].group.kind==="by-scenario"&&(u=sortScenarioGroupSummaries(u))),{allGroupSummaries:n,withErrors:i,onlyInLeft:a,onlyInRight:l,withDiffs:u,withoutDiffs:d}}function sortDatasetGroupSummaries(e){return e.sort((t,r)=>{var n,i;const a=compareScores(t.scores,r.scores);if(a!==0)return-a;{const l=t.root.outputVarL,u=r.root.outputVarR,d=((n=l.sourceName)==null?void 0:n.toLowerCase())||"",m=((i=u.sourceName)==null?void 0:i.toLowerCase())||"";if(d!==m)return d.localeCompare(m);{const v=l.varName.toLowerCase(),x=u.varName.toLowerCase();return v.localeCompare(x)}}})}function sortScenarioGroupSummaries(e){return e.sort((t,r)=>{var n,i;const a=compareScores(t.scores,r.scores);if(a!==0)return-a;{const l=t.root,u=r.root,d=l.title.toLowerCase(),m=u.title.toLowerCase();if(d!==m)return d.localeCompare(m);{const v=((n=l.subtitle)==null?void 0:n.toLowerCase())||"",x=((i=u.subtitle)==null?void 0:i.toLowerCase())||"";return v.localeCompare(x)}}})}function compareScores(e,t){if(e.totalDiffByBucket.length!==t.totalDiffByBucket.length)return 0;const r=e.totalDiffByBucket.length;for(let n=r-1;n>=0;n--){const i=e.totalDiffByBucket[n],a=t.totalDiffByBucket[n];if(i>a)return 1;if(i<a)return-1}return 0}var comparison_schema_default={$schema:"http://json-schema.org/draft-07/schema#",title:"Model Comparison Test",type:"array",description:"A group of model comparison scenarios and views.",items:{$ref:"#/$defs/top_level_array_item"},$defs:{top_level_array_item:{oneOf:[{$ref:"#/$defs/scenario_array_item"},{$ref:"#/$defs/scenario_group_array_item"},{$ref:"#/$defs/graph_group_array_item"},{$ref:"#/$defs/view_group_array_item"}]},dataset:{type:"object",additionalProperties:!1,properties:{name:{type:"string"},source:{type:"string"}},required:["name"]},scenario_array_item:{type:"object",additionalProperties:!1,properties:{scenario:{$ref:"#/$defs/scenario"}},required:["scenario"]},scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_preset"}]},scenario_position:{type:"string",enum:["min","max","default"]},scenario_with_input_at_position:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with","at"]},scenario_with_input_at_value:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{type:"string"},at:{type:"number"}},required:["with","at"]},scenario_input_at_position:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["input","at"]},scenario_input_at_value:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{type:"number"}},required:["input","at"]},scenario_input_setting:{oneOf:[{$ref:"#/$defs/scenario_input_at_position"},{$ref:"#/$defs/scenario_input_at_value"}]},scenario_input_setting_array:{type:"array",items:{$ref:"#/$defs/scenario_input_setting"},minItems:1},scenario_with_multiple_input_settings:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{$ref:"#/$defs/scenario_input_setting_array"}},required:["with"]},scenario_with_inputs_in_preset_at_position:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with_inputs:{type:"string",enum:["all"]},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs","at"]},scenario_preset:{type:"object",additionalProperties:!1,properties:{preset:{type:"string",enum:["matrix"]}},required:["preset"]},scenario_group_array_item:{type:"object",additionalProperties:!1,properties:{scenario_group:{$ref:"#/$defs/scenario_group"}},required:["scenario_group"]},scenario_group:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/scenario_group_scenarios_array_item"},minItems:1}},required:["title","scenarios"]},scenario_group_scenarios_array_item:{oneOf:[{$ref:"#/$defs/scenario_array_item"},{$ref:"#/$defs/scenario_ref_array_item"}]},scenario_ref_id:{type:"string"},scenario_ref_object:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"}},required:["id"]},scenario_ref:{oneOf:[{$ref:"#/$defs/scenario_ref_id"},{$ref:"#/$defs/scenario_ref_object"}]},scenario_ref_array_item:{type:"object",additionalProperties:!1,properties:{scenario_ref:{$ref:"#/$defs/scenario_ref"}},required:["scenario_ref"]},scenario_group_ref:{type:"object",additionalProperties:!1,properties:{scenario_group_ref:{type:"string"}},required:["scenario_group_ref"]},graphs_preset:{type:"string",enum:["all"]},graphs_array:{type:"array",items:{type:"string"},minItems:1},graph_group_ref:{type:"object",additionalProperties:!1,properties:{graph_group_ref:{type:"string"}},required:["graph_group_ref"]},graph_group_array_item:{type:"object",additionalProperties:!1,properties:{graph_group:{$ref:"#/$defs/graph_group"}},required:["graph_group"]},graph_group:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},graphs:{$ref:"#/$defs/graphs_array"}},required:["id","graphs"]},view:{oneOf:[{$ref:"#/$defs/view_with_scenario"},{$ref:"#/$defs/view_with_rows"}]},view_with_scenario:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},scenario_ref:{type:"string"},graphs:{$ref:"#/$defs/view_graphs"},graph_order:{$ref:"#/$defs/view_graph_order"}},required:["scenario_ref"]},view_with_rows:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},rows:{$ref:"#/$defs/view_rows_array"}},required:["title","rows"]},view_rows_array:{type:"array",items:{$ref:"#/$defs/view_rows_array_item"},minItems:1},view_rows_array_item:{type:"object",additionalProperties:!1,properties:{row:{$ref:"#/$defs/view_row"}}},view_row:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},boxes:{$ref:"#/$defs/view_boxes_array"}},required:["title","boxes"]},view_boxes_array:{type:"array",items:{$ref:"#/$defs/view_boxes_array_item"},minItems:1},view_boxes_array_item:{type:"object",additionalProperties:!1,properties:{box:{$ref:"#/$defs/view_box"}}},view_box:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},dataset:{$ref:"#/$defs/dataset"},scenario_ref:{$ref:"#/$defs/scenario_ref_id"}},required:["title","dataset","scenario_ref"]},view_graphs:{oneOf:[{$ref:"#/$defs/graphs_preset"},{$ref:"#/$defs/graphs_array"},{$ref:"#/$defs/graph_group_ref"}]},view_graph_order:{type:"string",enum:["default","grouped-by-diffs"]},view_group_array_item:{type:"object",additionalProperties:!1,properties:{view_group:{$ref:"#/$defs/view_group"}},required:["view_group"]},view_group:{oneOf:[{$ref:"#/$defs/view_group_with_views_array"},{$ref:"#/$defs/view_group_shorthand_with_scenarios_array"}]},view_group_with_views_array:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},views:{type:"array",items:{$ref:"#/$defs/view_group_views_array_item"},minItems:1}},required:["title","views"]},view_group_views_array_item:{type:"object",additionalProperties:!1,properties:{view:{$ref:"#/$defs/view"}}},view_group_shorthand_with_scenarios_array:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/view_group_scenarios_array_item"},minItems:1},graphs:{$ref:"#/$defs/view_graphs"}},required:["title","scenarios","graphs"]},view_group_scenarios_array_item:{oneOf:[{$ref:"#/$defs/scenario_ref_array_item"},{$ref:"#/$defs/scenario_group_ref"}]}}};function parseComparisonSpecs(e){const t=[],r=[],n=[],i=[],l=new Ajv2().compile(comparison_schema_default);let u;switch(e.kind){case"json":u=JSON.parse(e.content);break;case"yaml":u=YAML.parse(e.content);break;default:Tr(e.kind)}if(l(u))for(const d of u)"scenario"in d?t.push(scenarioSpecFromParsed(d.scenario)):"scenario_group"in d?r.push(scenarioGroupSpecFromParsed(d.scenario_group)):"graph_group"in d?n.push(graphGroupSpecFromParsed(d.graph_group)):"view_group"in d&&i.push(viewGroupSpecFromParsed(d.view_group));else{let d="Failed to parse YAML comparison definitions";for(const m of l.errors||[])m.message&&(d+=`
${m.message}`);return err$2(new Error(d))}return ok$2({scenarios:t,scenarioGroups:r,graphGroups:n,viewGroups:i})}function datasetSpecFromParsed(e){return{kind:"dataset",name:e.name,source:e.source}}function scenarioSpecFromParsed(e){if(e.preset==="matrix")return{kind:"scenario-matrix"};if(e.with!==void 0){let t;return Array.isArray(e.with)?t=e.with.map(inputSpecFromParsed):t=[inputSpecFromParsed({input:e.with,at:e.at})],{kind:"scenario-with-inputs",id:e.id,title:e.title,subtitle:e.subtitle,inputs:t}}if(e.with_inputs==="all")return{kind:"scenario-with-all-inputs",id:e.id,title:e.title,subtitle:e.subtitle,position:e.at};throw new Error(`Unable to convert parsed scenario: ${JSON.stringify(e)}`)}function inputSpecFromParsed(e){if(typeof e.at=="number"){const t=e.at;return{kind:"input-at-value",inputName:e.input,value:t}}else return{kind:"input-at-position",inputName:e.input,position:e.at}}function scenarioGroupSpecFromParsed(e){const t=e.scenarios.map(r=>"scenario_ref"in r?scenarioRefSpecFromParsed(r):scenarioSpecFromParsed(r.scenario));return{kind:"scenario-group",id:e.id,title:e.title,scenarios:t}}function scenarioRefSpecFromParsed(e){return typeof e.scenario_ref=="string"?{kind:"scenario-ref",scenarioId:e.scenario_ref}:{kind:"scenario-ref",scenarioId:e.scenario_ref.id,title:e.scenario_ref.title,subtitle:e.scenario_ref.subtitle}}function scenarioGroupRefSpecFromParsed(e){return{kind:"scenario-group-ref",groupId:e.scenario_group_ref}}function graphGroupSpecFromParsed(e){return{kind:"graph-group",id:e.id,graphIds:e.graphs}}function viewSpecFromParsed(e){let t,r;e.scenario_ref!==void 0?t=e.scenario_ref:e.rows!==void 0&&(r=e.rows.map(i=>viewRowSpecFromParsed(i.row)));let n;return e.graphs!==void 0&&(n=viewGraphsSpecFromParsed(e.graphs)),{kind:"view",title:e.title,subtitle:e.subtitle,scenarioId:t,rows:r,graphs:n,graphOrder:e.graph_order}}function viewRowSpecFromParsed(e){return{kind:"view-row",title:e.title,subtitle:e.subtitle,boxes:e.boxes.map(t=>viewBoxSpecFromParsed(t.box))}}function viewBoxSpecFromParsed(e){return{kind:"view-box",title:e.title,subtitle:e.subtitle,dataset:datasetSpecFromParsed(e.dataset),scenarioId:e.scenario_ref}}function viewGraphsSpecFromParsed(e){if(e==="all")return{kind:"graphs-preset",preset:"all"};if(Array.isArray(e))return{kind:"graphs-array",graphIds:e};if("graph_group_ref"in e)return{kind:"graph-group-ref",groupId:e.graph_group_ref};throw new Error("Invalid graphs spec in comparison view")}function viewGroupSpecFromParsed(e){if(e.views!==void 0)return{kind:"view-group-with-views",title:e.title,views:e.views.map(t=>viewSpecFromParsed(t.view))};if(e.scenarios!==void 0){const t=e.scenarios.map(r=>{if("scenario_ref"in r)return scenarioRefSpecFromParsed(r);if("scenario_group_ref"in r)return scenarioGroupRefSpecFromParsed(r);throw new Error("Invalid view group")});return{kind:"view-group-with-scenarios",title:e.title,scenarios:t,graphs:viewGraphsSpecFromParsed(e.graphs)}}else throw new Error("Invalid view group")}var ModelInputs=class{constructor(e){this.modelSpec=e,this.inputsByLookupName=new Map,this.inputIdAliases=new Set;for(const t of e.inputVars.values()){const r=t.varName.toLowerCase();if(this.inputsByLookupName.set(r,t),t.inputId){const n=`id ${t.inputId}`;this.inputIdAliases.add(n);const i=n.toLowerCase();this.inputsByLookupName.set(i,t)}}if(e.inputAliases)for(const[t,r]of e.inputAliases.entries()){const n=t.toLowerCase();if(this.inputsByLookupName.has(n)){console.warn(`WARNING: Input variable already defined with a name that collides with alias '${t}', skipping`);continue}const i=e.inputVars.get(r);if(i===void 0){console.warn(`WARNING: No input variable found for '${r}' associated with alias '${t}', skipping`);continue}this.inputsByLookupName.set(n,i)}}getAllInputIdAliases(){return[...this.inputIdAliases]}getInputVarForName(e){return this.inputsByLookupName.get(e.toLowerCase())}getInputVarForVarId(e){return this.modelSpec.inputVars.get(e)}};function scenarioSpecsFromSettings(e){switch(e.kind){case"all-inputs-settings":{const t=allInputsAtPositionSpec(e.position);return[t,t]}case"input-settings":{const t=scenarioSpecFromInputs(e.inputs,"left"),r=scenarioSpecFromInputs(e.inputs,"right");return[t,r]}default:assertNeverExports$1.assertNever(e)}}function scenarioSpecFromInputs(e,t){const r=[];for(const n of e){const i=t==="left"?n.stateL:n.stateR;if(i.inputVar===void 0)return;r.push(inputSettingFromResolvedInputState(i))}return inputSettingsSpec(r)}function inputSettingFromResolvedInputState(e){const t=e.inputVar.varId;return e.position?positionSetting(t,e.position):valueSetting(t,e.value)}function resolveComparisonSpecs(e,t,r){let n=1;const i=()=>`${n++}`,a=new ModelInputs(e),l=new ModelInputs(t),u=new ModelOutputs(e,t),d=new ResolvedScenarios;for(const T of r.scenarios||[])d.add(resolveScenariosFromSpec(a,l,T,i));const m=[];for(const T of r.scenarioGroups||[]){const A=[];for(const L of T.scenarios)if(L.kind==="scenario-ref")A.push(L);else{const P=resolveScenariosFromSpec(a,l,L,i);d.add(P),A.push(...P)}m.push({spec:T,scenarios:A})}const v=new ResolvedScenarioGroups;for(const T of m){const A=[];for(const L of T.scenarios)if(L.kind==="scenario-ref"){const P=d.getScenarioForId(L.scenarioId);if(P){const q=__spreadValues$1({},P);L.title&&(q.title=L.title),L.subtitle&&(q.subtitle=L.subtitle),A.push(q)}else A.push({kind:"unresolved-scenario-ref",scenarioId:L.scenarioId})}else A.push(L);v.add({kind:"scenario-group",id:T.spec.id,title:T.spec.title,scenarios:A})}const x=new ResolvedGraphGroups;for(const T of r.graphGroups||[])x.add(T);const $=[];for(const T of r.viewGroups||[]){const A=resolveViewGroupFromSpec(e,t,u,d,v,x,T);$.push(A)}return{scenarios:d.getAll(),scenarioGroups:v.getAll(),viewGroups:$}}var ModelOutputs=class{constructor(e,t){this.modelSpecL=e,this.modelSpecR=t}getDatasetForName(e,t){function r(i){for(const a of i.outputVars.values())if(a.varName===e&&a.sourceName===t)return a}const n=r(this.modelSpecR);if(n){const i=n.datasetKey,a=this.modelSpecL.outputVars.get(i);return{kind:"dataset",key:i,outputVarL:a,outputVarR:n}}else return}},ResolvedScenarios=class{constructor(){this.resolvedScenarios=[],this.resolvedScenariosById=new Map}add(e){for(const t of e)if(this.resolvedScenarios.push(t),t.id!==void 0){if(this.resolvedScenariosById.has(t.id))throw new Error(`Multiple scenarios defined with the same id (${t.id})`);this.resolvedScenariosById.set(t.id,t)}}getAll(){return this.resolvedScenarios}getScenarioForId(e){return this.resolvedScenariosById.get(e)}};function resolveScenariosFromSpec(e,t,r,n){switch(r.kind){case"scenario-matrix":return resolveScenarioMatrix(e,t,n);case"scenario-with-all-inputs":{const i=inputPosition2(r.position);return[resolveScenarioWithAllInputsAtPosition(n(),r.id,r.title,r.subtitle,i)]}case"scenario-with-inputs":return[resolveScenarioForInputSpecs(e,t,n(),r.id,r.title,r.subtitle,r.inputs)];case"scenario-with-distinct-inputs":return[resolveScenarioForDistinctInputSpecs(e,t,n(),r.id,r.title,r.subtitle,r.inputsL,r.inputsR)];case"scenario-with-setting-group":return[resolveScenarioForSettingGroup(e,t,n(),r.id,r.title,r.subtitle,r.settingGroupId)];default:assertNeverExports$1.assertNever(r)}}function resolveScenarioMatrix(e,t,r){const n=[];n.push(resolveScenarioWithAllInputsAtPosition(r(),void 0,void 0,void 0,"at-default"));const i=new Set;e.getAllInputIdAliases().forEach(a=>i.add(a)),t.getAllInputIdAliases().forEach(a=>i.add(a));for(const a of i){const l={kind:"input-at-position",inputName:a,position:"min"},u={kind:"input-at-position",inputName:a,position:"max"};n.push(resolveScenarioForInputSpecs(e,t,r(),void 0,void 0,void 0,[l])),n.push(resolveScenarioForInputSpecs(e,t,r(),void 0,void 0,void 0,[u]))}return n}function resolveScenarioWithAllInputsAtPosition(e,t,r,n,i){const a={kind:"all-inputs-settings",position:i},[l,u]=scenarioSpecsFromSettings(a);return{kind:"scenario",key:e,id:t,title:r,subtitle:n,settings:a,specL:l,specR:u}}function resolveScenarioForInputSpecs(e,t,r,n,i,a,l){const d={kind:"input-settings",inputs:l.map(x=>{switch(x.kind){case"input-at-position":return resolveInputForName(e,t,x.inputName,x.position);case"input-at-value":return resolveInputForName(e,t,x.inputName,x.value);default:assertNeverExports$1.assertNever(x)}})},[m,v]=scenarioSpecsFromSettings(d);return{kind:"scenario",key:r,id:n,title:i,subtitle:a,settings:d,specL:m,specR:v}}function resolveScenarioForDistinctInputSpecs(e,t,r,n,i,a,l,u){const d=[],m=[],v=[];function x(A,L,P){let q;switch(P.kind){case"input-at-position":q=resolveInputForNameInModel(L,P.inputName,P.position);break;case"input-at-value":q=resolveInputForNameInModel(L,P.inputName,P.value);break;default:assertNeverExports$1.assertNever(P)}if(q.error!==void 0)d.push({requestedName:P.inputName,stateL:A==="left"?q:{},stateR:A==="right"?q:{}});else{const C=inputSettingFromResolvedInputState(q);A==="left"?m.push(C):v.push(C)}}l.forEach(A=>x("left",e,A)),u.forEach(A=>x("right",t,A));let $,T;return d.length===0&&($=inputSettingsSpec(m),T=inputSettingsSpec(v)),{kind:"scenario",key:r,id:n,title:i,subtitle:a,settings:{kind:"input-settings",inputs:d},specL:$,specR:T}}function resolveScenarioForSettingGroup(e,t,r,n,i,a,l){var u,d;function m(B,H){const X=B.getInputVarForVarId(H);return X!==void 0?X.varName:H}function v(B){switch(B){case"at-minimum":return"min";case"at-maximum":return"max";case"at-default":return"default";default:throw new Error(`Unknown input position: ${B}`)}}function x(B,H){switch(H.kind){case"position":return{kind:"input-at-position",inputName:m(B,H.inputVarId),position:v(H.position)};case"value":return{kind:"input-at-value",inputName:m(B,H.inputVarId),value:H.value};default:throw new Error(`Unknown input setting kind: ${H}`)}}function $(B,H){return H.map(X=>x(B,X))}const T=((u=e.modelSpec.inputSettingGroups)==null?void 0:u.get(l))||[],A=((d=t.modelSpec.inputSettingGroups)==null?void 0:d.get(l))||[],L=$(e,T),P=$(t,A),q=resolveScenarioForDistinctInputSpecs(e,t,r,n,i,a,L,P);function C(B){if(B.kind==="input-settings")return B.settings.map(X=>{switch(X.kind){case"position":return`${X.inputVarId}=${X.position}`;case"value":return`${X.inputVarId}=${X.value}`;default:throw new Error(`Unexpected input setting kind: ${X}`)}}).sort().join("__");throw new Error(`Unexpected scenario spec kind: ${B.kind}`)}function D(B,H){return C(B)===C(H)}function G(B){return B.length===0?{error:{kind:"unknown-input-setting-group"}}:{}}if(T.length===0||A.length===0){if(q.settings.kind==="input-settings"){const B={requestedName:l,stateL:G(T),stateR:G(A)};q.settings.inputs.unshift(B)}T.length===0&&(q.specL=void 0),A.length===0&&(q.specR=void 0)}return q.settings.kind==="input-settings"&&q.specL&&q.specR&&!D(q.specL,q.specR)&&(q.settings.settingsDiffer=!0),q}function resolveInputForName(e,t,r,n){return{requestedName:r,stateL:resolveInputForNameInModel(e,r,n),stateR:resolveInputForNameInModel(t,r,n)}}function resolveInputForNameInModel(e,t,r){const n=e.getInputVarForName(t);return n?resolveInputVar(n,r):{error:{kind:"unknown-input"}}}function resolveInputVar(e,t){if(typeof t=="number")return resolveInputVarAtValue(e,t);{const r=inputPosition2(t);return resolveInputVarAtPosition(e,r)}}function resolveInputVarAtPosition(e,t){return{inputVar:e,position:t,value:inputValueAtPosition2(e,t)}}function resolveInputVarAtValue(e,t){return t>=e.minValue&&t<=e.maxValue?{inputVar:e,value:t}:{error:{kind:"invalid-value"}}}function inputPosition2(e){switch(e){case"default":return"at-default";case"min":return"at-minimum";case"max":return"at-maximum";default:return}}function inputValueAtPosition2(e,t){switch(t){case"at-default":return e.defaultValue;case"at-minimum":return e.minValue;case"at-maximum":return e.maxValue;default:assertNeverExports$1.assertNever(t)}}var ResolvedScenarioGroups=class{constructor(){this.resolvedGroups=[],this.resolvedGroupsById=new Map}add(e){if(this.resolvedGroups.push(e),e.id!==void 0){if(this.resolvedGroupsById.has(e.id))throw new Error(`Multiple scenario groups defined with the same id (${e.id})`);this.resolvedGroupsById.set(e.id,e)}}getAll(){return this.resolvedGroups}getGroupForId(e){return this.resolvedGroupsById.get(e)}},ResolvedGraphGroups=class{constructor(){this.resolvedGroupsById=new Map}add(e){if(this.resolvedGroupsById.has(e.id))throw new Error(`Multiple graph groups defined with the same id (${e.id})`);this.resolvedGroupsById.set(e.id,e)}getGroupForId(e){return this.resolvedGroupsById.get(e)}};function resolveGraphsFromSpec(e,t,r,n){switch(n.kind){case"graphs-preset":switch(n.preset){case"all":{const i=new Set,a=l=>{if(l.graphSpecs)for(const u of l.graphSpecs)i.add(u.id)};return a(e),a(t),[...i]}default:assertNeverExports$1.assertNever(n.preset)}case"graphs-array":return n.graphIds;case"graph-group-ref":{const i=r.getGroupForId(n.groupId);if(i===void 0)throw new Error(`No graph group found for id ${n.groupId}`);return i.graphIds}default:assertNeverExports$1.assertNever(n)}}function resolveViewForScenarioId(e,t,r,n,i,a){const l=e.getScenarioForId(n);return l?resolveViewForScenario(t,r,l,i,a):unresolvedViewForScenarioId(t,r,n)}function resolveViewForScenarioRefSpec(e,t,r,n){const i=e.getScenarioForId(t.scenarioId);return i?resolveViewForScenario(t.title,t.subtitle,i,r,n):unresolvedViewForScenarioId(void 0,void 0,t.scenarioId)}function resolveViewForScenario(e,t,r,n,i){return e===void 0&&(e=r.title,e===void 0&&(e="Untitled view"),t===void 0&&(t=r.subtitle)),{kind:"view",title:e,subtitle:t,scenario:r,graphIds:n,graphOrder:i}}function resolveViewBoxForSpec(e,t,r){const n=e.getDatasetForName(r.dataset.name,r.dataset.source);if(n===void 0)return{kind:"unresolved-view-box",datasetName:r.dataset.name,datasetSource:r.dataset.source};const i=t.getScenarioForId(r.scenarioId);return i===void 0?{kind:"unresolved-view-box",scenarioId:r.scenarioId}:{kind:"view-box",title:r.title,subtitle:r.subtitle,dataset:n,scenario:i}}function resolveViewRowForSpec(e,t,r){const n=[];for(const i of r.boxes){const a=resolveViewBoxForSpec(e,t,i);if(a.kind==="view-box")n.push(a);else return a}return{kind:"view-row",title:r.title,subtitle:r.subtitle,boxes:n}}function resolveViewWithRowSpecs(e,t,r,n,i){const a=[];for(const l of i){const u=resolveViewRowForSpec(e,t,l);if(u.kind==="view-row")a.push(u);else return unresolvedViewForScenarioId(r,n,u.scenarioId,u.datasetName,u.datasetSource)}return r===void 0&&(r="Untitled view"),{kind:"view",title:r,subtitle:n,rows:a,graphIds:[],graphOrder:"default"}}function unresolvedViewForScenarioId(e,t,r,n,i){return{kind:"unresolved-view",title:e,subtitle:t,scenarioId:r,datasetName:n,datasetSource:i}}function unresolvedViewForScenarioGroupId(e,t,r){return{kind:"unresolved-view",title:e,subtitle:t,scenarioGroupId:r}}function resolveViewGroupFromSpec(e,t,r,n,i,a,l){let u;switch(l.kind){case"view-group-with-views":{u=l.views.map(d=>{if(d.scenarioId){let m;return d.graphs?m=resolveGraphsFromSpec(e,t,a,d.graphs):m=[],resolveViewForScenarioId(n,d.title,d.subtitle,d.scenarioId,m,d.graphOrder||"default")}else return resolveViewWithRowSpecs(r,n,d.title,d.subtitle,d.rows)});break}case"view-group-with-scenarios":{const d=resolveGraphsFromSpec(e,t,a,l.graphs),m=l.graphOrder||"default";u=[];for(const v of l.scenarios)switch(v.kind){case"scenario-ref":u.push(resolveViewForScenarioRefSpec(n,v,d,m));break;case"scenario-group-ref":{const x=i.getGroupForId(v.groupId);if(x)for(const $ of x.scenarios)switch($.kind){case"unresolved-scenario-ref":u.push(unresolvedViewForScenarioId(void 0,void 0,$.scenarioId));break;case"scenario":u.push(resolveViewForScenario(void 0,void 0,$,d,m));break;default:assertNeverExports$1.assertNever($)}else u.push(unresolvedViewForScenarioGroupId(void 0,void 0,v.groupId));break}default:assertNeverExports$1.assertNever(v)}break}default:assertNeverExports$1.assertNever(l)}return{kind:"view-group",title:l.title,views:u}}function resolveComparisonSpecsFromSources(e,t,r){const n={scenarios:[],scenarioGroups:[],graphGroups:[],viewGroups:[]};for(const i of r){let a;if("kind"in i){const l=parseComparisonSpecs(i);if(l.isOk())a=l.value;else{const u=i.filename?` in ${i.filename}`:"";console.error(`ERROR: Failed to parse comparison spec${u}, skipping`);continue}}else a=i;n.scenarios.push(...a.scenarios||[]),n.scenarioGroups.push(...a.scenarioGroups||[]),n.graphGroups.push(...a.graphGroups||[]),n.viewGroups.push(...a.viewGroups||[])}return resolveComparisonSpecs(e,t,n)}function getComparisonDatasets(e,t,r){return new ComparisonDatasetsImpl(e,t,r)}var ComparisonDatasetsImpl=class{constructor(e,t,r){this.modelSpecL=e,this.modelSpecR=t,this.datasetOptions=r;const n=r?.renamedDatasetKeys,i=new Map;n?.forEach((m,v)=>{i.set(m,v)});function a(m){return i.get(m)||m}const l=new Set,u=new Set;function d(m,v){m.forEach((x,$)=>{const T=v?a($):$;l.add(T),x.sourceName===void 0&&u.add(T)})}d(e.outputVars,!1),d(t.outputVars,!0),this.allOutputVarKeys=Array.from(l),this.modelOutputVarKeys=Array.from(u),this.allDatasets=new Map;for(const m of this.allOutputVarKeys){const v=n?.get(m)||m,x=e.outputVars.get(m),$=t.outputVars.get(v);this.allDatasets.set(m,{kind:"dataset",key:m,outputVarL:x,outputVarR:$})}}getAllDatasets(){return this.allDatasets.values()}getDataset(e){return this.allDatasets.get(e)}getDatasetKeysForScenario(e){var t;return((t=this.datasetOptions)==null?void 0:t.datasetKeysForScenario)!==void 0?this.datasetOptions.datasetKeysForScenario(this.allOutputVarKeys,e):e.settings.kind==="all-inputs-settings"&&e.settings.position==="at-default"?this.allOutputVarKeys:this.modelOutputVarKeys}getReferencePlotsForDataset(e,t){var r;if(((r=this.datasetOptions)==null?void 0:r.referencePlotsForDataset)!==void 0){const n=this.getDataset(e);if(n!==void 0)return this.datasetOptions.referencePlotsForDataset(n,t)}return[]}getContextGraphIdsForDataset(e,t){var r;const n=this.getDataset(e);return n===void 0?[]:((r=this.datasetOptions)==null?void 0:r.contextGraphIdsForDataset)!==void 0?this.datasetOptions.contextGraphIdsForDataset(n,t):getContextGraphIdsForDataset(this.modelSpecL,this.modelSpecR,n)}};function getContextGraphIdsForDataset(e,t,r){const n=new Set;function i(a,l){for(const u of a.graphSpecs||[])for(const d of u.datasets)if(d.datasetKey===l?.datasetKey){n.add(u.id);break}}return i(e,r.outputVarL),i(t,r.outputVarR),[...n]}function getComparisonScenarios(e){return new ComparisonScenariosImpl(e)}var ComparisonScenariosImpl=class{constructor(e){this.scenarioDefs=new Map;for(const t of e)this.scenarioDefs.set(t.key,t)}getAllScenarios(){return this.scenarioDefs.values()}getScenario(e){return this.scenarioDefs.get(e)}};function createConfig(e){return __async(this,null,function*(){var t,r,n,i,a;let l;if(e.concurrency===void 0)l=1;else if(e.concurrency===0){let $;typeof navigator<"u"&&($=navigator.hardwareConcurrency),($===void 0||$<1)&&($=1),l=Math.max(1,Math.floor($/2))}else l=Math.max(1,e.concurrency);const u=yield loadBundle(e.current,l);let d,m;if(e.comparison===void 0)d=u;else{const $=yield loadBundle(e.comparison.baseline,l);d=handleRenames(u,(t=e.comparison.datasets)==null?void 0:t.renamedDatasetKeys);const T=$.modelSpec,A=d.modelSpec,L=resolveComparisonSpecsFromSources(T,A,e.comparison.specs);m={bundleL:$,bundleR:d,thresholds:(r=e.comparison.thresholds)!=null?r:[1,5,10],ratioThresholds:(n=e.comparison.ratioThresholds)!=null?n:[1,2,3],scenarios:getComparisonScenarios(L.scenarios),datasets:getComparisonDatasets(T,A,e.comparison.datasets),viewGroups:L.viewGroups,reportOptions:e.comparison.report}}const v={bundle:d,tests:e.check.tests},x=new Map;for(let $=0;$<v.bundle.models.length;$++){const T=(i=m?.bundleL.models)==null?void 0:i[$],A=((a=m?.bundleR.models)==null?void 0:a[$])||v.bundle.models[$],L=createExecutor(T,A);x.set(`executor-${$}`,L)}return TaskQueue.initialize(x),{check:v,comparison:m}})}function loadBundle(e,t){return __async(this,null,function*(){const r=Array.from({length:t},()=>e.bundle.initModel()),n=yield Promise.all(r);return{name:e.name,version:e.bundle.version,modelSpec:e.bundle.modelSpec,models:n}})}function handleRenames(e,t){if(t===void 0||t.size===0)return e;const r=new Map;t.forEach((u,d)=>{r.set(u,d)});const n=u=>t?.get(u)||u,i=u=>r.get(u)||u;function a(u){return{modelSpec:u.modelSpec,getDatasetsForScenario:(d,m)=>__async(this,null,function*(){const v=m.map(n),x=yield u.getDatasetsForScenario(d,v),$=x.datasetMap,T=new Map;for(const[A,L]of $.entries()){const P=i(A);T.set(P,L)}return{datasetMap:T,modelRunTime:x.modelRunTime}}),getGraphDataForScenario:u.getGraphDataForScenario.bind(u),getGraphLinksForScenario:u.getGraphLinksForScenario.bind(u)}}const l=e.models.map(a);return __spreadProps(__spreadValues$1({},e),{models:l})}var PerfStats=class{constructor(){this.times=[]}addRun(e){this.times.push(e)}toReport(){if(this.times.length===0)return{minTime:0,maxTime:0,avgTime:0,allTimes:[]};const e=Math.min(...this.times),t=Math.max(...this.times),r=this.times.sort(),n=Math.floor(r.length/4),i=n+Math.ceil(r.length/2),a=r.slice(n,i),u=a.reduce((d,m)=>d+m,0)/a.length;return{minTime:e,maxTime:t,avgTime:u,allTimes:r}}};function runPerfWithTaskQueue(e,t,r){const n=new PerfRunner(e,t,r);return n.start(),()=>{n.cancel()}}function runPerf(e,t){const r=TaskQueue.getInstance();return runPerfWithTaskQueue(r,e,t)}var PerfRunner=class{constructor(e,t,r){this.taskQueue=e,this.callbacks=t,this.options=r,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(){var e,t,r,n,i,a;const l=new PerfStats,u=new PerfStats,d=allInputsAtPositionSpec("at-default"),m=(t=(e=this.options)==null?void 0:e.warmupCount)!=null?t:5,v=(n=(r=this.options)==null?void 0:r.runCount)!=null?n:100;let x=0;((i=this.options)==null?void 0:i.mode)==="parallel"?x=m+v:x=(m+v)*2;let $=0,T=1;const A=(P,q)=>{const C={key:`perf-runner-${T++}`,kind:"perf-runner",process:D=>__async(this,null,function*(){var G,B,H,X;this.pendingTaskKeys.delete(C.key);try{let re,pe;switch(q){case"left":{re=(yield D.L.getDatasetsForScenario(d,[])).modelRunTime;break}case"right":{pe=(yield D.R.getDatasetsForScenario(d,[])).modelRunTime;break}case"both":{const[$e,ke]=yield Promise.all([D.L.getDatasetsForScenario(d,[]),D.R.getDatasetsForScenario(d,[])]);re=$e.modelRunTime,pe=ke.modelRunTime;break}default:assertNeverExports$1.assertNever(q)}P||(re!==void 0&&l.addRun(re),pe!==void 0&&u.addRun(pe)),$++,$===x&&((B=(G=this.callbacks).onComplete)==null||B.call(G,l.toReport(),u.toReport()))}catch(re){(X=(H=this.callbacks).onError)==null||X.call(H,re)}})};this.taskQueue.addTask(C),this.pendingTaskKeys.add(C.key)};function L(P){for(let q=0;q<m;q++)A(!0,P);for(let q=0;q<v;q++)A(!1,P)}((a=this.options)==null?void 0:a.mode)==="parallel"?L("both"):(L("left"),L("right"))}};function runTraceWithTaskQueue(e,t,r,n){const i=new TraceRunner(t,r);return i.start(e,n),()=>{i.cancel()}}function runTrace(e,t,r){const n=TaskQueue.getInstance();return runTraceWithTaskQueue(e,n,t,r)}var TraceRunner=class{constructor(e,t){this.taskQueue=e,this.callbacks=t,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(e,t){const r=[...e.implVars.keys()],n=[],i=2e3;for(let m=0;m<r.length;m+=i){const v=r.slice(m,m+i);switch(t.kind){case"compare-to-bundle":n.push({kind:"compare-to-bundle",datasetKeys:v,bundleSide0:t.bundleSide0,scenarioSpec0:t.scenarioSpec0,bundleSide1:t.bundleSide1,scenarioSpec1:t.scenarioSpec1});break;case"compare-to-ext-data":n.push({kind:"compare-to-ext-data",datasetKeys:v,extData:t.extData,bundleSide:t.bundleSide,scenarioSpec:t.scenarioSpec});break;default:assertNeverExports$1.assertNever(t)}}const a=new Map,l=n.length;let u=0,d=1;for(const m of n){const v={key:`trace-runner-${d++}`,kind:"trace-runner",process:x=>__async(this,null,function*(){var $,T;this.pendingTaskKeys.delete(v.key);let A;switch(m.kind){case"compare-to-bundle":A=yield processCompareToBundleRequest(m,x);break;case"compare-to-ext-data":A=yield processCompareToExtDataRequest(m,x);break;default:assertNeverExports$1.assertNever(m)}for(const L of A)a.set(L.datasetKey,L);if(u++,u===l){const L={datasetReports:a};(T=($=this.callbacks).onComplete)==null||T.call($,L)}})};this.taskQueue.addTask(v),this.pendingTaskKeys.add(v.key)}}};function processCompareToBundleRequest(e,t){return __async(this,null,function*(){const r=e.bundleSide0==="left"?t.L:t.R,n=e.bundleSide1==="left"?t.L:t.R;let i,a;n===r?(i=yield r.getDatasetsForScenario(e.scenarioSpec0,e.datasetKeys),a=yield n.getDatasetsForScenario(e.scenarioSpec1,e.datasetKeys)):[i,a]=yield Promise.all([r.getDatasetsForScenario(e.scenarioSpec0,e.datasetKeys),n.getDatasetsForScenario(e.scenarioSpec1,e.datasetKeys)]);const l=[];for(const u of e.datasetKeys){const d=i.datasetMap.get(u),m=a.datasetMap.get(u),v=diffDatasets2(u,d,m,!1);l.push(v)}return l})}function processCompareToExtDataRequest(e,t){return __async(this,null,function*(){const n=yield(e.bundleSide==="left"?t.L:t.R).getDatasetsForScenario(e.scenarioSpec,e.datasetKeys),i=[];for(const a of e.datasetKeys){let l=e.extData.get(a);if(l===void 0){const m=a.split("[");if(m.length===2){const v=m[0],$=m[1].replace("]","").split(","),T=permutationsOf($);for(const A of T){const L=`${v}[${A.join(",")}]`;if(l=e.extData.get(L),l!==void 0)break}}l===void 0&&console.warn(`WARNING: Failed to find data in dat file for key=${a}`)}const u=n.datasetMap.get(a),d=diffDatasets2(a,l,u,!0);i.push(d)}return i})}function diffDatasets2(e,t,r,n){const i=new Map;let a=Number.MAX_VALUE,l=Number.MIN_VALUE,u=Number.MAX_VALUE,d=Number.MIN_VALUE,m=Number.MAX_VALUE,v=Number.MIN_VALUE,x=Number.MAX_VALUE,$=-1,T,A=0,L=0;if(t&&r){const B=new Set([...t.keys(),...r.keys()]);for(const H of B){const X=t.get(H);X!==void 0&&(X<a&&(a=X),X>l&&(l=X),X<m&&(m=X),X>v&&(v=X));let re;const pe=r.get(H);if(pe!==void 0&&(n&&X!==void 0?re=matchPrecision(pe,X):re=pe,re<u&&(u=re),re>d&&(d=re),re<m&&(m=re),re>v&&(v=re)),X===void 0||re===void 0)continue;const $e={time:H,valueL:X,valueR:re};i.set(H,$e);const ke=Math.abs(re-X);ke<x&&(x=ke),ke>$&&($=ke,T=$e),A++,L+=ke}}function P(B){return B*100}let q,C,D;if(a===l&&u===d){const B=P(l!==0?Math.abs((d-l)/l):1);q=B,C=B,D=B}else{const B=v-m;q=P(B>0?x/B:0),C=P(B>0?$/B:0);const H=L/A;D=P(B>0?H/B:0)}let G;return t&&r?G="both":t?G="left-only":r?G="right-only":G="neither",{datasetKey:e,validity:G,points:i,minValue:m,maxValue:v,avgDiff:D,minDiff:q,maxDiff:C,maxDiffPoint:T}}function matchPrecision(e,t){const r=t.toString();if(r.includes("e"))return e;const n=r.split(".");if(n.length<2)return e;const i=n[1].replace(/0+$/,"").length;return i>21?e:parseFloat(e.toFixed(i))}function permutationsOf(e){const t=[],r=(n,i=[])=>{if(n.length===0)t.push(i);else for(let a=0;a<n.length;a++){const l=n.slice(),u=l.splice(a,1);r(l.slice(),i.concat(u))}};return r(e),t}var DataPlanner=class{constructor(e){this.batchSize=e,this.taskSetsLR=new Map,this.taskSetsL=new Map,this.taskSetsR=new Map,this.complete=!1}addRequest(e,t,r,n){if(e===void 0&&t===void 0){console.warn("WARNING: Both scenario specs are undefined for DataPlanner request, skipping");return}let i,a;e&&t?(i=this.taskSetsLR,a=scenarioPairUid(e,t)):t?(i=this.taskSetsR,a=t.uid):(i=this.taskSetsL,a=e.uid);let l=i.get(a);l||(l=new DataTaskSet(e,t),i.set(a,l)),l.addTask({datasetKey:r,dataAction:n})}buildPlan(){if(this.complete)throw new Error("DataPlanner.buildPlan() can only be called once");this.complete=!0;const e=new Map,t=new Map;for(const l of this.taskSetsLR.keys()){const[u,d]=l.split("::");e.has(u)||e.set(u,l),t.has(d)||t.set(d,l)}function r(l,u,d){for(const[m,v]of u.entries()){const x=d.get(m);x&&(l.get(x).merge(v),u.delete(m))}}r(this.taskSetsLR,this.taskSetsL,e),r(this.taskSetsLR,this.taskSetsR,t);const n=[],i=this.batchSize;function a(l){for(const u of l)n.push(...u.buildRequests(i))}return a(this.taskSetsLR.values()),a(this.taskSetsL.values()),a(this.taskSetsR.values()),{requests:n}}},DataTaskSet=class{constructor(e,t){this.scenarioSpecL=e,this.scenarioSpecR=t,this.modelTasks=new Map,this.modelImplTasks=new Map}addTask(e){let t;e.datasetKey.startsWith("ModelImpl")?t=this.modelImplTasks:t=this.modelTasks;let r=t.get(e.datasetKey);r||(r=[],t.set(e.datasetKey,r)),r.push(e)}merge(e){for(const t of e.modelTasks.values())for(const r of t)this.addTask(r);for(const t of e.modelImplTasks.values())for(const r of t)this.addTask(r)}buildRequests(e){const t=[];if(this.modelTasks.size>0){const r=[];this.modelTasks.forEach(n=>r.push(...n)),t.push({scenarioSpecL:this.scenarioSpecL,scenarioSpecR:this.scenarioSpecR,dataTasks:r})}if(this.modelImplTasks.size>0){const r=[...this.modelImplTasks.keys()];for(let n=0;n<r.length;n+=e){const i=r.slice(n,n+e),a=[];for(const l of i)a.push(...this.modelImplTasks.get(l));t.push({scenarioSpecL:this.scenarioSpecL,scenarioSpecR:this.scenarioSpecR,dataTasks:a})}}return t}};function scenarioPairUid(e,t){const r=e?.uid||"",n=t?.uid||"";return`${r}::${n}`}function runChecks(e,t,r,n,i){const a=e.bundle.modelSpec,l=new CheckPlanner(a);l.addAllChecks(t,i);const u=l.buildPlan(),d=new Map;for(const[v,x]of u.dataRefs.entries())n.addRequest(void 0,x.scenario.spec,x.dataset.datasetKey,$=>{const T=$.datasetR;T&&d.set(v,T)});const m=new Map;for(const[v,x]of u.tasks.entries())x.skip===!0?m.set(v,{status:"skipped"}):r.addRequest(void 0,x.scenario.spec,x.dataset.datasetKey,$=>{const T=$.datasetR,A=runCheck(x,T,d);m.set(v,A)});return()=>buildCheckReport(u,m)}function runCheck(e,t,r){if(t===void 0)return{status:"error",message:"no data available"};let n;if(e.dataRefs){n=new Map;for(const[i,a]of e.dataRefs.entries()){const l=r?.get(a.key);if(l===void 0){if(a.dataset.datasetKey===void 0)return{status:"error",errorInfo:{kind:"unknown-dataset",name:a.dataset.name}};if(a.scenario.spec===void 0){if(a.scenario.error)return{status:"error",errorInfo:{kind:a.scenario.error.kind,name:a.scenario.error.name}};{let u;return a.scenario.inputDescs.length>0?u=a.scenario.inputDescs[0].name:u="unknown",{status:"error",errorInfo:{kind:"unknown-input",name:u}}}}else return{status:"error",message:"unresolved data reference"}}n.set(i,l)}}return e.action.run(t,n)}function runComparisons(e,t,r){function n(x,$){let T=x.toLowerCase();return $&&(T+=` :: ${$.toLowerCase()}`),T}const i=new Set(r.map(x=>n(x.title,x.subtitle))),a=[...e.scenarios.getAllScenarios()];let l;const u=a.findIndex(x=>{const $=x.settings;return $.kind==="all-inputs-settings"&&$.position==="at-default"});u!==-1&&(l=a.splice(u,1)[0]);const d=[],m=new Map;function v(x,$){const T=e.datasets.getDatasetKeysForScenario(x);if(i.has(n(x.title,x.subtitle))){for(const L of T)d.push({scenarioKey:x.key,datasetKey:L,diffReport:void 0});return}for(const L of T)t.addRequest(x.specL,x.specR,L,P=>{const q=diffDatasets(P.datasetL,P.datasetR);if($)m.set(L,q),d.push({scenarioKey:x.key,datasetKey:L,diffReport:q});else{const C=m.get(L);d.push({scenarioKey:x.key,datasetKey:L,diffReport:q,baselineDiffReport:C})}})}v(l,!0);for(const x of a)v(x,!1);return()=>d}var SuiteRunner=class{constructor(e,t,r){this.config=e,this.taskQueue=t,this.callbacks=r,this.perfStatsL=new PerfStats,this.perfStatsR=new PerfStats,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(e){var t,r,n,i,a,l,u,d;(r=(t=this.callbacks).onProgress)==null||r.call(t,0);const m=this.config.check.bundle.modelSpec,v=new DataPlanner(m.outputVars.size),x=new DataPlanner(m.outputVars.size),$=parseTestYaml(this.config.check.tests);if($.isErr()){(i=(n=this.callbacks).onError)==null||i.call(n,$.error);return}const T=$.value,A=e?.skipChecks||[],L=runChecks(this.config.check,T,v,x,A);let P;if(this.config.comparison){const re=e?.skipComparisonScenarios||[];P=runComparisons(this.config.comparison,v,re)}const q=x.buildPlan(),C=v.buildPlan(),D=[...q.requests,...C.requests],G=D.length;if(G===0){const re=L();let pe;this.config.comparison&&(pe={testReports:P(),perfReportL:this.perfStatsL.toReport(),perfReportR:this.perfStatsR.toReport()}),this.cancel(),(l=(a=this.callbacks).onProgress)==null||l.call(a,1),(d=(u=this.callbacks).onComplete)==null||d.call(u,{checkReport:re,comparisonReport:pe});return}const B=re=>{var pe,$e;{const ke=L();let Ne;this.config.comparison&&(Ne={testReports:P(),perfReportL:this.perfStatsL.toReport(),perfReportR:this.perfStatsR.toReport()}),($e=(pe=this.callbacks).onComplete)==null||$e.call(pe,{checkReport:ke,comparisonReport:Ne})}};let H=0,X=1;for(const re of D){const pe={key:`suite-runner-${X++}`,kind:"suite-runner",process:$e=>__async(this,null,function*(){var ke,Ne;this.pendingTaskKeys.delete(pe.key),yield this.processRequest(re,$e),H++,(Ne=(ke=this.callbacks).onProgress)==null||Ne.call(ke,H/G),H===G&&B()})};this.taskQueue.addTask(pe),this.pendingTaskKeys.add(pe.key)}}processRequest(e,t){return __async(this,null,function*(){const r=new Set;for(const x of e.dataTasks)r.add(x.datasetKey);const n=[...r];function i(x,$){return __async(this,null,function*(){if(x&&$)return x.getDatasetsForScenario($,n)})}const a=t.L,l=t.R,[u,d]=yield Promise.all([i(a,e.scenarioSpecL),i(l,e.scenarioSpecR)]);u?.modelRunTime&&this.perfStatsL.addRun(u?.modelRunTime),d?.modelRunTime&&this.perfStatsR.addRun(d?.modelRunTime);const m=u?.datasetMap,v=d?.datasetMap;for(const x of e.dataTasks){const $=m?.get(x.datasetKey),T=v?.get(x.datasetKey);x.dataAction({datasetL:$,datasetR:T})}})}};function runSuiteWithTaskQueue(e,t,r,n){const i=new SuiteRunner(e,t,r);return i.start(n),()=>{i.cancel()}}function runSuite(e,t,r){const n=TaskQueue.getInstance();return runSuiteWithTaskQueue(e,n,t,r)}var fontfaceobserver_standalone={exports:{}},hasRequiredFontfaceobserver_standalone;function requireFontfaceobserver_standalone(){return hasRequiredFontfaceobserver_standalone||(hasRequiredFontfaceobserver_standalone=1,(function(e){(function(){function t(L,P){document.addEventListener?L.addEventListener("scroll",P,!1):L.attachEvent("scroll",P)}function r(L){document.body?L():document.addEventListener?document.addEventListener("DOMContentLoaded",function P(){document.removeEventListener("DOMContentLoaded",P),L()}):document.attachEvent("onreadystatechange",function P(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",P),L())})}function n(L){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(L)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(L,P){L.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+P+";"}function a(L){var P=L.g.offsetWidth,q=P+100;return L.j.style.width=q+"px",L.i.scrollLeft=q,L.h.scrollLeft=L.h.scrollWidth+100,L.l!==P?(L.l=P,!0):!1}function l(L,P){function q(){var D=C;a(D)&&D.g.parentNode!==null&&P(D.l)}var C=L;t(L.h,q),t(L.i,q),a(L)}function u(L,P,q){P=P||{},q=q||window,this.family=L,this.style=P.style||"normal",this.weight=P.weight||"normal",this.stretch=P.stretch||"normal",this.context=q}var d=null,m=null,v=null,x=null;function $(L){return m===null&&(T(L)&&/Apple/.test(window.navigator.vendor)?(L=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),m=!!L&&603>parseInt(L[1],10)):m=!1),m}function T(L){return x===null&&(x=!!L.document.fonts),x}function A(L,P){var q=L.style,C=L.weight;if(v===null){var D=document.createElement("div");try{D.style.font="condensed 100px sans-serif"}catch{}v=D.style.font!==""}return[q,C,v?L.stretch:"","100px",P].join(" ")}u.prototype.load=function(L,P){var q=this,C=L||"BESbswy",D=0,G=P||3e3,B=new Date().getTime();return new Promise(function(H,X){if(T(q.context)&&!$(q.context)){var re=new Promise(function($e,ke){function Ne(){new Date().getTime()-B>=G?ke(Error(""+G+"ms timeout exceeded")):q.context.document.fonts.load(A(q,'"'+q.family+'"'),C).then(function(Ye){1<=Ye.length?$e():setTimeout(Ne,25)},ke)}Ne()}),pe=new Promise(function($e,ke){D=setTimeout(function(){ke(Error(""+G+"ms timeout exceeded"))},G)});Promise.race([pe,re]).then(function(){clearTimeout(D),H(q)},X)}else r(function(){function $e(){var Re;(Re=hi!=-1&&gi!=-1||hi!=-1&&Ui!=-1||gi!=-1&&Ui!=-1)&&((Re=hi!=gi&&hi!=Ui&&gi!=Ui)||(d===null&&(Re=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!Re&&(536>parseInt(Re[1],10)||parseInt(Re[1],10)===536&&11>=parseInt(Re[2],10))),Re=d&&(hi==ws&&gi==ws&&Ui==ws||hi==Gi&&gi==Gi&&Ui==Gi||hi==Ee&&gi==Ee&&Ui==Ee)),Re=!Re),Re&&(ce.parentNode!==null&&ce.parentNode.removeChild(ce),clearTimeout(D),H(q))}function ke(){if(new Date().getTime()-B>=G)ce.parentNode!==null&&ce.parentNode.removeChild(ce),X(Error(""+G+"ms timeout exceeded"));else{var Re=q.context.document.hidden;(Re===!0||Re===void 0)&&(hi=Ne.g.offsetWidth,gi=Ye.g.offsetWidth,Ui=Ar.g.offsetWidth,$e()),D=setTimeout(ke,50)}}var Ne=new n(C),Ye=new n(C),Ar=new n(C),hi=-1,gi=-1,Ui=-1,ws=-1,Gi=-1,Ee=-1,ce=document.createElement("div");ce.dir="ltr",i(Ne,A(q,"sans-serif")),i(Ye,A(q,"serif")),i(Ar,A(q,"monospace")),ce.appendChild(Ne.g),ce.appendChild(Ye.g),ce.appendChild(Ar.g),q.context.document.body.appendChild(ce),ws=Ne.g.offsetWidth,Gi=Ye.g.offsetWidth,Ee=Ar.g.offsetWidth,ke(),l(Ne,function(Re){hi=Re,$e()}),i(Ne,A(q,'"'+q.family+'",sans-serif')),l(Ye,function(Re){gi=Re,$e()}),i(Ye,A(q,'"'+q.family+'",serif')),l(Ar,function(Re){Ui=Re,$e()}),i(Ar,A(q,'"'+q.family+'",monospace'))})})},e.exports=u})()})(fontfaceobserver_standalone)),fontfaceobserver_standalone.exports}var fontfaceobserver_standaloneExports=requireFontfaceobserver_standalone();const Ia=getDefaultExportFromCjs$1(fontfaceobserver_standaloneExports);var faFilter={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M32 64C19.1 64 7.4 71.8 2.4 83.8S.2 109.5 9.4 118.6L192 301.3 192 416c0 8.5 3.4 16.6 9.4 22.6l64 64c9.2 9.2 22.9 11.9 34.9 6.9S320 492.9 320 480l0-178.7 182.6-182.6c9.2-9.2 11.9-22.9 6.9-34.9S492.9 64 480 64L32 64z"]},faLaptop={prefix:"fas",iconName:"laptop",icon:[640,512,[128187],"f109","M128 32C92.7 32 64 60.7 64 96l0 240 64 0 0-240 384 0 0 240 64 0 0-240c0-35.3-28.7-64-64-64L128 32zM19.2 384C8.6 384 0 392.6 0 403.2 0 445.6 34.4 480 76.8 480l486.4 0c42.4 0 76.8-34.4 76.8-76.8 0-10.6-8.6-19.2-19.2-19.2L19.2 384z"]},faGear={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},faCog=faGear,faHouse={prefix:"fas",iconName:"house",icon:[512,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"]},faHome=faHouse,faXmark={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M55.1 73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L147.2 256 9.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192.5 301.3 329.9 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.8 256 375.1 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192.5 210.7 55.1 73.4z"]},faRotateRight={prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M488 192l-144 0c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l46.7-46.7c-75.3-58.6-184.3-53.3-253.5 15.9-75 75-75 196.5 0 271.5s196.5 75 271.5 0c8.2-8.2 15.5-16.9 21.9-26.1 10.1-14.5 30.1-18 44.6-7.9s18 30.1 7.9 44.6c-8.5 12.2-18.2 23.8-29.1 34.7-100 100-262.1 100-362 0S-25 175 75 75c94.3-94.3 243.7-99.6 344.3-16.2L471 7c6.9-6.9 17.2-8.9 26.2-5.2S512 14.3 512 24l0 144c0 13.3-10.7 24-24 24z"]},fuzzysort$1={exports:{}},fuzzysort=fuzzysort$1.exports,hasRequiredFuzzysort;function requireFuzzysort(){return hasRequiredFuzzysort||(hasRequiredFuzzysort=1,(function(e){((t,r)=>{e.exports?e.exports=r():t.fuzzysort=r()})(fuzzysort,t=>{var r=(Q,ee)=>{if(!Q||!ee)return Ee;var ve=A(Q);gi(ee)||(ee=T(ee));var Ke=ve.bitflags;return(Ke&ee._bitflags)!==Ke?Ee:P(ve,ee)},n=(Q,ee,ve)=>{if(!Q)return ve?.all?L(ee,ve):Gi;var Ke=A(Q),Ve=Ke.bitflags,at=Ke.containsSpace,vr=x(ve?.threshold||0),se=ve?.limit||Ui,ae=0,Se=0,De=ee.length;function bs(ue){ae<se?(ye.add(ue),++ae):(++Se,ue._score>ye.peek()._score&&ye.replaceTop(ue))}if(ve?.key)for(var Je=ve.key,pi=0;pi<De;++pi){var Os=ee[pi],ji=hi(Os,Je);if(ji&&(gi(ji)||(ji=T(ji)),(Ve&ji._bitflags)===Ve)){var ua=P(Ke,ji);ua!==Ee&&(ua._score<vr||(ua.obj=Os,bs(ua)))}}else if(ve?.keys){var da=ve.keys,ga=da.length;e:for(var pi=0;pi<De;++pi){var Os=ee[pi];{for(var ca=0,ma=0;ma<ga;++ma){var Je=da[ma],ji=hi(Os,Je);if(!ji){Ye[ma]=ce;continue}gi(ji)||(ji=T(ji)),Ye[ma]=ji,ca|=ji._bitflags}if((Ve&ca)!==Ve)continue}if(at)for(let ka=0;ka<Ke.spaceSearches.length;ka++)ke[ka]=ws;for(var ma=0;ma<ga;++ma){if(ji=Ye[ma],ji===ce){Ar[ma]=ce;continue}if(Ar[ma]=P(Ke,ji,!1,at),Ar[ma]===Ee){Ar[ma]=ce;continue}if(at)for(let xa=0;xa<Ke.spaceSearches.length;xa++){if(Ne[xa]>-1e3&&ke[xa]>ws){var ya=(ke[xa]+Ne[xa])/4;ya>ke[xa]&&(ke[xa]=ya)}Ne[xa]>ke[xa]&&(ke[xa]=Ne[xa])}}if(at){for(let ka=0;ka<Ke.spaceSearches.length;ka++)if(ke[ka]===ws)continue e}else{var vi=!1;for(let ka=0;ka<ga;ka++)if(Ar[ka]._score!==ws){vi=!0;break}if(!vi)continue}var fa=new d(ga);for(let ka=0;ka<ga;ka++)fa[ka]=Ar[ka];if(at){var ha=0;for(let ka=0;ka<Ke.spaceSearches.length;ka++)ha+=ke[ka]}else{var ha=ws;for(let xa=0;xa<ga;xa++){var ua=fa[xa];if(ua._score>-1e3&&ha>ws){var ya=(ha+ua._score)/4;ya>ha&&(ha=ya)}ua._score>ha&&(ha=ua._score)}}if(fa.obj=Os,fa._score=ha,ve?.scoreFn){if(ha=ve.scoreFn(fa),!ha)continue;ha=x(ha),fa._score=ha}ha<vr||bs(fa)}}else for(var pi=0;pi<De;++pi){var ji=ee[pi];if(ji&&(gi(ji)||(ji=T(ji)),(Ve&ji._bitflags)===Ve)){var ua=P(Ke,ji);ua!==Ee&&(ua._score<vr||bs(ua))}}if(ae===0)return Gi;for(var $a=new Array(ae),pi=ae-1;pi>=0;--pi)$a[pi]=ye.poll();return $a.total=ae+Se,$a},i=(Q,ee="<b>",ve="</b>")=>{for(var Ke=typeof ee=="function"?ee:void 0,Ve=Q.target,at=Ve.length,vr=Q.indexes,se="",ae=0,Se=0,De=!1,bs=[],Je=0;Je<at;++Je){var pi=Ve[Je];if(vr[Se]===Je){if(++Se,De||(De=!0,Ke?(bs.push(se),se=""):se+=ee),Se===vr.length){Ke?(se+=pi,bs.push(Ke(se,ae++)),se="",bs.push(Ve.substr(Je+1))):se+=pi+ve+Ve.substr(Je+1);break}}else De&&(De=!1,Ke?(bs.push(Ke(se,ae++)),se=""):se+=ve);se+=pi}return Ke?bs:se},a=Q=>{typeof Q=="number"?Q=""+Q:typeof Q!="string"&&(Q="");var ee=D(Q);return m(Q,{_targetLower:ee._lower,_targetLowerCodes:ee.lowerCodes,_bitflags:ee.bitflags})},l=()=>{H.clear(),X.clear()};class u{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((ee,ve)=>ee-ve)}set indexes(ee){return this._indexes=ee}highlight(ee,ve){return i(this,ee,ve)}get score(){return v(this._score)}set score(ee){this._score=x(ee)}}class d extends Array{get score(){return v(this._score)}set score(ee){this._score=x(ee)}}var m=(Q,ee)=>{const ve=new u;return ve.target=Q,ve.obj=ee.obj??Ee,ve._score=ee._score??ws,ve._indexes=ee._indexes??[],ve._targetLower=ee._targetLower??"",ve._targetLowerCodes=ee._targetLowerCodes??Ee,ve._nextBeginningIndexes=ee._nextBeginningIndexes??Ee,ve._bitflags=ee._bitflags??0,ve},v=Q=>Q===ws?0:Q>1?Q:Math.E**(((-Q+1)**.04307-1)*-2),x=Q=>Q===0?ws:Q>1?Q:1-Math.pow(Math.log(Q)/-2+1,1/.04307),$=Q=>{typeof Q=="number"?Q=""+Q:typeof Q!="string"&&(Q=""),Q=Q.trim();var ee=D(Q),ve=[];if(ee.containsSpace){var Ke=Q.split(/\s+/);Ke=[...new Set(Ke)];for(var Ve=0;Ve<Ke.length;Ve++)if(Ke[Ve]!==""){var at=D(Ke[Ve]);ve.push({lowerCodes:at.lowerCodes,_lower:Ke[Ve].toLowerCase(),containsSpace:!1})}}return{lowerCodes:ee.lowerCodes,_lower:ee._lower,containsSpace:ee.containsSpace,bitflags:ee.bitflags,spaceSearches:ve}},T=Q=>{if(Q.length>999)return a(Q);var ee=H.get(Q);return ee!==void 0||(ee=a(Q),H.set(Q,ee)),ee},A=Q=>{if(Q.length>999)return $(Q);var ee=X.get(Q);return ee!==void 0||(ee=$(Q),X.set(Q,ee)),ee},L=(Q,ee)=>{var ve=[];ve.total=Q.length;var Ke=ee?.limit||Ui;if(ee?.key)for(var Ve=0;Ve<Q.length;Ve++){var at=Q[Ve],vr=hi(at,ee.key);if(vr!=Ee){gi(vr)||(vr=T(vr));var se=m(vr.target,{_score:vr._score,obj:at});if(ve.push(se),ve.length>=Ke)return ve}}else if(ee?.keys)for(var Ve=0;Ve<Q.length;Ve++){for(var at=Q[Ve],ae=new d(ee.keys.length),Se=ee.keys.length-1;Se>=0;--Se){var vr=hi(at,ee.keys[Se]);if(!vr){ae[Se]=ce;continue}gi(vr)||(vr=T(vr)),vr._score=ws,vr._indexes.len=0,ae[Se]=vr}if(ae.obj=at,ae._score=ws,ve.push(ae),ve.length>=Ke)return ve}else for(var Ve=0;Ve<Q.length;Ve++){var vr=Q[Ve];if(vr!=Ee&&(gi(vr)||(vr=T(vr)),vr._score=ws,vr._indexes.len=0,ve.push(vr),ve.length>=Ke))return ve}return ve},P=(Q,ee,ve=!1,Ke=!1)=>{if(ve===!1&&Q.containsSpace)return q(Q,ee,Ke);for(var Ve=Q._lower,at=Q.lowerCodes,vr=at[0],se=ee._targetLowerCodes,ae=at.length,Se=se.length,pi=0,De=0,bs=0;;){var Je=vr===se[De];if(Je){if(re[bs++]=De,++pi,pi===ae)break;vr=at[pi]}if(++De,De>=Se)return Ee}var pi=0,Os=!1,ji=0,ua=ee._nextBeginningIndexes;ua===Ee&&(ua=ee._nextBeginningIndexes=B(ee.target)),De=re[0]===0?0:ua[re[0]-1];var da=0;if(De!==Se)for(;;)if(De>=Se){if(pi<=0||(++da,da>200))break;--pi;var ga=pe[--ji];De=ua[ga]}else{var Je=at[pi]===se[De];if(Je){if(pe[ji++]=De,++pi,pi===ae){Os=!0;break}++De}else De=ua[De]}var ca=ae<=1?-1:ee._targetLower.indexOf(Ve,re[0]),ma=!!~ca,ya=ma?ca===0||ee._nextBeginningIndexes[ca-1]===ca:!1;if(ma&&!ya){for(var vi=0;vi<ua.length;vi=ua[vi])if(!(vi<=ca)){for(var fa=0;fa<ae&&at[fa]===ee._targetLowerCodes[vi+fa];fa++);if(fa===ae){ca=vi,ya=!0;break}}}var ha=ka=>{for(var xa=0,Th=0,eh=1;eh<ae;++eh)ka[eh]-ka[eh-1]!==1&&(xa-=ka[eh],++Th);var Oh=ka[ae-1]-ka[0]-(ae-1);if(xa-=(12+Oh)*Th,ka[0]!==0&&(xa-=ka[0]*ka[0]*.2),!Os)xa*=1e3;else{for(var uh=1,eh=ua[0];eh<Se;eh=ua[eh])++uh;uh>24&&(xa*=(uh-24)*10)}return xa-=(Se-ae)/2,ma&&(xa/=1+ae*ae*1),ya&&(xa/=1+ae*ae*1),xa-=(Se-ae)/2,xa};if(Os)if(ya){for(var vi=0;vi<ae;++vi)re[vi]=ca+vi;var $a=re,ue=ha(re)}else var $a=pe,ue=ha(pe);else{if(ma)for(var vi=0;vi<ae;++vi)re[vi]=ca+vi;var $a=re,ue=ha($a)}ee._score=ue;for(var vi=0;vi<ae;++vi)ee._indexes[vi]=$a[vi];ee._indexes.len=ae;const Ca=new u;return Ca.target=ee.target,Ca._score=ee._score,Ca._indexes=ee._indexes,Ca},q=(Q,ee,ve)=>{for(var Ke=new Set,Ve=0,at=Ee,vr=0,se=Q.spaceSearches,ae=se.length,Se=0,De=()=>{for(let ya=Se-1;ya>=0;ya--)ee._nextBeginningIndexes[$e[ya*2+0]]=$e[ya*2+1]},bs=!1,ma=0;ma<ae;++ma){Ne[ma]=ws;var Je=se[ma];if(at=P(Je,ee),ve){if(at===Ee)continue;bs=!0}else if(at===Ee)return De(),Ee;var pi=ma===ae-1;if(!pi){var Os=at._indexes,ji=!0;for(let vi=0;vi<Os.len-1;vi++)if(Os[vi+1]-Os[vi]!==1){ji=!1;break}if(ji){var ua=Os[Os.len-1]+1,da=ee._nextBeginningIndexes[ua-1];for(let vi=ua-1;vi>=0&&da===ee._nextBeginningIndexes[vi];vi--)ee._nextBeginningIndexes[vi]=ua,$e[Se*2+0]=vi,$e[Se*2+1]=da,Se++}}Ve+=at._score/ae,Ne[ma]=at._score/ae,at._indexes[0]<vr&&(Ve-=(vr-at._indexes[0])*2),vr=at._indexes[0];for(var ga=0;ga<at._indexes.len;++ga)Ke.add(at._indexes[ga])}if(ve&&!bs)return Ee;De();var ca=P(Q,ee,!0);if(ca!==Ee&&ca._score>Ve){if(ve)for(var ma=0;ma<ae;++ma)Ne[ma]=ca._score/ae;return ca}ve&&(at=ee),at._score=Ve;var ma=0;for(let ya of Ke)at._indexes[ma++]=ya;return at._indexes.len=ma,at},C=Q=>Q.replace(new RegExp("\\p{Script=Latin}+","gu"),ee=>ee.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),D=Q=>{Q=C(Q);for(var ee=Q.length,ve=Q.toLowerCase(),Ke=[],Ve=0,at=!1,vr=0;vr<ee;++vr){var se=Ke[vr]=ve.charCodeAt(vr);if(se===32){at=!0;continue}var ae=se>=97&&se<=122?se-97:se>=48&&se<=57?26:se<=127?30:31;Ve|=1<<ae}return{lowerCodes:Ke,bitflags:Ve,containsSpace:at,_lower:ve}},G=Q=>{for(var ee=Q.length,ve=[],Ke=0,Ve=!1,at=!1,vr=0;vr<ee;++vr){var se=Q.charCodeAt(vr),ae=se>=65&&se<=90,Se=ae||se>=97&&se<=122||se>=48&&se<=57,De=ae&&!Ve||!at||!Se;Ve=ae,at=Se,De&&(ve[Ke++]=vr)}return ve},B=Q=>{Q=C(Q);for(var ee=Q.length,ve=G(Q),Ke=[],Ve=ve[0],at=0,vr=0;vr<ee;++vr)Ve>vr?Ke[vr]=Ve:(Ve=ve[++at],Ke[vr]=Ve===void 0?ee:Ve);return Ke},H=new Map,X=new Map,re=[],pe=[],$e=[],ke=[],Ne=[],Ye=[],Ar=[],hi=(Q,ee)=>{var ve=Q[ee];if(ve!==void 0)return ve;if(typeof ee=="function")return ee(Q);var Ke=ee;Array.isArray(ee)||(Ke=ee.split("."));for(var Ve=Ke.length,at=-1;Q&&++at<Ve;)Q=Q[Ke[at]];return Q},gi=Q=>typeof Q=="object"&&typeof Q._bitflags=="number",Ui=1/0,ws=-Ui,Gi=[];Gi.total=0;var Ee=null,ce=a(""),Re=Q=>{var ee=[],ve=0,Ke={},Ve=at=>{for(var vr=0,se=ee[vr],ae=1;ae<ve;){var Se=ae+1;vr=ae,Se<ve&&ee[Se]._score<ee[ae]._score&&(vr=Se),ee[vr-1>>1]=ee[vr],ae=1+(vr<<1)}for(var De=vr-1>>1;vr>0&&se._score<ee[De]._score;De=(vr=De)-1>>1)ee[vr]=ee[De];ee[vr]=se};return Ke.add=(at=>{var vr=ve;ee[ve++]=at;for(var se=vr-1>>1;vr>0&&at._score<ee[se]._score;se=(vr=se)-1>>1)ee[vr]=ee[se];ee[vr]=at}),Ke.poll=(at=>{if(ve!==0){var vr=ee[0];return ee[0]=ee[--ve],Ve(),vr}}),Ke.peek=(at=>{if(ve!==0)return ee[0]}),Ke.replaceTop=(at=>{ee[0]=at,Ve()}),Ke},ye=Re();return{single:r,go:n,prepare:a,cleanup:l}})})(fuzzysort$1)),fuzzysort$1.exports}var fuzzysortExports=requireFuzzysort();const Ea=getDefaultExportFromCjs$1(fuzzysortExports);var faCloud={prefix:"far",iconName:"cloud",icon:[576,512,[9729],"f0c2","M80 192c0-88.4 71.6-160 160-160 47.1 0 89.4 20.4 118.7 52.7 10.6-3.1 21.8-4.7 33.3-4.7 66.3 0 120 53.7 120 120 0 13.2-2.1 25.9-6.1 37.8 41.6 21.1 70.1 64.3 70.1 114.2 0 70.7-57.3 128-128 128l-304 0c-79.5 0-144-64.5-144-144 0-56.8 32.9-105.9 80.7-129.4-.4-4.8-.7-9.7-.7-14.6zM240 80c-61.9 0-112 50.1-112 112 0 8.4 .9 16.6 2.7 24.5 2.7 12.1-4.3 24.3-16.1 28.1-38.7 12.4-66.6 48.7-66.6 91.4 0 53 43 96 96 96l304 0c44.2 0 80-35.8 80-80 0-37.4-25.7-68.9-60.5-77.6-7.5-1.9-13.6-7.2-16.5-14.3s-2.1-15.2 2-21.7c7-11.1 11-24.2 11-38.3 0-39.8-32.2-72-72-72-11.1 0-21.5 2.5-30.8 6.9-10.5 5-23.1 1.7-29.8-7.8-20.3-28.6-53.7-47.1-91.3-47.1z"]};function copyTextToClipboard(e,{target:t=document.body}={}){if(typeof e!="string")throw new TypeError(`Expected parameter \`text\` to be a \`string\`, got \`${typeof e}\`.`);const r=document.createElement("textarea"),n=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.all="unset",r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.width="2em",r.style.height="2em",r.style.padding="0",r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.style.fontSize="12pt",r.style.whiteSpace="pre";const i=document.getSelection(),a=i.rangeCount>0&&i.getRangeAt(0);t.append(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length;let l=!1;try{l=document.execCommand("copy")}catch{}return r.remove(),a&&(i.removeAllRanges(),i.addRange(a)),n&&n.focus(),l}var Chart$1={exports:{}};var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(e){hookCallback=e}function isArray(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function isObject(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function isObjectEmpty(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(hasOwnProp(e,t))return!1;return!0}function isUndefined(e){return e===void 0}function isNumber(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function isDate(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function map(e,t){var r=[],n,i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function extend(e,t){for(var r in t)hasOwnProp(t,r)&&(e[r]=t[r]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function createUTC(e,t,r,n){return createLocalOrUTC(e,t,r,n,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(e){return e._pf==null&&(e._pf=defaultParsingFlags()),e._pf}var some;Array.prototype.some?some=Array.prototype.some:some=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function isValid(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=getParsingFlags(e),r=some.call(t.parsedDateParts,function(i){return i!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function createInvalid(e){var t=createUTC(NaN);return e!=null?extend(getParsingFlags(t),e):getParsingFlags(t).userInvalidated=!0,t}var momentProperties=hooks.momentProperties=[],updateInProgress=!1;function copyConfig(e,t){var r,n,i,a=momentProperties.length;if(isUndefined(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),isUndefined(t._i)||(e._i=t._i),isUndefined(t._f)||(e._f=t._f),isUndefined(t._l)||(e._l=t._l),isUndefined(t._strict)||(e._strict=t._strict),isUndefined(t._tzm)||(e._tzm=t._tzm),isUndefined(t._isUTC)||(e._isUTC=t._isUTC),isUndefined(t._offset)||(e._offset=t._offset),isUndefined(t._pf)||(e._pf=getParsingFlags(t)),isUndefined(t._locale)||(e._locale=t._locale),a>0)for(r=0;r<a;r++)n=momentProperties[r],i=t[n],isUndefined(i)||(e[n]=i);return e}function Moment(e){copyConfig(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(e){return e instanceof Moment||e!=null&&e._isAMomentObject!=null}function warn(e){hooks.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var r=!0;return extend(function(){if(hooks.deprecationHandler!=null&&hooks.deprecationHandler(null,e),r){var n=[],i,a,l,u=arguments.length;for(a=0;a<u;a++){if(i="",typeof arguments[a]=="object"){i+=`
[`+a+"] ";for(l in arguments[0])hasOwnProp(arguments[0],l)&&(i+=l+": "+arguments[0][l]+", ");i=i.slice(0,-2)}else i=arguments[a];n.push(i)}warn(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var deprecations={};function deprecateSimple(e,t){hooks.deprecationHandler!=null&&hooks.deprecationHandler(e,t),deprecations[e]||(warn(t),deprecations[e]=!0)}hooks.suppressDeprecationWarnings=!1;hooks.deprecationHandler=null;function isFunction(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function set(e){var t,r;for(r in e)hasOwnProp(e,r)&&(t=e[r],isFunction(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(e,t){var r=extend({},e),n;for(n in t)hasOwnProp(t,n)&&(isObject(e[n])&&isObject(t[n])?(r[n]={},extend(r[n],e[n]),extend(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)hasOwnProp(e,n)&&!hasOwnProp(t,n)&&isObject(e[n])&&(r[n]=extend({},r[n]));return r}function Locale(e){e!=null&&this.set(e)}var keys;Object.keys?keys=Object.keys:keys=function(e){var t,r=[];for(t in e)hasOwnProp(e,t)&&r.push(t);return r};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return isFunction(n)?n.call(t,r):n}function zeroFill(e,t,r){var n=""+Math.abs(e),i=t-n.length,a=e>=0;return(a?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(e,t,r,n){var i=n;typeof n=="string"&&(i=function(){return this[n]()}),e&&(formatTokenFunctions[e]=i),t&&(formatTokenFunctions[t[0]]=function(){return zeroFill(i.apply(this,arguments),t[1],t[2])}),r&&(formatTokenFunctions[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function removeFormattingTokens(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function makeFormatFunction(e){var t=e.match(formattingTokens),r,n;for(r=0,n=t.length;r<n;r++)formatTokenFunctions[t[r]]?t[r]=formatTokenFunctions[t[r]]:t[r]=removeFormattingTokens(t[r]);return function(i){var a="",l;for(l=0;l<n;l++)a+=isFunction(t[l])?t[l].call(i,e):t[l];return a}}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),formatFunctions[t]=formatFunctions[t]||makeFormatFunction(t),formatFunctions[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){var r=5;function n(i){return t.longDateFormat(i)||i}for(localFormattingTokens.lastIndex=0;r>=0&&localFormattingTokens.test(e);)e=e.replace(localFormattingTokens,n),localFormattingTokens.lastIndex=0,r-=1;return e}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(formattingTokens).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(e){return this._ordinal.replace("%d",e)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(e,t,r,n){var i=this._relativeTime[r];return isFunction(i)?i(e,t,r,n):i.replace(/%d/i,e)}function pastFuture(e,t){var r=this._relativeTime[e>0?"future":"past"];return isFunction(r)?r(t):r.replace(/%s/i,t)}var aliases={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function normalizeUnits(e){return typeof e=="string"?aliases[e]||aliases[e.toLowerCase()]:void 0}function normalizeObjectUnits(e){var t={},r,n;for(n in e)hasOwnProp(e,n)&&(r=normalizeUnits(n),r&&(t[r]=e[n]));return t}var priorities={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function getPrioritizedUnits(e){var t=[],r;for(r in e)hasOwnProp(e,r)&&t.push({unit:r,priority:priorities[r]});return t.sort(function(n,i){return n.priority-i.priority}),t}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,match1to2NoLeadingZero=/^[1-9]\d?/,match1to2HasZero=/^([1-9]\d|\d)/,regexes;regexes={};function addRegexToken(e,t,r){regexes[e]=isFunction(t)?t:function(n,i){return n&&r?r:t}}function getParseRegexForToken(e,t){return hasOwnProp(regexes,e)?regexes[e](t._strict,t._locale):new RegExp(unescapeFormat(e))}function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,i,a){return r||n||i||a}))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function absFloor(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function toInt(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=absFloor(t)),r}var tokens={};function addParseToken(e,t){var r,n=t,i;for(typeof e=="string"&&(e=[e]),isNumber(t)&&(n=function(a,l){l[t]=toInt(a)}),i=e.length,r=0;r<i;r++)tokens[e[r]]=n}function addWeekParseToken(e,t){addParseToken(e,function(r,n,i,a){i._w=i._w||{},t(r,i._w,i,a)})}function addTimeToArrayFromToken(e,t,r){t!=null&&hasOwnProp(tokens,e)&&tokens[e](t,r._a,r,e)}function isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;addFormatToken("Y",0,0,function(){var e=this.year();return e<=9999?zeroFill(e,4):"+"+e});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,!0],0,"year");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(e,t){t[YEAR]=e.length===2?hooks.parseTwoDigitYear(e):toInt(e)});addParseToken("YY",function(e,t){t[YEAR]=hooks.parseTwoDigitYear(e)});addParseToken("Y",function(e,t){t[YEAR]=parseInt(e,10)});function daysInYear(e){return isLeapYear(e)?366:365}hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function makeGetSet(e,t){return function(r){return r!=null?(set$1(this,e,r),hooks.updateOffset(this,t),this):get(this,e)}}function get(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function set$1(e,t,r){var n,i,a,l,u;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(i?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(i?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(i?n.setUTCHours(r):n.setHours(r));case"Date":return void(i?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}a=r,l=e.month(),u=e.date(),u=u===29&&l===1&&!isLeapYear(a)?28:u,i?n.setUTCFullYear(a,l,u):n.setFullYear(a,l,u)}}function stringGet(e){return e=normalizeUnits(e),isFunction(this[e])?this[e]():this}function stringSet(e,t){if(typeof e=="object"){e=normalizeObjectUnits(e);var r=getPrioritizedUnits(e),n,i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(e=normalizeUnits(e),isFunction(this[e]))return this[e](t);return this}function mod(e,t){return(e%t+t)%t}var indexOf;Array.prototype.indexOf?indexOf=Array.prototype.indexOf:indexOf=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function daysInMonth(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=mod(t,12);return e+=(t-r)/12,r===1?isLeapYear(e)?29:28:31-r%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});addFormatToken("MMMM",0,0,function(e){return this.localeData().months(this,e)});addRegexToken("M",match1to2,match1to2NoLeadingZero);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(e,t){return t.monthsShortRegex(e)});addRegexToken("MMMM",function(e,t){return t.monthsRegex(e)});addParseToken(["M","MM"],function(e,t){t[MONTH]=toInt(e)-1});addParseToken(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);i!=null?t[MONTH]=i:getParsingFlags(r).invalidMonth=e});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(e,t){return e?isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(t)?"format":"standalone"][e.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(e,t){return e?isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(t)?"format":"standalone"][e.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(e,t,r){var n,i,a,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=createUTC([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return r?t==="MMM"?(i=indexOf.call(this._shortMonthsParse,l),i!==-1?i:null):(i=indexOf.call(this._longMonthsParse,l),i!==-1?i:null):t==="MMM"?(i=indexOf.call(this._shortMonthsParse,l),i!==-1?i:(i=indexOf.call(this._longMonthsParse,l),i!==-1?i:null)):(i=indexOf.call(this._longMonthsParse,l),i!==-1?i:(i=indexOf.call(this._shortMonthsParse,l),i!==-1?i:null))}function localeMonthsParse(e,t,r){var n,i,a;if(this._monthsParseExact)return handleStrictParse.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=createUTC([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function setMonth(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=toInt(t);else if(t=e.localeData().monthsParse(t),!isNumber(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,daysInMonth(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function getSetMonth(e){return e!=null?(setMonth(this,e),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function e(d,m){return m.length-d.length}var t=[],r=[],n=[],i,a,l,u;for(i=0;i<12;i++)a=createUTC([2e3,i]),l=regexEscape(this.monthsShort(a,"")),u=regexEscape(this.months(a,"")),t.push(l),r.push(u),n.push(u),n.push(l);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function createDate(e,t,r,n,i,a,l){var u;return e<100&&e>=0?(u=new Date(e+400,t,r,n,i,a,l),isFinite(u.getFullYear())&&u.setFullYear(e)):u=new Date(e,t,r,n,i,a,l),u}function createUTCDate(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function firstWeekOffset(e,t,r){var n=7+t-r,i=(7+createUTCDate(e,0,n).getUTCDay()-t)%7;return-i+n-1}function dayOfYearFromWeeks(e,t,r,n,i){var a=(7+r-n)%7,l=firstWeekOffset(e,n,i),u=1+7*(t-1)+a+l,d,m;return u<=0?(d=e-1,m=daysInYear(d)+u):u>daysInYear(e)?(d=e+1,m=u-daysInYear(e)):(d=e,m=u),{year:d,dayOfYear:m}}function weekOfYear(e,t,r){var n=firstWeekOffset(e.year(),t,r),i=Math.floor((e.dayOfYear()-n-1)/7)+1,a,l;return i<1?(l=e.year()-1,a=i+weeksInYear(l,t,r)):i>weeksInYear(e.year(),t,r)?(a=i-weeksInYear(e.year(),t,r),l=e.year()+1):(l=e.year(),a=i),{week:a,year:l}}function weeksInYear(e,t,r){var n=firstWeekOffset(e,t,r),i=firstWeekOffset(e+1,t,r);return(daysInYear(e)-n+i)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addRegexToken("w",match1to2,match1to2NoLeadingZero);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2,match1to2NoLeadingZero);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=toInt(e)});function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});addFormatToken("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});addFormatToken("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(e,t){return t.weekdaysMinRegex(e)});addRegexToken("ddd",function(e,t){return t.weekdaysShortRegex(e)});addRegexToken("dddd",function(e,t){return t.weekdaysRegex(e)});addWeekParseToken(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);i!=null?t.d=i:getParsingFlags(r).invalidWeekday=e});addWeekParseToken(["d","e","E"],function(e,t,r,n){t[n]=toInt(e)});function parseWeekday(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function parseIsoWeekday(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function shiftWeekdays(e,t){return e.slice(t,7).concat(e.slice(0,t))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(e,t){var r=isArray(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?shiftWeekdays(r,this._week.dow):e?r[e.day()]:r}function localeWeekdaysShort(e){return e===!0?shiftWeekdays(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function localeWeekdaysMin(e){return e===!0?shiftWeekdays(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function handleStrictParse$1(e,t,r){var n,i,a,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=createUTC([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return r?t==="dddd"?(i=indexOf.call(this._weekdaysParse,l),i!==-1?i:null):t==="ddd"?(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1?i:null):(i=indexOf.call(this._minWeekdaysParse,l),i!==-1?i:null):t==="dddd"?(i=indexOf.call(this._weekdaysParse,l),i!==-1||(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1)?i:(i=indexOf.call(this._minWeekdaysParse,l),i!==-1?i:null)):t==="ddd"?(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1||(i=indexOf.call(this._weekdaysParse,l),i!==-1)?i:(i=indexOf.call(this._minWeekdaysParse,l),i!==-1?i:null)):(i=indexOf.call(this._minWeekdaysParse,l),i!==-1||(i=indexOf.call(this._weekdaysParse,l),i!==-1)?i:(i=indexOf.call(this._shortWeekdaysParse,l),i!==-1?i:null))}function localeWeekdaysParse(e,t,r){var n,i,a;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=createUTC([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function getSetDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=get(this,"Day");return e!=null?(e=parseWeekday(e,this.localeData()),this.add(e-t,"d")):t}function getSetLocaleDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function getSetISODayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=parseIsoWeekday(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function weekdaysRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function e(v,x){return x.length-v.length}var t=[],r=[],n=[],i=[],a,l,u,d,m;for(a=0;a<7;a++)l=createUTC([2e3,1]).day(a),u=regexEscape(this.weekdaysMin(l,"")),d=regexEscape(this.weekdaysShort(l,"")),m=regexEscape(this.weekdays(l,"")),t.push(u),r.push(d),n.push(m),i.push(u),i.push(d),i.push(m);t.sort(e),r.sort(e),n.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(e,t){addFormatToken(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}meridiem("a",!0);meridiem("A",!1);function matchMeridiem(e,t){return t._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2,match1to2HasZero);addRegexToken("h",match1to2,match1to2NoLeadingZero);addRegexToken("k",match1to2,match1to2NoLeadingZero);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(e,t,r){var n=toInt(e);t[HOUR]=n===24?0:n});addParseToken(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});addParseToken(["h","hh"],function(e,t,r){t[HOUR]=toInt(e),getParsingFlags(r).bigHour=!0});addParseToken("hmm",function(e,t,r){var n=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n)),getParsingFlags(r).bigHour=!0});addParseToken("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n,2)),t[SECOND]=toInt(e.substr(i)),getParsingFlags(r).bigHour=!0});addParseToken("Hmm",function(e,t,r){var n=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n))});addParseToken("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n,2)),t[SECOND]=toInt(e.substr(i))});function localeIsPM(e){return(e+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function normalizeLocale(e){return e&&e.toLowerCase().replace("_","-")}function chooseLocale(e){for(var t=0,r,n,i,a;t<e.length;){for(a=normalizeLocale(e[t]).split("-"),r=a.length,n=normalizeLocale(e[t+1]),n=n?n.split("-"):null;r>0;){if(i=loadLocale(a.slice(0,r).join("-")),i)return i;if(n&&n.length>=r&&commonPrefix(a,n)>=r-1)break;r--}t++}return globalLocale}function isLocaleNameSane(e){return!!(e&&e.match("^[^/\\\\]*$"))}function loadLocale(e){var t=null,r;if(locales[e]===void 0&&typeof module<"u"&&module&&module.exports&&isLocaleNameSane(e))try{t=globalLocale._abbr,r=require,r("./locale/"+e),getSetGlobalLocale(t)}catch{locales[e]=null}return locales[e]}function getSetGlobalLocale(e,t){var r;return e&&(isUndefined(t)?r=getLocale(e):r=defineLocale(e,t),r?globalLocale=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(e,t){if(t!==null){var r,n=baseConfig;if(t.abbr=e,locales[e]!=null)deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=locales[e]._config;else if(t.parentLocale!=null)if(locales[t.parentLocale]!=null)n=locales[t.parentLocale]._config;else if(r=loadLocale(t.parentLocale),r!=null)n=r._config;else return localeFamilies[t.parentLocale]||(localeFamilies[t.parentLocale]=[]),localeFamilies[t.parentLocale].push({name:e,config:t}),null;return locales[e]=new Locale(mergeConfigs(n,t)),localeFamilies[e]&&localeFamilies[e].forEach(function(i){defineLocale(i.name,i.config)}),getSetGlobalLocale(e),locales[e]}else return delete locales[e],null}function updateLocale(e,t){if(t!=null){var r,n,i=baseConfig;locales[e]!=null&&locales[e].parentLocale!=null?locales[e].set(mergeConfigs(locales[e]._config,t)):(n=loadLocale(e),n!=null&&(i=n._config),t=mergeConfigs(i,t),n==null&&(t.abbr=e),r=new Locale(t),r.parentLocale=locales[e],locales[e]=r),getSetGlobalLocale(e)}else locales[e]!=null&&(locales[e].parentLocale!=null?(locales[e]=locales[e].parentLocale,e===getSetGlobalLocale()&&getSetGlobalLocale(e)):locales[e]!=null&&delete locales[e]);return locales[e]}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return globalLocale;if(!isArray(e)){if(t=loadLocale(e),t)return t;e=[e]}return chooseLocale(e)}function listLocales(){return keys(locales)}function checkOverflow(e){var t,r=e._a;return r&&getParsingFlags(e).overflow===-2&&(t=r[MONTH]<0||r[MONTH]>11?MONTH:r[DATE]<1||r[DATE]>daysInMonth(r[YEAR],r[MONTH])?DATE:r[HOUR]<0||r[HOUR]>24||r[HOUR]===24&&(r[MINUTE]!==0||r[SECOND]!==0||r[MILLISECOND]!==0)?HOUR:r[MINUTE]<0||r[MINUTE]>59?MINUTE:r[SECOND]<0||r[SECOND]>59?SECOND:r[MILLISECOND]<0||r[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(e)._overflowDayOfYear&&(t<YEAR||t>DATE)&&(t=DATE),getParsingFlags(e)._overflowWeeks&&t===-1&&(t=WEEK),getParsingFlags(e)._overflowWeekday&&t===-1&&(t=WEEKDAY),getParsingFlags(e).overflow=t),e}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function configFromISO(e){var t,r,n=e._i,i=extendedIsoRegex.exec(n)||basicIsoRegex.exec(n),a,l,u,d,m=isoDates.length,v=isoTimes.length;if(i){for(getParsingFlags(e).iso=!0,t=0,r=m;t<r;t++)if(isoDates[t][1].exec(i[1])){l=isoDates[t][0],a=isoDates[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(i[3]){for(t=0,r=v;t<r;t++)if(isoTimes[t][1].exec(i[3])){u=(i[2]||" ")+isoTimes[t][0];break}if(u==null){e._isValid=!1;return}}if(!a&&u!=null){e._isValid=!1;return}if(i[4])if(tzRegex.exec(i[4]))d="Z";else{e._isValid=!1;return}e._f=l+(u||"")+(d||""),configFromStringAndFormat(e)}else e._isValid=!1}function extractFromRFC2822Strings(e,t,r,n,i,a){var l=[untruncateYear(e),defaultLocaleMonthsShort.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return a&&l.push(parseInt(a,10)),l}function untruncateYear(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function preprocessRFC2822(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(e,t,r){if(e){var n=defaultLocaleWeekdaysShort.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(n!==i)return getParsingFlags(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function calculateOffset(e,t,r){if(e)return obsOffsets[e];if(t)return 0;var n=parseInt(r,10),i=n%100,a=(n-i)/100;return a*60+i}function configFromRFC2822(e){var t=rfc2822.exec(preprocessRFC2822(e._i)),r;if(t){if(r=extractFromRFC2822Strings(t[4],t[3],t[2],t[5],t[6],t[7]),!checkWeekday(t[1],r,e))return;e._a=r,e._tzm=calculateOffset(t[8],t[9],t[10]),e._d=createUTCDate.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),getParsingFlags(e).rfc2822=!0}else e._isValid=!1}function configFromString(e){var t=aspNetJsonRegex.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(configFromISO(e),e._isValid===!1)delete e._isValid;else return;if(configFromRFC2822(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:hooks.createFromInputFallback(e)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function defaults$1(e,t,r){return e??t??r}function currentDateArray(e){var t=new Date(hooks.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function configFromArray(e){var t,r,n=[],i,a,l;if(!e._d){for(i=currentDateArray(e),e._w&&e._a[DATE]==null&&e._a[MONTH]==null&&dayOfYearFromWeekInfo(e),e._dayOfYear!=null&&(l=defaults$1(e._a[YEAR],i[YEAR]),(e._dayOfYear>daysInYear(l)||e._dayOfYear===0)&&(getParsingFlags(e)._overflowDayOfYear=!0),r=createUTCDate(l,0,e._dayOfYear),e._a[MONTH]=r.getUTCMonth(),e._a[DATE]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=i[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[HOUR]===24&&e._a[MINUTE]===0&&e._a[SECOND]===0&&e._a[MILLISECOND]===0&&(e._nextDay=!0,e._a[HOUR]=0),e._d=(e._useUTC?createUTCDate:createDate).apply(null,n),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[HOUR]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==a&&(getParsingFlags(e).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(e){var t,r,n,i,a,l,u,d,m;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(a=1,l=4,r=defaults$1(t.GG,e._a[YEAR],weekOfYear(createLocal(),1,4).year),n=defaults$1(t.W,1),i=defaults$1(t.E,1),(i<1||i>7)&&(d=!0)):(a=e._locale._week.dow,l=e._locale._week.doy,m=weekOfYear(createLocal(),a,l),r=defaults$1(t.gg,e._a[YEAR],m.year),n=defaults$1(t.w,m.week),t.d!=null?(i=t.d,(i<0||i>6)&&(d=!0)):t.e!=null?(i=t.e+a,(t.e<0||t.e>6)&&(d=!0)):i=a),n<1||n>weeksInYear(r,a,l)?getParsingFlags(e)._overflowWeeks=!0:d!=null?getParsingFlags(e)._overflowWeekday=!0:(u=dayOfYearFromWeeks(r,n,i,a,l),e._a[YEAR]=u.year,e._dayOfYear=u.dayOfYear)}hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(e){if(e._f===hooks.ISO_8601){configFromISO(e);return}if(e._f===hooks.RFC_2822){configFromRFC2822(e);return}e._a=[],getParsingFlags(e).empty=!0;var t=""+e._i,r,n,i,a,l,u=t.length,d=0,m,v;for(i=expandFormat(e._f,e._locale).match(formattingTokens)||[],v=i.length,r=0;r<v;r++)a=i[r],n=(t.match(getParseRegexForToken(a,e))||[])[0],n&&(l=t.substr(0,t.indexOf(n)),l.length>0&&getParsingFlags(e).unusedInput.push(l),t=t.slice(t.indexOf(n)+n.length),d+=n.length),formatTokenFunctions[a]?(n?getParsingFlags(e).empty=!1:getParsingFlags(e).unusedTokens.push(a),addTimeToArrayFromToken(a,n,e)):e._strict&&!n&&getParsingFlags(e).unusedTokens.push(a);getParsingFlags(e).charsLeftOver=u-d,t.length>0&&getParsingFlags(e).unusedInput.push(t),e._a[HOUR]<=12&&getParsingFlags(e).bigHour===!0&&e._a[HOUR]>0&&(getParsingFlags(e).bigHour=void 0),getParsingFlags(e).parsedDateParts=e._a.slice(0),getParsingFlags(e).meridiem=e._meridiem,e._a[HOUR]=meridiemFixWrap(e._locale,e._a[HOUR],e._meridiem),m=getParsingFlags(e).era,m!==null&&(e._a[YEAR]=e._locale.erasConvertYear(m,e._a[YEAR])),configFromArray(e),checkOverflow(e)}function meridiemFixWrap(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function configFromStringAndArray(e){var t,r,n,i,a,l,u=!1,d=e._f.length;if(d===0){getParsingFlags(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<d;i++)a=0,l=!1,t=copyConfig({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],configFromStringAndFormat(t),isValid(t)&&(l=!0),a+=getParsingFlags(t).charsLeftOver,a+=getParsingFlags(t).unusedTokens.length*10,getParsingFlags(t).score=a,u?a<n&&(n=a,r=t):(n==null||a<n||l)&&(n=a,r=t,l&&(u=!0));extend(e,r||t)}function configFromObject(e){if(!e._d){var t=normalizeObjectUnits(e._i),r=t.day===void 0?t.date:t.day;e._a=map([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),configFromArray(e)}}function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function prepareConfig(e){var t=e._i,r=e._f;return e._locale=e._locale||getLocale(e._l),t===null||r===void 0&&t===""?createInvalid({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),isMoment(t)?new Moment(checkOverflow(t)):(isDate(t)?e._d=t:isArray(r)?configFromStringAndArray(e):r?configFromStringAndFormat(e):configFromInput(e),isValid(e)||(e._d=null),e))}function configFromInput(e){var t=e._i;isUndefined(t)?e._d=new Date(hooks.now()):isDate(t)?e._d=new Date(t.valueOf()):typeof t=="string"?configFromString(e):isArray(t)?(e._a=map(t.slice(0),function(r){return parseInt(r,10)}),configFromArray(e)):isObject(t)?configFromObject(e):isNumber(t)?e._d=new Date(t):hooks.createFromInputFallback(e)}function createLocalOrUTC(e,t,r,n,i){var a={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(isObject(e)&&isObjectEmpty(e)||isArray(e)&&e.length===0)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=r,a._i=e,a._f=t,a._strict=n,createFromConfig(a)}function createLocal(e,t,r,n){return createLocalOrUTC(e,t,r,n,!1)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:createInvalid()});function pickBy(e,t){var r,n;if(t.length===1&&isArray(t[0])&&(t=t[0]),!t.length)return createLocal();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function min(){var e=[].slice.call(arguments,0);return pickBy("isBefore",e)}function max(){var e=[].slice.call(arguments,0);return pickBy("isAfter",e)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(e){var t,r=!1,n,i=ordering.length;for(t in e)if(hasOwnProp(e,t)&&!(indexOf.call(ordering,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<i;++n)if(e[ordering[n]]){if(r)return!1;parseFloat(e[ordering[n]])!==toInt(e[ordering[n]])&&(r=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(e){var t=normalizeObjectUnits(e),r=t.year||0,n=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,l=t.day||0,u=t.hour||0,d=t.minute||0,m=t.second||0,v=t.millisecond||0;this._isValid=isDurationValid(t),this._milliseconds=+v+m*1e3+d*6e4+u*1e3*60*60,this._days=+l+a*7,this._months=+i+n*3+r*12,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function compareArrays(e,t,r){var n=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0,l;for(l=0;l<n;l++)toInt(e[l])!==toInt(t[l])&&a++;return a+i}function offset(e,t){addFormatToken(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+zeroFill(~~(r/60),2)+t+zeroFill(~~r%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=offsetFromString(matchShortOffset,e)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var r=(t||"").match(e),n,i,a;return r===null?null:(n=r[r.length-1]||[],i=(n+"").match(chunkOffset)||["-",0,0],a=+(i[1]*60)+toInt(i[2]),a===0?0:i[0]==="+"?a:-a)}function cloneWithOffset(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),hooks.updateOffset(r,!1),r):createLocal(e).local()}function getDateOffset(e){return-Math.round(e._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(e,t,r){var n=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=offsetFromString(matchShortOffset,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(i=getDateOffset(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?addSubtract(this,createDuration(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:getDateOffset(this)}function getSetZone(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function setOffsetToUTC(e){return this.utcOffset(0,e)}function setOffsetToLocal(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=offsetFromString(matchOffset,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(e){return this.isValid()?(e=e?createLocal(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var e={},t;return copyConfig(e,this),e=prepareConfig(e),e._a?(t=e._isUTC?createUTC(e._a):createLocal(e._a),this._isDSTShifted=this.isValid()&&compareArrays(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var r=e,n=null,i,a,l;return isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:isNumber(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=aspNetRegex.exec(e))?(i=n[1]==="-"?-1:1,r={y:0,d:toInt(n[DATE])*i,h:toInt(n[HOUR])*i,m:toInt(n[MINUTE])*i,s:toInt(n[SECOND])*i,ms:toInt(absRound(n[MILLISECOND]*1e3))*i}):(n=isoRegex.exec(e))?(i=n[1]==="-"?-1:1,r={y:parseIso(n[2],i),M:parseIso(n[3],i),w:parseIso(n[4],i),d:parseIso(n[5],i),h:parseIso(n[6],i),m:parseIso(n[7],i),s:parseIso(n[8],i)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(l=momentsDifference(createLocal(r.from),createLocal(r.to)),r={},r.ms=l.milliseconds,r.M=l.months),a=new Duration(r),isDuration(e)&&hasOwnProp(e,"_locale")&&(a._locale=e._locale),isDuration(e)&&hasOwnProp(e,"_isValid")&&(a._isValid=e._isValid),a}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function positiveMomentsDifference(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function momentsDifference(e,t){var r;return e.isValid()&&t.isValid()?(t=cloneWithOffset(t,e),e.isBefore(t)?r=positiveMomentsDifference(e,t):(r=positiveMomentsDifference(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function createAdder(e,t){return function(r,n){var i,a;return n!==null&&!isNaN(+n)&&(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=r,r=n,n=a),i=createDuration(r,n),addSubtract(this,i,e),this}}function addSubtract(e,t,r,n){var i=t._milliseconds,a=absRound(t._days),l=absRound(t._months);e.isValid()&&(n=n??!0,l&&setMonth(e,get(e,"Month")+l*r),a&&set$1(e,"Date",get(e,"Date")+a*r),i&&e._d.setTime(e._d.valueOf()+i*r),n&&hooks.updateOffset(e,a||l))}var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(e){return typeof e=="string"||e instanceof String}function isMomentInput(e){return isMoment(e)||isDate(e)||isString(e)||isNumber(e)||isNumberOrStringArray(e)||isMomentInputObject(e)||e===null||e===void 0}function isMomentInputObject(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,a,l=n.length;for(i=0;i<l;i+=1)a=n[i],r=r||hasOwnProp(e,a);return t&&r}function isNumberOrStringArray(e){var t=isArray(e),r=!1;return t&&(r=e.filter(function(n){return!isNumber(n)&&isString(e)}).length===0),t&&r}function isCalendarSpec(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,a;for(i=0;i<n.length;i+=1)a=n[i],r=r||hasOwnProp(e,a);return t&&r}function getCalendarFormat(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function calendar$1(e,t){arguments.length===1&&(arguments[0]?isMomentInput(arguments[0])?(e=arguments[0],t=void 0):isCalendarSpec(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||createLocal(),n=cloneWithOffset(r,this).startOf("day"),i=hooks.calendarFormat(this,n)||"sameElse",a=t&&(isFunction(t[i])?t[i].call(this,r):t[i]);return this.format(a||this.localeData().calendar(i,this,createLocal(r)))}function clone(){return new Moment(this)}function isAfter(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function isBefore(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function isBetween(e,t,r,n){var i=isMoment(e)?e:createLocal(e),a=isMoment(t)?t:createLocal(t);return this.isValid()&&i.isValid()&&a.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(i,r):!this.isBefore(i,r))&&(n[1]===")"?this.isBefore(a,r):!this.isAfter(a,r))):!1}function isSame(e,t){var r=isMoment(e)?e:createLocal(e),n;return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function diff(e,t,r){var n,i,a;if(!this.isValid())return NaN;if(n=cloneWithOffset(e,this),!n.isValid())return NaN;switch(i=(n.utcOffset()-this.utcOffset())*6e4,t=normalizeUnits(t),t){case"year":a=monthDiff(this,n)/12;break;case"month":a=monthDiff(this,n);break;case"quarter":a=monthDiff(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-i)/864e5;break;case"week":a=(this-n-i)/6048e5;break;default:a=this-n}return r?a:absFloor(a)}function monthDiff(e,t){if(e.date()<t.date())return-monthDiff(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),i,a;return t-n<0?(i=e.clone().add(r-1,"months"),a=(t-n)/(n-i)):(i=e.clone().add(r+1,"months"),a=(t-n)/(i-n)),-(r+a)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?formatMoment(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(r,"Z")):formatMoment(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,i,a;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",a=t+'[")]',this.format(r+n+i+a)}function format$2(e){e||(e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var t=formatMoment(this,e);return this.localeData().postformat(t)}function from(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fromNow(e){return this.from(createLocal(),e)}function to$1(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function toNow(e){return this.to(createLocal(),e)}function locale(e){var t;return e===void 0?this._locale._abbr:(t=getLocale(e),t!=null&&(this._locale=t),this)}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(e,t){return(e%t+t)%t}function localStartOfDate(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-MS_PER_400_YEARS:new Date(e,t,r).valueOf()}function utcStartOfDate(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-MS_PER_400_YEARS:Date.UTC(e,t,r)}function startOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":t=this._d.valueOf(),t-=mod$1(t,MS_PER_MINUTE);break;case"second":t=this._d.valueOf(),t-=mod$1(t,MS_PER_SECOND);break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function endOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=MS_PER_HOUR-mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":t=this._d.valueOf(),t+=MS_PER_MINUTE-mod$1(t,MS_PER_MINUTE)-1;break;case"second":t=this._d.valueOf(),t+=MS_PER_SECOND-mod$1(t,MS_PER_SECOND)-1;break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var i=r._locale.erasParse(e,n,r._strict);i?getParsingFlags(r).era=i:getParsingFlags(r).invalidEra=e});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(e,t,r,n){var i;r._locale._eraYearOrdinalRegex&&(i=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[YEAR]=r._locale.eraYearOrdinalParse(e,i):t[YEAR]=parseInt(e,10)});function localeEras(e,t){var r,n,i,a=this._eras||getLocale("en")._eras;for(r=0,n=a.length;r<n;++r){switch(typeof a[r].since){case"string":i=hooks(a[r].since).startOf("day"),a[r].since=i.valueOf();break}switch(typeof a[r].until){case"undefined":a[r].until=1/0;break;case"string":i=hooks(a[r].until).startOf("day").valueOf(),a[r].until=i.valueOf();break}}return a}function localeErasParse(e,t,r){var n,i,a=this.eras(),l,u,d;for(e=e.toUpperCase(),n=0,i=a.length;n<i;++n)if(l=a[n].name.toUpperCase(),u=a[n].abbr.toUpperCase(),d=a[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(u===e)return a[n];break;case"NNNN":if(l===e)return a[n];break;case"NNNNN":if(d===e)return a[n];break}else if([l,u,d].indexOf(e)>=0)return a[n]}function localeErasConvertYear(e,t){var r=e.since<=e.until?1:-1;return t===void 0?hooks(e.since).year():hooks(e.since).year()+(t-e.offset)*r}function getEraName(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function getEraNarrow(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function getEraAbbr(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function getEraYear(){var e,t,r,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=i[e].since<=i[e].until?1:-1,n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return(this.year()-hooks(i[e].since).year())*r+i[e].offset;return this.year()}function erasNameRegex(e){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),e?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(e){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),e?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(e){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),e?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(e,t){return t.erasAbbrRegex(e)}function matchEraName(e,t){return t.erasNameRegex(e)}function matchEraNarrow(e,t){return t.erasNarrowRegex(e)}function matchEraYearOrdinal(e,t){return t._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var e=[],t=[],r=[],n=[],i,a,l,u,d,m=this.eras();for(i=0,a=m.length;i<a;++i)l=regexEscape(m[i].name),u=regexEscape(m[i].abbr),d=regexEscape(m[i].narrow),t.push(l),e.push(u),r.push(d),n.push(l),n.push(u),n.push(d);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=toInt(e)});addWeekParseToken(["gg","GG"],function(e,t,r,n){t[n]=hooks.parseTwoDigitYear(e)});function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)}function getWeeksInWeekYear(){var e=this.localeData()._week;return weeksInYear(this.weekYear(),e.dow,e.doy)}function getSetWeekYearHelper(e,t,r,n,i){var a;return e==null?weekOfYear(this,n,i).year:(a=weeksInYear(e,n,i),t>a&&(t=a),setWeekAll.call(this,e,t,r,n,i))}function setWeekAll(e,t,r,n,i){var a=dayOfYearFromWeeks(e,t,r,n,i),l=createUTCDate(a.year,0,a.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}addFormatToken("Q",0,"Qo","quarter");addRegexToken("Q",match1);addParseToken("Q",function(e,t){t[MONTH]=(toInt(e)-1)*3});function getSetQuarter(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addRegexToken("D",match1to2,match1to2NoLeadingZero);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(e,t){t[DATE]=toInt(e.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(e,t,r){r._dayOfYear=toInt(e)});function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}addFormatToken("m",["mm",2],0,"minute");addRegexToken("m",match1to2,match1to2HasZero);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second");addRegexToken("s",match1to2,match1to2HasZero);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(e,t){t[MILLISECOND]=toInt(("0."+e)*1e3)}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format$2;proto.from=from;proto.fromNow=fromNow;proto.to=to$1;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;typeof Symbol<"u"&&Symbol.for!=null&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(e){return createLocal(e*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(e){return e}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(e,t,r,n){var i=getLocale(),a=createUTC().set(n,t);return i[r](a,e)}function listMonthsImpl(e,t,r){if(isNumber(e)&&(t=e,e=void 0),e=e||"",t!=null)return get$1(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=get$1(e,n,r,"month");return i}function listWeekdaysImpl(e,t,r,n){typeof e=="boolean"?(isNumber(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,isNumber(t)&&(r=t,t=void 0),t=t||"");var i=getLocale(),a=e?i._week.dow:0,l,u=[];if(r!=null)return get$1(t,(r+a)%7,n,"day");for(l=0;l<7;l++)u[l]=get$1(t,(l+a)%7,n,"day");return u}function listMonths(e,t){return listMonthsImpl(e,t,"months")}function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")}function listWeekdays(e,t,r){return listWeekdaysImpl(e,t,r,"weekdays")}function listWeekdaysShort(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysShort")}function listWeekdaysMin(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=toInt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var e=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),e.milliseconds=mathAbs(e.milliseconds),e.seconds=mathAbs(e.seconds),e.minutes=mathAbs(e.minutes),e.hours=mathAbs(e.hours),e.months=mathAbs(e.months),e.years=mathAbs(e.years),this}function addSubtract$1(e,t,r,n){var i=createDuration(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function add$1(e,t){return addSubtract$1(this,e,t,1)}function subtract$1(e,t){return addSubtract$1(this,e,t,-1)}function absCeil(e){return e<0?Math.floor(e):Math.ceil(e)}function bubble(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,i,a,l,u,d;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=absCeil(monthsToDays(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,i=absFloor(e/1e3),n.seconds=i%60,a=absFloor(i/60),n.minutes=a%60,l=absFloor(a/60),n.hours=l%24,t+=absFloor(l/24),d=absFloor(daysToMonths(t)),r+=d,t-=absCeil(monthsToDays(d)),u=absFloor(r/12),r%=12,n.days=t,n.months=r,n.years=u,this}function daysToMonths(e){return e*4800/146097}function monthsToDays(e){return e*146097/4800}function as$1(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=normalizeUnits(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+daysToMonths(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(monthsToDays(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function makeAs(e){return function(){return this.as(e)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y"),valueOf$1=asMilliseconds;function clone$1(){return createDuration(this)}function get$2(e){return e=normalizeUnits(e),this.isValid()?this[e+"s"]():NaN}function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function relativeTime$1(e,t,r,n){var i=createDuration(e).abs(),a=round(i.as("s")),l=round(i.as("m")),u=round(i.as("h")),d=round(i.as("d")),m=round(i.as("M")),v=round(i.as("w")),x=round(i.as("y")),$=a<=r.ss&&["s",a]||a<r.s&&["ss",a]||l<=1&&["m"]||l<r.m&&["mm",l]||u<=1&&["h"]||u<r.h&&["hh",u]||d<=1&&["d"]||d<r.d&&["dd",d];return r.w!=null&&($=$||v<=1&&["w"]||v<r.w&&["ww",v]),$=$||m<=1&&["M"]||m<r.M&&["MM",m]||x<=1&&["y"]||["yy",x],$[2]=t,$[3]=+e>0,$[4]=n,substituteTimeAgo.apply(null,$)}function getSetRelativeTimeRounding(e){return e===void 0?round:typeof e=="function"?(round=e,!0):!1}function getSetRelativeTimeThreshold(e,t){return thresholds[e]===void 0?!1:t===void 0?thresholds[e]:(thresholds[e]=t,e==="s"&&(thresholds.ss=t-1),!0)}function humanize(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=thresholds,i,a;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},thresholds,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),i=this.localeData(),a=relativeTime$1(this,!r,n,i),r&&(a=i.pastFuture(+this,a)),i.postformat(a)}var abs$1=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var e=abs$1(this._milliseconds)/1e3,t=abs$1(this._days),r=abs$1(this._months),n,i,a,l,u=this.asSeconds(),d,m,v,x;return u?(n=absFloor(e/60),i=absFloor(n/60),e%=60,n%=60,a=absFloor(r/12),r%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",d=u<0?"-":"",m=sign(this._months)!==sign(u)?"-":"",v=sign(this._days)!==sign(u)?"-":"",x=sign(this._milliseconds)!==sign(u)?"-":"",d+"P"+(a?m+a+"Y":"")+(r?m+r+"M":"")+(t?v+t+"D":"")+(i||n||e?"T":"")+(i?x+i+"H":"")+(n?x+n+"M":"")+(e?x+l+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as$1;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});addParseToken("x",function(e,t,r){r._d=new Date(toInt(e))});hooks.version="2.30.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const moment=Object.freeze(Object.defineProperty({__proto__:null,default:hooks},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(moment);var Chart=Chart$1.exports,hasRequiredChart;function requireChart(){return hasRequiredChart||(hasRequiredChart=1,(function(e,t){(function(r,n){e.exports=n((function(){try{return require$$0}catch{}})())})(Chart,(function(r){r=r&&r.hasOwnProperty("default")?r.default:r;function n(s,o){return o={exports:{}},s(o,o.exports),o.exports}function i(s){return s&&s.default||s}var a={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},l=n(function(s){var o={};for(var c in a)a.hasOwnProperty(c)&&(o[a[c]]=c);var p=s.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var g in p)if(p.hasOwnProperty(g)){if(!("channels"in p[g]))throw new Error("missing channels property: "+g);if(!("labels"in p[g]))throw new Error("missing channel labels property: "+g);if(p[g].labels.length!==p[g].channels)throw new Error("channel and label counts mismatch: "+g);var F=p[g].channels,K=p[g].labels;delete p[g].channels,delete p[g].labels,Object.defineProperty(p[g],"channels",{value:F}),Object.defineProperty(p[g],"labels",{value:K})}p.rgb.hsl=function(J){var te=J[0]/255,ne=J[1]/255,ie=J[2]/255,be=Math.min(te,ne,ie),Ie=Math.max(te,ne,ie),qe=Ie-be,We,bt,mi;return Ie===be?We=0:te===Ie?We=(ne-ie)/qe:ne===Ie?We=2+(ie-te)/qe:ie===Ie&&(We=4+(te-ne)/qe),We=Math.min(We*60,360),We<0&&(We+=360),mi=(be+Ie)/2,Ie===be?bt=0:mi<=.5?bt=qe/(Ie+be):bt=qe/(2-Ie-be),[We,bt*100,mi*100]},p.rgb.hsv=function(J){var te,ne,ie,be,Ie,qe=J[0]/255,We=J[1]/255,bt=J[2]/255,mi=Math.max(qe,We,bt),pa=mi-Math.min(qe,We,bt),va=function(_a){return(mi-_a)/6/pa+1/2};return pa===0?be=Ie=0:(Ie=pa/mi,te=va(qe),ne=va(We),ie=va(bt),qe===mi?be=ie-ne:We===mi?be=1/3+te-ie:bt===mi&&(be=2/3+ne-te),be<0?be+=1:be>1&&(be-=1)),[be*360,Ie*100,mi*100]},p.rgb.hwb=function(J){var te=J[0],ne=J[1],ie=J[2],be=p.rgb.hsl(J)[0],Ie=1/255*Math.min(te,Math.min(ne,ie));return ie=1-1/255*Math.max(te,Math.max(ne,ie)),[be,Ie*100,ie*100]},p.rgb.cmyk=function(J){var te=J[0]/255,ne=J[1]/255,ie=J[2]/255,be,Ie,qe,We;return We=Math.min(1-te,1-ne,1-ie),be=(1-te-We)/(1-We)||0,Ie=(1-ne-We)/(1-We)||0,qe=(1-ie-We)/(1-We)||0,[be*100,Ie*100,qe*100,We*100]};function Z(J,te){return Math.pow(J[0]-te[0],2)+Math.pow(J[1]-te[1],2)+Math.pow(J[2]-te[2],2)}p.rgb.keyword=function(J){var te=o[J];if(te)return te;var ne=1/0,ie;for(var be in a)if(a.hasOwnProperty(be)){var Ie=a[be],qe=Z(J,Ie);qe<ne&&(ne=qe,ie=be)}return ie},p.keyword.rgb=function(J){return a[J]},p.rgb.xyz=function(J){var te=J[0]/255,ne=J[1]/255,ie=J[2]/255;te=te>.04045?Math.pow((te+.055)/1.055,2.4):te/12.92,ne=ne>.04045?Math.pow((ne+.055)/1.055,2.4):ne/12.92,ie=ie>.04045?Math.pow((ie+.055)/1.055,2.4):ie/12.92;var be=te*.4124+ne*.3576+ie*.1805,Ie=te*.2126+ne*.7152+ie*.0722,qe=te*.0193+ne*.1192+ie*.9505;return[be*100,Ie*100,qe*100]},p.rgb.lab=function(J){var te=p.rgb.xyz(J),ne=te[0],ie=te[1],be=te[2],Ie,qe,We;return ne/=95.047,ie/=100,be/=108.883,ne=ne>.008856?Math.pow(ne,1/3):7.787*ne+16/116,ie=ie>.008856?Math.pow(ie,1/3):7.787*ie+16/116,be=be>.008856?Math.pow(be,1/3):7.787*be+16/116,Ie=116*ie-16,qe=500*(ne-ie),We=200*(ie-be),[Ie,qe,We]},p.hsl.rgb=function(J){var te=J[0]/360,ne=J[1]/100,ie=J[2]/100,be,Ie,qe,We,bt;if(ne===0)return bt=ie*255,[bt,bt,bt];ie<.5?Ie=ie*(1+ne):Ie=ie+ne-ie*ne,be=2*ie-Ie,We=[0,0,0];for(var mi=0;mi<3;mi++)qe=te+1/3*-(mi-1),qe<0&&qe++,qe>1&&qe--,6*qe<1?bt=be+(Ie-be)*6*qe:2*qe<1?bt=Ie:3*qe<2?bt=be+(Ie-be)*(2/3-qe)*6:bt=be,We[mi]=bt*255;return We},p.hsl.hsv=function(J){var te=J[0],ne=J[1]/100,ie=J[2]/100,be=ne,Ie=Math.max(ie,.01),qe,We;return ie*=2,ne*=ie<=1?ie:2-ie,be*=Ie<=1?Ie:2-Ie,We=(ie+ne)/2,qe=ie===0?2*be/(Ie+be):2*ne/(ie+ne),[te,qe*100,We*100]},p.hsv.rgb=function(J){var te=J[0]/60,ne=J[1]/100,ie=J[2]/100,be=Math.floor(te)%6,Ie=te-Math.floor(te),qe=255*ie*(1-ne),We=255*ie*(1-ne*Ie),bt=255*ie*(1-ne*(1-Ie));switch(ie*=255,be){case 0:return[ie,bt,qe];case 1:return[We,ie,qe];case 2:return[qe,ie,bt];case 3:return[qe,We,ie];case 4:return[bt,qe,ie];case 5:return[ie,qe,We]}},p.hsv.hsl=function(J){var te=J[0],ne=J[1]/100,ie=J[2]/100,be=Math.max(ie,.01),Ie,qe,We;return We=(2-ne)*ie,Ie=(2-ne)*be,qe=ne*be,qe/=Ie<=1?Ie:2-Ie,qe=qe||0,We/=2,[te,qe*100,We*100]},p.hwb.rgb=function(J){var te=J[0]/360,ne=J[1]/100,ie=J[2]/100,be=ne+ie,Ie,qe,We,bt;be>1&&(ne/=be,ie/=be),Ie=Math.floor(6*te),qe=1-ie,We=6*te-Ie,(Ie&1)!==0&&(We=1-We),bt=ne+We*(qe-ne);var mi,pa,va;switch(Ie){default:case 6:case 0:mi=qe,pa=bt,va=ne;break;case 1:mi=bt,pa=qe,va=ne;break;case 2:mi=ne,pa=qe,va=bt;break;case 3:mi=ne,pa=bt,va=qe;break;case 4:mi=bt,pa=ne,va=qe;break;case 5:mi=qe,pa=ne,va=bt;break}return[mi*255,pa*255,va*255]},p.cmyk.rgb=function(J){var te=J[0]/100,ne=J[1]/100,ie=J[2]/100,be=J[3]/100,Ie,qe,We;return Ie=1-Math.min(1,te*(1-be)+be),qe=1-Math.min(1,ne*(1-be)+be),We=1-Math.min(1,ie*(1-be)+be),[Ie*255,qe*255,We*255]},p.xyz.rgb=function(J){var te=J[0]/100,ne=J[1]/100,ie=J[2]/100,be,Ie,qe;return be=te*3.2406+ne*-1.5372+ie*-.4986,Ie=te*-.9689+ne*1.8758+ie*.0415,qe=te*.0557+ne*-.204+ie*1.057,be=be>.0031308?1.055*Math.pow(be,1/2.4)-.055:be*12.92,Ie=Ie>.0031308?1.055*Math.pow(Ie,1/2.4)-.055:Ie*12.92,qe=qe>.0031308?1.055*Math.pow(qe,1/2.4)-.055:qe*12.92,be=Math.min(Math.max(0,be),1),Ie=Math.min(Math.max(0,Ie),1),qe=Math.min(Math.max(0,qe),1),[be*255,Ie*255,qe*255]},p.xyz.lab=function(J){var te=J[0],ne=J[1],ie=J[2],be,Ie,qe;return te/=95.047,ne/=100,ie/=108.883,te=te>.008856?Math.pow(te,1/3):7.787*te+16/116,ne=ne>.008856?Math.pow(ne,1/3):7.787*ne+16/116,ie=ie>.008856?Math.pow(ie,1/3):7.787*ie+16/116,be=116*ne-16,Ie=500*(te-ne),qe=200*(ne-ie),[be,Ie,qe]},p.lab.xyz=function(J){var te=J[0],ne=J[1],ie=J[2],be,Ie,qe;Ie=(te+16)/116,be=ne/500+Ie,qe=Ie-ie/200;var We=Math.pow(Ie,3),bt=Math.pow(be,3),mi=Math.pow(qe,3);return Ie=We>.008856?We:(Ie-16/116)/7.787,be=bt>.008856?bt:(be-16/116)/7.787,qe=mi>.008856?mi:(qe-16/116)/7.787,be*=95.047,Ie*=100,qe*=108.883,[be,Ie,qe]},p.lab.lch=function(J){var te=J[0],ne=J[1],ie=J[2],be,Ie,qe;return be=Math.atan2(ie,ne),Ie=be*360/2/Math.PI,Ie<0&&(Ie+=360),qe=Math.sqrt(ne*ne+ie*ie),[te,qe,Ie]},p.lch.lab=function(J){var te=J[0],ne=J[1],ie=J[2],be,Ie,qe;return qe=ie/360*2*Math.PI,be=ne*Math.cos(qe),Ie=ne*Math.sin(qe),[te,be,Ie]},p.rgb.ansi16=function(J){var te=J[0],ne=J[1],ie=J[2],be=1 in arguments?arguments[1]:p.rgb.hsv(J)[2];if(be=Math.round(be/50),be===0)return 30;var Ie=30+(Math.round(ie/255)<<2|Math.round(ne/255)<<1|Math.round(te/255));return be===2&&(Ie+=60),Ie},p.hsv.ansi16=function(J){return p.rgb.ansi16(p.hsv.rgb(J),J[2])},p.rgb.ansi256=function(J){var te=J[0],ne=J[1],ie=J[2];if(te===ne&&ne===ie)return te<8?16:te>248?231:Math.round((te-8)/247*24)+232;var be=16+36*Math.round(te/255*5)+6*Math.round(ne/255*5)+Math.round(ie/255*5);return be},p.ansi16.rgb=function(J){var te=J%10;if(te===0||te===7)return J>50&&(te+=3.5),te=te/10.5*255,[te,te,te];var ne=(~~(J>50)+1)*.5,ie=(te&1)*ne*255,be=(te>>1&1)*ne*255,Ie=(te>>2&1)*ne*255;return[ie,be,Ie]},p.ansi256.rgb=function(J){if(J>=232){var te=(J-232)*10+8;return[te,te,te]}J-=16;var ne,ie=Math.floor(J/36)/5*255,be=Math.floor((ne=J%36)/6)/5*255,Ie=ne%6/5*255;return[ie,be,Ie]},p.rgb.hex=function(J){var te=((Math.round(J[0])&255)<<16)+((Math.round(J[1])&255)<<8)+(Math.round(J[2])&255),ne=te.toString(16).toUpperCase();return"000000".substring(ne.length)+ne},p.hex.rgb=function(J){var te=J.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!te)return[0,0,0];var ne=te[0];te[0].length===3&&(ne=ne.split("").map(function(We){return We+We}).join(""));var ie=parseInt(ne,16),be=ie>>16&255,Ie=ie>>8&255,qe=ie&255;return[be,Ie,qe]},p.rgb.hcg=function(J){var te=J[0]/255,ne=J[1]/255,ie=J[2]/255,be=Math.max(Math.max(te,ne),ie),Ie=Math.min(Math.min(te,ne),ie),qe=be-Ie,We,bt;return qe<1?We=Ie/(1-qe):We=0,qe<=0?bt=0:be===te?bt=(ne-ie)/qe%6:be===ne?bt=2+(ie-te)/qe:bt=4+(te-ne)/qe+4,bt/=6,bt%=1,[bt*360,qe*100,We*100]},p.hsl.hcg=function(J){var te=J[1]/100,ne=J[2]/100,ie=1,be=0;return ne<.5?ie=2*te*ne:ie=2*te*(1-ne),ie<1&&(be=(ne-.5*ie)/(1-ie)),[J[0],ie*100,be*100]},p.hsv.hcg=function(J){var te=J[1]/100,ne=J[2]/100,ie=te*ne,be=0;return ie<1&&(be=(ne-ie)/(1-ie)),[J[0],ie*100,be*100]},p.hcg.rgb=function(J){var te=J[0]/360,ne=J[1]/100,ie=J[2]/100;if(ne===0)return[ie*255,ie*255,ie*255];var be=[0,0,0],Ie=te%1*6,qe=Ie%1,We=1-qe,bt=0;switch(Math.floor(Ie)){case 0:be[0]=1,be[1]=qe,be[2]=0;break;case 1:be[0]=We,be[1]=1,be[2]=0;break;case 2:be[0]=0,be[1]=1,be[2]=qe;break;case 3:be[0]=0,be[1]=We,be[2]=1;break;case 4:be[0]=qe,be[1]=0,be[2]=1;break;default:be[0]=1,be[1]=0,be[2]=We}return bt=(1-ne)*ie,[(ne*be[0]+bt)*255,(ne*be[1]+bt)*255,(ne*be[2]+bt)*255]},p.hcg.hsv=function(J){var te=J[1]/100,ne=J[2]/100,ie=te+ne*(1-te),be=0;return ie>0&&(be=te/ie),[J[0],be*100,ie*100]},p.hcg.hsl=function(J){var te=J[1]/100,ne=J[2]/100,ie=ne*(1-te)+.5*te,be=0;return ie>0&&ie<.5?be=te/(2*ie):ie>=.5&&ie<1&&(be=te/(2*(1-ie))),[J[0],be*100,ie*100]},p.hcg.hwb=function(J){var te=J[1]/100,ne=J[2]/100,ie=te+ne*(1-te);return[J[0],(ie-te)*100,(1-ie)*100]},p.hwb.hcg=function(J){var te=J[1]/100,ne=J[2]/100,ie=1-ne,be=ie-te,Ie=0;return be<1&&(Ie=(ie-be)/(1-be)),[J[0],be*100,Ie*100]},p.apple.rgb=function(J){return[J[0]/65535*255,J[1]/65535*255,J[2]/65535*255]},p.rgb.apple=function(J){return[J[0]/255*65535,J[1]/255*65535,J[2]/255*65535]},p.gray.rgb=function(J){return[J[0]/100*255,J[0]/100*255,J[0]/100*255]},p.gray.hsl=p.gray.hsv=function(J){return[0,0,J[0]]},p.gray.hwb=function(J){return[0,100,J[0]]},p.gray.cmyk=function(J){return[0,0,0,J[0]]},p.gray.lab=function(J){return[J[0],0,0]},p.gray.hex=function(J){var te=Math.round(J[0]/100*255)&255,ne=(te<<16)+(te<<8)+te,ie=ne.toString(16).toUpperCase();return"000000".substring(ie.length)+ie},p.rgb.gray=function(J){var te=(J[0]+J[1]+J[2])/3;return[te/255*100]}});l.rgb,l.hsl,l.hsv,l.hwb,l.cmyk,l.xyz,l.lab,l.lch,l.hex,l.keyword,l.ansi16,l.ansi256,l.hcg,l.apple,l.gray;function u(){for(var s={},o=Object.keys(l),c=o.length,p=0;p<c;p++)s[o[p]]={distance:-1,parent:null};return s}function d(s){var o=u(),c=[s];for(o[s].distance=0;c.length;)for(var p=c.pop(),g=Object.keys(l[p]),F=g.length,K=0;K<F;K++){var Z=g[K],J=o[Z];J.distance===-1&&(J.distance=o[p].distance+1,J.parent=p,c.unshift(Z))}return o}function m(s,o){return function(c){return o(s(c))}}function v(s,o){for(var c=[o[s].parent,s],p=l[o[s].parent][s],g=o[s].parent;o[g].parent;)c.unshift(o[g].parent),p=m(l[o[g].parent][g],p),g=o[g].parent;return p.conversion=c,p}var x=function(s){for(var o=d(s),c={},p=Object.keys(o),g=p.length,F=0;F<g;F++){var K=p[F],Z=o[K];Z.parent!==null&&(c[K]=v(K,o))}return c},$={},T=Object.keys(l);function A(s){var o=function(c){return c==null?c:(arguments.length>1&&(c=Array.prototype.slice.call(arguments)),s(c))};return"conversion"in s&&(o.conversion=s.conversion),o}function L(s){var o=function(c){if(c==null)return c;arguments.length>1&&(c=Array.prototype.slice.call(arguments));var p=s(c);if(typeof p=="object")for(var g=p.length,F=0;F<g;F++)p[F]=Math.round(p[F]);return p};return"conversion"in s&&(o.conversion=s.conversion),o}T.forEach(function(s){$[s]={},Object.defineProperty($[s],"channels",{value:l[s].channels}),Object.defineProperty($[s],"labels",{value:l[s].labels});var o=x(s),c=Object.keys(o);c.forEach(function(p){var g=o[p];$[s][p]=L(g),$[s][p].raw=A(g)})});var P=$,q={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C={getRgba:D,getHsla:G,getRgb:H,getHsl:X,getHwb:B,getAlpha:re,hexString:pe,rgbString:$e,rgbaString:ke,percentString:Ne,percentaString:Ye,hslString:Ar,hslaString:hi,hwbString:gi,keyword:Ui};function D(s){if(s){var o=/^#([a-fA-F0-9]{3,4})$/i,c=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,p=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,g=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,F=/(\w+)/,K=[0,0,0],Z=1,J=s.match(o),te="";if(J){J=J[1],te=J[3];for(var ne=0;ne<K.length;ne++)K[ne]=parseInt(J[ne]+J[ne],16);te&&(Z=Math.round(parseInt(te+te,16)/255*100)/100)}else if(J=s.match(c)){te=J[2],J=J[1];for(var ne=0;ne<K.length;ne++)K[ne]=parseInt(J.slice(ne*2,ne*2+2),16);te&&(Z=Math.round(parseInt(te,16)/255*100)/100)}else if(J=s.match(p)){for(var ne=0;ne<K.length;ne++)K[ne]=parseInt(J[ne+1]);Z=parseFloat(J[4])}else if(J=s.match(g)){for(var ne=0;ne<K.length;ne++)K[ne]=Math.round(parseFloat(J[ne+1])*2.55);Z=parseFloat(J[4])}else if(J=s.match(F)){if(J[1]=="transparent")return[0,0,0,0];if(K=q[J[1]],!K)return}for(var ne=0;ne<K.length;ne++)K[ne]=ws(K[ne],0,255);return!Z&&Z!=0?Z=1:Z=ws(Z,0,1),K[3]=Z,K}}function G(s){if(s){var o=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=s.match(o);if(c){var p=parseFloat(c[4]),g=ws(parseInt(c[1]),0,360),F=ws(parseFloat(c[2]),0,100),K=ws(parseFloat(c[3]),0,100),Z=ws(isNaN(p)?1:p,0,1);return[g,F,K,Z]}}}function B(s){if(s){var o=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=s.match(o);if(c){var p=parseFloat(c[4]),g=ws(parseInt(c[1]),0,360),F=ws(parseFloat(c[2]),0,100),K=ws(parseFloat(c[3]),0,100),Z=ws(isNaN(p)?1:p,0,1);return[g,F,K,Z]}}}function H(s){var o=D(s);return o&&o.slice(0,3)}function X(s){var o=G(s);return o&&o.slice(0,3)}function re(s){var o=D(s);if(o)return o[3];if(o=G(s))return o[3];if(o=B(s))return o[3]}function pe(s,c){var c=c!==void 0&&s.length===3?c:s[3];return"#"+Gi(s[0])+Gi(s[1])+Gi(s[2])+(c>=0&&c<1?Gi(Math.round(c*255)):"")}function $e(s,o){return o<1||s[3]&&s[3]<1?ke(s,o):"rgb("+s[0]+", "+s[1]+", "+s[2]+")"}function ke(s,o){return o===void 0&&(o=s[3]!==void 0?s[3]:1),"rgba("+s[0]+", "+s[1]+", "+s[2]+", "+o+")"}function Ne(s,o){if(o<1||s[3]&&s[3]<1)return Ye(s,o);var c=Math.round(s[0]/255*100),p=Math.round(s[1]/255*100),g=Math.round(s[2]/255*100);return"rgb("+c+"%, "+p+"%, "+g+"%)"}function Ye(s,o){var c=Math.round(s[0]/255*100),p=Math.round(s[1]/255*100),g=Math.round(s[2]/255*100);return"rgba("+c+"%, "+p+"%, "+g+"%, "+(o||s[3]||1)+")"}function Ar(s,o){return o<1||s[3]&&s[3]<1?hi(s,o):"hsl("+s[0]+", "+s[1]+"%, "+s[2]+"%)"}function hi(s,o){return o===void 0&&(o=s[3]!==void 0?s[3]:1),"hsla("+s[0]+", "+s[1]+"%, "+s[2]+"%, "+o+")"}function gi(s,o){return o===void 0&&(o=s[3]!==void 0?s[3]:1),"hwb("+s[0]+", "+s[1]+"%, "+s[2]+"%"+(o!==void 0&&o!==1?", "+o:"")+")"}function Ui(s){return Ee[s.slice(0,3)]}function ws(s,o,c){return Math.min(Math.max(o,s),c)}function Gi(s){var o=s.toString(16).toUpperCase();return o.length<2?"0"+o:o}var Ee={};for(var ce in q)Ee[q[ce]]=ce;var Re=function(s){if(s instanceof Re)return s;if(!(this instanceof Re))return new Re(s);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var o;typeof s=="string"?(o=C.getRgba(s),o?this.setValues("rgb",o):(o=C.getHsla(s))?this.setValues("hsl",o):(o=C.getHwb(s))&&this.setValues("hwb",o)):typeof s=="object"&&(o=s,o.r!==void 0||o.red!==void 0?this.setValues("rgb",o):o.l!==void 0||o.lightness!==void 0?this.setValues("hsl",o):o.v!==void 0||o.value!==void 0?this.setValues("hsv",o):o.w!==void 0||o.whiteness!==void 0?this.setValues("hwb",o):(o.c!==void 0||o.cyan!==void 0)&&this.setValues("cmyk",o))};Re.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var s=this.values;return s.alpha!==1?s.hwb.concat([s.alpha]):s.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var s=this.values;return s.rgb.concat([s.alpha])},hslaArray:function(){var s=this.values;return s.hsl.concat([s.alpha])},alpha:function(s){return s===void 0?this.values.alpha:(this.setValues("alpha",s),this)},red:function(s){return this.setChannel("rgb",0,s)},green:function(s){return this.setChannel("rgb",1,s)},blue:function(s){return this.setChannel("rgb",2,s)},hue:function(s){return s&&(s%=360,s=s<0?360+s:s),this.setChannel("hsl",0,s)},saturation:function(s){return this.setChannel("hsl",1,s)},lightness:function(s){return this.setChannel("hsl",2,s)},saturationv:function(s){return this.setChannel("hsv",1,s)},whiteness:function(s){return this.setChannel("hwb",1,s)},blackness:function(s){return this.setChannel("hwb",2,s)},value:function(s){return this.setChannel("hsv",2,s)},cyan:function(s){return this.setChannel("cmyk",0,s)},magenta:function(s){return this.setChannel("cmyk",1,s)},yellow:function(s){return this.setChannel("cmyk",2,s)},black:function(s){return this.setChannel("cmyk",3,s)},hexString:function(){return C.hexString(this.values.rgb)},rgbString:function(){return C.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return C.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return C.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return C.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return C.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return C.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return C.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var s=this.values.rgb;return s[0]<<16|s[1]<<8|s[2]},luminosity:function(){for(var s=this.values.rgb,o=[],c=0;c<s.length;c++){var p=s[c]/255;o[c]=p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)}return .2126*o[0]+.7152*o[1]+.0722*o[2]},contrast:function(s){var o=this.luminosity(),c=s.luminosity();return o>c?(o+.05)/(c+.05):(c+.05)/(o+.05)},level:function(s){var o=this.contrast(s);return o>=7.1?"AAA":o>=4.5?"AA":""},dark:function(){var s=this.values.rgb,o=(s[0]*299+s[1]*587+s[2]*114)/1e3;return o<128},light:function(){return!this.dark()},negate:function(){for(var s=[],o=0;o<3;o++)s[o]=255-this.values.rgb[o];return this.setValues("rgb",s),this},lighten:function(s){var o=this.values.hsl;return o[2]+=o[2]*s,this.setValues("hsl",o),this},darken:function(s){var o=this.values.hsl;return o[2]-=o[2]*s,this.setValues("hsl",o),this},saturate:function(s){var o=this.values.hsl;return o[1]+=o[1]*s,this.setValues("hsl",o),this},desaturate:function(s){var o=this.values.hsl;return o[1]-=o[1]*s,this.setValues("hsl",o),this},whiten:function(s){var o=this.values.hwb;return o[1]+=o[1]*s,this.setValues("hwb",o),this},blacken:function(s){var o=this.values.hwb;return o[2]+=o[2]*s,this.setValues("hwb",o),this},greyscale:function(){var s=this.values.rgb,o=s[0]*.3+s[1]*.59+s[2]*.11;return this.setValues("rgb",[o,o,o]),this},clearer:function(s){var o=this.values.alpha;return this.setValues("alpha",o-o*s),this},opaquer:function(s){var o=this.values.alpha;return this.setValues("alpha",o+o*s),this},rotate:function(s){var o=this.values.hsl,c=(o[0]+s)%360;return o[0]=c<0?360+c:c,this.setValues("hsl",o),this},mix:function(s,o){var c=this,p=s,g=o===void 0?.5:o,F=2*g-1,K=c.alpha()-p.alpha(),Z=((F*K===-1?F:(F+K)/(1+F*K))+1)/2,J=1-Z;return this.rgb(Z*c.red()+J*p.red(),Z*c.green()+J*p.green(),Z*c.blue()+J*p.blue()).alpha(c.alpha()*g+p.alpha()*(1-g))},toJSON:function(){return this.rgb()},clone:function(){var s=new Re,o=this.values,c=s.values,p,g;for(var F in o)o.hasOwnProperty(F)&&(p=o[F],g={}.toString.call(p),g==="[object Array]"?c[F]=p.slice(0):g==="[object Number]"?c[F]=p:console.error("unexpected color value:",p));return s}},Re.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Re.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Re.prototype.getValues=function(s){for(var o=this.values,c={},p=0;p<s.length;p++)c[s.charAt(p)]=o[s][p];return o.alpha!==1&&(c.a=o.alpha),c},Re.prototype.setValues=function(s,o){var c=this.values,p=this.spaces,g=this.maxes,F=1,K;if(this.valid=!0,s==="alpha")F=o;else if(o.length)c[s]=o.slice(0,s.length),F=o[s.length];else if(o[s.charAt(0)]!==void 0){for(K=0;K<s.length;K++)c[s][K]=o[s.charAt(K)];F=o.a}else if(o[p[s][0]]!==void 0){var Z=p[s];for(K=0;K<s.length;K++)c[s][K]=o[Z[K]];F=o.alpha}if(c.alpha=Math.max(0,Math.min(1,F===void 0?c.alpha:F)),s==="alpha")return!1;var J;for(K=0;K<s.length;K++)J=Math.max(0,Math.min(g[s][K],c[s][K])),c[s][K]=Math.round(J);for(var te in p)te!==s&&(c[te]=P[s][te](c[s]));return!0},Re.prototype.setSpace=function(s,o){var c=o[0];return c===void 0?this.getValues(s):(typeof c=="number"&&(c=Array.prototype.slice.call(o)),this.setValues(s,c),this)},Re.prototype.setChannel=function(s,o,c){var p=this.values[s];return c===void 0?p[o]:c===p[o]?this:(p[o]=c,this.setValues(s,p),this)},typeof window<"u"&&(window.Color=Re);var ye=Re;function Q(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}var ee={noop:function(){},uid:(function(){var s=0;return function(){return s++}})(),isNullOrUndef:function(s){return s===null||typeof s>"u"},isArray:function(s){if(Array.isArray&&Array.isArray(s))return!0;var o=Object.prototype.toString.call(s);return o.substr(0,7)==="[object"&&o.substr(-6)==="Array]"},isObject:function(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"},isFinite:function(s){return(typeof s=="number"||s instanceof Number)&&isFinite(s)},valueOrDefault:function(s,o){return typeof s>"u"?o:s},valueAtIndexOrDefault:function(s,o,c){return ee.valueOrDefault(ee.isArray(s)?s[o]:s,c)},callback:function(s,o,c){if(s&&typeof s.call=="function")return s.apply(c,o)},each:function(s,o,c,p){var g,F,K;if(ee.isArray(s))if(F=s.length,p)for(g=F-1;g>=0;g--)o.call(c,s[g],g);else for(g=0;g<F;g++)o.call(c,s[g],g);else if(ee.isObject(s))for(K=Object.keys(s),F=K.length,g=0;g<F;g++)o.call(c,s[K[g]],K[g])},arrayEquals:function(s,o){var c,p,g,F;if(!s||!o||s.length!==o.length)return!1;for(c=0,p=s.length;c<p;++c)if(g=s[c],F=o[c],g instanceof Array&&F instanceof Array){if(!ee.arrayEquals(g,F))return!1}else if(g!==F)return!1;return!0},clone:function(s){if(ee.isArray(s))return s.map(ee.clone);if(ee.isObject(s)){for(var o=Object.create(s),c=Object.keys(s),p=c.length,g=0;g<p;++g)o[c[g]]=ee.clone(s[c[g]]);return o}return s},_merger:function(s,o,c,p){if(Q(s)){var g=o[s],F=c[s];ee.isObject(g)&&ee.isObject(F)?ee.merge(g,F,p):o[s]=ee.clone(F)}},_mergerIf:function(s,o,c){if(Q(s)){var p=o[s],g=c[s];ee.isObject(p)&&ee.isObject(g)?ee.mergeIf(p,g):o.hasOwnProperty(s)||(o[s]=ee.clone(g))}},merge:function(s,o,c){var p=ee.isArray(o)?o:[o],g=p.length,F,K,Z,J,te;if(!ee.isObject(s))return s;for(c=c||{},F=c.merger||ee._merger,K=0;K<g;++K)if(o=p[K],!!ee.isObject(o))for(Z=Object.keys(o),te=0,J=Z.length;te<J;++te)F(Z[te],s,o,c);return s},mergeIf:function(s,o){return ee.merge(s,o,{merger:ee._mergerIf})},extend:Object.assign||function(s){return ee.merge(s,[].slice.call(arguments,1),{merger:function(o,c,p){c[o]=p[o]}})},inherits:function(s){var o=this,c=s&&s.hasOwnProperty("constructor")?s.constructor:function(){return o.apply(this,arguments)},p=function(){this.constructor=c};return p.prototype=o.prototype,c.prototype=new p,c.extend=ee.inherits,s&&ee.extend(c.prototype,s),c.__super__=o.prototype,c},_deprecated:function(s,o,c,p){o!==void 0&&console.warn(s+': "'+c+'" is deprecated. Please use "'+p+'" instead')}},ve=ee;ee.callCallback=ee.callback,ee.indexOf=function(s,o,c){return Array.prototype.indexOf.call(s,o,c)},ee.getValueOrDefault=ee.valueOrDefault,ee.getValueAtIndexOrDefault=ee.valueAtIndexOrDefault;var Ke={linear:function(s){return s},easeInQuad:function(s){return s*s},easeOutQuad:function(s){return-s*(s-2)},easeInOutQuad:function(s){return(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1)},easeInCubic:function(s){return s*s*s},easeOutCubic:function(s){return(s=s-1)*s*s+1},easeInOutCubic:function(s){return(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2)},easeInQuart:function(s){return s*s*s*s},easeOutQuart:function(s){return-((s=s-1)*s*s*s-1)},easeInOutQuart:function(s){return(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)},easeInQuint:function(s){return s*s*s*s*s},easeOutQuint:function(s){return(s=s-1)*s*s*s*s+1},easeInOutQuint:function(s){return(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)},easeInSine:function(s){return-Math.cos(s*(Math.PI/2))+1},easeOutSine:function(s){return Math.sin(s*(Math.PI/2))},easeInOutSine:function(s){return-.5*(Math.cos(Math.PI*s)-1)},easeInExpo:function(s){return s===0?0:Math.pow(2,10*(s-1))},easeOutExpo:function(s){return s===1?1:-Math.pow(2,-10*s)+1},easeInOutExpo:function(s){return s===0?0:s===1?1:(s/=.5)<1?.5*Math.pow(2,10*(s-1)):.5*(-Math.pow(2,-10*--s)+2)},easeInCirc:function(s){return s>=1?s:-(Math.sqrt(1-s*s)-1)},easeOutCirc:function(s){return Math.sqrt(1-(s=s-1)*s)},easeInOutCirc:function(s){return(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)},easeInElastic:function(s){var o=1.70158,c=0,p=1;return s===0?0:s===1?1:(c||(c=.3),o=c/(2*Math.PI)*Math.asin(1/p),-(p*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/c)))},easeOutElastic:function(s){var o=1.70158,c=0,p=1;return s===0?0:s===1?1:(c||(c=.3),o=c/(2*Math.PI)*Math.asin(1/p),p*Math.pow(2,-10*s)*Math.sin((s-o)*(2*Math.PI)/c)+1)},easeInOutElastic:function(s){var o=1.70158,c=0,p=1;return s===0?0:(s/=.5)===2?1:(c||(c=.45),o=c/(2*Math.PI)*Math.asin(1/p),s<1?-.5*(p*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/c)):p*Math.pow(2,-10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/c)*.5+1)},easeInBack:function(s){var o=1.70158;return s*s*((o+1)*s-o)},easeOutBack:function(s){var o=1.70158;return(s=s-1)*s*((o+1)*s+o)+1},easeInOutBack:function(s){var o=1.70158;return(s/=.5)<1?.5*(s*s*(((o*=1.525)+1)*s-o)):.5*((s-=2)*s*(((o*=1.525)+1)*s+o)+2)},easeInBounce:function(s){return 1-Ke.easeOutBounce(1-s)},easeOutBounce:function(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:function(s){return s<.5?Ke.easeInBounce(s*2)*.5:Ke.easeOutBounce(s*2-1)*.5+.5}},Ve={effects:Ke};ve.easingEffects=Ke;var at=Math.PI,vr=at/180,se=at*2,ae=at/2,Se=at/4,De=at*2/3,bs={clear:function(s){s.ctx.clearRect(0,0,s.width,s.height)},roundedRect:function(s,o,c,p,g,F){if(F){var K=Math.min(F,g/2,p/2),Z=o+K,J=c+K,te=o+p-K,ne=c+g-K;s.moveTo(o,J),Z<te&&J<ne?(s.arc(Z,J,K,-at,-ae),s.arc(te,J,K,-ae,0),s.arc(te,ne,K,0,ae),s.arc(Z,ne,K,ae,at)):Z<te?(s.moveTo(Z,c),s.arc(te,J,K,-ae,ae),s.arc(Z,J,K,ae,at+ae)):J<ne?(s.arc(Z,J,K,-at,0),s.arc(Z,ne,K,0,at)):s.arc(Z,J,K,-at,at),s.closePath(),s.moveTo(o,c)}else s.rect(o,c,p,g)},drawPoint:function(s,o,c,p,g,F){var K,Z,J,te,ne,ie=(F||0)*vr;if(o&&typeof o=="object"&&(K=o.toString(),K==="[object HTMLImageElement]"||K==="[object HTMLCanvasElement]")){s.save(),s.translate(p,g),s.rotate(ie),s.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),s.restore();return}if(!(isNaN(c)||c<=0)){switch(s.beginPath(),o){default:s.arc(p,g,c,0,se),s.closePath();break;case"triangle":s.moveTo(p+Math.sin(ie)*c,g-Math.cos(ie)*c),ie+=De,s.lineTo(p+Math.sin(ie)*c,g-Math.cos(ie)*c),ie+=De,s.lineTo(p+Math.sin(ie)*c,g-Math.cos(ie)*c),s.closePath();break;case"rectRounded":ne=c*.516,te=c-ne,Z=Math.cos(ie+Se)*te,J=Math.sin(ie+Se)*te,s.arc(p-Z,g-J,ne,ie-at,ie-ae),s.arc(p+J,g-Z,ne,ie-ae,ie),s.arc(p+Z,g+J,ne,ie,ie+ae),s.arc(p-J,g+Z,ne,ie+ae,ie+at),s.closePath();break;case"rect":if(!F){te=Math.SQRT1_2*c,s.rect(p-te,g-te,2*te,2*te);break}ie+=Se;case"rectRot":Z=Math.cos(ie)*c,J=Math.sin(ie)*c,s.moveTo(p-Z,g-J),s.lineTo(p+J,g-Z),s.lineTo(p+Z,g+J),s.lineTo(p-J,g+Z),s.closePath();break;case"crossRot":ie+=Se;case"cross":Z=Math.cos(ie)*c,J=Math.sin(ie)*c,s.moveTo(p-Z,g-J),s.lineTo(p+Z,g+J),s.moveTo(p+J,g-Z),s.lineTo(p-J,g+Z);break;case"star":Z=Math.cos(ie)*c,J=Math.sin(ie)*c,s.moveTo(p-Z,g-J),s.lineTo(p+Z,g+J),s.moveTo(p+J,g-Z),s.lineTo(p-J,g+Z),ie+=Se,Z=Math.cos(ie)*c,J=Math.sin(ie)*c,s.moveTo(p-Z,g-J),s.lineTo(p+Z,g+J),s.moveTo(p+J,g-Z),s.lineTo(p-J,g+Z);break;case"line":Z=Math.cos(ie)*c,J=Math.sin(ie)*c,s.moveTo(p-Z,g-J),s.lineTo(p+Z,g+J);break;case"dash":s.moveTo(p,g),s.lineTo(p+Math.cos(ie)*c,g+Math.sin(ie)*c);break}s.fill(),s.stroke()}},_isPointInArea:function(s,o){var c=1e-6;return s.x>o.left-c&&s.x<o.right+c&&s.y>o.top-c&&s.y<o.bottom+c},clipArea:function(s,o){s.save(),s.beginPath(),s.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),s.clip()},unclipArea:function(s){s.restore()},lineTo:function(s,o,c,p){var g=c.steppedLine;if(g){if(g==="middle"){var F=(o.x+c.x)/2;s.lineTo(F,p?c.y:o.y),s.lineTo(F,p?o.y:c.y)}else g==="after"&&!p||g!=="after"&&p?s.lineTo(o.x,c.y):s.lineTo(c.x,o.y);s.lineTo(c.x,c.y);return}if(!c.tension){s.lineTo(c.x,c.y);return}s.bezierCurveTo(p?o.controlPointPreviousX:o.controlPointNextX,p?o.controlPointPreviousY:o.controlPointNextY,p?c.controlPointNextX:c.controlPointPreviousX,p?c.controlPointNextY:c.controlPointPreviousY,c.x,c.y)}},Je=bs;ve.clear=bs.clear,ve.drawRoundedRectangle=function(s){s.beginPath(),bs.roundedRect.apply(bs,arguments)};var pi={_set:function(s,o){return ve.merge(this[s]||(this[s]={}),o)}};pi._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var Os=pi,ji=ve.valueOrDefault;function ua(s){return!s||ve.isNullOrUndef(s.size)||ve.isNullOrUndef(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}var da={toLineHeight:function(s,o){var c=(""+s).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!c||c[1]==="normal")return o*1.2;switch(s=+c[2],c[3]){case"px":return s;case"%":s/=100;break}return o*s},toPadding:function(s){var o,c,p,g;return ve.isObject(s)?(o=+s.top||0,c=+s.right||0,p=+s.bottom||0,g=+s.left||0):o=c=p=g=+s||0,{top:o,right:c,bottom:p,left:g,height:o+p,width:g+c}},_parseFont:function(s){var o=Os.global,c=ji(s.fontSize,o.defaultFontSize),p={family:ji(s.fontFamily,o.defaultFontFamily),lineHeight:ve.options.toLineHeight(ji(s.lineHeight,o.defaultLineHeight),c),size:c,style:ji(s.fontStyle,o.defaultFontStyle),weight:null,string:""};return p.string=ua(p),p},resolve:function(s,o,c,p){var g=!0,F,K,Z;for(F=0,K=s.length;F<K;++F)if(Z=s[F],Z!==void 0&&(o!==void 0&&typeof Z=="function"&&(Z=Z(o),g=!1),c!==void 0&&ve.isArray(Z)&&(Z=Z[c],g=!1),Z!==void 0))return p&&!g&&(p.cacheable=!1),Z}},ga={_factorize:function(s){var o=[],c=Math.sqrt(s),p;for(p=1;p<c;p++)s%p===0&&(o.push(p),o.push(s/p));return c===(c|0)&&o.push(c),o.sort(function(g,F){return g-F}).pop(),o},log10:Math.log10||function(s){var o=Math.log(s)*Math.LOG10E,c=Math.round(o),p=s===Math.pow(10,c);return p?c:o}},ca=ga;ve.log10=ga.log10;var ma=function(s,o){return{x:function(c){return s+s+o-c},setWidth:function(c){o=c},textAlign:function(c){return c==="center"?c:c==="right"?"left":"right"},xPlus:function(c,p){return c-p},leftForLtr:function(c,p){return c-p}}},ya=function(){return{x:function(s){return s},setWidth:function(s){},textAlign:function(s){return s},xPlus:function(s,o){return s+o},leftForLtr:function(s,o){return s}}},vi=function(s,o,c){return s?ma(o,c):ya()},fa=function(s,o){var c,p;(o==="ltr"||o==="rtl")&&(c=s.canvas.style,p=[c.getPropertyValue("direction"),c.getPropertyPriority("direction")],c.setProperty("direction",o,"important"),s.prevTextDirection=p)},ha=function(s){var o=s.prevTextDirection;o!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",o[0],o[1]))},$a={getRtlAdapter:vi,overrideTextDirection:fa,restoreTextDirection:ha},ue=ve,Ca=Ve,ka=Je,xa=da,Th=ca,eh=$a;ue.easing=Ca,ue.canvas=ka,ue.options=xa,ue.math=Th,ue.rtl=eh;function Oh(s,o,c,p){var g=Object.keys(c),F,K,Z,J,te,ne,ie,be,Ie;for(F=0,K=g.length;F<K;++F)if(Z=g[F],ne=c[Z],o.hasOwnProperty(Z)||(o[Z]=ne),J=o[Z],!(J===ne||Z[0]==="_")){if(s.hasOwnProperty(Z)||(s[Z]=J),te=s[Z],ie=typeof ne,ie===typeof te){if(ie==="string"){if(be=ye(te),be.valid&&(Ie=ye(ne),Ie.valid)){o[Z]=Ie.mix(be,p).rgbString();continue}}else if(ue.isFinite(te)&&ue.isFinite(ne)){o[Z]=te+(ne-te)*p;continue}}o[Z]=ne}}var uh=function(s){ue.extend(this,s),this.initialize.apply(this,arguments)};ue.extend(uh.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var s=this;return s._view||(s._view=ue.extend({},s._model)),s._start={},s},transition:function(s){var o=this,c=o._model,p=o._start,g=o._view;return!c||s===1?(o._view=ue.extend({},c),o._start=null,o):(g||(g=o._view={}),p||(p=o._start={}),Oh(p,g,c,s),o)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ue.isNumber(this._model.x)&&ue.isNumber(this._model.y)}}),uh.extend=ue.inherits;var ah=uh,jh=ah.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Vh=jh;Object.defineProperty(jh.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(jh.prototype,"chartInstance",{get:function(){return this.chart},set:function(s){this.chart=s}}),Os._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ue.noop,onComplete:ue.noop}});var zh={animations:[],request:null,addAnimation:function(s,o,c,p){var g=this.animations,F,K;for(o.chart=s,o.startTime=Date.now(),o.duration=c,p||(s.animating=!0),F=0,K=g.length;F<K;++F)if(g[F].chart===s){g[F]=o;return}g.push(o),g.length===1&&this.requestAnimationFrame()},cancelAnimation:function(s){var o=ue.findIndex(this.animations,function(c){return c.chart===s});o!==-1&&(this.animations.splice(o,1),s.animating=!1)},requestAnimationFrame:function(){var s=this;s.request===null&&(s.request=ue.requestAnimFrame.call(window,function(){s.request=null,s.startDigest()}))},startDigest:function(){var s=this;s.advance(),s.animations.length>0&&s.requestAnimationFrame()},advance:function(){for(var s=this.animations,o,c,p,g,F=0;F<s.length;)o=s[F],c=o.chart,p=o.numSteps,g=Math.floor((Date.now()-o.startTime)/o.duration*p)+1,o.currentStep=Math.min(g,p),ue.callback(o.render,[c,o],c),ue.callback(o.onAnimationProgress,[o],c),o.currentStep>=p?(ue.callback(o.onAnimationComplete,[o],c),c.animating=!1,s.splice(F,1)):++F}},gh=ue.options.resolve,Uh=["push","pop","shift","splice","unshift"];function pp(s,o){if(s._chartjs){s._chartjs.listeners.push(o);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),Uh.forEach(function(c){var p="onData"+c.charAt(0).toUpperCase()+c.slice(1),g=s[c];Object.defineProperty(s,c,{configurable:!0,enumerable:!1,value:function(){var F=Array.prototype.slice.call(arguments),K=g.apply(this,F);return ue.each(s._chartjs.listeners,function(Z){typeof Z[p]=="function"&&Z[p].apply(Z,F)}),K}})})}function ep(s,o){var c=s._chartjs;if(c){var p=c.listeners,g=p.indexOf(o);g!==-1&&p.splice(g,1),!(p.length>0)&&(Uh.forEach(function(F){delete s[F]}),delete s._chartjs)}}var mp=function(s,o){this.initialize(s,o)};ue.extend(mp.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(s,o){var c=this;c.chart=s,c.index=o,c.linkScales(),c.addElements(),c._type=c.getMeta().type},updateIndex:function(s){this.index=s},linkScales:function(){var s=this,o=s.getMeta(),c=s.chart,p=c.scales,g=s.getDataset(),F=c.options.scales;(o.xAxisID===null||!(o.xAxisID in p)||g.xAxisID)&&(o.xAxisID=g.xAxisID||F.xAxes[0].id),(o.yAxisID===null||!(o.yAxisID in p)||g.yAxisID)&&(o.yAxisID=g.yAxisID||F.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(s){return this.chart.scales[s]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&ep(this._data,this)},createMetaDataset:function(){var s=this,o=s.datasetElementType;return o&&new o({_chart:s.chart,_datasetIndex:s.index})},createMetaData:function(s){var o=this,c=o.dataElementType;return c&&new c({_chart:o.chart,_datasetIndex:o.index,_index:s})},addElements:function(){var s=this,o=s.getMeta(),c=s.getDataset().data||[],p=o.data,g,F;for(g=0,F=c.length;g<F;++g)p[g]=p[g]||s.createMetaData(g);o.dataset=o.dataset||s.createMetaDataset()},addElementAndReset:function(s){var o=this.createMetaData(s);this.getMeta().data.splice(s,0,o),this.updateElement(o,s,!0)},buildOrUpdateElements:function(){var s=this,o=s.getDataset(),c=o.data||(o.data=[]);s._data!==c&&(s._data&&ep(s._data,s),c&&Object.isExtensible(c)&&pp(c,s),s._data=c),s.resyncElements()},_configure:function(){var s=this;s._config=ue.merge(Object.create(null),[s.chart.options.datasets[s._type],s.getDataset()],{merger:function(o,c,p){o!=="_meta"&&o!=="data"&&ue._merger(o,c,p)}})},_update:function(s){var o=this;o._configure(),o._cachedDataOpts=null,o.update(s)},update:ue.noop,transition:function(s){for(var o=this.getMeta(),c=o.data||[],p=c.length,g=0;g<p;++g)c[g].transition(s);o.dataset&&o.dataset.transition(s)},draw:function(){var s=this.getMeta(),o=s.data||[],c=o.length,p=0;for(s.dataset&&s.dataset.draw();p<c;++p)o[p].draw()},getStyle:function(s){var o=this,c=o.getMeta(),p=c.dataset,g;return o._configure(),p&&s===void 0?g=o._resolveDatasetElementOptions(p||{}):(s=s||0,g=o._resolveDataElementOptions(c.data[s]||{},s)),(g.fill===!1||g.fill===null)&&(g.backgroundColor=g.borderColor),g},_resolveDatasetElementOptions:function(s,o){var c=this,p=c.chart,g=c._config,F=s.custom||{},K=p.options.elements[c.datasetElementType.prototype._type]||{},Z=c._datasetElementOptions,J={},te,ne,ie,be,Ie={chart:p,dataset:c.getDataset(),datasetIndex:c.index,hover:o};for(te=0,ne=Z.length;te<ne;++te)ie=Z[te],be=o?"hover"+ie.charAt(0).toUpperCase()+ie.slice(1):ie,J[ie]=gh([F[be],g[be],K[be]],Ie);return J},_resolveDataElementOptions:function(s,o){var c=this,p=s&&s.custom,g=c._cachedDataOpts;if(g&&!p)return g;var F=c.chart,K=c._config,Z=F.options.elements[c.dataElementType.prototype._type]||{},J=c._dataElementOptions,te={},ne={chart:F,dataIndex:o,dataset:c.getDataset(),datasetIndex:c.index},ie={cacheable:!p},be,Ie,qe,We;if(p=p||{},ue.isArray(J))for(Ie=0,qe=J.length;Ie<qe;++Ie)We=J[Ie],te[We]=gh([p[We],K[We],Z[We]],ne,o,ie);else for(be=Object.keys(J),Ie=0,qe=be.length;Ie<qe;++Ie)We=be[Ie],te[We]=gh([p[We],K[J[We]],K[We],Z[We]],ne,o,ie);return ie.cacheable&&(c._cachedDataOpts=Object.freeze(te)),te},removeHoverStyle:function(s){ue.merge(s._model,s.$previousStyle||{}),delete s.$previousStyle},setHoverStyle:function(s){var o=this.chart.data.datasets[s._datasetIndex],c=s._index,p=s.custom||{},g=s._model,F=ue.getHoverColor;s.$previousStyle={backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth},g.backgroundColor=gh([p.hoverBackgroundColor,o.hoverBackgroundColor,F(g.backgroundColor)],void 0,c),g.borderColor=gh([p.hoverBorderColor,o.hoverBorderColor,F(g.borderColor)],void 0,c),g.borderWidth=gh([p.hoverBorderWidth,o.hoverBorderWidth,g.borderWidth],void 0,c)},_removeDatasetHoverStyle:function(){var s=this.getMeta().dataset;s&&this.removeHoverStyle(s)},_setDatasetHoverStyle:function(){var s=this.getMeta().dataset,o={},c,p,g,F,K,Z;if(s){for(Z=s._model,K=this._resolveDatasetElementOptions(s,!0),F=Object.keys(K),c=0,p=F.length;c<p;++c)g=F[c],o[g]=Z[g],Z[g]=K[g];s.$previousStyle=o}},resyncElements:function(){var s=this,o=s.getMeta(),c=s.getDataset().data,p=o.data.length,g=c.length;g<p?o.data.splice(g,p-g):g>p&&s.insertElements(p,g-p)},insertElements:function(s,o){for(var c=0;c<o;++c)this.addElementAndReset(s+c)},onDataPush:function(){var s=arguments.length;this.insertElements(this.getDataset().data.length-s,s)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(s,o){this.getMeta().data.splice(s,o),this.insertElements(s,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),mp.extend=ue.inherits;var oh=mp,ch=Math.PI*2;Os._set("global",{elements:{arc:{backgroundColor:Os.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function Wp(s,o){var c=o.startAngle,p=o.endAngle,g=o.pixelMargin,F=g/o.outerRadius,K=o.x,Z=o.y;s.beginPath(),s.arc(K,Z,o.outerRadius,c-F,p+F),o.innerRadius>g?(F=g/o.innerRadius,s.arc(K,Z,o.innerRadius-g,p+F,c-F,!0)):s.arc(K,Z,g,p+Math.PI/2,c-Math.PI/2),s.closePath(),s.clip()}function zm(s,o,c,p){var g=c.endAngle,F;for(p&&(c.endAngle=c.startAngle+ch,Wp(s,c),c.endAngle=g,c.endAngle===c.startAngle&&c.fullCircles&&(c.endAngle+=ch,c.fullCircles--)),s.beginPath(),s.arc(c.x,c.y,c.innerRadius,c.startAngle+ch,c.startAngle,!0),F=0;F<c.fullCircles;++F)s.stroke();for(s.beginPath(),s.arc(c.x,c.y,o.outerRadius,c.startAngle,c.startAngle+ch),F=0;F<c.fullCircles;++F)s.stroke()}function Um(s,o,c){var p=o.borderAlign==="inner";p?(s.lineWidth=o.borderWidth*2,s.lineJoin="round"):(s.lineWidth=o.borderWidth,s.lineJoin="bevel"),c.fullCircles&&zm(s,o,c,p),p&&Wp(s,c),s.beginPath(),s.arc(c.x,c.y,o.outerRadius,c.startAngle,c.endAngle),s.arc(c.x,c.y,c.innerRadius,c.endAngle,c.startAngle,!0),s.closePath(),s.stroke()}var Bm=ah.extend({_type:"arc",inLabelRange:function(s){var o=this._view;return o?Math.pow(s-o.x,2)<Math.pow(o.radius+o.hoverRadius,2):!1},inRange:function(s,o){var c=this._view;if(c){for(var p=ue.getAngleFromPoint(c,{x:s,y:o}),g=p.angle,F=p.distance,K=c.startAngle,Z=c.endAngle;Z<K;)Z+=ch;for(;g>Z;)g-=ch;for(;g<K;)g+=ch;var J=g>=K&&g<=Z,te=F>=c.innerRadius&&F<=c.outerRadius;return J&&te}return!1},getCenterPoint:function(){var s=this._view,o=(s.startAngle+s.endAngle)/2,c=(s.innerRadius+s.outerRadius)/2;return{x:s.x+Math.cos(o)*c,y:s.y+Math.sin(o)*c}},getArea:function(){var s=this._view;return Math.PI*((s.endAngle-s.startAngle)/(2*Math.PI))*(Math.pow(s.outerRadius,2)-Math.pow(s.innerRadius,2))},tooltipPosition:function(){var s=this._view,o=s.startAngle+(s.endAngle-s.startAngle)/2,c=(s.outerRadius-s.innerRadius)/2+s.innerRadius;return{x:s.x+Math.cos(o)*c,y:s.y+Math.sin(o)*c}},draw:function(){var s=this._chart.ctx,o=this._view,c=o.borderAlign==="inner"?.33:0,p={x:o.x,y:o.y,innerRadius:o.innerRadius,outerRadius:Math.max(o.outerRadius-c,0),pixelMargin:c,startAngle:o.startAngle,endAngle:o.endAngle,fullCircles:Math.floor(o.circumference/ch)},g;if(s.save(),s.fillStyle=o.backgroundColor,s.strokeStyle=o.borderColor,p.fullCircles){for(p.endAngle=p.startAngle+ch,s.beginPath(),s.arc(p.x,p.y,p.outerRadius,p.startAngle,p.endAngle),s.arc(p.x,p.y,p.innerRadius,p.endAngle,p.startAngle,!0),s.closePath(),g=0;g<p.fullCircles;++g)s.fill();p.endAngle=p.startAngle+o.circumference%ch}s.beginPath(),s.arc(p.x,p.y,p.outerRadius,p.startAngle,p.endAngle),s.arc(p.x,p.y,p.innerRadius,p.endAngle,p.startAngle,!0),s.closePath(),s.fill(),o.borderWidth&&Um(s,o,p),s.restore()}}),Kp=ue.valueOrDefault,Yp=Os.global.defaultColor;Os._set("global",{elements:{line:{tension:.4,backgroundColor:Yp,borderWidth:3,borderColor:Yp,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Wm=ah.extend({_type:"line",draw:function(){var s=this,o=s._view,c=s._chart.ctx,p=o.spanGaps,g=s._children.slice(),F=Os.global,K=F.elements.line,Z=-1,J=s._loop,te,ne,ie;if(g.length){if(s._loop){for(te=0;te<g.length;++te)if(ne=ue.previousItem(g,te),!g[te]._view.skip&&ne._view.skip){g=g.slice(te).concat(g.slice(0,te)),J=p;break}J&&g.push(g[0])}for(c.save(),c.lineCap=o.borderCapStyle||K.borderCapStyle,c.setLineDash&&c.setLineDash(o.borderDash||K.borderDash),c.lineDashOffset=Kp(o.borderDashOffset,K.borderDashOffset),c.lineJoin=o.borderJoinStyle||K.borderJoinStyle,c.lineWidth=Kp(o.borderWidth,K.borderWidth),c.strokeStyle=o.borderColor||F.defaultColor,c.beginPath(),ie=g[0]._view,ie.skip||(c.moveTo(ie.x,ie.y),Z=0),te=1;te<g.length;++te)ie=g[te]._view,ne=Z===-1?ue.previousItem(g,te):g[Z],ie.skip||(Z!==te-1&&!p||Z===-1?c.moveTo(ie.x,ie.y):ue.canvas.lineTo(c,ne._view,ie),Z=te);J&&c.closePath(),c.stroke(),c.restore()}}}),Km=ue.valueOrDefault,Hp=Os.global.defaultColor;Os._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Hp,borderColor:Hp,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function Gp(s){var o=this._view;return o?Math.abs(s-o.x)<o.radius+o.hitRadius:!1}function Ym(s){var o=this._view;return o?Math.abs(s-o.y)<o.radius+o.hitRadius:!1}var Hm=ah.extend({_type:"point",inRange:function(s,o){var c=this._view;return c?Math.pow(s-c.x,2)+Math.pow(o-c.y,2)<Math.pow(c.hitRadius+c.radius,2):!1},inLabelRange:Gp,inXRange:Gp,inYRange:Ym,getCenterPoint:function(){var s=this._view;return{x:s.x,y:s.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var s=this._view;return{x:s.x,y:s.y,padding:s.radius+s.borderWidth}},draw:function(s){var o=this._view,c=this._chart.ctx,p=o.pointStyle,g=o.rotation,F=o.radius,K=o.x,Z=o.y,J=Os.global,te=J.defaultColor;o.skip||(s===void 0||ue.canvas._isPointInArea(o,s))&&(c.strokeStyle=o.borderColor||te,c.lineWidth=Km(o.borderWidth,J.elements.point.borderWidth),c.fillStyle=o.backgroundColor||te,ue.canvas.drawPoint(c,p,F,K,Z,g))}}),Jp=Os.global.defaultColor;Os._set("global",{elements:{rectangle:{backgroundColor:Jp,borderColor:Jp,borderSkipped:"bottom",borderWidth:0}}});function tp(s){return s&&s.width!==void 0}function Qp(s){var o,c,p,g,F;return tp(s)?(F=s.width/2,o=s.x-F,c=s.x+F,p=Math.min(s.y,s.base),g=Math.max(s.y,s.base)):(F=s.height/2,o=Math.min(s.x,s.base),c=Math.max(s.x,s.base),p=s.y-F,g=s.y+F),{left:o,top:p,right:c,bottom:g}}function Xp(s,o,c){return s===o?c:s===c?o:s}function Gm(s){var o=s.borderSkipped,c={};return o&&(s.horizontal?s.base>s.x&&(o=Xp(o,"left","right")):s.base<s.y&&(o=Xp(o,"bottom","top")),c[o]=!0),c}function Jm(s,o,c){var p=s.borderWidth,g=Gm(s),F,K,Z,J;return ue.isObject(p)?(F=+p.top||0,K=+p.right||0,Z=+p.bottom||0,J=+p.left||0):F=K=Z=J=+p||0,{t:g.top||F<0?0:F>c?c:F,r:g.right||K<0?0:K>o?o:K,b:g.bottom||Z<0?0:Z>c?c:Z,l:g.left||J<0?0:J>o?o:J}}function Qm(s){var o=Qp(s),c=o.right-o.left,p=o.bottom-o.top,g=Jm(s,c/2,p/2);return{outer:{x:o.left,y:o.top,w:c,h:p},inner:{x:o.left+g.l,y:o.top+g.t,w:c-g.l-g.r,h:p-g.t-g.b}}}function Bh(s,o,c){var p=o===null,g=c===null,F=!s||p&&g?!1:Qp(s);return F&&(p||o>=F.left&&o<=F.right)&&(g||c>=F.top&&c<=F.bottom)}var Xm=ah.extend({_type:"rectangle",draw:function(){var s=this._chart.ctx,o=this._view,c=Qm(o),p=c.outer,g=c.inner;s.fillStyle=o.backgroundColor,s.fillRect(p.x,p.y,p.w,p.h),!(p.w===g.w&&p.h===g.h)&&(s.save(),s.beginPath(),s.rect(p.x,p.y,p.w,p.h),s.clip(),s.fillStyle=o.borderColor,s.rect(g.x,g.y,g.w,g.h),s.fill("evenodd"),s.restore())},height:function(){var s=this._view;return s.base-s.y},inRange:function(s,o){return Bh(this._view,s,o)},inLabelRange:function(s,o){var c=this._view;return tp(c)?Bh(c,s,null):Bh(c,null,o)},inXRange:function(s){return Bh(this._view,s,null)},inYRange:function(s){return Bh(this._view,null,s)},getCenterPoint:function(){var s=this._view,o,c;return tp(s)?(o=s.x,c=(s.y+s.base)/2):(o=(s.x+s.base)/2,c=s.y),{x:o,y:c}},getArea:function(){var s=this._view;return tp(s)?s.width*Math.abs(s.y-s.base):s.height*Math.abs(s.x-s.base)},tooltipPosition:function(){var s=this._view;return{x:s.x,y:s.y}}}),rh={},Zm=Bm,Jv=Wm,Qv=Hm,Zv=Xm;rh.Arc=Zm,rh.Line=Jv,rh.Point=Qv,rh.Rectangle=Zv;var Wh=ue._deprecated,Ch=ue.valueOrDefault;Os._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),Os._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function eg(s,o){var c=s._length,p,g,F,K;for(F=1,K=o.length;F<K;++F)c=Math.min(c,Math.abs(o[F]-o[F-1]));for(F=0,K=s.getTicks().length;F<K;++F)g=s.getPixelForTick(F),c=F>0?Math.min(c,Math.abs(g-p)):c,p=g;return c}function tg(s,o,c){var p=c.barThickness,g=o.stackCount,F=o.pixels[s],K=ue.isNullOrUndef(p)?eg(o.scale,o.pixels):-1,Z,J;return ue.isNullOrUndef(p)?(Z=K*c.categoryPercentage,J=c.barPercentage):(Z=p*g,J=1),{chunk:Z/g,ratio:J,start:F-Z/2}}function rg(s,o,c){var p=o.pixels,g=p[s],F=s>0?p[s-1]:null,K=s<p.length-1?p[s+1]:null,Z=c.categoryPercentage,J,te;return F===null&&(F=g-(K===null?o.end-o.start:K-g)),K===null&&(K=g+g-F),J=g-(g-Math.min(F,K))/2*Z,te=Math.abs(K-F)/2*Z,{chunk:te/o.stackCount,ratio:c.barPercentage,start:J}}var Zp=oh.extend({dataElementType:rh.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var s=this,o,c;oh.prototype.initialize.apply(s,arguments),o=s.getMeta(),o.stack=s.getDataset().stack,o.bar=!0,c=s._getIndexScale().options,Wh("bar chart",c.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Wh("bar chart",c.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Wh("bar chart",c.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Wh("bar chart",s._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Wh("bar chart",c.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(s){var o=this,c=o.getMeta().data,p,g;for(o._ruler=o.getRuler(),p=0,g=c.length;p<g;++p)o.updateElement(c[p],p,s)},updateElement:function(s,o,c){var p=this,g=p.getMeta(),F=p.getDataset(),K=p._resolveDataElementOptions(s,o);s._xScale=p.getScaleForId(g.xAxisID),s._yScale=p.getScaleForId(g.yAxisID),s._datasetIndex=p.index,s._index=o,s._model={backgroundColor:K.backgroundColor,borderColor:K.borderColor,borderSkipped:K.borderSkipped,borderWidth:K.borderWidth,datasetLabel:F.label,label:p.chart.data.labels[o]},ue.isArray(F.data[o])&&(s._model.borderSkipped=null),p._updateElementGeometry(s,o,c,K),s.pivot()},_updateElementGeometry:function(s,o,c,p){var g=this,F=s._model,K=g._getValueScale(),Z=K.getBasePixel(),J=K.isHorizontal(),te=g._ruler||g.getRuler(),ne=g.calculateBarValuePixels(g.index,o,p),ie=g.calculateBarIndexPixels(g.index,o,te,p);F.horizontal=J,F.base=c?Z:ne.base,F.x=J?c?Z:ne.head:ie.center,F.y=J?ie.center:c?Z:ne.head,F.height=J?ie.size:void 0,F.width=J?void 0:ie.size},_getStacks:function(s){var o=this,c=o._getIndexScale(),p=c._getMatchingVisibleMetas(o._type),g=c.options.stacked,F=p.length,K=[],Z,J;for(Z=0;Z<F&&(J=p[Z],(g===!1||K.indexOf(J.stack)===-1||g===void 0&&J.stack===void 0)&&K.push(J.stack),J.index!==s);++Z);return K},getStackCount:function(){return this._getStacks().length},getStackIndex:function(s,o){var c=this._getStacks(s),p=o!==void 0?c.indexOf(o):-1;return p===-1?c.length-1:p},getRuler:function(){var s=this,o=s._getIndexScale(),c=[],p,g;for(p=0,g=s.getMeta().data.length;p<g;++p)c.push(o.getPixelForValue(null,p,s.index));return{pixels:c,start:o._startPixel,end:o._endPixel,stackCount:s.getStackCount(),scale:o}},calculateBarValuePixels:function(s,o,c){var p=this,g=p.chart,F=p._getValueScale(),K=F.isHorizontal(),Z=g.data.datasets,J=F._getMatchingVisibleMetas(p._type),te=F._parseValue(Z[s].data[o]),ne=c.minBarLength,ie=F.options.stacked,be=p.getMeta().stack,Ie=te.start===void 0?0:te.max>=0&&te.min>=0?te.min:te.max,qe=te.start===void 0?te.end:te.max>=0&&te.min>=0?te.max-te.min:te.min-te.max,We=J.length,bt,mi,pa,va,_a,ba,Ma;if(ie||ie===void 0&&be!==void 0)for(bt=0;bt<We&&(mi=J[bt],mi.index!==s);++bt)mi.stack===be&&(Ma=F._parseValue(Z[mi.index].data[o]),pa=Ma.start===void 0?Ma.end:Ma.min>=0&&Ma.max>=0?Ma.max:Ma.min,(te.min<0&&pa<0||te.max>=0&&pa>0)&&(Ie+=pa));return va=F.getPixelForValue(Ie),_a=F.getPixelForValue(Ie+qe),ba=_a-va,ne!==void 0&&Math.abs(ba)<ne&&(ba=ne,qe>=0&&!K||qe<0&&K?_a=va-ne:_a=va+ne),{size:ba,base:va,head:_a,center:_a+ba/2}},calculateBarIndexPixels:function(s,o,c,p){var g=this,F=p.barThickness==="flex"?rg(o,c,p):tg(o,c,p),K=g.getStackIndex(s,g.getMeta().stack),Z=F.start+F.chunk*K+F.chunk/2,J=Math.min(Ch(p.maxBarThickness,1/0),F.chunk*F.ratio);return{base:Z-J/2,head:Z+J/2,center:Z,size:J}},draw:function(){var s=this,o=s.chart,c=s._getValueScale(),p=s.getMeta().data,g=s.getDataset(),F=p.length,K=0;for(ue.canvas.clipArea(o.ctx,o.chartArea);K<F;++K){var Z=c._parseValue(g.data[K]);!isNaN(Z.min)&&!isNaN(Z.max)&&p[K].draw()}ue.canvas.unclipArea(o.ctx)},_resolveDataElementOptions:function(){var s=this,o=ue.extend({},oh.prototype._resolveDataElementOptions.apply(s,arguments)),c=s._getIndexScale().options,p=s._getValueScale().options;return o.barPercentage=Ch(c.barPercentage,o.barPercentage),o.barThickness=Ch(c.barThickness,o.barThickness),o.categoryPercentage=Ch(c.categoryPercentage,o.categoryPercentage),o.maxBarThickness=Ch(c.maxBarThickness,o.maxBarThickness),o.minBarLength=Ch(p.minBarLength,o.minBarLength),o}}),vp=ue.valueOrDefault,ng=ue.options.resolve;Os._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(s,o){var c=o.datasets[s.datasetIndex].label||"",p=o.datasets[s.datasetIndex].data[s.index];return c+": ("+s.xLabel+", "+s.yLabel+", "+p.r+")"}}}});var sg=oh.extend({dataElementType:rh.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(s){var o=this,c=o.getMeta(),p=c.data;ue.each(p,function(g,F){o.updateElement(g,F,s)})},updateElement:function(s,o,c){var p=this,g=p.getMeta(),F=s.custom||{},K=p.getScaleForId(g.xAxisID),Z=p.getScaleForId(g.yAxisID),J=p._resolveDataElementOptions(s,o),te=p.getDataset().data[o],ne=p.index,ie=c?K.getPixelForDecimal(.5):K.getPixelForValue(typeof te=="object"?te:NaN,o,ne),be=c?Z.getBasePixel():Z.getPixelForValue(te,o,ne);s._xScale=K,s._yScale=Z,s._options=J,s._datasetIndex=ne,s._index=o,s._model={backgroundColor:J.backgroundColor,borderColor:J.borderColor,borderWidth:J.borderWidth,hitRadius:J.hitRadius,pointStyle:J.pointStyle,rotation:J.rotation,radius:c?0:J.radius,skip:F.skip||isNaN(ie)||isNaN(be),x:ie,y:be},s.pivot()},setHoverStyle:function(s){var o=s._model,c=s._options,p=ue.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth,radius:o.radius},o.backgroundColor=vp(c.hoverBackgroundColor,p(c.backgroundColor)),o.borderColor=vp(c.hoverBorderColor,p(c.borderColor)),o.borderWidth=vp(c.hoverBorderWidth,c.borderWidth),o.radius=c.radius+c.hoverRadius},_resolveDataElementOptions:function(s,o){var c=this,p=c.chart,g=c.getDataset(),F=s.custom||{},K=g.data[o]||{},Z=oh.prototype._resolveDataElementOptions.apply(c,arguments),J={chart:p,dataIndex:o,dataset:g,datasetIndex:c.index};return c._cachedDataOpts===Z&&(Z=ue.extend({},Z)),Z.radius=ng([F.radius,K.r,c._config.radius,p.options.elements.point.radius],J,o),Z}}),rp=ue.valueOrDefault,$h=Math.PI,fh=$h*2,kh=$h/2;Os._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(s){var o=document.createElement("ul"),c=s.data,p=c.datasets,g=c.labels,F,K,Z,J;if(o.setAttribute("class",s.id+"-legend"),p.length)for(F=0,K=p[0].data.length;F<K;++F)Z=o.appendChild(document.createElement("li")),J=Z.appendChild(document.createElement("span")),J.style.backgroundColor=p[0].backgroundColor[F],g[F]&&Z.appendChild(document.createTextNode(g[F]));return o.outerHTML},legend:{labels:{generateLabels:function(s){var o=s.data;return o.labels.length&&o.datasets.length?o.labels.map(function(c,p){var g=s.getDatasetMeta(0),F=g.controller.getStyle(p);return{text:c,fillStyle:F.backgroundColor,strokeStyle:F.borderColor,lineWidth:F.borderWidth,hidden:isNaN(o.datasets[0].data[p])||g.data[p].hidden,index:p}}):[]}},onClick:function(s,o){var c=o.index,p=this.chart,g,F,K;for(g=0,F=(p.data.datasets||[]).length;g<F;++g)K=p.getDatasetMeta(g),K.data[c]&&(K.data[c].hidden=!K.data[c].hidden);p.update()}},cutoutPercentage:50,rotation:-kh,circumference:fh,tooltips:{callbacks:{title:function(){return""},label:function(s,o){var c=o.labels[s.index],p=": "+o.datasets[s.datasetIndex].data[s.index];return ue.isArray(c)?(c=c.slice(),c[0]+=p):c+=p,c}}}});var em=oh.extend({dataElementType:rh.Arc,linkScales:ue.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(s){for(var o=0,c=0;c<s;++c)this.chart.isDatasetVisible(c)&&++o;return o},update:function(s){var o=this,c=o.chart,p=c.chartArea,g=c.options,F=1,K=1,Z=0,J=0,te=o.getMeta(),ne=te.data,ie=g.cutoutPercentage/100||0,be=g.circumference,Ie=o._getRingWeight(o.index),qe,We,bt,mi;if(be<fh){var pa=g.rotation%fh;pa+=pa>=$h?-fh:pa<-$h?fh:0;var va=pa+be,_a=Math.cos(pa),ba=Math.sin(pa),Ma=Math.cos(va),Sa=Math.sin(va),Ra=pa<=0&&va>=0||va>=fh,Ta=pa<=kh&&va>=kh||va>=fh+kh,Va=pa===-$h||va>=$h,La=pa<=-kh&&va>=-kh||va>=$h+kh,Da=Va?-1:Math.min(_a,_a*ie,Ma,Ma*ie),za=La?-1:Math.min(ba,ba*ie,Sa,Sa*ie),Lh=Ra?1:Math.max(_a,_a*ie,Ma,Ma*ie),Fh=Ta?1:Math.max(ba,ba*ie,Sa,Sa*ie);F=(Lh-Da)/2,K=(Fh-za)/2,Z=-(Lh+Da)/2,J=-(Fh+za)/2}for(bt=0,mi=ne.length;bt<mi;++bt)ne[bt]._options=o._resolveDataElementOptions(ne[bt],bt);for(c.borderWidth=o.getMaxBorderWidth(),qe=(p.right-p.left-c.borderWidth)/F,We=(p.bottom-p.top-c.borderWidth)/K,c.outerRadius=Math.max(Math.min(qe,We)/2,0),c.innerRadius=Math.max(c.outerRadius*ie,0),c.radiusLength=(c.outerRadius-c.innerRadius)/(o._getVisibleDatasetWeightTotal()||1),c.offsetX=Z*c.outerRadius,c.offsetY=J*c.outerRadius,te.total=o.calculateTotal(),o.outerRadius=c.outerRadius-c.radiusLength*o._getRingWeightOffset(o.index),o.innerRadius=Math.max(o.outerRadius-c.radiusLength*Ie,0),bt=0,mi=ne.length;bt<mi;++bt)o.updateElement(ne[bt],bt,s)},updateElement:function(s,o,c){var p=this,g=p.chart,F=g.chartArea,K=g.options,Z=K.animation,J=(F.left+F.right)/2,te=(F.top+F.bottom)/2,ne=K.rotation,ie=K.rotation,be=p.getDataset(),Ie=c&&Z.animateRotate||s.hidden?0:p.calculateCircumference(be.data[o])*(K.circumference/fh),qe=c&&Z.animateScale?0:p.innerRadius,We=c&&Z.animateScale?0:p.outerRadius,bt=s._options||{};ue.extend(s,{_datasetIndex:p.index,_index:o,_model:{backgroundColor:bt.backgroundColor,borderColor:bt.borderColor,borderWidth:bt.borderWidth,borderAlign:bt.borderAlign,x:J+g.offsetX,y:te+g.offsetY,startAngle:ne,endAngle:ie,circumference:Ie,outerRadius:We,innerRadius:qe,label:ue.valueAtIndexOrDefault(be.label,o,g.data.labels[o])}});var mi=s._model;(!c||!Z.animateRotate)&&(o===0?mi.startAngle=K.rotation:mi.startAngle=p.getMeta().data[o-1]._model.endAngle,mi.endAngle=mi.startAngle+mi.circumference),s.pivot()},calculateTotal:function(){var s=this.getDataset(),o=this.getMeta(),c=0,p;return ue.each(o.data,function(g,F){p=s.data[F],!isNaN(p)&&!g.hidden&&(c+=Math.abs(p))}),c},calculateCircumference:function(s){var o=this.getMeta().total;return o>0&&!isNaN(s)?fh*(Math.abs(s)/o):0},getMaxBorderWidth:function(s){var o=this,c=0,p=o.chart,g,F,K,Z,J,te,ne,ie;if(!s){for(g=0,F=p.data.datasets.length;g<F;++g)if(p.isDatasetVisible(g)){K=p.getDatasetMeta(g),s=K.data,g!==o.index&&(J=K.controller);break}}if(!s)return 0;for(g=0,F=s.length;g<F;++g)Z=s[g],J?(J._configure(),te=J._resolveDataElementOptions(Z,g)):te=Z._options,te.borderAlign!=="inner"&&(ne=te.borderWidth,ie=te.hoverBorderWidth,c=ne>c?ne:c,c=ie>c?ie:c);return c},setHoverStyle:function(s){var o=s._model,c=s._options,p=ue.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=rp(c.hoverBackgroundColor,p(c.backgroundColor)),o.borderColor=rp(c.hoverBorderColor,p(c.borderColor)),o.borderWidth=rp(c.hoverBorderWidth,c.borderWidth)},_getRingWeightOffset:function(s){for(var o=0,c=0;c<s;++c)this.chart.isDatasetVisible(c)&&(o+=this._getRingWeight(c));return o},_getRingWeight:function(s){return Math.max(rp(this.chart.data.datasets[s].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});Os._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),Os._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ig=Zp.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),hh=ue.valueOrDefault,ag=ue.options.resolve,gp=ue.canvas._isPointInArea;Os._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function tm(s,o){var c=s&&s.options.ticks||{},p=c.reverse,g=c.min===void 0?o:0,F=c.max===void 0?o:0;return{start:p?F:g,end:p?g:F}}function og(s,o,c){var p=c/2,g=tm(s,p),F=tm(o,p);return{top:F.end,right:g.end,bottom:F.start,left:g.start}}function lg(s){var o,c,p,g;return ue.isObject(s)?(o=s.top,c=s.right,p=s.bottom,g=s.left):o=c=p=g=s,{top:o,right:c,bottom:p,left:g}}var rm=oh.extend({datasetElementType:rh.Line,dataElementType:rh.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(s){var o=this,c=o.getMeta(),p=c.dataset,g=c.data||[],F=o.chart.options,K=o._config,Z=o._showLine=hh(K.showLine,F.showLines),J,te;for(o._xScale=o.getScaleForId(c.xAxisID),o._yScale=o.getScaleForId(c.yAxisID),Z&&(K.tension!==void 0&&K.lineTension===void 0&&(K.lineTension=K.tension),p._scale=o._yScale,p._datasetIndex=o.index,p._children=g,p._model=o._resolveDatasetElementOptions(p),p.pivot()),J=0,te=g.length;J<te;++J)o.updateElement(g[J],J,s);for(Z&&p._model.tension!==0&&o.updateBezierControlPoints(),J=0,te=g.length;J<te;++J)g[J].pivot()},updateElement:function(s,o,c){var p=this,g=p.getMeta(),F=s.custom||{},K=p.getDataset(),Z=p.index,J=K.data[o],te=p._xScale,ne=p._yScale,ie=g.dataset._model,be,Ie,qe=p._resolveDataElementOptions(s,o);be=te.getPixelForValue(typeof J=="object"?J:NaN,o,Z),Ie=c?ne.getBasePixel():p.calculatePointY(J,o,Z),s._xScale=te,s._yScale=ne,s._options=qe,s._datasetIndex=Z,s._index=o,s._model={x:be,y:Ie,skip:F.skip||isNaN(be)||isNaN(Ie),radius:qe.radius,pointStyle:qe.pointStyle,rotation:qe.rotation,backgroundColor:qe.backgroundColor,borderColor:qe.borderColor,borderWidth:qe.borderWidth,tension:hh(F.tension,ie?ie.tension:0),steppedLine:ie?ie.steppedLine:!1,hitRadius:qe.hitRadius}},_resolveDatasetElementOptions:function(s){var o=this,c=o._config,p=s.custom||{},g=o.chart.options,F=g.elements.line,K=oh.prototype._resolveDatasetElementOptions.apply(o,arguments);return K.spanGaps=hh(c.spanGaps,g.spanGaps),K.tension=hh(c.lineTension,F.tension),K.steppedLine=ag([p.steppedLine,c.steppedLine,F.stepped]),K.clip=lg(hh(c.clip,og(o._xScale,o._yScale,K.borderWidth))),K},calculatePointY:function(s,o,c){var p=this,g=p.chart,F=p._yScale,K=0,Z=0,J,te,ne,ie,be,Ie,qe;if(F.options.stacked){for(be=+F.getRightValue(s),Ie=g._getSortedVisibleDatasetMetas(),qe=Ie.length,J=0;J<qe&&(ne=Ie[J],ne.index!==c);++J)te=g.data.datasets[ne.index],ne.type==="line"&&ne.yAxisID===F.id&&(ie=+F.getRightValue(te.data[o]),ie<0?Z+=ie||0:K+=ie||0);return be<0?F.getPixelForValue(Z+be):F.getPixelForValue(K+be)}return F.getPixelForValue(s)},updateBezierControlPoints:function(){var s=this,o=s.chart,c=s.getMeta(),p=c.dataset._model,g=o.chartArea,F=c.data||[],K,Z,J,te;p.spanGaps&&(F=F.filter(function(ie){return!ie._model.skip}));function ne(ie,be,Ie){return Math.max(Math.min(ie,Ie),be)}if(p.cubicInterpolationMode==="monotone")ue.splineCurveMonotone(F);else for(K=0,Z=F.length;K<Z;++K)J=F[K]._model,te=ue.splineCurve(ue.previousItem(F,K)._model,J,ue.nextItem(F,K)._model,p.tension),J.controlPointPreviousX=te.previous.x,J.controlPointPreviousY=te.previous.y,J.controlPointNextX=te.next.x,J.controlPointNextY=te.next.y;if(o.options.elements.line.capBezierPoints)for(K=0,Z=F.length;K<Z;++K)J=F[K]._model,gp(J,g)&&(K>0&&gp(F[K-1]._model,g)&&(J.controlPointPreviousX=ne(J.controlPointPreviousX,g.left,g.right),J.controlPointPreviousY=ne(J.controlPointPreviousY,g.top,g.bottom)),K<F.length-1&&gp(F[K+1]._model,g)&&(J.controlPointNextX=ne(J.controlPointNextX,g.left,g.right),J.controlPointNextY=ne(J.controlPointNextY,g.top,g.bottom)))},draw:function(){var s=this,o=s.chart,c=s.getMeta(),p=c.data||[],g=o.chartArea,F=o.canvas,K=0,Z=p.length,J;for(s._showLine&&(J=c.dataset._model.clip,ue.canvas.clipArea(o.ctx,{left:J.left===!1?0:g.left-J.left,right:J.right===!1?F.width:g.right+J.right,top:J.top===!1?0:g.top-J.top,bottom:J.bottom===!1?F.height:g.bottom+J.bottom}),c.dataset.draw(),ue.canvas.unclipArea(o.ctx));K<Z;++K)p[K].draw(g)},setHoverStyle:function(s){var o=s._model,c=s._options,p=ue.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth,radius:o.radius},o.backgroundColor=hh(c.hoverBackgroundColor,p(c.backgroundColor)),o.borderColor=hh(c.hoverBorderColor,p(c.borderColor)),o.borderWidth=hh(c.hoverBorderWidth,c.borderWidth),o.radius=hh(c.hoverRadius,c.radius)}}),ug=ue.options.resolve;Os._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(s){var o=document.createElement("ul"),c=s.data,p=c.datasets,g=c.labels,F,K,Z,J;if(o.setAttribute("class",s.id+"-legend"),p.length)for(F=0,K=p[0].data.length;F<K;++F)Z=o.appendChild(document.createElement("li")),J=Z.appendChild(document.createElement("span")),J.style.backgroundColor=p[0].backgroundColor[F],g[F]&&Z.appendChild(document.createTextNode(g[F]));return o.outerHTML},legend:{labels:{generateLabels:function(s){var o=s.data;return o.labels.length&&o.datasets.length?o.labels.map(function(c,p){var g=s.getDatasetMeta(0),F=g.controller.getStyle(p);return{text:c,fillStyle:F.backgroundColor,strokeStyle:F.borderColor,lineWidth:F.borderWidth,hidden:isNaN(o.datasets[0].data[p])||g.data[p].hidden,index:p}}):[]}},onClick:function(s,o){var c=o.index,p=this.chart,g,F,K;for(g=0,F=(p.data.datasets||[]).length;g<F;++g)K=p.getDatasetMeta(g),K.data[c].hidden=!K.data[c].hidden;p.update()}},tooltips:{callbacks:{title:function(){return""},label:function(s,o){return o.labels[s.index]+": "+s.yLabel}}}});var cg=oh.extend({dataElementType:rh.Arc,linkScales:ue.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(s){var o=this,c=o.getDataset(),p=o.getMeta(),g=o.chart.options.startAngle||0,F=o._starts=[],K=o._angles=[],Z=p.data,J,te,ne;for(o._updateRadius(),p.count=o.countVisibleElements(),J=0,te=c.data.length;J<te;J++)F[J]=g,ne=o._computeAngle(J),K[J]=ne,g+=ne;for(J=0,te=Z.length;J<te;++J)Z[J]._options=o._resolveDataElementOptions(Z[J],J),o.updateElement(Z[J],J,s)},_updateRadius:function(){var s=this,o=s.chart,c=o.chartArea,p=o.options,g=Math.min(c.right-c.left,c.bottom-c.top);o.outerRadius=Math.max(g/2,0),o.innerRadius=Math.max(p.cutoutPercentage?o.outerRadius/100*p.cutoutPercentage:1,0),o.radiusLength=(o.outerRadius-o.innerRadius)/o.getVisibleDatasetCount(),s.outerRadius=o.outerRadius-o.radiusLength*s.index,s.innerRadius=s.outerRadius-o.radiusLength},updateElement:function(s,o,c){var p=this,g=p.chart,F=p.getDataset(),K=g.options,Z=K.animation,J=g.scale,te=g.data.labels,ne=J.xCenter,ie=J.yCenter,be=K.startAngle,Ie=s.hidden?0:J.getDistanceFromCenterForValue(F.data[o]),qe=p._starts[o],We=qe+(s.hidden?0:p._angles[o]),bt=Z.animateScale?0:J.getDistanceFromCenterForValue(F.data[o]),mi=s._options||{};ue.extend(s,{_datasetIndex:p.index,_index:o,_scale:J,_model:{backgroundColor:mi.backgroundColor,borderColor:mi.borderColor,borderWidth:mi.borderWidth,borderAlign:mi.borderAlign,x:ne,y:ie,innerRadius:0,outerRadius:c?bt:Ie,startAngle:c&&Z.animateRotate?be:qe,endAngle:c&&Z.animateRotate?be:We,label:ue.valueAtIndexOrDefault(te,o,te[o])}}),s.pivot()},countVisibleElements:function(){var s=this.getDataset(),o=this.getMeta(),c=0;return ue.each(o.data,function(p,g){!isNaN(s.data[g])&&!p.hidden&&c++}),c},setHoverStyle:function(s){var o=s._model,c=s._options,p=ue.getHoverColor,g=ue.valueOrDefault;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=g(c.hoverBackgroundColor,p(c.backgroundColor)),o.borderColor=g(c.hoverBorderColor,p(c.borderColor)),o.borderWidth=g(c.hoverBorderWidth,c.borderWidth)},_computeAngle:function(s){var o=this,c=this.getMeta().count,p=o.getDataset(),g=o.getMeta();if(isNaN(p.data[s])||g.data[s].hidden)return 0;var F={chart:o.chart,dataIndex:s,dataset:p,datasetIndex:o.index};return ug([o.chart.options.elements.arc.angle,2*Math.PI/c],F,s)}});Os._set("pie",ue.clone(Os.doughnut)),Os._set("pie",{cutoutPercentage:0});var dg=em,Sh=ue.valueOrDefault;Os._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var fg=oh.extend({datasetElementType:rh.Line,dataElementType:rh.Point,linkScales:ue.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(s){var o=this,c=o.getMeta(),p=c.dataset,g=c.data||[],F=o.chart.scale,K=o._config,Z,J;for(K.tension!==void 0&&K.lineTension===void 0&&(K.lineTension=K.tension),p._scale=F,p._datasetIndex=o.index,p._children=g,p._loop=!0,p._model=o._resolveDatasetElementOptions(p),p.pivot(),Z=0,J=g.length;Z<J;++Z)o.updateElement(g[Z],Z,s);for(o.updateBezierControlPoints(),Z=0,J=g.length;Z<J;++Z)g[Z].pivot()},updateElement:function(s,o,c){var p=this,g=s.custom||{},F=p.getDataset(),K=p.chart.scale,Z=K.getPointPositionForValue(o,F.data[o]),J=p._resolveDataElementOptions(s,o),te=p.getMeta().dataset._model,ne=c?K.xCenter:Z.x,ie=c?K.yCenter:Z.y;s._scale=K,s._options=J,s._datasetIndex=p.index,s._index=o,s._model={x:ne,y:ie,skip:g.skip||isNaN(ne)||isNaN(ie),radius:J.radius,pointStyle:J.pointStyle,rotation:J.rotation,backgroundColor:J.backgroundColor,borderColor:J.borderColor,borderWidth:J.borderWidth,tension:Sh(g.tension,te?te.tension:0),hitRadius:J.hitRadius}},_resolveDatasetElementOptions:function(){var s=this,o=s._config,c=s.chart.options,p=oh.prototype._resolveDatasetElementOptions.apply(s,arguments);return p.spanGaps=Sh(o.spanGaps,c.spanGaps),p.tension=Sh(o.lineTension,c.elements.line.tension),p},updateBezierControlPoints:function(){var s=this,o=s.getMeta(),c=s.chart.chartArea,p=o.data||[],g,F,K,Z;o.dataset._model.spanGaps&&(p=p.filter(function(te){return!te._model.skip}));function J(te,ne,ie){return Math.max(Math.min(te,ie),ne)}for(g=0,F=p.length;g<F;++g)K=p[g]._model,Z=ue.splineCurve(ue.previousItem(p,g,!0)._model,K,ue.nextItem(p,g,!0)._model,K.tension),K.controlPointPreviousX=J(Z.previous.x,c.left,c.right),K.controlPointPreviousY=J(Z.previous.y,c.top,c.bottom),K.controlPointNextX=J(Z.next.x,c.left,c.right),K.controlPointNextY=J(Z.next.y,c.top,c.bottom)},setHoverStyle:function(s){var o=s._model,c=s._options,p=ue.getHoverColor;s.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth,radius:o.radius},o.backgroundColor=Sh(c.hoverBackgroundColor,p(c.backgroundColor)),o.borderColor=Sh(c.hoverBorderColor,p(c.borderColor)),o.borderWidth=Sh(c.hoverBorderWidth,c.borderWidth),o.radius=Sh(c.hoverRadius,c.radius)}});Os._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(s){return"("+s.xLabel+", "+s.yLabel+")"}}}}),Os._set("global",{datasets:{scatter:{showLine:!1}}});var hg=rm,nm={bar:Zp,bubble:sg,doughnut:em,horizontalBar:ig,line:rm,polarArea:cg,pie:dg,radar:fg,scatter:hg};function xh(s,o){return s.native?{x:s.x,y:s.y}:ue.getRelativePosition(s,o)}function Kh(s,o){var c=s._getSortedVisibleDatasetMetas(),p,g,F,K,Z,J;for(g=0,K=c.length;g<K;++g)for(p=c[g].data,F=0,Z=p.length;F<Z;++F)J=p[F],J._view.skip||o(J)}function yp(s,o){var c=[];return Kh(s,function(p){p.inRange(o.x,o.y)&&c.push(p)}),c}function bp(s,o,c,p){var g=Number.POSITIVE_INFINITY,F=[];return Kh(s,function(K){if(!(c&&!K.inRange(o.x,o.y))){var Z=K.getCenterPoint(),J=p(o,Z);J<g?(F=[K],g=J):J===g&&F.push(K)}}),F}function _p(s){var o=s.indexOf("x")!==-1,c=s.indexOf("y")!==-1;return function(p,g){var F=o?Math.abs(p.x-g.x):0,K=c?Math.abs(p.y-g.y):0;return Math.sqrt(Math.pow(F,2)+Math.pow(K,2))}}function wp(s,o,c){var p=xh(o,s);c.axis=c.axis||"x";var g=_p(c.axis),F=c.intersect?yp(s,p):bp(s,p,!1,g),K=[];return F.length?(s._getSortedVisibleDatasetMetas().forEach(function(Z){var J=Z.data[F[0]._index];J&&!J._view.skip&&K.push(J)}),K):[]}var Nh={modes:{single:function(s,o){var c=xh(o,s),p=[];return Kh(s,function(g){if(g.inRange(c.x,c.y))return p.push(g),p}),p.slice(0,1)},label:wp,index:wp,dataset:function(s,o,c){var p=xh(o,s);c.axis=c.axis||"xy";var g=_p(c.axis),F=c.intersect?yp(s,p):bp(s,p,!1,g);return F.length>0&&(F=s.getDatasetMeta(F[0]._datasetIndex).data),F},"x-axis":function(s,o){return wp(s,o,{intersect:!1})},point:function(s,o){var c=xh(o,s);return yp(s,c)},nearest:function(s,o,c){var p=xh(o,s);c.axis=c.axis||"xy";var g=_p(c.axis);return bp(s,p,c.intersect,g)},x:function(s,o,c){var p=xh(o,s),g=[],F=!1;return Kh(s,function(K){K.inXRange(p.x)&&g.push(K),K.inRange(p.x,p.y)&&(F=!0)}),c.intersect&&!F&&(g=[]),g},y:function(s,o,c){var p=xh(o,s),g=[],F=!1;return Kh(s,function(K){K.inYRange(p.y)&&g.push(K),K.inRange(p.x,p.y)&&(F=!0)}),c.intersect&&!F&&(g=[]),g}}},$p=ue.extend;function Yh(s,o){return ue.where(s,function(c){return c.pos===o})}function np(s,o){return s.sort(function(c,p){var g=o?p:c,F=o?c:p;return g.weight===F.weight?g.index-F.index:g.weight-F.weight})}function pg(s){var o=[],c,p,g;for(c=0,p=(s||[]).length;c<p;++c)g=s[c],o.push({index:c,box:g,pos:g.position,horizontal:g.isHorizontal(),weight:g.weight});return o}function mg(s,o){var c,p,g;for(c=0,p=s.length;c<p;++c)g=s[c],g.width=g.horizontal?g.box.fullWidth&&o.availableWidth:o.vBoxMaxWidth,g.height=g.horizontal&&o.hBoxMaxHeight}function vg(s){var o=pg(s),c=np(Yh(o,"left"),!0),p=np(Yh(o,"right")),g=np(Yh(o,"top"),!0),F=np(Yh(o,"bottom"));return{leftAndTop:c.concat(g),rightAndBottom:p.concat(F),chartArea:Yh(o,"chartArea"),vertical:c.concat(p),horizontal:g.concat(F)}}function sm(s,o,c,p){return Math.max(s[c],o[c])+Math.max(s[p],o[p])}function gg(s,o,c){var p=c.box,g=s.maxPadding,F,K;if(c.size&&(s[c.pos]-=c.size),c.size=c.horizontal?p.height:p.width,s[c.pos]+=c.size,p.getPadding){var Z=p.getPadding();g.top=Math.max(g.top,Z.top),g.left=Math.max(g.left,Z.left),g.bottom=Math.max(g.bottom,Z.bottom),g.right=Math.max(g.right,Z.right)}if(F=o.outerWidth-sm(g,s,"left","right"),K=o.outerHeight-sm(g,s,"top","bottom"),F!==s.w||K!==s.h){s.w=F,s.h=K;var J=c.horizontal?[F,s.w]:[K,s.h];return J[0]!==J[1]&&(!isNaN(J[0])||!isNaN(J[1]))}}function yg(s){var o=s.maxPadding;function c(p){var g=Math.max(o[p]-s[p],0);return s[p]+=g,g}s.y+=c("top"),s.x+=c("left"),c("right"),c("bottom")}function bg(s,o){var c=o.maxPadding;function p(g){var F={left:0,top:0,right:0,bottom:0};return g.forEach(function(K){F[K]=Math.max(o[K],c[K])}),F}return p(s?["left","right"]:["top","bottom"])}function sp(s,o,c){var p=[],g,F,K,Z,J,te;for(g=0,F=s.length;g<F;++g)K=s[g],Z=K.box,Z.update(K.width||o.w,K.height||o.h,bg(K.horizontal,o)),gg(o,c,K)&&(te=!0,p.length&&(J=!0)),Z.fullWidth||p.push(K);return J&&sp(p,o,c)||te}function im(s,o,c){var p=c.padding,g=o.x,F=o.y,K,Z,J,te;for(K=0,Z=s.length;K<Z;++K)J=s[K],te=J.box,J.horizontal?(te.left=te.fullWidth?p.left:o.left,te.right=te.fullWidth?c.outerWidth-p.right:o.left+o.w,te.top=F,te.bottom=F+te.height,te.width=te.right-te.left,F=te.bottom):(te.left=g,te.right=g+te.width,te.top=o.top,te.bottom=o.top+o.h,te.height=te.bottom-te.top,g=te.right);o.x=g,o.y=F}Os._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var lh={defaults:{},addBox:function(s,o){s.boxes||(s.boxes=[]),o.fullWidth=o.fullWidth||!1,o.position=o.position||"top",o.weight=o.weight||0,o._layers=o._layers||function(){return[{z:0,draw:function(){o.draw.apply(o,arguments)}}]},s.boxes.push(o)},removeBox:function(s,o){var c=s.boxes?s.boxes.indexOf(o):-1;c!==-1&&s.boxes.splice(c,1)},configure:function(s,o,c){for(var p=["fullWidth","position","weight"],g=p.length,F=0,K;F<g;++F)K=p[F],c.hasOwnProperty(K)&&(o[K]=c[K])},update:function(s,o,c){if(s){var p=s.options.layout||{},g=ue.options.toPadding(p.padding),F=o-g.width,K=c-g.height,Z=vg(s.boxes),J=Z.vertical,te=Z.horizontal,ne=Object.freeze({outerWidth:o,outerHeight:c,padding:g,availableWidth:F,vBoxMaxWidth:F/2/J.length,hBoxMaxHeight:K/2}),ie=$p({maxPadding:$p({},g),w:F,h:K,x:g.left,y:g.top},g);mg(J.concat(te),ne),sp(J,ie,ne),sp(te,ie,ne)&&sp(J,ie,ne),yg(ie),im(Z.leftAndTop,ie,ne),ie.x+=ie.w,ie.y+=ie.h,im(Z.rightAndBottom,ie,ne),s.chartArea={left:ie.left,top:ie.top,right:ie.left+ie.w,bottom:ie.top+ie.h},ue.each(Z.chartArea,function(be){var Ie=be.box;$p(Ie,s.chartArea),Ie.update(ie.w,ie.h)})}}},_g={acquireContext:function(s){return s&&s.canvas&&(s=s.canvas),s&&s.getContext("2d")||null}},wg=`/*\r
 * DOM element rendering detection\r
 * https://davidwalsh.name/detect-node-insertion\r
 */\r
@keyframes chartjs-render-animation {\r
	from { opacity: 0.99; }\r
	to { opacity: 1; }\r
}\r
\r
.chartjs-render-monitor {\r
	animation: chartjs-render-animation 0.001s;\r
}\r
\r
/*\r
 * DOM element resizing detection\r
 * https://github.com/marcj/css-element-queries\r
 */\r
.chartjs-size-monitor,\r
.chartjs-size-monitor-expand,\r
.chartjs-size-monitor-shrink {\r
	position: absolute;\r
	direction: ltr;\r
	left: 0;\r
	top: 0;\r
	right: 0;\r
	bottom: 0;\r
	overflow: hidden;\r
	pointer-events: none;\r
	visibility: hidden;\r
	z-index: -1;\r
}\r
\r
.chartjs-size-monitor-expand > div {\r
	position: absolute;\r
	width: 1000000px;\r
	height: 1000000px;\r
	left: 0;\r
	top: 0;\r
}\r
\r
.chartjs-size-monitor-shrink > div {\r
	position: absolute;\r
	width: 200%;\r
	height: 200%;\r
	left: 0;\r
	top: 0;\r
}\r
`,$g=Object.freeze({__proto__:null,default:wg}),kg=i($g),th="$chartjs",kp="chartjs-",Sp=kp+"size-monitor",am=kp+"render-monitor",Sg=kp+"render-animation",om=["animationstart","webkitAnimationStart"],xg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function lm(s,o){var c=ue.getStyle(s,o),p=c&&c.match(/^(\d+)(\.\d+)?px$/);return p?Number(p[1]):void 0}function Mg(s,o){var c=s.style,p=s.getAttribute("height"),g=s.getAttribute("width");if(s[th]={initial:{height:p,width:g,style:{display:c.display,height:c.height,width:c.width}}},c.display=c.display||"block",g===null||g===""){var F=lm(s,"width");F!==void 0&&(s.width=F)}if(p===null||p==="")if(s.style.height==="")s.height=s.width/(o.options.aspectRatio||2);else{var K=lm(s,"height");F!==void 0&&(s.height=K)}return s}var Rg=(function(){var s=!1;try{var o=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("e",null,o)}catch{}return s})(),um=Rg?{passive:!0}:!1;function Hh(s,o,c){s.addEventListener(o,c,um)}function xp(s,o,c){s.removeEventListener(o,c,um)}function Mp(s,o,c,p,g){return{type:s,chart:o,native:g||null,x:c!==void 0?c:null,y:p!==void 0?p:null}}function Eg(s,o){var c=xg[s.type]||s.type,p=ue.getRelativePosition(s,o);return Mp(c,o,p.x,p.y,s)}function Pg(s,o){var c=!1,p=[];return function(){p=Array.prototype.slice.call(arguments),o=o||this,c||(c=!0,ue.requestAnimFrame.call(window,function(){c=!1,s.apply(o,p)}))}}function Gh(s){var o=document.createElement("div");return o.className=s||"",o}function Ig(s){var o=1e6,c=Gh(Sp),p=Gh(Sp+"-expand"),g=Gh(Sp+"-shrink");p.appendChild(Gh()),g.appendChild(Gh()),c.appendChild(p),c.appendChild(g),c._reset=function(){p.scrollLeft=o,p.scrollTop=o,g.scrollLeft=o,g.scrollTop=o};var F=function(){c._reset(),s()};return Hh(p,"scroll",F.bind(p,"expand")),Hh(g,"scroll",F.bind(g,"shrink")),c}function Tg(s,o){var c=s[th]||(s[th]={}),p=c.renderProxy=function(g){g.animationName===Sg&&o()};ue.each(om,function(g){Hh(s,g,p)}),c.reflow=!!s.offsetParent,s.classList.add(am)}function Og(s){var o=s[th]||{},c=o.renderProxy;c&&(ue.each(om,function(p){xp(s,p,c)}),delete o.renderProxy),s.classList.remove(am)}function Cg(s,o,c){var p=s[th]||(s[th]={}),g=p.resizer=Ig(Pg(function(){if(p.resizer){var F=c.options.maintainAspectRatio&&s.parentNode,K=F?F.clientWidth:0;o(Mp("resize",c)),F&&F.clientWidth<K&&c.canvas&&o(Mp("resize",c))}}));Tg(s,function(){if(p.resizer){var F=s.parentNode;F&&F!==g.parentNode&&F.insertBefore(g,F.firstChild),g._reset()}})}function Ng(s){var o=s[th]||{},c=o.resizer;delete o.resizer,Og(s),c&&c.parentNode&&c.parentNode.removeChild(c)}function Dg(s,o){var c=s[th]||(s[th]={});if(!c.containsStyles){c.containsStyles=!0,o=`/* Chart.js */
`+o;var p=document.createElement("style");p.setAttribute("type","text/css"),p.appendChild(document.createTextNode(o)),s.appendChild(p)}}var cm={disableCSSInjection:!1,_enabled:typeof window<"u"&&typeof document<"u",_ensureLoaded:function(s){if(!this.disableCSSInjection){var o=s.getRootNode?s.getRootNode():document,c=o.host?o:document.head;Dg(c,kg)}},acquireContext:function(s,o){typeof s=="string"?s=document.getElementById(s):s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas);var c=s&&s.getContext&&s.getContext("2d");return c&&c.canvas===s?(this._ensureLoaded(s),Mg(s,o),c):null},releaseContext:function(s){var o=s.canvas;if(o[th]){var c=o[th].initial;["height","width"].forEach(function(p){var g=c[p];ue.isNullOrUndef(g)?o.removeAttribute(p):o.setAttribute(p,g)}),ue.each(c.style||{},function(p,g){o.style[g]=p}),o.width=o.width,delete o[th]}},addEventListener:function(s,o,c){var p=s.canvas;if(o==="resize"){Cg(p,c,s);return}var g=c[th]||(c[th]={}),F=g.proxies||(g.proxies={}),K=F[s.id+"_"+o]=function(Z){c(Eg(Z,s))};Hh(p,o,K)},removeEventListener:function(s,o,c){var p=s.canvas;if(o==="resize"){Ng(p);return}var g=c[th]||{},F=g.proxies||{},K=F[s.id+"_"+o];K&&xp(p,o,K)}};ue.addEvent=Hh,ue.removeEvent=xp;var Ag=cm._enabled?cm:_g,Dh=ue.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ag);Os._set("global",{plugins:{}});var Pa={_plugins:[],_cacheId:0,register:function(s){var o=this._plugins;[].concat(s).forEach(function(c){o.indexOf(c)===-1&&o.push(c)}),this._cacheId++},unregister:function(s){var o=this._plugins;[].concat(s).forEach(function(c){var p=o.indexOf(c);p!==-1&&o.splice(p,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(s,o,c){var p=this.descriptors(s),g=p.length,F,K,Z,J,te;for(F=0;F<g;++F)if(K=p[F],Z=K.plugin,te=Z[o],typeof te=="function"&&(J=[s].concat(c||[]),J.push(K.options),te.apply(Z,J)===!1))return!1;return!0},descriptors:function(s){var o=s.$plugins||(s.$plugins={});if(o.id===this._cacheId)return o.descriptors;var c=[],p=[],g=s&&s.config||{},F=g.options&&g.options.plugins||{};return this._plugins.concat(g.plugins||[]).forEach(function(K){var Z=c.indexOf(K);if(Z===-1){var J=K.id,te=F[J];te!==!1&&(te===!0&&(te=ue.clone(Os.global.plugins[J])),c.push(K),p.push({plugin:K,options:te||{}}))}}),o.descriptors=p,o.id=this._cacheId,p},_invalidate:function(s){delete s.$plugins}},Jh={constructors:{},defaults:{},registerScaleType:function(s,o,c){this.constructors[s]=o,this.defaults[s]=ue.clone(c)},getScaleConstructor:function(s){return this.constructors.hasOwnProperty(s)?this.constructors[s]:void 0},getScaleDefaults:function(s){return this.defaults.hasOwnProperty(s)?ue.merge(Object.create(null),[Os.scale,this.defaults[s]]):{}},updateScaleDefaults:function(s,o){var c=this;c.defaults.hasOwnProperty(s)&&(c.defaults[s]=ue.extend(c.defaults[s],o))},addScalesToLayout:function(s){ue.each(s.scales,function(o){o.fullWidth=o.options.fullWidth,o.position=o.options.position,o.weight=o.options.weight,lh.addBox(s,o)})}},ph=ue.valueOrDefault,Rp=ue.rtl.getRtlAdapter;Os._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ue.noop,title:function(s,o){var c="",p=o.labels,g=p?p.length:0;if(s.length>0){var F=s[0];F.label?c=F.label:F.xLabel?c=F.xLabel:g>0&&F.index<g&&(c=p[F.index])}return c},afterTitle:ue.noop,beforeBody:ue.noop,beforeLabel:ue.noop,label:function(s,o){var c=o.datasets[s.datasetIndex].label||"";return c&&(c+=": "),ue.isNullOrUndef(s.value)?c+=s.yLabel:c+=s.value,c},labelColor:function(s,o){var c=o.getDatasetMeta(s.datasetIndex),p=c.data[s.index],g=p._view;return{borderColor:g.borderColor,backgroundColor:g.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ue.noop,afterBody:ue.noop,beforeFooter:ue.noop,footer:ue.noop,afterFooter:ue.noop}}});var dm={average:function(s){if(!s.length)return!1;var o,c,p=0,g=0,F=0;for(o=0,c=s.length;o<c;++o){var K=s[o];if(K&&K.hasValue()){var Z=K.tooltipPosition();p+=Z.x,g+=Z.y,++F}}return{x:p/F,y:g/F}},nearest:function(s,o){var c=o.x,p=o.y,g=Number.POSITIVE_INFINITY,F,K,Z;for(F=0,K=s.length;F<K;++F){var J=s[F];if(J&&J.hasValue()){var te=J.getCenterPoint(),ne=ue.distanceBetweenPoints(o,te);ne<g&&(g=ne,Z=J)}}if(Z){var ie=Z.tooltipPosition();c=ie.x,p=ie.y}return{x:c,y:p}}};function dh(s,o){return o&&(ue.isArray(o)?Array.prototype.push.apply(s,o):s.push(o)),s}function mh(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function qg(s){var o=s._xScale,c=s._yScale||s._scale,p=s._index,g=s._datasetIndex,F=s._chart.getDatasetMeta(g).controller,K=F._getIndexScale(),Z=F._getValueScale();return{xLabel:o?o.getLabelForIndex(p,g):"",yLabel:c?c.getLabelForIndex(p,g):"",label:K?""+K.getLabelForIndex(p,g):"",value:Z?""+Z.getLabelForIndex(p,g):"",index:p,datasetIndex:g,x:s._model.x,y:s._model.y}}function fm(s){var o=Os.global;return{xPadding:s.xPadding,yPadding:s.yPadding,xAlign:s.xAlign,yAlign:s.yAlign,rtl:s.rtl,textDirection:s.textDirection,bodyFontColor:s.bodyFontColor,_bodyFontFamily:ph(s.bodyFontFamily,o.defaultFontFamily),_bodyFontStyle:ph(s.bodyFontStyle,o.defaultFontStyle),_bodyAlign:s.bodyAlign,bodyFontSize:ph(s.bodyFontSize,o.defaultFontSize),bodySpacing:s.bodySpacing,titleFontColor:s.titleFontColor,_titleFontFamily:ph(s.titleFontFamily,o.defaultFontFamily),_titleFontStyle:ph(s.titleFontStyle,o.defaultFontStyle),titleFontSize:ph(s.titleFontSize,o.defaultFontSize),_titleAlign:s.titleAlign,titleSpacing:s.titleSpacing,titleMarginBottom:s.titleMarginBottom,footerFontColor:s.footerFontColor,_footerFontFamily:ph(s.footerFontFamily,o.defaultFontFamily),_footerFontStyle:ph(s.footerFontStyle,o.defaultFontStyle),footerFontSize:ph(s.footerFontSize,o.defaultFontSize),_footerAlign:s.footerAlign,footerSpacing:s.footerSpacing,footerMarginTop:s.footerMarginTop,caretSize:s.caretSize,cornerRadius:s.cornerRadius,backgroundColor:s.backgroundColor,opacity:0,legendColorBackground:s.multiKeyBackground,displayColors:s.displayColors,borderColor:s.borderColor,borderWidth:s.borderWidth}}function Lg(s,o){var c=s._chart.ctx,p=o.yPadding*2,g=0,F=o.body,K=F.reduce(function(qe,We){return qe+We.before.length+We.lines.length+We.after.length},0);K+=o.beforeBody.length+o.afterBody.length;var Z=o.title.length,J=o.footer.length,te=o.titleFontSize,ne=o.bodyFontSize,ie=o.footerFontSize;p+=Z*te,p+=Z?(Z-1)*o.titleSpacing:0,p+=Z?o.titleMarginBottom:0,p+=K*ne,p+=K?(K-1)*o.bodySpacing:0,p+=J?o.footerMarginTop:0,p+=J*ie,p+=J?(J-1)*o.footerSpacing:0;var be=0,Ie=function(qe){g=Math.max(g,c.measureText(qe).width+be)};return c.font=ue.fontString(te,o._titleFontStyle,o._titleFontFamily),ue.each(o.title,Ie),c.font=ue.fontString(ne,o._bodyFontStyle,o._bodyFontFamily),ue.each(o.beforeBody.concat(o.afterBody),Ie),be=o.displayColors?ne+2:0,ue.each(F,function(qe){ue.each(qe.before,Ie),ue.each(qe.lines,Ie),ue.each(qe.after,Ie)}),be=0,c.font=ue.fontString(ie,o._footerFontStyle,o._footerFontFamily),ue.each(o.footer,Ie),g+=2*o.xPadding,{width:g,height:p}}function Fg(s,o){var c=s._model,p=s._chart,g=s._chart.chartArea,F="center",K="center";c.y<o.height?K="top":c.y>p.height-o.height&&(K="bottom");var Z,J,te,ne,ie,be=(g.left+g.right)/2,Ie=(g.top+g.bottom)/2;K==="center"?(Z=function(We){return We<=be},J=function(We){return We>be}):(Z=function(We){return We<=o.width/2},J=function(We){return We>=p.width-o.width/2}),te=function(We){return We+o.width+c.caretSize+c.caretPadding>p.width},ne=function(We){return We-o.width-c.caretSize-c.caretPadding<0},ie=function(We){return We<=Ie?"top":"bottom"},Z(c.x)?(F="left",te(c.x)&&(F="center",K=ie(c.y))):J(c.x)&&(F="right",ne(c.x)&&(F="center",K=ie(c.y)));var qe=s._options;return{xAlign:qe.xAlign?qe.xAlign:F,yAlign:qe.yAlign?qe.yAlign:K}}function jg(s,o,c,p){var g=s.x,F=s.y,K=s.caretSize,Z=s.caretPadding,J=s.cornerRadius,te=c.xAlign,ne=c.yAlign,ie=K+Z,be=J+Z;return te==="right"?g-=o.width:te==="center"&&(g-=o.width/2,g+o.width>p.width&&(g=p.width-o.width),g<0&&(g=0)),ne==="top"?F+=ie:ne==="bottom"?F-=o.height+ie:F-=o.height/2,ne==="center"?te==="left"?g+=ie:te==="right"&&(g-=ie):te==="left"?g-=be:te==="right"&&(g+=be),{x:g,y:F}}function ip(s,o){return o==="center"?s.x+s.width/2:o==="right"?s.x+s.width-s.xPadding:s.x+s.xPadding}function hm(s){return dh([],mh(s))}var Vg=ah.extend({initialize:function(){this._model=fm(this._options),this._lastActive=[]},getTitle:function(){var s=this,o=s._options,c=o.callbacks,p=c.beforeTitle.apply(s,arguments),g=c.title.apply(s,arguments),F=c.afterTitle.apply(s,arguments),K=[];return K=dh(K,mh(p)),K=dh(K,mh(g)),K=dh(K,mh(F)),K},getBeforeBody:function(){return hm(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(s,o){var c=this,p=c._options.callbacks,g=[];return ue.each(s,function(F){var K={before:[],lines:[],after:[]};dh(K.before,mh(p.beforeLabel.call(c,F,o))),dh(K.lines,p.label.call(c,F,o)),dh(K.after,mh(p.afterLabel.call(c,F,o))),g.push(K)}),g},getAfterBody:function(){return hm(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var s=this,o=s._options.callbacks,c=o.beforeFooter.apply(s,arguments),p=o.footer.apply(s,arguments),g=o.afterFooter.apply(s,arguments),F=[];return F=dh(F,mh(c)),F=dh(F,mh(p)),F=dh(F,mh(g)),F},update:function(s){var o=this,c=o._options,p=o._model,g=o._model=fm(c),F=o._active,K=o._data,Z={xAlign:p.xAlign,yAlign:p.yAlign},J={x:p.x,y:p.y},te={width:p.width,height:p.height},ne={x:p.caretX,y:p.caretY},ie,be;if(F.length){g.opacity=1;var Ie=[],qe=[];ne=dm[c.position].call(o,F,o._eventPosition);var We=[];for(ie=0,be=F.length;ie<be;++ie)We.push(qg(F[ie]));c.filter&&(We=We.filter(function(bt){return c.filter(bt,K)})),c.itemSort&&(We=We.sort(function(bt,mi){return c.itemSort(bt,mi,K)})),ue.each(We,function(bt){Ie.push(c.callbacks.labelColor.call(o,bt,o._chart)),qe.push(c.callbacks.labelTextColor.call(o,bt,o._chart))}),g.title=o.getTitle(We,K),g.beforeBody=o.getBeforeBody(We,K),g.body=o.getBody(We,K),g.afterBody=o.getAfterBody(We,K),g.footer=o.getFooter(We,K),g.x=ne.x,g.y=ne.y,g.caretPadding=c.caretPadding,g.labelColors=Ie,g.labelTextColors=qe,g.dataPoints=We,te=Lg(this,g),Z=Fg(this,te),J=jg(g,te,Z,o._chart)}else g.opacity=0;return g.xAlign=Z.xAlign,g.yAlign=Z.yAlign,g.x=J.x,g.y=J.y,g.width=te.width,g.height=te.height,g.caretX=ne.x,g.caretY=ne.y,o._model=g,s&&c.custom&&c.custom.call(o,g),o},drawCaret:function(s,o){var c=this._chart.ctx,p=this._view,g=this.getCaretPosition(s,o,p);c.lineTo(g.x1,g.y1),c.lineTo(g.x2,g.y2),c.lineTo(g.x3,g.y3)},getCaretPosition:function(s,o,c){var p,g,F,K,Z,J,te=c.caretSize,ne=c.cornerRadius,ie=c.xAlign,be=c.yAlign,Ie=s.x,qe=s.y,We=o.width,bt=o.height;if(be==="center")Z=qe+bt/2,ie==="left"?(p=Ie,g=p-te,F=p,K=Z+te,J=Z-te):(p=Ie+We,g=p+te,F=p,K=Z-te,J=Z+te);else if(ie==="left"?(g=Ie+ne+te,p=g-te,F=g+te):ie==="right"?(g=Ie+We-ne-te,p=g-te,F=g+te):(g=c.caretX,p=g-te,F=g+te),be==="top")K=qe,Z=K-te,J=K;else{K=qe+bt,Z=K+te,J=K;var mi=F;F=p,p=mi}return{x1:p,x2:g,x3:F,y1:K,y2:Z,y3:J}},drawTitle:function(s,o,c){var p=o.title,g=p.length,F,K,Z;if(g){var J=Rp(o.rtl,o.x,o.width);for(s.x=ip(o,o._titleAlign),c.textAlign=J.textAlign(o._titleAlign),c.textBaseline="middle",F=o.titleFontSize,K=o.titleSpacing,c.fillStyle=o.titleFontColor,c.font=ue.fontString(F,o._titleFontStyle,o._titleFontFamily),Z=0;Z<g;++Z)c.fillText(p[Z],J.x(s.x),s.y+F/2),s.y+=F+K,Z+1===g&&(s.y+=o.titleMarginBottom-K)}},drawBody:function(s,o,c){var p=o.bodyFontSize,g=o.bodySpacing,F=o._bodyAlign,K=o.body,Z=o.displayColors,J=0,te=Z?ip(o,"left"):0,ne=Rp(o.rtl,o.x,o.width),ie=function(Ma){c.fillText(Ma,ne.x(s.x+J),s.y+p/2),s.y+=p+g},be,Ie,qe,We,bt,mi,pa,va,_a=ne.textAlign(F);for(c.textAlign=F,c.textBaseline="middle",c.font=ue.fontString(p,o._bodyFontStyle,o._bodyFontFamily),s.x=ip(o,_a),c.fillStyle=o.bodyFontColor,ue.each(o.beforeBody,ie),J=Z&&_a!=="right"?F==="center"?p/2+1:p+2:0,bt=0,pa=K.length;bt<pa;++bt){for(be=K[bt],Ie=o.labelTextColors[bt],qe=o.labelColors[bt],c.fillStyle=Ie,ue.each(be.before,ie),We=be.lines,mi=0,va=We.length;mi<va;++mi){if(Z){var ba=ne.x(te);c.fillStyle=o.legendColorBackground,c.fillRect(ne.leftForLtr(ba,p),s.y,p,p),c.lineWidth=1,c.strokeStyle=qe.borderColor,c.strokeRect(ne.leftForLtr(ba,p),s.y,p,p),c.fillStyle=qe.backgroundColor,c.fillRect(ne.leftForLtr(ne.xPlus(ba,1),p-2),s.y+1,p-2,p-2),c.fillStyle=Ie}ie(We[mi])}ue.each(be.after,ie)}J=0,ue.each(o.afterBody,ie),s.y-=g},drawFooter:function(s,o,c){var p=o.footer,g=p.length,F,K;if(g){var Z=Rp(o.rtl,o.x,o.width);for(s.x=ip(o,o._footerAlign),s.y+=o.footerMarginTop,c.textAlign=Z.textAlign(o._footerAlign),c.textBaseline="middle",F=o.footerFontSize,c.fillStyle=o.footerFontColor,c.font=ue.fontString(F,o._footerFontStyle,o._footerFontFamily),K=0;K<g;++K)c.fillText(p[K],Z.x(s.x),s.y+F/2),s.y+=F+o.footerSpacing}},drawBackground:function(s,o,c,p){c.fillStyle=o.backgroundColor,c.strokeStyle=o.borderColor,c.lineWidth=o.borderWidth;var g=o.xAlign,F=o.yAlign,K=s.x,Z=s.y,J=p.width,te=p.height,ne=o.cornerRadius;c.beginPath(),c.moveTo(K+ne,Z),F==="top"&&this.drawCaret(s,p),c.lineTo(K+J-ne,Z),c.quadraticCurveTo(K+J,Z,K+J,Z+ne),F==="center"&&g==="right"&&this.drawCaret(s,p),c.lineTo(K+J,Z+te-ne),c.quadraticCurveTo(K+J,Z+te,K+J-ne,Z+te),F==="bottom"&&this.drawCaret(s,p),c.lineTo(K+ne,Z+te),c.quadraticCurveTo(K,Z+te,K,Z+te-ne),F==="center"&&g==="left"&&this.drawCaret(s,p),c.lineTo(K,Z+ne),c.quadraticCurveTo(K,Z,K+ne,Z),c.closePath(),c.fill(),o.borderWidth>0&&c.stroke()},draw:function(){var s=this._chart.ctx,o=this._view;if(o.opacity!==0){var c={width:o.width,height:o.height},p={x:o.x,y:o.y},g=Math.abs(o.opacity<.001)?0:o.opacity,F=o.title.length||o.beforeBody.length||o.body.length||o.afterBody.length||o.footer.length;this._options.enabled&&F&&(s.save(),s.globalAlpha=g,this.drawBackground(p,o,s,c),p.y+=o.yPadding,ue.rtl.overrideTextDirection(s,o.textDirection),this.drawTitle(p,o,s),this.drawBody(p,o,s),this.drawFooter(p,o,s),ue.rtl.restoreTextDirection(s,o.textDirection),s.restore())}},handleEvent:function(s){var o=this,c=o._options,p=!1;return o._lastActive=o._lastActive||[],s.type==="mouseout"?o._active=[]:(o._active=o._chart.getElementsAtEventForMode(s,c.mode,c),c.reverse&&o._active.reverse()),p=!ue.arrayEquals(o._active,o._lastActive),p&&(o._lastActive=o._active,(c.enabled||c.custom)&&(o._eventPosition={x:s.x,y:s.y},o.update(!0),o.pivot())),p}}),zg=dm,Ep=Vg;Ep.positioners=zg;var Pp=ue.valueOrDefault;Os._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function pm(){return ue.merge(Object.create(null),[].slice.call(arguments),{merger:function(s,o,c,p){if(s==="xAxes"||s==="yAxes"){var g=c[s].length,F,K,Z;for(o[s]||(o[s]=[]),F=0;F<g;++F)Z=c[s][F],K=Pp(Z.type,s==="xAxes"?"category":"linear"),F>=o[s].length&&o[s].push({}),!o[s][F].type||Z.type&&Z.type!==o[s][F].type?ue.merge(o[s][F],[Jh.getScaleDefaults(K),Z]):ue.merge(o[s][F],Z)}else ue._merger(s,o,c,p)}})}function Ip(){return ue.merge(Object.create(null),[].slice.call(arguments),{merger:function(s,o,c,p){var g=o[s]||Object.create(null),F=c[s];s==="scales"?o[s]=pm(g,F):s==="scale"?o[s]=ue.merge(g,[Jh.getScaleDefaults(F.type),F]):ue._merger(s,o,c,p)}})}function Ug(s){s=s||Object.create(null);var o=s.data=s.data||{};return o.datasets=o.datasets||[],o.labels=o.labels||[],s.options=Ip(Os.global,Os[s.type],s.options||{}),s}function Bg(s){var o=s.options;ue.each(s.scales,function(c){lh.removeBox(s,c)}),o=Ip(Os.global,Os[s.config.type],o),s.options=s.config.options=o,s.ensureScalesHaveIDs(),s.buildOrUpdateScales(),s.tooltip._options=o.tooltips,s.tooltip.initialize()}function mm(s,o,c){var p,g=function(F){return F.id===p};do p=o+c++;while(ue.findIndex(s,g)>=0);return p}function vm(s){return s==="top"||s==="bottom"}function gm(s,o){return function(c,p){return c[s]===p[s]?c[o]-p[o]:c[s]-p[s]}}var yh=function(s,o){return this.construct(s,o),this};ue.extend(yh.prototype,{construct:function(s,o){var c=this;o=Ug(o);var p=Dh.acquireContext(s,o),g=p&&p.canvas,F=g&&g.height,K=g&&g.width;if(c.id=ue.uid(),c.ctx=p,c.canvas=g,c.config=o,c.width=K,c.height=F,c.aspectRatio=F?K/F:null,c.options=o.options,c._bufferedRender=!1,c._layers=[],c.chart=c,c.controller=c,yh.instances[c.id]=c,Object.defineProperty(c,"data",{get:function(){return c.config.data},set:function(Z){c.config.data=Z}}),!p||!g){console.error("Failed to create chart: can't acquire context from the given item");return}c.initialize(),c.update()},initialize:function(){var s=this;return Pa.notify(s,"beforeInit"),ue.retinaScale(s,s.options.devicePixelRatio),s.bindEvents(),s.options.responsive&&s.resize(!0),s.initToolTip(),Pa.notify(s,"afterInit"),s},clear:function(){return ue.canvas.clear(this),this},stop:function(){return zh.cancelAnimation(this),this},resize:function(s){var o=this,c=o.options,p=o.canvas,g=c.maintainAspectRatio&&o.aspectRatio||null,F=Math.max(0,Math.floor(ue.getMaximumWidth(p))),K=Math.max(0,Math.floor(g?F/g:ue.getMaximumHeight(p)));if(!(o.width===F&&o.height===K)&&(p.width=o.width=F,p.height=o.height=K,p.style.width=F+"px",p.style.height=K+"px",ue.retinaScale(o,c.devicePixelRatio),!s)){var Z={width:F,height:K};Pa.notify(o,"resize",[Z]),c.onResize&&c.onResize(o,Z),o.stop(),o.update({duration:c.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var s=this.options,o=s.scales||{},c=s.scale;ue.each(o.xAxes,function(p,g){p.id||(p.id=mm(o.xAxes,"x-axis-",g))}),ue.each(o.yAxes,function(p,g){p.id||(p.id=mm(o.yAxes,"y-axis-",g))}),c&&(c.id=c.id||"scale")},buildOrUpdateScales:function(){var s=this,o=s.options,c=s.scales||{},p=[],g=Object.keys(c).reduce(function(F,K){return F[K]=!1,F},{});o.scales&&(p=p.concat((o.scales.xAxes||[]).map(function(F){return{options:F,dtype:"category",dposition:"bottom"}}),(o.scales.yAxes||[]).map(function(F){return{options:F,dtype:"linear",dposition:"left"}}))),o.scale&&p.push({options:o.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ue.each(p,function(F){var K=F.options,Z=K.id,J=Pp(K.type,F.dtype);vm(K.position)!==vm(F.dposition)&&(K.position=F.dposition),g[Z]=!0;var te=null;if(Z in c&&c[Z].type===J)te=c[Z],te.options=K,te.ctx=s.ctx,te.chart=s;else{var ne=Jh.getScaleConstructor(J);if(!ne)return;te=new ne({id:Z,type:J,options:K,ctx:s.ctx,chart:s}),c[te.id]=te}te.mergeTicksOptions(),F.isDefault&&(s.scale=te)}),ue.each(g,function(F,K){F||delete c[K]}),s.scales=c,Jh.addScalesToLayout(this)},buildOrUpdateControllers:function(){var s=this,o=[],c=s.data.datasets,p,g;for(p=0,g=c.length;p<g;p++){var F=c[p],K=s.getDatasetMeta(p),Z=F.type||s.config.type;if(K.type&&K.type!==Z&&(s.destroyDatasetMeta(p),K=s.getDatasetMeta(p)),K.type=Z,K.order=F.order||0,K.index=p,K.controller)K.controller.updateIndex(p),K.controller.linkScales();else{var J=nm[K.type];if(J===void 0)throw new Error('"'+K.type+'" is not a chart type.');K.controller=new J(s,p),o.push(K.controller)}}return o},resetElements:function(){var s=this;ue.each(s.data.datasets,function(o,c){s.getDatasetMeta(c).controller.reset()},s)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(s){var o=this,c,p;if((!s||typeof s!="object")&&(s={duration:s,lazy:arguments[1]}),Bg(o),Pa._invalidate(o),Pa.notify(o,"beforeUpdate")!==!1){o.tooltip._data=o.data;var g=o.buildOrUpdateControllers();for(c=0,p=o.data.datasets.length;c<p;c++)o.getDatasetMeta(c).controller.buildOrUpdateElements();o.updateLayout(),o.options.animation&&o.options.animation.duration&&ue.each(g,function(F){F.reset()}),o.updateDatasets(),o.tooltip.initialize(),o.lastActive=[],Pa.notify(o,"afterUpdate"),o._layers.sort(gm("z","_idx")),o._bufferedRender?o._bufferedRequest={duration:s.duration,easing:s.easing,lazy:s.lazy}:o.render(s)}},updateLayout:function(){var s=this;Pa.notify(s,"beforeLayout")!==!1&&(lh.update(this,this.width,this.height),s._layers=[],ue.each(s.boxes,function(o){o._configure&&o._configure(),s._layers.push.apply(s._layers,o._layers())},s),s._layers.forEach(function(o,c){o._idx=c}),Pa.notify(s,"afterScaleUpdate"),Pa.notify(s,"afterLayout"))},updateDatasets:function(){var s=this;if(Pa.notify(s,"beforeDatasetsUpdate")!==!1){for(var o=0,c=s.data.datasets.length;o<c;++o)s.updateDataset(o);Pa.notify(s,"afterDatasetsUpdate")}},updateDataset:function(s){var o=this,c=o.getDatasetMeta(s),p={meta:c,index:s};Pa.notify(o,"beforeDatasetUpdate",[p])!==!1&&(c.controller._update(),Pa.notify(o,"afterDatasetUpdate",[p]))},render:function(s){var o=this;(!s||typeof s!="object")&&(s={duration:s,lazy:arguments[1]});var c=o.options.animation,p=Pp(s.duration,c&&c.duration),g=s.lazy;if(Pa.notify(o,"beforeRender")!==!1){var F=function(Z){Pa.notify(o,"afterRender"),ue.callback(c&&c.onComplete,[Z],o)};if(c&&p){var K=new Vh({numSteps:p/16.66,easing:s.easing||c.easing,render:function(Z,J){var te=ue.easing.effects[J.easing],ne=J.currentStep,ie=ne/J.numSteps;Z.draw(te(ie),ie,ne)},onAnimationProgress:c.onProgress,onAnimationComplete:F});zh.addAnimation(o,K,p,g)}else o.draw(),F(new Vh({numSteps:0,chart:o}));return o}},draw:function(s){var o=this,c,p;if(o.clear(),ue.isNullOrUndef(s)&&(s=1),o.transition(s),!(o.width<=0||o.height<=0)&&Pa.notify(o,"beforeDraw",[s])!==!1){for(p=o._layers,c=0;c<p.length&&p[c].z<=0;++c)p[c].draw(o.chartArea);for(o.drawDatasets(s);c<p.length;++c)p[c].draw(o.chartArea);o._drawTooltip(s),Pa.notify(o,"afterDraw",[s])}},transition:function(s){for(var o=this,c=0,p=(o.data.datasets||[]).length;c<p;++c)o.isDatasetVisible(c)&&o.getDatasetMeta(c).controller.transition(s);o.tooltip.transition(s)},_getSortedDatasetMetas:function(s){var o=this,c=o.data.datasets||[],p=[],g,F;for(g=0,F=c.length;g<F;++g)(!s||o.isDatasetVisible(g))&&p.push(o.getDatasetMeta(g));return p.sort(gm("order","index")),p},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(s){var o=this,c,p;if(Pa.notify(o,"beforeDatasetsDraw",[s])!==!1){for(c=o._getSortedVisibleDatasetMetas(),p=c.length-1;p>=0;--p)o.drawDataset(c[p],s);Pa.notify(o,"afterDatasetsDraw",[s])}},drawDataset:function(s,o){var c=this,p={meta:s,index:s.index,easingValue:o};Pa.notify(c,"beforeDatasetDraw",[p])!==!1&&(s.controller.draw(o),Pa.notify(c,"afterDatasetDraw",[p]))},_drawTooltip:function(s){var o=this,c=o.tooltip,p={tooltip:c,easingValue:s};Pa.notify(o,"beforeTooltipDraw",[p])!==!1&&(c.draw(),Pa.notify(o,"afterTooltipDraw",[p]))},getElementAtEvent:function(s){return Nh.modes.single(this,s)},getElementsAtEvent:function(s){return Nh.modes.label(this,s,{intersect:!0})},getElementsAtXAxis:function(s){return Nh.modes["x-axis"](this,s,{intersect:!0})},getElementsAtEventForMode:function(s,o,c){var p=Nh.modes[o];return typeof p=="function"?p(this,s,c):[]},getDatasetAtEvent:function(s){return Nh.modes.dataset(this,s,{intersect:!0})},getDatasetMeta:function(s){var o=this,c=o.data.datasets[s];c._meta||(c._meta={});var p=c._meta[o.id];return p||(p=c._meta[o.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:c.order||0,index:s}),p},getVisibleDatasetCount:function(){for(var s=0,o=0,c=this.data.datasets.length;o<c;++o)this.isDatasetVisible(o)&&s++;return s},isDatasetVisible:function(s){var o=this.getDatasetMeta(s);return typeof o.hidden=="boolean"?!o.hidden:!this.data.datasets[s].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(s){var o=this.id,c=this.data.datasets[s],p=c._meta&&c._meta[o];p&&(p.controller.destroy(),delete c._meta[o])},destroy:function(){var s=this,o=s.canvas,c,p;for(s.stop(),c=0,p=s.data.datasets.length;c<p;++c)s.destroyDatasetMeta(c);o&&(s.unbindEvents(),ue.canvas.clear(s),Dh.releaseContext(s.ctx),s.canvas=null,s.ctx=null),Pa.notify(s,"destroy"),delete yh.instances[s.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var s=this;s.tooltip=new Ep({_chart:s,_chartInstance:s,_data:s.data,_options:s.options.tooltips},s)},bindEvents:function(){var s=this,o=s._listeners={},c=function(){s.eventHandler.apply(s,arguments)};ue.each(s.options.events,function(p){Dh.addEventListener(s,p,c),o[p]=c}),s.options.responsive&&(c=function(){s.resize()},Dh.addEventListener(s,"resize",c),o.resize=c)},unbindEvents:function(){var s=this,o=s._listeners;o&&(delete s._listeners,ue.each(o,function(c,p){Dh.removeEventListener(s,p,c)}))},updateHoverStyle:function(s,o,c){var p=c?"set":"remove",g,F,K;for(F=0,K=s.length;F<K;++F)g=s[F],g&&this.getDatasetMeta(g._datasetIndex).controller[p+"HoverStyle"](g);o==="dataset"&&this.getDatasetMeta(s[0]._datasetIndex).controller["_"+p+"DatasetHoverStyle"]()},eventHandler:function(s){var o=this,c=o.tooltip;if(Pa.notify(o,"beforeEvent",[s])!==!1){o._bufferedRender=!0,o._bufferedRequest=null;var p=o.handleEvent(s);c&&(p=c._start?c.handleEvent(s):p|c.handleEvent(s)),Pa.notify(o,"afterEvent",[s]);var g=o._bufferedRequest;return g?o.render(g):p&&!o.animating&&(o.stop(),o.render({duration:o.options.hover.animationDuration,lazy:!0})),o._bufferedRender=!1,o._bufferedRequest=null,o}},handleEvent:function(s){var o=this,c=o.options||{},p=c.hover,g=!1;return o.lastActive=o.lastActive||[],s.type==="mouseout"?o.active=[]:o.active=o.getElementsAtEventForMode(s,p.mode,p),ue.callback(c.onHover||c.hover.onHover,[s.native,o.active],o),(s.type==="mouseup"||s.type==="click")&&c.onClick&&c.onClick.call(o,s.native,o.active),o.lastActive.length&&o.updateHoverStyle(o.lastActive,p.mode,!1),o.active.length&&p.mode&&o.updateHoverStyle(o.active,p.mode,!0),g=!ue.arrayEquals(o.active,o.lastActive),o.lastActive=o.active,g}}),yh.instances={};var wa=yh;yh.Controller=yh,yh.types={},ue.configMerge=Ip,ue.scaleMerge=pm;var Wg=function(){ue.where=function(p,g){if(ue.isArray(p)&&Array.prototype.filter)return p.filter(g);var F=[];return ue.each(p,function(K){g(K)&&F.push(K)}),F},ue.findIndex=Array.prototype.findIndex?function(p,g,F){return p.findIndex(g,F)}:function(p,g,F){F=F===void 0?p:F;for(var K=0,Z=p.length;K<Z;++K)if(g.call(F,p[K],K,p))return K;return-1},ue.findNextWhere=function(p,g,F){ue.isNullOrUndef(F)&&(F=-1);for(var K=F+1;K<p.length;K++){var Z=p[K];if(g(Z))return Z}},ue.findPreviousWhere=function(p,g,F){ue.isNullOrUndef(F)&&(F=p.length);for(var K=F-1;K>=0;K--){var Z=p[K];if(g(Z))return Z}},ue.isNumber=function(p){return!isNaN(parseFloat(p))&&isFinite(p)},ue.almostEquals=function(p,g,F){return Math.abs(p-g)<F},ue.almostWhole=function(p,g){var F=Math.round(p);return F-g<=p&&F+g>=p},ue.max=function(p){return p.reduce(function(g,F){return isNaN(F)?g:Math.max(g,F)},Number.NEGATIVE_INFINITY)},ue.min=function(p){return p.reduce(function(g,F){return isNaN(F)?g:Math.min(g,F)},Number.POSITIVE_INFINITY)},ue.sign=Math.sign?function(p){return Math.sign(p)}:function(p){return p=+p,p===0||isNaN(p)?p:p>0?1:-1},ue.toRadians=function(p){return p*(Math.PI/180)},ue.toDegrees=function(p){return p*(180/Math.PI)},ue._decimalPlaces=function(p){if(ue.isFinite(p)){for(var g=1,F=0;Math.round(p*g)/g!==p;)g*=10,F++;return F}},ue.getAngleFromPoint=function(p,g){var F=g.x-p.x,K=g.y-p.y,Z=Math.sqrt(F*F+K*K),J=Math.atan2(K,F);return J<-.5*Math.PI&&(J+=2*Math.PI),{angle:J,distance:Z}},ue.distanceBetweenPoints=function(p,g){return Math.sqrt(Math.pow(g.x-p.x,2)+Math.pow(g.y-p.y,2))},ue.aliasPixel=function(p){return p%2===0?0:.5},ue._alignPixel=function(p,g,F){var K=p.currentDevicePixelRatio,Z=F/2;return Math.round((g-Z)*K)/K+Z},ue.splineCurve=function(p,g,F,K){var Z=p.skip?g:p,J=g,te=F.skip?g:F,ne=Math.sqrt(Math.pow(J.x-Z.x,2)+Math.pow(J.y-Z.y,2)),ie=Math.sqrt(Math.pow(te.x-J.x,2)+Math.pow(te.y-J.y,2)),be=ne/(ne+ie),Ie=ie/(ne+ie);be=isNaN(be)?0:be,Ie=isNaN(Ie)?0:Ie;var qe=K*be,We=K*Ie;return{previous:{x:J.x-qe*(te.x-Z.x),y:J.y-qe*(te.y-Z.y)},next:{x:J.x+We*(te.x-Z.x),y:J.y+We*(te.y-Z.y)}}},ue.EPSILON=Number.EPSILON||1e-14,ue.splineCurveMonotone=function(p){var g=(p||[]).map(function(bt){return{model:bt._model,deltaK:0,mK:0}}),F=g.length,K,Z,J,te;for(K=0;K<F;++K)if(J=g[K],!J.model.skip){if(Z=K>0?g[K-1]:null,te=K<F-1?g[K+1]:null,te&&!te.model.skip){var ne=te.model.x-J.model.x;J.deltaK=ne!==0?(te.model.y-J.model.y)/ne:0}!Z||Z.model.skip?J.mK=J.deltaK:!te||te.model.skip?J.mK=Z.deltaK:this.sign(Z.deltaK)!==this.sign(J.deltaK)?J.mK=0:J.mK=(Z.deltaK+J.deltaK)/2}var ie,be,Ie,qe;for(K=0;K<F-1;++K)if(J=g[K],te=g[K+1],!(J.model.skip||te.model.skip)){if(ue.almostEquals(J.deltaK,0,this.EPSILON)){J.mK=te.mK=0;continue}ie=J.mK/J.deltaK,be=te.mK/J.deltaK,qe=Math.pow(ie,2)+Math.pow(be,2),!(qe<=9)&&(Ie=3/Math.sqrt(qe),J.mK=ie*Ie*J.deltaK,te.mK=be*Ie*J.deltaK)}var We;for(K=0;K<F;++K)J=g[K],!J.model.skip&&(Z=K>0?g[K-1]:null,te=K<F-1?g[K+1]:null,Z&&!Z.model.skip&&(We=(J.model.x-Z.model.x)/3,J.model.controlPointPreviousX=J.model.x-We,J.model.controlPointPreviousY=J.model.y-We*J.mK),te&&!te.model.skip&&(We=(te.model.x-J.model.x)/3,J.model.controlPointNextX=J.model.x+We,J.model.controlPointNextY=J.model.y+We*J.mK))},ue.nextItem=function(p,g,F){return F?g>=p.length-1?p[0]:p[g+1]:g>=p.length-1?p[p.length-1]:p[g+1]},ue.previousItem=function(p,g,F){return F?g<=0?p[p.length-1]:p[g-1]:g<=0?p[0]:p[g-1]},ue.niceNum=function(p,g){var F=Math.floor(ue.log10(p)),K=p/Math.pow(10,F),Z;return g?K<1.5?Z=1:K<3?Z=2:K<7?Z=5:Z=10:K<=1?Z=1:K<=2?Z=2:K<=5?Z=5:Z=10,Z*Math.pow(10,F)},ue.requestAnimFrame=(function(){return typeof window>"u"?function(p){p()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(p){return window.setTimeout(p,1e3/60)}})(),ue.getRelativePosition=function(p,g){var F,K,Z=p.originalEvent||p,J=p.target||p.srcElement,te=J.getBoundingClientRect(),ne=Z.touches;ne&&ne.length>0?(F=ne[0].clientX,K=ne[0].clientY):(F=Z.clientX,K=Z.clientY);var ie=parseFloat(ue.getStyle(J,"padding-left")),be=parseFloat(ue.getStyle(J,"padding-top")),Ie=parseFloat(ue.getStyle(J,"padding-right")),qe=parseFloat(ue.getStyle(J,"padding-bottom")),We=te.right-te.left-ie-Ie,bt=te.bottom-te.top-be-qe;return F=Math.round((F-te.left-ie)/We*J.width/g.currentDevicePixelRatio),K=Math.round((K-te.top-be)/bt*J.height/g.currentDevicePixelRatio),{x:F,y:K}};function s(p,g,F){var K;return typeof p=="string"?(K=parseInt(p,10),p.indexOf("%")!==-1&&(K=K/100*g.parentNode[F])):K=p,K}function o(p){return p!=null&&p!=="none"}function c(p,g,F){var K=document.defaultView,Z=ue._getParentNode(p),J=K.getComputedStyle(p)[g],te=K.getComputedStyle(Z)[g],ne=o(J),ie=o(te),be=Number.POSITIVE_INFINITY;return ne||ie?Math.min(ne?s(J,p,F):be,ie?s(te,Z,F):be):"none"}ue.getConstraintWidth=function(p){return c(p,"max-width","clientWidth")},ue.getConstraintHeight=function(p){return c(p,"max-height","clientHeight")},ue._calculatePadding=function(p,g,F){return g=ue.getStyle(p,g),g.indexOf("%")>-1?F*parseInt(g,10)/100:parseInt(g,10)},ue._getParentNode=function(p){var g=p.parentNode;return g&&g.toString()==="[object ShadowRoot]"&&(g=g.host),g},ue.getMaximumWidth=function(p){var g=ue._getParentNode(p);if(!g)return p.clientWidth;var F=g.clientWidth,K=ue._calculatePadding(g,"padding-left",F),Z=ue._calculatePadding(g,"padding-right",F),J=F-K-Z,te=ue.getConstraintWidth(p);return isNaN(te)?J:Math.min(J,te)},ue.getMaximumHeight=function(p){var g=ue._getParentNode(p);if(!g)return p.clientHeight;var F=g.clientHeight,K=ue._calculatePadding(g,"padding-top",F),Z=ue._calculatePadding(g,"padding-bottom",F),J=F-K-Z,te=ue.getConstraintHeight(p);return isNaN(te)?J:Math.min(J,te)},ue.getStyle=function(p,g){return p.currentStyle?p.currentStyle[g]:document.defaultView.getComputedStyle(p,null).getPropertyValue(g)},ue.retinaScale=function(p,g){var F=p.currentDevicePixelRatio=g||typeof window<"u"&&window.devicePixelRatio||1;if(F!==1){var K=p.canvas,Z=p.height,J=p.width;K.height=Z*F,K.width=J*F,p.ctx.scale(F,F),!K.style.height&&!K.style.width&&(K.style.height=Z+"px",K.style.width=J+"px")}},ue.fontString=function(p,g,F){return g+" "+p+"px "+F},ue.longestText=function(p,g,F,K){K=K||{};var Z=K.data=K.data||{},J=K.garbageCollect=K.garbageCollect||[];K.font!==g&&(Z=K.data={},J=K.garbageCollect=[],K.font=g),p.font=g;var te=0,ne=F.length,ie,be,Ie,qe,We;for(ie=0;ie<ne;ie++)if(qe=F[ie],qe!=null&&ue.isArray(qe)!==!0)te=ue.measureText(p,Z,J,te,qe);else if(ue.isArray(qe))for(be=0,Ie=qe.length;be<Ie;be++)We=qe[be],We!=null&&!ue.isArray(We)&&(te=ue.measureText(p,Z,J,te,We));var bt=J.length/2;if(bt>F.length){for(ie=0;ie<bt;ie++)delete Z[J[ie]];J.splice(0,bt)}return te},ue.measureText=function(p,g,F,K,Z){var J=g[Z];return J||(J=g[Z]=p.measureText(Z).width,F.push(Z)),J>K&&(K=J),K},ue.numberOfLabelLines=function(p){var g=1;return ue.each(p,function(F){ue.isArray(F)&&F.length>g&&(g=F.length)}),g},ue.color=ye?function(p){return p instanceof CanvasGradient&&(p=Os.global.defaultColor),ye(p)}:function(p){return console.error("Color.js not found!"),p},ue.getHoverColor=function(p){return p instanceof CanvasPattern||p instanceof CanvasGradient?p:ue.color(p).saturate(.5).darken(.1).rgbString()}};function Mh(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function op(s){this.options=s||{}}ue.extend(op.prototype,{formats:Mh,parse:Mh,format:Mh,add:Mh,diff:Mh,startOf:Mh,endOf:Mh,_create:function(s){return s}}),op.override=function(s){ue.extend(op.prototype,s)};var Kg=op,Tp={_date:Kg},Qh={formatters:{values:function(s){return ue.isArray(s)?s:""+s},linear:function(s,o,c){var p=c.length>3?c[2]-c[1]:c[1]-c[0];Math.abs(p)>1&&s!==Math.floor(s)&&(p=s-Math.floor(s));var g=ue.log10(Math.abs(p)),F="";if(s!==0){var K=Math.max(Math.abs(c[0]),Math.abs(c[c.length-1]));if(K<1e-4){var Z=ue.log10(Math.abs(s)),J=Math.floor(Z)-Math.floor(g);J=Math.max(Math.min(J,20),0),F=s.toExponential(J)}else{var te=-1*Math.floor(g);te=Math.max(Math.min(te,20),0),F=s.toFixed(te)}}else F="0";return F},logarithmic:function(s,o,c){var p=s/Math.pow(10,Math.floor(ue.log10(s)));return s===0?"0":p===1||p===2||p===5||o===0||o===c.length-1?s.toExponential():""}}},Rh=ue.isArray,Xh=ue.isNullOrUndef,Eh=ue.valueOrDefault,Ah=ue.valueAtIndexOrDefault;Os._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Qh.formatters.values,minor:{},major:{}}});function Yg(s,o){for(var c=[],p=s.length/o,g=0,F=s.length;g<F;g+=p)c.push(s[Math.floor(g)]);return c}function Hg(s,o,c){var p=s.getTicks().length,g=Math.min(o,p-1),F=s.getPixelForTick(g),K=s._startPixel,Z=s._endPixel,J=1e-6,te;if(!(c&&(p===1?te=Math.max(F-K,Z-F):o===0?te=(s.getPixelForTick(1)-F)/2:te=(F-s.getPixelForTick(g-1))/2,F+=g<o?te:-te,F<K-J||F>Z+J)))return F}function Gg(s,o){ue.each(s,function(c){var p=c.gc,g=p.length/2,F;if(g>o){for(F=0;F<g;++F)delete c.data[p[F]];p.splice(0,g)}})}function Jg(s,o,c,p){var g=c.length,F=[],K=[],Z=[],J=0,te=0,ne,ie,be,Ie,qe,We,bt,mi,pa,va,_a,ba,Ma;for(ne=0;ne<g;++ne){if(Ie=c[ne].label,qe=c[ne].major?o.major:o.minor,s.font=We=qe.string,bt=p[We]=p[We]||{data:{},gc:[]},mi=qe.lineHeight,pa=va=0,!Xh(Ie)&&!Rh(Ie))pa=ue.measureText(s,bt.data,bt.gc,pa,Ie),va=mi;else if(Rh(Ie))for(ie=0,be=Ie.length;ie<be;++ie)_a=Ie[ie],!Xh(_a)&&!Rh(_a)&&(pa=ue.measureText(s,bt.data,bt.gc,pa,_a),va+=mi);F.push(pa),K.push(va),Z.push(mi/2),J=Math.max(pa,J),te=Math.max(va,te)}Gg(p,g),ba=F.indexOf(J),Ma=K.indexOf(te);function Sa(Ra){return{width:F[Ra]||0,height:K[Ra]||0,offset:Z[Ra]||0}}return{first:Sa(0),last:Sa(g-1),widest:Sa(ba),highest:Sa(Ma)}}function Zh(s){return s.drawTicks?s.tickMarkLength:0}function Op(s){var o,c;return s.display?(o=ue.options._parseFont(s),c=ue.options.toPadding(s.padding),o.lineHeight+c.height):0}function ym(s,o){return ue.extend(ue.options._parseFont({fontFamily:Eh(o.fontFamily,s.fontFamily),fontSize:Eh(o.fontSize,s.fontSize),fontStyle:Eh(o.fontStyle,s.fontStyle),lineHeight:Eh(o.lineHeight,s.lineHeight)}),{color:ue.options.resolve([o.fontColor,s.fontColor,Os.global.defaultFontColor])})}function Cp(s){var o=ym(s,s.minor),c=s.major.enabled?ym(s,s.major):o;return{minor:o,major:c}}function Np(s){var o=[],c,p,g;for(p=0,g=s.length;p<g;++p)c=s[p],typeof c._index<"u"&&o.push(c);return o}function Qg(s){var o=s.length,c,p;if(o<2)return!1;for(p=s[0],c=1;c<o;++c)if(s[c]-s[c-1]!==p)return!1;return p}function Xg(s,o,c,p){var g=Qg(s),F=(o.length-1)/p,K,Z,J,te;if(!g)return Math.max(F,1);for(K=ue.math._factorize(g),J=0,te=K.length-1;J<te;J++)if(Z=K[J],Z>F)return Z;return Math.max(F,1)}function Zg(s){var o=[],c,p;for(c=0,p=s.length;c<p;c++)s[c].major&&o.push(c);return o}function ey(s,o,c){var p=0,g=o[0],F,K;for(c=Math.ceil(c),F=0;F<s.length;F++)K=s[F],F===g?(K._index=F,p++,g=o[p*c]):delete K.label}function lp(s,o,c,p){var g=Eh(c,0),F=Math.min(Eh(p,s.length),s.length),K=0,Z,J,te,ne;for(o=Math.ceil(o),p&&(Z=p-c,o=Z/Math.floor(Z/o)),ne=g;ne<0;)K++,ne=Math.round(g+K*o);for(J=Math.max(g,0);J<F;J++)te=s[J],J===ne?(te._index=J,K++,ne=Math.round(g+K*o)):delete te.label}var Dp=ah.extend({zeroLineIndex:0,getPadding:function(){var s=this;return{left:s.paddingLeft||0,top:s.paddingTop||0,right:s.paddingRight||0,bottom:s.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){ue.callback(this.options.beforeUpdate,[this])},update:function(s,o,c){var p=this,g=p.options.ticks,F=g.sampleSize,K,Z,J,te,ne;if(p.beforeUpdate(),p.maxWidth=s,p.maxHeight=o,p.margins=ue.extend({left:0,right:0,top:0,bottom:0},c),p._ticks=null,p.ticks=null,p._labelSizes=null,p._maxLabelLines=0,p.longestLabelWidth=0,p.longestTextCache=p.longestTextCache||{},p._gridLineItems=null,p._labelItems=null,p.beforeSetDimensions(),p.setDimensions(),p.afterSetDimensions(),p.beforeDataLimits(),p.determineDataLimits(),p.afterDataLimits(),p.beforeBuildTicks(),te=p.buildTicks()||[],te=p.afterBuildTicks(te)||te,(!te||!te.length)&&p.ticks)for(te=[],K=0,Z=p.ticks.length;K<Z;++K)te.push({value:p.ticks[K],major:!1});return p._ticks=te,ne=F<te.length,J=p._convertTicksToLabels(ne?Yg(te,F):te),p._configure(),p.beforeCalculateTickRotation(),p.calculateTickRotation(),p.afterCalculateTickRotation(),p.beforeFit(),p.fit(),p.afterFit(),p._ticksToDraw=g.display&&(g.autoSkip||g.source==="auto")?p._autoSkip(te):te,ne&&(J=p._convertTicksToLabels(p._ticksToDraw)),p.ticks=J,p.afterUpdate(),p.minSize},_configure:function(){var s=this,o=s.options.ticks.reverse,c,p;s.isHorizontal()?(c=s.left,p=s.right):(c=s.top,p=s.bottom,o=!o),s._startPixel=c,s._endPixel=p,s._reversePixels=o,s._length=p-c},afterUpdate:function(){ue.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ue.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var s=this;s.isHorizontal()?(s.width=s.maxWidth,s.left=0,s.right=s.width):(s.height=s.maxHeight,s.top=0,s.bottom=s.height),s.paddingLeft=0,s.paddingTop=0,s.paddingRight=0,s.paddingBottom=0},afterSetDimensions:function(){ue.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ue.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ue.noop,afterDataLimits:function(){ue.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ue.callback(this.options.beforeBuildTicks,[this])},buildTicks:ue.noop,afterBuildTicks:function(s){var o=this;return Rh(s)&&s.length?ue.callback(o.options.afterBuildTicks,[o,s]):(o.ticks=ue.callback(o.options.afterBuildTicks,[o,o.ticks])||o.ticks,s)},beforeTickToLabelConversion:function(){ue.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var s=this,o=s.options.ticks;s.ticks=s.ticks.map(o.userCallback||o.callback,this)},afterTickToLabelConversion:function(){ue.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ue.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var s=this,o=s.options,c=o.ticks,p=s.getTicks().length,g=c.minRotation||0,F=c.maxRotation,K=g,Z,J,te,ne,ie,be,Ie;if(!s._isVisible()||!c.display||g>=F||p<=1||!s.isHorizontal()){s.labelRotation=g;return}Z=s._getLabelSizes(),J=Z.widest.width,te=Z.highest.height-Z.highest.offset,ne=Math.min(s.maxWidth,s.chart.width-J),ie=o.offset?s.maxWidth/p:ne/(p-1),J+6>ie&&(ie=ne/(p-(o.offset?.5:1)),be=s.maxHeight-Zh(o.gridLines)-c.padding-Op(o.scaleLabel),Ie=Math.sqrt(J*J+te*te),K=ue.toDegrees(Math.min(Math.asin(Math.min((Z.highest.height+6)/ie,1)),Math.asin(Math.min(be/Ie,1))-Math.asin(te/Ie))),K=Math.max(g,Math.min(F,K))),s.labelRotation=K},afterCalculateTickRotation:function(){ue.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ue.callback(this.options.beforeFit,[this])},fit:function(){var s=this,o=s.minSize={width:0,height:0},c=s.chart,p=s.options,g=p.ticks,F=p.scaleLabel,K=p.gridLines,Z=s._isVisible(),J=p.position==="bottom",te=s.isHorizontal();if(te?o.width=s.maxWidth:Z&&(o.width=Zh(K)+Op(F)),te?Z&&(o.height=Zh(K)+Op(F)):o.height=s.maxHeight,g.display&&Z){var ne=Cp(g),ie=s._getLabelSizes(),be=ie.first,Ie=ie.last,qe=ie.widest,We=ie.highest,bt=ne.minor.lineHeight*.4,mi=g.padding;if(te){var pa=s.labelRotation!==0,va=ue.toRadians(s.labelRotation),_a=Math.cos(va),ba=Math.sin(va),Ma=ba*qe.width+_a*(We.height-(pa?We.offset:0))+(pa?0:bt);o.height=Math.min(s.maxHeight,o.height+Ma+mi);var Sa=s.getPixelForTick(0)-s.left,Ra=s.right-s.getPixelForTick(s.getTicks().length-1),Ta,Va;pa?(Ta=J?_a*be.width+ba*be.offset:ba*(be.height-be.offset),Va=J?ba*(Ie.height-Ie.offset):_a*Ie.width+ba*Ie.offset):(Ta=be.width/2,Va=Ie.width/2),s.paddingLeft=Math.max((Ta-Sa)*s.width/(s.width-Sa),0)+3,s.paddingRight=Math.max((Va-Ra)*s.width/(s.width-Ra),0)+3}else{var La=g.mirror?0:qe.width+mi+bt;o.width=Math.min(s.maxWidth,o.width+La),s.paddingTop=be.height/2,s.paddingBottom=Ie.height/2}}s.handleMargins(),te?(s.width=s._length=c.width-s.margins.left-s.margins.right,s.height=o.height):(s.width=o.width,s.height=s._length=c.height-s.margins.top-s.margins.bottom)},handleMargins:function(){var s=this;s.margins&&(s.margins.left=Math.max(s.paddingLeft,s.margins.left),s.margins.top=Math.max(s.paddingTop,s.margins.top),s.margins.right=Math.max(s.paddingRight,s.margins.right),s.margins.bottom=Math.max(s.paddingBottom,s.margins.bottom))},afterFit:function(){ue.callback(this.options.afterFit,[this])},isHorizontal:function(){var s=this.options.position;return s==="top"||s==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(s){if(Xh(s))return NaN;if((typeof s=="number"||s instanceof Number)&&!isFinite(s))return NaN;if(s){if(this.isHorizontal()){if(s.x!==void 0)return this.getRightValue(s.x)}else if(s.y!==void 0)return this.getRightValue(s.y)}return s},_convertTicksToLabels:function(s){var o=this,c,p,g;for(o.ticks=s.map(function(F){return F.value}),o.beforeTickToLabelConversion(),c=o.convertTicksToLabels(s)||o.ticks,o.afterTickToLabelConversion(),p=0,g=s.length;p<g;++p)s[p].label=c[p];return c},_getLabelSizes:function(){var s=this,o=s._labelSizes;return o||(s._labelSizes=o=Jg(s.ctx,Cp(s.options.ticks),s.getTicks(),s.longestTextCache),s.longestLabelWidth=o.widest.width),o},_parseValue:function(s){var o,c,p,g;return Rh(s)?(o=+this.getRightValue(s[0]),c=+this.getRightValue(s[1]),p=Math.min(o,c),g=Math.max(o,c)):(s=+this.getRightValue(s),o=void 0,c=s,p=s,g=s),{min:p,max:g,start:o,end:c}},_getScaleLabel:function(s){var o=this._parseValue(s);return o.start!==void 0?"["+o.start+", "+o.end+"]":+this.getRightValue(s)},getLabelForIndex:ue.noop,getPixelForValue:ue.noop,getValueForPixel:ue.noop,getPixelForTick:function(s){var o=this,c=o.options.offset,p=o._ticks.length,g=1/Math.max(p-(c?0:1),1);return s<0||s>p-1?null:o.getPixelForDecimal(s*g+(c?g/2:0))},getPixelForDecimal:function(s){var o=this;return o._reversePixels&&(s=1-s),o._startPixel+s*o._length},getDecimalForPixel:function(s){var o=(s-this._startPixel)/this._length;return this._reversePixels?1-o:o},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var s=this,o=s.min,c=s.max;return s.beginAtZero?0:o<0&&c<0?c:o>0&&c>0?o:0},_autoSkip:function(s){var o=this,c=o.options.ticks,p=o._length,g=c.maxTicksLimit||p/o._tickSize()+1,F=c.major.enabled?Zg(s):[],K=F.length,Z=F[0],J=F[K-1],te,ne,ie,be;if(K>g)return ey(s,F,K/g),Np(s);if(ie=Xg(F,s,p,g),K>0){for(te=0,ne=K-1;te<ne;te++)lp(s,ie,F[te],F[te+1]);return be=K>1?(J-Z)/(K-1):null,lp(s,ie,ue.isNullOrUndef(be)?0:Z-be,Z),lp(s,ie,J,ue.isNullOrUndef(be)?s.length:J+be),Np(s)}return lp(s,ie),Np(s)},_tickSize:function(){var s=this,o=s.options.ticks,c=ue.toRadians(s.labelRotation),p=Math.abs(Math.cos(c)),g=Math.abs(Math.sin(c)),F=s._getLabelSizes(),K=o.autoSkipPadding||0,Z=F?F.widest.width+K:0,J=F?F.highest.height+K:0;return s.isHorizontal()?J*p>Z*g?Z/p:J/g:J*g<Z*p?J/p:Z/g},_isVisible:function(){var s=this,o=s.chart,c=s.options.display,p,g,F;if(c!=="auto")return!!c;for(p=0,g=o.data.datasets.length;p<g;++p)if(o.isDatasetVisible(p)&&(F=o.getDatasetMeta(p),F.xAxisID===s.id||F.yAxisID===s.id))return!0;return!1},_computeGridLineItems:function(s){var o=this,c=o.chart,p=o.options,g=p.gridLines,F=p.position,K=g.offsetGridLines,Z=o.isHorizontal(),J=o._ticksToDraw,te=J.length+(K?1:0),ne=Zh(g),ie=[],be=g.drawBorder?Ah(g.lineWidth,0,0):0,Ie=be/2,qe=ue._alignPixel,We=function(Zy){return qe(c,Zy,be)},bt,mi,pa,va,_a,ba,Ma,Sa,Ra,Ta,Va,La,Da,za,Lh,Fh,Bp;for(F==="top"?(bt=We(o.bottom),Ma=o.bottom-ne,Ra=bt-Ie,Va=We(s.top)+Ie,Da=s.bottom):F==="bottom"?(bt=We(o.top),Va=s.top,Da=We(s.bottom)-Ie,Ma=bt+Ie,Ra=o.top+ne):F==="left"?(bt=We(o.right),ba=o.right-ne,Sa=bt-Ie,Ta=We(s.left)+Ie,La=s.right):(bt=We(o.left),Ta=s.left,La=We(s.right)-Ie,ba=bt+Ie,Sa=o.left+ne),mi=0;mi<te;++mi)pa=J[mi]||{},!(Xh(pa.label)&&mi<J.length)&&(mi===o.zeroLineIndex&&p.offset===K?(za=g.zeroLineWidth,Lh=g.zeroLineColor,Fh=g.zeroLineBorderDash||[],Bp=g.zeroLineBorderDashOffset||0):(za=Ah(g.lineWidth,mi,1),Lh=Ah(g.color,mi,"rgba(0,0,0,0.1)"),Fh=g.borderDash||[],Bp=g.borderDashOffset||0),va=Hg(o,pa._index||mi,K),va!==void 0&&(_a=qe(c,va,za),Z?ba=Sa=Ta=La=_a:Ma=Ra=Va=Da=_a,ie.push({tx1:ba,ty1:Ma,tx2:Sa,ty2:Ra,x1:Ta,y1:Va,x2:La,y2:Da,width:za,color:Lh,borderDash:Fh,borderDashOffset:Bp})));return ie.ticksLength=te,ie.borderValue=bt,ie},_computeLabelItems:function(){var s=this,o=s.options,c=o.ticks,p=o.position,g=c.mirror,F=s.isHorizontal(),K=s._ticksToDraw,Z=Cp(c),J=c.padding,te=Zh(o.gridLines),ne=-ue.toRadians(s.labelRotation),ie=[],be,Ie,qe,We,bt,mi,pa,va,_a,ba,Ma,Sa;for(p==="top"?(mi=s.bottom-te-J,pa=ne?"left":"center"):p==="bottom"?(mi=s.top+te+J,pa=ne?"right":"center"):p==="left"?(bt=s.right-(g?0:te)-J,pa=g?"left":"right"):(bt=s.left+(g?0:te)+J,pa=g?"right":"left"),be=0,Ie=K.length;be<Ie;++be)qe=K[be],We=qe.label,!Xh(We)&&(va=s.getPixelForTick(qe._index||be)+c.labelOffset,_a=qe.major?Z.major:Z.minor,ba=_a.lineHeight,Ma=Rh(We)?We.length:1,F?(bt=va,Sa=p==="top"?((ne?1:.5)-Ma)*ba:(ne?0:.5)*ba):(mi=va,Sa=(1-Ma)*ba/2),ie.push({x:bt,y:mi,rotation:ne,label:We,font:_a,textOffset:Sa,textAlign:pa}));return ie},_drawGrid:function(s){var o=this,c=o.options.gridLines;if(c.display){var p=o.ctx,g=o.chart,F=ue._alignPixel,K=c.drawBorder?Ah(c.lineWidth,0,0):0,Z=o._gridLineItems||(o._gridLineItems=o._computeGridLineItems(s)),J,te,ne,ie,be;for(ne=0,ie=Z.length;ne<ie;++ne)be=Z[ne],J=be.width,te=be.color,J&&te&&(p.save(),p.lineWidth=J,p.strokeStyle=te,p.setLineDash&&(p.setLineDash(be.borderDash),p.lineDashOffset=be.borderDashOffset),p.beginPath(),c.drawTicks&&(p.moveTo(be.tx1,be.ty1),p.lineTo(be.tx2,be.ty2)),c.drawOnChartArea&&(p.moveTo(be.x1,be.y1),p.lineTo(be.x2,be.y2)),p.stroke(),p.restore());if(K){var Ie=K,qe=Ah(c.lineWidth,Z.ticksLength-1,1),We=Z.borderValue,bt,mi,pa,va;o.isHorizontal()?(bt=F(g,o.left,Ie)-Ie/2,mi=F(g,o.right,qe)+qe/2,pa=va=We):(pa=F(g,o.top,Ie)-Ie/2,va=F(g,o.bottom,qe)+qe/2,bt=mi=We),p.lineWidth=K,p.strokeStyle=Ah(c.color,0),p.beginPath(),p.moveTo(bt,pa),p.lineTo(mi,va),p.stroke()}}},_drawLabels:function(){var s=this,o=s.options.ticks;if(o.display){var c=s.ctx,p=s._labelItems||(s._labelItems=s._computeLabelItems()),g,F,K,Z,J,te,ne,ie;for(g=0,K=p.length;g<K;++g){if(J=p[g],te=J.font,c.save(),c.translate(J.x,J.y),c.rotate(J.rotation),c.font=te.string,c.fillStyle=te.color,c.textBaseline="middle",c.textAlign=J.textAlign,ne=J.label,ie=J.textOffset,Rh(ne))for(F=0,Z=ne.length;F<Z;++F)c.fillText(""+ne[F],0,ie),ie+=te.lineHeight;else c.fillText(ne,0,ie);c.restore()}}},_drawTitle:function(){var s=this,o=s.ctx,c=s.options,p=c.scaleLabel;if(p.display){var g=Eh(p.fontColor,Os.global.defaultFontColor),F=ue.options._parseFont(p),K=ue.options.toPadding(p.padding),Z=F.lineHeight/2,J=c.position,te=0,ne,ie;if(s.isHorizontal())ne=s.left+s.width/2,ie=J==="bottom"?s.bottom-Z-K.bottom:s.top+Z+K.top;else{var be=J==="left";ne=be?s.left+Z+K.top:s.right-Z-K.top,ie=s.top+s.height/2,te=be?-.5*Math.PI:.5*Math.PI}o.save(),o.translate(ne,ie),o.rotate(te),o.textAlign="center",o.textBaseline="middle",o.fillStyle=g,o.font=F.string,o.fillText(p.labelString,0,0),o.restore()}},draw:function(s){var o=this;o._isVisible()&&(o._drawGrid(s),o._drawTitle(),o._drawLabels())},_layers:function(){var s=this,o=s.options,c=o.ticks&&o.ticks.z||0,p=o.gridLines&&o.gridLines.z||0;return!s._isVisible()||c===p||s.draw!==s._draw?[{z:c,draw:function(){s.draw.apply(s,arguments)}}]:[{z:p,draw:function(){s._drawGrid.apply(s,arguments),s._drawTitle.apply(s,arguments)}},{z:c,draw:function(){s._drawLabels.apply(s,arguments)}}]},_getMatchingVisibleMetas:function(s){var o=this,c=o.isHorizontal();return o.chart._getSortedVisibleDatasetMetas().filter(function(p){return(!s||p.type===s)&&(c?p.xAxisID===o.id:p.yAxisID===o.id)})}});Dp.prototype._draw=Dp.prototype.draw;var nh=Dp,Ap=ue.isNullOrUndef,ty={position:"bottom"},bm=nh.extend({determineDataLimits:function(){var s=this,o=s._getLabels(),c=s.options.ticks,p=c.min,g=c.max,F=0,K=o.length-1,Z;p!==void 0&&(Z=o.indexOf(p),Z>=0&&(F=Z)),g!==void 0&&(Z=o.indexOf(g),Z>=0&&(K=Z)),s.minIndex=F,s.maxIndex=K,s.min=o[F],s.max=o[K]},buildTicks:function(){var s=this,o=s._getLabels(),c=s.minIndex,p=s.maxIndex;s.ticks=c===0&&p===o.length-1?o:o.slice(c,p+1)},getLabelForIndex:function(s,o){var c=this,p=c.chart;return p.getDatasetMeta(o).controller._getValueScaleId()===c.id?c.getRightValue(p.data.datasets[o].data[s]):c._getLabels()[s]},_configure:function(){var s=this,o=s.options.offset,c=s.ticks;nh.prototype._configure.call(s),s.isHorizontal()||(s._reversePixels=!s._reversePixels),c&&(s._startValue=s.minIndex-(o?.5:0),s._valueRange=Math.max(c.length-(o?0:1),1))},getPixelForValue:function(s,o,c){var p=this,g,F,K;return!Ap(o)&&!Ap(c)&&(s=p.chart.data.datasets[c].data[o]),Ap(s)||(g=p.isHorizontal()?s.x:s.y),(g!==void 0||s!==void 0&&isNaN(o))&&(F=p._getLabels(),s=ue.valueOrDefault(g,s),K=F.indexOf(s),o=K!==-1?K:o,isNaN(o)&&(o=s)),p.getPixelForDecimal((o-p._startValue)/p._valueRange)},getPixelForTick:function(s){var o=this.ticks;return s<0||s>o.length-1?null:this.getPixelForValue(o[s],s+this.minIndex)},getValueForPixel:function(s){var o=this,c=Math.round(o._startValue+o.getDecimalForPixel(s)*o._valueRange);return Math.min(Math.max(c,0),o.ticks.length-1)},getBasePixel:function(){return this.bottom}}),ry=ty;bm._defaults=ry;var ny=ue.noop,Ph=ue.isNullOrUndef;function sy(s,o){var c=[],p=1e-14,g=s.stepSize,F=g||1,K=s.maxTicks-1,Z=s.min,J=s.max,te=s.precision,ne=o.min,ie=o.max,be=ue.niceNum((ie-ne)/K/F)*F,Ie,qe,We,bt;if(be<p&&Ph(Z)&&Ph(J))return[ne,ie];bt=Math.ceil(ie/be)-Math.floor(ne/be),bt>K&&(be=ue.niceNum(bt*be/K/F)*F),g||Ph(te)?Ie=Math.pow(10,ue._decimalPlaces(be)):(Ie=Math.pow(10,te),be=Math.ceil(be*Ie)/Ie),qe=Math.floor(ne/be)*be,We=Math.ceil(ie/be)*be,g&&(!Ph(Z)&&ue.almostWhole(Z/be,be/1e3)&&(qe=Z),!Ph(J)&&ue.almostWhole(J/be,be/1e3)&&(We=J)),bt=(We-qe)/be,ue.almostEquals(bt,Math.round(bt),be/1e3)?bt=Math.round(bt):bt=Math.ceil(bt),qe=Math.round(qe*Ie)/Ie,We=Math.round(We*Ie)/Ie,c.push(Ph(Z)?qe:Z);for(var mi=1;mi<bt;++mi)c.push(Math.round((qe+mi*be)*Ie)/Ie);return c.push(Ph(J)?We:J),c}var up=nh.extend({getRightValue:function(s){return typeof s=="string"?+s:nh.prototype.getRightValue.call(this,s)},handleTickRangeOptions:function(){var s=this,o=s.options,c=o.ticks;if(c.beginAtZero){var p=ue.sign(s.min),g=ue.sign(s.max);p<0&&g<0?s.max=0:p>0&&g>0&&(s.min=0)}var F=c.min!==void 0||c.suggestedMin!==void 0,K=c.max!==void 0||c.suggestedMax!==void 0;c.min!==void 0?s.min=c.min:c.suggestedMin!==void 0&&(s.min===null?s.min=c.suggestedMin:s.min=Math.min(s.min,c.suggestedMin)),c.max!==void 0?s.max=c.max:c.suggestedMax!==void 0&&(s.max===null?s.max=c.suggestedMax:s.max=Math.max(s.max,c.suggestedMax)),F!==K&&s.min>=s.max&&(F?s.max=s.min+1:s.min=s.max-1),s.min===s.max&&(s.max++,c.beginAtZero||s.min--)},getTickLimit:function(){var s=this,o=s.options.ticks,c=o.stepSize,p=o.maxTicksLimit,g;return c?g=Math.ceil(s.max/c)-Math.floor(s.min/c)+1:(g=s._computeTickLimit(),p=p||11),p&&(g=Math.min(p,g)),g},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ny,buildTicks:function(){var s=this,o=s.options,c=o.ticks,p=s.getTickLimit();p=Math.max(2,p);var g={maxTicks:p,min:c.min,max:c.max,precision:c.precision,stepSize:ue.valueOrDefault(c.fixedStepSize,c.stepSize)},F=s.ticks=sy(g,s);s.handleDirectionalChanges(),s.max=ue.max(F),s.min=ue.min(F),c.reverse?(F.reverse(),s.start=s.max,s.end=s.min):(s.start=s.min,s.end=s.max)},convertTicksToLabels:function(){var s=this;s.ticksAsNumbers=s.ticks.slice(),s.zeroLineIndex=s.ticks.indexOf(0),nh.prototype.convertTicksToLabels.call(s)},_configure:function(){var s=this,o=s.getTicks(),c=s.min,p=s.max,g;nh.prototype._configure.call(s),s.options.offset&&o.length&&(g=(p-c)/Math.max(o.length-1,1)/2,c-=g,p+=g),s._startValue=c,s._endValue=p,s._valueRange=p-c}}),iy={position:"left",ticks:{callback:Qh.formatters.linear}},ay=0,oy=1;function ly(s,o,c){var p=[c.type,o===void 0&&c.stack===void 0?c.index:"",c.stack].join(".");return s[p]===void 0&&(s[p]={pos:[],neg:[]}),s[p]}function uy(s,o,c,p){var g=s.options,F=g.stacked,K=ly(o,F,c),Z=K.pos,J=K.neg,te=p.length,ne,ie;for(ne=0;ne<te;++ne)ie=s._parseValue(p[ne]),!(isNaN(ie.min)||isNaN(ie.max)||c.data[ne].hidden)&&(Z[ne]=Z[ne]||0,J[ne]=J[ne]||0,g.relativePoints?Z[ne]=100:ie.min<0||ie.max<0?J[ne]+=ie.min:Z[ne]+=ie.max)}function cy(s,o,c){var p=c.length,g,F;for(g=0;g<p;++g)F=s._parseValue(c[g]),!(isNaN(F.min)||isNaN(F.max)||o.data[g].hidden)&&(s.min=Math.min(s.min,F.min),s.max=Math.max(s.max,F.max))}var _m=up.extend({determineDataLimits:function(){var s=this,o=s.options,c=s.chart,p=c.data.datasets,g=s._getMatchingVisibleMetas(),F=o.stacked,K={},Z=g.length,J,te,ne,ie;if(s.min=Number.POSITIVE_INFINITY,s.max=Number.NEGATIVE_INFINITY,F===void 0)for(J=0;!F&&J<Z;++J)te=g[J],F=te.stack!==void 0;for(J=0;J<Z;++J)te=g[J],ne=p[te.index].data,F?uy(s,K,te,ne):cy(s,te,ne);ue.each(K,function(be){ie=be.pos.concat(be.neg),s.min=Math.min(s.min,ue.min(ie)),s.max=Math.max(s.max,ue.max(ie))}),s.min=ue.isFinite(s.min)&&!isNaN(s.min)?s.min:ay,s.max=ue.isFinite(s.max)&&!isNaN(s.max)?s.max:oy,s.handleTickRangeOptions()},_computeTickLimit:function(){var s=this,o;return s.isHorizontal()?Math.ceil(s.width/40):(o=ue.options._parseFont(s.options.ticks),Math.ceil(s.height/o.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(s,o){return this._getScaleLabel(this.chart.data.datasets[o].data[s])},getPixelForValue:function(s){var o=this;return o.getPixelForDecimal((+o.getRightValue(s)-o._startValue)/o._valueRange)},getValueForPixel:function(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange},getPixelForTick:function(s){var o=this.ticksAsNumbers;return s<0||s>o.length-1?null:this.getPixelForValue(o[s])}}),dy=iy;_m._defaults=dy;var qp=ue.valueOrDefault,sh=ue.math.log10;function fy(s,o){var c=[],p=qp(s.min,Math.pow(10,Math.floor(sh(o.min)))),g=Math.floor(sh(o.max)),F=Math.ceil(o.max/Math.pow(10,g)),K,Z;p===0?(K=Math.floor(sh(o.minNotZero)),Z=Math.floor(o.minNotZero/Math.pow(10,K)),c.push(p),p=Z*Math.pow(10,K)):(K=Math.floor(sh(p)),Z=Math.floor(p/Math.pow(10,K)));var J=K<0?Math.pow(10,Math.abs(K)):1;do c.push(p),++Z,Z===10&&(Z=1,++K,J=K>=0?1:J),p=Math.round(Z*Math.pow(10,K)*J)/J;while(K<g||K===g&&Z<F);var te=qp(s.max,p);return c.push(te),c}var hy={position:"left",ticks:{callback:Qh.formatters.logarithmic}};function cp(s,o){return ue.isFinite(s)&&s>=0?s:o}var wm=nh.extend({determineDataLimits:function(){var s=this,o=s.options,c=s.chart,p=c.data.datasets,g=s.isHorizontal();function F(bt){return g?bt.xAxisID===s.id:bt.yAxisID===s.id}var K,Z,J,te,ne,ie;s.min=Number.POSITIVE_INFINITY,s.max=Number.NEGATIVE_INFINITY,s.minNotZero=Number.POSITIVE_INFINITY;var be=o.stacked;if(be===void 0){for(K=0;K<p.length;K++)if(Z=c.getDatasetMeta(K),c.isDatasetVisible(K)&&F(Z)&&Z.stack!==void 0){be=!0;break}}if(o.stacked||be){var Ie={};for(K=0;K<p.length;K++){Z=c.getDatasetMeta(K);var qe=[Z.type,o.stacked===void 0&&Z.stack===void 0?K:"",Z.stack].join(".");if(c.isDatasetVisible(K)&&F(Z))for(Ie[qe]===void 0&&(Ie[qe]=[]),te=p[K].data,ne=0,ie=te.length;ne<ie;ne++){var We=Ie[qe];J=s._parseValue(te[ne]),!(isNaN(J.min)||isNaN(J.max)||Z.data[ne].hidden||J.min<0||J.max<0)&&(We[ne]=We[ne]||0,We[ne]+=J.max)}}ue.each(Ie,function(bt){if(bt.length>0){var mi=ue.min(bt),pa=ue.max(bt);s.min=Math.min(s.min,mi),s.max=Math.max(s.max,pa)}})}else for(K=0;K<p.length;K++)if(Z=c.getDatasetMeta(K),c.isDatasetVisible(K)&&F(Z))for(te=p[K].data,ne=0,ie=te.length;ne<ie;ne++)J=s._parseValue(te[ne]),!(isNaN(J.min)||isNaN(J.max)||Z.data[ne].hidden||J.min<0||J.max<0)&&(s.min=Math.min(J.min,s.min),s.max=Math.max(J.max,s.max),J.min!==0&&(s.minNotZero=Math.min(J.min,s.minNotZero)));s.min=ue.isFinite(s.min)?s.min:null,s.max=ue.isFinite(s.max)?s.max:null,s.minNotZero=ue.isFinite(s.minNotZero)?s.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var s=this,o=s.options.ticks,c=1,p=10;s.min=cp(o.min,s.min),s.max=cp(o.max,s.max),s.min===s.max&&(s.min!==0&&s.min!==null?(s.min=Math.pow(10,Math.floor(sh(s.min))-1),s.max=Math.pow(10,Math.floor(sh(s.max))+1)):(s.min=c,s.max=p)),s.min===null&&(s.min=Math.pow(10,Math.floor(sh(s.max))-1)),s.max===null&&(s.max=s.min!==0?Math.pow(10,Math.floor(sh(s.min))+1):p),s.minNotZero===null&&(s.min>0?s.minNotZero=s.min:s.max<1?s.minNotZero=Math.pow(10,Math.floor(sh(s.max))):s.minNotZero=c)},buildTicks:function(){var s=this,o=s.options.ticks,c=!s.isHorizontal(),p={min:cp(o.min),max:cp(o.max)},g=s.ticks=fy(p,s);s.max=ue.max(g),s.min=ue.min(g),o.reverse?(c=!c,s.start=s.max,s.end=s.min):(s.start=s.min,s.end=s.max),c&&g.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),nh.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(s,o){return this._getScaleLabel(this.chart.data.datasets[o].data[s])},getPixelForTick:function(s){var o=this.tickValues;return s<0||s>o.length-1?null:this.getPixelForValue(o[s])},_getFirstTickValue:function(s){var o=Math.floor(sh(s)),c=Math.floor(s/Math.pow(10,o));return c*Math.pow(10,o)},_configure:function(){var s=this,o=s.min,c=0;nh.prototype._configure.call(s),o===0&&(o=s._getFirstTickValue(s.minNotZero),c=qp(s.options.ticks.fontSize,Os.global.defaultFontSize)/s._length),s._startValue=sh(o),s._valueOffset=c,s._valueRange=(sh(s.max)-sh(o))/(1-c)},getPixelForValue:function(s){var o=this,c=0;return s=+o.getRightValue(s),s>o.min&&s>0&&(c=(sh(s)-o._startValue)/o._valueRange+o._valueOffset),o.getPixelForDecimal(c)},getValueForPixel:function(s){var o=this,c=o.getDecimalForPixel(s);return c===0&&o.min===0?0:Math.pow(10,o._startValue+(c-o._valueOffset)*o._valueRange)}}),py=hy;wm._defaults=py;var dp=ue.valueOrDefault,Lp=ue.valueAtIndexOrDefault,$m=ue.options.resolve,my={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Qh.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(s){return s}}};function Fp(s){var o=s.ticks;return o.display&&s.display?dp(o.fontSize,Os.global.defaultFontSize)+o.backdropPaddingY*2:0}function vy(s,o,c){return ue.isArray(c)?{w:ue.longestText(s,s.font,c),h:c.length*o}:{w:s.measureText(c).width,h:o}}function km(s,o,c,p,g){return s===p||s===g?{start:o-c/2,end:o+c/2}:s<p||s>g?{start:o-c,end:o}:{start:o,end:o+c}}function gy(s){var o=ue.options._parseFont(s.options.pointLabels),c={l:0,r:s.width,t:0,b:s.height-s.paddingTop},p={},g,F,K;s.ctx.font=o.string,s._pointLabelSizes=[];var Z=s.chart.data.labels.length;for(g=0;g<Z;g++){K=s.getPointPosition(g,s.drawingArea+5),F=vy(s.ctx,o.lineHeight,s.pointLabels[g]),s._pointLabelSizes[g]=F;var J=s.getIndexAngle(g),te=ue.toDegrees(J)%360,ne=km(te,K.x,F.w,0,180),ie=km(te,K.y,F.h,90,270);ne.start<c.l&&(c.l=ne.start,p.l=J),ne.end>c.r&&(c.r=ne.end,p.r=J),ie.start<c.t&&(c.t=ie.start,p.t=J),ie.end>c.b&&(c.b=ie.end,p.b=J)}s.setReductions(s.drawingArea,c,p)}function yy(s){return s===0||s===180?"center":s<180?"left":"right"}function by(s,o,c,p){var g=c.y+p/2,F,K;if(ue.isArray(o))for(F=0,K=o.length;F<K;++F)s.fillText(o[F],c.x,g),g+=p;else s.fillText(o,c.x,g)}function _y(s,o,c){s===90||s===270?c.y-=o.h/2:(s>270||s<90)&&(c.y-=o.h)}function wy(s){var o=s.ctx,c=s.options,p=c.pointLabels,g=Fp(c),F=s.getDistanceFromCenterForValue(c.ticks.reverse?s.min:s.max),K=ue.options._parseFont(p);o.save(),o.font=K.string,o.textBaseline="middle";for(var Z=s.chart.data.labels.length-1;Z>=0;Z--){var J=Z===0?g/2:0,te=s.getPointPosition(Z,F+J+5),ne=Lp(p.fontColor,Z,Os.global.defaultFontColor);o.fillStyle=ne;var ie=s.getIndexAngle(Z),be=ue.toDegrees(ie);o.textAlign=yy(be),_y(be,s._pointLabelSizes[Z],te),by(o,s.pointLabels[Z],te,K.lineHeight)}o.restore()}function $y(s,o,c,p){var g=s.ctx,F=o.circular,K=s.chart.data.labels.length,Z=Lp(o.color,p-1),J=Lp(o.lineWidth,p-1),te;if(!(!F&&!K||!Z||!J)){if(g.save(),g.strokeStyle=Z,g.lineWidth=J,g.setLineDash&&(g.setLineDash(o.borderDash||[]),g.lineDashOffset=o.borderDashOffset||0),g.beginPath(),F)g.arc(s.xCenter,s.yCenter,c,0,Math.PI*2);else{te=s.getPointPosition(0,c),g.moveTo(te.x,te.y);for(var ne=1;ne<K;ne++)te=s.getPointPosition(ne,c),g.lineTo(te.x,te.y)}g.closePath(),g.stroke(),g.restore()}}function fp(s){return ue.isNumber(s)?s:0}var Sm=up.extend({setDimensions:function(){var s=this;s.width=s.maxWidth,s.height=s.maxHeight,s.paddingTop=Fp(s.options)/2,s.xCenter=Math.floor(s.width/2),s.yCenter=Math.floor((s.height-s.paddingTop)/2),s.drawingArea=Math.min(s.height-s.paddingTop,s.width)/2},determineDataLimits:function(){var s=this,o=s.chart,c=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;ue.each(o.data.datasets,function(g,F){if(o.isDatasetVisible(F)){var K=o.getDatasetMeta(F);ue.each(g.data,function(Z,J){var te=+s.getRightValue(Z);isNaN(te)||K.data[J].hidden||(c=Math.min(te,c),p=Math.max(te,p))})}}),s.min=c===Number.POSITIVE_INFINITY?0:c,s.max=p===Number.NEGATIVE_INFINITY?0:p,s.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Fp(this.options))},convertTicksToLabels:function(){var s=this;up.prototype.convertTicksToLabels.call(s),s.pointLabels=s.chart.data.labels.map(function(){var o=ue.callback(s.options.pointLabels.callback,arguments,s);return o||o===0?o:""})},getLabelForIndex:function(s,o){return+this.getRightValue(this.chart.data.datasets[o].data[s])},fit:function(){var s=this,o=s.options;o.display&&o.pointLabels.display?gy(s):s.setCenterPoint(0,0,0,0)},setReductions:function(s,o,c){var p=this,g=o.l/Math.sin(c.l),F=Math.max(o.r-p.width,0)/Math.sin(c.r),K=-o.t/Math.cos(c.t),Z=-Math.max(o.b-(p.height-p.paddingTop),0)/Math.cos(c.b);g=fp(g),F=fp(F),K=fp(K),Z=fp(Z),p.drawingArea=Math.min(Math.floor(s-(g+F)/2),Math.floor(s-(K+Z)/2)),p.setCenterPoint(g,F,K,Z)},setCenterPoint:function(s,o,c,p){var g=this,F=g.width-o-g.drawingArea,K=s+g.drawingArea,Z=c+g.drawingArea,J=g.height-g.paddingTop-p-g.drawingArea;g.xCenter=Math.floor((K+F)/2+g.left),g.yCenter=Math.floor((Z+J)/2+g.top+g.paddingTop)},getIndexAngle:function(s){var o=this.chart,c=360/o.data.labels.length,p=o.options||{},g=p.startAngle||0,F=(s*c+g)%360;return(F<0?F+360:F)*Math.PI*2/360},getDistanceFromCenterForValue:function(s){var o=this;if(ue.isNullOrUndef(s))return NaN;var c=o.drawingArea/(o.max-o.min);return o.options.ticks.reverse?(o.max-s)*c:(s-o.min)*c},getPointPosition:function(s,o){var c=this,p=c.getIndexAngle(s)-Math.PI/2;return{x:Math.cos(p)*o+c.xCenter,y:Math.sin(p)*o+c.yCenter}},getPointPositionForValue:function(s,o){return this.getPointPosition(s,this.getDistanceFromCenterForValue(o))},getBasePosition:function(s){var o=this,c=o.min,p=o.max;return o.getPointPositionForValue(s||0,o.beginAtZero?0:c<0&&p<0?p:c>0&&p>0?c:0)},_drawGrid:function(){var s=this,o=s.ctx,c=s.options,p=c.gridLines,g=c.angleLines,F=dp(g.lineWidth,p.lineWidth),K=dp(g.color,p.color),Z,J,te;if(c.pointLabels.display&&wy(s),p.display&&ue.each(s.ticks,function(ne,ie){ie!==0&&(J=s.getDistanceFromCenterForValue(s.ticksAsNumbers[ie]),$y(s,p,J,ie))}),g.display&&F&&K){for(o.save(),o.lineWidth=F,o.strokeStyle=K,o.setLineDash&&(o.setLineDash($m([g.borderDash,p.borderDash,[]])),o.lineDashOffset=$m([g.borderDashOffset,p.borderDashOffset,0])),Z=s.chart.data.labels.length-1;Z>=0;Z--)J=s.getDistanceFromCenterForValue(c.ticks.reverse?s.min:s.max),te=s.getPointPosition(Z,J),o.beginPath(),o.moveTo(s.xCenter,s.yCenter),o.lineTo(te.x,te.y),o.stroke();o.restore()}},_drawLabels:function(){var s=this,o=s.ctx,c=s.options,p=c.ticks;if(p.display){var g=s.getIndexAngle(0),F=ue.options._parseFont(p),K=dp(p.fontColor,Os.global.defaultFontColor),Z,J;o.save(),o.font=F.string,o.translate(s.xCenter,s.yCenter),o.rotate(g),o.textAlign="center",o.textBaseline="middle",ue.each(s.ticks,function(te,ne){ne===0&&!p.reverse||(Z=s.getDistanceFromCenterForValue(s.ticksAsNumbers[ne]),p.showLabelBackdrop&&(J=o.measureText(te).width,o.fillStyle=p.backdropColor,o.fillRect(-J/2-p.backdropPaddingX,-Z-F.size/2-p.backdropPaddingY,J+p.backdropPaddingX*2,F.size+p.backdropPaddingY*2)),o.fillStyle=K,o.fillText(te,0,-Z))}),o.restore()}},_drawTitle:ue.noop}),ky=my;Sm._defaults=ky;var jp=ue._deprecated,xm=ue.options.resolve,Sy=ue.valueOrDefault,Mm=Number.MIN_SAFE_INTEGER||-9007199254740991,Vp=Number.MAX_SAFE_INTEGER||9007199254740991,hp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ih=Object.keys(hp);function Rm(s,o){return s-o}function xy(s){var o={},c=[],p,g,F;for(p=0,g=s.length;p<g;++p)F=s[p],o[F]||(o[F]=!0,c.push(F));return c}function Em(s){return ue.valueOrDefault(s.time.min,s.ticks.min)}function Pm(s){return ue.valueOrDefault(s.time.max,s.ticks.max)}function My(s,o,c,p){if(p==="linear"||!s.length)return[{time:o,pos:0},{time:c,pos:1}];var g=[],F=[o],K,Z,J,te,ne;for(K=0,Z=s.length;K<Z;++K)te=s[K],te>o&&te<c&&F.push(te);for(F.push(c),K=0,Z=F.length;K<Z;++K)ne=F[K+1],J=F[K-1],te=F[K],(J===void 0||ne===void 0||Math.round((ne+J)/2)!==te)&&g.push({time:te,pos:K/(Z-1)});return g}function Ry(s,o,c){for(var p=0,g=s.length-1,F,K,Z;p>=0&&p<=g;)if(F=p+g>>1,K=s[F-1]||null,Z=s[F],K)if(Z[o]<c)p=F+1;else if(K[o]>c)g=F-1;else return{lo:K,hi:Z};else return{lo:null,hi:Z};return{lo:Z,hi:null}}function qh(s,o,c,p){var g=Ry(s,o,c),F=g.lo?g.hi?g.lo:s[s.length-2]:s[0],K=g.lo?g.hi?g.hi:s[s.length-1]:s[1],Z=K[o]-F[o],J=Z?(c-F[o])/Z:0,te=(K[p]-F[p])*J;return F[p]+te}function zp(s,o){var c=s._adapter,p=s.options.time,g=p.parser,F=g||p.format,K=o;return typeof g=="function"&&(K=g(K)),ue.isFinite(K)||(K=typeof F=="string"?c.parse(K,F):c.parse(K)),K!==null?+K:(!g&&typeof F=="function"&&(K=F(o),ue.isFinite(K)||(K=c.parse(K))),K)}function Ih(s,o){if(ue.isNullOrUndef(o))return null;var c=s.options.time,p=zp(s,s.getRightValue(o));return p===null||c.round&&(p=+s._adapter.startOf(p,c.round)),p}function Im(s,o,c,p){var g=ih.length,F,K,Z;for(F=ih.indexOf(s);F<g-1;++F)if(K=hp[ih[F]],Z=K.steps?K.steps:Vp,K.common&&Math.ceil((c-o)/(Z*K.size))<=p)return ih[F];return ih[g-1]}function Ey(s,o,c,p,g){var F,K;for(F=ih.length-1;F>=ih.indexOf(c);F--)if(K=ih[F],hp[K].common&&s._adapter.diff(g,p,K)>=o-1)return K;return ih[c?ih.indexOf(c):0]}function Py(s){for(var o=ih.indexOf(s)+1,c=ih.length;o<c;++o)if(hp[ih[o]].common)return ih[o]}function Iy(s,o,c,p){var g=s._adapter,F=s.options,K=F.time,Z=K.unit||Im(K.minUnit,o,c,p),J=xm([K.stepSize,K.unitStepSize,1]),te=Z==="week"?K.isoWeekday:!1,ne=o,ie=[],be;if(te&&(ne=+g.startOf(ne,"isoWeek",te)),ne=+g.startOf(ne,te?"day":Z),g.diff(c,o,Z)>1e5*J)throw o+" and "+c+" are too far apart with stepSize of "+J+" "+Z;for(be=ne;be<c;be=+g.add(be,J,Z))ie.push(be);return(be===c||F.bounds==="ticks")&&ie.push(be),ie}function Ty(s,o,c,p,g){var F=0,K=0,Z,J;return g.offset&&o.length&&(Z=qh(s,"time",o[0],"pos"),o.length===1?F=1-Z:F=(qh(s,"time",o[1],"pos")-Z)/2,J=qh(s,"time",o[o.length-1],"pos"),o.length===1?K=J:K=(J-qh(s,"time",o[o.length-2],"pos"))/2),{start:F,end:K,factor:1/(F+1+K)}}function Oy(s,o,c,p){var g=s._adapter,F=+g.startOf(o[0].value,p),K=o[o.length-1].value,Z,J;for(Z=F;Z<=K;Z=+g.add(Z,1,p))J=c[Z],J>=0&&(o[J].major=!0);return o}function Tm(s,o,c){var p=[],g={},F=o.length,K,Z;for(K=0;K<F;++K)Z=o[K],g[Z]=K,p.push({value:Z,major:!1});return F===0||!c?p:Oy(s,p,g,c)}var Cy={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Om=nh.extend({initialize:function(){this.mergeTicksOptions(),nh.prototype.initialize.call(this)},update:function(){var s=this,o=s.options,c=o.time||(o.time={}),p=s._adapter=new Tp._date(o.adapters.date);return jp("time scale",c.format,"time.format","time.parser"),jp("time scale",c.min,"time.min","ticks.min"),jp("time scale",c.max,"time.max","ticks.max"),ue.mergeIf(c.displayFormats,p.formats()),nh.prototype.update.apply(s,arguments)},getRightValue:function(s){return s&&s.t!==void 0&&(s=s.t),nh.prototype.getRightValue.call(this,s)},determineDataLimits:function(){var s=this,o=s.chart,c=s._adapter,p=s.options,g=p.time.unit||"day",F=Vp,K=Mm,Z=[],J=[],te=[],ne,ie,be,Ie,qe,We,bt,mi=s._getLabels();for(ne=0,be=mi.length;ne<be;++ne)te.push(Ih(s,mi[ne]));for(ne=0,be=(o.data.datasets||[]).length;ne<be;++ne)if(o.isDatasetVisible(ne))if(qe=o.data.datasets[ne].data,ue.isObject(qe[0]))for(J[ne]=[],ie=0,Ie=qe.length;ie<Ie;++ie)We=Ih(s,qe[ie]),Z.push(We),J[ne][ie]=We;else J[ne]=te.slice(0),bt||(Z=Z.concat(te),bt=!0);else J[ne]=[];te.length&&(F=Math.min(F,te[0]),K=Math.max(K,te[te.length-1])),Z.length&&(Z=be>1?xy(Z).sort(Rm):Z.sort(Rm),F=Math.min(F,Z[0]),K=Math.max(K,Z[Z.length-1])),F=Ih(s,Em(p))||F,K=Ih(s,Pm(p))||K,F=F===Vp?+c.startOf(Date.now(),g):F,K=K===Mm?+c.endOf(Date.now(),g)+1:K,s.min=Math.min(F,K),s.max=Math.max(F+1,K),s._table=[],s._timestamps={data:Z,datasets:J,labels:te}},buildTicks:function(){var s=this,o=s.min,c=s.max,p=s.options,g=p.ticks,F=p.time,K=s._timestamps,Z=[],J=s.getLabelCapacity(o),te=g.source,ne=p.distribution,ie,be,Ie;for(te==="data"||te==="auto"&&ne==="series"?K=K.data:te==="labels"?K=K.labels:K=Iy(s,o,c,J),p.bounds==="ticks"&&K.length&&(o=K[0],c=K[K.length-1]),o=Ih(s,Em(p))||o,c=Ih(s,Pm(p))||c,ie=0,be=K.length;ie<be;++ie)Ie=K[ie],Ie>=o&&Ie<=c&&Z.push(Ie);return s.min=o,s.max=c,s._unit=F.unit||(g.autoSkip?Im(F.minUnit,s.min,s.max,J):Ey(s,Z.length,F.minUnit,s.min,s.max)),s._majorUnit=!g.major.enabled||s._unit==="year"?void 0:Py(s._unit),s._table=My(s._timestamps.data,o,c,ne),s._offsets=Ty(s._table,Z,o,c,p),g.reverse&&Z.reverse(),Tm(s,Z,s._majorUnit)},getLabelForIndex:function(s,o){var c=this,p=c._adapter,g=c.chart.data,F=c.options.time,K=g.labels&&s<g.labels.length?g.labels[s]:"",Z=g.datasets[o].data[s];return ue.isObject(Z)&&(K=c.getRightValue(Z)),F.tooltipFormat?p.format(zp(c,K),F.tooltipFormat):typeof K=="string"?K:p.format(zp(c,K),F.displayFormats.datetime)},tickFormatFunction:function(s,o,c,p){var g=this,F=g._adapter,K=g.options,Z=K.time.displayFormats,J=Z[g._unit],te=g._majorUnit,ne=Z[te],ie=c[o],be=K.ticks,Ie=te&&ne&&ie&&ie.major,qe=F.format(s,p||(Ie?ne:J)),We=Ie?be.major:be.minor,bt=xm([We.callback,We.userCallback,be.callback,be.userCallback]);return bt?bt(qe,o,c):qe},convertTicksToLabels:function(s){var o=[],c,p;for(c=0,p=s.length;c<p;++c)o.push(this.tickFormatFunction(s[c].value,c,s));return o},getPixelForOffset:function(s){var o=this,c=o._offsets,p=qh(o._table,"time",s,"pos");return o.getPixelForDecimal((c.start+p)*c.factor)},getPixelForValue:function(s,o,c){var p=this,g=null;if(o!==void 0&&c!==void 0&&(g=p._timestamps.datasets[c][o]),g===null&&(g=Ih(p,s)),g!==null)return p.getPixelForOffset(g)},getPixelForTick:function(s){var o=this.getTicks();return s>=0&&s<o.length?this.getPixelForOffset(o[s].value):null},getValueForPixel:function(s){var o=this,c=o._offsets,p=o.getDecimalForPixel(s)/c.factor-c.end,g=qh(o._table,"pos",p,"time");return o._adapter._create(g)},_getLabelSize:function(s){var o=this,c=o.options.ticks,p=o.ctx.measureText(s).width,g=ue.toRadians(o.isHorizontal()?c.maxRotation:c.minRotation),F=Math.cos(g),K=Math.sin(g),Z=Sy(c.fontSize,Os.global.defaultFontSize);return{w:p*F+Z*K,h:p*K+Z*F}},getLabelWidth:function(s){return this._getLabelSize(s).w},getLabelCapacity:function(s){var o=this,c=o.options.time,p=c.displayFormats,g=p[c.unit]||p.millisecond,F=o.tickFormatFunction(s,0,Tm(o,[s],o._majorUnit),g),K=o._getLabelSize(F),Z=Math.floor(o.isHorizontal()?o.width/K.w:o.height/K.h);return o.options.offset&&Z--,Z>0?Z:1}}),Ny=Cy;Om._defaults=Ny;var Dy={category:bm,linear:_m,logarithmic:wm,radialLinear:Sm,time:Om},Ay={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Tp._date.override(typeof r=="function"?{_id:"moment",formats:function(){return Ay},parse:function(s,o){return typeof s=="string"&&typeof o=="string"?s=r(s,o):s instanceof r||(s=r(s)),s.isValid()?s.valueOf():null},format:function(s,o){return r(s).format(o)},add:function(s,o,c){return r(s).add(o,c).valueOf()},diff:function(s,o,c){return r(s).diff(r(o),c)},startOf:function(s,o,c){return s=r(s),o==="isoWeek"?s.isoWeekday(c).valueOf():s.startOf(o).valueOf()},endOf:function(s,o){return r(s).endOf(o).valueOf()},_create:function(s){return r(s)}}:{}),Os._set("global",{plugins:{filler:{propagate:!0}}});var qy={dataset:function(s){var o=s.fill,c=s.chart,p=c.getDatasetMeta(o),g=p&&c.isDatasetVisible(o),F=g&&p.dataset._children||[],K=F.length||0;return K?function(Z,J){return J<K&&F[J]._view||null}:null},boundary:function(s){var o=s.boundary,c=o?o.x:null,p=o?o.y:null;return ue.isArray(o)?function(g,F){return o[F]}:function(g){return{x:c===null?g.x:c,y:p===null?g.y:p}}}};function Ly(s,o,c){var p=s._model||{},g=p.fill,F;if(g===void 0&&(g=!!p.backgroundColor),g===!1||g===null)return!1;if(g===!0)return"origin";if(F=parseFloat(g,10),isFinite(F)&&Math.floor(F)===F)return(g[0]==="-"||g[0]==="+")&&(F=o+F),F===o||F<0||F>=c?!1:F;switch(g){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return g;default:return!1}}function Fy(s){var o=s.el._model||{},c=s.el._scale||{},p=s.fill,g=null,F;if(isFinite(p))return null;if(p==="start"?g=o.scaleBottom===void 0?c.bottom:o.scaleBottom:p==="end"?g=o.scaleTop===void 0?c.top:o.scaleTop:o.scaleZero!==void 0?g=o.scaleZero:c.getBasePixel&&(g=c.getBasePixel()),g!=null){if(g.x!==void 0&&g.y!==void 0)return g;if(ue.isFinite(g))return F=c.isHorizontal(),{x:F?g:null,y:F?null:g}}return null}function jy(s){var o=s.el._scale,c=o.options,p=o.chart.data.labels.length,g=s.fill,F=[],K,Z,J,te,ne;if(!p)return null;for(K=c.ticks.reverse?o.max:o.min,Z=c.ticks.reverse?o.min:o.max,J=o.getPointPositionForValue(0,K),te=0;te<p;++te)ne=g==="start"||g==="end"?o.getPointPositionForValue(te,g==="start"?K:Z):o.getBasePosition(te),c.gridLines.circular&&(ne.cx=J.x,ne.cy=J.y,ne.angle=o.getIndexAngle(te)-Math.PI/2),F.push(ne);return F}function Vy(s){var o=s.el._scale||{};return o.getPointPositionForValue?jy(s):Fy(s)}function zy(s,o,c){var p=s[o],g=p.fill,F=[o],K;if(!c)return g;for(;g!==!1&&F.indexOf(g)===-1;){if(!isFinite(g))return g;if(K=s[g],!K)return!1;if(K.visible)return g;F.push(g),g=K.fill}return!1}function Uy(s){var o=s.fill,c="dataset";return o===!1?null:(isFinite(o)||(c="boundary"),qy[c](s))}function Cm(s){return s&&!s.skip}function Nm(s,o,c,p,g){var F,K,Z,J;if(!(!p||!g)){for(s.moveTo(o[0].x,o[0].y),F=1;F<p;++F)ue.canvas.lineTo(s,o[F-1],o[F]);if(c[0].angle!==void 0){for(K=c[0].cx,Z=c[0].cy,J=Math.sqrt(Math.pow(c[0].x-K,2)+Math.pow(c[0].y-Z,2)),F=g-1;F>0;--F)s.arc(K,Z,J,c[F].angle,c[F-1].angle,!0);return}for(s.lineTo(c[g-1].x,c[g-1].y),F=g-1;F>0;--F)ue.canvas.lineTo(s,c[F],c[F-1],!0)}}function By(s,o,c,p,g,F){var K=o.length,Z=p.spanGaps,J=[],te=[],ne=0,ie=0,be,Ie,qe,We,bt,mi,pa,va;for(s.beginPath(),be=0,Ie=K;be<Ie;++be)qe=be%K,We=o[qe]._view,bt=c(We,qe,p),mi=Cm(We),pa=Cm(bt),F&&va===void 0&&mi&&(va=be+1,Ie=K+va),mi&&pa?(ne=J.push(We),ie=te.push(bt)):ne&&ie&&(Z?(mi&&J.push(We),pa&&te.push(bt)):(Nm(s,J,te,ne,ie),ne=ie=0,J=[],te=[]));Nm(s,J,te,ne,ie),s.closePath(),s.fillStyle=g,s.fill()}var Wy={id:"filler",afterDatasetsUpdate:function(s,o){var c=(s.data.datasets||[]).length,p=o.propagate,g=[],F,K,Z,J;for(K=0;K<c;++K)F=s.getDatasetMeta(K),Z=F.dataset,J=null,Z&&Z._model&&Z instanceof rh.Line&&(J={visible:s.isDatasetVisible(K),fill:Ly(Z,K,c),chart:s,el:Z}),F.$filler=J,g.push(J);for(K=0;K<c;++K)J=g[K],J&&(J.fill=zy(g,K,p),J.boundary=Vy(J),J.mapper=Uy(J))},beforeDatasetsDraw:function(s){var o=s._getSortedVisibleDatasetMetas(),c=s.ctx,p,g,F,K,Z,J,te;for(g=o.length-1;g>=0;--g)p=o[g].$filler,!(!p||!p.visible)&&(F=p.el,K=F._view,Z=F._children||[],J=p.mapper,te=K.backgroundColor||Os.global.defaultColor,J&&te&&Z.length&&(ue.canvas.clipArea(c,s.chartArea),By(c,Z,J,K,te,F._loop),ue.canvas.unclipArea(c)))}},Ky=ue.rtl.getRtlAdapter,bh=ue.noop,_h=ue.valueOrDefault;Os._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(s,o){var c=o.datasetIndex,p=this.chart,g=p.getDatasetMeta(c);g.hidden=g.hidden===null?!p.data.datasets[c].hidden:null,p.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(s){var o=s.data.datasets,c=s.options.legend||{},p=c.labels&&c.labels.usePointStyle;return s._getSortedDatasetMetas().map(function(g){var F=g.controller.getStyle(p?0:void 0);return{text:o[g.index].label,fillStyle:F.backgroundColor,hidden:!s.isDatasetVisible(g.index),lineCap:F.borderCapStyle,lineDash:F.borderDash,lineDashOffset:F.borderDashOffset,lineJoin:F.borderJoinStyle,lineWidth:F.borderWidth,strokeStyle:F.borderColor,pointStyle:F.pointStyle,rotation:F.rotation,datasetIndex:g.index}},this)}}},legendCallback:function(s){var o=document.createElement("ul"),c=s.data.datasets,p,g,F,K;for(o.setAttribute("class",s.id+"-legend"),p=0,g=c.length;p<g;p++)F=o.appendChild(document.createElement("li")),K=F.appendChild(document.createElement("span")),K.style.backgroundColor=c[p].backgroundColor,c[p].label&&F.appendChild(document.createTextNode(c[p].label));return o.outerHTML}});function Up(s,o){return s.usePointStyle&&s.boxWidth>o?o:s.boxWidth}var Dm=ah.extend({initialize:function(s){var o=this;ue.extend(o,s),o.legendHitBoxes=[],o._hoveredItem=null,o.doughnutMode=!1},beforeUpdate:bh,update:function(s,o,c){var p=this;return p.beforeUpdate(),p.maxWidth=s,p.maxHeight=o,p.margins=c,p.beforeSetDimensions(),p.setDimensions(),p.afterSetDimensions(),p.beforeBuildLabels(),p.buildLabels(),p.afterBuildLabels(),p.beforeFit(),p.fit(),p.afterFit(),p.afterUpdate(),p.minSize},afterUpdate:bh,beforeSetDimensions:bh,setDimensions:function(){var s=this;s.isHorizontal()?(s.width=s.maxWidth,s.left=0,s.right=s.width):(s.height=s.maxHeight,s.top=0,s.bottom=s.height),s.paddingLeft=0,s.paddingTop=0,s.paddingRight=0,s.paddingBottom=0,s.minSize={width:0,height:0}},afterSetDimensions:bh,beforeBuildLabels:bh,buildLabels:function(){var s=this,o=s.options.labels||{},c=ue.callback(o.generateLabels,[s.chart],s)||[];o.filter&&(c=c.filter(function(p){return o.filter(p,s.chart.data)})),s.options.reverse&&c.reverse(),s.legendItems=c},afterBuildLabels:bh,beforeFit:bh,fit:function(){var s=this,o=s.options,c=o.labels,p=o.display,g=s.ctx,F=ue.options._parseFont(c),K=F.size,Z=s.legendHitBoxes=[],J=s.minSize,te=s.isHorizontal();if(te?(J.width=s.maxWidth,J.height=p?10:0):(J.width=p?10:0,J.height=s.maxHeight),!p){s.width=J.width=s.height=J.height=0;return}if(g.font=F.string,te){var ne=s.lineWidths=[0],ie=0;g.textAlign="left",g.textBaseline="middle",ue.each(s.legendItems,function(pa,va){var _a=Up(c,K),ba=_a+K/2+g.measureText(pa.text).width;(va===0||ne[ne.length-1]+ba+2*c.padding>J.width)&&(ie+=K+c.padding,ne[ne.length-(va>0?0:1)]=0),Z[va]={left:0,top:0,width:ba,height:K},ne[ne.length-1]+=ba+c.padding}),J.height+=ie}else{var be=c.padding,Ie=s.columnWidths=[],qe=s.columnHeights=[],We=c.padding,bt=0,mi=0;ue.each(s.legendItems,function(pa,va){var _a=Up(c,K),ba=_a+K/2+g.measureText(pa.text).width;va>0&&mi+K+2*be>J.height&&(We+=bt+c.padding,Ie.push(bt),qe.push(mi),bt=0,mi=0),bt=Math.max(bt,ba),mi+=K+be,Z[va]={left:0,top:0,width:ba,height:K}}),We+=bt,Ie.push(bt),qe.push(mi),J.width+=We}s.width=J.width,s.height=J.height},afterFit:bh,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var s=this,o=s.options,c=o.labels,p=Os.global,g=p.defaultColor,F=p.elements.line,K=s.height,Z=s.columnHeights,J=s.width,te=s.lineWidths;if(o.display){var ne=Ky(o.rtl,s.left,s.minSize.width),ie=s.ctx,be=_h(c.fontColor,p.defaultFontColor),Ie=ue.options._parseFont(c),qe=Ie.size,We;ie.textAlign=ne.textAlign("left"),ie.textBaseline="middle",ie.lineWidth=.5,ie.strokeStyle=be,ie.fillStyle=be,ie.font=Ie.string;var bt=Up(c,qe),mi=s.legendHitBoxes,pa=function(Sa,Ra,Ta){if(!(isNaN(bt)||bt<=0)){ie.save();var Va=_h(Ta.lineWidth,F.borderWidth);if(ie.fillStyle=_h(Ta.fillStyle,g),ie.lineCap=_h(Ta.lineCap,F.borderCapStyle),ie.lineDashOffset=_h(Ta.lineDashOffset,F.borderDashOffset),ie.lineJoin=_h(Ta.lineJoin,F.borderJoinStyle),ie.lineWidth=Va,ie.strokeStyle=_h(Ta.strokeStyle,g),ie.setLineDash&&ie.setLineDash(_h(Ta.lineDash,F.borderDash)),c&&c.usePointStyle){var La=bt*Math.SQRT2/2,Da=ne.xPlus(Sa,bt/2),za=Ra+qe/2;ue.canvas.drawPoint(ie,Ta.pointStyle,La,Da,za,Ta.rotation)}else ie.fillRect(ne.leftForLtr(Sa,bt),Ra,bt,qe),Va!==0&&ie.strokeRect(ne.leftForLtr(Sa,bt),Ra,bt,qe);ie.restore()}},va=function(Sa,Ra,Ta,Va){var La=qe/2,Da=ne.xPlus(Sa,bt+La),za=Ra+La;ie.fillText(Ta.text,Da,za),Ta.hidden&&(ie.beginPath(),ie.lineWidth=2,ie.moveTo(Da,za),ie.lineTo(ne.xPlus(Da,Va),za),ie.stroke())},_a=function(Sa,Ra){switch(o.align){case"start":return c.padding;case"end":return Sa-Ra;default:return(Sa-Ra+c.padding)/2}},ba=s.isHorizontal();ba?We={x:s.left+_a(J,te[0]),y:s.top+c.padding,line:0}:We={x:s.left+c.padding,y:s.top+_a(K,Z[0]),line:0},ue.rtl.overrideTextDirection(s.ctx,o.textDirection);var Ma=qe+c.padding;ue.each(s.legendItems,function(Sa,Ra){var Ta=ie.measureText(Sa.text).width,Va=bt+qe/2+Ta,La=We.x,Da=We.y;ne.setWidth(s.minSize.width),ba?Ra>0&&La+Va+c.padding>s.left+s.minSize.width&&(Da=We.y+=Ma,We.line++,La=We.x=s.left+_a(J,te[We.line])):Ra>0&&Da+Ma>s.top+s.minSize.height&&(La=We.x=La+s.columnWidths[We.line]+c.padding,We.line++,Da=We.y=s.top+_a(K,Z[We.line]));var za=ne.x(La);pa(za,Da,Sa),mi[Ra].left=ne.leftForLtr(za,mi[Ra].width),mi[Ra].top=Da,va(za,Da,Sa,Ta),ba?We.x+=Va+c.padding:We.y+=Ma}),ue.rtl.restoreTextDirection(s.ctx,o.textDirection)}},_getLegendItemAt:function(s,o){var c=this,p,g,F;if(s>=c.left&&s<=c.right&&o>=c.top&&o<=c.bottom){for(F=c.legendHitBoxes,p=0;p<F.length;++p)if(g=F[p],s>=g.left&&s<=g.left+g.width&&o>=g.top&&o<=g.top+g.height)return c.legendItems[p]}return null},handleEvent:function(s){var o=this,c=o.options,p=s.type==="mouseup"?"click":s.type,g;if(p==="mousemove"){if(!c.onHover&&!c.onLeave)return}else if(p==="click"){if(!c.onClick)return}else return;g=o._getLegendItemAt(s.x,s.y),p==="click"?g&&c.onClick&&c.onClick.call(o,s.native,g):(c.onLeave&&g!==o._hoveredItem&&(o._hoveredItem&&c.onLeave.call(o,s.native,o._hoveredItem),o._hoveredItem=g),c.onHover&&g&&c.onHover.call(o,s.native,g))}});function Am(s,o){var c=new Dm({ctx:s.ctx,options:o,chart:s});lh.configure(s,c,o),lh.addBox(s,c),s.legend=c}var Yy={id:"legend",_element:Dm,beforeInit:function(s){var o=s.options.legend;o&&Am(s,o)},beforeUpdate:function(s){var o=s.options.legend,c=s.legend;o?(ue.mergeIf(o,Os.global.legend),c?(lh.configure(s,c,o),c.options=o):Am(s,o)):c&&(lh.removeBox(s,c),delete s.legend)},afterEvent:function(s,o){var c=s.legend;c&&c.handleEvent(o)}},vh=ue.noop;Os._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var qm=ah.extend({initialize:function(s){var o=this;ue.extend(o,s),o.legendHitBoxes=[]},beforeUpdate:vh,update:function(s,o,c){var p=this;return p.beforeUpdate(),p.maxWidth=s,p.maxHeight=o,p.margins=c,p.beforeSetDimensions(),p.setDimensions(),p.afterSetDimensions(),p.beforeBuildLabels(),p.buildLabels(),p.afterBuildLabels(),p.beforeFit(),p.fit(),p.afterFit(),p.afterUpdate(),p.minSize},afterUpdate:vh,beforeSetDimensions:vh,setDimensions:function(){var s=this;s.isHorizontal()?(s.width=s.maxWidth,s.left=0,s.right=s.width):(s.height=s.maxHeight,s.top=0,s.bottom=s.height),s.paddingLeft=0,s.paddingTop=0,s.paddingRight=0,s.paddingBottom=0,s.minSize={width:0,height:0}},afterSetDimensions:vh,beforeBuildLabels:vh,buildLabels:vh,afterBuildLabels:vh,beforeFit:vh,fit:function(){var s=this,o=s.options,c=s.minSize={},p=s.isHorizontal(),g,F;if(!o.display){s.width=c.width=s.height=c.height=0;return}g=ue.isArray(o.text)?o.text.length:1,F=g*ue.options._parseFont(o).lineHeight+o.padding*2,s.width=c.width=p?s.maxWidth:F,s.height=c.height=p?F:s.maxHeight},afterFit:vh,isHorizontal:function(){var s=this.options.position;return s==="top"||s==="bottom"},draw:function(){var s=this,o=s.ctx,c=s.options;if(c.display){var p=ue.options._parseFont(c),g=p.lineHeight,F=g/2+c.padding,K=0,Z=s.top,J=s.left,te=s.bottom,ne=s.right,ie,be,Ie;o.fillStyle=ue.valueOrDefault(c.fontColor,Os.global.defaultFontColor),o.font=p.string,s.isHorizontal()?(be=J+(ne-J)/2,Ie=Z+F,ie=ne-J):(be=c.position==="left"?J+F:ne-F,Ie=Z+(te-Z)/2,ie=te-Z,K=Math.PI*(c.position==="left"?-.5:.5)),o.save(),o.translate(be,Ie),o.rotate(K),o.textAlign="center",o.textBaseline="middle";var qe=c.text;if(ue.isArray(qe))for(var We=0,bt=0;bt<qe.length;++bt)o.fillText(qe[bt],0,We,ie),We+=g;else o.fillText(qe,0,0,ie);o.restore()}}});function Lm(s,o){var c=new qm({ctx:s.ctx,options:o,chart:s});lh.configure(s,c,o),lh.addBox(s,c),s.titleBlock=c}var Hy={id:"title",_element:qm,beforeInit:function(s){var o=s.options.title;o&&Lm(s,o)},beforeUpdate:function(s){var o=s.options.title,c=s.titleBlock;o?(ue.mergeIf(o,Os.global.title),c?(lh.configure(s,c,o),c.options=o):Lm(s,o)):c&&(lh.removeBox(s,c),delete s.titleBlock)}},wh={},Gy=Wy,Jy=Yy,Qy=Hy;wh.filler=Gy,wh.legend=Jy,wh.title=Qy,wa.helpers=ue,Wg(),wa._adapters=Tp,wa.Animation=Vh,wa.animationService=zh,wa.controllers=nm,wa.DatasetController=oh,wa.defaults=Os,wa.Element=ah,wa.elements=rh,wa.Interaction=Nh,wa.layouts=lh,wa.platform=Dh,wa.plugins=Pa,wa.Scale=nh,wa.scaleService=Jh,wa.Ticks=Qh,wa.Tooltip=Ep,wa.helpers.each(Dy,function(s,o){wa.scaleService.registerScaleType(o,s,s._defaults)});for(var Fm in wh)wh.hasOwnProperty(Fm)&&wa.plugins.register(wh[Fm]);wa.platform.initialize();var Xy=wa;return typeof window<"u"&&(window.Chart=wa),wa.Chart=wa,wa.Legend=wh.legend._element,wa.Title=wh.title._element,wa.pluginService=wa.plugins,wa.PluginBase=wa.Element.extend({}),wa.canvasHelpers=wa.helpers.canvas,wa.layoutService=wa.layouts,wa.LinearScaleBase=up,wa.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(s){wa[s]=function(o,c){return new wa(o,wa.helpers.merge(c||{},{type:s.charAt(0).toLowerCase()+s.slice(1)}))}}),Xy}))})(Chart$1)),Chart$1.exports}var ChartExports=requireChart();const Wi=!1;var pr=Array.isArray,Na=Array.prototype.indexOf,js=Array.from,Wr=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,Yi=Object.getOwnPropertyDescriptors,qa=Object.prototype,Fa=Array.prototype,Gs=Object.getPrototypeOf,bi=Object.isExtensible;function br(e){return typeof e=="function"}const tt=()=>{};function Ka(e){return e()}function Yr(e){for(var t=0;t<e.length;t++)e[t]()}function Hi(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}const nt=2,Us=4,as=8,Wt=16,It=32,Yt=64,Ws=128,ft=256,Hr=512,He=1024,ct=2048,$t=4096,gt=8192,Ht=16384,Ys=32768,zr=65536,wi=1<<17,Aa=1<<18,hr=1<<19,Xi=1<<20,$s=1<<21,os=1<<22,Kt=1<<23,xt=Symbol("$state"),Zi=Symbol("legacy props"),Ba=Symbol(""),yr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ji(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Oa(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ja(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ga(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ua(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Wa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ya(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ha(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Za(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ja(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ls=1,cs=2,Qi=4,Qa=8,eo=16,to=1,ro=2,en=4,so=8,io=16,tn=1,no=2,je=Symbol(),ao="http://www.w3.org/1999/xhtml",oo="@attach";function lo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function co(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let uo=!1;function rn(e){return e===this.v}function Hs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function fo(e,t){return e!==t}function sn(e){return!Hs(e,this.v)}let mr=!1,vo=!1;function po(){mr=!0}let Be=null;function cr(e){Be=e}function oe(e,t=!1,r){Be={p:Be,c:null,e:null,s:e,x:null,l:mr&&!t?{s:null,u:null,$:[]}:null}}function le(e){var t=Be,r=t.e;if(r!==null){t.e=null;for(var n of r)wn(n)}return Be=t.p,{}}function gr(){return!mr||Be!==null&&Be.l===null}let Nt=[];function nn(){var e=Nt;Nt=[],Yr(e)}function Vt(e){if(Nt.length===0&&!kr){var t=Nt;queueMicrotask(()=>{t===Nt&&nn()})}Nt.push(e)}function ho(){for(;Nt.length>0;)nn()}const mo=new WeakMap;function an(e){var t=he;if(t===null)return we.f|=Kt,e;if((t.f&Ys)===0){if((t.f&Ws)===0)throw!t.parent&&e instanceof Error&&on(e),e;t.b.error(e)}else dr(e,t)}function dr(e,t){for(;t!==null;){if((t.f&Ws)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&on(e),e}function on(e){const t=mo.get(e);t&&(Wr(e,"message",{value:t.message}),Wr(e,"stack",{value:t.stack}))}const Br=new Set;let Fe=null,Ur=null,Ds=new Set,_t=[],ds=null,Ts=!1,kr=!1;class ut{current=new Map;#t=new Map;#e=new Set;#i=0;#a=null;#u=[];#s=[];#n=[];#r=[];#o=[];#c=[];skipped_effects=new Set;process(t){_t=[],Ur=null;for(const i of t)this.#d(i);if(this.#i===0){this.#f();var r=this.#s,n=this.#n;this.#s=[],this.#n=[],this.#r=[],Ur=this,Fe=null,_i(r),_i(n),this.#a?.resolve()}else this.#l(this.#s),this.#l(this.#n),this.#l(this.#r);for(const i of this.#u)ur(i);this.#u=[]}#d(t){t.f^=He;for(var r=t.first;r!==null;){var n=r.f,i=(n&(It|Yt))!==0,a=i&&(n&He)!==0,l=a||(n&gt)!==0||this.skipped_effects.has(r);if(!l&&r.fn!==null){i?r.f^=He:(n&Us)!==0?this.#n.push(r):(n&He)===0&&((n&os)!==0&&r.b?.is_pending()?this.#u.push(r):Lr(r)&&((r.f&Wt)!==0&&this.#r.push(r),ur(r)));var u=r.first;if(u!==null){r=u;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)r=d.next,d=d.parent}}#l(t){for(const r of t)((r.f&ct)!==0?this.#o:this.#c).push(r),Ze(r,He);t.length=0}capture(t,r){this.#t.has(t)||this.#t.set(t,r),this.current.set(t,t.v)}activate(){Fe=this}deactivate(){Fe=null,Ur=null;for(const t of Ds)if(Ds.delete(t),t(),Fe!==null)break}flush(){if(_t.length>0){if(this.activate(),ln(),Fe!==null&&Fe!==this)return}else this.#i===0&&this.#f();this.deactivate()}#f(){for(const t of this.#e)t();if(this.#e.clear(),Br.size>1){this.#t.clear();let t=!0;for(const r of Br){if(r===this){t=!1;continue}for(const[n,i]of this.current){if(r.current.has(n))if(t)r.current.set(n,i);else continue;cn(n)}if(_t.length>0){Fe=r;for(const n of _t)r.#d(n);_t=[]}}Fe=null}Br.delete(this)}increment(){this.#i+=1}decrement(){if(this.#i-=1,this.#i===0){for(const t of this.#o)Ze(t,ct),Ot(t);for(const t of this.#c)Ze(t,$t),Ot(t);this.flush()}else this.deactivate()}add_callback(t){this.#e.add(t)}settled(){return(this.#a??=Hi()).promise}static ensure(){if(Fe===null){const t=Fe=new ut;Br.add(Fe),kr||ut.enqueue(()=>{Fe===t&&t.flush()})}return Fe}static enqueue(t){Vt(t)}static apply(t){return tt}}function go(e){var t=kr;kr=!0;try{for(var r;;){if(ho(),_t.length===0&&(Fe?.flush(),_t.length===0))return ds=null,r;ln()}}finally{kr=t}}function ln(){var e=ar;Ts=!0;try{var t=0;for(ki(!0);_t.length>0;){var r=ut.ensure();if(t++>1e3){var n,i;bo()}r.process(_t),zt.clear()}}finally{Ts=!1,ki(e),ds=null}}function bo(){try{Wa()}catch(e){dr(e,ds)}}let Lt=null;function _i(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ht|gt))===0&&Lr(n)&&(Lt=[],ur(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?kn(n):n.fn=null),Lt?.length>0)){zt.clear();for(const i of Lt)ur(i);Lt=[]}}Lt=null}}function cn(e){if(e.reactions!==null)for(const t of e.reactions){const r=t.f;(r&nt)!==0?cn(t):(r&(os|Wt))!==0&&(Ze(t,ct),Ot(t))}}function Ot(e){for(var t=ds=e;t.parent!==null;){t=t.parent;var r=t.f;if(Ts&&t===he&&(r&Wt)!==0)return;if((r&(Yt|It))!==0){if((r&He)===0)return;t.f^=He}}_t.push(t)}function wo(e){let t=0,r=Et(0),n;return()=>{Eo()&&(f$1(r),Zt(()=>(t===0&&(n=_$1(()=>e(()=>Sr(r)))),t+=1,()=>{Vt(()=>{t-=1,t===0&&(n?.(),n=void 0,Sr(r))})})))}}var _o=zr|hr|Ws;function xo(e,t,r){new yo(e,t,r)}class yo{parent;#t=!1;#e;#i=null;#a;#u;#s;#n=null;#r=null;#o=null;#c=null;#d=0;#l=0;#f=!1;#h=null;#g=()=>{this.#h&&jt(this.#h,this.#d)};#y=wo(()=>(this.#h=Et(this.#d),()=>{this.#h=null}));constructor(t,r,n){this.#e=t,this.#a=r,this.#u=n,this.parent=he.b,this.#t=!!this.#a.pending,this.#s=Jt(()=>{he.b=this;{try{this.#n=et(()=>n(this.#e))}catch(i){this.error(i)}this.#l>0?this.#m():this.#t=!1}},_o)}#b(){try{this.#n=et(()=>this.#u(this.#e))}catch(t){this.error(t)}this.#t=!1}#_(){const t=this.#a.pending;t&&(this.#r=et(()=>t(this.#e)),ut.enqueue(()=>{this.#n=this.#p(()=>(ut.ensure(),et(()=>this.#u(this.#e)))),this.#l>0?this.#m():(At(this.#r,()=>{this.#r=null}),this.#t=!1)}))}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#p(t){var r=he,n=we,i=Be;vt(this.#s),it(this.#s),cr(this.#s.ctx);try{return t()}catch(a){return an(a),null}finally{vt(r),it(n),cr(i)}}#m(){const t=this.#a.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),ko(this.#n,this.#c)),this.#r===null&&(this.#r=et(()=>t(this.#e)))}#v(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#v(t);return}this.#l+=t,this.#l===0&&(this.#t=!1,this.#r&&At(this.#r,()=>{this.#r=null}),this.#c&&(this.#e.before(this.#c),this.#c=null),Vt(()=>{ut.ensure().flush()}))}update_pending_count(t){this.#v(t),this.#d+=t,Ds.add(this.#g)}get_effect_pending(){return this.#y(),f$1(this.#h)}error(t){var r=this.#a.onerror;let n=this.#a.failed;if(this.#f||!r&&!n)throw t;this.#n&&(Xe(this.#n),this.#n=null),this.#r&&(Xe(this.#r),this.#r=null),this.#o&&(Xe(this.#o),this.#o=null);var i=!1,a=!1;const l=()=>{if(i){co();return}i=!0,a&&Ja(),ut.ensure(),this.#d=0,this.#o!==null&&At(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#f=!1,et(()=>this.#u(this.#e)))),this.#l>0?this.#m():this.#t=!1};var u=we;try{it(null),a=!0,r?.(t,l),a=!1}catch(d){dr(d,this.#s&&this.#s.parent)}finally{it(u)}n&&Vt(()=>{this.#o=this.#p(()=>{this.#f=!0;try{return et(()=>{n(this.#e,()=>t,()=>l)})}catch(d){return dr(d,this.#s.parent),null}finally{this.#f=!1}})})}}function ko(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var i=r===n?null:Pr(r);t.append(r),r=i}}function dn(e,t,r){const n=gr()?Vr:Er;if(t.length===0){r(e.map(n));return}var i=Fe,a=he,l=So();Promise.all(t.map(u=>Mo(u))).then(u=>{i?.activate(),l();try{r([...e.map(n),...u])}catch(d){(a.f&Ht)===0&&dr(d,a)}i?.deactivate(),un()}).catch(u=>{dr(u,a)})}function So(){var e=he,t=we,r=Be,n=Fe;return function(){vt(e),it(t),cr(r),n?.activate()}}function un(){vt(null),it(null),cr(null)}function Vr(e){var t=nt|ct,r=we!==null&&(we.f&nt)!==0?we:null;return he===null||r!==null&&(r.f&ft)!==0?t|=ft:he.f|=hr,{ctx:Be,deps:null,effects:null,equals:rn,f:t,fn:e,reactions:null,rv:0,v:je,wv:0,parent:r??he,ac:null}}function Mo(e,t){let r=he;r===null&&Oa();var n=r.b,i=void 0,a=Et(je),l=!we,u=new Map;return No(()=>{var d=Hi();i=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject)}catch($){d.reject($)}var m=Fe,v=n.is_pending();l&&(n.update_pending_count(1),v||(m.increment(),u.get(m)?.reject(yr),u.set(m,d)));const x=($,T=void 0)=>{v||m.activate(),T?T!==yr&&(a.f|=Kt,jt(a,T)):((a.f&Kt)!==0&&(a.f^=Kt),jt(a,$)),l&&(n.update_pending_count(-1),v||m.decrement()),un()};d.promise.then(x,$=>x(null,$||"unknown"))}),vs(()=>{for(const d of u.values())d.reject(yr)}),new Promise(d=>{function m(v){function x(){v===i?d(a):m(i)}v.then(x,x)}m(i)})}function ht(e){const t=Vr(e);return Cn(t),t}function Er(e){const t=Vr(e);return t.equals=sn,t}function fn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Xe(t[r])}}function Ro(e){for(var t=e.parent;t!==null;){if((t.f&nt)===0)return t;t=t.parent}return null}function Xs(e){var t,r=he;vt(Ro(e));try{fn(e),t=Tn(e)}finally{vt(r)}return t}function vn(e){var t=Xs(e);if(e.equals(t)||(e.v=t,e.wv=$n()),!Qt){var r=(Dt||(e.f&ft)!==0)&&e.deps!==null?$t:He;Ze(e,r)}}const zt=new Map;function Et(e,t){var r={f:0,v:e,reactions:null,equals:rn,rv:0,wv:0};return r}function Oe(e,t){const r=Et(e);return Cn(r),r}function Y(e,t=!1,r=!0){const n=Et(e);return t||(n.equals=sn),mr&&r&&Be!==null&&Be.l!==null&&(Be.l.s??=[]).push(n),n}function Co(e,t){return E(e,_$1(()=>f$1(e))),t}function E(e,t,r=!1){we!==null&&(!mt||(we.f&wi)!==0)&&gr()&&(we.f&(nt|Wt|os|wi))!==0&&!Rt?.includes(e)&&Za();let n=r?Mt(t):t;return jt(e,n)}function jt(e,t){if(!e.equals(t)){var r=e.v;Qt?zt.set(e,t):zt.set(e,r),e.v=t;var n=ut.ensure();n.capture(e,r),(e.f&nt)!==0&&((e.f&ct)!==0&&Xs(e),Ze(e,(e.f&ft)===0?He:$t)),e.wv=$n(),pn(e,ct),gr()&&he!==null&&(he.f&He)!==0&&(he.f&(It|Yt))===0&&(dt===null?Ko([e]):dt.push(e))}return t}function zs(e,t=1){var r=f$1(e),n=t===1?r++:r--;return E(e,r),n}function Sr(e){E(e,e.v+1)}function pn(e,t){var r=e.reactions;if(r!==null)for(var n=gr(),i=r.length,a=0;a<i;a++){var l=r[a],u=l.f;if(!(!n&&l===he)){var d=(u&ct)===0;d&&Ze(l,t),(u&nt)!==0?pn(l,$t):d&&((u&Wt)!==0&&Lt!==null&&Lt.push(l),Ot(l))}}}function Mt(e){if(typeof e!="object"||e===null||xt in e)return e;const t=Gs(e);if(t!==qa&&t!==Fa)return e;var r=new Map,n=pr(e),i=Oe(0),a=Bt,l=u=>{if(Bt===a)return u();var d=we,m=Bt;it(null),Mi(a);var v=u();return it(d),Mi(m),v};return n&&r.set("length",Oe(e.length)),new Proxy(e,{defineProperty(u,d,m){(!("value"in m)||m.configurable===!1||m.enumerable===!1||m.writable===!1)&&Ha();var v=r.get(d);return v===void 0?v=l(()=>{var x=Oe(m.value);return r.set(d,x),x}):E(v,m.value,!0),!0},deleteProperty(u,d){var m=r.get(d);if(m===void 0){if(d in u){const v=l(()=>Oe(je));r.set(d,v),Sr(i)}}else E(m,je),Sr(i);return!0},get(u,d,m){if(d===xt)return e;var v=r.get(d),x=d in u;if(v===void 0&&(!x||Tt(u,d)?.writable)&&(v=l(()=>{var T=Mt(x?u[d]:je),A=Oe(T);return A}),r.set(d,v)),v!==void 0){var $=f$1(v);return $===je?void 0:$}return Reflect.get(u,d,m)},getOwnPropertyDescriptor(u,d){var m=Reflect.getOwnPropertyDescriptor(u,d);if(m&&"value"in m){var v=r.get(d);v&&(m.value=f$1(v))}else if(m===void 0){var x=r.get(d),$=x?.v;if(x!==void 0&&$!==je)return{enumerable:!0,configurable:!0,value:$,writable:!0}}return m},has(u,d){if(d===xt)return!0;var m=r.get(d),v=m!==void 0&&m.v!==je||Reflect.has(u,d);if(m!==void 0||he!==null&&(!v||Tt(u,d)?.writable)){m===void 0&&(m=l(()=>{var $=v?Mt(u[d]):je,T=Oe($);return T}),r.set(d,m));var x=f$1(m);if(x===je)return!1}return v},set(u,d,m,v){var x=r.get(d),$=d in u;if(n&&d==="length")for(var T=m;T<x.v;T+=1){var A=r.get(T+"");A!==void 0?E(A,je):T in u&&(A=l(()=>Oe(je)),r.set(T+"",A))}if(x===void 0)(!$||Tt(u,d)?.writable)&&(x=l(()=>Oe(void 0)),E(x,Mt(m)),r.set(d,x));else{$=x.v!==je;var L=l(()=>Mt(m));E(x,L)}var P=Reflect.getOwnPropertyDescriptor(u,d);if(P?.set&&P.set.call(v,m),!$){if(n&&typeof d=="string"){var q=r.get("length"),C=Number(d);Number.isInteger(C)&&C>=q.v&&E(q,C+1)}Sr(i)}return!0},ownKeys(u){f$1(i);var d=Reflect.ownKeys(u).filter(x=>{var $=r.get(x);return $===void 0||$.v!==je});for(var[m,v]of r)v.v!==je&&!(m in u)&&d.push(m);return d},setPrototypeOf(){Xa()}})}function xi(e){try{if(e!==null&&typeof e=="object"&&xt in e)return e[xt]}catch{}return e}function Io(e,t){return Object.is(xi(e),xi(t))}var Ir,hn,mn,gn;function $o(){if(Ir===void 0){Ir=window,hn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;mn=Tt(t,"firstChild").get,gn=Tt(t,"nextSibling").get,bi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),bi(r)&&(r.__t=void 0)}}function Xt(e=""){return document.createTextNode(e)}function lt(e){return mn.call(e)}function Pr(e){return gn.call(e)}function b$1(e,t){return lt(e)}function W(e,t=!1){{var r=lt(e);return r instanceof Comment&&r.data===""?Pr(r):r}}function R(e,t=1,r=!1){let n=e;for(;t--;)n=Pr(n);return n}function Do(e){e.textContent=""}function Zs(){return!1}function To(e,t){if(t){const r=document.body;e.autofocus=!0,Vt(()=>{document.activeElement===r&&e.focus()})}}let yi=!1;function zo(){yi||(yi=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function us(e){var t=we,r=he;it(null),vt(null);try{return e()}finally{it(t),vt(r)}}function fs(e,t,r,n=r){e.addEventListener(t,()=>us(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),zo()}function bn(e){he===null&&we===null&&Ua(),we!==null&&(we.f&ft)!==0&&he===null&&Ga(),Qt&&ja()}function Vo(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function St(e,t,r,n=!0){var i=he;i!==null&&(i.f&gt)!==0&&(e|=gt);var a={ctx:Be,deps:null,nodes_start:null,nodes_end:null,f:e|ct,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{ur(a),a.f|=Ys}catch(d){throw Xe(a),d}else t!==null&&Ot(a);if(n){var l=a;if(r&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&hr)===0&&(l=l.first),l!==null&&(l.parent=i,i!==null&&Vo(l,i),we!==null&&(we.f&nt)!==0&&(e&Yt)===0)){var u=we;(u.effects??=[]).push(l)}}return a}function Eo(){return we!==null&&!mt}function vs(e){const t=St(as,null,!1);return Ze(t,He),t.teardown=e,t}function Xr(e){bn();var t=he.f,r=!we&&(t&It)!==0&&(t&Ys)===0;if(r){var n=Be;(n.e??=[]).push(e)}else return wn(e)}function wn(e){return St(Us|Xi,e,!1)}function Po(e){return bn(),St(as|Xi,e,!0)}function Lo(e){ut.ensure();const t=St(Yt|hr,e,!0);return(r={})=>new Promise(n=>{r.outro?At(t,()=>{Xe(t),n(void 0)}):(Xe(t),n(void 0))})}function Ct(e){return St(Us,e,!1)}function Ge(e,t){var r=Be,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=Zt(()=>{e(),!n.ran&&(n.ran=!0,_$1(t))})}function rt(){var e=Be;Zt(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&He)!==0&&Ze(r,$t),Lr(r)&&ur(r),t.ran=!1}})}function No(e){return St(os|hr,e,!0)}function Zt(e,t=0){return St(as|t,e,!0)}function O(e,t=[],r=[]){dn(t,r,n=>{St(as,()=>e(...n.map(f$1)),!0)})}function Jt(e,t=0){var r=St(Wt|t,e,!0);return r}function et(e,t=!0){return St(It|hr,e,!0,t)}function _n(e){var t=e.teardown;if(t!==null){const r=Qt,n=we;Si(!0),it(null);try{t.call(null)}finally{Si(r),it(n)}}}function xn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&us(()=>{i.abort(yr)});var n=r.next;(r.f&Yt)!==0?r.parent=null:Xe(r,t),r=n}}function qo(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&It)===0&&Xe(t),t=r}}function Xe(e,t=!0){var r=!1;(t||(e.f&Aa)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(yn(e.nodes_start,e.nodes_end),r=!0),xn(e,t&&!r),Zr(e,0),Ze(e,Ht);var n=e.transitions;if(n!==null)for(const a of n)a.stop();_n(e);var i=e.parent;i!==null&&i.first!==null&&kn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function yn(e,t){for(;e!==null;){var r=e===t?null:Pr(e);e.remove(),e=r}}function kn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function At(e,t){var r=[];Js(e,r,!0),Sn(r,()=>{Xe(e),t&&t()})}function Sn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Js(e,t,r){if((e.f&gt)===0){if(e.f^=gt,e.transitions!==null)for(const l of e.transitions)(l.is_global||r)&&t.push(l);for(var n=e.first;n!==null;){var i=n.next,a=(n.f&zr)!==0||(n.f&It)!==0;Js(n,t,a?r:!1),n=i}}}function Qs(e){Mn(e,!0)}function Mn(e,t){if((e.f&gt)!==0){e.f^=gt,(e.f&He)===0&&(Ze(e,ct),Ot(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&zr)!==0||(r.f&It)!==0;Mn(r,i?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let rr=null;function Fo(e){var t=rr;try{if(rr=new Set,_$1(e),t!==null)for(var r of rr)t.add(r);return rr}finally{rr=t}}function Rn(e){for(var t of Fo(e))jt(t,t.v)}let ar=!1;function ki(e){ar=e}let Qt=!1;function Si(e){Qt=e}let we=null,mt=!1;function it(e){we=e}let he=null;function vt(e){he=e}let Rt=null;function Cn(e){we!==null&&(Rt===null?Rt=[e]:Rt.push(e))}let Qe=null,ot=0,dt=null;function Ko(e){dt=e}let In=1,$r=0,Bt=$r;function Mi(e){Bt=e}let Dt=!1;function $n(){return++In}function Lr(e){var t=e.f;if((t&ct)!==0)return!0;if((t&$t)!==0){var r=e.deps,n=(t&ft)!==0;if(r!==null){var i,a,l=(t&Hr)!==0,u=n&&he!==null&&!Dt,d=r.length;if((l||u)&&(he===null||(he.f&Ht)===0)){var m=e,v=m.parent;for(i=0;i<d;i++)a=r[i],(l||!a?.reactions?.includes(m))&&(a.reactions??=[]).push(m);l&&(m.f^=Hr),u&&v!==null&&(v.f&ft)===0&&(m.f^=ft)}for(i=0;i<d;i++)if(a=r[i],Lr(a)&&vn(a),a.wv>e.wv)return!0}(!n||he!==null&&!Dt)&&Ze(e,He)}return!1}function Dn(e,t,r=!0){var n=e.reactions;if(n!==null&&!Rt?.includes(e))for(var i=0;i<n.length;i++){var a=n[i];(a.f&nt)!==0?Dn(a,t,!1):t===a&&(r?Ze(a,ct):(a.f&He)!==0&&Ze(a,$t),Ot(a))}}function Tn(e){var t=Qe,r=ot,n=dt,i=we,a=Dt,l=Rt,u=Be,d=mt,m=Bt,v=e.f;Qe=null,ot=0,dt=null,Dt=(v&ft)!==0&&(mt||!ar||we===null),we=(v&(It|Yt))===0?e:null,Rt=null,cr(e.ctx),mt=!1,Bt=++$r,e.ac!==null&&(us(()=>{e.ac.abort(yr)}),e.ac=null);try{e.f|=$s;var x=e.fn,$=x(),T=e.deps;if(Qe!==null){var A;if(Zr(e,ot),T!==null&&ot>0)for(T.length=ot+Qe.length,A=0;A<Qe.length;A++)T[ot+A]=Qe[A];else e.deps=T=Qe;if(!Dt||(v&nt)!==0&&e.reactions!==null)for(A=ot;A<T.length;A++)(T[A].reactions??=[]).push(e)}else T!==null&&ot<T.length&&(Zr(e,ot),T.length=ot);if(gr()&&dt!==null&&!mt&&T!==null&&(e.f&(nt|$t|ct))===0)for(A=0;A<dt.length;A++)Dn(dt[A],e);return i!==null&&i!==e&&($r++,dt!==null&&(n===null?n=dt:n.push(...dt))),(e.f&Kt)!==0&&(e.f^=Kt),$}catch(L){return an(L)}finally{e.f^=$s,Qe=t,ot=r,dt=n,we=i,Dt=a,Rt=l,cr(u),mt=d,Bt=m}}function Ao(e,t){let r=t.reactions;if(r!==null){var n=Na.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&nt)!==0&&(Qe===null||!Qe.includes(t))&&(Ze(t,$t),(t.f&(ft|Hr))===0&&(t.f^=Hr),fn(t),Zr(t,0))}function Zr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Ao(e,r[n])}function ur(e){var t=e.f;if((t&Ht)===0){Ze(e,He);var r=he,n=ar;he=e,ar=!0;try{(t&Wt)!==0?qo(e):xn(e),_n(e);var i=Tn(e);e.teardown=typeof i=="function"?i:null,e.wv=In;var a;Wi&&vo&&(e.f&ct)!==0&&e.deps}finally{ar=n,he=r}}}async function Bo(){await Promise.resolve(),go()}function f$1(e){var t=e.f,r=(t&nt)!==0;if(rr?.add(e),we!==null&&!mt){var n=he!==null&&(he.f&Ht)!==0;if(!n&&!Rt?.includes(e)){var i=we.deps;if((we.f&$s)!==0)e.rv<$r&&(e.rv=$r,Qe===null&&i!==null&&i[ot]===e?ot++:Qe===null?Qe=[e]:(!Dt||!Qe.includes(e))&&Qe.push(e));else{(we.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[we]:a.includes(we)||a.push(we)}}}else if(r&&e.deps===null&&e.effects===null){var l=e,u=l.parent;u!==null&&(u.f&ft)===0&&(l.f^=ft)}if(Qt){if(zt.has(e))return zt.get(e);if(r){l=e;var d=l.v;return((l.f&He)===0&&l.reactions!==null||zn(l))&&(d=Xs(l)),zt.set(l,d),d}}else r&&(l=e,Lr(l)&&vn(l));if((e.f&Kt)!==0)throw e.v;return e.v}function zn(e){if(e.v===je)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(zt.has(t)||(t.f&nt)!==0&&zn(t))return!0;return!1}function _$1(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const Oo=-7169;function Ze(e,t){e.f=e.f&Oo|t}function z(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(xt in e)Vs(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&xt in r&&Vs(r)}}}function Vs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Vs(e[n],t)}catch{}const r=Gs(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Yi(r);for(let i in n){const a=n[i].get;if(a)try{a.call(e)}catch{}}}}}function jo(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Go=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Uo(e){return Go.includes(e)}const Wo={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Yo(e){return e=e.toLowerCase(),Wo[e]??e}const Ho=["touchstart","touchmove"];function Xo(e){return Ho.includes(e)}const Vn=new Set,Es=new Set;function En(e,t,r,n={}){function i(a){if(n.capture||xr.call(t,a),!a.cancelBubble)return us(()=>r?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Vt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function me(e,t,r,n,i){var a={capture:n,passive:i},l=En(e,t,r,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&vs(()=>{t.removeEventListener(e,l,a)})}function Pt(e){for(var t=0;t<e.length;t++)Vn.add(e[t]);for(var r of Es)r(e)}let Ri=null;function xr(e){var t=this,r=t.ownerDocument,n=e.type,i=e.composedPath?.()||[],a=i[0]||e.target;Ri=e;var l=0,u=Ri===e&&e.__root;if(u){var d=i.indexOf(u);if(d!==-1&&(t===document||t===window)){e.__root=t;return}var m=i.indexOf(t);if(m===-1)return;d<=m&&(l=d)}if(a=i[l]||e.target,a!==t){Wr(e,"currentTarget",{configurable:!0,get(){return a||r}});var v=we,x=he;it(null),vt(null);try{for(var $,T=[];a!==null;){var A=a.assignedSlot||a.parentNode||a.host||null;try{var L=a["__"+n];if(L!=null&&(!a.disabled||e.target===a))if(pr(L)){var[P,...q]=L;P.apply(a,[e,...q])}else L.call(a,e)}catch(C){$?T.push(C):$=C}if(e.cancelBubble||A===t||A===null)break;a=A}if($){for(let C of T)queueMicrotask(()=>{throw C});throw $}}finally{e.__root=t,delete e.currentTarget,it(v),vt(x)}}}function ei(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Gt(e,t){var r=he;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function V(e,t){var r=(t&tn)!==0,n=(t&no)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=ei(a?e:"<!>"+e),r||(i=lt(i)));var l=n||hn?document.importNode(i,!0):i.cloneNode(!0);if(r){var u=lt(l),d=l.lastChild;Gt(u,d)}else Gt(l,l);return l}}function Zo(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&tn)!==0,a=`<${r}>${n?e:"<!>"+e}</${r}>`,l;return()=>{if(!l){var u=ei(a),d=lt(u);if(i)for(l=document.createDocumentFragment();lt(d);)l.appendChild(lt(d));else l=lt(d)}var m=l.cloneNode(!0);if(i){var v=lt(m),x=m.lastChild;Gt(v,x)}else Gt(m,m);return m}}function Nr(e,t){return Zo(e,t,"svg")}function or(e=""){{var t=Xt(e+"");return Gt(t,t),t}}function ge(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Xt();return e.append(t,r),Gt(t,r),e}function M(e,t){e!==null&&e.before(t)}function j(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Jo(e,t){return Qo(e,t)}const er=new Map;function Qo(e,{target:t,anchor:r,props:n={},events:i,context:a,intro:l=!0}){$o();var u=new Set,d=x=>{for(var $=0;$<x.length;$++){var T=x[$];if(!u.has(T)){u.add(T);var A=Xo(T);t.addEventListener(T,xr,{passive:A});var L=er.get(T);L===void 0?(document.addEventListener(T,xr,{passive:A}),er.set(T,1)):er.set(T,L+1)}}};d(js(Vn)),Es.add(d);var m=void 0,v=Lo(()=>{var x=r??t.appendChild(Xt());return xo(x,{pending:()=>{}},$=>{if(a){oe({});var T=Be;T.c=a}i&&(n.$$events=i),m=e($,n)||{},a&&le()}),()=>{for(var $ of u){t.removeEventListener($,xr);var T=er.get($);--T===0?(document.removeEventListener($,xr),er.delete($)):er.set($,T)}Es.delete(d),x!==r&&x.parentNode?.removeChild(x)}});return el.set(m,v),m}let el=new WeakMap;function N(e,t,r=!1){var n=e,i=null,a=null,l=je,u=r?zr:0,d=!1;const m=(T,A=!0)=>{d=!0,$(A,T)};var v=null;function x(){v!==null&&(v.lastChild.remove(),n.before(v),v=null);var T=l?i:a,A=l?a:i;T&&Qs(T),A&&At(A,()=>{l?a=null:i=null})}const $=(T,A)=>{if(l!==(l=T)){var L=Zs(),P=n;if(L&&(v=document.createDocumentFragment(),v.append(P=Xt())),l?i??=A&&et(()=>A(P)):a??=A&&et(()=>A(P)),L){var q=Fe,C=l?i:a,D=l?a:i;C&&q.skipped_effects.delete(C),D&&q.skipped_effects.add(D),q.add_callback(x)}else x()}};Jt(()=>{d=!1,t(m),d||$(null,null)},u)}function tl(e,t,r){var n=e,i=je,a,l,u=null,d=gr()?fo:Hs;function m(){a&&At(a),u!==null&&(u.lastChild.remove(),n.before(u),u=null),a=l}Jt(()=>{if(d(i,i=t())){var v=n,x=Zs();x&&(u=document.createDocumentFragment(),u.append(v=Xt())),l=et(()=>r(v)),x?Fe.add_callback(m):m()}})}function Te(e,t){return t}function rl(e,t,r){for(var n=e.items,i=[],a=t.length,l=0;l<a;l++)Js(t[l].e,i,!0);var u=a>0&&i.length===0&&r!==null;if(u){var d=r.parentNode;Do(d),d.append(r),n.clear(),wt(e,t[0].prev,t[a-1].next)}Sn(i,()=>{for(var m=0;m<a;m++){var v=t[m];u||(n.delete(v.k),wt(e,v.prev,v.next)),Xe(v.e,!u)}})}function Ce(e,t,r,n,i,a=null){var l=e,u={flags:t,items:new Map,first:null},d=(t&Qi)!==0;if(d){var m=e;l=m.appendChild(Xt())}var v=null,x=!1,$=new Map,T=Er(()=>{var q=r();return pr(q)?q:q==null?[]:js(q)}),A,L;function P(){sl(L,A,u,$,l,i,t,n,r),a!==null&&(A.length===0?v?Qs(v):v=et(()=>a(l)):v!==null&&At(v,()=>{v=null}))}Jt(()=>{L??=he,A=f$1(T);var q=A.length;x&&q===0||(x=q===0,P(),f$1(T))})}function sl(e,t,r,n,i,a,l,u,d){var m=(l&Qa)!==0,v=(l&(ls|cs))!==0,x=t.length,$=r.items,T=r.first,A=T,L,P=null,q,C=[],D=[],G,B,H,X;if(m)for(X=0;X<x;X+=1)G=t[X],B=u(G,X),H=$.get(B),H!==void 0&&(H.a?.measure(),(q??=new Set).add(H));for(X=0;X<x;X+=1){if(G=t[X],B=u(G,X),H=$.get(B),H===void 0){var re=n.get(B);if(re!==void 0){n.delete(B),$.set(B,re);var pe=P?P.next:A;wt(r,P,re),wt(r,re,pe),_s(re,pe,i),P=re}else{var $e=A?A.e.nodes_start:i;P=Ln($e,r,P,P===null?r.first:P.next,G,B,X,a,l,d)}$.set(B,P),C=[],D=[],A=P.next;continue}if(v&&Pn(H,G,X,l),(H.e.f&gt)!==0&&(Qs(H.e),m&&(H.a?.unfix(),(q??=new Set).delete(H))),H!==A){if(L!==void 0&&L.has(H)){if(C.length<D.length){var ke=D[0],Ne;P=ke.prev;var Ye=C[0],Ar=C[C.length-1];for(Ne=0;Ne<C.length;Ne+=1)_s(C[Ne],ke,i);for(Ne=0;Ne<D.length;Ne+=1)L.delete(D[Ne]);wt(r,Ye.prev,Ar.next),wt(r,P,Ye),wt(r,Ar,ke),A=ke,P=Ar,X-=1,C=[],D=[]}else L.delete(H),_s(H,A,i),wt(r,H.prev,H.next),wt(r,H,P===null?r.first:P.next),wt(r,P,H),P=H;continue}for(C=[],D=[];A!==null&&A.k!==B;)(A.e.f&gt)===0&&(L??=new Set).add(A),D.push(A),A=A.next;if(A===null)continue;H=A}C.push(H),P=H,A=H.next}if(A!==null||L!==void 0){for(var hi=L===void 0?[]:js(L);A!==null;)(A.e.f&gt)===0&&hi.push(A),A=A.next;var gi=hi.length;if(gi>0){var Ui=(l&Qi)!==0&&x===0?i:null;if(m){for(X=0;X<gi;X+=1)hi[X].a?.measure();for(X=0;X<gi;X+=1)hi[X].a?.fix()}rl(r,hi,Ui)}}m&&Vt(()=>{if(q!==void 0)for(H of q)H.a?.apply()}),e.first=r.first&&r.first.e,e.last=P&&P.e;for(var ws of n.values())Xe(ws.e);n.clear()}function Pn(e,t,r,n){(n&ls)!==0&&jt(e.v,t),(n&cs)!==0?jt(e.i,r):e.i=r}function Ln(e,t,r,n,i,a,l,u,d,m,v){var x=(d&ls)!==0,$=(d&eo)===0,T=x?$?Y(i,!1,!1):Et(i):i,A=(d&cs)===0?l:Et(l),L={i:A,v:T,k:a,a:null,e:null,prev:r,next:n};try{if(e===null){var P=document.createDocumentFragment();P.append(e=Xt())}return L.e=et(()=>u(e,T,A,m),uo),L.e.prev=r&&r.e,L.e.next=n&&n.e,r===null?v||(t.first=L):(r.next=L,r.e.next=L.e),n!==null&&(n.prev=L,n.e.prev=L.e),L}finally{}}function _s(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==n;){var l=Pr(a);i.before(a),a=l}}function wt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function ze(e,t,r=!1,n=!1,i=!1){var a=e,l="";O(()=>{var u=he;if(l!==(l=t()??"")&&(u.nodes_start!==null&&(yn(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),l!=="")){var d=l+"";r?d=`<svg>${d}</svg>`:n&&(d=`<math>${d}</math>`);var m=ei(d);if((r||n)&&(m=lt(m)),Gt(lt(m),m.lastChild),r||n)for(;lt(m);)a.before(lt(m));else a.before(m)}})}function ti(e,t,r,n,i){var a=t.$$slots?.[r],l=!1;a===!0&&(a=t.children,l=!0),a===void 0?i!==null&&i(e):a(e,l?()=>n:n)}function Nn(e,t,...r){var n=e,i=tt,a;Jt(()=>{i!==(i=t())&&(a&&(Xe(a),a=null),a=et(()=>i(n,...r)))},zr)}function de(e,t){Ct(()=>{var r=e.getRootNode(),n=r.host?r:r.head??r.ownerDocument.head;if(!n.querySelector("#"+t.hash)){const i=document.createElement("style");i.id=t.hash,i.textContent=t.code,n.appendChild(i)}})}function Ps(e,t,r){Ct(()=>{var n=_$1(()=>t(e,r?.())||{});if(n?.destroy)return()=>n.destroy()})}function il(e,t){var r=void 0,n;Jt(()=>{r!==(r=t())&&(n&&(Xe(n),n=null),r&&(n=et(()=>{Ct(()=>r(e))})))})}function qn(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=qn(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nl(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=qn(e))&&(n&&(n+=" "),n+=t);return n}function Jr(e){return typeof e=="object"?nl(e):e??""}const Ci=[...` 	
\r\f\v\uFEFF`];function al(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,l=0;(l=n.indexOf(i,l))>=0;){var u=l+a;(l===0||Ci.includes(n[l-1]))&&(u===n.length||Ci.includes(n[u]))?n=(l===0?"":n.substring(0,l))+n.substring(u+1):l=u}}return n===""?null:n}function Ii(e,t=!1){var r=t?" !important;":";",n="";for(var i in e){var a=e[i];a!=null&&a!==""&&(n+=" "+i+": "+a+r)}return n}function xs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ol(e,t){if(t){var r="",n,i;if(Array.isArray(t)?(n=t[0],i=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,l=0,u=!1,d=[];n&&d.push(...Object.keys(n).map(xs)),i&&d.push(...Object.keys(i).map(xs));var m=0,v=-1;const L=e.length;for(var x=0;x<L;x++){var $=e[x];if(u?$==="/"&&e[x-1]==="*"&&(u=!1):a?a===$&&(a=!1):$==="/"&&e[x+1]==="*"?u=!0:$==='"'||$==="'"?a=$:$==="("?l++:$===")"&&l--,!u&&a===!1&&l===0){if($===":"&&v===-1)v=x;else if($===";"||x===L-1){if(v!==-1){var T=xs(e.substring(m,v).trim());if(!d.includes(T)){$!==";"&&x++;var A=e.substring(m,x).trim();r+=" "+A+";"}}m=x+1,v=-1}}}}return n&&(r+=Ii(n)),i&&(r+=Ii(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Le(e,t,r,n,i,a){var l=e.__className;if(l!==r||l===void 0){var u=al(r,n,a);u==null?e.removeAttribute("class"):t?e.className=u:e.setAttribute("class",u),e.__className=r}else if(a&&i!==a)for(var d in a){var m=!!a[d];(i==null||m!==!!i[d])&&e.classList.toggle(d,m)}return a}function ys(e,t={},r,n){for(var i in r){var a=r[i];t[i]!==a&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,n))}}function Ae(e,t,r,n){var i=e.__style;if(i!==t){var a=ol(t,n);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}else n&&(Array.isArray(n)?(ys(e,r?.[0],n[0]),ys(e,r?.[1],n[1],"important")):ys(e,r,n));return n}function Qr(e,t,r=!1){if(e.multiple){if(t==null)return;if(!pr(t))return lo();for(var n of e.options)n.selected=t.includes(Mr(n));return}for(n of e.options){var i=Mr(n);if(Io(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Fn(e){var t=new MutationObserver(()=>{Qr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),vs(()=>{t.disconnect()})}function Kn(e,t,r=t){var n=!0;fs(e,"change",i=>{var a=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(a),Mr);else{var u=e.querySelector(a)??e.querySelector("option:not([disabled])");l=u&&Mr(u)}r(l)}),Ct(()=>{var i=t();if(Qr(e,i,n),n&&i===void 0){var a=e.querySelector(":checked");a!==null&&(i=Mr(a),r(i))}e.__value=i,n=!1}),Fn(e)}function Mr(e){return"__value"in e?e.__value:e.value}const sr=Symbol("class"),wr=Symbol("style"),An=Symbol("is custom element"),Bn=Symbol("is html");function ll(e,t){var r=si(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function ri(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function yt(e,t,r,n){var i=si(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Ba]=r),r==null?e.removeAttribute(t):typeof r!="string"&&On(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function cl(e,t,r,n,i=!1,a=!1){var l=si(e),u=l[An],d=!l[Bn],m=t||{},v=e.tagName==="OPTION";for(var x in t)x in r||(r[x]=null);r.class?r.class=Jr(r.class):(n||r[sr])&&(r.class=null),r[wr]&&(r.style??=null);var $=On(e);for(const D in r){let G=r[D];if(v&&D==="value"&&G==null){e.value=e.__value="",m[D]=G;continue}if(D==="class"){var T=e.namespaceURI==="http://www.w3.org/1999/xhtml";Le(e,T,G,n,t?.[sr],r[sr]),m[D]=G,m[sr]=r[sr];continue}if(D==="style"){Ae(e,G,t?.[wr],r[wr]),m[D]=G,m[wr]=r[wr];continue}var A=m[D];if(!(G===A&&!(G===void 0&&e.hasAttribute(D)))){m[D]=G;var L=D[0]+D[1];if(L!=="$$")if(L==="on"){const B={},H="$$"+D;let X=D.slice(2);var P=Uo(X);if(jo(X)&&(X=X.slice(0,-7),B.capture=!0),!P&&A){if(G!=null)continue;e.removeEventListener(X,m[H],B),m[H]=null}if(G!=null)if(P)e[`__${X}`]=G,Pt([X]);else{let re=function(pe){m[D].call(this,pe)};m[H]=En(X,e,re,B)}else P&&(e[`__${X}`]=void 0)}else if(D==="style")yt(e,D,G);else if(D==="autofocus")To(e,!!G);else if(!u&&(D==="__value"||D==="value"&&G!=null))e.value=e.__value=G;else if(D==="selected"&&v)ri(e,G);else{var q=D;d||(q=Yo(q));var C=q==="defaultValue"||q==="defaultChecked";if(G==null&&!u&&!C)if(l[D]=null,q==="value"||q==="checked"){let B=e;const H=t===void 0;if(q==="value"){let X=B.defaultValue;B.removeAttribute(q),B.defaultValue=X,B.value=B.__value=H?X:null}else{let X=B.defaultChecked;B.removeAttribute(q),B.defaultChecked=X,B.checked=H?X:!1}}else e.removeAttribute(D);else C||$.includes(q)&&(u||typeof G!="string")?(e[q]=G,q in l&&(l[q]=je)):typeof G!="function"&&yt(e,q,G)}}}return m}function Ls(e,t,r=[],n=[],i,a=!1,l=!1){dn(r,n,u=>{var d=void 0,m={},v=e.nodeName==="SELECT",x=!1;if(Jt(()=>{var T=t(...u.map(f$1)),A=cl(e,d,T,i,a,l);x&&v&&"value"in T&&Qr(e,T.value);for(let P of Object.getOwnPropertySymbols(m))T[P]||Xe(m[P]);for(let P of Object.getOwnPropertySymbols(T)){var L=T[P];P.description===oo&&(!d||L!==d[P])&&(m[P]&&Xe(m[P]),m[P]=et(()=>il(e,()=>L))),A[P]=L}d=A}),v){var $=e;Ct(()=>{Qr($,d.value,!0),Fn($)})}x=!0})}function si(e){return e.__attributes??={[An]:e.nodeName.includes("-"),[Bn]:e.namespaceURI===ao}}var $i=new Map;function On(e){var t=e.getAttribute("is")||e.nodeName,r=$i.get(t);if(r)return r;$i.set(t,r=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=Yi(i);for(var l in n)n[l].set&&r.push(l);i=Gs(i)}return r}function ii(e,t,r=t){var n=new WeakSet;fs(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=ks(e)?Ss(a):a,r(a),Fe!==null&&n.add(Fe),await Bo(),a!==(a=t())){var l=e.selectionStart,u=e.selectionEnd;e.value=a??"",u!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(u,e.value.length))}}),_$1(t)==null&&e.value&&(r(ks(e)?Ss(e.value):e.value),Fe!==null&&n.add(Fe)),Zt(()=>{var i=t();if(e===document.activeElement){var a=Ur??Fe;if(n.has(a))return}ks(e)&&i===Ss(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function jn(e,t,r=t){fs(e,"change",n=>{var i=n?e.defaultChecked:e.checked;r(i)}),_$1(t)==null&&r(e.checked),Zt(()=>{var n=t();e.checked=!!n})}function ks(e){var t=e.type;return t==="number"||t==="range"}function Ss(e){return e===""?null:+e}function dl(e,t,r=t){fs(e,"change",()=>{r(e.files)}),Zt(()=>{e.files=t()})}function Di(e,t){return e===t||e?.[xt]===t}function ps(e={},t,r,n){return Ct(()=>{var i,a;return Zt(()=>{i=a,a=[],_$1(()=>{e!==r(...a)&&(t(e,...a),i&&Di(r(...i),e)&&t(null,...i))})}),()=>{Vt(()=>{a&&Di(r(...a),e)&&t(null,...a)})}}),e}function ni(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}function Me(e=!1){const t=Be,r=t.l.u;if(!r)return;let n=()=>z(t.s);if(e){let i=0,a={};const l=Vr(()=>{let u=!1;const d=t.s;for(const m in d)d[m]!==a[m]&&(a[m]=d[m],u=!0);return u&&i++,i});n=()=>f$1(l)}r.b.length&&Po(()=>{Ti(t,n),Yr(r.b)}),Xr(()=>{const i=_$1(()=>r.m.map(Ka));return()=>{for(const a of i)typeof a=="function"&&a()}}),r.a.length&&Xr(()=>{Ti(t,n),Yr(r.a)})}function Ti(e,t){if(e.l.s)for(const r of e.l.s)f$1(r);t()}function st(e,t){var r=e.$$events?.[t.type],n=pr(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}function ai(e,t,r){if(e==null)return t(void 0),r&&r(void 0),tt;const n=_$1(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const tr=[];function ul(e,t){return{subscribe:xe(e,t).subscribe}}function xe(e,t=tt){let r=null;const n=new Set;function i(u){if(Hs(e,u)&&(e=u,r)){const d=!tr.length;for(const m of n)m[1](),tr.push(m,e);if(d){for(let m=0;m<tr.length;m+=2)tr[m][0](tr[m+1]);tr.length=0}}}function a(u){i(u(e))}function l(u,d=tt){const m=[u,d];return n.add(m),n.size===1&&(r=t(i,a)||tt),u(e),()=>{n.delete(m),n.size===0&&r&&(r(),r=null)}}return{set:i,update:a,subscribe:l}}function _e(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return ul(r,(l,u)=>{let d=!1;const m=[];let v=0,x=tt;const $=()=>{if(v)return;x();const A=t(n?m[0]:m,l,u);a?l(A):x=typeof A=="function"?A:tt},T=i.map((A,L)=>ai(A,P=>{m[L]=P,v&=~(1<<L),d&&$()},()=>{v|=1<<L}));return d=!0,$(),function(){Yr(T),x(),d=!1}})}function Pe(e){let t;return ai(e,r=>t=r)(),t}let Or=!1,Ns=Symbol();function fe(e,t,r){const n=r[t]??={store:null,source:Y(void 0),unsubscribe:tt};if(n.store!==e&&!(Ns in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=tt;else{var i=!0;n.unsubscribe=ai(e,a=>{i?n.source.v=a:E(n.source,a)}),i=!1}return e&&Ns in r?Pe(e):f$1(n.source)}function kt(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=tt),e}function ir(e,t){return e.set(t),t}function Ue(){const e={};function t(){vs(()=>{for(var r in e)e[r].unsubscribe();Wr(e,Ns,{enumerable:!1,value:!0})})}return[e,t]}function fl(e){var t=Or;try{return Or=!1,[e(),Or]}finally{Or=t}}const vl={get(e,t){if(!e.exclude.includes(t))return f$1(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){if(!(t in e.special)){var n=he;try{vt(e.parent_effect),e.special[t]=U({get[t](){return e.props[t]}},t,en)}finally{vt(n)}}return e.special[t](r),zs(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),zs(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function es(e,t){return new Proxy({props:e,exclude:t,special:{},version:Et(0),parent_effect:he},vl)}const pl={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(br(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];br(i)&&(i=i());const a=Tt(i,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(br(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Tt(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===xt||t===Zi)return!1;for(let r of e.props)if(br(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props)if(br(r)&&(r=r()),!!r){for(const n in r)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n)}return t}};function hl(...e){return new Proxy({props:e},pl)}function U(e,t,r,n){var i=!mr||(r&ro)!==0,a=(r&so)!==0,l=(r&io)!==0,u=n,d=!0,m=()=>(d&&(d=!1,u=l?_$1(n):n),u),v;if(a){var x=xt in e||Zi in e;v=Tt(e,t)?.set??(x&&t in e?D=>e[t]=D:void 0)}var $,T=!1;a?[$,T]=fl(()=>e[t]):$=e[t],$===void 0&&n!==void 0&&($=m(),v&&(i&&Ya(),v($)));var A;if(i?A=()=>{var D=e[t];return D===void 0?m():(d=!0,D)}:A=()=>{var D=e[t];return D!==void 0&&(u=void 0),D===void 0?u:D},i&&(r&en)===0)return A;if(v){var L=e.$$legacy;return(function(D,G){return arguments.length>0?((!i||!G||L||T)&&v(G?A():D),D):A()})}var P=!1,q=((r&to)!==0?Vr:Er)(()=>(P=!1,A()));a&&f$1(q);var C=he;return(function(D,G){if(arguments.length>0){const B=G?f$1(q):i&&a?Mt(D):D;return E(q,B),P=!0,u!==void 0&&(u=B),D}return Qt&&P||(C.f&Ht)!==0?q.v:f$1(q)})}function qr(e){Be===null&&Ji(),mr&&Be.l!==null?gl(Be).m.push(e):Xr(()=>{const t=_$1(e);if(typeof t=="function")return t})}function ml(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function pt(){const e=Be;return e===null&&Ji(),(t,r,n)=>{const i=e.s.$$events?.[t];if(i){const a=pr(i)?i.slice():[i],l=ml(t,r,n);for(const u of a)u.call(e.x,l);return!l.defaultPrevented}return!0}}function gl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}class bl{constructor(t){this.config=t,this.checkDataCoordinator=createCheckDataCoordinator(),t.comparison&&(this.comparisonDataCoordinator=createComparisonDataCoordinator())}}async function wl(e){const t=await createConfig(e);return new bl(t)}const _l="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(_l);po();function qs(e){const t=r=>{e&&!e.contains(r.target)&&!r.defaultPrevented&&(r.stopPropagation(),e.dispatchEvent(new CustomEvent("clickout")))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function oi(e){const t=e.target;return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||t.isContentEditable}var xl=Nr("<g><!></g>");function yl(e,t){oe(t,!1);let r=870711;function n(){return r+=1,`fa-${r.toString(16)}`}let i=Y(""),a=U(t,"data",8);function l(m){if(!m||!m.raw)return"";let v=m.raw;const x={};return v=v.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,($,T)=>{const A=n();return x[T]=A,` id="${A}"`}),v=v.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,($,T,A,L)=>{const P=T||L;return!P||!x[P]?$:`#${x[P]}`}),v}Ge(()=>z(a()),()=>{E(i,l(a()))}),rt();var u=xl(),d=b$1(u);ze(d,()=>f$1(i),!0),M(e,u),le()}var kl=Nr("<svg><!></svg>");const Sl={hash:"svelte-4tj8j2",code:`.fa-icon.svelte-4tj8j2 {display:inline-block;fill:currentColor;}.fa-flip-horizontal.svelte-4tj8j2 {transform:scale(-1, 1);}.fa-flip-vertical.svelte-4tj8j2 {transform:scale(1, -1);}.fa-spin.svelte-4tj8j2 {
    animation: svelte-4tj8j2-fa-spin 1s 0s infinite linear;}.fa-inverse.svelte-4tj8j2 {color:#fff;}.fa-pulse.svelte-4tj8j2 {
    animation: svelte-4tj8j2-fa-spin 1s infinite steps(8);}
  @keyframes svelte-4tj8j2-fa-spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }`};function Ml(e,t){const r=es(t,["children","$$slots","$$events","$$legacy"]),n=es(r,["class","width","height","box","spin","inverse","pulse","flip","style","label"]);de(e,Sl);let i=U(t,"class",8,""),a=U(t,"width",8),l=U(t,"height",8),u=U(t,"box",8,"0 0 0 0"),d=U(t,"spin",8,!1),m=U(t,"inverse",8,!1),v=U(t,"pulse",8,!1),x=U(t,"flip",8,"none"),$=U(t,"style",8,""),T=U(t,"label",8,"");var A=kl();Ls(A,P=>({version:"1.1",class:`fa-icon ${i()??""}`,width:a(),height:l(),"aria-label":T(),role:T()?"img":"presentation",viewBox:u(),style:$(),...n,[sr]:P}),[()=>({"fa-spin":d(),"fa-pulse":v(),"fa-inverse":m(),"fa-flip-horizontal":x()==="horizontal","fa-flip-vertical":x()==="vertical"})],void 0,"svelte-4tj8j2");var L=b$1(A);ti(L,t,"default",{},null),M(e,A)}var Rl=Nr("<path></path>"),Cl=Nr("<polygon></polygon>"),Il=Nr("<!><!><!>",1);function nr(e,t){const r=es(t,["children","$$slots","$$events","$$legacy"]),n=es(r,["class","data","scale","spin","inverse","pulse","flip","label","style"]);oe(t,!1);let i=U(t,"class",8,""),a=U(t,"data",8),l=Y(),u=U(t,"scale",8,1),d=U(t,"spin",8,!1),m=U(t,"inverse",8,!1),v=U(t,"pulse",8,!1),x=U(t,"flip",8,void 0),$=U(t,"label",8,""),T=U(t,"style",8,""),A=1,L=Y(10),P=Y(10),q=Y(),C=Y();function D($e){let ke,Ne;if($e)if("definition"in $e){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in $e&&"icon"in $e){ke=$e.iconName;const[Ye,Ar,,,hi]=$e.icon,gi=Array.isArray(hi)?hi:[hi];Ne={width:Ye,height:Ar,paths:gi.map(Ui=>({d:Ui}))}}else ke=Object.keys($e)[0],Ne=$e[ke];else return;return Ne}function G(){let $e=1;return typeof u()<"u"&&($e=Number(u())),isNaN($e)||$e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),A):$e*A}function B(){return f$1(l)?`0 0 ${f$1(l).width} ${f$1(l).height}`:`0 0 ${f$1(L)} ${f$1(P)}`}function H(){return f$1(l)?Math.max(f$1(l).width,f$1(l).height)/16:1}function X(){return f$1(l)?f$1(l).width/H()*G():0}function re(){return f$1(l)?f$1(l).height/H()*G():0}function pe(){let $e="";T()!==null&&($e+=T());let ke=G();return ke===1?$e.length===0?"":$e:($e!==""&&!$e.endsWith(";")&&($e+="; "),`${$e}font-size: ${ke}em`)}Ge(()=>(z(a()),z(T()),z(u())),()=>{E(l,D(a())),T(),u(),E(L,X()),E(P,re()),E(q,pe()),E(C,B())}),rt(),Me(),Ml(e,hl({get label(){return $()},get width(){return f$1(L)},get height(){return f$1(P)},get box(){return f$1(C)},get style(){return f$1(q)},get spin(){return d()},get flip(){return x()},get inverse(){return m()},get pulse(){return v()},get class(){return i()}},()=>n,{children:($e,ke)=>{var Ne=ge(),Ye=W(Ne);ti(Ye,t,"default",{},Ar=>{var hi=Il(),gi=W(hi);Ce(gi,1,()=>(f$1(l),_$1(()=>f$1(l)?.paths||[])),Te,(Ee,ce)=>{var Re=Rl();Ls(Re,()=>({...f$1(ce)})),M(Ee,Re)});var Ui=R(gi);Ce(Ui,1,()=>(f$1(l),_$1(()=>f$1(l)?.polygons||[])),Te,(Ee,ce)=>{var Re=Cl();Ls(Re,()=>({...f$1(ce)})),M(Ee,Re)});var ws=R(Ui);{var Gi=Ee=>{yl(Ee,{get data(){return f$1(l)},set data(ce){E(l,ce)},$$legacy:!0})};N(ws,Ee=>{f$1(l),_$1(()=>f$1(l)?.raw)&&Ee(Gi)})}M(Ar,hi)}),M($e,Ne)},$$slots:{default:!0}})),le()}var $l=(e,t)=>t.onClick?.(),Dl=V("<button><!></button>");const Tl={hash:"svelte-1tubfyr",code:".button.svelte-1tubfyr {display:flex;align-items:center;justify-content:center;padding:4px 8px;background:var(--button-bg-normal);border:1px solid var(--border-color-normal);border-radius:var(--button-border-radius);color:var(--text-color-primary);font-family:inherit;font-size:1.25rem;cursor:pointer;}.button.svelte-1tubfyr:hover:not(:disabled) {background-color:var(--button-bg-hover);border-color:var(--button-border-hover);}.button.primary.svelte-1tubfyr {background-color:var(--button-bg-primary-normal);border-color:var(--button-bg-primary-normal);}.button.primary.svelte-1tubfyr:hover:not(:disabled) {background-color:var(--button-bg-primary-hover);border-color:var(--button-border-hover);}.button.svelte-1tubfyr:disabled {opacity:0.5;cursor:not-allowed;}"};function ts(e,t){oe(t,!0),de(e,Tl);let r=U(t,"class",3,""),n=U(t,"disabled",3,!1),i=U(t,"primary",3,!1);var a=Dl();a.__click=[$l,t];var l=b$1(a);Nn(l,()=>t.children??tt),O(()=>{Le(a,1,`button ${r()??""} ${i()?"primary":""}`,"svelte-1tubfyr"),a.disabled=n(),yt(a,"aria-label",t.ariaLabel)}),M(e,a),le()}Pt(["click"]);const zl={hash:"svelte-16mzbar",code:".button.icon-button {width:24px;min-width:24px;height:24px;min-height:24px;padding:0 !important;}.icon-button .icon {width:16px;height:16px;}"};function Gn(e,t){de(e,zl);let r=U(t,"class",3,"");ts(e,{get class(){return`icon-button ${r()??""}`},get disabled(){return t.disabled},get ariaLabel(){return t.ariaLabel},get onClick(){return t.onClick},children:(n,i)=>{nr(n,{class:"icon",get data(){return t.icon}})},$$slots:{default:!0}})}function li(e,t){Gn(e,{get icon(){return faXmark},ariaLabel:"Close",get onClick(){return t.onClick}})}var Vl=V('<hr class="svelte-1qkoku4"/>'),El=V('<li class="svelte-1qkoku4"><button role="menuitem"><i></i> </button></li>'),Pl=V('<nav class="svelte-1qkoku4"><div class="navbar svelte-1qkoku4" id="navbar"><ul class="svelte-1qkoku4"></ul></div></nav>');const Ll={hash:"svelte-1qkoku4",code:".svelte-1qkoku4 {padding:0;margin:0;}nav.svelte-1qkoku4 {z-index:200;}.navbar.svelte-1qkoku4 {display:inline-flex;flex-direction:column;width:200px;background-color:#fff;border-radius:0.4rem;box-shadow:0 0.2rem 0.4rem rgba(0, 0, 0, 0.8);overflow:hidden;}.navbar.svelte-1qkoku4 ul:where(.svelte-1qkoku4) {margin:6px;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) {display:block;list-style-type:none;width:1fr;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4) {font-family:Roboto, sans-serif;font-weight:700;font-size:1rem;color:#222;width:100%;height:30px;text-align:left;border:0px;background-color:#fff;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button.disabled:where(.svelte-1qkoku4) {color:#888;pointer-events:none;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4):not(.disabled):hover {color:#000;text-align:left;border-radius:0.3rem;background-color:#eee;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4) i:where(.svelte-1qkoku4) {padding:0px 15px 0px 10px;}hr.svelte-1qkoku4 {border:none;border-bottom:1px solid #ccc;margin:5px 0px;}"};function hs(e,t){oe(t,!1),de(e,Ll);let r=U(t,"items",8),n=U(t,"initialEvent",8);const i=pt();let a=Y({x:0,y:0}),l=Y(!1);function u(x){i("item-selected",x)}Ge(()=>z(n()),()=>{n()?(E(a,{x:n().clientX,y:n().clientY+6}),E(l,!0)):E(l,!1)}),rt(),Me();var d=ge(),m=W(d);{var v=x=>{var $=Pl(),T=b$1($),A=b$1(T);Ce(A,5,r,Te,(L,P)=>{var q=ge(),C=W(q);{var D=B=>{var H=Vl();M(B,H)},G=B=>{var H=El(),X=b$1(H);let re;var pe=b$1(X),$e=R(pe,1,!0);O(ke=>{re=Le(X,1,"svelte-1qkoku4",null,re,ke),Le(pe,1,Jr((f$1(P),_$1(()=>f$1(P).iconClass))),"svelte-1qkoku4"),j($e,(f$1(P),_$1(()=>f$1(P).displayText)))},[()=>({disabled:f$1(P).disabled===!0})]),me("click",X,()=>u(f$1(P).key)),M(B,H)};N(C,B=>{f$1(P),_$1(()=>f$1(P).key=="hr")?B(D):B(G,!1)})}M(L,q)}),Ps($,L=>qs?.(L)),Ct(()=>me("clickout",$,function(L){st.call(this,t,L)})),O(()=>Ae($,`position: fixed; top:${f$1(a),_$1(()=>f$1(a).y)??""}px; left:${f$1(a),_$1(()=>f$1(a).x)??""}px`)),M(x,$)};N(m,x=>{f$1(l)&&x(v)})}M(e,d),le()}const Nl={hash:"svelte-j0hnxf",code:".button.icon-button.reload-button .icon {width:10px;height:10px;}"};function ql(e,t){de(e,Nl),Gn(e,{get icon(){return faRotateRight},class:"reload-button",get disabled(){return t.disabled},ariaLabel:"Reload",get onClick(){return t.onClick}})}function Fl(e,t){e.target===e.currentTarget&&t()}function Kl(e,t){e.key==="Escape"&&t()}var Al=V('<div class="dialog-backdrop svelte-u4vwrf" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="dialog-content svelte-u4vwrf"><div class="dialog-header svelte-u4vwrf"><h2 id="dialog-title" class="dialog-title svelte-u4vwrf"> </h2> <!></div> <div class="dialog-body svelte-u4vwrf"><!></div></div></div>');const Bl={hash:"svelte-u4vwrf",code:".dialog-backdrop.svelte-u4vwrf {position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5);display:flex;justify-content:center;align-items:center;z-index:1000;}.dialog-content.svelte-u4vwrf {background-color:var(--panel-bg);border:1px solid var(--panel-border);border-radius:var(--panel-border-radius);box-shadow:0 4px 6px rgba(0, 0, 0, 0.3);width:90%;max-width:500px;max-height:90vh;overflow:auto;}.dialog-header.svelte-u4vwrf {display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--panel-border);}.dialog-title.svelte-u4vwrf {margin-right:1rem;font-size:1.25rem;font-weight:700;color:var(--text-color-primary);}.dialog-body.svelte-u4vwrf {padding:1.5rem;}"};function Ol(e,t){oe(t,!0),de(e,Bl);let r=U(t,"open",15,!1);function n(){r(!1)}var i=ge(),a=W(i);{var l=u=>{var d=Al();d.__click=[Fl,n],d.__keydown=[Kl,n];var m=b$1(d),v=b$1(m),x=b$1(v),$=b$1(x),T=R(x,2);li(T,{onClick:n});var A=R(v,2),L=b$1(A);Nn(L,()=>t.children??tt),O(()=>j($,t.title)),M(u,d)};N(a,u=>{r()&&u(l)})}M(e,i),le()}Pt(["click","keydown"]);function jl(e,t){e.key==="Enter"&&(e.preventDefault(),t())}var Gl=V('<div class="bundle-copy-dialog-form svelte-sgftfs"><label for="bundle-name-input" class="bundle-copy-dialog-label svelte-sgftfs">Bundle name</label> <input id="bundle-name-input" type="text" class="bundle-copy-dialog-input svelte-sgftfs" aria-label="Bundle name"/> <div class="bundle-copy-dialog-actions svelte-sgftfs"><!> <!></div></div>');const Ul={hash:"svelte-sgftfs",code:".bundle-copy-dialog-form.svelte-sgftfs {display:flex;flex-direction:column;gap:1rem;}.bundle-copy-dialog-label.svelte-sgftfs {font-weight:700;color:var(--text-color-primary);}.bundle-copy-dialog-input.svelte-sgftfs {flex:1;padding:0.5rem;background-color:var(--input-bg);border:1px solid var(--border-color-normal);border-radius:var(--input-border-radius);color:var(--text-color-primary);font-family:inherit;font-size:inherit;}.bundle-copy-dialog-input.svelte-sgftfs:focus {outline:none;border-color:var(--border-color-focused);box-shadow:0 0 0 1px var(--border-color-focused);}.bundle-copy-dialog-actions.svelte-sgftfs {display:flex;justify-content:flex-end;gap:1rem;margin-top:0.5rem;}"};function Wl(e,t){oe(t,!0),de(e,Ul);let r=U(t,"open",15,!1),n=Oe(Mt(t.initialName));function i(){t.onSave?.(t.srcBundle,f$1(n)),r(!1)}function a(){r(!1)}Xr(()=>{r()&&E(n,t.initialName,!0)}),Ol(e,{title:"Save Bundle Copy",get open(){return r()},set open(l){r(l)},children:(l,u)=>{var d=Gl(),m=R(b$1(d),2);m.__keydown=[jl,i];var v=R(m,2),x=b$1(v);ts(x,{onClick:a,children:(T,A)=>{var L=or("Cancel");M(T,L)},$$slots:{default:!0}});var $=R(x,2);ts($,{primary:!0,onClick:i,children:(T,A)=>{var L=or("Save");M(T,L)},$$slots:{default:!0}}),ii(m,()=>f$1(n),T=>E(n,T)),M(l,d)},$$slots:{default:!0}}),le()}Pt(["keydown"]);var Yl=(e,t)=>t("name"),Hl=V('<span class="bundle-selector-sort-indicator svelte-zzpifv"> </span>'),Xl=(e,t)=>t("date"),Zl=V('<span class="bundle-selector-sort-indicator svelte-zzpifv"> </span>'),Jl=V('<div class="bundle-selector-empty svelte-zzpifv"></div>'),Ql=V('<div class="bundle-selector-empty svelte-zzpifv">No bundles found</div>'),ec=(e,t,r)=>t.onSelect?.(f$1(r)),tc=(e,t,r)=>t(e,f$1(r)),rc=(e,t,r)=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.onSelect?.(f$1(r)))},sc=V('<div role="option" aria-selected="false" tabindex="0"><!> <span class="bundle-selector-item-bundle-name svelte-zzpifv"> </span> <span class="bundle-selector-item-bundle-date svelte-zzpifv"> </span></div>'),ic=V('<div><div class="bundle-selector-header svelte-zzpifv"><div class="bundle-selector-search-bar svelte-zzpifv"><input type="text" placeholder="Search bundles..." class="bundle-selector-search-input svelte-zzpifv" role="searchbox" aria-label="Search bundles"/></div></div> <div class="bundle-selector-item-container svelte-zzpifv"><div class="bundle-selector-item-header svelte-zzpifv"><div class="bundle-selector-header-download svelte-zzpifv"></div> <button class="bundle-selector-sort-button svelte-zzpifv">Name <!></button> <button class="bundle-selector-sort-button svelte-zzpifv">Last Modified <!></button></div> <div class="bundle-selector-item-content svelte-zzpifv" role="listbox"><!></div></div> <div class="bundle-selector-status-bar svelte-zzpifv"><div class="bundle-selector-status-message svelte-zzpifv"><!></div> <!></div></div> <!> <!>',1);const nc={hash:"svelte-zzpifv",code:".bundle-selector.svelte-zzpifv {display:flex;flex-direction:column;width:100%;height:100%;background-color:var(--panel-bg);overflow:hidden;}.bundle-selector-header.svelte-zzpifv {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);border-radius:var(--panel-border-radius) var(--panel-border-radius) 0 0;}.bundle-selector-search-bar.svelte-zzpifv {display:flex;flex:1;}.bundle-selector-search-input.svelte-zzpifv {width:100%;height:2rem;padding:0.5rem;background-color:var(--input-bg);border:1px solid var(--border-color-normal);border-radius:var(--input-border-radius);color:var(--text-color-primary);font-family:inherit;}.bundle-selector-search-input.svelte-zzpifv:focus {outline:none;border-color:var(--border-color-focused);box-shadow:0 0 0 1px var(--border-color-focused);}.bundle-selector-empty.svelte-zzpifv {display:flex;align-items:center;justify-content:center;height:100%;min-height:4rem;color:var(--text-color-secondary);font-style:italic;}.bundle-selector-item-container.svelte-zzpifv {display:flex;flex-direction:column;flex:1;overflow:hidden;}.bundle-selector-item-header.svelte-zzpifv {display:grid;grid-template-columns:18px 1fr auto;gap:1rem;padding:0.5rem 1.5rem;background-color:#333;border-bottom:1px solid var(--panel-border);font-weight:700;}.bundle-selector-header-download.svelte-zzpifv {width:18px;}.bundle-selector-sort-button.svelte-zzpifv {display:flex;align-items:flex-start;gap:0.5rem;background:none;border:none;padding:0;color:var(--text-color-primary);font:inherit;cursor:pointer;}.bundle-selector-sort-button.svelte-zzpifv:hover {color:var(--link-color-hover);}.bundle-selector-sort-indicator.svelte-zzpifv {margin-top:-0.1rem;}.bundle-selector-item-content.svelte-zzpifv {flex:1;overflow-y:auto;}.bundle-selector-item-row.svelte-zzpifv {display:grid;grid-template-columns:18px 1fr auto;gap:1rem;align-items:center;padding:0.5rem 1.5rem;user-select:none;cursor:pointer;}.bundle-selector-item-row.svelte-zzpifv:hover {background-color:#444;}.bundle-selector-item-row.svelte-zzpifv:last-child {border-bottom:none;}.bundle-selector-item-bundle-name.svelte-zzpifv {overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.bundle-selector.left.svelte-zzpifv .bundle-selector-item-row.active:where(.svelte-zzpifv) .bundle-selector-item-bundle-name:where(.svelte-zzpifv) {color:var(--dataset-0);}.bundle-selector.right.svelte-zzpifv .bundle-selector-item-row.active:where(.svelte-zzpifv) .bundle-selector-item-bundle-name:where(.svelte-zzpifv) {color:var(--dataset-1);}.bundle-selector-item-bundle-date.svelte-zzpifv {color:var(--text-color-secondary);white-space:nowrap;}.bundle-selector-status-bar.svelte-zzpifv {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-footer-bg);border-top:1px solid var(--panel-border);}.bundle-selector-status-message.svelte-zzpifv {color:var(--text-color-secondary);}"};function ac(e,t){oe(t,!0),de(e,nc);let r=ht(()=>t.side==="left"?t.bundleManager.activeBundleUrlL:t.bundleManager.activeBundleUrlR),n=ht(()=>t.bundleManager.bundles),i=ht(()=>t.bundleManager.loading),a=ht(()=>t.bundleManager.error),l=Oe(""),u=Oe("date"),d=Oe("desc"),m=Oe(void 0),v=Oe(Mt([])),x=Oe(void 0),$=Oe(!1),T=Oe("");const A=ht(()=>{let se=[...f$1(n)];if(f$1(l)){const ae=f$1(n).map(Se=>({bundle:Se,name:Se.remote?.name||Se.local?.name||""}));se=Ea.go(f$1(l),ae,{keys:["name"],threshold:-1e4}).map(Se=>Se.obj.bundle)}return se.sort((ae,Se)=>{const De=f$1(d)==="asc"?1:-1;if(f$1(u)==="date"){const bs=ae.remote?.lastModified||ae.local?.lastModified||"",Je=Se.remote?.lastModified||Se.local?.lastModified||"";return De*(new Date(bs).getTime()-new Date(Je).getTime())}else{const bs=ae.remote?.name||ae.local?.name||"",Je=Se.remote?.name||Se.local?.name||"";return De*bs.localeCompare(Je)}})});qr(()=>{t.bundleManager.load()});function L(se){f$1(u)===se?E(d,f$1(d)==="asc"?"desc":"asc",!0):(E(u,se,!0),E(d,"desc"))}function P(se){const ae=new Date(se),Se=ae.toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"}),De=ae.toLocaleTimeString(void 0,{hour12:!0,hour:"numeric",minute:"2-digit"});return`${Se} at ${De}`}function q(){t.bundleManager.load()}function C(se,ae){se.preventDefault(),E(m,se,!0),E(x,ae,!0),ae.remote?E(v,[{key:"save-to-local",displayText:"Save to Local"}],!0):ae.local&&E(v,[{key:"save-copy",displayText:"Save Copy..."}],!0)}function D(se){const ae=se.detail;if(ae==="save-to-local"&&f$1(x))t.bundleManager.downloadBundle(f$1(x));else if(ae==="save-copy"&&f$1(x)){const Se=f$1(x).local?.name||"";E(T,`${Se} copy`),E($,!0)}E(m,void 0)}function G(se,ae){t.bundleManager.copyBundle(se,ae)}var B=ic(),H=W(B),X=b$1(H),re=b$1(X),pe=b$1(re),$e=R(X,2),ke=b$1($e),Ne=R(b$1(ke),2);Ne.__click=[Yl,L];var Ye=R(b$1(Ne));{var Ar=se=>{var ae=Hl(),Se=b$1(ae);O(()=>j(Se,f$1(d)==="asc"?"":"")),M(se,ae)};N(Ye,se=>{f$1(u)==="name"&&se(Ar)})}var hi=R(Ne,2);hi.__click=[Xl,L];var gi=R(b$1(hi));{var Ui=se=>{var ae=Zl(),Se=b$1(ae);O(()=>j(Se,f$1(d)==="asc"?"":"")),M(se,ae)};N(gi,se=>{f$1(u)==="date"&&se(Ui)})}var ws=R(ke,2),Gi=b$1(ws);{var Ee=se=>{var ae=Jl();M(se,ae)},ce=se=>{var ae=ge(),Se=W(ae);{var De=Je=>{var pi=Ql();M(Je,pi)},bs=Je=>{var pi=ge(),Os=W(pi);Ce(Os,17,()=>f$1(A),Te,(ji,ua)=>{const da=ht(()=>f$1(ua).remote?.url===f$1(r)||f$1(ua).local?.url===f$1(r));var ga=sc();let ca;ga.__click=[ec,t,ua],ga.__contextmenu=[tc,C,ua],ga.__keydown=[rc,t,ua];var ma=b$1(ga);{let $a=ht(()=>f$1(ua).remote?faCloud:faLaptop);nr(ma,{class:"bundle-selector-item-location",get data(){return f$1($a)}})}var ya=R(ma,2),vi=b$1(ya),fa=R(ya,2),ha=b$1(fa);O(($a,ue)=>{ca=Le(ga,1,"bundle-selector-item-row svelte-zzpifv",null,ca,$a),yt(ga,"aria-label",f$1(ua).remote?.name||f$1(ua).local?.name||""),j(vi,f$1(ua).remote?.name||f$1(ua).local?.name||""),j(ha,ue)},[()=>({active:f$1(da)}),()=>P(f$1(ua).remote?.lastModified||f$1(ua).local?.lastModified||"")]),M(ji,ga)}),M(Je,pi)};N(Se,Je=>{f$1(n).length===0?Je(De):Je(bs,!1)},!0)}M(se,ae)};N(Gi,se=>{f$1(a)||f$1(i)?se(Ee):se(ce,!1)})}var Re=R($e,2),ye=b$1(Re),Q=b$1(ye);{var ee=se=>{var ae=or("Loading...");M(se,ae)},ve=se=>{var ae=ge(),Se=W(ae);{var De=Je=>{var pi=or();O(()=>j(pi,f$1(a))),M(Je,pi)},bs=Je=>{var pi=or();O(()=>j(pi,`${f$1(n).length??""} ${f$1(n).length===1?"bundle":"bundles"}`)),M(Je,pi)};N(Se,Je=>{f$1(a)?Je(De):Je(bs,!1)},!0)}M(se,ae)};N(Q,se=>{f$1(i)?se(ee):se(ve,!1)})}var Ke=R(ye,2);ql(Ke,{get disabled(){return f$1(i)},onClick:()=>q()});var Ve=R(H,2);{var at=se=>{hs(se,{get items(){return f$1(v)},get initialEvent(){return f$1(m)},$$events:{"item-selected":D}})};N(Ve,se=>{f$1(m)&&se(at)})}var vr=R(Ve,2);Wl(vr,{get srcBundle(){return f$1(x)},get initialName(){return f$1(T)},onSave:G,get open(){return f$1($)},set open(se){E($,se,!0)}}),O(()=>Le(H,1,`bundle-selector ${t.side??""}`,"svelte-zzpifv")),ii(pe,()=>f$1(l),se=>E(l,se)),M(e,B),le()}Pt(["click","contextmenu","keydown"]);var oc=V('<div class="bundle-selector-popover svelte-1sz9kyj"><div class="bundle-selector-popover-header svelte-1sz9kyj"><div class="bundle-selector-popover-header-title svelte-1sz9kyj">Select Bundle</div> <!></div> <!></div>');const lc={hash:"svelte-1sz9kyj",code:".bundle-selector-popover.svelte-1sz9kyj {display:flex;flex-direction:column;flex:1;height:100%;background-color:var(--panel-bg);color:var(--text-color-primary);}.bundle-selector-popover-header.svelte-1sz9kyj {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);}.bundle-selector-popover-header-title.svelte-1sz9kyj {font-size:1.2rem;font-weight:700;}"};function cc(e,t){oe(t,!0),de(e,lc);var r=oc(),n=b$1(r),i=R(b$1(n),2);li(i,{onClick:()=>t.onClose?.()});var a=R(n,2);ac(a,{get side(){return t.side},get bundleManager(){return t.bundleManager},get onSelect(){return t.onSelect}}),M(e,r),le()}var dc=V('<div class="lazy-container svelte-tqw4wl"><!></div>');const uc={hash:"svelte-tqw4wl",code:".lazy-container.svelte-tqw4wl {position:relative;display:flex;height:100%;}"};function Fr(e,t){oe(t,!1),de(e,uc);let r=U(t,"visible",12,!1),n=U(t,"syncInit",8,!1),i=Y();qr(()=>{const d=f$1(i).closest(".scroll-container");if(d===void 0)throw new Error("Lazy component requires an ancestor marked with the 'scroll-container' class");function m(){const x=d.getBoundingClientRect(),$=f$1(i).getBoundingClientRect();return $.bottom>x.top&&$.top<x.bottom&&$.right>x.left&&$.left<x.right}let v=new IntersectionObserver(x=>{const $=x[0].isIntersecting;$&&!r()?r(!0):!$&&r()&&r(!1)},{root:d,rootMargin:"100% 200% 200% 100%"});return v.observe(f$1(i)),n()&&m()&&r(!0),()=>{r(!1),v.disconnect()}}),Me();var a=dc(),l=b$1(a);{var u=d=>{var m=ge(),v=W(m);ti(v,t,"default",{},null),M(d,m)};N(l,d=>{r()&&d(u)})}ps(a,d=>E(i,d),()=>f$1(i)),M(e,a),le()}var fc=V('<div class="graph-inner-container svelte-1nn7ai2"><canvas></canvas></div>');const vc={hash:"svelte-1nn7ai2",code:".graph-inner-container.svelte-1nn7ai2 {position:absolute;top:0;left:0;bottom:0;right:0;}"};function pc(e,t){oe(t,!1),de(e,vc);let r=U(t,"config",8),n=U(t,"viewModel",8),i=`width: ${r().width}rem; height: 20rem;`,a=Y(),l;qr(()=>(l=n().createGraphView(f$1(a)),()=>{l?.destroy(),l=void 0})),Me();var u=fc(),d=b$1(u);ps(d,m=>E(a,m),()=>f$1(a)),O(()=>Ae(u,i)),M(e,u),le()}var hc=V('<div class="legend-item svelte-19bjhkv"> </div>'),mc=V('<div class="legend-container svelte-19bjhkv"></div>');const gc={hash:"svelte-19bjhkv",code:'.legend-container.svelte-19bjhkv {display:flex;flex-direction:row;flex-wrap:wrap;flex:0 0 3.5rem;justify-content:center;align-items:center;width:100%;margin-top:-0.45rem;font-family:"Roboto Condensed";font-weight:700;font-size:1rem;line-height:1.2;}.legend-item.svelte-19bjhkv {margin:0 0.2rem 0.1rem 0.2rem;padding:0.25rem 0.6rem 0.2rem 0.6rem;color:#fff;text-align:center;}'};function bc(e,t){oe(t,!1),de(e,gc);let r=U(t,"graphSpec",8);Me();var n=mc();Ce(n,5,()=>(z(r()),_$1(()=>r().legendItems)),Te,(i,a)=>{var l=hc(),u=b$1(l);O(d=>{Ae(l,`background-color: ${f$1(a),_$1(()=>f$1(a).color)??""};`),j(u,d)},[()=>(f$1(a),_$1(()=>f$1(a).label.toUpperCase()))]),M(i,l)}),M(e,n),le()}var wc=V('<div class="link-row svelte-tkhsbk"> </div>'),_c=V('<div class="link-container svelte-tkhsbk"></div>'),xc=V('<div class="graph-container svelte-tkhsbk"><!></div> <!> <!>',1),yc=V('<div class="message not-shown svelte-tkhsbk"><span>Graph not shown: scenario is invalid in&nbsp;</span> <span> </span></div>'),kc=V('<div class="graph-and-info svelte-tkhsbk"><div><!></div> <!></div>'),Sc=V('<div class="message not-included svelte-tkhsbk"><span>Graph not included in&nbsp;</span> <span> </span></div>'),Mc=V('<div class="context-graph-container svelte-tkhsbk"><!></div>');const Rc={hash:"svelte-tkhsbk",code:'.context-graph-container.svelte-tkhsbk {display:inline-flex;flex-direction:column;flex:0 0 38rem;background-color:#fff;}.graph-and-info.svelte-tkhsbk {display:flex;flex-direction:column;}.graph-title.svelte-tkhsbk {margin:0.5rem 0;padding:0 0.8rem;font-family:"Roboto Condensed";font-size:1.55rem;}.graph-container.svelte-tkhsbk {display:block;position:relative;width:38rem;height:20rem;}.message.svelte-tkhsbk {display:flex;flex:1;min-height:20rem;align-items:center;justify-content:center;color:#aaa;border:solid 1px #fff;}.message.not-included.svelte-tkhsbk {background-color:#555;}.link-container.svelte-tkhsbk {display:flex;flex-direction:column;align-items:flex-start;margin-bottom:0.4rem;}.link-row.svelte-tkhsbk {height:1.2rem;margin:0 0.8rem;color:#999;cursor:pointer;}.link-row.svelte-tkhsbk:hover {color:#000;}'};function rs(e,t){oe(t,!1),de(e,Rc);const r=()=>fe(f$1(l),"$content",n),[n,i]=Ue();let a=U(t,"viewModel",8),l=Y(a().content),u=Y(!1);const d={width:38};let m=Y(f$1(u)),v=Y();function x(P){switch(P.kind){case"url":window.open(P.content,"_blank");break;case"copy":copyTextToClipboard(P.content);break;default:Tr(P.kind)}}Ge(()=>(f$1(u),f$1(m),z(a()),f$1(v)),()=>{(f$1(u)!==f$1(m)||a().requestKey!==f$1(v)?.requestKey)&&(f$1(v)?.clearData(),E(m,f$1(u)),E(v,a()),kt(E(l,a().content),"$content",n),f$1(u)&&a().requestData())}),rt(),Me();var $=Mc(),T=b$1($);{var A=P=>{var q=kc(),C=b$1(q),D=b$1(C);ze(D,()=>(z(a()),_$1(()=>a().graphSpec.title)));var G=R(C,2);{var B=X=>{var re=xc(),pe=W(re),$e=b$1(pe);Fr($e,{get visible(){return f$1(u)},set visible(Ar){E(u,Ar)},children:(Ar,hi)=>{var gi=ge(),Ui=W(gi);{var ws=Gi=>{pc(Gi,{get viewModel(){return r(),_$1(()=>r().graphData)},get config(){return d}})};N(Ui,Gi=>{r(),_$1(()=>r()&&r().graphData)&&Gi(ws)})}M(Ar,gi)},$$slots:{default:!0},$$legacy:!0});var ke=R(pe,2);bc(ke,{get graphSpec(){return z(a()),_$1(()=>a().graphSpec)}});var Ne=R(ke,2);{var Ye=Ar=>{var hi=_c();Ce(hi,5,()=>(z(a()),_$1(()=>a().linkItems)),Te,(gi,Ui)=>{var ws=wc(),Gi=b$1(ws);O(()=>j(Gi,(f$1(Ui),_$1(()=>f$1(Ui).text)))),me("click",ws,()=>x(f$1(Ui))),M(gi,ws)}),M(Ar,hi)};N(Ne,Ar=>{z(a()),_$1(()=>a().linkItems)&&Ar(Ye)})}M(X,re)},H=X=>{var re=yc(),pe=R(b$1(re),2),$e=b$1(pe);O(()=>{Le(pe,1,Jr((z(a()),_$1(()=>a().datasetClass))),"svelte-tkhsbk"),j($e,(z(a()),_$1(()=>a().bundleName)))}),M(X,re)};N(G,X=>{z(a()),_$1(()=>a().requestKey)?X(B):X(H,!1)})}O(()=>Le(C,1,(z(a()),_$1(()=>`graph-title ${a().datasetClass}`)),"svelte-tkhsbk")),M(P,q)},L=P=>{var q=Sc(),C=R(b$1(q),2),D=b$1(C);O(()=>{Le(C,1,Jr((z(a()),_$1(()=>a().datasetClass))),"svelte-tkhsbk"),j(D,(z(a()),_$1(()=>a().bundleName)))}),M(P,q)};N(T,P=>{z(a()),_$1(()=>a().graphSpec)?P(A):P(L,!1)})}M(e,$),le(),i()}let Cc=1;class Un{constructor(t,r,n,i,a){this.dataCoordinator=r,this.bundle=n,this.scenario=i,this.graphSpec=a,this.dataRequested=!1,this.dataLoaded=!1;const l=n==="right"?t.bundleR:t.bundleL;if(this.bundleName=l.name,this.datasetClass=`dataset-color-${n==="right"?"1":"0"}`,a){const u=n==="right"?i.specR:i.specL;if(u!==void 0){const d=l.models[0];this.linkItems=d.getGraphLinksForScenario(u,a.id),this.requestKey=`context-graph::${Cc++}::${n}::${a.id}::${i.key}`}else this.linkItems=[];this.writableContent=xe(void 0),this.content=this.writableContent}}requestData(){if(this.requestKey===void 0){this.dataRequested=!0,this.dataLoaded=!0;return}if(this.dataRequested)return;this.dataRequested=!0;const t=this.bundle==="left"?this.scenario.specL:void 0,r=this.bundle==="right"?this.scenario.specR:void 0;this.dataCoordinator.requestGraphData(this.requestKey,"left",t,"right",r,this.graphSpec.id,(n,i)=>{if(!this.dataRequested)return;const a=r?i:n;this.writableContent.set({graphData:a}),this.dataLoaded=!0})}clearData(){this.dataRequested&&(this.writableContent.set(void 0),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}function ci(e,t){if(e===void 0)return t.length+2;if(e===0)return 0;for(let r=0;r<t.length;r++)if(e<t[r])return r+1;return t.length+1}function Wn(e){return e===void 0?!0:e.some((t,r)=>r>0&&r<e.length-1&&t>0)}function Ut(e,t){return`<span class="dataset-color-${t==="left"?0:1}">${e}</span>`}function lr(e){if(!e)return[];const t=-Number.MAX_VALUE/2,r=Number.MAX_VALUE/2,n=[];for(const[i,a]of e.entries())a<t||a>r||n.push({x:i,y:a});return n}let Ic=1;class Yn{constructor(t,r,n,i,a,l,u,d,m,v){this.comparisonConfig=t,this.dataCoordinator=r,this.baselineTestSummary=n,this.sortMode=i,this.kind=a,this.title=l,this.subtitle=u,this.scenario=d,this.datasetKey=m,this.pinnedItemKey=v,this.dataRequested=!1,this.dataLoaded=!1,this.requestKey=`detail-box::${Ic++}::${d.key}::${m}`,this.writableContent=xe(void 0),this.content=this.writableContent,this.writableYRange=xe(void 0),this.yRange=this.writableYRange}requestData(){if(this.dataRequested)return;this.dataRequested=!0;const t=[this.datasetKey],r=this.comparisonConfig.datasets.getReferencePlotsForDataset(this.datasetKey,this.scenario);t.push(...r.map(n=>n.datasetKey)),this.dataCoordinator.requestDatasetMaps(this.requestKey,"left",this.scenario.specL,"right",this.scenario.specR,t,(n,i)=>{if(!this.dataRequested)return;const a=this.scenario.settings.kind==="all-inputs-settings"&&this.scenario.settings.position==="at-default",l=this.baselineTestSummary?.md??0,u=this.baselineTestSummary?.ad??0,d=$c(this.scenario.key,this.datasetKey,n,i),m=testSummaryFromReport(d,l,u),v=Ar=>{const hi=this.comparisonConfig,gi=Ar==="left"?hi.bundleL.name:hi.bundleR.name;return`Data only defined in ${Ut(gi,Ar)}`},x=d.diffReport;let $,T,A,L;switch(x.validity){case"both":{if(x.maxDiff===0)A=0,$=0,T=0,L="No differences";else{const Ar=this.sortMode==="max-diff-relative"||this.sortMode==="avg-diff-relative"?this.comparisonConfig.ratioThresholds:this.comparisonConfig.thresholds;let hi;switch(this.sortMode){case"max-diff":hi=m?.md??0;break;case"avg-diff":hi=m?.ad??0;break;case"max-diff-relative":hi=m?.mdb??0;break;case"avg-diff-relative":hi=m?.adb??0;break;default:assertNeverExports$1.assertNever(this.sortMode)}A=ci(hi,Ar),$=m?.mdb??0,T=m?.adb??0,L=void 0}break}case"left-only":A=void 0,L=v("left");break;case"right-only":A=void 0,L=v("right");break;default:A=void 0,L="Dataset not defined for this scenario";break}const P=this.comparisonConfig.bundleL.modelSpec,q=this.comparisonConfig.bundleR.modelSpec,C=P.outputVars.get(this.datasetKey),D=q.outputVars.get(this.datasetKey)||C;let G,B;D.sourceName===void 0&&(P.startTime!==void 0&&q.startTime!==void 0&&(G=Math.min(P.startTime,q.startTime)),P.endTime!==void 0&&q.endTime!==void 0&&(B=Math.max(P.endTime,q.endTime)));const H=lr(n?.get(this.datasetKey)),X=lr(i?.get(this.datasetKey)),re=[];function pe(Ar,hi,gi,Ui){re.push({points:Ar,color:hi,style:gi||"normal",lineWidth:Ui})}pe(X,"deepskyblue"),pe(H,"crimson");for(const Ar of r){const hi=lr(i?.get(Ar.datasetKey));pe(hi,Ar.color,Ar.style,Ar.lineWidth)}let $e=Number.POSITIVE_INFINITY,ke=Number.NEGATIVE_INFINITY;function Ne(Ar){for(const hi of Ar)hi.y<$e&&($e=hi.y),hi.y>ke&&(ke=hi.y)}for(const Ar of re)Ne(Ar.points);this.writableYRange.set({min:$e,max:ke});const Ye={key:this.requestKey,plots:re,xMin:G,xMax:B,yMin:this.activeYMin,yMax:this.activeYMax};this.localContent={bucketClass:`bucket-border-${A!==void 0?A:"undefined"}`,message:L,diffReport:x,baselineMaxDiff:a?void 0:l,maxDiffRelativeToBaseline:$,avgDiffRelativeToBaseline:T,comparisonGraphViewModel:Ye},this.writableContent.set(this.localContent),this.dataLoaded=!0})}updateYAxisRange(t){if(this.activeYMin=t?.min,this.activeYMax=t?.max,this.localContent){const r=this.localContent.comparisonGraphViewModel;r.yMin=this.activeYMin,r.yMax=this.activeYMax,r.onUpdated?.()}}clearData(){this.dataRequested&&(this.localContent=void 0,this.writableContent.set(void 0),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}function $c(e,t,r,n){const i=r?.get(t),a=n?.get(t),l=diffDatasets(i,a);return{scenarioKey:e,datasetKey:t,diffReport:l}}function Dr(e,t,r,n,i,a,l,u,d){const m=[];for(const $ of d){if($===void 0){m.push(void 0);continue}let T,A;switch(a){case"scenarios":T="scenario",A=$.scenario.key;break;case"datasets":T="dataset",A=$.testSummary.d;break;case"freeform":T="freeform",A=`${$.scenario.key}::${$.testSummary.d}`;break;default:Tr(a)}m.push(new Yn(e,t,r.get($.testSummary.d),i,T,$.title,$.subtitle,$.scenario,$.testSummary.d,A))}const v=_e(m.map($=>$.yRange),$=>{let T=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY;for(const L of $)L?.min<T&&(T=L.min),L?.max>A&&(A=L.max);return{min:T,max:A}});_e([n.consistentYRange,v],([$,T])=>$?T:void 0).subscribe($=>{for(const T of m)T.updateYAxisRange($)});const x=`row_${m.map($=>$.pinnedItemKey).join("_")}`;return{kind:a,title:l,subtitle:u,items:d,boxes:m,pinnedItemKey:x}}function Dc(e){const t=e.comparisonConfig,r=e.dataCoordinator,n=t.bundleL.modelSpec,i=t.bundleR.modelSpec;function a(d,m,v){return new Un(t,r,v,d,m)}const l=t.datasets.getContextGraphIdsForDataset(e.datasetKey,e.scenario),u=[];for(const d of l){const m=n.graphSpecs?.find(x=>x.id===d),v=i.graphSpecs?.find(x=>x.id===d);u.push({graphL:a(e.scenario,m,"left"),graphR:a(e.scenario,v,"right")})}return u}const zi="#444",jr="Roboto Condensed",Vi=14,Ei="#777",Pi="rgba(0, 0, 0, 0)",Tc={beforeDatasetsDraw:e=>{const t=e.ctx;t.save();const r=e.data.datasets;for(let n=0;n<r.length;n++){const i=r[n];if(i.data.length!==1)continue;const a=e.getDatasetMeta(n).data[0];let l;if(i.fill==="+1"){if(n+1>=r.length)break;const u=e.getDatasetMeta(n+1).data[0];l={x:u._view.x,y:u._view.y}}else if(i.fill==="start")l={x:a._view.x,y:e.chartArea.bottom};else if(i.fill==="end")l={x:a._view.x,y:e.chartArea.top};else return;t.beginPath(),t.moveTo(a._view.x,a._view.y),t.lineTo(l.x,l.y),t.closePath(),t.strokeStyle=i.backgroundColor,t.lineWidth=4,t.stroke()}t.restore()}};ChartExports.Chart.pluginService.register(Tc);class zc{constructor(t,r){this.canvas=t,this.viewModel=r,this.chart=Vc(t,r)}update(){const t=this.chart;function r(n,i){const a=t.data.datasets.find(l=>l.label===n);if(a){const l=a.data[0];l.y=i}}t&&(r("hidden-y-min",this.viewModel.yMin),r("hidden-y-max",this.viewModel.yMax),t.update())}destroy(){this.chart?.destroy(),this.chart=void 0}}function Vc(e,t){const r=[],n=(v,x,$)=>{r.push({label:v,type:"scatter",fill:!1,borderColor:Pi,backgroundColor:Pi,pointHitRadius:0,pointHoverRadius:0,pointRadius:0,data:[{x,y:$}]})};let i=Number.NEGATIVE_INFINITY;function a(v){let x,$=!1;switch(v.style){case"dashed":x=[8,2];break;case"fill-to-next":$="+1";break;case"fill-above":$="end";break;case"fill-below":$="start";break}let T;$!==!1&&(T=`rgba(0, 128, 0, ${v.points.length>1?.1:.3})`);let A=0,L;v.points.length===1&&v.style!=="dashed"&&(A=5,L=v.color);for(const P of v.points)P.x>i&&(i=P.x);r.push({data:v.points,borderColor:v.color,borderWidth:v.lineWidth!==void 0?v.lineWidth:3,borderDash:x,backgroundColor:T,fill:$,pointRadius:A,pointBackgroundColor:L,pointBorderWidth:0,pointBorderColor:"transparent",lineTension:0})}for(const v of t.plots)a(v);const l=t.xMin,u=t.xMax,d=l===1990,m=u!==void 0?u:i;return n("hidden-y-min",m,t.yMin),n("hidden-y-max",m,t.yMax),new ChartExports.Chart(e,{type:"line",data:{datasets:r},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,title:{display:!1},legend:{display:!1},elements:{point:{radius:0}},tooltips:{titleFontFamily:jr,bodyFontFamily:jr},scales:{xAxes:[{type:"linear",position:"bottom",gridLines:{color:zi},ticks:{maxTicksLimit:6,maxRotation:0,min:l,max:u,fontFamily:jr,fontSize:Vi,fontColor:Ei,callback:(v,x)=>d&&x===0?"":v}}],yAxes:[{gridLines:{color:zi},ticks:{fontFamily:jr,fontSize:Vi,fontColor:Ei}}]}}})}var Ec=V('<div class="graph-inner-container svelte-1ez5fe6"></div>');const Pc={hash:"svelte-1ez5fe6",code:".graph-inner-container.svelte-1ez5fe6 {position:absolute;top:0;left:0;bottom:0;right:0;}"};function ms$1(e,t){oe(t,!1),de(e,Pc);let r=U(t,"viewModel",12),n=Y(),i=Y(),a=Y();function l(){f$1(i)?.destroy();const d=document.createElement("canvas");for(;f$1(n).firstChild;)f$1(n).firstChild.remove();f$1(n).appendChild(d),E(a,r().key),E(i,new zc(d,r())),r(r().onUpdated=()=>{f$1(i)?.update()},!0)}qr(()=>(l(),()=>{f$1(i)?.destroy(),E(i,void 0)})),Ge(()=>(f$1(i),z(r()),f$1(a)),()=>{f$1(i)&&r().key!==f$1(a)&&l()}),rt(),Me();var u=Ec();ps(u,d=>E(n,d),()=>f$1(n)),M(e,u),le()}var Lc=V('<span class="subtitle svelte-15isgd1"><!></span>'),Nc=V('<div class="title-row no-selection svelte-15isgd1"><div class="title-content svelte-15isgd1"><span class="title svelte-15isgd1"><!></span> <!></div></div>'),qc=V('<div class="message svelte-15isgd1"><!></div>'),Fc=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">rel</div> <div class="data-value svelte-15isgd1"> </div></div>'),Kc=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">rel</div> <div class="data-value svelte-15isgd1"> </div></div>'),Ac=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">avg</div> <div class="data-value svelte-15isgd1"> </div></div> <div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">min</div> <div class="data-value svelte-15isgd1"> </div></div> <div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">max</div> <div class="data-value svelte-15isgd1"><!></div></div> <!> <!>',1),Bc=V('<div><div class="graph-container svelte-15isgd1"><!></div> <div class="message-container svelte-15isgd1"><!></div></div>'),Oc=V('<div class="detail-box svelte-15isgd1"><!> <div class="content-container svelte-15isgd1"><!></div></div>');const jc={hash:"svelte-15isgd1",code:".detail-box.svelte-15isgd1 {display:flex;flex-direction:column;--box-graph-w: calc(30rem * var(--graph-zoom));--box-graph-h: calc(22rem * var(--graph-zoom));}.title-row.svelte-15isgd1 {position:relative;max-width:calc(var(--box-graph-w) + 1rem);height:1.4rem;cursor:pointer;}.title-content.svelte-15isgd1 {position:absolute;max-width:calc(var(--box-graph-w) + 1rem);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.title-content.svelte-15isgd1:hover {width:max-content;max-width:unset;overflow:unset;z-index:100;background-color:#3c3c3c;}.title.svelte-15isgd1 {margin-left:0.7rem;font-size:1.1em;font-weight:700;}.subtitle.svelte-15isgd1 {color:#aaa;margin-left:0.4rem;margin-right:0.7rem;}.content-container.svelte-15isgd1 {display:flex;flex-direction:column;width:calc(var(--box-graph-w) + 1rem + 0.6rem);max-width:calc(var(--box-graph-w) + 1rem + 0.6rem);height:calc(var(--box-graph-h) + 4rem + 1rem + 0.6rem);max-height:calc(var(--box-graph-h) + 4rem + 1rem + 0.6rem);}.content.svelte-15isgd1 {display:flex;flex-direction:column;height:calc(var(--box-graph-h) + 4rem);padding:0.5rem;border-width:0.3rem;border-style:solid;border-radius:0.8rem;}.content.no-baseline-diff.svelte-15isgd1 {border-style:dashed;}.graph-container.svelte-15isgd1 {position:relative;display:flex;width:var(--box-graph-w);height:var(--box-graph-h);}.message-container.svelte-15isgd1 {display:flex;flex-direction:column;max-width:var(--box-graph-w);height:4rem;justify-content:flex-end;}.message.svelte-15isgd1 {white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.data-row.svelte-15isgd1 {display:flex;flex-direction:row;align-items:baseline;}.data-label.svelte-15isgd1 {font-size:0.9em;color:#aaa;min-width:2rem;margin-right:0.4rem;text-align:right;}.data-value.svelte-15isgd1 {white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"};function Hn(e,t){oe(t,!1),de(e,jc);const r=()=>fe(f$1(l),"$content",n),[n,i]=Ue();let a=U(t,"viewModel",8),l=Y(a().content),u=Y(!1),d=Y(f$1(u)),m=Y();const v=pt();function x(){v("toggle-context-graphs")}function $(H){a().kind!=="freeform"&&v("show-context-menu",{kind:"box",itemKey:a().pinnedItemKey,scenario:a().scenario,clickEvent:H})}function T(H){return H!=null?`${H.toFixed(2)}%`:"n/a"}function A(H){return H!=null?H.toFixed(4):"undefined"}function L(H){const X=H.diffReport.maxDiffPoint;let re="";return re+=T(H.diffReport.maxDiff),X&&(re+="&nbsp;(",re+=`<span class="dataset-color-0">${A(X.valueL)}</span>`,re+=`&nbsp;${X.valueL<X.valueR?"&lt;":"&gt;"}&nbsp;`,re+=`<span class="dataset-color-1">${A(X.valueR)}</span>`,re+=`) at ${X.time}`),re}function P(H){return H!=null?`${H.toFixed(2)}`:"n/a"}Ge(()=>(f$1(u),f$1(d),z(a()),f$1(m)),()=>{(f$1(u)!==f$1(d)||a().requestKey!==f$1(m)?.requestKey)&&(f$1(m)?.clearData(),E(d,f$1(u)),E(m,a()),kt(E(l,a().content),"$content",n),f$1(u)&&a().requestData())}),rt(),Me();var q=Oc(),C=b$1(q);{var D=H=>{var X=Nc(),re=b$1(X),pe=b$1(re),$e=b$1(pe);ze($e,()=>(z(a()),_$1(()=>a().title)));var ke=R(pe,2);{var Ne=Ye=>{var Ar=Lc(),hi=b$1(Ar);ze(hi,()=>(z(a()),_$1(()=>a().subtitle))),M(Ye,Ar)};N(ke,Ye=>{z(a()),_$1(()=>a().subtitle)&&Ye(Ne)})}me("click",X,x),me("contextmenu",X,ni($)),M(H,X)};N(C,H=>{z(a()),_$1(()=>a().title)&&H(D)})}var G=R(C,2),B=b$1(G);Fr(B,{get visible(){return f$1(u)},set visible(H){E(u,H)},children:(H,X)=>{var re=ge(),pe=W(re);{var $e=ke=>{var Ne=Bc();let Ye;var Ar=b$1(Ne),hi=b$1(Ar);ms$1(hi,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}});var gi=R(Ar,2),Ui=b$1(gi);{var ws=Ee=>{var ce=qc(),Re=b$1(ce);ze(Re,()=>(r(),_$1(()=>r().message))),M(Ee,ce)},Gi=Ee=>{var ce=Ac(),Re=W(ce),ye=R(b$1(Re),2),Q=b$1(ye),ee=R(Re,2),ve=R(b$1(ee),2),Ke=b$1(ve),Ve=R(ee,2),at=R(b$1(Ve),2),vr=b$1(at);ze(vr,()=>(r(),_$1(()=>L(r()))));var se=R(Ve,2);{var ae=bs=>{var Je=Fc(),pi=R(b$1(Je),2),Os=b$1(pi);O(ji=>j(Os,ji),[()=>(r(),_$1(()=>P(r().maxDiffRelativeToBaseline)))]),M(bs,Je)};N(se,bs=>{z(a()),_$1(()=>a().sortMode==="max-diff-relative")&&bs(ae)})}var Se=R(se,2);{var De=bs=>{var Je=Kc(),pi=R(b$1(Je),2),Os=b$1(pi);O(ji=>j(Os,ji),[()=>(r(),_$1(()=>P(r().avgDiffRelativeToBaseline)))]),M(bs,Je)};N(Se,bs=>{z(a()),_$1(()=>a().sortMode==="avg-diff-relative")&&bs(De)})}O((bs,Je)=>{j(Q,bs),j(Ke,Je)},[()=>(r(),_$1(()=>T(r().diffReport.avgDiff))),()=>(r(),_$1(()=>T(r().diffReport.minDiff)))]),M(Ee,ce)};N(Ui,Ee=>{r(),_$1(()=>r().message)?Ee(ws):Ee(Gi,!1)})}O(Ee=>Ye=Le(Ne,1,(r(),_$1(()=>`content ${r().bucketClass}`)),"svelte-15isgd1",Ye,Ee),[()=>({"no-baseline-diff":(a().sortMode==="max-diff-relative"||a().sortMode==="avg-diff-relative")&&r().baselineMaxDiff===0&&r().diffReport.maxDiff!==0})]),M(ke,Ne)};N(pe,ke=>{r()&&ke($e)})}M(H,re)},$$slots:{default:!0},$$legacy:!0}),M(e,q),le(),i()}var Gc=V('<div class="subtitle svelte-p46ums"><!></div>'),Uc=V('<div class="title-row svelte-p46ums"><div class="title svelte-p46ums"><!></div> <!></div>'),Wc=V('<div class="spacer-fixed svelte-p46ums"></div>'),Yc=V("<!> <div><!></div>",1),Hc=V('<div class="context-graph-row svelte-p46ums"><!> <div class="context-graph-spacer svelte-p46ums"></div> <!></div>'),Xc=V('<div class="context-graphs-container svelte-p46ums"><div></div> <div class="context-graphs-column svelte-p46ums"><!></div></div>'),Zc=V('<div class="detail-row svelte-p46ums"><!> <div class="boxes svelte-p46ums"></div> <!></div>');const Jc={hash:"svelte-p46ums",code:".detail-row.svelte-p46ums {display:flex;flex-direction:column;}.title-row.svelte-p46ums {align-items:baseline;margin-bottom:0.5rem;}.title.svelte-p46ums {margin-right:0.8rem;font-size:1.5em;font-weight:700;}.subtitle.svelte-p46ums {font-size:1.3em;color:#aaa;}.subtitle.svelte-p46ums .subtitle-sep {color:#666;}.boxes.svelte-p46ums {display:flex;flex-direction:row;}.box-container.dimmed.svelte-p46ums {opacity:0.2;}.spacer-fixed.svelte-p46ums {min-width:1.5rem;}.context-graphs-container.svelte-p46ums {display:inline-flex;flex-direction:row;margin-top:1rem;padding:0 1rem;background-color:#555;}.context-graphs-column.svelte-p46ums {display:inline-flex;flex-direction:column;}.context-graph-row.svelte-p46ums {display:flex;flex-direction:row;width:77.5rem;margin:1rem 0;}.context-graph-spacer.svelte-p46ums {min-width:1.5rem;}"};function Li(e,t){oe(t,!1),de(e,Jc);let r=U(t,"viewModel",8),n=Y(),i=Y();const a=pt();function l(P){a("show-context-menu",{kind:"row",itemKey:r().pinnedItemKey,clickEvent:P})}function u(P,q){return q!==void 0&&P!==q}function d(P){P===f$1(n)?(E(n,void 0),E(i,void 0)):(E(n,P),E(i,Dc(r().boxes[P])))}function m(P){return P===void 0?0:r().boxes.length>0?(P+.5)/r().boxes.length*100:0}Ge(()=>z(r()),()=>{r()&&(E(n,void 0),E(i,void 0))}),rt(),Me();var v=Zc(),x=b$1(v);{var $=P=>{var q=Uc(),C=b$1(q),D=b$1(C);ze(D,()=>(z(r()),_$1(()=>r().title)));var G=R(C,2);{var B=H=>{var X=Gc(),re=b$1(X);ze(re,()=>(z(r()),_$1(()=>r().subtitle))),M(H,X)};N(G,H=>{z(r()),_$1(()=>r().subtitle)&&H(B)})}me("contextmenu",q,ni(l)),M(P,q)};N(x,P=>{z(r()),_$1(()=>r().title)&&P($)})}var T=R(x,2);Ce(T,5,()=>(z(r()),_$1(()=>r().boxes)),Te,(P,q,C)=>{var D=Yc(),G=W(D);{var B=pe=>{var $e=Wc();M(pe,$e)};N(G,pe=>{C>0&&pe(B)})}var H=R(G,2);let X;var re=b$1(H);Hn(re,{get viewModel(){return f$1(q)},$$events:{"toggle-context-graphs":()=>d(C),"show-context-menu"(pe){st.call(this,t,pe)}}}),O(pe=>X=Le(H,1,"box-container svelte-p46ums",null,X,pe),[()=>({dimmed:u(C,f$1(n))})]),M(P,D)});var A=R(T,2);{var L=P=>{var q=Xc(),C=b$1(q),D=R(C,2),G=b$1(D);{var B=H=>{var X=ge(),re=W(X);Ce(re,1,()=>f$1(i),Te,(pe,$e)=>{var ke=Hc(),Ne=b$1(ke);rs(Ne,{get viewModel(){return f$1($e),_$1(()=>f$1($e).graphL)}});var Ye=R(Ne,4);rs(Ye,{get viewModel(){return f$1($e),_$1(()=>f$1($e).graphR)}}),M(pe,ke)}),M(H,X)};N(G,H=>{f$1(i)&&H(B)})}O(H=>Ae(C,`min-width: max(0%, min(calc(${H??""}% - 38.75rem), calc(100% - 77.5rem)))`),[()=>(f$1(n),_$1(()=>m(f$1(n))))]),M(P,q)};N(A,P=>{f$1(n)!==void 0&&P(L)})}M(e,v),le()}var Qc=V('<div class="legend-item svelte-ili0m8"><!></div>'),ed=V('<div class="legend-item svelte-ili0m8"><!></div>'),td=V('<div> </div> <span class="dataset-arrow svelte-ili0m8">&nbsp;-&gt;&nbsp;</span> <div> </div>',1),rd=V("<div> </div>"),sd=V("<div> </div>"),id$1=V('<div class="detail-box-container svelte-ili0m8"><!></div>'),nd=V('<div class="dataset-container svelte-ili0m8"><div class="dataset-row svelte-ili0m8"><!> <!></div> <!></div>');const ad={hash:"svelte-ili0m8",code:'.dataset-container.svelte-ili0m8 {display:flex;flex:1;flex-direction:column;}.dataset-row.svelte-ili0m8 {display:flex;flex:1;align-items:baseline;margin-left:0.6rem;cursor:pointer;}.dataset-row.svelte-ili0m8:hover {background-color:rgba(255, 255, 255, 0.05);}.dataset-arrow.svelte-ili0m8 {color:#777;}.legend-item.svelte-ili0m8 {font-family:"Roboto Condensed";font-weight:700;font-size:1rem;margin:0.2rem 0.4rem;padding:0.25rem 0.6rem 0.2rem 0.6rem;color:#fff;text-align:center;}.detail-box-container.svelte-ili0m8 {display:flex;flex:1;margin-top:0.2rem;margin-bottom:0.8rem;margin-left:0.4rem;}'};function od(e,t){oe(t,!1),de(e,ad);const r=()=>fe(T,"$detailBoxVisible",n),[n,i]=Ue();let a=U(t,"viewModel",8);const l=a().nameL,u=a().nameR,d=a().legendColorL,m=a().legendColorR,v=a().legendLabelL,x=a().legendLabelR,$=a().bucketClass,T=a().detailBoxVisible;function A(){T.update(pe=>!pe)}Me();var L=nd(),P=b$1(L),q=b$1(P);{var C=pe=>{var $e=Qc(),ke=b$1($e);ze(ke,()=>_$1(()=>v.toUpperCase())),O(()=>Ae($e,`background-color: ${d??""};`)),M(pe,$e)},D=pe=>{var $e=ge(),ke=W($e);{var Ne=Ye=>{var Ar=ed(),hi=b$1(Ar);ze(hi,()=>_$1(()=>x.toUpperCase())),O(()=>Ae(Ar,`background-color: ${m??""};`)),M(Ye,Ar)};N(ke,Ye=>{x&&Ye(Ne)},!0)}M(pe,$e)};N(q,pe=>{v&&!x?pe(C):pe(D,!1)})}var G=R(q,2);{var B=pe=>{var $e=td(),ke=W($e),Ne=b$1(ke),Ye=R(ke,4),Ar=b$1(Ye);O(()=>{Le(ke,1,`dataset-name ${$}`,"svelte-ili0m8"),j(Ne,l),Le(Ye,1,`dataset-name ${$}`,"svelte-ili0m8"),j(Ar,u)}),M(pe,$e)},H=pe=>{var $e=ge(),ke=W($e);{var Ne=Ar=>{var hi=rd(),gi=b$1(hi);O(()=>{Le(hi,1,`dataset-name ${$}`,"svelte-ili0m8"),j(gi,l)}),M(Ar,hi)},Ye=Ar=>{var hi=ge(),gi=W(hi);{var Ui=ws=>{var Gi=sd(),Ee=b$1(Gi);O(()=>{Le(Gi,1,`dataset-name ${$}`,"svelte-ili0m8"),j(Ee,u)}),M(ws,Gi)};N(gi,ws=>{u&&ws(Ui)},!0)}M(Ar,hi)};N(ke,Ar=>{l&&!u?Ar(Ne):Ar(Ye,!1)},!0)}M(pe,$e)};N(G,pe=>{l&&u&&l!==u?pe(B):pe(H,!1)})}var X=R(P,2);{var re=pe=>{var $e=id$1(),ke=b$1($e);Hn(ke,{get viewModel(){return z(a()),_$1(()=>a().detailBoxViewModel)}}),M(pe,$e)};N(X,pe=>{r()&&pe(re)})}me("click",P,A),M(e,L),le(),i()}var ld=V('<div class="spacer-flex svelte-1sxfmis"></div>'),cd=V('<div class="metadata-row svelte-1sxfmis"><div class="metadata-col svelte-1sxfmis"><div class="metadata-key svelte-1sxfmis"> </div> <span>&nbsp;</span> <div class="metadata-value"> </div></div> <div class="spacer-fixed svelte-1sxfmis"></div> <div class="metadata-col svelte-1sxfmis"><div class="metadata-key svelte-1sxfmis"> </div> <span>&nbsp;</span> <div class="metadata-value"> </div></div></div>'),dd=V('<div class="metadata-header svelte-1sxfmis">Metadata differences:</div> <!>',1),ud=V('<div class="metadata-header svelte-1sxfmis">Dataset differences:</div> <!>',1),fd=V('<div class="spacer-flex svelte-1sxfmis"></div>'),vd=V('<div class="graphs-row svelte-1sxfmis"><!> <div class="content svelte-1sxfmis"><div class="graphs-container svelte-1sxfmis"><!> <div class="spacer-fixed svelte-1sxfmis"></div> <!></div> <div class="metadata-container svelte-1sxfmis"><div class="metadata-header svelte-1sxfmis"> </div> <!> <!></div></div> <!></div>');const pd={hash:"svelte-1sxfmis",code:".graphs-row.svelte-1sxfmis {display:flex;flex-direction:row;flex:1;}.spacer-flex.svelte-1sxfmis {flex:1;}.spacer-fixed.svelte-1sxfmis {flex:0 0 2rem;}.content.svelte-1sxfmis {display:flex;flex-direction:column;flex:1;}.graphs-container.svelte-1sxfmis {display:flex;flex-direction:row;}.metadata-container.svelte-1sxfmis {display:flex;flex-direction:column;}.metadata-header.svelte-1sxfmis {margin-top:0.6rem;}.metadata-row.svelte-1sxfmis {display:flex;flex-direction:row;}.metadata-row.svelte-1sxfmis:hover {background-color:rgba(255, 255, 255, 0.05);}.metadata-col.svelte-1sxfmis {display:flex;width:38rem;align-items:baseline;}.metadata-key.svelte-1sxfmis {color:#aaa;font-size:0.8em;margin-left:1rem;}"};function hd(e,t){oe(t,!1),de(e,pd);let r=U(t,"viewModel",8),n=U(t,"align",8,"center");Me();var i=vd(),a=b$1(i);{var l=G=>{var B=ld();M(G,B)};N(a,G=>{n()==="center"&&G(l)})}var u=R(a,2),d=b$1(u),m=b$1(d);rs(m,{get viewModel(){return z(r()),_$1(()=>r().graphL)}});var v=R(m,4);rs(v,{get viewModel(){return z(r()),_$1(()=>r().graphR)}});var x=R(d,2),$=b$1(x),T=b$1($),A=R($,2);{var L=G=>{var B=dd(),H=R(W(B),2);Ce(H,1,()=>(z(r()),_$1(()=>r().metadataRows)),Te,(X,re)=>{var pe=cd(),$e=b$1(pe),ke=b$1($e),Ne=b$1(ke),Ye=R(ke,4),Ar=b$1(Ye),hi=R($e,4),gi=b$1(hi),Ui=b$1(gi),ws=R(gi,4),Gi=b$1(ws);O(()=>{j(Ne,(f$1(re),_$1(()=>f$1(re).key))),j(Ar,(f$1(re),_$1(()=>f$1(re).valueL||"n/a"))),j(Ui,(f$1(re),_$1(()=>f$1(re).key))),j(Gi,(f$1(re),_$1(()=>f$1(re).valueR||"n/a")))}),M(X,pe)}),M(G,B)};N(A,G=>{z(r()),_$1(()=>r().metadataRows.length>0)&&G(L)})}var P=R(A,2);{var q=G=>{var B=ud(),H=R(W(B),2);Ce(H,1,()=>(z(r()),_$1(()=>r().datasetRows)),Te,(X,re)=>{od(X,{get viewModel(){return f$1(re)}})}),M(G,B)};N(P,G=>{z(r()),_$1(()=>r().datasetRows.length>0)&&G(q)})}var C=R(u,2);{var D=G=>{var B=fd();M(G,B)};N(C,G=>{n()==="center"&&G(D)})}O(()=>j(T,`id ${z(r()),_$1(()=>r().graphId)??""}`)),M(e,i),le()}var md=V('<div class="pretitle svelte-4i7ul9"><!></div>'),gd=V('<div class="subtitle svelte-4i7ul9"><!></div>'),bd=V('<div class="annotations svelte-4i7ul9"><!></div>'),wd=V('<li class="related-item"><!></li>'),_d=V('<div class="related svelte-4i7ul9"><span> </span> <ul class="svelte-4i7ul9"></ul></div>'),xd=V('<div class="row-container svelte-4i7ul9"><!></div>'),yd=V('<div class="section-title svelte-4i7ul9"> </div> <!>',1),kd=V('<div class="section-title svelte-4i7ul9"> </div>'),Sd=V("<!> <!>",1),Md=V('<div class="row-container svelte-4i7ul9"><!></div>'),Rd=V('<div class="section-title svelte-4i7ul9"> </div> <!>',1),Cd=V('<div class="section-title svelte-4i7ul9"> </div>'),Id=V('<div class="row-container svelte-4i7ul9"><!></div>'),$d=V('<div class="compare-detail-container svelte-4i7ul9"><div class="header-container svelte-4i7ul9"><div class="title-and-links svelte-4i7ul9"><div class="title-container svelte-4i7ul9"><!> <div class="title-and-subtitle svelte-4i7ul9"><div class="title svelte-4i7ul9"><!></div> <!> <!></div></div> <div class="spacer-flex svelte-4i7ul9"></div> <div class="nav-links no-selection svelte-4i7ul9"><div class="nav-link svelte-4i7ul9">previous</div> <div class="nav-link-sep svelte-4i7ul9">&nbsp;|&nbsp;</div> <div class="nav-link svelte-4i7ul9">next</div></div></div> <!></div> <div class="scroll-container svelte-4i7ul9" tabindex="0"><div class="scroll-content svelte-4i7ul9"><!> <!> <!> <!> <div class="footer svelte-4i7ul9"></div> <!></div></div></div>');const Dd={hash:"svelte-4i7ul9",code:".compare-detail-container.svelte-4i7ul9 {display:flex;flex-direction:column;flex:1;}.header-container.svelte-4i7ul9 {display:flex;flex-direction:column;width:calc(min(100%, 100vw) - 2rem);margin:0 -1rem;padding:0 2rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.5);z-index:1;}.title-and-links.svelte-4i7ul9 {display:flex;flex-direction:row;align-items:center;height:4.5rem;}.spacer-flex.svelte-4i7ul9 {flex:1;}.nav-links.svelte-4i7ul9 {display:flex;flex-direction:row;font-size:0.8em;}.nav-link-sep.svelte-4i7ul9 {color:#444;}.nav-link.svelte-4i7ul9 {cursor:pointer;color:#777;}.title-container.svelte-4i7ul9 {display:flex;flex-direction:column;}.pretitle.svelte-4i7ul9 {margin-bottom:0.2rem;font-size:0.9em;font-weight:700;color:#aaa;}.title-and-subtitle.svelte-4i7ul9 {display:flex;flex-direction:row;align-items:baseline;}.title.svelte-4i7ul9 {margin-bottom:0.4rem;font-size:2em;font-weight:700;cursor:pointer;}.subtitle.svelte-4i7ul9 {font-size:1.2em;font-weight:700;margin-left:1.2rem;color:#aaa;}.annotations.svelte-4i7ul9 {margin-left:0.3rem;color:#aaa;}.annotations.svelte-4i7ul9 .annotation {margin:0 0.3rem;padding:0.1rem 0.3rem;background-color:#222;border:0.5px solid #555;border-radius:0.4rem;}.related.svelte-4i7ul9 {font-size:1em;color:#aaa;margin-bottom:0.6rem;}.related.svelte-4i7ul9 .related-sep {color:#666;}ul.svelte-4i7ul9 {margin:0.1rem 0;padding-left:2rem;}.scroll-container.svelte-4i7ul9 {display:flex;flex-direction:row;max-width:min(100vw, 100%);flex:1 0 1px;overflow:auto;outline:none;background-color:#3c3c3c;}.scroll-content.svelte-4i7ul9 {position:relative;}.section-title.svelte-4i7ul9 {width:calc(min(100%, 100vw) - 2rem);margin:1.5rem 1rem 2rem 1rem;padding:0.2rem 0;border-bottom:solid 1px #555;color:#ccc;font-size:1.4em;font-weight:700;}.section-title.svelte-4i7ul9:not(:first-child) {margin-top:5rem;}.row-container.svelte-4i7ul9 {display:flex;flex-direction:row;margin-top:0.5rem;margin-bottom:3rem;margin-left:1rem;margin-right:1rem;}.row-container.svelte-4i7ul9:first-child {margin-top:3rem;}.footer.svelte-4i7ul9 {height:1rem;}"};function Td(e,t){oe(t,!1),de(e,Dd);const r=()=>fe(f$1(m),"$pinnedDetailRows",i),n=()=>fe(f$1(v),"$regularDetailRows",i),[i,a]=Ue();let l=U(t,"viewModel",8),u=Y(),d=Y(),m=Y(),v=Y(),x=Y(),$,T,A=Y([]),L=Y(),P=Y(!1);const q=pt();function C(Je){switch(Je){case"detail-previous":case"detail-next":{let pi;switch(l().kind){case"freeform-view":case"scenario-view":pi="views";break;case"scenario":pi="by-scenario";break;case"dataset":pi="by-dataset";break;default:Tr(l().kind)}q("command",{cmd:Je==="detail-previous"?"show-comparison-detail-for-previous":"show-comparison-detail-for-next",kind:pi,summaryRowKey:l().summaryRowKey});break}default:q("command",{cmd:Je});break}}function D(Je){const pi=Je.detail?.kind;switch(pi){case"box":case"row":{const Os=Je.detail.itemKey,ji=Pe(l().pinnedItemState.getPinned(Os)),ua=ji?"Unpin":"Pin",da=pi==="row"?"Row":f$1(u);if($=Os,T=Je.detail.scenario,E(A,[{key:"toggle-item-pinned",displayText:`${ua} ${da}`}]),ji){const ga=Pe(l().pinnedItemState.orderedKeys);ga.length>1&&ga[0]!==Os&&f$1(A).push({key:"move-item-to-top",displayText:`Move ${da} to Top`})}da==="Scenario"&&f$1(A).push({key:"show-trace-view",displayText:"Open Scenario in Trace View"}),E(L,Je.detail.clickEvent);break}default:$=void 0,T=void 0,E(A,[]),E(L,void 0);break}}function G(){E(L,void 0)}function B(Je){E(L,void 0);const pi=$,Os=Je.detail;switch(Os){case"toggle-item-pinned":l().pinnedItemState.toggleItemPinned(pi);break;case"move-item-to-top":l().pinnedItemState.moveItemToTop(pi);break;case"show-trace-view":q("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:T?.specR,scenarioKind:"comparison"});break;default:console.error(`ERROR: Unhandled context menu command '${Os}'`);break}}function H(Je){oi(Je)||(Je.key==="ArrowLeft"?(C("detail-previous"),Je.preventDefault()):Je.key==="ArrowRight"?(C("detail-next"),Je.preventDefault()):Je.key==="ArrowUp"&&f$1(x).scrollTop===0&&(C("show-summary"),Je.preventDefault()))}function X(){E(P,!f$1(P))}qr(()=>{f$1(x).focus()}),Ge(()=>(z(l()),f$1(u),f$1(x)),()=>{if(l()){switch(l().kind){case"freeform-view":E(u,"Row");break;case"scenario":case"scenario-view":E(u,"Dataset");break;case"dataset":E(u,"Scenario");break;default:E(u,"Item");break}E(d,`${f$1(u)}s`),kt(E(m,l().pinnedDetailRows),"$pinnedDetailRows",i),kt(E(v,l().regularDetailRows),"$regularDetailRows",i),f$1(x)&&Co(x,f$1(x).scrollTop=0),E(P,!1)}}),rt(),Me();var re=$d();me("keydown",Ir,H);var pe=b$1(re),$e=b$1(pe),ke=b$1($e),Ne=b$1(ke);{var Ye=Je=>{var pi=md(),Os=b$1(pi);ze(Os,()=>(z(l()),_$1(()=>l().pretitle))),M(Je,pi)};N(Ne,Je=>{z(l()),_$1(()=>l().pretitle)&&Je(Ye)})}var Ar=R(Ne,2),hi=b$1(Ar),gi=b$1(hi);ze(gi,()=>(z(l()),_$1(()=>l().title)));var Ui=R(hi,2);{var ws=Je=>{var pi=gd(),Os=b$1(pi);ze(Os,()=>(z(l()),_$1(()=>l().subtitle))),M(Je,pi)};N(Ui,Je=>{z(l()),_$1(()=>l().subtitle)&&Je(ws)})}var Gi=R(Ui,2);{var Ee=Je=>{var pi=bd(),Os=b$1(pi);ze(Os,()=>(z(l()),_$1(()=>l().annotations))),M(Je,pi)};N(Gi,Je=>{z(l()),_$1(()=>l().annotations)&&Je(Ee)})}var ce=R(ke,4),Re=b$1(ce),ye=R(Re,4),Q=R($e,2);{var ee=Je=>{var pi=_d(),Os=b$1(pi),ji=b$1(Os),ua=R(Os,2);Ce(ua,5,()=>(z(l()),_$1(()=>l().relatedItems)),Te,(da,ga)=>{var ca=wd(),ma=b$1(ca);ze(ma,()=>f$1(ga)),M(da,ca)}),O(()=>j(ji,(z(l()),_$1(()=>l().relatedListHeader)))),M(Je,pi)};N(Q,Je=>{f$1(P),z(l()),_$1(()=>f$1(P)&&l().relatedItems.length>0)&&Je(ee)})}var ve=R(pe,2),Ke=b$1(ve),Ve=b$1(Ke);{var at=Je=>{var pi=Sd(),Os=W(pi);Ce(Os,1,()=>(z(l()),_$1(()=>l().graphSections)),Te,(da,ga)=>{var ca=yd(),ma=W(ca),ya=b$1(ma),vi=R(ma,2);Ce(vi,1,()=>(f$1(ga),_$1(()=>f$1(ga).rows)),Te,(fa,ha)=>{var $a=xd(),ue=b$1($a);tl(ue,()=>f$1(ha),Ca=>{hd(Ca,{get viewModel(){return f$1(ha)},align:"left"})}),M(fa,$a)}),O(()=>j(ya,(f$1(ga),_$1(()=>f$1(ga).title)))),M(da,ca)});var ji=R(Os,2);{var ua=da=>{var ga=kd(),ca=b$1(ga);O(()=>j(ca,`All ${f$1(d)??""}`)),M(da,ga)};N(ji,da=>{r(),_$1(()=>r().length===0)&&da(ua)})}M(Je,pi)};N(Ve,Je=>{z(l()),_$1(()=>l().graphSections.length>0)&&Je(at)})}var vr=R(Ve,2);{var se=Je=>{var pi=Rd(),Os=W(pi),ji=b$1(Os),ua=R(Os,2);Ce(ua,1,r,Te,(da,ga)=>{var ca=Md(),ma=b$1(ca);Li(ma,{get viewModel(){return f$1(ga)},$$events:{"show-context-menu":D}}),M(da,ca)}),O(()=>j(ji,`Pinned ${f$1(d)??""}`)),M(Je,pi)};N(vr,Je=>{r(),_$1(()=>r().length>0)&&Je(se)})}var ae=R(vr,2);{var Se=Je=>{var pi=Cd(),Os=b$1(pi);O(()=>j(Os,`All ${f$1(d)??""}`)),M(Je,pi)};N(ae,Je=>{r(),_$1(()=>r().length>0)&&Je(Se)})}var De=R(ae,2);Ce(De,1,n,Te,(Je,pi)=>{var Os=Id(),ji=b$1(Os);Li(ji,{get viewModel(){return f$1(pi)},$$events:{"show-context-menu":D}}),M(Je,Os)});var bs=R(De,4);hs(bs,{get items(){return f$1(A)},get initialEvent(){return f$1(L)},$$events:{"item-selected":B,clickout:G}}),ps(ve,Je=>E(x,Je),()=>f$1(x)),me("click",hi,X),me("click",Re,()=>C("detail-previous")),me("click",ye,()=>C("detail-next")),M(e,re),le(),a()}var zd=(e,t,r,n)=>{const i=e.altKey;t.viewModel.toggleExpanded(r(),i),n()},Vd=V('<button class="filter-expand-button svelte-44fxm2"><span></span></button>'),Ed=V('<span class="filter-expand-spacer svelte-44fxm2"></span>'),Pd=(e,t,r,n)=>{t.viewModel.toggleChecked(r()),n()},Ld=V('<div class="filter-children"></div>'),Nd=V('<div class="filter-item svelte-44fxm2"><!> <label class="filter-label svelte-44fxm2"><input type="checkbox" class="filter-checkbox svelte-44fxm2"/> <span class="filter-text svelte-44fxm2"><!></span></label></div> <!>',1),qd=V('<div class="filter-panel svelte-44fxm2"></div>');const Fd={hash:"svelte-44fxm2",code:".filter-panel.svelte-44fxm2 {display:flex;flex-direction:column;flex:1;padding:1rem;background-color:var(--panel-bg);color:var(--text-color-primary);font-family:Roboto, sans-serif;font-size:1rem;line-height:1.3;}.filter-item.svelte-44fxm2 {display:flex;align-items:center;margin:0.2rem 0;}.filter-label.svelte-44fxm2 {display:flex;align-items:center;user-select:none;cursor:pointer;}.filter-label.svelte-44fxm2:hover {background-color:rgba(255, 255, 255, 0.1);border-radius:2px;padding:0.125rem 0.25rem;margin:-0.125rem -0.25rem;}.filter-checkbox.svelte-44fxm2 {margin-right:0.5rem;cursor:pointer;}.filter-text.svelte-44fxm2 {flex:1;}.filter-expand-button.svelte-44fxm2 {background:none;border:none;padding:0;margin-right:0.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;width:1.3rem;height:1.3rem;}.filter-expand-button.svelte-44fxm2:hover {background-color:rgba(255, 255, 255, 0.1);border-radius:2px;}.filter-triangle.svelte-44fxm2 {font-size:1rem;color:var(--text-color-secondary);user-select:none;}.filter-triangle.expanded.svelte-44fxm2 {transform:rotate(90deg);}.filter-expand-spacer.svelte-44fxm2 {width:1.3rem;height:1.3rem;margin-right:0.25rem;}"};function Ni(e,t){oe(t,!0),de(e,Fd);const r=(u,d=tt,m=tt)=>{const v=ht(()=>t.viewModel.getCheckboxState(m(),f$1(i))),x=ht(()=>n(d())),$=ht(()=>t.viewModel.isExpanded(m(),f$1(i))),T=ht(()=>m().children&&m().children.length>0);var A=Nd(),L=W(A),P=b$1(L);{var q=pe=>{var $e=Vd();$e.__click=[zd,t,m,a];var ke=b$1($e);let Ne;O(Ye=>{yt($e,"data-testid",`${m().key??""}-triangle`),Ne=Le(ke,1,"filter-triangle svelte-44fxm2",null,Ne,Ye)},[()=>({expanded:f$1($)})]),M(pe,$e)},C=pe=>{var $e=Ed();M(pe,$e)};N(P,pe=>{f$1(T)?pe(q):pe(C,!1)})}var D=R(P,2),G=b$1(D);G.__change=[Pd,t,m,a];var B=R(G,2),H=b$1(B);ze(H,()=>m().label);var X=R(L,2);{var re=pe=>{var $e=Ld();Ce($e,21,()=>m().children,ke=>ke.key,(ke,Ne)=>{r(ke,()=>d()+1,()=>f$1(Ne))}),O(()=>{yt($e,"data-testid",`${m().key??""}-children`),Ae($e,`display: ${f$1($)?"block":"none"}`)}),M(pe,$e)};N(X,pe=>{f$1(T)&&pe(re)})}O(()=>{Ae(L,f$1(x)),ll(G,f$1(v)==="checked"),G.indeterminate=f$1(v)==="indeterminate"}),M(u,A)};function n(u){return`padding-left: ${u*20}px;`}let i=Oe(0);function a(){zs(i)}var l=qd();Ce(l,21,()=>t.viewModel.items,u=>u.key,(u,d)=>{r(u,()=>0,()=>f$1(d))}),M(e,l),le()}Pt(["click","change"]);var Kd=(e,t)=>t("checks"),Ad=(e,t)=>t("scenarios"),Bd=V('<div class="filter-popover-content-empty svelte-1i7odm5"><p>No checks configured</p></div>'),Od=V('<div class="filter-popover-content-empty svelte-1i7odm5"><p>No comparisons configured</p></div>'),jd=V('<div class="filter-popover svelte-1i7odm5"><div class="filter-popover-header svelte-1i7odm5"><div class="filter-popover-header-title svelte-1i7odm5">Filters</div> <!></div> <div class="filter-popover-tab-bar svelte-1i7odm5"><button>Checks</button> <button>Comparison Scenarios</button></div> <div class="filter-popover-content svelte-1i7odm5"><!></div> <div class="filter-popover-footer svelte-1i7odm5"><!></div></div>');const Gd={hash:"svelte-1i7odm5",code:".filter-popover.svelte-1i7odm5 {display:flex;flex-direction:column;flex:1;height:100%;background-color:var(--panel-bg);color:var(--text-color-primary);}.filter-popover-header.svelte-1i7odm5 {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);}.filter-popover-header-title.svelte-1i7odm5 {font-size:1.2rem;font-weight:700;}.filter-popover-tab-bar.svelte-1i7odm5 {display:flex;background-color:#333;}.filter-popover-tab-button.svelte-1i7odm5 {flex:1;padding:0.75rem 1rem;background-color:var(--panel-bg);border:none;border-bottom:1px solid var(--panel-border);font-family:Roboto, sans-serif;font-size:1rem;color:var(--text-color-secondary);cursor:pointer;}.filter-popover-tab-button.svelte-1i7odm5:hover {background-color:var(--input-bg);color:var(--text-color-primary);}.filter-popover-tab-button.active.svelte-1i7odm5 {background-color:#333;color:var(--text-color-primary);border-bottom-color:var(--border-color-focused);}.filter-popover-content.svelte-1i7odm5 {flex:1;overflow:auto;}.filter-popover-content.svelte-1i7odm5 .filter-panel {border-top:none;}.filter-popover-content-empty.svelte-1i7odm5 {display:flex;height:100%;justify-content:center;align-items:center;padding:1rem;}.filter-popover-footer.svelte-1i7odm5 {display:flex;justify-content:flex-end;padding:1rem;background-color:var(--panel-footer-bg);border-top:1px solid var(--panel-border);}"};function Ud(e,t){oe(t,!0),de(e,Gd);let r=Oe("checks");function n(C){E(r,C,!0)}var i=jd(),a=b$1(i),l=R(b$1(a),2);li(l,{onClick:()=>t.onClose()});var u=R(a,2),d=b$1(u);let m;d.__click=[Kd,n];var v=R(d,2);let x;v.__click=[Ad,n];var $=R(u,2),T=b$1($);{var A=C=>{var D=ge(),G=W(D);{var B=X=>{Ni(X,{get viewModel(){return t.viewModel.checksPanel}})},H=X=>{var re=Bd();M(X,re)};N(G,X=>{t.viewModel.checksPanel?X(B):X(H,!1)})}M(C,D)},L=C=>{var D=ge(),G=W(D);{var B=H=>{var X=ge(),re=W(X);{var pe=ke=>{Ni(ke,{get viewModel(){return t.viewModel.comparisonScenariosPanel}})},$e=ke=>{var Ne=Od();M(ke,Ne)};N(re,ke=>{t.viewModel.comparisonScenariosPanel?ke(pe):ke($e,!1)})}M(H,X)};N(G,H=>{f$1(r)==="scenarios"&&H(B)},!0)}M(C,D)};N(T,C=>{f$1(r)==="checks"?C(A):C(L,!1)})}var P=R($,2),q=b$1(P);ts(q,{onClick:()=>t.onApplyAndRun?.(),children:(C,D)=>{var G=or("Apply and Run");M(C,G)},$$slots:{default:!0}}),O((C,D)=>{m=Le(d,1,"filter-popover-tab-button svelte-1i7odm5",null,m,C),x=Le(v,1,"filter-popover-tab-button svelte-1i7odm5",null,x,D)},[()=>({active:f$1(r)==="checks"}),()=>({active:f$1(r)==="scenarios"})]),M(e,i),le()}Pt(["click"]);var Wd=V('<div class="freeform-item-subtitle"><!></div>'),Yd=V('<div class="freeform-item-title-row no-selection"><div class="freeform-item-title svelte-gipzah"><!></div> <!></div>'),Hd=V('<div class="freeform-item-content"><div class="freeform-item-graph-container"><!></div></div>'),Xd=V('<div class="freeform-item svelte-gipzah"><!> <div class="freeform-item-content-container"><!></div></div>');const Zd={hash:"svelte-gipzah",code:".freeform-item.svelte-gipzah {display:flex;flex-direction:column;width:240px;height:200px;min-height:200px;border:solid 0.5px red;}.freeform-item-title.svelte-gipzah {font-size:10px;color:#fff;}"};function Jd(e,t){oe(t,!1),de(e,Zd);const r=()=>fe(f$1(l),"$content",n),[n,i]=Ue();let a=U(t,"viewModel",8),l=Y(a().content),u=Y(!1),d=Y(f$1(u)),m=Y();const v=pt();function x(){v("toggle")}Ge(()=>(f$1(u),f$1(d),z(a()),f$1(m)),()=>{(f$1(u)!==f$1(d)||a().requestKey!==f$1(m)?.requestKey)&&(f$1(m)?.clearData(),E(d,f$1(u)),E(m,a()),kt(E(l,a().content),"$content",n),f$1(u)&&a().requestData())}),rt(),Me();var $=Xd(),T=b$1($);{var A=q=>{var C=Yd(),D=b$1(C),G=b$1(D);ze(G,()=>(z(a()),_$1(()=>a().title)));var B=R(D,2);{var H=X=>{var re=Wd(),pe=b$1(re);ze(pe,()=>(z(a()),_$1(()=>a().subtitle))),M(X,re)};N(B,X=>{z(a()),_$1(()=>a().subtitle)&&X(H)})}me("click",D,x),M(q,C)};N(T,q=>{z(a()),_$1(()=>a().title)&&q(A)})}var L=R(T,2),P=b$1(L);Fr(P,{get visible(){return f$1(u)},set visible(q){E(u,q)},children:(q,C)=>{var D=ge(),G=W(D);{var B=H=>{var X=Hd(),re=b$1(X),pe=b$1(re);ms$1(pe,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}}),M(H,X)};N(G,H=>{r()&&H(B)})}M(q,D)},$$slots:{default:!0},$$legacy:!0}),M(e,$),le(),i()}var Qd=V('<div class="freeform-container svelte-1cqoei9"><div class="freeform-scroll-container svelte-1cqoei9"></div></div>');const eu={hash:"svelte-1cqoei9",code:".freeform-container.svelte-1cqoei9 {display:flex;flex-direction:column;flex:1;}.freeform-scroll-container.svelte-1cqoei9 {display:flex;flex:1 1 1px;flex-direction:column;gap:20px;overflow:auto;padding:1rem;align-items:flex-start;outline:none;background-color:#3c3c3c;}"};function tu(e,t){oe(t,!1),de(e,eu);const r=()=>fe(a,"$items",n),[n,i]=Ue(),a=U(t,"viewModel",8)().items;Me();var l=Qd(),u=b$1(l);Ce(u,5,r,Te,(d,m)=>{Jd(d,{get viewModel(){return f$1(m)}})}),M(e,l),le(),i()}var ru=V('<div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Generated:</div> <div class="label generated-date svelte-1u5zf43"> </div></div>'),su=V('<button class="bundle-button dataset-color-0 svelte-1u5zf43" data-testid="bundle-selector-left"> </button> <button class="bundle-button dataset-color-1 svelte-1u5zf43" data-testid="bundle-selector-right"> </button>',1),iu=V('<div class="label dataset-color-0 svelte-1u5zf43"> </div> <div class="label dataset-color-1 svelte-1u5zf43"> </div>',1),nu=V('<button class="icon-button filter svelte-1u5zf43" aria-label="Filters"><!></button>'),au=V('<div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Comparing:</div> <!></div> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Thresholds:</div> <div class="label bucket-color-0 svelte-1u5zf43"><!></div> <div class="label bucket-color-1 svelte-1u5zf43"><!></div> <div class="label bucket-color-2 svelte-1u5zf43"><!></div> <div class="label bucket-color-3 svelte-1u5zf43"><!></div> <div class="label bucket-color-4 svelte-1u5zf43"><!></div></div> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><!> <button class="icon-button controls svelte-1u5zf43" aria-label="Controls"><!></button></div>',1),ou=V('<div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><button class="icon-button filter svelte-1u5zf43" aria-label="Filters"><!></button></div>',1),lu=V("<option> </option>"),cu=V('<div class="control-label concurrency svelte-1u5zf43">Concurrency:</div> <select class="selector concurrency"></select> <div class="spacer-fixed svelte-1u5zf43"></div>',1),du=V('<div class="header-controls svelte-1u5zf43"><div class="spacer-flex svelte-1u5zf43"></div> <!> <div class="control-label sort-by svelte-1u5zf43">Sort by:</div> <select class="selector" data-testid="sort-mode-selector"><option>max diff</option><option>avg diff</option><option>max diff / max baseline diff</option><option>avg diff / avg baseline diff</option></select> <div class="spacer-fixed svelte-1u5zf43"></div> <input class="checkbox" type="checkbox" name="toggle-consistent-y-range"/> <label for="toggle-consistent-y-range">Consistent Y-Axis Ranges</label> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="control-label">Graph Zoom:</div> <input type="range" min="0.3" max="2.5" step="0.1" class="svelte-1u5zf43"/> <div class="control-label"> </div></div>'),uu=V('<div class="header-container svelte-1u5zf43"><div class="header-content svelte-1u5zf43"><div class="header-group svelte-1u5zf43"><button class="icon-button home svelte-1u5zf43" aria-label="Home"><!></button></div> <div class="spacer-flex svelte-1u5zf43"></div> <!> <!></div> <!> <div class="line svelte-1u5zf43"></div></div>');const fu={hash:"svelte-1u5zf43",code:`.header-container.svelte-1u5zf43 {display:flex;flex-direction:column;box-sizing:border-box;width:100%;max-width:min(100%, 100vw);padding:0 1rem;color:#aaa;}.header-content.svelte-1u5zf43 {display:flex;flex-direction:row;margin:0.4rem 0;}.header-group.svelte-1u5zf43 {display:flex;flex-direction:row;align-items:center;}.spacer-flex.svelte-1u5zf43 {flex:1;min-width:20px;}.spacer-fixed.svelte-1u5zf43 {width:2rem;}.icon-button.svelte-1u5zf43 {background:none;border:none;padding:0;color:#bbb;cursor:pointer;}.icon-button.svelte-1u5zf43:hover {color:#fff;}.icon-button.controls.svelte-1u5zf43 {margin-left:1rem;}.label.svelte-1u5zf43:not(:last-child) {margin-right:1rem;}.generated-date.svelte-1u5zf43 {color:#ddd;}.bundle-button.svelte-1u5zf43 {background:none;padding:0.25rem 0.5rem;font:inherit;border:1px solid #333;border-radius:4px;cursor:pointer;}.bundle-button.svelte-1u5zf43:hover {background-color:rgba(255, 255, 255, 0.1);border-color:#888;}.bundle-button.svelte-1u5zf43:not(:last-child) {margin-right:1rem;}.header-controls.svelte-1u5zf43 {display:flex;flex-direction:row;margin:0.4rem 0;align-items:center;}.control-label.concurrency.svelte-1u5zf43,
.control-label.sort-by.svelte-1u5zf43 {margin-right:0.4rem;}input[type=range].svelte-1u5zf43 {width:10rem;margin:0 0.4rem;}.line.svelte-1u5zf43 {min-height:1px;margin-bottom:1rem;background-color:#555;}`};function vu(e,t){oe(t,!1),de(e,fu);const r=()=>fe(C,"$concurrency",m),n=()=>fe(T,"$generatedDateString",m),i=()=>fe($,"$thresholds",m),a=()=>fe(A,"$controlsVisible",m),l=()=>fe(q,"$sortMode",m),u=()=>fe(P,"$consistentYRange",m),d=()=>fe(L,"$zoom",m),[m,v]=Ue();let x=U(t,"viewModel",8);const $=x().thresholds,T=x().generatedDateString,A=x().controlsVisible,L=x().zoom,P=x().consistentYRange,q=x().sortMode,C=x().concurrency,D=pt();function G(){D("command",{cmd:"show-summary"})}function B(ce){D("command",{cmd:"toggle-bundle-selector",side:ce})}function H(){D("command",{cmd:"toggle-filters"})}function X(){x().controlsVisible.update(ce=>!ce)}function re(ce){const Re=parseInt(ce.target.value);ir(C,Re),document.dispatchEvent(new CustomEvent("sde-check-config-changed"))}Me();var pe=uu(),$e=b$1(pe),ke=b$1($e),Ne=b$1(ke),Ye=b$1(Ne);nr(Ye,{class:"icon",get data(){return faHome}});var Ar=R(ke,4);{var hi=ce=>{var Re=ru(),ye=R(b$1(Re),2),Q=b$1(ye);O(()=>j(Q,n())),M(ce,Re)};N(Ar,ce=>{n()&&ce(hi)})}var gi=R(Ar,2);{var Ui=ce=>{var Re=au(),ye=R(W(Re),2),Q=R(b$1(ye),2);{var ee=ca=>{var ma=su(),ya=W(ma),vi=b$1(ya),fa=R(ya,2),ha=b$1(fa);O(()=>{j(vi,(z(x()),_$1(()=>x().nameL))),j(ha,(z(x()),_$1(()=>x().nameR)))}),me("click",ya,()=>B("left")),me("click",fa,()=>B("right")),M(ca,ma)},ve=ca=>{var ma=iu(),ya=W(ma),vi=b$1(ya),fa=R(ya,2),ha=b$1(fa);O(()=>{j(vi,(z(x()),_$1(()=>x().nameL))),j(ha,(z(x()),_$1(()=>x().nameR)))}),M(ca,ma)};N(Q,ca=>{z(x()),_$1(()=>x().bundleManager)?ca(ee):ca(ve,!1)})}var Ke=R(ye,4),Ve=R(b$1(Ke),2),at=b$1(Ve);ze(at,()=>(i(),_$1(()=>i()[0])));var vr=R(Ve,2),se=b$1(vr);ze(se,()=>(i(),_$1(()=>i()[1])));var ae=R(vr,2),Se=b$1(ae);ze(Se,()=>(i(),_$1(()=>i()[2])));var De=R(ae,2),bs=b$1(De);ze(bs,()=>(i(),_$1(()=>i()[3])));var Je=R(De,2),pi=b$1(Je);ze(pi,()=>(i(),_$1(()=>i()[4])));var Os=R(Ke,4),ji=b$1(Os);{var ua=ca=>{var ma=nu(),ya=b$1(ma);nr(ya,{class:"icon",get data(){return faFilter}}),me("click",ma,H),M(ca,ma)};N(ji,ca=>{z(x()),_$1(()=>x().devMode)&&ca(ua)})}var da=R(ji,2),ga=b$1(da);nr(ga,{class:"icon",get data(){return faCog}}),me("click",da,X),M(ce,Re)},ws=ce=>{var Re=ge(),ye=W(Re);{var Q=ee=>{var ve=ou(),Ke=R(W(ve),2),Ve=b$1(Ke),at=b$1(Ve);nr(at,{class:"icon",get data(){return faFilter}}),me("click",Ve,H),M(ee,ve)};N(ye,ee=>{z(x()),_$1(()=>x().devMode)&&ee(Q)},!0)}M(ce,Re)};N(gi,ce=>{z(x()),_$1(()=>x().nameL)?ce(Ui):ce(ws,!1)})}var Gi=R($e,2);{var Ee=ce=>{var Re=du(),ye=R(b$1(Re),2);{var Q=De=>{var bs=cu(),Je=R(W(bs),2);Ce(Je,4,()=>_$1(()=>Array.from({length:Math.floor(navigator.hardwareConcurrency/2)},(pi,Os)=>Os+1)),Te,(pi,Os)=>{var ji=lu(),ua=b$1(ji),da={};O(()=>{ri(ji,Os===r()),j(ua,Os),da!==(da=Os)&&(ji.value=(ji.__value=Os)??"")}),M(pi,ji)}),me("change",Je,re),M(De,bs)};N(ye,De=>{z(x()),_$1(()=>x().devMode)&&De(Q)})}var ee=R(ye,4);O(()=>{l(),Rn(()=>{})});var ve=b$1(ee);ve.value=ve.__value="max-diff";var Ke=R(ve);Ke.value=Ke.__value="avg-diff";var Ve=R(Ke);Ve.value=Ve.__value="max-diff-relative";var at=R(Ve);at.value=at.__value="avg-diff-relative";var vr=R(ee,4),se=R(vr,8),ae=R(se,2),Se=b$1(ae);O(De=>j(Se,De),[()=>(d(),_$1(()=>`${d().toFixed(1)}x`))]),Kn(ee,l,De=>ir(q,De)),jn(vr,u,De=>ir(P,De)),ii(se,d,De=>ir(L,De)),M(ce,Re)};N(Gi,ce=>{a()&&ce(Ee)})}me("click",Ne,G),M(e,pe),le(),v()}var pu=V("<div></div>"),hu=V('<div class="dot-plot-container svelte-yxhckp"><div class="hline svelte-yxhckp"></div> <div class="vline end-line svelte-yxhckp" style="left: 0;"></div> <div class="vline end-line svelte-yxhckp" style="left: 100%;"></div> <!> <div></div></div>');const mu={hash:"svelte-yxhckp",code:".dot-plot-container.svelte-yxhckp {position:relative;width:100%;height:1.6rem;}.hline.svelte-yxhckp {position:absolute;left:0;top:0.7rem;width:100%;height:1px;background-color:#555;}.vline.svelte-yxhckp {position:absolute;left:0;height:1.4rem;width:1px;}.vline.end-line.svelte-yxhckp {background-color:#555;}.vline.avg-line.svelte-yxhckp {width:2px;margin-left:-1px;}.dot.svelte-yxhckp {position:absolute;top:0.3rem;width:0.8rem;height:0.8rem;margin-left:-0.4rem;border-radius:0.4rem;opacity:0.2;}"};function Fs(e,t){oe(t,!1),de(e,mu);let r=U(t,"viewModel",8),n=U(t,"colorClass",8);Me();var i=hu(),a=R(b$1(i),6);Ce(a,1,()=>(z(r()),_$1(()=>r().points)),Te,(u,d)=>{var m=pu();O(()=>{Le(m,1,`dot ${n()}`,"svelte-yxhckp"),Ae(m,`left: ${f$1(d)??""}%;`)}),M(u,m)});var l=R(a,2);O(()=>{Le(l,1,`vline avg-line ${n()}`,"svelte-yxhckp"),Ae(l,`left: ${z(r()),_$1(()=>r().avgPoint)??""}%;`)}),M(e,i),le()}var gu=V('<button class="run">Run</button>'),bu=V("<div>Running performance tests, please wait</div>"),wu=V('<tr><td class="rownum svelte-180kq73" rowspan="2"> </td><td class="dim svelte-180kq73"> </td><td class="value dataset-color-0 svelte-180kq73"> </td><td class="dim svelte-180kq73"> </td><td class="plot svelte-180kq73"><!></td></tr> <tr><td class="dim svelte-180kq73"> </td><td class="value dataset-color-1 svelte-180kq73"> </td><td class="dim svelte-180kq73"> </td><td class="plot svelte-180kq73"><!></td></tr>',1),_u=V('<table class="svelte-180kq73"><thead><tr><th class="svelte-180kq73">run</th><th class="svelte-180kq73">min</th><th class="svelte-180kq73">avg</th><th class="svelte-180kq73">max</th></tr></thead><tbody></tbody></table>'),xu=V('<div class="perf-container svelte-180kq73"><div class="controls-container svelte-180kq73"><!></div> <div class="table-container svelte-180kq73"><!></div></div>');const yu={hash:"svelte-180kq73",code:`.perf-container.svelte-180kq73 {display:flex;flex-direction:column;padding:0 1rem;}.controls-container.svelte-180kq73 {display:flex;flex-direction:column;align-items:flex-start;height:3rem;}.table-container.svelte-180kq73 {display:flex;flex:1;}table.svelte-180kq73 {border-collapse:collapse;}td.svelte-180kq73,
th.svelte-180kq73 {padding-top:0.2rem;padding-bottom:0.2rem;}th.svelte-180kq73 {color:#aaa;text-align:right;font-weight:500;}td.svelte-180kq73 {width:4.5rem;text-align:right;font-family:monospace;}td.rownum.svelte-180kq73 {width:2rem;}td.dim.svelte-180kq73 {color:#777;}td.plot.svelte-180kq73 {width:30rem;padding-left:2rem;padding-right:2rem;}`};function ku(e,t){oe(t,!1),de(e,yu);const r=()=>fe(l,"$rows",n),[n,i]=Ue();let a=U(t,"viewModel",8);const l=a().rows;let u=Y(!1);function d(){f$1(u)||(E(u,!0),runPerf({onComplete:(q,C)=>{a().addRow(q,C),E(u,!1)},onError:q=>{console.error(q),E(u,!1)}}))}Me();var m=xu(),v=b$1(m),x=b$1(v);{var $=q=>{var C=gu();O(()=>C.disabled=f$1(u)),me("click",C,d),M(q,C)},T=q=>{var C=bu();M(q,C)};N(x,q=>{f$1(u)?q(T,!1):q($)})}var A=R(v,2),L=b$1(A);{var P=q=>{var C=_u(),D=R(b$1(C));Ce(D,5,r,Te,(G,B)=>{var H=wu(),X=W(H),re=b$1(X),pe=b$1(re),$e=R(re),ke=b$1($e),Ne=R($e),Ye=b$1(Ne),Ar=R(Ne),hi=b$1(Ar),gi=R(Ar),Ui=b$1(gi);Fs(Ui,{get viewModel(){return f$1(B),_$1(()=>f$1(B).dotPlotL)},colorClass:"dataset-bg-0"});var ws=R(X,2),Gi=b$1(ws),Ee=b$1(Gi),ce=R(Gi),Re=b$1(ce),ye=R(ce),Q=b$1(ye),ee=R(ye),ve=b$1(ee);Fs(ve,{get viewModel(){return f$1(B),_$1(()=>f$1(B).dotPlotR)},colorClass:"dataset-bg-1"}),O(()=>{j(pe,(f$1(B),_$1(()=>f$1(B).num))),j(ke,(f$1(B),_$1(()=>f$1(B).minTimeL))),j(Ye,(f$1(B),_$1(()=>f$1(B).avgTimeL))),j(hi,(f$1(B),_$1(()=>f$1(B).maxTimeL))),j(Ee,(f$1(B),_$1(()=>f$1(B).minTimeR))),j(Re,(f$1(B),_$1(()=>f$1(B).avgTimeR))),j(Q,(f$1(B),_$1(()=>f$1(B).maxTimeR)))}),M(G,H)}),M(q,C)};N(L,q=>{r(),_$1(()=>r().length>0)&&q(P)})}M(e,m),le(),i()}var Su=V('<div class="graph-container svelte-hxzd9c"><!></div>');const Mu={hash:"svelte-hxzd9c",code:".graph-container.svelte-hxzd9c {position:relative;display:flex;width:36rem;height:22rem;margin-left:1rem;margin-top:0.5rem;margin-bottom:1rem;}"};function Ru(e,t){oe(t,!1),de(e,Mu);const r=()=>fe(f$1(l),"$content",n),[n,i]=Ue();let a=U(t,"viewModel",8),l=Y(a().content),u=Y(!1),d=Y(f$1(u)),m=Y();Ge(()=>(f$1(u),f$1(d),z(a()),f$1(m)),()=>{(f$1(u)!==f$1(d)||a().baseRequestKey!==f$1(m)?.baseRequestKey)&&(f$1(m)?.clearData(),E(d,f$1(u)),E(m,a()),kt(E(l,a().content),"$content",n),f$1(u)&&a().requestData())}),rt(),Me(),Fr(e,{get visible(){return f$1(u)},set visible(v){E(u,v)},children:(v,x)=>{var $=ge(),T=W($);{var A=L=>{var P=Su(),q=b$1(P);ms$1(q,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}}),M(L,P)};N(T,L=>{r()&&L(A)})}M(v,$)},$$slots:{default:!0},$$legacy:!0}),le(),i()}var Cu=V('<div class="row check-graph svelte-hx6uys"><!></div>'),Iu=V('<div class="child-rows"></div>'),$u=V('<div><span class="label"><!></span></div> <!>',1);const Du={hash:"svelte-hx6uys",code:".check-graph.svelte-hx6uys {height:23rem;margin-left:8.5rem;}"};function Xn(e,t){oe(t,!1),de(e,Du);const r=()=>fe(f$1(u),"$expanded",i),n=()=>fe(f$1(l),"$childRows",i),[i,a]=Ue(),l=Y(),u=Y();let d=U(t,"viewModel",8),m=U(t,"onShowContextMenu",8);function v(){d().onClicked()}function x(C){d().scenarioReport?.checkScenario?.spec&&(C.preventDefault(),m()?.(C,d()))}Ge(()=>z(d()),()=>{kt(E(l,d().childRows),"$childRows",i)}),Ge(()=>z(d()),()=>{kt(E(u,d().expanded),"$expanded",i)}),rt(),Me();var $=$u(),T=W($),A=b$1(T),L=b$1(A);ze(L,()=>(z(d()),_$1(()=>d().span)));var P=R(T,2);{var q=C=>{var D=ge(),G=W(D);{var B=X=>{var re=Cu(),pe=b$1(re);Ru(pe,{get viewModel(){return z(d()),_$1(()=>d().graphBoxViewModel)}}),M(X,re)},H=X=>{var re=Iu();Ce(re,5,n,Te,(pe,$e)=>{var ke=ge(),Ne=W(ke);Xn(Ne,{get viewModel(){return f$1($e)},get onShowContextMenu(){return m()}}),M(pe,ke)}),M(X,re)};N(G,X=>{z(d()),_$1(()=>d().graphBoxViewModel)?X(B):X(H,!1)})}M(C,D)};N(P,C=>{r()&&C(q)})}O(()=>Le(T,1,(z(d()),_$1(()=>`row ${d().rowClasses}`)),"svelte-hx6uys")),me("click",A,v),me("contextmenu",T,x),M(e,$),le(),a()}var Tu=V('<div class="bar bucket-bg-0 svelte-148uwot"></div> <div class="bar status-bg-failed svelte-148uwot"></div> <div class="bar status-bg-error svelte-148uwot"></div> <div class="bar status-bg-skipped svelte-148uwot"></div>',1),zu=V('<div class="bar gray svelte-148uwot" style="width: 100%"></div>'),Vu=V("<span>No checks</span>"),Eu=V("<span> </span>"),Pu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-passed"> </span>',1),Lu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-failed"> </span>',1),Nu=V('<span class="status-color-error"> </span>'),qu=V('<span class="status-color-error"> </span>'),Fu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <!>',1),Ku=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-skipped"> </span>',1),Au=V("<span> </span> <!> <!> <!> <!>",1),Bu=V('<div class="group-container svelte-148uwot"><div class="row group"><div class="label"> </div></div> <!></div>'),Ou=V('<div class="check-summary-container svelte-148uwot"><div class="summary-bar-row svelte-148uwot"><div class="bar-container svelte-148uwot"><!></div> <span class="summary-label svelte-148uwot"><!></span></div> <div class="check-detail svelte-148uwot"></div> <!></div>');const ju={hash:"svelte-148uwot",code:`.check-summary-container.svelte-148uwot {display:flex;flex-direction:column;}.check-detail.svelte-148uwot {display:flex;flex-direction:column;}.group-container.svelte-148uwot {margin-bottom:1.2rem;}.group-container.svelte-148uwot .test-rows {display:flex;flex-direction:column;}.group-container.svelte-148uwot .test-rows:not(.children-visible) {display:none;}.group-container.svelte-148uwot .test-rows.children-visible {display:flex;}.group-container.svelte-148uwot .row {display:flex;flex-direction:row;}.group-container.svelte-148uwot .row.group {position:sticky;top:50px;height:32px;z-index:6;background-color:#272727;font-size:1.2em;}.group-container.svelte-148uwot .row.group > .label {margin-top:8px;}.group-container.svelte-148uwot .row.test {position:sticky;display:flex;align-items:center;top:82px;height:20px;z-index:5;background-color:#272727;}.group-container.svelte-148uwot .row.scenario {position:sticky;top:102px;height:18px;z-index:4;background-color:#272727;}.group-container.svelte-148uwot .row.dataset {position:sticky;top:120px;height:18px;z-index:3;background-color:#272727;}.group-container.svelte-148uwot .row.predicate {position:sticky;top:138px;height:18px;z-index:2;background-color:#272727;}.group-container.svelte-148uwot .row.placeholder {height:18px;}.group-container.svelte-148uwot .row > .label {cursor:pointer;}.group-container.svelte-148uwot .row.scenario,
.group-container.svelte-148uwot .row.dataset,
.group-container.svelte-148uwot .row.predicate {color:#777;}.group-container.svelte-148uwot .bold {font-weight:700;color:#bbb;}.summary-bar-row.svelte-148uwot {display:flex;flex-direction:row;align-items:baseline;align-self:flex-start;margin:2.6rem 0;opacity:1;}.bar-container.svelte-148uwot {display:flex;flex-direction:row;width:15rem;height:0.8rem;}.bar.svelte-148uwot {height:0.8rem;}.bar.gray.svelte-148uwot {background-color:#777;}.summary-label.svelte-148uwot {margin-left:0.8rem;color:#fff;}.sep.svelte-148uwot {color:#777;}`};function Gu(e,t){oe(t,!1),de(e,ju);let r=U(t,"viewModel",8),n,i=Y([]),a=Y();const l=pt();function u(H,X){X.scenarioReport?.checkScenario?.spec?(n=X.scenarioReport,E(i,[{key:"show-trace-view",displayText:"Open Scenario in Trace View"}]),E(a,H)):(n=void 0,E(i,[]),E(a,void 0))}function d(){E(a,void 0)}function m(H){E(a,void 0);const X=H.detail;switch(X){case"show-trace-view":l("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:n?.checkScenario?.spec,scenarioKind:"check"});break;default:console.error(`ERROR: Unhandled context menu command '${X}'`);break}}Me();var v=Ou(),x=b$1(v),$=b$1(x),T=b$1($);{var A=H=>{var X=Tu(),re=W(X),pe=R(re,2),$e=R(pe,2),ke=R($e,2);O(()=>{Ae(re,`width: ${z(r()),_$1(()=>r().percents[0])??""}%;`),Ae(pe,`width: ${z(r()),_$1(()=>r().percents[1])??""}%;`),Ae($e,`width: ${z(r()),_$1(()=>r().percents[2])??""}%;`),Ae(ke,`width: ${z(r()),_$1(()=>r().percents[3])??""}%;`)}),M(H,X)},L=H=>{var X=zu();M(H,X)};N(T,H=>{z(r()),_$1(()=>r().total>0)?H(A):H(L,!1)})}var P=R($,2),q=b$1(P);{var C=H=>{var X=Vu();M(H,X)},D=H=>{var X=ge(),re=W(X);{var pe=ke=>{var Ne=Eu(),Ye=b$1(Ne);O(()=>j(Ye,`${z(r()),_$1(()=>r().total)??""} total passed`)),M(ke,Ne)},$e=ke=>{var Ne=Au(),Ye=W(Ne),Ar=b$1(Ye),hi=R(Ye,2);{var gi=ye=>{var Q=Pu(),ee=R(W(Q),2),ve=b$1(ee);O(()=>j(ve,`${z(r()),_$1(()=>r().passed)??""} passed`)),M(ye,Q)};N(hi,ye=>{z(r()),_$1(()=>r().passed)&&ye(gi)})}var Ui=R(hi,2);{var ws=ye=>{var Q=Lu(),ee=R(W(Q),2),ve=b$1(ee);O(()=>j(ve,`${z(r()),_$1(()=>r().failed)??""} failed`)),M(ye,Q)};N(Ui,ye=>{z(r()),_$1(()=>r().failed)&&ye(ws)})}var Gi=R(Ui,2);{var Ee=ye=>{var Q=Fu(),ee=R(W(Q),2);{var ve=Ve=>{var at=Nu(),vr=b$1(at);O(()=>j(vr,`${z(r()),_$1(()=>r().errors)??""} errors`)),M(Ve,at)},Ke=Ve=>{var at=qu(),vr=b$1(at);O(()=>j(vr,`${z(r()),_$1(()=>r().errors)??""} error`)),M(Ve,at)};N(ee,Ve=>{z(r()),_$1(()=>r().errors>1)?Ve(ve):Ve(Ke,!1)})}M(ye,Q)};N(Gi,ye=>{z(r()),_$1(()=>r().errors)&&ye(Ee)})}var ce=R(Gi,2);{var Re=ye=>{var Q=Ku(),ee=R(W(Q),2),ve=b$1(ee);O(()=>j(ve,`${z(r()),_$1(()=>r().skipped)??""} skipped`)),M(ye,Q)};N(ce,ye=>{z(r()),_$1(()=>r().skipped)&&ye(Re)})}O(()=>j(Ar,`${z(r()),_$1(()=>r().total)??""} total`)),M(ke,Ne)};N(re,ke=>{z(r()),_$1(()=>r().total===r().passed)?ke(pe):ke($e,!1)},!0)}M(H,X)};N(q,H=>{z(r()),_$1(()=>r().total===0)?H(C):H(D,!1)})}var G=R(x,2);Ce(G,5,()=>(z(r()),_$1(()=>r().groups)),Te,(H,X)=>{var re=Bu(),pe=b$1(re),$e=b$1(pe),ke=b$1($e),Ne=R(pe,2);Ce(Ne,1,()=>(f$1(X),_$1(()=>f$1(X).tests)),Te,(Ye,Ar)=>{Xn(Ye,{get viewModel(){return f$1(Ar)},onShowContextMenu:u})}),O(()=>j(ke,(f$1(X),_$1(()=>f$1(X).name)))),M(H,re)});var B=R(G,2);hs(B,{get items(){return f$1(i)},get initialEvent(){return f$1(a)},$$events:{"item-selected":m,clickout:d}}),M(e,v),le()}var Uu=V('<div class="bar striped svelte-st0o1s"></div>'),Wu=V('<div class="bar bucket-bg-0 svelte-st0o1s"></div> <div class="bar bucket-bg-1 svelte-st0o1s"></div> <div class="bar bucket-bg-2 svelte-st0o1s"></div> <div class="bar bucket-bg-3 svelte-st0o1s"></div> <div class="bar bucket-bg-4 svelte-st0o1s"></div> <div class="bar bucket-bg-5 svelte-st0o1s"></div>',1),Yu=V('<div class="subtitle svelte-st0o1s"><!></div>'),Hu=V('<div class="annotations svelte-st0o1s"><!></div>'),Xu=V('<div class="summary-row svelte-st0o1s"><div class="bar-container svelte-st0o1s"><!></div> <div class="title-container svelte-st0o1s"><div class="title-part svelte-st0o1s"><div class="title svelte-st0o1s"><!></div> <!> <!></div></div></div>');const Zu={hash:"svelte-st0o1s",code:".summary-row.svelte-st0o1s {display:flex;flex-direction:row;flex:0 0 auto;align-items:flex-end;margin:0.2rem 0;opacity:0.8;}.summary-row.svelte-st0o1s:hover {opacity:1;}.bar-container.svelte-st0o1s {display:flex;flex-direction:row;width:15rem;height:0.8rem;margin-bottom:0.25rem;cursor:pointer;}.bar.svelte-st0o1s {height:0.8rem;}.bar.striped.svelte-st0o1s {width:100%;background:repeating-linear-gradient(-45deg, goldenrod, goldenrod 0.4rem, darkgoldenrod 0.4rem, darkgoldenrod 1rem);}.title-container.svelte-st0o1s {display:flex;flex-direction:column;margin-left:0.8rem;}.title-part.svelte-st0o1s {display:flex;flex-direction:row;align-items:baseline;}.title.svelte-st0o1s {color:#fff;cursor:pointer;}.subtitle.svelte-st0o1s {font-size:0.8em;margin-left:0.6rem;color:#aaa;cursor:pointer;}.annotations.svelte-st0o1s {font-size:0.8em;margin-left:0.3rem;color:#aaa;}.annotations.svelte-st0o1s .annotation {margin:0 0.3rem;padding:0.1rem 0.3rem;background-color:#1c1c1c;border:0.5px solid #555;border-radius:0.4rem;}"};function Ju(e,t){oe(t,!1),de(e,Zu);let r=U(t,"viewModel",8);const n=r().diffPercentByBucket,i=pt();function a(){r().itemKey&&i("command",{cmd:"show-comparison-detail",summaryRow:r()})}function l(G){r().groupSummary?.root.kind==="scenario"&&i("show-context-menu",{kind:"scenario",scenario:r().groupSummary?.root,clickEvent:G})}Me();var u=Xu(),d=b$1(u),m=b$1(d);{var v=G=>{var B=Uu();M(G,B)},x=G=>{var B=Wu(),H=W(B),X=R(H,2),re=R(X,2),pe=R(re,2),$e=R(pe,2),ke=R($e,2);O(()=>{Ae(H,`width: ${_$1(()=>n[0])??""}%;`),Ae(X,`width: ${_$1(()=>n[1])??""}%;`),Ae(re,`width: ${_$1(()=>n[2])??""}%;`),Ae(pe,`width: ${_$1(()=>n[3])??""}%;`),Ae($e,`width: ${_$1(()=>n[4])??""}%;`),Ae(ke,`width: ${_$1(()=>n[5])??""}%;`)}),M(G,B)};N(m,G=>{z(r()),_$1(()=>r().diffPercentByBucket===void 0)?G(v):G(x,!1)})}var $=R(d,2),T=b$1($),A=b$1(T),L=b$1(A);ze(L,()=>(z(r()),_$1(()=>r().title)));var P=R(A,2);{var q=G=>{var B=Yu(),H=b$1(B);ze(H,()=>(z(r()),_$1(()=>r().subtitle))),me("click",B,a),M(G,B)};N(P,G=>{z(r()),_$1(()=>r().subtitle)&&G(q)})}var C=R(P,2);{var D=G=>{var B=Hu(),H=b$1(B);ze(H,()=>(z(r()),_$1(()=>r().annotations))),M(G,B)};N(C,G=>{z(r()),_$1(()=>r().annotations)&&G(D)})}me("click",d,a),me("click",A,a),me("contextmenu",T,ni(l)),M(e,u),le()}var Qu=V('<div class="header-count svelte-lq58a5"> </div>'),ef=V('<div class="section-container svelte-lq58a5"><div><div class="header-bar svelte-lq58a5"></div> <div class="header-title svelte-lq58a5"><!></div> <!></div> <!></div>');const tf={hash:"svelte-lq58a5",code:".section-container.svelte-lq58a5 {display:flex;flex-direction:column;}.section-container.svelte-lq58a5:not(:last-child) {margin-bottom:1.5rem;}.header-row.svelte-lq58a5 {display:flex;flex-direction:row;align-items:center;margin:0.4rem 0;cursor:pointer;}.header-row.collapsed.svelte-lq58a5 {opacity:0.5;}.header-row.svelte-lq58a5:hover {opacity:0.8;}.header-bar.svelte-lq58a5 {display:flex;width:15rem;height:1px;background-color:#555;}.header-title.svelte-lq58a5 {margin-left:0.8rem;color:#fff;font-size:1.2em;}.header-count.svelte-lq58a5 {margin-left:0.5rem;padding:0.1rem 0.5rem;border-radius:1rem;background-color:rgba(255, 165, 0, 0.7);color:#eee;font-size:0.85em;}"};function rf(e,t){oe(t,!1),de(e,tf);const r=()=>fe(l,"$expanded",n),[n,i]=Ue();let a=U(t,"viewModel",8);const l=a().expanded;function u(){l.update(P=>!P)}Me();var d=ef(),m=b$1(d),v=R(b$1(m),2),x=b$1(v);ze(x,()=>(z(a()),_$1(()=>a().header.title)));var $=R(v,2);{var T=P=>{var q=Qu(),C=b$1(q);O(()=>j(C,(z(a()),_$1(()=>a().rowsWithDiffs)))),M(P,q)};N($,P=>{z(a()),_$1(()=>a().rowsWithDiffs>0)&&P(T)})}var A=R(m,2);{var L=P=>{var q=ge(),C=W(q);Ce(C,1,()=>(z(a()),_$1(()=>a().rows)),Te,(D,G)=>{Ju(D,{get viewModel(){return f$1(G)},$$events:{command(B){st.call(this,t,B)},"show-context-menu"(B){st.call(this,t,B)}}})}),M(P,q)};N(A,P=>{r()&&P(L)})}O(()=>Le(m,1,`header-row ${r()?"expanded":"collapsed"}`,"svelte-lq58a5")),me("click",m,u),M(e,d),le(),i()}var sf=V('<div class="section-container svelte-1ewsx3b"><!></div>'),nf=V('<div class="comparison-summary-container svelte-1ewsx3b"><!> <div class="footer svelte-1ewsx3b"></div> <!></div>');const af={hash:"svelte-1ewsx3b",code:".comparison-summary-container.svelte-1ewsx3b {display:flex;flex-direction:column;padding-top:2rem;}.section-container.svelte-1ewsx3b {display:flex;flex-direction:column;scroll-margin-top:5rem;}.section-container.svelte-1ewsx3b:not(:last-child) {margin-bottom:1.5rem;}.footer.svelte-1ewsx3b {flex:0 0 1rem;}"};function Ms(e,t){oe(t,!1),de(e,af);const r=()=>fe(f$1(a),"$sections",n),[n,i]=Ue(),a=Y();let l=U(t,"viewModel",8),u,d=Y([]),m=Y();const v=pt();function x(q){switch(q.detail?.kind){case"scenario":{u=q.detail.scenario,E(d,[{key:"show-trace-view",displayText:"Open Scenario in Trace View"}]),E(m,q.detail.clickEvent);break}default:u=void 0,E(d,[]),E(m,void 0);break}}function $(){E(m,void 0)}function T(q){E(m,void 0);const C=q.detail;switch(C){case"show-trace-view":{v("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:u?.specR,scenarioKind:"comparison"});break}default:console.error(`ERROR: Unhandled context menu command '${C}'`);break}}Ge(()=>z(l()),()=>{kt(E(a,l().sections),"$sections",n)}),rt(),Me();var A=nf(),L=b$1(A);Ce(L,1,r,Te,(q,C)=>{var D=sf(),G=b$1(D);rf(G,{get viewModel(){return f$1(C)},$$events:{command(B){st.call(this,t,B)},"show-context-menu":x}}),O(()=>yt(D,"id",(f$1(C),_$1(()=>f$1(C).header.rowKey)))),M(q,D)});var P=R(L,4);hs(P,{get items(){return f$1(d)},get initialEvent(){return f$1(m)},$$events:{"item-selected":T,clickout:$}}),M(e,A),le(),i()}var of=V('<td class="plot svelte-t7dc3f"><!></td>'),lf=V('<td> </td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell dim svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell dim svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <!>',1);const cf={hash:"svelte-t7dc3f",code:"td.svelte-t7dc3f {padding:0;height:1.8rem;}.name.svelte-t7dc3f {padding-right:3rem;max-width:20rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.row-header {color:#aaa;}.cell.svelte-t7dc3f {display:flex;width:100%;flex-direction:row;align-items:baseline;font-family:monospace;}.cell.dim.svelte-t7dc3f {color:#777;}.value.svelte-t7dc3f {flex:1;padding-right:0.4rem;text-align:right;}.change.svelte-t7dc3f {flex:1;padding-left:0.4rem;text-align:left;font-size:0.8em;}.plot.svelte-t7dc3f {width:12rem;padding-left:2rem;padding-right:2rem;cursor:pointer;}"};function Rs(e,t){oe(t,!1),de(e,cf);let r=U(t,"viewModel",8);const n=r().datasetClassIndex,i=n!==void 0?`dataset-color-${n}`:"row-header",a=n!==void 0?`dataset-bg-${n}`:"",l=pt();function u(){l("command",{cmd:"show-perf"})}Me();var d=lf(),m=W(d),v=b$1(m),x=R(m,2),$=b$1(x),T=b$1($),A=b$1(T),L=R(x,2),P=b$1(L),q=b$1(P),C=b$1(q),D=R(L,2),G=b$1(D),B=b$1(G),H=b$1(B),X=R(B,2),re=b$1(X),pe=R(D,2),$e=b$1(pe),ke=b$1($e),Ne=b$1(ke),Ye=R(ke,2),Ar=b$1(Ye),hi=R(pe,2),gi=b$1(hi),Ui=b$1(gi),ws=b$1(Ui),Gi=R(Ui,2),Ee=b$1(Gi),ce=R(hi,2),Re=b$1(ce),ye=b$1(Re),Q=b$1(ye),ee=R(ce,2),ve=b$1(ee),Ke=b$1(ve),Ve=b$1(Ke),at=R(ee,2);{var vr=se=>{var ae=of(),Se=b$1(ae);Fs(Se,{get viewModel(){return z(r()),_$1(()=>r().dotPlot)},get colorClass(){return a}}),me("click",ae,u),M(se,ae)};N(at,se=>{z(r()),_$1(()=>r().dotPlot)&&se(vr)})}O(()=>{Le(m,1,`name ${i}`,"svelte-t7dc3f"),j(v,(z(r()),_$1(()=>r().modelName))),j(A,(z(r()),_$1(()=>r().inputs))),j(C,(z(r()),_$1(()=>r().outputs))),j(H,(z(r()),_$1(()=>r().modelSize))),j(re,(z(r()),_$1(()=>r().modelSizePctChange))),j(Ne,(z(r()),_$1(()=>r().dataSize))),j(Ar,(z(r()),_$1(()=>r().dataSizePctChange))),j(ws,(z(r()),_$1(()=>r().avgTime))),j(Ee,(z(r()),_$1(()=>r().avgTimePctChange))),j(Q,(z(r()),_$1(()=>r().minTime))),j(Ve,(z(r()),_$1(()=>r().maxTime)))}),M(e,d),le()}var df=V('<table class="header svelte-183yv7e"><thead><tr><th class="svelte-183yv7e"></th><th class="svelte-183yv7e">inputs</th><th class="svelte-183yv7e">outputs</th><th class="svelte-183yv7e">model size (bytes)</th><th class="svelte-183yv7e">data size (bytes)</th><th class="svelte-183yv7e">avg time (ms)</th><th class="dim svelte-183yv7e">min time (ms)</th><th class="dim svelte-183yv7e">max time (ms)</th><th class="svelte-183yv7e"></th></tr></thead><tbody><tr><!></tr><tr><!></tr><tr><!></tr></tbody></table>');const uf={hash:"svelte-183yv7e",code:"table.svelte-183yv7e {border-collapse:collapse;}th.svelte-183yv7e {color:#aaa;text-align:left;font-family:Roboto;font-weight:500;}th.dim.svelte-183yv7e {color:#555;}th.svelte-183yv7e:nth-child(2), th.svelte-183yv7e:nth-child(3) {width:6rem;}th.svelte-183yv7e:nth-child(4), th.svelte-183yv7e:nth-child(5) {width:10rem;}th.svelte-183yv7e:nth-child(6) {width:8rem;}th.svelte-183yv7e:nth-child(7), th.svelte-183yv7e:nth-child(8) {width:8rem;}"};function ff(e,t){oe(t,!1),de(e,uf);let r=U(t,"viewModel",8);Me();var n=df(),i=R(b$1(n)),a=b$1(i),l=b$1(a);Rs(l,{get viewModel(){return z(r()),_$1(()=>r().row1)},$$events:{command(x){st.call(this,t,x)}}});var u=R(a),d=b$1(u);Rs(d,{get viewModel(){return z(r()),_$1(()=>r().row2)},$$events:{command(x){st.call(this,t,x)}}});var m=R(u),v=b$1(m);Rs(v,{get viewModel(){return z(r()),_$1(()=>r().row3)},$$events:{command(x){st.call(this,t,x)}}}),M(e,n),le()}var vf=(e,t)=>t.onClick(),pf=V('<div><div class="tab-title svelte-1dgb6r4"> </div> <div> </div></div>');const hf={hash:"svelte-1dgb6r4",code:".tab-item.svelte-1dgb6r4 {display:flex;flex-direction:column;padding:0.5rem 3rem 0.3rem 0;cursor:pointer;opacity:0.7;border-bottom:solid 1px transparent;}.tab-item.svelte-1dgb6r4:hover {opacity:1;}.tab-item.selected.svelte-1dgb6r4 {opacity:1;border-bottom:solid 1px #555;}.tab-title.svelte-1dgb6r4 {font-size:1.6rem;font-weight:700;color:#fff;margin-bottom:0.2rem;cursor:pointer;}.tab-subtitle.svelte-1dgb6r4 {font-size:1rem;font-weight:400;}"};function mf(e,t){oe(t,!0),de(e,hf);const r=()=>fe(t.subtitleClass,"$subtitleClass",i),n=()=>fe(t.subtitle,"$subtitle",i),[i,a]=Ue();var l=pf();let u;l.__click=[vf,t];var d=b$1(l),m=b$1(d),v=R(d,2),x=b$1(v);O($=>{u=Le(l,1,"tab-item svelte-1dgb6r4",null,u,$),j(m,t.title),Le(v,1,`tab-subtitle ${r()}`,"svelte-1dgb6r4"),j(x,n())},[()=>({selected:t.selected})]),M(e,l),le(),a()}Pt(["click"]);var gf=V('<div class="tab-bar svelte-6ugrco"></div>');const bf={hash:"svelte-6ugrco",code:".tab-bar.svelte-6ugrco {position:sticky;top:0;display:flex;flex-direction:row;gap:3rem;background-color:#272727;z-index:1000;margin:0 -1rem;padding:0 1rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.8);}"};function wf(e,t){oe(t,!1),de(e,bf);const r=()=>fe(l,"$selectedItemId",n),[n,i]=Ue();let a=U(t,"viewModel",8);const l=a().selectedItemId,u=pt();function d(x){a().selectedIndex.set(x)}function m(x){oi(x)||(x.key==="ArrowLeft"?(a().selectedIndex.update($=>$>0?$-1:$),x.preventDefault()):x.key==="ArrowRight"?(a().selectedIndex.update($=>$<a().items.length-1?$+1:$),x.preventDefault()):x.key==="ArrowDown"&&(u("command",{cmd:"enter-tab",itemId:r()}),x.preventDefault()))}Me();var v=gf();me("keydown",Ir,m),Ce(v,5,()=>(z(a()),_$1(()=>a().items)),Te,(x,$,T)=>{{let A=Er(()=>(f$1($),r(),_$1(()=>f$1($).id===r())));mf(x,{get title(){return f$1($),_$1(()=>f$1($).title)},get subtitle(){return f$1($),_$1(()=>f$1($).subtitle)},get subtitleClass(){return f$1($),_$1(()=>f$1($).subtitleClass)},get selected(){return f$1(A)},onClick:()=>d(T)})}}),M(e,v),le(),i()}var _f=V('<div class="header-container svelte-3dzbgn"><!></div> <div class="line svelte-3dzbgn"></div>',1),xf=V('<div class="summary-container svelte-3dzbgn"><div class="scroll-container svelte-3dzbgn"><!> <!> <!></div></div>');const yf={hash:"svelte-3dzbgn",code:".summary-container.svelte-3dzbgn {display:flex;flex-direction:column;flex:1;}.scroll-container.svelte-3dzbgn {position:relative;display:flex;flex:1 1 1px;flex-direction:column;padding:0 1rem;overflow:auto;}.header-container.svelte-3dzbgn {margin-bottom:1rem;}.line.svelte-3dzbgn {min-height:1px;margin-bottom:0.5rem;background-color:#555;}"};function kf(e,t){oe(t,!1),de(e,yf);const r=()=>fe(l,"$selectedTabId",n),[n,i]=Ue();let a=U(t,"viewModel",8);const l=a().tabBarViewModel.selectedItemId;Me();var u=xf(),d=b$1(u),m=b$1(d);{var v=L=>{var P=_f(),q=W(P),C=b$1(q);ff(C,{get viewModel(){return z(a()),_$1(()=>a().statsTableViewModel)},$$events:{command(D){st.call(this,t,D)}}}),M(L,P)};N(m,L=>{z(a()),_$1(()=>a().statsTableViewModel)&&L(v)})}var x=R(m,2);wf(x,{get viewModel(){return z(a()),_$1(()=>a().tabBarViewModel)},$$events:{command(L){st.call(this,t,L)}}});var $=R(x,2);{var T=L=>{Gu(L,{get viewModel(){return z(a()),_$1(()=>a().checkSummaryViewModel)},$$events:{command(P){st.call(this,t,P)}}})},A=L=>{var P=ge(),q=W(P);{var C=G=>{Ms(G,{get viewModel(){return z(a()),_$1(()=>a().comparisonViewsSummaryViewModel)},$$events:{command(B){st.call(this,t,B)}}})},D=G=>{var B=ge(),H=W(B);{var X=pe=>{Ms(pe,{get viewModel(){return z(a()),_$1(()=>a().comparisonsByScenarioSummaryViewModel)},$$events:{command($e){st.call(this,t,$e)}}})},re=pe=>{var $e=ge(),ke=W($e);{var Ne=Ye=>{Ms(Ye,{get viewModel(){return z(a()),_$1(()=>a().comparisonsByDatasetSummaryViewModel)},$$events:{command(Ar){st.call(this,t,Ar)}}})};N(ke,Ye=>{r()==="comps-by-dataset"&&Ye(Ne)},!0)}M(pe,$e)};N(H,pe=>{r()==="comps-by-scenario"?pe(X):pe(re,!1)},!0)}M(G,B)};N(q,G=>{r()==="comp-views"?G(C):G(D,!1)},!0)}M(L,P)};N($,L=>{r()==="checks"?L(T):L(A,!1)})}M(e,u),le(),i()}var Sf=V("<option><!></option>"),Mf=V('<select role="combobox"></select>');function Gr(e,t){oe(t,!1);const r=()=>fe(u,"$selectedValue",n),[n,i]=Ue();let a=U(t,"viewModel",8),l=U(t,"ariaLabel",8,void 0);const u=a().selectedValue,d=Pe(u);function m(){a().onUserChange?.(Pe(u))}Me();var v=Mf();O(()=>{r(),Rn(()=>{l(),a()})}),Ce(v,5,()=>(z(a()),_$1(()=>a().options)),Te,(x,$)=>{var T=Sf(),A=b$1(T);ze(A,()=>(f$1($),_$1(()=>f$1($).label)));var L={};O(()=>{T.disabled=(f$1($),_$1(()=>f$1($).options.disabled===!0)),yt(T,"hidden",(f$1($),_$1(()=>f$1($).options.hidden===!0))),ri(T,(f$1($),_$1(()=>f$1($).value===d))),L!==(L=(f$1($),_$1(()=>f$1($).value)))&&(T.value=(T.__value=(f$1($),_$1(()=>f$1($).value)))??"")}),M(x,T)}),O(()=>yt(v,"aria-label",l())),Kn(v,r,x=>ir(u,x)),me("change",v,m),M(e,v),le(),i()}var Rf=V("<div></div>"),Cf=V('<div class="trace-points svelte-zv717u"></div>'),If=V('<div><div class="trace-var-name-container svelte-zv717u"><div class="trace-var-name svelte-zv717u"> </div></div> <!></div>');const $f={hash:"svelte-zv717u",code:".trace-row.svelte-zv717u {display:flex;flex-direction:row;}.trace-var-name-container.svelte-zv717u {display:flex;flex-wrap:nowrap;font-size:10px;color:#fff;width:250px;max-width:250px;margin-right:10px;}.trace-var-name.svelte-zv717u {display:flex;flex-wrap:nowrap;font-size:10px;color:#fff;white-space:nowrap;overflow:hidden;z-index:1000;}.trace-var-name.svelte-zv717u:hover {overflow:unset;background-color:#222;}.trace-points.svelte-zv717u {display:flex;flex-direction:row;align-items:center;gap:2px;}.trace-point.svelte-zv717u {width:6px;height:6px;}.trace-point.empty.svelte-zv717u {width:4px;height:4px;background-color:unset !important;border:solid 1px #aaa;}.trace-point.selected.svelte-zv717u {border:solid 2px #4a9eff;box-sizing:border-box;}"};function Df(e,t){oe(t,!1),de(e,$f);let r=U(t,"viewModel",8),n=U(t,"selectedPointIndex",8,void 0);const i=pt();function a(A,L){A.diffPoint&&i("show-tooltip",{eventX:L.clientX,eventY:L.clientY,datasetKey:r().datasetKey,varName:r().varName,diffPoint:A.diffPoint})}function l(){i("hide-tooltip")}function u(A){i("select",{pointIndex:A})}Me();var d=If();let m;var v=b$1(d),x=b$1(v),$=b$1(x),T=R(v,2);Fr(T,{children:(A,L)=>{var P=Cf();Ce(P,5,()=>(z(r()),_$1(()=>r().points)),Te,(q,C,D)=>{var G=Rf();let B;O(H=>{B=Le(G,1,"trace-point svelte-zv717u",null,B,H),Ae(G,`background-color: ${f$1(C),_$1(()=>f$1(C).color)??""}`)},[()=>({empty:f$1(C).hasDiff===void 0,selected:n()===D})]),me("mouseover",G,H=>a(f$1(C),H)),me("mouseleave",G,l),me("click",G,()=>u(D)),M(q,G)}),M(A,P)},$$slots:{default:!0}}),O(A=>{m=Le(d,1,"trace-row svelte-zv717u",null,m,A),yt(d,"data-var-name",(z(r()),_$1(()=>r().varName))),j($,(z(r()),_$1(()=>r().varName)))},[()=>({selected:n()!==void 0})]),M(e,d),le()}var Tf=V('<div class="loading svelte-17ybi2h"></div>'),zf=V('<div class="error svelte-17ybi2h"> </div>'),Vf=V('<div class="trace-tooltip svelte-17ybi2h"><div class="tooltip-header svelte-17ybi2h"><div class="tooltip-title svelte-17ybi2h"> </div></div> <div class="tooltip-data svelte-17ybi2h"><div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Time:</span> <span class="data-value svelte-17ybi2h"> </span></div> <div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Value 1:</span> <span class="data-value svelte-17ybi2h"> </span></div> <div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Value 2:</span> <span class="data-value svelte-17ybi2h"> </span></div></div> <div class="tooltip-graph svelte-17ybi2h"><!></div></div>');const Ef={hash:"svelte-17ybi2h",code:`.trace-tooltip.svelte-17ybi2h {position:absolute;display:flex;flex-direction:column;width:400px;height:300px;padding:12px;background-color:#2a2a2a;border:1px solid #555;border-radius:8px;box-shadow:0 4px 12px rgba(0, 0, 0, 0.3);font-family:inherit;z-index:1000;}.tooltip-header.svelte-17ybi2h {margin-bottom:8px;}.tooltip-title.svelte-17ybi2h {margin-bottom:4px;font-size:14px;font-weight:bold;color:#fff;}.tooltip-data.svelte-17ybi2h {display:flex;flex-direction:column;gap:4px;margin-bottom:12px;}.data-point.svelte-17ybi2h {display:flex;justify-content:flex-start;font-size:12px;}.data-label.svelte-17ybi2h {width:50px;margin-right:6px;color:#ccc;text-align:right;}.data-value.svelte-17ybi2h {color:#fff;font-family:monospace;}.tooltip-graph.svelte-17ybi2h {flex:1;position:relative;min-height:200px;display:flex;align-items:center;justify-content:center;}.loading.svelte-17ybi2h,
.error.svelte-17ybi2h {color:#ccc;font-size:12px;text-align:center;}.error.svelte-17ybi2h {color:#ff6b6b;}`};function Pf(e,t){oe(t,!1),de(e,Ef);const r=()=>fe(f$1(d),"$content",n),[n,i]=Ue();let a=U(t,"viewModel",8,void 0),l=U(t,"x",8,0),u=U(t,"y",8,0),d=Y(a().content),m=Y();Ge(()=>(z(a()),f$1(m)),()=>{a()?.requestKey!==f$1(m)?.requestKey&&(f$1(m)?.clearData(),E(m,a()),kt(E(d,a().content),"$content",n),a().requestData())}),rt(),Me();var v=Vf(),x=b$1(v),$=b$1(x),T=b$1($),A=R(x,2),L=b$1(A),P=R(b$1(L),2),q=b$1(P),C=R(L,2),D=R(b$1(C),2),G=b$1(D),B=R(C,2),H=R(b$1(B),2),X=b$1(H),re=R(A,2),pe=b$1(re);{var $e=Ne=>{var Ye=Tf();M(Ne,Ye)},ke=Ne=>{var Ye=ge(),Ar=W(Ye);{var hi=Ui=>{var ws=zf(),Gi=b$1(ws);O(()=>j(Gi,`Error: ${r(),_$1(()=>r().error)??""}`)),M(Ui,ws)},gi=Ui=>{var ws=ge(),Gi=W(ws);{var Ee=ce=>{ms$1(ce,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}})};N(Gi,ce=>{r(),_$1(()=>r()?.comparisonGraphViewModel)&&ce(Ee)},!0)}M(Ui,ws)};N(Ar,Ui=>{r(),_$1(()=>r()?.error)?Ui(hi):Ui(gi,!1)},!0)}M(Ne,Ye)};N(pe,Ne=>{r(),_$1(()=>r()?.loading)?Ne($e):Ne(ke,!1)})}O((Ne,Ye)=>{Ae(v,`left: ${l()??""}px; top: ${u()??""}px;`),j(T,(z(a()),_$1(()=>a().varName))),j(q,(z(a()),_$1(()=>a().diffPoint.time))),j(G,Ne),j(X,Ye)},[()=>(z(a()),_$1(()=>a().diffPoint.valueL.toFixed(6))),()=>(z(a()),_$1(()=>a().diffPoint.valueR.toFixed(6)))]),M(e,v),le(),i()}var Lf=V('<div class="trace-scenario-selector-label svelte-135ht03">File:</div> <input type="file" class="trace-dat-file-chooser svelte-135ht03" id="trace-dat-file" name="trace-dat-file" accept=".dat"/>',1),Nf=V('<div class="trace-scenario-selector-label svelte-135ht03">Scenario:</div> <!>',1),qf=V("<div> </div>"),Ff=V("<div>No differences detected</div>"),Kf=V('<div class="trace-group svelte-135ht03"><div class="trace-group-title svelte-135ht03"> </div> <!></div>'),Af=V('<div class="trace-container svelte-135ht03" tabindex="0"><div class="trace-header-container svelte-135ht03"><div class="trace-header-content svelte-135ht03"><div class="trace-source-selector-label svelte-135ht03">Source 1:</div> <!> <!> <div class="trace-source-selector-label svelte-135ht03">Source 2:</div> <!> <div class="trace-scenario-selector-label svelte-135ht03">Scenario:</div> <!></div> <div class="trace-options svelte-135ht03"><label class="trace-checkbox-label svelte-135ht03"><input type="checkbox" class="svelte-135ht03"/> Hide rows with no diffs</label></div></div> <div class="trace-scroll-container svelte-135ht03"><!> <!></div></div>');const Bf={hash:"svelte-135ht03",code:`.trace-container.svelte-135ht03 {display:flex;flex-direction:column;flex:1;}.trace-container.svelte-135ht03:focus-within {outline:none;}.trace-header-container.svelte-135ht03 {display:flex;margin:0 -1rem;padding:0 2rem 1rem 2rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.5);z-index:1;}.trace-header-content.svelte-135ht03 {display:grid;grid-template-columns:auto auto auto auto;grid-template-rows:24px 24px;align-items:center;gap:0.5rem 0.5rem;}.trace-header-content.svelte-135ht03 select {max-width:300px;}.trace-source-selector-label.svelte-135ht03,
.trace-scenario-selector-label.svelte-135ht03 {text-align:right;}.trace-scenario-selector-label.svelte-135ht03 {margin-left:0.7rem;}.trace-dat-file-chooser.svelte-135ht03 {width:auto;font-family:inherit;font-size:inherit;margin:0;}.trace-options.svelte-135ht03 {margin-top:6px;margin-left:32px;}.trace-checkbox-label.svelte-135ht03 {display:flex;align-items:center;gap:0.5rem;color:#fff;font-size:inherit;cursor:pointer;}.trace-checkbox-label.svelte-135ht03 input[type=checkbox]:where(.svelte-135ht03) {margin:0;}.trace-scroll-container.svelte-135ht03 {display:flex;flex:1 1 1px;flex-direction:column;overflow:auto;padding:2rem 1rem;align-items:flex-start;outline:none;background-color:#3c3c3c;}.trace-group.svelte-135ht03 {display:flex;flex-direction:column;}.trace-group.svelte-135ht03:not(:first-child) {margin-top:20px;}.trace-group-title.svelte-135ht03 {font-size:14px;font-weight:700;color:#fff;margin-bottom:4px;}`};function Of(e,t){oe(t,!1),de(e,Bf);const r=()=>fe(C,"$selectedSource0",T),n=()=>fe(H,"$selectedScenarioSpec0",T),i=()=>fe(re,"$selectedDatText",T),a=()=>fe(D,"$selectedSource1",T),l=()=>fe(X,"$selectedScenarioSpec1",T),u=()=>fe(Ne,"$selectedSquareData",T),d=()=>fe(G,"$scenarioSelector0",T),m=()=>fe(B,"$scenarioSelector1",T),v=()=>fe($e,"$hideRowsWithNoDiffs",T),x=()=>fe(pe,"$statusMessage",T),$=()=>fe(ke,"$filteredGroups",T),[T,A]=Ue();let L=U(t,"viewModel",8);const P=L().sourceSelector0,q=L().sourceSelector1,C=L().sourceSelector0.selectedValue,D=L().sourceSelector1.selectedValue,G=L().scenarioSelector0,B=L().scenarioSelector1,H=L().selectedScenarioSpec0,X=L().selectedScenarioSpec1,re=L().datText,pe=L().statusMessage,$e=L().hideRowsWithNoDiffs,ke=L().filteredGroups,Ne=L().selectedSquareData;let Ye=Y(),Ar=Y(),hi=Y(void 0),gi=Y(0),Ui=Y(0);const ws=426,Gi=326;function Ee(vi,fa,ha){let $a=vi+2;$a+ws>window.innerWidth&&(ha!==void 0?$a=ha-ws-2:$a=vi-ws-2);const ue=6;let Ca=fa+ue;Ca+Gi>window.innerHeight&&(Ca=fa-Gi-ue),E(gi,$a),E(Ui,Ca)}function ce(vi){if(vi){const fa=vi.getBoundingClientRect();Ee(fa.right,fa.top,fa.left)}else E(gi,window.innerWidth/2-ws/2),E(Ui,window.innerHeight/2-Gi/2)}function Re(vi){const fa=vi.detail.datasetKey,ha=vi.detail.varName,$a=vi.detail.diffPoint,ue=vi.detail.eventX,Ca=vi.detail.eventY;Ee(ue,Ca),E(hi,L().createTooltipViewModel(fa,ha,$a))}function ye(){f$1(hi)?.clearData(),E(hi,void 0)}function Q(vi){L().handleKeyDown(vi)}function ee(vi,fa,ha){L().selectSquareByIndices(vi,fa,ha)}function ve(vi){const fa=document.querySelector(".trace-scroll-container");if(!fa)return;const ha=fa.getBoundingClientRect(),$a=vi.getBoundingClientRect();if(!($a.top>=ha.top&&$a.bottom<=ha.bottom)){const ue=vi.getBoundingClientRect().top-ha.top+fa.scrollTop,Ca=ha.height,ka=$a.height,xa=ue-Ca/2+ka/2;fa.scrollTo({top:xa,behavior:"instant"})}}let Ke=Y(void 0);Ge(()=>(f$1(Ar),f$1(Ye),z(L())),()=>{if(f$1(Ar)&&f$1(Ar)[0]){const vi=f$1(Ar)[0],fa=new FileReader;fa.onload=()=>{E(Ye,fa.result),L().datText.set(f$1(Ye))},fa.readAsText(vi)}}),Ge(()=>(r(),n(),i(),a(),l(),z(L())),()=>{r()&&(n()||i())&&a()&&l()&&L().run()}),Ge(()=>(u(),z(L()),f$1(Ke)),()=>{if(u()){const vi=L().getSelectedSquareInfo();vi&&(E(hi,L().createTooltipViewModel(vi.datasetKey,vi.varName,vi.diffPoint)),clearTimeout(f$1(Ke)),E(Ke,void 0),setTimeout(()=>{const fa=document.querySelector(".trace-row.selected");fa&&ve(fa);let ha=document.querySelector(".trace-point.selected");ha?ce(ha):E(Ke,setTimeout(()=>{ha=document.querySelector(".trace-point.selected"),ce(ha)},300))},0))}}),rt(),Me();var Ve=Af(),at=b$1(Ve),vr=b$1(at),se=R(b$1(vr),2);Gr(se,{get viewModel(){return P},ariaLabel:"Source 1"});var ae=R(se,2);{var Se=vi=>{var fa=Lf(),ha=R(W(fa),2);dl(ha,()=>f$1(Ar),$a=>E(Ar,$a)),M(vi,fa)},De=vi=>{var fa=Nf(),ha=R(W(fa),2);Gr(ha,{get viewModel(){return d()},ariaLabel:"Scenario 1"}),M(vi,fa)};N(ae,vi=>{r()==="dat"?vi(Se):vi(De,!1)})}var bs=R(ae,4);Gr(bs,{get viewModel(){return q},ariaLabel:"Source 2"});var Je=R(bs,4);Gr(Je,{get viewModel(){return m()},ariaLabel:"Scenario 2"});var pi=R(vr,2),Os=b$1(pi),ji=b$1(Os),ua=R(at,2),da=b$1(ua);{var ga=vi=>{var fa=qf(),ha=b$1(fa);O(()=>j(ha,x())),M(vi,fa)},ca=vi=>{var fa=ge(),ha=W(fa);{var $a=Ca=>{var ka=Ff();M(Ca,ka)},ue=Ca=>{var ka=ge(),xa=W(ka);Ce(xa,1,$,Te,(Th,eh,Oh)=>{var uh=Kf(),ah=b$1(uh),jh=b$1(ah),Vh=R(ah,2);Ce(Vh,1,()=>(f$1(eh),_$1(()=>f$1(eh).rows)),Te,(zh,gh,Uh)=>{const pp=Er(()=>(u(),_$1(()=>u()?.groupIndex===Oh&&u()?.rowIndex===Uh?u().pointIndex:void 0)));Df(zh,{get viewModel(){return f$1(gh)},get selectedPointIndex(){return f$1(pp)},$$events:{"show-tooltip":Re,"hide-tooltip":ye,select:ep=>ee(Oh,Uh,ep.detail.pointIndex)}})}),O(()=>j(jh,(f$1(eh),_$1(()=>f$1(eh).title)))),M(Th,uh)}),M(Ca,ka)};N(ha,Ca=>{$(),_$1(()=>$().length===0)?Ca($a):Ca(ue,!1)},!0)}M(vi,fa)};N(da,vi=>{x()?vi(ga):vi(ca,!1)})}var ma=R(da,2);{var ya=vi=>{Pf(vi,{get viewModel(){return f$1(hi)},get x(){return f$1(gi)},get y(){return f$1(Ui)}})};N(ma,vi=>{f$1(hi)&&vi(ya)})}jn(ji,v,vi=>ir($e,vi)),me("keydown",Ve,Q),M(e,Ve),le(),A()}var jf=V('<div class="loading-container svelte-1nkjba2"></div>'),Gf=V('<div class="progress-container svelte-1nkjba2"><div class="progress"> </div></div>'),Uf=V('<div class="popover-overlay svelte-1nkjba2"><div class="popover-container bundle-selector-popover-container svelte-1nkjba2"><!></div></div>'),Wf=V('<div class="popover-overlay svelte-1nkjba2"><div class="popover-container filter-popover-container svelte-1nkjba2"><!></div></div>'),Yf=V('<div class="app-container svelte-1nkjba2"><!> <!> <!> <!></div>');const Hf={hash:"svelte-1nkjba2",code:".app-container.svelte-1nkjba2 {position:relative;display:flex;flex-direction:column;flex:1;}.loading-container.svelte-1nkjba2 {display:flex;flex-direction:column;flex:1 1 auto;align-items:center;justify-content:center;}.progress-container.svelte-1nkjba2 {display:flex;height:100vh;align-items:center;justify-content:center;font-size:2em;}.popover-overlay.svelte-1nkjba2 {position:absolute;top:0;left:0;width:100%;max-width:min(100%, 100vw);bottom:0;background-color:rgba(0, 0, 0, 0.4);z-index:1000;pointer-events:none;}.popover-container.svelte-1nkjba2 {position:absolute;top:26px;width:500px;height:min(100% - 60px, 600px);background-color:var(--panel-bg);border:1px solid var(--panel-border);border-radius:12px;box-shadow:0 4px 8px rgba(0, 0, 0, 0.5);pointer-events:auto;overflow:hidden;}.bundle-selector-popover-container.svelte-1nkjba2 {left:calc(50% - 250px);width:500px;height:min(100% - 60px, 500px);}.filter-popover-container.svelte-1nkjba2 {right:24px;width:500px;height:min(100% - 60px, 600px);}"};function Xf(e,t){oe(t,!1),de(e,Hf);const r=()=>fe(x,"$zoom",a),n=()=>fe(m,"$checksInProgress",a),i=()=>fe(v,"$progress",a),[a,l]=Ue(),u=Y();let d=U(t,"viewModel",8);const m=d().checksInProgress,v=d().progress,x=d().headerViewModel.zoom;let $=Y(),T=Y(),A=Y(),L,P=Y("summary"),q=Y(void 0),C=Y(!1);const D=new Ia("Roboto Condensed",{weight:400});let G=Y(!1);D.load().then(()=>{E(G,!0)});let B=Y(!1);function H(){E($,void 0),E(P,"summary")}function X(ws){ws===f$1(q)?E(q,void 0):E(q,ws)}function re(){E(q,void 0)}function pe(ws){const Gi=f$1(q),Ee=new CustomEvent("sde-check-bundle",{detail:{side:Gi,name:ws.local?.name||ws.remote?.name,url:ws.local?.url||ws.remote?.url}});document.dispatchEvent(Ee)}function $e(){E(C,!f$1(C))}function ke(){E(C,!1)}function Ne(ws){const Gi=ws.detail,Ee=Gi.cmd;switch(Ee){case"show-summary":H();break;case"toggle-bundle-selector":X(Gi.side);break;case"toggle-filters":$e();break;case"enter-tab":if(Gi.itemId!=="checks"){let ce;switch(Gi.itemId){case"comp-views":ce="views";break;case"comps-by-scenario":ce="by-scenario";break;case"comps-by-dataset":ce="by-dataset";break;default:return}const Re=d().createCompareDetailViewModelForFirstSummaryRow(ce);Re&&(E($,Re),E(P,"comparison-detail"))}break;case"show-comparison-detail":E($,d().createCompareDetailViewModelForSummaryRow(Gi.summaryRow)),E(P,"comparison-detail");break;case"show-comparison-detail-for-previous":case"show-comparison-detail-for-next":{const ce=Ee==="show-comparison-detail-for-previous"?-1:1,Re=d().createCompareDetailViewModelForSummaryRowWithDelta(Gi.kind,Gi.summaryRowKey,ce);Re&&(E($,Re),E(P,"comparison-detail"));break}case"show-perf":f$1(T)||E(T,d().createPerfViewModel()),E(P,"perf");break;case"show-trace-view-with-scenario":E(A,d().createTraceViewModel(Gi.scenarioSpec,Gi.scenarioKind)),E(P,"trace");break;default:console.error(`ERROR: Unhandled command ${Ee}`);break}}function Ye(ws){if(!oi(ws)&&!(ws.altKey||ws.ctrlKey||ws.metaKey||ws.shiftKey||ws.isComposing))switch(ws.key){case"c":d().headerViewModel.controlsVisible.update(Gi=>!Gi),ws.preventDefault();break;case"h":H(),ws.preventDefault();break;case"t":f$1(P)!=="trace"&&(E(A,d().createTraceViewModel()),E(P,"trace"),ws.preventDefault());break}}Ge(()=>r(),()=>{E(u,`--graph-zoom: ${r()}`)}),Ge(()=>(f$1(G),z(d())),()=>{f$1(G)&&(E(B,!0),d().runTestSuite())}),rt(),Me();var Ar=ge();me("keydown",Ir,Ye);var hi=W(Ar);{var gi=ws=>{var Gi=jf();M(ws,Gi)},Ui=ws=>{var Gi=Yf(),Ee=b$1(Gi);vu(Ee,{get viewModel(){return z(d()),_$1(()=>d().headerViewModel)},$$events:{command:Ne}});var ce=R(Ee,2);{var Re=Ve=>{var at=Gf(),vr=b$1(at),se=b$1(vr);O(()=>j(se,i())),M(Ve,at)},ye=Ve=>{var at=ge(),vr=W(at);{var se=Se=>{Td(Se,{get viewModel(){return f$1($)},$$events:{command:Ne}})},ae=Se=>{var De=ge(),bs=W(De);{var Je=Os=>{tu(Os,{get viewModel(){return L},$$events:{command:Ne}})},pi=Os=>{var ji=ge(),ua=W(ji);{var da=ca=>{Of(ca,{get viewModel(){return f$1(A)},$$events:{command:Ne}})},ga=ca=>{var ma=ge(),ya=W(ma);{var vi=ha=>{ku(ha,{get viewModel(){return f$1(T)},$$events:{command:Ne}})},fa=ha=>{kf(ha,{get viewModel(){return z(d()),_$1(()=>d().summaryViewModel)},$$events:{command:Ne}})};N(ya,ha=>{f$1(P)==="perf"?ha(vi):ha(fa,!1)},!0)}M(ca,ma)};N(ua,ca=>{f$1(P)==="trace"?ca(da):ca(ga,!1)},!0)}M(Os,ji)};N(bs,Os=>{f$1(P)==="freeform"?Os(Je):Os(pi,!1)},!0)}M(Se,De)};N(vr,Se=>{f$1(P)==="comparison-detail"?Se(se):Se(ae,!1)},!0)}M(Ve,at)};N(ce,Ve=>{n()?Ve(Re):Ve(ye,!1)})}var Q=R(ce,2);{var ee=Ve=>{var at=Uf(),vr=b$1(at),se=b$1(vr);cc(se,{get bundleManager(){return z(d()),_$1(()=>d().bundleManager)},get side(){return f$1(q)},onClose:re,onSelect:ae=>{pe(ae),re()}}),Ps(at,ae=>qs?.(ae)),Ct(()=>me("clickout",at,re)),M(Ve,at)};N(Q,Ve=>{f$1(q)!==void 0&&Ve(ee)})}var ve=R(Q,2);{var Ke=Ve=>{var at=Wf(),vr=b$1(at),se=b$1(vr);Ud(se,{get viewModel(){return z(d()),_$1(()=>d().filterPopoverViewModel)},onClose:ke,onApplyAndRun:()=>{d().applyFilters(),ke()}}),Ps(at,ae=>qs?.(ae)),Ct(()=>me("clickout",at,ke)),M(Ve,at)};N(ve,Ve=>{f$1(C)&&Ve(Ke)})}O(()=>Ae(Gi,f$1(u))),M(ws,Gi)};N(hi,ws=>{f$1(B)?ws(Ui,!1):ws(gi)})}M(e,Ar),le(),l()}function Zf(e,t){let r=U(t,"appViewModel",8);var n=ge(),i=W(n);{var a=l=>{Xf(l,{get viewModel(){return r()}})};N(i,l=>{r()&&l(a)})}M(e,n)}function qi(e,t){const r=localStorage.getItem(e);let n;if(r!==null){const d=parseFloat(r);n=isNaN(d)?t:d}else n=t;let i=n;const{subscribe:a,set:l}=xe(n),u=d=>{i=d,localStorage.setItem(e,d.toString()),l(d)};return{subscribe:a,set:u,update:d=>{u(d(i))}}}function Jf(e,t){const r=localStorage.getItem(e);let n;r!==null?n=r==="1":n=t;let i=n;const{subscribe:a,set:l}=xe(n),u=d=>{i=d,localStorage.setItem(e,d?"1":"0"),l(d)};return{subscribe:a,set:u,update:d=>{u(d(i))}}}function Qf(e,t){const r=localStorage.getItem(e);let n;r!==null?n=r:n=t;let i=n;const{subscribe:a,set:l}=xe(n),u=d=>{i=d,localStorage.setItem(e,d),l(d)};return{subscribe:a,set:u,update:d=>{u(d(i))}}}class Cs{constructor(){this.itemStates=new Map,this.writableOrderedKeys=xe([]),this.orderedKeys=this.writableOrderedKeys}getPinned(t){return _r(t),this.getWritableItemState(t)}getWritableItemState(t){_r(t);let r=this.itemStates.get(t);return r===void 0&&(r=xe(!1),this.itemStates.set(t,r)),r}toggleItemPinned(t){_r(t);const r=this.getWritableItemState(t);Pe(r)?(r.set(!1),this.removePinnedItem(t)):(r.set(!0),this.addPinnedItem(t))}addPinnedItem(t){this.writableOrderedKeys.update(r=>(r.push(t),r))}removePinnedItem(t){this.writableOrderedKeys.update(r=>{const n=r.findIndex(i=>i===t);return n>=0&&r.splice(n,1),r})}moveItemToTop(t){_r(t),this.writableOrderedKeys.update(r=>{const n=r.findIndex(i=>i===t);return n>=0&&(r.splice(n,1),r.unshift(t)),r})}setItemOrder(t){t.forEach(_r),this.writableOrderedKeys.set(t)}}function _r(e){if(e.startsWith("pinned_"))throw new Error(`PinnedItemState expects regular keys but got ${e}`)}function ev(){return{pinnedDatasets:new Cs,pinnedScenarios:new Cs,pinnedFreeformRows:new Cs}}function Zn(e,t,r){const n=[];return e.outputVarL&&e.outputVarR?e.outputVarR.varName!==e.outputVarL.varName&&n.push(qt("warn",`variable renamed, previously '${e.outputVarL.varName}'`)):e.outputVarL!==void 0?n.push(qt("warn",`variable only defined in ${Ut(t,"left")}`)):e.outputVarR!==void 0&&n.push(qt("warn",`variable only defined in ${Ut(r,"right")}`)),n}function Jn(e,t,r){const n=[];if(e.settings.kind==="all-inputs-settings")return[];const i=[],a=[],l=[];for(const m of e.settings.inputs){const v=m.stateL.error?.kind,x=m.stateR.error?.kind,$=v==="unknown-input-setting-group",T=x==="unknown-input-setting-group",A=v==="unknown-input",L=x==="unknown-input",P=v==="invalid-value",q=x==="invalid-value";if($||T){const C={requestedName:m.requestedName,kind:"unknown-input-setting-group"};$&&T?i.push(C):$?a.push(C):T&&l.push(C)}if(A||L){const C={requestedName:m.requestedName,kind:"unknown-input"};A&&L?i.push(C):A?a.push(C):L&&l.push(C)}if(P||q){const C={requestedName:m.requestedName,kind:"invalid-value"};P&&q?i.push(C):P?a.push(C):q&&l.push(C)}}function u(m,v){const x=m.filter($=>$.kind===v).map($=>`'${$.requestedName}'`);if(x.length!==0)return v==="unknown-input"?`unknown ${x.length===1?"input":"inputs"} ${x.join(", ")}`:v==="unknown-input-setting-group"?`unknown input setting group ${x[0]}`:`value out of range for ${x.join(", ")}`}function d(m){return[u(m,"unknown-input-setting-group"),u(m,"unknown-input"),u(m,"invalid-value")].filter(v=>v!==void 0).join("; ")}if(i.length>0&&n.push(qt("err",`invalid scenario: ${d(i)}`)),a.length>0){const m=`scenario not valid in ${Ut(t,"left")}`;n.push(qt("warn",`${m}: ${d(a)}`))}if(l.length>0){const m=`scenario not valid in ${Ut(r,"right")}`;n.push(qt("warn",`${m}: ${d(l)}`))}return e.settings.settingsDiffer===!0&&n.push(qt("warn","input settings differ between the two models")),n}function qt(e,t){return`<span class="annotation"><span class="${`status-color-${e==="err"?"failed":"warning"}`}">${e==="err"?"":""}</span>&ensp;${t}</span>`}function tv(e,t,r,n){const i=new Map;for(const a of t){const l=e.scenarios.getScenario(a.s);if(l===void 0)continue;let u,d;switch(r){case"dataset":{const $=e.datasets.getDataset(a.d);if($===void 0)continue;const T=$.outputVarR||$.outputVarL;u=T.varName,d=T.sourceName;break}case"scenario":{u=l.title,d=l.subtitle;break}default:assertNeverExports$1.assertNever(r)}let m=i.get(u);m===void 0&&(m={title:u,score:0,items:[]},i.set(u,m));const v={title:u,subtitle:d,scenario:l,testSummary:a};m.items.push(v);const x=Qn(v.testSummary,n);m.score+=x||0}return[...i.values()].sort((a,l)=>a.score>l.score?-1:a.score<l.score?1:0)}function Qn(e,t){switch(t){case"max-diff":return e.md;case"avg-diff":return e.ad;case"max-diff-relative":return e.mdb;case"avg-diff-relative":return e.adb;default:assertNeverExports$1.assertNever(t)}}function ea(e,t,r,n,i){const a="max-diff",l=(A,L)=>new Un(e,t,L,r,A),u=e.bundleL.modelSpec.graphSpecs?.find(A=>A.id===n),d=e.bundleR.modelSpec.graphSpecs?.find(A=>A.id===n),m=l(u,"left"),v=l(d,"right"),x=new Set;if(u)for(const A of u.datasets)x.add(A.datasetKey);if(d)for(const A of d.datasets)x.add(A.datasetKey);const $=[];let T=0;if(i.inclusion==="both")for(const A of x){const L=u?.datasets?.find(ke=>ke.datasetKey===A),P=d?.datasets?.find(ke=>ke.datasetKey===A),q=L?.varName,C=P?.varName,D=L?.color||"#777",G=P?.color||"#777",B=L?.label,H=P?.label,X=i.datasetReports.find(ke=>ke.datasetKey===A);let re=0;if(X){if(X.maxDiff===void 0||X.maxDiff===0)continue;re=X.maxDiff,re>T&&(T=re)}const pe=`bucket-color-${ci(re,e.thresholds)}`,$e=new Yn(e,t,void 0,a,"freeform","","",r,A,void 0);$.push({datasetKey:A,nameL:q,nameR:C,legendColorL:D,legendColorR:G,legendLabelL:B,legendLabelR:H,bucketClass:pe,maxDiff:re,detailBoxViewModel:$e,detailBoxVisible:xe(!1)})}return{graphId:n,graphL:m,graphR:v,metadataRows:i.metadataReports,datasetRows:$,maxDiffPct:T}}function rv(e,t,r){return{kind:"freeform-view",summaryRowKey:e,pretitle:t?.title,title:"Unresolved view",annotations:void 0,relatedListHeader:"",relatedItems:[],graphSections:[],regularDetailRows:xe([]),pinnedDetailRows:xe([]),pinnedItemState:void 0}}function sv(e,t,r,n,i,a,l,u){const d=Pe(i.sortMode),m=[];for(const $ of l.rows||[]){const T=[];for(const L of $.boxes){const P={title:L.title,subtitle:L.subtitle,scenario:L.scenario,testSummary:{d:L.dataset.key,s:L.scenario.key,md:0}};T.push(P)}const A=Dr(t,r,n,i,d,"freeform",$.title,$.subtitle,T);m.push(A)}const v=_e(u.orderedKeys,$=>{const T=[];for(const A of $)if(A.startsWith("row")){const L=m.find(P=>P.pinnedItemKey===A);L&&T.push(di(t,r,n,i,d,L))}return T}),x=xe(m);return{kind:"freeform-view",summaryRowKey:e,pretitle:a?.title,title:l.title,subtitle:l.subtitle,annotations:void 0,relatedListHeader:"",relatedItems:[],graphSections:[],regularDetailRows:x,pinnedDetailRows:v,pinnedItemState:u}}function iv(e,t,r,n,i,a,l){const u=t.bundleL.name,d=t.bundleR.name,m=a.root,v=m.outputVarR||m.outputVarL,x=v.varName,$=v.sourceName,T=Zn(m,u,d).join(" "),A=[];function L(G){const B=G.join('&nbsp;<span class="related-sep">&gt;</span>&nbsp;');A.push(B)}if(v.relatedItems)for(const G of v.relatedItems)L(G.locationPath);function P(G,B){for(const H of B)for(const X of H.items)if(X.scenario.key===G)return[H.title,X]}const q=_e(i.sortMode,G=>{let B=tv(t,a.group.testSummaries,"scenario",G);if(t.reportOptions?.detailRowsForDataset)B=t.reportOptions.detailRowsForDataset(B);else{let H;const X=B.findIndex(re=>re.title==="All inputs");if(X>=0){const re=B.splice(X,1)[0];H=re.items.find(pe=>{const $e=pe.scenario.settings;return $e.kind==="all-inputs-settings"&&$e.position==="at-default"}),B.unshift(re)}H&&(H.title="at default",H.subtitle=void 0);for(const re of B.slice(1)){for(const pe of re.items)pe.title=`${pe.subtitle}`,pe.subtitle=void 0;re.items[0]!==H&&re.items.unshift(H)}}return B}),C=_e(q,G=>{const B=Pe(i.sortMode),H=[];for(const X of G){const re=Dr(t,r,n,i,B,"scenarios",X.title,X.subtitle,X.items);H.push(re)}return H}),D=_e([q,C,l.orderedKeys],([G,B,H])=>{const X=Pe(i.sortMode),re=[];for(const pe of H)if(pe.startsWith("row")){const $e=B.find(ke=>ke.pinnedItemKey===pe);$e&&re.push(di(t,r,n,i,X,$e))}else{const $e=P(pe,G);if($e){const ke=$e[0],Ne=$e[1];re.push(Dr(t,r,n,i,X,"scenarios",ke,void 0,[Ne]))}}return re});return{kind:"dataset",summaryRowKey:e,title:x,subtitle:$,annotations:T,relatedListHeader:"Appears in:",relatedItems:A,graphSections:[],regularDetailRows:C,pinnedDetailRows:D,pinnedItemState:l}}function nv(e,t,r,n,i,a,l,u,d){const m=t.bundleL.name,v=t.bundleR.name,x=a.root,$=Jn(x,m,v).join(" ");let T,A,L,P;u?(T="scenario-view",A=l?.title,L=u.title,P=u.subtitle):(T="scenario",L=x.title,P=x.subtitle);const q=[];function C(H){const X=H.join('&nbsp;<span class="related-sep">&gt;</span>&nbsp;');q.push(X)}if(x.settings.kind==="input-settings")for(const H of x.settings.inputs){const X=H.stateR.inputVar;X?.relatedItem&&C(X.relatedItem.locationPath)}const D=_e(i.sortMode,H=>{const X=a.group.testSummaries;let re=[];for(const ke of X){const Ne=t.scenarios.getScenario(ke.s);if(Ne===void 0)continue;const Ye=t.datasets.getDataset(ke.d);if(Ye===void 0)continue;const Ar=Ye.outputVarR||Ye.outputVarL,hi={title:Ar.varName,subtitle:Ar.sourceName,scenario:Ne,testSummary:ke};re.push({title:"",score:Qn(ke,H)||0,items:[hi]})}re=re.sort((ke,Ne)=>{const Ye=ke.items[0],Ar=Ne.items[0],hi=ke.score,gi=Ne.score;if(hi!==gi)return hi>gi?-1:1;{const Ui=Ye.title.toLowerCase(),ws=Ar.title.toLowerCase();return Ui.localeCompare(ws)}}),t.reportOptions?.detailRowsForScenario&&(re=t.reportOptions.detailRowsForScenario(re));const pe=Pe(i.sortMode),$e=[];for(const ke of re){const Ne=Dr(t,r,n,i,pe,"datasets",ke.title,ke.subtitle,ke.items);$e.push(Ne)}return $e}),G=_e([D,d.orderedKeys],([H,X])=>{const re=Pe(i.sortMode),pe=ke=>H.find(Ne=>Ne.items[0].testSummary.d===ke),$e=[];for(const ke of X){const Ne=pe(ke);Ne&&$e.push(di(t,r,n,i,re,Ne))}return $e});let B;if(u){const H=a.group.testSummaries;B=av(t,r,u,H)}else B=[];return{kind:T,summaryRowKey:e,pretitle:A,title:L,subtitle:P,annotations:$,relatedListHeader:"Related items:",relatedItems:q,graphSections:B,regularDetailRows:D,pinnedDetailRows:G,pinnedItemState:d}}function av(e,t,r,n){if(r.rows!==void 0)throw new Error("Graphs section is not yet supported in a freeform view");if(r.graphIds.length===0)return[];if(r.graphOrder==="grouped-by-diffs")return ta(e,t,r.scenario,n,r.graphIds).sections;{const i=e.bundleL.modelSpec.graphSpecs,a=e.bundleR.modelSpec.graphSpecs,l=r.scenario,u=[];for(const d of r.graphIds){const m=i?.find($=>$.id===d),v=a?.find($=>$.id===d),x=diffGraphs(m,v,l.key,n);u.push(ea(e,t,l,d,x))}return[{title:"Featured graphs",rows:u}]}}function ta(e,t,r,n,i){const a=[],l=[],u=[],d=[],m=[],v=[],x=e.bundleL.modelSpec.graphSpecs,$=e.bundleR.modelSpec.graphSpecs,T=Array(e.thresholds.length+3).fill(0);for(const D of i){const G=x?.find($e=>$e.id===D),B=$?.find($e=>$e.id===D),H=diffGraphs(G,B,r.key,n),X=ov(H),re=ea(e,t,r,D,H);let pe;switch(H.inclusion){case"right-only":pe=1,a.push(re);break;case"left-only":pe=1,l.push(re);break;case"both":X>0?(pe=ci(X,e.thresholds),H.metadataReports.length>0?u.push(re):m.push(re)):H.metadataReports.length>0?(pe=1,d.push(re)):(pe=0,v.push(re));break;case"neither":pe=0,v.push(re);break;default:Tr(H.inclusion)}T[pe]++}const A=i.length,L=A-T[0],P=T.map(D=>D/A*100),q=[];function C(D,G,B){if(D.length>0){const H=B?D.sort((X,re)=>X.maxDiffPct>re.maxDiffPct?-1:1):D;q.push({title:G,rows:H})}}return C(a,"Added graphs",!1),C(l,"Removed graphs",!1),C(u,"Graphs with metadata and dataset changes",!0),C(d,"Graphs with metadata changes only",!1),C(m,"Graphs with dataset changes only",!0),C(v,"Unchanged graphs",!1),{sections:q,nonZeroDiffCount:L,diffPercentByBucket:P}}function ov(e){let t=0;for(const r of e.datasetReports)r.maxDiff!==void 0&&r.maxDiff>t&&(t=r.maxDiff);return t}function di(e,t,r,n,i,a){return Dr(e,t,r,n,i,a.kind,a.title,a.subtitle,a.items)}class lv{constructor(t,r,n){this.items=t,this.onTreeChanged=n,this.itemStates={},this.expandStates={};const i=a=>{for(const l of a)if(l.children)i(l.children),this.expandStates[l.key]=!0;else{const u=r[l.key];this.itemStates[l.key]=u!==void 0?u:!0}};i(this.items)}getItemTree(){return{items:this.items,states:this.itemStates}}getCheckboxState(t,r){if(!t.children)return this.itemStates[t.key]===!0?"checked":"unchecked";const n=t.children.map(l=>this.getCheckboxState(l,r)),i=n.filter(l=>l==="checked").length,a=n.filter(l=>l==="unchecked").length;return i===n.length?"checked":a===n.length?"unchecked":"indeterminate"}toggleChecked(t){const r=this.getCheckboxState(t,0)!=="checked";if(t.children){const n=i=>{for(const a of i)a.children?n(a.children):this.itemStates[a.key]=r};n(t.children)}else this.itemStates[t.key]=r;this.onTreeChanged?.({items:this.items,states:this.itemStates})}isExpanded(t,r){return this.expandStates[t.key]??!1}toggleExpanded(t,r=!1){r?this.toggleExpandedIncludingSiblings(t):t.children&&(this.expandStates[t.key]=!this.expandStates[t.key])}toggleExpandedIncludingSiblings(t){const r=this.findParent(t);let n;if(!r)n=this.items;else if(r.children)n=r.children;else return;const i=!this.isExpanded(t,0);for(const a of n)a.children&&(this.expandStates[a.key]=i)}findParent(t){const r=(n,i=null)=>{for(const a of n){if(a===t)return i;if(a.children){const l=r(a.children,a);if(l!==null)return l}}return null};return r(this.items)}}function ss(e,t,r){return new lv(e,t,r)}function is(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):{items:[],states:{}}}catch(t){return console.warn(`Failed to load filter item tree from LocalStorage (${e}):`,t),{items:[],states:{}}}}function fr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn(`Failed to save filter item tree to LocalStorage (${e}):`,r)}}const Rr="sde-check-test-filters",Cr="sde-check-comparison-scenario-filters";function cv(e){if(!e)return{filterPopoverViewModel:void 0,skipChecks:[],skipComparisonScenarios:[]};const t=is(Rr),r=t.states||{},n=[],i=x=>{for(const $ of x)$.children?i($.children):r[$.key]===!1&&$.titleParts&&n.push({groupName:$.titleParts.groupName||"",testName:$.titleParts.testName||""})};i(t.items||[]);const a=is(Cr),l=a.states||{},u=[],d=x=>{for(const $ of x)$.children?d($.children):l[$.key]===!1&&$.titleParts&&u.push({title:$.titleParts.title||"",subtitle:$.titleParts.subtitle})};d(a.items||[]);let m;Object.keys(r).length>0&&(m=ss(t.items||[],r,x=>fr(Rr,x)));let v;return Object.keys(l).length>0&&(v=ss(a.items||[],l,x=>fr(Cr,x))),{filterPopoverViewModel:{checksPanel:m,comparisonScenariosPanel:v},skipChecks:n,skipComparisonScenarios:u}}function dv(e,t,r){const n=uv(t);let i;return r&&(i=fv(e,r)),{checksPanel:n,comparisonScenariosPanel:i}}function uv(e){const t=is(Rr).states||{},r=[],n={};for(const a of e.groups){const l=[];for(const u of a.tests){const d=`${a.name}__${u.name}`;l.push({key:d,titleParts:{groupName:a.name,testName:u.name},label:u.name}),t[d]!==void 0?n[d]=t[d]:n[d]=u.status!=="skipped"}l.length>0&&r.push({key:a.name,label:a.name,children:l})}if(r.length===0)return;const i=ss([{key:"__all_checks",label:"All checks",children:r}],n,a=>fr(Rr,a));return fr(Rr,i.getItemTree()),i}function fv(e,t){const r=is(Cr).states||{};function n(v,x){return x?`${v}__${x}`:v}function i(v){return{key:n(v.title,v.subtitle),titleParts:{title:v.title,subtitle:v.subtitle},label:v.subtitle?`${v.title} ${v.subtitle}`:v.title}}const a=new Map,l=e.comparison?.scenarios;for(const v of t.testReports){const x=l?.getScenario(v.scenarioKey);if(x){const $=n(x.title,x.subtitle);a.has($)||a.set($,{title:x.title,subtitle:x.subtitle,skipped:v.diffReport===void 0})}}const u={};let d=[];if(e.comparison?.reportOptions?.summarySectionsForComparisonsByScenario){const v=comparisonSummaryFromReport(t),x=categorizeComparisonTestSummaries(e.comparison,v.testSummaries,"max-diff").byScenario,$=e.comparison.reportOptions.summarySectionsForComparisonsByScenario(x),T=new Set,A=[],L=[];for(const P of $)if(P.stable===!0){const q=[];for(const C of P.rows)if(C.groupSummary?.root.kind==="scenario"){const D=C.groupSummary.root,G=n(D.title,D.subtitle);if(!T.has(G)){q.push(i(D));const B=a.get(G);r[G]!==void 0?u[G]=r[G]:u[G]=B?!B.skipped:!0,T.add(G)}}q.length>0&&A.push({key:P.headerText,label:P.headerText,children:q})}for(const[P,q]of a)T.has(P)||(L.push(i(q)),r[P]!==void 0?u[P]=r[P]:u[P]=!q.skipped,T.add(P));d=[{key:"__all_scenarios",label:"All scenarios",children:[...A,...L.length>0?[{key:"Other scenarios",label:"Other scenarios",children:L}]:[]]}]}else{const v=Array.from(l.getAllScenarios()),x=[];for(const $ of v){x.push(i($));const T=n($.title,$.subtitle);if(r[T]!==void 0)u[T]=r[T];else{const A=a.get(T),L=A?A.skipped:!0;u[T]=!L}}d=[{key:"__all_scenarios",label:"All scenarios",children:x}]}const m=ss(d,u,v=>fr(Cr,v));return fr(Cr,m.getItemTree()),m}function vv(e,t,r,n,i,a,l,u){const d=xe(!1);if(t){const m=_e(l,v=>{const x=[];if(v==="max-diff-relative"||v==="avg-diff-relative"){const $=t.ratioThresholds;x.push("no diff");for(let T=0;T<3;T++)x.push(`ratio &lt; ${$[T]}`);x.push(`ratio &gt;= ${$[2]}`)}else{const $=t.thresholds;x.push("no diff");for(let T=0;T<3;T++)x.push(`diff &lt; ${$[T]}%`);x.push(`diff &gt;= ${$[2]}%`)}return x});return{devMode:e,bundleManager:r,nameL:t.bundleL.name,nameR:t.bundleR.name,thresholds:m,generatedDateString:n,controlsVisible:d,zoom:i,consistentYRange:a,sortMode:l,concurrency:u}}else return{devMode:e,bundleManager:void 0,generatedDateString:n,controlsVisible:d,zoom:i,consistentYRange:a,sortMode:l,concurrency:u}}function Ks(e,t,r,n){const i=r-t;function a(l){return i!==0?(l-t)/(r-t)*100:0}return{values:e,avg:n,points:e.map(l=>a(l)),avgPoint:a(n)}}class pv{constructor(){this.minTime=Number.MAX_VALUE,this.maxTime=0,this.writableRows=xe([]),this.rows=this.writableRows}addRow(t,r){const n=Math.min(t.minTime,r.minTime),i=Math.max(t.maxTime,r.maxTime),a=Math.min(this.minTime,n),l=Math.max(this.maxTime,i);this.minTime=a,this.maxTime=l;function u(v){return Ks(v.values,a,l,v.avg)}const d=Pe(this.writableRows);for(const v of d)v.dotPlotL=u(v.dotPlotL),v.dotPlotR=u(v.dotPlotR);function m(v){return Ks(v.allTimes,a,l,v.avgTime)}d.push({num:d.length+1,minTimeL:t.minTime.toFixed(1),avgTimeL:t.avgTime.toFixed(1),maxTimeL:t.maxTime.toFixed(1),minTimeR:r.minTime.toFixed(1),avgTimeR:r.avgTime.toFixed(1),maxTimeR:r.maxTime.toFixed(1),dotPlotL:m(t),dotPlotR:m(r)}),this.writableRows.set(d)}}function hv(){return new pv}let mv=1;class gv{constructor(t,r,n,i){this.dataCoordinator=t,this.scenario=r,this.datasetKey=n,this.predicateReport=i,this.requestKeys=[],this.expectedDataKeys=[],this.resolvedDataKeys=[],this.opConstantRefs=new Map,this.resolvedData=new Map,this.dataRequested=!1,this.dataLoaded=!1,this.baseRequestKey=`check-graph-box::${mv++}`,this.writableContent=xe(void 0),this.content=this.writableContent}requestData(){if(this.dataRequested)return;this.dataRequested=!0,this.expectedDataKeys=[],this.resolvedDataKeys=[],this.requestKeys=[],this.resolvedData.clear(),this.expectedDataKeys.push("primary"),this.requestDataset("primary",this.scenario.spec,this.datasetKey);const t=r=>{const n=this.predicateReport.opRefs.get(r);if(n!==void 0)switch(this.expectedDataKeys.push(r),n.kind){case"constant":this.resolvedDataKeys.push(r),this.opConstantRefs.set(r,n.value);break;case"data":{const i=n.dataRef.scenario.spec,a=n.dataRef.dataset.datasetKey;this.requestDataset(r,i,a);break}default:assertNeverExports$1.assertNever(n)}};t("gt"),t("gte"),t("lt"),t("lte"),t("eq"),t("approx")}clearData(){if(this.dataRequested){if(this.writableContent.set(void 0),!this.dataLoaded){for(const t of this.requestKeys)this.dataCoordinator.cancelRequest(t);this.requestKeys=[],this.resolvedData.clear()}this.dataRequested=!1,this.dataLoaded=!1}}requestDataset(t,r,n){const i=`${this.baseRequestKey}::${t}`;this.requestKeys.push(i),this.dataCoordinator.requestDataset(i,r,n,a=>{this.dataRequested&&(this.resolvedDataKeys.push(t),this.resolvedData.set(t,lr(a)),this.processResponses())})}processResponses(){if(this.resolvedDataKeys.length!==this.expectedDataKeys.length)return;const t=this.resolvedData.get("primary"),r=t.reduce((L,P)=>P.x<L?P.x:L,t[0].x),n=t.reduce((L,P)=>P.x>L?P.x:L,t[0].x),i=this.predicateReport.time;let a,l,u;if(i===void 0)a=r,l=n,u=L=>L>=r&&L<=n;else if(typeof i=="number")a=i,l=i,u=L=>L===r;else if(Array.isArray(i))a=i[0],l=i[1],u=L=>L>=r&&L<=n;else{const L=i,P=[];L.after_excl!==void 0&&(P.push(q=>q>L.after_excl),a=L.after_excl),L.after_incl!==void 0&&(P.push(q=>q>=L.after_incl),a=L.after_incl),L.before_excl!==void 0&&(P.push(q=>q<i.before_excl),l=L.before_excl),L.before_incl!==void 0&&(P.push(q=>q<=i.before_incl),l=L.before_incl),a===void 0&&(a=r),l===void 0&&(l=n),u=q=>{for(const C of P)if(!C(q))return!1;return!0}}const d=[];d.push({points:t,color:"deepskyblue",style:"normal"});const m=(L,P,q=0,C)=>{const D="green";C===void 0&&(C=1);const G=this.opConstantRefs.get(L);if(G!==void 0){a===l?d.push({points:[{x:a,y:G+q}],color:D,style:P,lineWidth:C}):d.push({points:[{x:a,y:G+q},{x:l,y:G+q}],color:D,style:P,lineWidth:C});return}const B=this.resolvedData.get(L);if(B!==void 0){let H=B.filter(X=>u(X.x));q!==0&&(H=H.map(X=>({x:X.x,y:X.y+q}))),d.push({points:H,color:D,style:P,lineWidth:C})}},v=L=>this.opConstantRefs.has(L)||this.resolvedData.has(L),x=v("gt")||v("gte"),$=v("lt")||v("lte");m("gt",$?"fill-to-next":"fill-above"),m("gte",$?"fill-to-next":"fill-above"),m("lt",x?"normal":"fill-below"),m("lte",x?"normal":"fill-below"),m("eq","normal",0,5);const T=this.predicateReport.tolerance||.1;m("approx","fill-to-next",-T),m("approx","normal",T),m("approx","dashed",0);const A={key:this.baseRequestKey,plots:d,xMin:void 0,xMax:void 0};this.writableContent.set({comparisonGraphViewModel:A}),this.dataLoaded=!0}}function bv(e){switch(e){case"passed":return"";case"failed":return"";case"error":return"";case"skipped":return"";default:return""}}function Kr(e,t,r,n,i,a,l){const u="&ensp;".repeat(2+e*4),d=bv(r),m=`<span class="status-color-${r}">${d}</span>`,v=`${u}${m}&ensp;${n}`;return{rowClasses:`${t} ${r}`,status:r,span:v,childRows:xe([]),expanded:xe(i),graphBoxViewModel:l,onClicked:a}}function ui(e){return`<span class="bold">${e}</span>`}function ra(e,t,r,n,i){const a=r===1?`${r} ${n}`:`${r} ${n}s`;return Kr(e,"placeholder",t,a,!1,i)}function wv(e,t,r,n){const i=[];for(const a of t.predicates){let l;r.spec&&t.checkDataset.datasetKey&&(l=new gv(n,r,t.checkDataset.datasetKey,a));const u=Kr(3,"predicate",a.result.status,predicateMessage(a,ui),!1,()=>{u.expanded.update(d=>!d)},l);i.push(u)}e.childRows.update(()=>i)}function sa(e,t,r){const n=Kr(2,"dataset",e.status,datasetMessage(e,ui),!0,()=>{n.expanded.update(i=>!i)});return wv(n,e,t,r),n}function _v(e,t,r,n){const i=t.datasets.filter(l=>l.status===r),a=[];for(const l of i)a.push(sa(l,t.checkScenario,n));e.childRows.update(l=>{const u=l.findIndex(d=>d.rowClasses.includes("placeholder")&&d.status===r);if(u!==-1){const d=[...l];return d.splice(u,1,...a),d}else return l})}function xv(e,t,r){if(t.datasets.length<=10){const n=[];for(const a of t.datasets)n.push(sa(a,t.checkScenario,r));const i={error:0,failed:1,passed:2,skipped:3};n.sort((a,l)=>i[a.status]-i[l.status]),e.childRows.update(()=>n)}else{let n=function(l,u,d){a.push(ra(2,l,u,d,()=>{_v(e,t,l,r)}))};const i={passed:0,failed:0,error:0,skipped:0};for(const l of t.datasets)i[l.status]++;const a=[];i.error>0&&n("error",i.error,"errored dataset"),i.failed>0&&n("failed",i.failed,"failed dataset"),i.passed>0&&n("passed",i.passed,"passed dataset"),i.skipped>0&&n("skipped",i.skipped,"skipped dataset"),e.childRows.update(()=>a)}}function ia(e,t){let r=!1;const n=Kr(1,"scenario",e.status,scenarioMessage(e,ui),!1,()=>{r||(xv(n,e,t),r=!0),n.expanded.update(i=>!i)});return n.scenarioReport=e,n}function yv(e,t,r,n){const i=t.scenarios.filter(l=>l.status===r),a=[];for(const l of i)a.push(ia(l,n));e.childRows.update(l=>{const u=l.findIndex(d=>d.rowClasses.includes("placeholder")&&d.status===r);if(u!==-1){const d=[...l];return d.splice(u,1,...a),d}else return l})}function kv(e,t,r){if(t.scenarios.length<=10){const n=[];for(const a of t.scenarios)n.push(ia(a,r));const i={error:0,failed:1,passed:2,skipped:3};n.sort((a,l)=>i[a.status]-i[l.status]),e.childRows.update(()=>n)}else{let n=function(l,u,d){a.push(ra(1,l,u,d,()=>{yv(e,t,l,r)}))};const i={passed:0,failed:0,error:0,skipped:0};for(const l of t.scenarios)i[l.status]++;const a=[];i.error>0&&n("error",i.error,"errored scenario"),i.failed>0&&n("failed",i.failed,"failed scenario"),i.passed>0&&n("passed",i.passed,"passed scenario"),i.skipped>0&&n("skipped",i.passed,"skipped scenario"),e.childRows.update(()=>a)}}function Sv(e,t){let r=!1;const n=Kr(0,"test",t.status,t.name,!1,()=>{r||(kv(n,t,e),r=!0),n.expanded.update(i=>!i)});return n}function Mv(e,t){return{name:t.name,tests:t.tests.map(r=>Sv(e,r))}}function Rv(e,t){let r=0,n=0,i=0,a=0;for(const d of t.groups)for(const m of d.tests){if(m.scenarios.length===0){a++;continue}for(const v of m.scenarios){if(v.datasets.length===0){i++;continue}for(const x of v.datasets){if(x.predicates.length===0){i++;continue}for(const $ of x.predicates)switch($.result.status){case"passed":r++;break;case"failed":n++;break;case"error":i++;break;case"skipped":a++;break}}}}const l=r+n+i+a;let u;return l>0&&(u=[r/l*100,n/l*100,i/l*100,a/l*100]),{total:l,passed:r,failed:n,errors:i,skipped:a,percents:u,groups:t.groups.map(d=>Mv(e,d))}}class Cv{constructor(t,r){this.sections=t,this.rowsWithDiffs=r,this.kind="views",this.allRows=_e(t,n=>{const i=[];for(const a of n)i.push(...a.rows);return i}),this.allRows.subscribe(n=>{this.allRowsSnapshot=n})}getAllRowsSnapshot(){return this.allRowsSnapshot}}class na{constructor(t,r,n,i){this.itemKind=t,this.sections=r,this.rowsWithDiffs=n,this.pinnedItemState=i,this.readonlykind="by-item";const a=_e(r,l=>{const u=[];for(const d of l)u.push(...d.rows);return u});this.pinnedRows=_e([a,i.orderedKeys],([l,u])=>{const d=[];for(const m of u){if(m.startsWith("row"))continue;const v=l.find(x=>x.itemKey===m);if(v===void 0)throw new Error(`No regular row found for key=${m}`);d.push({...v,rowKey:`pinned_${v.itemKey}`})}return d}),_e([this.pinnedRows,a],([l,u])=>[...l,...u]).subscribe(l=>{this.allRowsSnapshot=l})}getAllRowsSnapshot(){return this.allRowsSnapshot}toggleItemPinned(t){this.pinnedItemState.toggleItemPinned(t.itemKey)}setReorderedPinnedItems(t){this.pinnedItemState.setItemOrder(t.map(r=>r.itemKey))}}function Iv(e,t,r,n,i=[]){function a(A,L){return i.some(P=>P.title===A&&P.subtitle===L)}function l(A){let L=0;for(const P of A.allGroupSummaries.values())P.root.kind==="scenario"&&a(P.root.title,P.root.subtitle)&&L++;return L}const u=_e(n,A=>categorizeComparisonTestSummaries(e,r,A));let d;e.viewGroups.length>0&&(d=zv(e,u));const m=_e(u,A=>A.byScenario),v=Vv(e,m,t),x=_e(u,A=>A.byDataset),$=Ev(e,x,t),T=_e(m,A=>l(A));return{views:d,byScenario:v,byDataset:$,skippedScenarioCount:T}}function $v(e,t,r,n){const i=t.scenario;let a,l;if(t.graphOrder==="grouped-by-diffs"){const d=n.group.testSummaries,m=ta(e,void 0,i,d,t.graphIds);a=m.diffPercentByBucket,l=m.nonZeroDiffCount}else a=n.scores?.diffPercentByBucket;const u=fi();return{kind:"views",rowKey:gs(u),itemKey:u,title:t.title,subtitle:t.subtitle,diffPercentByBucket:a,groupSummary:n,viewMetadata:{viewGroup:r,view:t,changedGraphCount:l}}}function Dv(e,t,r,n){const i=[];for(const u of t.rows)for(const d of u.boxes){const m=n.find(v=>v.d===d.dataset.key&&v.s===d.scenario.key);m&&i.push(m)}const a=getScoresForTestSummaries(i,e.thresholds,"max-diff").diffPercentByBucket,l=fi();return{kind:"views",rowKey:gs(l),itemKey:l,title:t.title,subtitle:t.subtitle,diffPercentByBucket:a,viewMetadata:{viewGroup:r,view:t}}}function Tv(e,t,r){let n,i,a,l;const u=e.groupSummary,d=u.root;switch(d.kind){case"dataset":{n="by-dataset";const x=d.outputVarR||d.outputVarL;i=e.title||x.varName,a=e.subtitle||x.sourceName,l=Zn(d,t,r).join(" ");break}case"scenario":n="by-scenario",i=e.title||d.title,a=e.subtitle||d.subtitle,l=Jn(d,t,r).join(" ");break;default:assertNeverExports$1.assertNever(d)}const m=u.group.key,v=gs(m);return{kind:n,rowKey:v,itemKey:m,title:i,subtitle:a,annotations:l,diffPercentByBucket:u.scores?.diffPercentByBucket,groupSummary:u}}function aa(e,t,r,n,i,a){if(t.length===0)return;const l=t.map(m=>Tv(m,r,n)),u=l.filter(m=>Wn(m.diffPercentByBucket)).length;let d;switch(a){case"collapsed":d=!1;break;case"expanded":d=!0;break;case"expanded-if-diffs":default:d=u>0;break}return{header:{kind:e,rowKey:la(),title:i,header:!0},rows:l,rowsWithDiffs:u,expanded:xe(d)}}function oa(e){return _e(e,t=>{const r=t.withoutDiffs?.length||0;return t.allGroupSummaries.size-r})}function zv(e,t){const r=_e(t,a=>{const l=a.byScenario,u=a.allTestSummaries;let d=0;const m=[];for(const v of e.viewGroups){const x={kind:"views",rowKey:la(),title:v.title,header:!0},$=v.views.map(T=>{switch(T.kind){case"view":{let A;if(T.scenario){const L=l.allGroupSummaries.get(T.scenario.key);A=$v(e,T,v,L)}else A=Dv(e,T,v,u);return Wn(A.diffPercentByBucket)&&d++,A}case"unresolved-view":{d++;const A=fi();return{kind:"views",rowKey:gs(A),itemKey:A,title:"Unresolved view",viewMetadata:{viewGroup:v,view:T}}}default:assertNeverExports$1.assertNever(T)}});m.push({header:x,rows:$,rowsWithDiffs:0,expanded:xe(!0)})}return{viewRowsWithDiffs:d,viewGroupSections:m}}),n=_e(r,a=>a.viewGroupSections),i=_e(r,a=>a.viewRowsWithDiffs);return new Cv(n,i)}function Vv(e,t,r){const n=e.bundleL.name,i=e.bundleR.name,a=Ut(n,"left"),l=Ut(i,"right");function u(v,x,$,T){const A=aa("by-scenario",x,n,i,$,T);A&&v.push(A)}function d(v,x,$){const T=x.map(A=>({groupSummary:A}));u(v,T,$,"expanded-if-diffs")}const m=_e(t,v=>{const x=[];if(e.reportOptions?.summarySectionsForComparisonsByScenario){const $=e.reportOptions.summarySectionsForComparisonsByScenario(v);for(const T of $)u(x,T.rows,T.headerText,T.initialState)}else d(x,v.withErrors,"Scenarios with errors"),d(x,v.onlyInLeft,`Scenarios only valid in ${a}`),d(x,v.onlyInRight,`Scenarios only valid in ${l}`),d(x,v.withDiffs,"Scenarios producing differences"),d(x,v.withoutDiffs,"No differences produced by the following scenarios");return x});return new na("scenario",m,oa(t),r.pinnedScenarios)}function Ev(e,t,r){const n=e.bundleL.name,i=e.bundleR.name;function a(d,m,v,x){const $=aa("by-dataset",m,n,i,v,x);$&&d.push($)}function l(d,m,v){const x=m.map($=>({groupSummary:$}));a(d,x,v,"expanded-if-diffs")}const u=_e(t,d=>{const m=[];if(e.reportOptions?.summarySectionsForComparisonsByDataset){const v=e.reportOptions.summarySectionsForComparisonsByDataset(d);for(const x of v)a(m,x.rows,x.headerText,x.initialState)}else l(m,d.withErrors,"Datasets with errors"),l(m,d.onlyInLeft,"Removed datasets"),l(m,d.onlyInRight,"Added datasets"),l(m,d.withDiffs,"Datasets with differences"),l(m,d.withoutDiffs,"No differences detected for the following datasets");return m});return new na("dataset",u,oa(t),r.pinnedDatasets)}let Pv=1;function fi(){return`view_${Pv++}`}let Lv=1;function la(){return`header_${Lv++}`}let Nv=1;function gs(e){return`row_${Nv++}_${e}`}function qv(e,t,r){function n(Ee,ce=0){return Ee===0?"-":`${Ee<=0?"":"+"}${Ee.toFixed(ce)}`}function i(Ee){return Ee===0?"":`${n(Ee,1)}%`}function a(Ee,ce){return Ee!==0?(ce-Ee)/Ee*100:0}const l=e.bundleL.modelSpec,u=e.bundleR.modelSpec,d=l.inputVars.size,m=u.inputVars.size,v=m-d,x=l.outputVars.size,$=u.outputVars.size,T=$-x,A=l.modelSizeInBytes,L=u.modelSizeInBytes,P=L-A,q=a(A,L),C=l.dataSizeInBytes,D=u.dataSizeInBytes,G=D-C,B=a(C,D),H=t.avgTime||0,X=r.avgTime||0,re=X-H,pe=a(H,X),$e=t.minTime,ke=r.minTime,Ne=t.maxTime,Ye=r.maxTime,Ar=Math.min($e,ke),hi=Math.max(Ne,Ye);function gi(Ee){return Ks(Ee.allTimes,Ar,hi,Ee.avgTime)}const Ui={modelName:e.bundleL.name,datasetClassIndex:0,inputs:d.toString(),outputs:x.toString(),modelSize:A.toString(),modelSizePctChange:"",dataSize:C.toString(),dataSizePctChange:"",avgTime:H.toFixed(1),avgTimePctChange:"",minTime:$e.toFixed(1),maxTime:Ne.toFixed(1),dotPlot:gi(t)},ws={modelName:e.bundleR.name,datasetClassIndex:1,inputs:m.toString(),outputs:$.toString(),modelSize:L.toString(),modelSizePctChange:"",dataSize:D.toString(),dataSizePctChange:"",avgTime:X.toFixed(1),avgTimePctChange:"",minTime:ke.toFixed(1),maxTime:Ye.toFixed(1),dotPlot:gi(r)},Gi={modelName:"Change",inputs:n(v),outputs:n(T),modelSize:n(P),modelSizePctChange:i(q),dataSize:n(G),dataSizePctChange:i(B),avgTime:n(re,1),avgTimePctChange:i(pe),minTime:"",maxTime:""};return{row1:Ui,row2:ws,row3:Gi}}class Fv{constructor(t,r){this.items=t,this.selectedIndex=xe(r),this.selectedItem=_e(this.selectedIndex,n=>t[n]),this.selectedItemId=_e(this.selectedItem,n=>n.id)}}function Fi(e,t,r,n,i,a,l=[]){function u(G,B){return _e([G,B],([H,X])=>{if(H.count===0)return X===0?{subtitle:"all clear",status:"passed"}:{subtitle:`no diffs, but ${X} skipped ${X===1?"scenario":"scenarios"}`,status:"warning"};{const re=H.count===1?H.kind:`${H.kind}s`;return{subtitle:`${H.count} ${re} with diffs`,status:"warning"}}})}const d=[];function m(G,B,H){d.push({id:G,title:B,subtitle:_e(H,X=>X.subtitle),subtitleClass:_e(H,X=>`status-color-${X.status}`)})}const v=Rv(e,t);let x;if(v.total===0)x={subtitle:"no checks",status:"none"};else if(v.failed>0||v.errors>0){const G=[];v.failed>0&&G.push(`${v.failed} failed`),v.errors>0&&(v.errors===1?G.push(`${v.errors} error`):G.push(`${v.errors} errors`)),x={subtitle:G.join(", "),status:"failed"}}else{const G=[];let B="passed";v.passed>0&&G.push(`${v.passed} passed`),v.skipped>0&&(G.push(`${v.skipped} skipped`),B="warning"),x={subtitle:G.join(", "),status:B}}m("checks","Checks",xe(x));let $,T,A,L;if(r&&n){$=qv(r,n.perfReportL,n.perfReportR);const G=Iv(r,i,n.testSummaries,a,l),B=G.skippedScenarioCount;if(G.views){T=G.views;const $e=G.views.allRows,ke=T.rowsWithDiffs,Ne=_e([$e,ke],([Ar,hi])=>{let gi=0;for(const Ui of Ar){const ws=Ui.viewMetadata?.view;ws?.kind==="view"&&ws.graphOrder==="grouped-by-diffs"&&(gi+=Ui?.viewMetadata?.changedGraphCount||0)}return gi>0?{count:gi,kind:"graph"}:{count:hi,kind:"view"}}),Ye=u(Ne,B);m("comp-views","Comparison views",Ye)}const H=_e(G.byScenario.rowsWithDiffs,$e=>({count:$e,kind:"scenario"}));A=G.byScenario;const X=u(H,B);m("comps-by-scenario","Comparisons by scenario",X),L=G.byDataset;const re=_e(G.byDataset.rowsWithDiffs,$e=>({count:$e,kind:"dataset"})),pe=u(re,B);m("comps-by-dataset","Comparisons by dataset",pe)}const P=d.findIndex(G=>Pe(G.subtitle)!=="all clear"),q=new Fv(d,P>=0?P:0),C=new Map,D=[...r?.scenarios.getAllScenarios()??[]].find(G=>G.settings.kind==="all-inputs-settings"&&G.settings.position==="at-default")?.key;if(D)for(const G of n?.testSummaries??[]){const B=G.s,H=G.d;B===D&&C.set(H,G)}return{statsTableViewModel:$,tabBarViewModel:q,checkSummaryViewModel:v,comparisonSummary:n,comparisonViewsSummaryViewModel:T,comparisonsByScenarioSummaryViewModel:A,comparisonsByDatasetSummaryViewModel:L,baselineTestSummaries:C}}class Ft{constructor(t,r,n={}){this.label=t,this.value=r,this.options=n}}class As{constructor(t,r,n){this.options=t,this.selectedValue=r,this.label=n}}function Kv(e,t){const r="DAT file",n=e.split(`
`),i=new Map;let a="",l=new Map,u=1,d=-1;const m=$=>{const T=$.split("	").map(A=>A.trim());return T.length<2||T[1]!==""?T:[T[0]]},v=()=>{if(a==="")return;const $=Av(a);i.set(`${t}${$}`,l)},x=$=>parseFloat($);for(const $ of n){const T=m($);if(T.length===1)v(),a=T[0],l=new Map,d=-1;else if(T.length>1){const A=Math.floor(parseFloat(T[0])),L=x(T[1]);if(Number.isNaN(A))throw new Error(`Time value is NaN at line ${u} in ${r}`);if(Number.isNaN(L))throw new Error(`Value is NaN at line ${u} in ${r} for variable '${a}' at time ${A}`);!Number.isFinite(L)||L<-1e32||A!==d&&(l.set(A,L),d=A)}u++}return v(),i}function Ki(e){return"_"+e.trim().replace(/"/g,"_").replace(/\s+!$/g,"!").replace(/\s/g,"_").replace(/,/g,"_").replace(/-/g,"_").replace(/\./g,"_").replace(/\$/g,"_").replace(/'/g,"_").replace(/&/g,"_").replace(/%/g,"_").replace(/\//g,"_").replace(/\|/g,"_").toLowerCase()}function Av(e){const t=e.match(/([^[]+)(?:\[([^\]]+)\])?/);if(!t)throw new Error(`Invalid Vensim name: ${e}`);let r=Ki(t[1]);if(t[2]){const n=t[2].split(",").map(i=>Ki(i));r+=`[${n.join(",")}]`}return r}function ns(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.rows.length;n++){const i=r.rows[n];for(let a=0;a<i.points.length;a++)if(i.points[a].hasDiff===!0)return{groupIndex:t,rowIndex:n,pointIndex:a}}}}function Bs(e){for(let t=e.length-1;t>=0;t--){const r=e[t];for(let n=r.rows.length-1;n>=0;n--){const i=r.rows[n];for(let a=i.points.length-1;a>=0;a--)if(i.points[a].hasDiff===!0)return{groupIndex:t,rowIndex:n,pointIndex:a}}}}function Ai(e,t,r){if(!t)return ns(e);const n=t.groupIndex,i=t.rowIndex,a=t.pointIndex;function l(d,m){return r?.matchOutputVarsOnly===!0?m.isOutputVar&&d.hasDiff===!0:d.hasDiff===!0}for(let d=n;d<e.length;d++){const m=e[d],v=d===n?i+1:0;for(let x=v;x<m.rows.length;x++){const $=m.rows[x],T=$.points[a];if(T&&l(T,$))return{groupIndex:d,rowIndex:x,pointIndex:a}}}const u=Math.max(...e.flatMap(d=>d.rows.map(m=>m.points.length)));for(let d=a+1;d<u;d++)for(let m=0;m<e.length;m++){const v=e[m];for(let x=0;x<v.rows.length;x++){const $=v.rows[x];if(d<$.points.length){const T=$.points[d];if(T&&l(T,$))return{groupIndex:m,rowIndex:x,pointIndex:d}}}}return ns(e)}function Bv(e,t){if(!t)return Bs(e);const r=t.groupIndex,n=t.rowIndex,i=t.pointIndex;for(let a=r;a>=0;a--){const l=e[a],u=a===r?n-1:l.rows.length-1;for(let d=u;d>=0;d--){const m=l.rows[d].points[i];if(m&&m.hasDiff===!0)return{groupIndex:a,rowIndex:d,pointIndex:i}}}for(let a=i-1;a>=0;a--)for(let l=e.length-1;l>=0;l--){const u=e[l];for(let d=u.rows.length-1;d>=0;d--){const m=u.rows[d];if(a<m.points.length){const v=m.points[a];if(v&&v.hasDiff===!0)return{groupIndex:l,rowIndex:d,pointIndex:a}}}}return Bs(e)}function Ov(e,t,r){let n;switch(e.key){case"ArrowLeft":e.preventDefault(),n=Bv(t,r);break;case"ArrowRight":e.preventDefault(),n=Ai(t,r);break;case"n":e.preventDefault(),n=Ai(t,r,{matchOutputVarsOnly:!0});break;case"Home":e.preventDefault(),n=ns(t);break;case"End":e.preventDefault(),n=Bs(t);break;default:return}return n}let jv=1;class Gv{constructor(t,r,n,i,a,l,u,d,m,v){this.comparisonConfig=t,this.dataCoordinator=r,this.datasetKey=n,this.varName=i,this.datDatasets=a,this.sourceL=l,this.scenarioSpecL=u,this.sourceR=d,this.scenarioSpecR=m,this.diffPoint=v,this.dataRequested=!1,this.dataLoaded=!1,this.requestKey=`trace-tooltip::${jv++}::${n}`,this.writableContent=xe(void 0),this.content=this.writableContent}requestData(){if(this.dataRequested)return;this.dataRequested=!0,this.writableContent.set({comparisonGraphViewModel:void 0,loading:!0,error:void 0});const t=this.sourceL==="dat"?void 0:this.sourceL,r=this.sourceR,n=[this.datasetKey];this.dataCoordinator.requestDatasetMaps(this.requestKey,t,this.scenarioSpecL,r,this.scenarioSpecR,n,(i,a)=>{if(!this.dataRequested)return;this.sourceL==="dat"&&(i=this.datDatasets);const l=lr(i?.get(this.datasetKey)),u=lr(a?.get(this.datasetKey)),d=[];function m(A,L){d.push({points:A,color:L,style:"normal"})}m(u,"deepskyblue"),m(l,"crimson");let v=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;function $(A){for(const L of A)L.y<v&&(v=L.y),L.y>x&&(x=L.y)}for(const A of d)$(A.points);const T={key:this.requestKey,plots:d,yMin:v,yMax:x};this.writableContent.set({comparisonGraphViewModel:T,loading:!1,error:void 0}),this.dataLoaded=!0})}clearData(){this.dataRequested&&(this.writableContent.set({comparisonGraphViewModel:void 0,loading:!1,error:void 0}),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}class Uv{constructor(t,r,n,i,a){this.comparisonConfig=t,this.dataCoordinator=r,this.running=!1,this.bundleNameL=t.bundleL.name,this.bundleNameR=t.bundleR.name;const l=xe("left");this.sourceSelector0=new As([new Ft(this.bundleNameL,"left"),new Ft(this.bundleNameR,"right"),new Ft("DAT file","dat")],l);const u=xe("right");this.sourceSelector1=new As([new Ft(this.bundleNameR,"right")],u),this.selectedSource0=l,this.selectedSource1=u;const d=categorizeComparisonTestSummaries(t,n,"max-diff").byScenario,[m,v]=Bi("left",this.bundleNameL,d,i,a),[x,$]=Bi("right",this.bundleNameR,d,i,a);this.selectedScenarioSpecUid0=xe(void 0),this.selectedScenarioSpecUid1=xe(void 0),this.scenarioSelector0=_e(this.selectedSource0,T=>{switch(T){case"left":return Is(0,m,this.selectedScenarioSpecUid0);case"right":return Is(0,x,this.selectedScenarioSpecUid0);case"dat":return;default:throw new Error(`Unhandled source ${T}`)}}),this.scenarioSelector1=_e(this.selectedSource1,()=>Is(1,x,this.selectedScenarioSpecUid1)),this.selectedScenarioSpec0=_e([this.selectedSource0,this.selectedScenarioSpecUid0],([T,A])=>{switch(T){case"left":return v.find(L=>L.uid===A);case"right":return $.find(L=>L.uid===A);case"dat":return;default:throw new Error(`Unhandled source ${T}`)}}),this.selectedScenarioSpec1=_e(this.selectedScenarioSpecUid1,T=>$.find(A=>A.uid===T)),this.datText=xe(void 0),this.writableStatusMessage=xe("Loading"),this.statusMessage=this.writableStatusMessage,this.writableGroups=xe([]),this.groups=this.writableGroups,this.hideRowsWithNoDiffs=xe(!0),this.selectedSquare=xe(void 0),this.selectedSquareData=this.selectedSquare,this.filteredGroups=_e([this.groups,this.hideRowsWithNoDiffs],([T,A])=>A?T.map(L=>({...L,rows:L.rows.filter(P=>this.hasRowWithDiffs(P))})).filter(L=>L.rows.length>0):T)}run(){if(this.running)return;this.writableGroups.set([]),this.writableStatusMessage.set("Running comparisons, please wait"),this.running=!0;const t=Pe(this.selectedSource0),r=Pe(this.selectedSource1);let n;if(t==="dat"){const l=Pe(this.datText);if(l===void 0){this.writableStatusMessage.set("Select a DAT file for comparison"),this.running=!1;return}const u=Kv(l,"ModelImpl_");this.datDatasets=u;const d=Pe(this.selectedScenarioSpec1);n={kind:"compare-to-ext-data",extData:u,bundleSide:r,scenarioSpec:d}}else{this.datDatasets=void 0;const l=Pe(this.selectedScenarioSpec0),u=Pe(this.selectedScenarioSpec1);n={kind:"compare-to-bundle",bundleSide0:t,scenarioSpec0:l,bundleSide1:r,scenarioSpec1:u}}const i=0,a=this.comparisonConfig.bundleR.modelSpec;runTrace(a,{onComplete:l=>{const u=Yv(a,l,i);if(this.writableGroups.set(u),u.length===0){let d="No comparisons were performed.";t==="dat"?d+=" Check that the DAT file is valid.":d+=" Check that the bundle is configured correctly.",this.writableStatusMessage.set(d)}else this.writableStatusMessage.set(void 0),setTimeout(()=>{const d=Pe(this.filteredGroups),m=ns(d);this.selectedSquare.set(m)},0);this.running=!1},onError:l=>{console.error(l),this.writableStatusMessage.set(l.message),this.running=!1}},n)}createTooltipViewModel(t,r,n){const i=Pe(this.selectedSource0),a=Pe(this.selectedSource1),l=Pe(this.selectedScenarioSpec0),u=Pe(this.selectedScenarioSpec1);return new Gv(this.comparisonConfig,this.dataCoordinator,t,r,this.datDatasets,i,l,a,u,n)}hasRowWithDiffs(t){return t.points.some(r=>r.hasDiff===!0)}handleKeyDown(t){const r=Pe(this.filteredGroups),n=Pe(this.selectedSquare),i=Ov(t,r,n);i&&this.selectedSquare.set(i)}selectSquareByIndices(t,r,n){this.selectedSquare.set({groupIndex:t,rowIndex:r,pointIndex:n})}getSelectedSquareInfo(){const t=Pe(this.selectedSquare);if(!t)return;const r=Pe(this.filteredGroups),{groupIndex:n,rowIndex:i,pointIndex:a}=t,l=r[n]?.rows[i],u=l?.points[a];if(u?.diffPoint)return{datasetKey:l.datasetKey,varName:l.varName,diffPoint:u.diffPoint}}}function Wv(e,t,r,n,i){return new Uv(e,t,r,n,i)}function Yv(e,t,r){const n=e.implVars||new Map,i=e.implVarGroups||[];if(n.size===0||i.length===0)return console.error("ERROR: No impl vars or groups defined in model spec; trace report will be empty"),[];let a,l;for(const v of t.datasetReports.values())if(v.points.size>1){let x=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY;for(const T of v.points.keys())x=Math.min(T,x),$=Math.max(T,$);a=x,l=$;break}if(a===void 0||l===void 0)return console.error("ERROR: Failed to determine min/max times; trace report will be empty"),[];function u(v,x){const $=v.points.get(x);let T,A;if($){const L=Math.abs($.valueR-$.valueL);L===0?(T=!1,A="green"):(T=!0,($.valueL!==0?Math.abs(L/$.valueL):1)*100<r?A="orange":A="crimson")}else T=void 0,A="gray";return{hasDiff:T,color:A,diffPoint:$}}function d(v,x,$){const T=[];switch(v){case"initConstants":case"initLevels":T.push(u($,a));break;case"evalLevels":T.push({color:"gray"});for(let P=a+1;P<=l;P++)T.push(u($,P));break;default:for(let P=a;P<=l;P++)T.push(u($,P));break}const A=$.datasetKey.replace("ModelImpl","Model"),L=e.outputVars.has(A);return{datasetKey:$.datasetKey,varName:x.varName,isOutputVar:L,points:T}}const m=[];for(const v of i){const x=[];for(const $ of v.datasetKeys){const T=n.get($);if(T===void 0){console.warn(`WARNING: No impl var found for key=${$}, skipping trace row`);continue}const A=t.datasetReports.get($);if(A===void 0){console.warn(`WARNING: No dataset report found for key=${$}, skipping trace row`);continue}x.push(d(v.fn,T,A))}m.push({title:v.title,rows:x})}return m}function Bi(e,t,r,n,i){const a=[],l=[];function u(v){const x=v.root,$=e==="right"?x.specR:x.specL;if(!$)return;l.push($);let T=x.title;x.subtitle&&(T+=` ${x.subtitle}`),a.push(new Ft(T,$.uid))}function d(v,x,$){v.length!==0&&(a.push(new Ft(x,$,{disabled:!0})),v.forEach(u))}if(n&&i){l.push(n);const v=i==="check"?"check test":"comparison";a.push(new Ft(`Selected scenario from ${v}`,n.uid))}const m=e==="left"?r.onlyInLeft:r.onlyInRight;return d(m,`--- Scenarios only valid in ${t}`,"___only_in_side"),d(r.withDiffs,"--- Scenarios producing differences","___with_diffs"),d(r.withoutDiffs,"--- Scenarios NOT producing differences","___without_diffs"),[a,l]}function Is(e,t,r){let n;if(e===1&&t[0]?.label.startsWith("Selected scenario from"))n=t[0].value;else for(const a of t)if(a.label==="All inputs at default"){n=a.value;break}r.set(n);const i=e===0?"Scenario 1":"Scenario 2";return new As(t,r,i)}class Hv{constructor(t,r,n){this.appModel=t,this.bundleManager=r,this.suiteSummary=n,this.writableChecksInProgress=xe(!0),this.checksInProgress=this.writableChecksInProgress,this.writableProgress=xe("0%"),this.progress=this.writableProgress;const i=qi("sde-check-graph-zoom",1),a=Jf("sde-check-consistent-y-range",!1),l=Qf("sde-check-sort-mode","max-diff"),u=qi("sde-check-concurrency",1);this.userPrefs={zoom:i,consistentYRange:a,sortMode:l};const d=this.suiteSummary===void 0;this.writableGeneratedDateString=xe(void 0),this.headerViewModel=vv(d,t.config.comparison,r,this.writableGeneratedDateString,i,a,l,u),this.pinnedItemStates=ev();const m=cv(d);this.skipChecks=m.skipChecks,this.skipComparisonScenarios=m.skipComparisonScenarios,this.filterPopoverViewModel=m.filterPopoverViewModel}runTestSuite(){this.cancelRunSuite&&(this.cancelRunSuite(),this.cancelRunSuite=void 0),this.writableChecksInProgress.set(!0),this.writableProgress.set("0%");const t=this.appModel.config.comparison;if(this.suiteSummary){const r=this.appModel.config.check,n=checkReportFromSummary(r,this.suiteSummary.checkSummary),i=this.suiteSummary?.comparisonSummary;this.summaryViewModel=Fi(this.appModel.checkDataCoordinator,n,t,i,this.pinnedItemStates,this.userPrefs.sortMode,[]);const a=Oi(this.suiteSummary.date,this.suiteSummary.elapsed);this.writableGeneratedDateString.set(a),this.writableChecksInProgress.set(!1)}else{this.writableGeneratedDateString.set(void 0);const r=performance.now();this.cancelRunSuite=runSuite(this.appModel.config,{onProgress:n=>{this.writableProgress.set(`${Math.round(n*100)}%`)},onComplete:n=>{const i=n.checkReport;let a;n.comparisonReport&&(a=comparisonSummaryFromReport(n.comparisonReport)),this.summaryViewModel=Fi(this.appModel.checkDataCoordinator,i,t,a,this.pinnedItemStates,this.userPrefs.sortMode,this.skipComparisonScenarios),this.filterPopoverViewModel=this.createFilterPopoverViewModelFromReports(i,n.comparisonReport);const l=performance.now()-r,u=Oi(void 0,l);this.writableGeneratedDateString.set(u),this.writableChecksInProgress.set(!1)},onError:n=>{console.error(n)}},{skipChecks:this.skipChecks,skipComparisonScenarios:this.skipComparisonScenarios})}}createCompareDetailViewModelForSummaryRow(t){const r=t.groupSummary,n=t.viewMetadata?.viewGroup,i=t.viewMetadata?.view;return i?.kind==="unresolved-view"?rv(t.rowKey,n):r!==void 0?r.group.kind==="by-dataset"?iv(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,r,this.pinnedItemStates.pinnedScenarios):nv(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,r,n,i,this.pinnedItemStates.pinnedDatasets):sv(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,n,i,this.pinnedItemStates.pinnedFreeformRows)}createCompareDetailViewModelForFirstSummaryRow(t){const r=this.getComparisonSummaryViewModel(t).getAllRowsSnapshot();if(r.length>0){const n=r[0];return this.createCompareDetailViewModelForSummaryRow(n)}else return}createCompareDetailViewModelForSummaryRowWithDelta(t,r,n){const i=this.getComparisonSummaryViewModel(t).getAllRowsSnapshot(),a=i.findIndex(l=>l.rowKey===r)+n;if(a>=0&&a<i.length){const l=i[a];return this.createCompareDetailViewModelForSummaryRow(l)}else return}getComparisonSummaryViewModel(t){switch(t){case"views":return this.summaryViewModel.comparisonViewsSummaryViewModel;case"by-scenario":return this.summaryViewModel.comparisonsByScenarioSummaryViewModel;case"by-dataset":return this.summaryViewModel.comparisonsByDatasetSummaryViewModel;default:Tr(t)}}createPerfViewModel(){return hv()}createTraceViewModel(t,r){const n=this.appModel.config.comparison,i=this.appModel.comparisonDataCoordinator,a=this.summaryViewModel.comparisonSummary?.testSummaries??[];return Wv(n,i,a,t,r)}createFilterPopoverViewModelFromReports(t,r){return dv(this.appModel.config,t,r)}applyFilters(){document.dispatchEvent(new CustomEvent("sde-check-config-changed"))}}function Oi(e,t){e===void 0&&(e=new Date().toISOString());const r=(t/1e3).toFixed(1),n=new Date(e),i=n.toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"}),a=n.toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit"});return`${i} ${a} (${r}s)`}class Xv{#t;get bundles(){return f$1(this.#t)}set bundles(t){E(this.#t,t,!0)}#e;get loading(){return f$1(this.#e)}set loading(t){E(this.#e,t,!0)}#i;get error(){return f$1(this.#i)}set error(t){E(this.#i,t,!0)}constructor(t){this.config=t,this.#t=Oe(Mt([])),this.#e=Oe(!1),this.#i=Oe(void 0),this.activeBundleUrlL=t.bundleUrlL||"",this.activeBundleUrlR=t.bundleUrlR||"",this.config.onBundlesChanged&&this.config.onBundlesChanged(()=>{this.load()})}async load(){this.loading=!0,this.error=void 0;const t=this.loadRemoteBundles(),r=this.loadLocalBundles(),[n,i]=await Promise.all([t,r]);if(!n&&!i){!this.config.remoteBundlesUrl&&!this.config.getLocalBundles?this.error="No bundles available":this.error||(this.error="Failed to load bundles"),this.bundles=[],this.loading=!1;return}this.bundles=this.mergeBundles(n||[],i||[]),this.loading=!1}downloadBundle(t){this.config.downloadBundle&&this.config.downloadBundle(t)}copyBundle(t,r){if(this.config.copyBundle){const n=r.replace(/\s/g,"-");this.config.copyBundle(t,n)}}async loadRemoteBundles(){if(this.config.remoteBundlesUrl)try{const t=await fetch(this.config.remoteBundlesUrl);if(!t.ok)throw new Error(`Failed to fetch remote bundles: ${t.statusText}`);return await t.json()}catch(t){const r=`Failed to load remote bundles: ${t instanceof Error?t.message:String(t)}`,n=this.error;n?this.error=`${n}; ${r}`:this.error=r;return}}async loadLocalBundles(){if(this.config.getLocalBundles)try{return await this.config.getLocalBundles()}catch(t){const r=`Failed to load local bundles: ${t instanceof Error?t.message:String(t)}`,n=this.error;n?this.error=`${n}; ${r}`:this.error=r;return}}mergeBundles(t,r){const n=[];for(const i of t)n.push({remote:i});for(const i of r)n.push({local:i});return n}}function ap(e,t){const r=t?.containerId||"app-shell-container",n=document.getElementById(r);wl(e).then(i=>{let a;t?.bundleSelectorConfig&&(a=new Xv(t.bundleSelectorConfig));const l=new Hv(i,a,t?.suiteSummary);Jo(Zf,{target:n,props:{appViewModel:l}})}).catch(i=>{console.error(`ERROR: Failed to initialize app model: ${i.message}`)})}const messagesHtml="",messages=messagesHtml;function initOverlay(){updateOverlay(messages)}function updateOverlay(e){const t=document.getElementById("overlay-content");t.style.display="none";const r=document.getElementById("overlay-text");r.innerHTML=e}function createBundle$1(){return{version:-1,modelSpec:void 0,initModel:()=>{}}}class EventEmitter{}function cpus(){return 1}function dirname(){return""}function isAbsolute(){return!1}function join(){return""}function fileURLToPath(){return""}const worker_threads=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter,cpus,dirname,fileURLToPath,isAbsolute,join},Symbol.toStringTag,{value:"Module"}));var define_process_env_default={};let __non_webpack_require__=()=>worker_threads;const DefaultErrorSerializer={deserialize(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},isSerializedError=e=>e&&typeof e=="object"&&"__error_marker"in e&&e.__error_marker==="$$error",DefaultSerializer={deserialize(e){return isSerializedError(e)?DefaultErrorSerializer.deserialize(e):e},serialize(e){return e instanceof Error?DefaultErrorSerializer.serialize(e):e}};let registeredSerializer=DefaultSerializer;function deserialize(e){return registeredSerializer.deserialize(e)}function serialize(e){return registeredSerializer.serialize(e)}let bundleURL;function getBundleURLCached(){return bundleURL||(bundleURL=getBundleURL()),bundleURL}function getBundleURL(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return getBaseURL(t[0])}return"/"}function getBaseURL(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}const defaultPoolSize$1=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,isAbsoluteURL=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e);function createSourceBlobURL(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function selectWorkerImplementation$1(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(n,i){var a,l;typeof n=="string"&&i&&i._baseURL?n=new URL(n,i._baseURL):typeof n=="string"&&!isAbsoluteURL(n)&&getBundleURLCached().match(/^file:\/\//i)&&(n=new URL(n,getBundleURLCached().replace(/\/[^\/]+$/,"/")),(!((a=i?.CORSWorkaround)!==null&&a!==void 0)||a)&&(n=createSourceBlobURL(`importScripts(${JSON.stringify(n)});`))),typeof n=="string"&&isAbsoluteURL(n)&&(!((l=i?.CORSWorkaround)!==null&&l!==void 0)||l)&&(n=createSourceBlobURL(`importScripts(${JSON.stringify(n)});`)),super(n,i)}}class t extends e{constructor(n,i){const a=window.URL.createObjectURL(n);super(a,i)}static fromText(n,i){const a=new window.Blob([n],{type:"text/javascript"});return new t(a,i)}}return{blob:t,default:e}}let implementation$3;function getWorkerImplementation$2(){return implementation$3||(implementation$3=selectWorkerImplementation$1()),implementation$3}function isWorkerRuntime$4(){const e=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!e)}const BrowserImplementation=Object.freeze(Object.defineProperty({__proto__:null,defaultPoolSize:defaultPoolSize$1,getWorkerImplementation:getWorkerImplementation$2,isWorkerRuntime:isWorkerRuntime$4},Symbol.toStringTag,{value:"Module"})),getCallsites={};let tsNodeAvailable;const defaultPoolSize=cpus().length;function detectTsNode(){if(typeof __non_webpack_require__=="function")return!1;if(tsNodeAvailable)return tsNodeAvailable;try{eval("require").resolve("ts-node"),tsNodeAvailable=!0}catch(e){if(e&&e.code==="MODULE_NOT_FOUND")tsNodeAvailable=!1;else throw e}return tsNodeAvailable}function createTsNodeModule(e){return`
    require("ts-node/register/transpile-only");
    require(${JSON.stringify(e)});
  `}function rebaseScriptPath(e,t){const r=getCallsites().find(a=>{const l=a.getFileName();return!!(l&&!l.match(t)&&!l.match(/[\/\\]master[\/\\]implementation/)&&!l.match(/^internal\/process/))});let i=(r?r.getFileName():null)||null;return i&&i.startsWith("file:")&&(i=fileURLToPath()),i?join():e}function resolveScriptPath(scriptPath,baseURL){const makeRelative=filePath=>join(baseURL||eval("__dirname")),workerFilePath=typeof __non_webpack_require__=="function"?__non_webpack_require__.resolve(makeRelative()):eval("require").resolve(makeRelative(rebaseScriptPath(scriptPath,/[\/\\]worker_threads[\/\\]/)));return workerFilePath}function initWorkerThreadsWorker(){const NativeWorker=typeof __non_webpack_require__=="function"?__non_webpack_require__().Worker:eval("require")("worker_threads").Worker;let allWorkers=[];class Worker extends NativeWorker{constructor(t,r){const n=r&&r.fromSource?null:resolveScriptPath(t,(r||{})._baseURL);if(n)n.match(/\.tsx?$/i)&&detectTsNode()?super(createTsNodeModule(n),Object.assign(Object.assign({},r),{eval:!0})):n.match(/\.asar[\/\\]/)?super(n.replace(/\.asar([\/\\])/,".asar.unpacked$1"),r):super(n,r);else{const i=t;super(i,Object.assign(Object.assign({},r),{eval:!0}))}this.mappedEventListeners=new WeakMap,allWorkers.push(this)}addEventListener(t,r){const n=i=>{r({data:i})};this.mappedEventListeners.set(r,n),this.on(t,n)}removeEventListener(t,r){const n=this.mappedEventListeners.get(r)||r;this.off(t,n)}}const terminateWorkersAndMaster=()=>{Promise.all(allWorkers.map(e=>e.terminate())).then(()=>process.exit(0),()=>process.exit(1)),allWorkers=[]};process.on("SIGINT",()=>terminateWorkersAndMaster()),process.on("SIGTERM",()=>terminateWorkersAndMaster());class BlobWorker extends Worker{constructor(t,r){super(Buffer.from(t).toString("utf-8"),Object.assign(Object.assign({},r),{fromSource:!0}))}static fromText(t,r){return new Worker(t,Object.assign(Object.assign({},r),{fromSource:!0}))}}return{blob:BlobWorker,default:Worker}}function initTinyWorker(){const e=require("tiny-worker");let t=[];class r extends e{constructor(l,u){const d=u&&u.fromSource?null:process.platform==="win32"?`file:///${resolveScriptPath(l).replace(/\\/g,"/")}`:resolveScriptPath(l);if(d)d.match(/\.tsx?$/i)&&detectTsNode()?super(new Function(createTsNodeModule(resolveScriptPath(l))),[],{esm:!0}):d.match(/\.asar[\/\\]/)?super(d.replace(/\.asar([\/\\])/,".asar.unpacked$1"),[],{esm:!0}):super(d,[],{esm:!0});else{const m=l;super(new Function(m),[],{esm:!0})}t.push(this),this.emitter=new EventEmitter,this.onerror=m=>this.emitter.emit("error",m),this.onmessage=m=>this.emitter.emit("message",m)}addEventListener(l,u){this.emitter.addListener(l,u)}removeEventListener(l,u){this.emitter.removeListener(l,u)}terminate(){return t=t.filter(l=>l!==this),super.terminate()}}const n=()=>{Promise.all(t.map(a=>a.terminate())).then(()=>process.exit(0),()=>process.exit(1)),t=[]};process.on("SIGINT",()=>n()),process.on("SIGTERM",()=>n());class i extends r{constructor(l,u){super(Buffer.from(l).toString("utf-8"),Object.assign(Object.assign({},u),{fromSource:!0}))}static fromText(l,u){return new r(l,Object.assign(Object.assign({},u),{fromSource:!0}))}}return{blob:i,default:r}}let implementation$2,isTinyWorker;function selectWorkerImplementation(){try{return isTinyWorker=!1,initWorkerThreadsWorker()}catch{return console.debug("Node worker_threads not available. Trying to fall back to tiny-worker polyfill..."),isTinyWorker=!0,initTinyWorker()}}function getWorkerImplementation$1(){return implementation$2||(implementation$2=selectWorkerImplementation()),implementation$2}function isWorkerRuntime$3(){if(isTinyWorker)return!!(typeof self<"u"&&self.postMessage);{const isMainThread=typeof __non_webpack_require__=="function"?__non_webpack_require__().isMainThread:eval("require")("worker_threads").isMainThread;return!isMainThread}}const NodeImplementation=Object.freeze(Object.defineProperty({__proto__:null,defaultPoolSize,getWorkerImplementation:getWorkerImplementation$1,isWorkerRuntime:isWorkerRuntime$3},Symbol.toStringTag,{value:"Module"})),runningInNode$1=typeof process<"u"&&process.arch!=="browser"&&"pid"in process,implementation$1=runningInNode$1?NodeImplementation:BrowserImplementation,getWorkerImplementation=implementation$1.getWorkerImplementation;function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,a=n*365.25;ms=function(v,x){x=x||{};var $=typeof v;if($==="string"&&v.length>0)return l(v);if($==="number"&&isFinite(v))return x.long?d(v):u(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function l(v){if(v=String(v),!(v.length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(x){var $=parseFloat(x[1]),T=(x[2]||"ms").toLowerCase();switch(T){case"years":case"year":case"yrs":case"yr":case"y":return $*a;case"weeks":case"week":case"w":return $*i;case"days":case"day":case"d":return $*n;case"hours":case"hour":case"hrs":case"hr":case"h":return $*r;case"minutes":case"minute":case"mins":case"min":case"m":return $*t;case"seconds":case"second":case"secs":case"sec":case"s":return $*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}}}function u(v){var x=Math.abs(v);return x>=n?Math.round(v/n)+"d":x>=r?Math.round(v/r)+"h":x>=t?Math.round(v/t)+"m":x>=e?Math.round(v/e)+"s":v+"ms"}function d(v){var x=Math.abs(v);return x>=n?m(v,x,n,"day"):x>=r?m(v,x,r,"hour"):x>=t?m(v,x,t,"minute"):x>=e?m(v,x,e,"second"):v+" ms"}function m(v,x,$,T){var A=x>=$*1.5;return Math.round(v/$)+" "+T+(A?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){n.debug=n,n.default=n,n.coerce=m,n.disable=u,n.enable=a,n.enabled=d,n.humanize=requireMs(),n.destroy=v,Object.keys(t).forEach(x=>{n[x]=t[x]}),n.names=[],n.skips=[],n.formatters={};function r(x){let $=0;for(let T=0;T<x.length;T++)$=($<<5)-$+x.charCodeAt(T),$|=0;return n.colors[Math.abs($)%n.colors.length]}n.selectColor=r;function n(x){let $,T=null,A,L;function P(...q){if(!P.enabled)return;const C=P,D=Number(new Date),G=D-($||D);C.diff=G,C.prev=$,C.curr=D,$=D,q[0]=n.coerce(q[0]),typeof q[0]!="string"&&q.unshift("%O");let B=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(H,X)=>{if(H==="%%")return"%";B++;const re=n.formatters[X];if(typeof re=="function"){const pe=q[B];H=re.call(C,pe),q.splice(B,1),B--}return H}),n.formatArgs.call(C,q),(C.log||n.log).apply(C,q)}return P.namespace=x,P.useColors=n.useColors(),P.color=n.selectColor(x),P.extend=i,P.destroy=n.destroy,Object.defineProperty(P,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(A!==n.namespaces&&(A=n.namespaces,L=n.enabled(x)),L),set:q=>{T=q}}),typeof n.init=="function"&&n.init(P),P}function i(x,$){const T=n(this.namespace+(typeof $>"u"?":":$)+x);return T.log=this.log,T}function a(x){n.save(x),n.namespaces=x,n.names=[],n.skips=[];const $=(typeof x=="string"?x:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const T of $)T[0]==="-"?n.skips.push(T.slice(1)):n.names.push(T)}function l(x,$){let T=0,A=0,L=-1,P=0;for(;T<x.length;)if(A<$.length&&($[A]===x[T]||$[A]==="*"))$[A]==="*"?(L=A,P=T,A++):(T++,A++);else if(L!==-1)A=L+1,P++,T=P;else return!1;for(;A<$.length&&$[A]==="*";)A++;return A===$.length}function u(){const x=[...n.names,...n.skips.map($=>"-"+$)].join(",");return n.enable(""),x}function d(x){for(const $ of n.skips)if(l(x,$))return!1;for(const $ of n.names)if(l(x,$))return!0;return!1}function m(x){return x instanceof Error?x.stack||x.message:x}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return common=e,common}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(e,t){t.formatArgs=n,t.save=i,t.load=a,t.useColors=r,t.storage=l(),t.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;d.splice(1,0,m,"color: inherit");let v=0,x=0;d[0].replace(/%[a-zA-Z%]/g,$=>{$!=="%%"&&(v++,$==="%c"&&(x=v))}),d.splice(x,0,m)}t.log=console.debug||console.log||(()=>{});function i(d){try{d?t.storage.setItem("debug",d):t.storage.removeItem("debug")}catch{}}function a(){let d;try{d=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=define_process_env_default.DEBUG),d}function l(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:u}=e.exports;u.j=function(d){try{return JSON.stringify(d)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(browser,browser.exports)),browser.exports}var browserExports=requireBrowser();const DebugLogger=getDefaultExportFromCjs(browserExports),hasSymbols=()=>typeof Symbol=="function",hasSymbol=e=>hasSymbols()&&!!Symbol[e],getSymbol=e=>hasSymbol(e)?Symbol[e]:"@@"+e;hasSymbol("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const SymbolIterator=getSymbol("iterator"),SymbolObservable=getSymbol("observable"),SymbolSpecies=getSymbol("species");function getMethod(e,t){const r=e[t];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function getSpecies(e){let t=e.constructor;return t!==void 0&&(t=t[SymbolSpecies],t===null&&(t=void 0)),t!==void 0?t:Observable}function isObservable(e){return e instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout(()=>{throw e},0)}function enqueue(e){Promise.resolve().then(()=>{try{e()}catch(t){hostReportError(t)}})}function cleanupSubscription(e){const t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{const r=getMethod(t,"unsubscribe");r&&r.call(t)}}catch(r){hostReportError(r)}}function closeSubscription(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const r of t)if(notifySubscription(e,r.type,r.value),e._state==="closed")break}}function notifySubscription(e,t,r){e._state="running";const n=e._observer;try{const i=n?getMethod(n,t):void 0;switch(t){case"next":i&&i.call(n,r);break;case"error":if(closeSubscription(e),i)i.call(n,r);else throw r;break;case"complete":closeSubscription(e),i&&i.call(n);break}}catch(i){hostReportError(i)}e._state==="closed"?cleanupSubscription(e):e._state==="running"&&(e._state="ready")}function onNotify(e,t,r){if(e._state!=="closed"){if(e._state==="buffering"){e._queue=e._queue||[],e._queue.push({type:t,value:r});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:r}],enqueue(()=>flushSubscription(e));return}notifySubscription(e,t,r)}}class Subscription{constructor(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";const n=new SubscriptionObserver(this);try{this._cleanup=r.call(void 0,n)}catch(i){n.error(i)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(closeSubscription(this),cleanupSubscription(this))}}class SubscriptionObserver{constructor(t){this._subscription=t}get closed(){return this._subscription._state==="closed"}next(t){onNotify(this._subscription,"next",t)}error(t){onNotify(this._subscription,"error",t)}complete(){onNotify(this._subscription,"complete")}}class Observable{constructor(t){if(!(this instanceof Observable))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}subscribe(t,r,n){return(typeof t!="object"||t===null)&&(t={next:t,error:r,complete:n}),new Subscription(t,this._subscriber)}pipe(t,...r){let n=this;for(const i of[t,...r])n=i(n);return n}tap(t,r,n){const i=typeof t!="object"||t===null?{next:t,error:r,complete:n}:t;return new Observable(a=>this.subscribe({next(l){i.next&&i.next(l),a.next(l)},error(l){i.error&&i.error(l),a.error(l)},complete(){i.complete&&i.complete(),a.complete()},start(l){i.start&&i.start(l)}}))}forEach(t){return new Promise((r,n)=>{if(typeof t!="function"){n(new TypeError(t+" is not a function"));return}function i(){a.unsubscribe(),r(void 0)}const a=this.subscribe({next(l){try{t(l,i)}catch(u){n(u),a.unsubscribe()}},error(l){n(l)},complete(){r(void 0)}})})}map(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>this.subscribe({next(i){let a=i;try{a=t(i)}catch(l){return n.error(l)}n.next(a)},error(i){n.error(i)},complete(){n.complete()}}))}filter(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>this.subscribe({next(i){try{if(!t(i))return}catch(a){return n.error(a)}n.next(i)},error(i){n.error(i)},complete(){n.complete()}}))}reduce(t,r){if(typeof t!="function")throw new TypeError(t+" is not a function");const n=getSpecies(this),i=arguments.length>1;let a=!1,l=r;return new n(u=>this.subscribe({next(d){const m=!a;if(a=!0,!m||i)try{l=t(l,d)}catch(v){return u.error(v)}else l=d},error(d){u.error(d)},complete(){if(!a&&!i)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(l),u.complete()}}))}concat(...t){const r=getSpecies(this);return new r(n=>{let i,a=0;function l(u){i=u.subscribe({next(d){n.next(d)},error(d){n.error(d)},complete(){a===t.length?(i=void 0,n.complete()):l(r.from(t[a++]))}})}return l(this),()=>{i&&(i.unsubscribe(),i=void 0)}})}flatMap(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>{const i=[],a=this.subscribe({next(u){let d;if(t)try{d=t(u)}catch(v){return n.error(v)}else d=u;const m=r.from(d).subscribe({next(v){n.next(v)},error(v){n.error(v)},complete(){const v=i.indexOf(m);v>=0&&i.splice(v,1),l()}});i.push(m)},error(u){n.error(u)},complete(){l()}});function l(){a.closed&&i.length===0&&n.complete()}return()=>{i.forEach(u=>u.unsubscribe()),a.unsubscribe()}})}[SymbolObservable](){return this}static from(t){const r=typeof this=="function"?this:Observable;if(t==null)throw new TypeError(t+" is not an object");const n=getMethod(t,SymbolObservable);if(n){const i=n.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return isObservable(i)&&i.constructor===r?i:new r(a=>i.subscribe(a))}if(hasSymbol("iterator")){const i=getMethod(t,SymbolIterator);if(i)return new r(a=>{enqueue(()=>{if(!a.closed){for(const l of i.call(t))if(a.next(l),a.closed)return;a.complete()}})})}if(Array.isArray(t))return new r(i=>{enqueue(()=>{if(!i.closed){for(const a of t)if(i.next(a),i.closed)return;i.complete()}})});throw new TypeError(t+" is not observable")}static of(...t){const r=typeof this=="function"?this:Observable;return new r(n=>{enqueue(()=>{if(!n.closed){for(const i of t)if(n.next(i),n.closed)return;n.complete()}})})}static get[SymbolSpecies](){return this}}hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:SymbolObservable,hostReportError},configurable:!0});function unsubscribe(e){typeof e=="function"?e():e&&typeof e.unsubscribe=="function"&&e.unsubscribe()}class MulticastSubject extends Observable{constructor(){super(t=>(this._observers.add(t),()=>this._observers.delete(t))),this._observers=new Set}next(t){for(const r of this._observers)r.next(t)}error(t){for(const r of this._observers)r.error(t)}complete(){for(const t of this._observers)t.complete()}}function multicast(e){const t=new MulticastSubject;let r,n=0;return new Observable(i=>{r||(r=e.subscribe(t));const a=t.subscribe(i);return n++,()=>{n--,a.unsubscribe(),n===0&&(unsubscribe(r),r=void 0)}})}const $errors=Symbol("thread.errors"),$events=Symbol("thread.events"),$terminate=Symbol("thread.terminate"),$transferable=Symbol("thread.transferable"),$worker=Symbol("thread.worker");function fail$1(e){throw Error(e)}const Thread={errors(e){return e[$errors]||fail$1("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(e){return e[$events]||fail$1("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(e){return e[$terminate]()}},doNothing$1=()=>{};function createPromiseWithResolver(){let e=!1,t,r=doNothing$1;return[new Promise(n=>{e?n(t):r=n}),n=>{e=!0,t=n,r(t)}]}var WorkerEventType;(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(WorkerEventType||(WorkerEventType={}));const doNothing=()=>{},returnInput=e=>e,runDeferred=e=>Promise.resolve().then(e);function fail(e){throw e}function isThenable(e){return e&&typeof e.then=="function"}class ObservablePromise extends Observable{constructor(t){super(r=>{const n=this,i=Object.assign(Object.assign({},r),{complete(){r.complete(),n.onCompletion()},error(a){r.error(a),n.onError(a)},next(a){r.next(a),n.onNext(a)}});try{return this.initHasRun=!0,t(i)}catch(a){i.error(a)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const r of this.rejectionCallbacks)runDeferred(()=>r(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)runDeferred(()=>t(this.firstValue))}then(t,r){const n=t||returnInput,i=r||fail;let a=!1;return new Promise((l,u)=>{const d=v=>{if(!a){a=!0;try{l(i(v))}catch(x){u(x)}}},m=v=>{try{l(n(v))}catch(x){d(x)}};if(this.initHasRun||this.subscribe({error:d}),this.state==="fulfilled")return l(n(this.firstValue));if(this.state==="rejected")return a=!0,l(i(this.rejection));this.fulfillmentCallbacks.push(m),this.rejectionCallbacks.push(d)})}catch(t){return this.then(void 0,t)}finally(t){const r=t||doNothing;return this.then(n=>(r(),n),()=>r())}static from(t){return isThenable(t)?new ObservablePromise(r=>{const n=a=>{r.next(a),r.complete()},i=a=>{r.error(a)};t.then(n,i)}):super.from(t)}}function isTransferable(e){return!(!e||typeof e!="object")}function isTransferDescriptor(e){return e&&typeof e=="object"&&e[$transferable]}function Transfer(e,t){if(!t){if(!isTransferable(e))throw Error();t=[e]}return{[$transferable]:!0,send:e,transferables:t}}var MasterMessageType;(function(e){e.cancel="cancel",e.run="run"})(MasterMessageType||(MasterMessageType={}));var WorkerMessageType;(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(WorkerMessageType||(WorkerMessageType={}));const debugMessages$1=DebugLogger("threads:master:messages");let nextJobUID=1;const dedupe=e=>Array.from(new Set(e)),isJobErrorMessage=e=>e&&e.type===WorkerMessageType.error,isJobResultMessage=e=>e&&e.type===WorkerMessageType.result,isJobStartMessage=e=>e&&e.type===WorkerMessageType.running;function createObservableForJob(e,t){return new Observable(r=>{let n;const i=(a=>{if(debugMessages$1("Message from worker:",a.data),!(!a.data||a.data.uid!==t)){if(isJobStartMessage(a.data))n=a.data.resultType;else if(isJobResultMessage(a.data))n==="promise"?(typeof a.data.payload<"u"&&r.next(deserialize(a.data.payload)),r.complete(),e.removeEventListener("message",i)):(a.data.payload&&r.next(deserialize(a.data.payload)),a.data.complete&&(r.complete(),e.removeEventListener("message",i)));else if(isJobErrorMessage(a.data)){const l=deserialize(a.data.error);r.error(l),e.removeEventListener("message",i)}}});return e.addEventListener("message",i),()=>{if(n==="observable"||!n){const a={type:MasterMessageType.cancel,uid:t};e.postMessage(a)}e.removeEventListener("message",i)}})}function prepareArguments(e){if(e.length===0)return{args:[],transferables:[]};const t=[],r=[];for(const n of e)isTransferDescriptor(n)?(t.push(serialize(n.send)),r.push(...n.transferables)):t.push(serialize(n));return{args:t,transferables:r.length===0?r:dedupe(r)}}function createProxyFunction(e,t){return((...r)=>{const n=nextJobUID++,{args:i,transferables:a}=prepareArguments(r),l={type:MasterMessageType.run,uid:n,method:t,args:i};debugMessages$1("Sending command to run function to worker:",l);try{e.postMessage(l,a)}catch(u){return ObservablePromise.from(Promise.reject(u))}return ObservablePromise.from(multicast(createObservableForJob(e,n)))})}function createProxyModule(e,t){const r={};for(const n of t)r[n]=createProxyFunction(e,n);return r}var __awaiter$2=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(v){try{m(n.next(v))}catch(x){l(x)}}function d(v){try{m(n.throw(v))}catch(x){l(x)}}function m(v){v.done?a(v.value):i(v.value).then(u,d)}m((n=n.apply(e,[])).next())})};const debugMessages=DebugLogger("threads:master:messages"),debugSpawn=DebugLogger("threads:master:spawn"),debugThreadUtils=DebugLogger("threads:master:thread-utils"),isInitMessage=e=>e&&e.type==="init",isUncaughtErrorMessage=e=>e&&e.type==="uncaughtError",initMessageTimeout=typeof process<"u"&&define_process_env_default.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(define_process_env_default.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function withTimeout(e,t,r){return __awaiter$2(this,void 0,void 0,function*(){let n;const i=new Promise((l,u)=>{n=setTimeout(()=>u(Error(r)),t)}),a=yield Promise.race([e,i]);return clearTimeout(n),a})}function receiveInitMessage(e){return new Promise((t,r)=>{const n=(i=>{debugMessages("Message from worker before finishing initialization:",i.data),isInitMessage(i.data)?(e.removeEventListener("message",n),t(i.data)):isUncaughtErrorMessage(i.data)&&(e.removeEventListener("message",n),r(deserialize(i.data.error)))});e.addEventListener("message",n)})}function createEventObservable(e,t){return new Observable(r=>{const n=(a=>{const l={type:WorkerEventType.message,data:a.data};r.next(l)}),i=(a=>{debugThreadUtils("Unhandled promise rejection event in thread:",a);const l={type:WorkerEventType.internalError,error:Error(a.reason)};r.next(l)});e.addEventListener("message",n),e.addEventListener("unhandledrejection",i),t.then(()=>{const a={type:WorkerEventType.termination};e.removeEventListener("message",n),e.removeEventListener("unhandledrejection",i),r.next(a),r.complete()})})}function createTerminator(e){const[t,r]=createPromiseWithResolver();return{terminate:()=>__awaiter$2(this,void 0,void 0,function*(){debugThreadUtils("Terminating worker"),yield e.terminate(),r()}),termination:t}}function setPrivateThreadProps(e,t,r,n){const i=r.filter(a=>a.type===WorkerEventType.internalError).map(a=>a.error);return Object.assign(e,{[$errors]:i,[$events]:r,[$terminate]:n,[$worker]:t})}function spawn(e,t){return __awaiter$2(this,void 0,void 0,function*(){debugSpawn("Initializing new thread");const r=initMessageTimeout,n=(yield withTimeout(receiveInitMessage(e),r,`Timeout: Did not receive an init message from worker after ${r}ms. Make sure the worker calls expose().`)).exposed,{termination:i,terminate:a}=createTerminator(e),l=createEventObservable(e,i);if(n.type==="function"){const u=createProxyFunction(e);return setPrivateThreadProps(u,e,l,a)}else if(n.type==="module"){const u=createProxyModule(e,n.methods);return setPrivateThreadProps(u,e,l,a)}else{const u=n.type;throw Error(`Worker init message states unexpected type of expose(): ${u}`)}})}const BlobWorker=getWorkerImplementation().blob,Worker$1=getWorkerImplementation().default,isWorkerRuntime$2=function e(){const t=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!t)},postMessageToMaster$2=function e(t,r){self.postMessage(t,r)},subscribeToMasterMessages$2=function e(t){const r=i=>{t(i.data)},n=()=>{self.removeEventListener("message",r)};return self.addEventListener("message",r),n},WebWorkerImplementation={isWorkerRuntime:isWorkerRuntime$2,postMessageToMaster:postMessageToMaster$2,subscribeToMasterMessages:subscribeToMasterMessages$2};typeof self>"u"&&(global.self=global);const isWorkerRuntime$1=function e(){return!!(typeof self<"u"&&self.postMessage)},postMessageToMaster$1=function e(t){self.postMessage(t)};let muxingHandlerSetUp=!1;const messageHandlers=new Set,subscribeToMasterMessages$1=function e(t){return muxingHandlerSetUp||(self.addEventListener("message",(r=>{messageHandlers.forEach(n=>n(r.data))})),muxingHandlerSetUp=!0),messageHandlers.add(t),()=>messageHandlers.delete(t)},TinyWorkerImplementation={isWorkerRuntime:isWorkerRuntime$1,postMessageToMaster:postMessageToMaster$1,subscribeToMasterMessages:subscribeToMasterMessages$1};let implementation;function selectImplementation(){return typeof __non_webpack_require__=="function"?__non_webpack_require__():eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}function assertMessagePort(e){if(!e)throw Error("Invariant violation: MessagePort to parent is not available.");return e}const isWorkerRuntime=function e(){return!getImplementation().isMainThread},postMessageToMaster=function e(t,r){assertMessagePort(getImplementation().parentPort).postMessage(t,r)},subscribeToMasterMessages=function e(t){const r=getImplementation().parentPort;if(!r)throw Error("Invariant violation: MessagePort to parent is not available.");const n=a=>{t(a)},i=()=>{assertMessagePort(r).off("message",n)};return assertMessagePort(r).on("message",n),i};function testImplementation(){getImplementation()}const WorkerThreadsImplementation={isWorkerRuntime,postMessageToMaster,subscribeToMasterMessages,testImplementation},runningInNode=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function selectNodeImplementation(){try{return WorkerThreadsImplementation.testImplementation(),WorkerThreadsImplementation}catch{return TinyWorkerImplementation}}const Implementation=runningInNode?selectNodeImplementation():WebWorkerImplementation;Implementation.isWorkerRuntime;function postUncaughtErrorMessage(e){try{const t={type:WorkerMessageType.uncaughtError,error:serialize(e)};Implementation.postMessageToMaster(t)}catch(t){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,t,`
Original error:`,e)}}typeof self<"u"&&typeof self.addEventListener=="function"&&Implementation.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>postUncaughtErrorMessage(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&typeof t.message=="string"&&setTimeout(()=>postUncaughtErrorMessage(t),250)}));typeof process<"u"&&typeof process.on=="function"&&Implementation.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>postUncaughtErrorMessage(e),250)}),process.on("unhandledRejection",e=>{e&&typeof e.message=="string"&&setTimeout(()=>postUncaughtErrorMessage(e),250)}));var ok$1=function(e){return new Ok$1(e)},err$1=function(e){return new Err$1(e)},Ok$1=(function(){function e(t){var r=this;this.value=t,this.match=function(n,i){return n(r.value)}}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$1(t(this.value))},e.prototype.mapErr=function(t){return ok$1(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$1.fromPromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype._unsafeUnwrap=function(){return this.value},e.prototype._unsafeUnwrapErr=function(){throw new Error("Called `_unsafeUnwrapErr` on an Ok")},e})(),Err$1=(function(){function e(t){var r=this;this.error=t,this.match=function(n,i){return i(r.error)}}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$1(this.error)},e.prototype.mapErr=function(t){return err$1(t(this.error))},e.prototype.andThen=function(t){return err$1(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$1(this.error)},e.prototype.asyncMap=function(t){return errAsync$1(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype._unsafeUnwrap=function(){throw new Error("Called `_unsafeUnwrap` on an Err")},e.prototype._unsafeUnwrapErr=function(){return this.error},e})();function __awaiter$1(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(v){try{m(n.next(v))}catch(x){l(x)}}function d(v){try{m(n.throw(v))}catch(x){l(x)}}function m(v){v.done?a(v.value):i(v.value).then(u,d)}m((n=n.apply(e,[])).next())})}function __generator$1(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(v){return d([m,v])}}function d(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=m[0]&2?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var logWarning=function(e){if(typeof process!="object"){var t="\x1B[33m%s\x1B[0m",r=["[neverthrow]",e].join(" - ");console.warn(t,r)}},ResultAsync$1=(function(){function e(t){this._promise=t}return e.fromPromise=function(t,r){var n=t.then(function(a){return new Ok$1(a)});if(r)n=n.catch(function(a){return new Err$1(r(a))});else{var i=["`fromPromise` called without a promise rejection handler","Ensure that you are catching promise rejections yourself, or pass a second argument to `fromPromise` to convert a caught exception into an `Err` instance"].join(" - ");logWarning(i)}return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1(r,void 0,void 0,function(){var i;return __generator$1(this,function(a){switch(a.label){case 0:return n.isErr()?[2,new Err$1(n.error)]:(i=Ok$1.bind,[4,t(n.value)]);case 1:return[2,new(i.apply(Ok$1,[void 0,a.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1(r,void 0,void 0,function(){var i;return __generator$1(this,function(a){switch(a.label){case 0:return n.isOk()?[2,new Ok$1(n.value)]:(i=Err$1.bind,[4,t(n.error)]);case 1:return[2,new(i.apply(Err$1,[void 0,a.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$1(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t){return this._promise.then(t)},e})(),errAsync$1=function(e){return new ResultAsync$1(Promise.resolve(new Err$1(e)))},__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e};function createInputValue(e,t,r){let n=t;const i={},a=()=>n,l=u=>{var d;u!==n&&(n=u,(d=i.onSet)==null||d.call(i))};return{varId:e,get:a,set:l,reset:()=>{l(t)},callbacks:i}}var Series=class Vm{constructor(t,r){this.varId=t,this.points=r}getValueAtTime(t){var r;return(r=this.points.find(n=>n.x===t))==null?void 0:r.y}copy(){const t=this.points.map(r=>__spreadValues({},r));return new Vm(this.varId,t)}},Outputs=class{constructor(e,t,r,n=1){this.varIds=e,this.startTime=t,this.endTime=r,this.saveFreq=n,this.seriesLength=Math.round((r-t)/n)+1,this.varSeries=new Array(e.length);for(let i=0;i<e.length;i++){const a=new Array(this.seriesLength);for(let u=0;u<this.seriesLength;u++)a[u]={x:t+u*n,y:0};const l=e[i];this.varSeries[i]=new Series(l,a)}}setVarSpecs(e){if(e.length!==this.varIds.length)throw new Error("Length of output varSpecs must match that of varIds");this.varSpecs=e}updateFromBuffer(e,t){const r=parseOutputsBuffer(e,t,this);return r.isOk()?ok$1(void 0):err$1(r.error)}getSeriesForVar(e){const t=this.varIds.indexOf(e);if(t>=0)return this.varSeries[t]}};function parseOutputsBuffer(e,t,r){const n=r.varIds.length,i=r.seriesLength;if(t<i||e.length<n*i)return err$1("invalid-point-count");for(let a=0;a<n;a++){const l=r.varSeries[a];let u=t*a;for(let d=0;d<i;d++)l.points[d].y=validateNumber(e[u]),u++}return ok$1(r)}function validateNumber(e){if(!isNaN(e)&&e>-1e32)return e}function getEncodedVarIndicesLength(e){var t;let r=1;for(const n of e){r+=2;const i=((t=n.subscriptIndices)==null?void 0:t.length)||0;r+=i}return r}function encodeVarIndices(e,t){let r=0;t[r++]=e.length;for(const n of e){t[r++]=n.varIndex;const i=n.subscriptIndices,a=i?.length||0;t[r++]=a;for(let l=0;l<a;l++)t[r++]=i[l]}}function getEncodedLookupBufferLengths(e){var t,r;let n=1,i=0;for(const a of e){const l=a.varRef.varSpec;if(l===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");n+=2;const u=((t=l.subscriptIndices)==null?void 0:t.length)||0;n+=u,n+=2,i+=((r=a.points)==null?void 0:r.length)||0}return{lookupIndicesLength:n,lookupsLength:i}}function encodeLookups(e,t,r){let n=0;t[n++]=e.length;let i=0;for(const a of e){const l=a.varRef.varSpec;t[n++]=l.varIndex;const u=l.subscriptIndices,d=u?.length||0;t[n++]=d;for(let m=0;m<d;m++)t[n++]=u[m];a.points!==void 0?(t[n++]=i,t[n++]=a.points.length,r?.set(a.points,i),i+=a.points.length):(t[n++]=-1,t[n++]=0)}}function decodeLookups(e,t){const r=[];let n=0;const i=e[n++];for(let a=0;a<i;a++){const l=e[n++],u=e[n++],d=u>0?Array(u):void 0;for(let T=0;T<u;T++)d[T]=e[n++];const m=e[n++],v=e[n++],x={varIndex:l,subscriptIndices:d};let $;m>=0?t?$=t.slice(m,m+v):$=new Float64Array(0):$=void 0,r.push({varRef:{varSpec:x},points:$})}return r}var ModelListing=class{constructor(e){this.varSpecs=new Map;const t=new Map;for(const i of e.dimensions){const a=i.id,l=[];for(let u=0;u<i.subIds.length;u++)l.push({id:i.subIds[u],index:u});t.set(a,{id:a,subscripts:l})}function r(i){const a=t.get(i);if(a===void 0)throw new Error(`No dimension info found for id=${i}`);return a}const n=new Set;for(const i of e.variables){const a=varIdWithoutSubscripts(i.id);if(!n.has(a)){const l=(i.dimIds||[]).map(r);if(l.length>0){const u=[];for(const m of l)u.push(m.subscripts);const d=cartesianProductOf(u);for(const m of d){const v=m.map(T=>T.id).join(","),x=m.map(T=>T.index),$=`${a}[${v}]`;this.varSpecs.set($,{varIndex:i.index,subscriptIndices:x})}}else this.varSpecs.set(a,{varIndex:i.index});n.add(a)}}}getSpecForVarId(e){return this.varSpecs.get(e)}getSpecForVarName(e){const t=sdeVarIdForVensimVarName(e);return this.varSpecs.get(t)}deriveOutputs(e,t){const r=[];for(const i of t){const a=this.varSpecs.get(i);a!==void 0?r.push(a):console.warn(`WARNING: No output var spec found for id=${i}`)}const n=new Outputs(t,e.startTime,e.endTime,e.saveFreq);return n.varSpecs=r,n}};function varIdWithoutSubscripts(e){const t=e.indexOf("[");return t>=0?e.substring(0,t):e}function cartesianProductOf(e){return e.reduce((t,r)=>t.map(n=>r.map(i=>n.concat([i]))).reduce((n,i)=>n.concat(i),[]),[[]])}function sdeVarIdForVensimName(e){return"_"+e.trim().replace(/"/g,"_").replace(/\s+!$/g,"!").replace(/\s/g,"_").replace(/,/g,"_").replace(/-/g,"_").replace(/\./g,"_").replace(/\$/g,"_").replace(/'/g,"_").replace(/&/g,"_").replace(/%/g,"_").replace(/\//g,"_").replace(/\|/g,"_").toLowerCase()}function sdeVarIdForVensimVarName(e){const t=e.match(/([^[]+)(?:\[([^\]]+)\])?/);if(!t)throw new Error(`Invalid Vensim name: ${e}`);let r=sdeVarIdForVensimName(t[1]);if(t[2]){const n=t[2].split(",").map(i=>sdeVarIdForVensimName(i));r+=`[${n.join(",")}]`}return r}function resolveVarRef(e,t,r){if(!t.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${r} variable references by name or identifier when model listing is unavailable`);if(t.varId){const n=e?.getSpecForVarId(t.varId);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varId=${t.varId}`)}else{const n=e?.getSpecForVarName(t.varName);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varName='${t.varId}'`)}}}var headerLengthInElements=16,extrasLengthInElements=1,Int32Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,t,r){this.view=r>0?new Int32Array(e,t,r):void 0,this.offsetInBytes=t,this.lengthInElements=r}},Float64Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,t,r){this.view=r>0?new Float64Array(e,t,r):void 0,this.offsetInBytes=t,this.lengthInElements=r}},BufferedRunModelParams=class{constructor(e){this.listing=e,this.header=new Int32Section,this.extras=new Float64Section,this.inputs=new Float64Section,this.outputs=new Float64Section,this.outputIndices=new Int32Section,this.lookups=new Float64Section,this.lookupIndices=new Int32Section}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(e,t){this.inputs.lengthInElements!==0&&((e===void 0||e.length<this.inputs.lengthInElements)&&(e=t(this.inputs.lengthInElements)),e.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(e,t){this.outputIndices.lengthInElements!==0&&((e===void 0||e.length<this.outputIndices.lengthInElements)&&(e=t(this.outputIndices.lengthInElements)),e.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(e){this.outputs.view!==void 0&&(e.length>this.outputs.view.length?this.outputs.view.set(e.subarray(0,this.outputs.view.length)):this.outputs.view.set(e))}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(e){this.extras.view[0]=e}finalizeOutputs(e){this.outputs.view&&e.updateFromBuffer(this.outputs.view,e.seriesLength),e.runTimeInMillis=this.getElapsedTime()}updateFromParams(e,t,r){const n=e.length,i=t.varIds.length*t.seriesLength;let a;const l=t.varSpecs;l!==void 0&&l.length>0?a=getEncodedVarIndicesLength(l):a=0;let u,d;if(r?.lookups!==void 0&&r.lookups.length>0){for(const X of r.lookups)resolveVarRef(this.listing,X.varRef,"lookup");const H=getEncodedLookupBufferLengths(r.lookups);u=H.lookupsLength,d=H.lookupIndicesLength}else u=0,d=0;let m=0;function v(H,X){const re=m,pe=H==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,$e=Math.round(X*pe),ke=Math.ceil($e/8)*8;return m+=ke,re}const x=v("int32",headerLengthInElements),$=v("float64",extrasLengthInElements),T=v("float64",n),A=v("float64",i),L=v("int32",a),P=v("float64",u),q=v("int32",d),C=m;if(this.encoded===void 0||this.encoded.byteLength<C){const H=Math.ceil(C*1.2);this.encoded=new ArrayBuffer(H),this.header.update(this.encoded,x,headerLengthInElements)}const D=this.header.view;let G=0;D[G++]=$,D[G++]=extrasLengthInElements,D[G++]=T,D[G++]=n,D[G++]=A,D[G++]=i,D[G++]=L,D[G++]=a,D[G++]=P,D[G++]=u,D[G++]=q,D[G++]=d,this.inputs.update(this.encoded,T,n),this.extras.update(this.encoded,$,extrasLengthInElements),this.outputs.update(this.encoded,A,i),this.outputIndices.update(this.encoded,L,a),this.lookups.update(this.encoded,P,u),this.lookupIndices.update(this.encoded,q,d);const B=this.inputs.view;for(let H=0;H<e.length;H++){const X=e[H];typeof X=="number"?B[H]=X:B[H]=X.get()}this.outputIndices.view&&encodeVarIndices(l,this.outputIndices.view),d>0&&encodeLookups(r.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(e){const t=headerLengthInElements*Int32Array.BYTES_PER_ELEMENT;if(e.byteLength<t)throw new Error("Buffer must be long enough to contain header section");this.encoded=e,this.header.update(this.encoded,0,headerLengthInElements);const r=this.header.view;let n=0;const i=r[n++],a=r[n++],l=r[n++],u=r[n++],d=r[n++],m=r[n++],v=r[n++],x=r[n++],$=r[n++],T=r[n++],A=r[n++],L=r[n++],P=a*Float64Array.BYTES_PER_ELEMENT,q=u*Float64Array.BYTES_PER_ELEMENT,C=m*Float64Array.BYTES_PER_ELEMENT,D=x*Int32Array.BYTES_PER_ELEMENT,G=T*Float64Array.BYTES_PER_ELEMENT,B=L*Int32Array.BYTES_PER_ELEMENT,H=t+P+q+C+D+G+B;if(e.byteLength<H)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,i,a),this.inputs.update(this.encoded,l,u),this.outputs.update(this.encoded,d,m),this.outputIndices.update(this.encoded,v,x),this.lookups.update(this.encoded,$,T),this.lookupIndices.update(this.encoded,A,L)}};async function spawnAsyncModelRunner(e){return e.path?spawnAsyncModelRunnerWithWorker(new Worker$1(e.path)):spawnAsyncModelRunnerWithWorker(BlobWorker.fromText(e.source))}async function spawnAsyncModelRunnerWithWorker(e){const t=await spawn(e),r=await t.initModel(),n=r.modelListing?new ModelListing(r.modelListing):void 0,i=new BufferedRunModelParams(n);let a=!1,l=!1;return{createOutputs:()=>new Outputs(r.outputVarIds,r.startTime,r.endTime,r.saveFreq),runModel:async(u,d,m)=>{if(l)throw new Error("Async model runner has already been terminated");if(a)throw new Error("Async model runner only supports one `runModel` call at a time");a=!0,i.updateFromParams(u,d,m);let v;try{v=await t.runModel(Transfer(i.getEncodedBuffer()))}finally{a=!1}return i.updateFromEncodedBuffer(v),i.finalizeOutputs(d),d},terminate:()=>l?Promise.resolve():(l=!0,Thread.terminate(t))}}var assertNever={},hasRequiredAssertNever;function requireAssertNever(){if(hasRequiredAssertNever)return assertNever;hasRequiredAssertNever=1,Object.defineProperty(assertNever,"__esModule",{value:!0}),assertNever.assertNever=e;function e(t,r){if(typeof r=="string")throw new Error(r);if(typeof r=="function")throw new Error(r(t));if(r)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}return assertNever.default=e,assertNever}var assertNeverExports=requireAssertNever(),ajv={exports:{}},core$1={},validate={},boolSchema={},errors={},codegen={},code$1={},hasRequiredCode$1;function requireCode$1(){return hasRequiredCode$1||(hasRequiredCode$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(C){if(super(),!e.IDENTIFIER.test(C))throw new Error("CodeGen: name must be a valid identifier");this.str=C}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(C){super(),this._items=typeof C=="string"?[C]:C}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const C=this._items[0];return C===""||C==='""'}get str(){var C;return(C=this._str)!==null&&C!==void 0?C:this._str=this._items.reduce((D,G)=>`${D}${G}`,"")}get names(){var C;return(C=this._names)!==null&&C!==void 0?C:this._names=this._items.reduce((D,G)=>(G instanceof r&&(D[G.str]=(D[G.str]||0)+1),D),{})}}e._Code=n,e.nil=new n("");function i(q,...C){const D=[q[0]];let G=0;for(;G<C.length;)u(D,C[G]),D.push(q[++G]);return new n(D)}e._=i;const a=new n("+");function l(q,...C){const D=[T(q[0])];let G=0;for(;G<C.length;)D.push(a),u(D,C[G]),D.push(a,T(q[++G]));return d(D),new n(D)}e.str=l;function u(q,C){C instanceof n?q.push(...C._items):C instanceof r?q.push(C):q.push(x(C))}e.addCodeArg=u;function d(q){let C=1;for(;C<q.length-1;){if(q[C]===a){const D=m(q[C-1],q[C+1]);if(D!==void 0){q.splice(C-1,3,D);continue}q[C++]="+"}C++}}function m(q,C){if(C==='""')return q;if(q==='""')return C;if(typeof q=="string")return C instanceof r||q[q.length-1]!=='"'?void 0:typeof C!="string"?`${q.slice(0,-1)}${C}"`:C[0]==='"'?q.slice(0,-1)+C.slice(1):void 0;if(typeof C=="string"&&C[0]==='"'&&!(q instanceof r))return`"${q}${C.slice(1)}`}function v(q,C){return C.emptyStr()?q:q.emptyStr()?C:l`${q}${C}`}e.strConcat=v;function x(q){return typeof q=="number"||typeof q=="boolean"||q===null?q:T(Array.isArray(q)?q.join(","):q)}function $(q){return new n(T(q))}e.stringify=$;function T(q){return JSON.stringify(q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=T;function A(q){return typeof q=="string"&&e.IDENTIFIER.test(q)?new n(`.${q}`):i`[${q}]`}e.getProperty=A;function L(q){if(typeof q=="string"&&e.IDENTIFIER.test(q))return new n(`${q}`);throw new Error(`CodeGen: invalid export name: ${q}, use explicit $id name mapping`)}e.getEsmExportName=L;function P(q){return new n(q.toString())}e.regexpCode=P})(code$1)),code$1}var scope={},hasRequiredScope;function requireScope(){return hasRequiredScope||(hasRequiredScope=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=requireCode$1();class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var n;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:m,parent:v}={}){this._names={},this._prefixes=m,this._parent=v}toName(m){return m instanceof t.Name?m:this.name(m)}name(m){return new t.Name(this._newName(m))}_newName(m){const v=this._names[m]||this._nameGroup(m);return`${m}${v.index++}`}_nameGroup(m){var v,x;if(!((x=(v=this._parent)===null||v===void 0?void 0:v._prefixes)===null||x===void 0)&&x.has(m)||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}e.Scope=i;class a extends t.Name{constructor(m,v){super(v),this.prefix=m}setValue(m,{property:v,itemIndex:x}){this.value=m,this.scopePath=(0,t._)`.${new t.Name(v)}[${x}]`}}e.ValueScopeName=a;const l=(0,t._)`\n`;class u extends i{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts={...m,_n:m.lines?l:t.nil}}get(){return this._scope}name(m){return new a(m,this._newName(m))}value(m,v){var x;if(v.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(m),{prefix:T}=$,A=(x=v.key)!==null&&x!==void 0?x:v.ref;let L=this._values[T];if(L){const C=L.get(A);if(C)return C}else L=this._values[T]=new Map;L.set(A,$);const P=this._scope[T]||(this._scope[T]=[]),q=P.length;return P[q]=v.ref,$.setValue(v,{property:T,itemIndex:q}),$}getValue(m,v){const x=this._values[m];if(x)return x.get(v)}scopeRefs(m,v=this._values){return this._reduceValues(v,x=>{if(x.scopePath===void 0)throw new Error(`CodeGen: name "${x}" has no value`);return(0,t._)`${m}${x.scopePath}`})}scopeCode(m=this._values,v,x){return this._reduceValues(m,$=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},v,x)}_reduceValues(m,v,x={},$){let T=t.nil;for(const A in m){const L=m[A];if(!L)continue;const P=x[A]=x[A]||new Map;L.forEach(q=>{if(P.has(q))return;P.set(q,n.Started);let C=v(q);if(C){const D=this.opts.es5?e.varKinds.var:e.varKinds.const;T=(0,t._)`${T}${D} ${q} = ${C};${this.opts._n}`}else if(C=$?.(q))T=(0,t._)`${T}${C}${this.opts._n}`;else throw new r(q);P.set(q,n.Completed)})}return T}}e.ValueScope=u})(scope)),scope}var hasRequiredCodegen;function requireCodegen(){return hasRequiredCodegen||(hasRequiredCodegen=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=requireCode$1(),r=requireScope();var n=requireCode$1();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var i=requireScope();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class a{optimizeNodes(){return this}optimizeNames(Q,ee){return this}}class l extends a{constructor(Q,ee,ve){super(),this.varKind=Q,this.name=ee,this.rhs=ve}render({es5:Q,_n:ee}){const ve=Q?r.varKinds.var:this.varKind,Ke=this.rhs===void 0?"":` = ${this.rhs}`;return`${ve} ${this.name}${Ke};`+ee}optimizeNames(Q,ee){if(Q[this.name.str])return this.rhs&&(this.rhs=Ar(this.rhs,Q,ee)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends a{constructor(Q,ee,ve){super(),this.lhs=Q,this.rhs=ee,this.sideEffects=ve}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,ee){if(!(this.lhs instanceof t.Name&&!Q[this.lhs.str]&&!this.sideEffects))return this.rhs=Ar(this.rhs,Q,ee),this}get names(){const Q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Ye(Q,this.rhs)}}class d extends u{constructor(Q,ee,ve,Ke){super(Q,ve,Ke),this.op=ee}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class m extends a{constructor(Q){super(),this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class v extends a{constructor(Q){super(),this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class x extends a{constructor(Q){super(),this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class $ extends a{constructor(Q){super(),this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,ee){return this.code=Ar(this.code,Q,ee),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class T extends a{constructor(Q=[]){super(),this.nodes=Q}render(Q){return this.nodes.reduce((ee,ve)=>ee+ve.render(Q),"")}optimizeNodes(){const{nodes:Q}=this;let ee=Q.length;for(;ee--;){const ve=Q[ee].optimizeNodes();Array.isArray(ve)?Q.splice(ee,1,...ve):ve?Q[ee]=ve:Q.splice(ee,1)}return Q.length>0?this:void 0}optimizeNames(Q,ee){const{nodes:ve}=this;let Ke=ve.length;for(;Ke--;){const Ve=ve[Ke];Ve.optimizeNames(Q,ee)||(hi(Q,Ve.names),ve.splice(Ke,1))}return ve.length>0?this:void 0}get names(){return this.nodes.reduce((Q,ee)=>Ne(Q,ee.names),{})}}class A extends T{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class L extends T{}class P extends A{}P.kind="else";class q extends A{constructor(Q,ee){super(ee),this.condition=Q}render(Q){let ee=`if(${this.condition})`+super.render(Q);return this.else&&(ee+="else "+this.else.render(Q)),ee}optimizeNodes(){super.optimizeNodes();const Q=this.condition;if(Q===!0)return this.nodes;let ee=this.else;if(ee){const ve=ee.optimizeNodes();ee=this.else=Array.isArray(ve)?new P(ve):ve}if(ee)return Q===!1?ee instanceof q?ee:ee.nodes:this.nodes.length?this:new q(gi(Q),ee instanceof q?[ee]:ee.nodes);if(!(Q===!1||!this.nodes.length))return this}optimizeNames(Q,ee){var ve;if(this.else=(ve=this.else)===null||ve===void 0?void 0:ve.optimizeNames(Q,ee),!!(super.optimizeNames(Q,ee)||this.else))return this.condition=Ar(this.condition,Q,ee),this}get names(){const Q=super.names;return Ye(Q,this.condition),this.else&&Ne(Q,this.else.names),Q}}q.kind="if";class C extends A{}C.kind="for";class D extends C{constructor(Q){super(),this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,ee){if(super.optimizeNames(Q,ee))return this.iteration=Ar(this.iteration,Q,ee),this}get names(){return Ne(super.names,this.iteration.names)}}class G extends C{constructor(Q,ee,ve,Ke){super(),this.varKind=Q,this.name=ee,this.from=ve,this.to=Ke}render(Q){const ee=Q.es5?r.varKinds.var:this.varKind,{name:ve,from:Ke,to:Ve}=this;return`for(${ee} ${ve}=${Ke}; ${ve}<${Ve}; ${ve}++)`+super.render(Q)}get names(){const Q=Ye(super.names,this.from);return Ye(Q,this.to)}}class B extends C{constructor(Q,ee,ve,Ke){super(),this.loop=Q,this.varKind=ee,this.name=ve,this.iterable=Ke}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,ee){if(super.optimizeNames(Q,ee))return this.iterable=Ar(this.iterable,Q,ee),this}get names(){return Ne(super.names,this.iterable.names)}}class H extends A{constructor(Q,ee,ve){super(),this.name=Q,this.args=ee,this.async=ve}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}H.kind="func";class X extends T{render(Q){return"return "+super.render(Q)}}X.kind="return";class re extends A{render(Q){let ee="try"+super.render(Q);return this.catch&&(ee+=this.catch.render(Q)),this.finally&&(ee+=this.finally.render(Q)),ee}optimizeNodes(){var Q,ee;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(ee=this.finally)===null||ee===void 0||ee.optimizeNodes(),this}optimizeNames(Q,ee){var ve,Ke;return super.optimizeNames(Q,ee),(ve=this.catch)===null||ve===void 0||ve.optimizeNames(Q,ee),(Ke=this.finally)===null||Ke===void 0||Ke.optimizeNames(Q,ee),this}get names(){const Q=super.names;return this.catch&&Ne(Q,this.catch.names),this.finally&&Ne(Q,this.finally.names),Q}}class pe extends A{constructor(Q){super(),this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}pe.kind="catch";class $e extends A{render(Q){return"finally"+super.render(Q)}}$e.kind="finally";class ke{constructor(Q,ee={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ee,_n:ee.lines?`
`:""},this._extScope=Q,this._scope=new r.Scope({parent:Q}),this._nodes=[new L]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,ee){const ve=this._extScope.value(Q,ee);return(this._values[ve.prefix]||(this._values[ve.prefix]=new Set)).add(ve),ve}getScopeValue(Q,ee){return this._extScope.getValue(Q,ee)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,ee,ve,Ke){const Ve=this._scope.toName(ee);return ve!==void 0&&Ke&&(this._constants[Ve.str]=ve),this._leafNode(new l(Q,Ve,ve)),Ve}const(Q,ee,ve){return this._def(r.varKinds.const,Q,ee,ve)}let(Q,ee,ve){return this._def(r.varKinds.let,Q,ee,ve)}var(Q,ee,ve){return this._def(r.varKinds.var,Q,ee,ve)}assign(Q,ee,ve){return this._leafNode(new u(Q,ee,ve))}add(Q,ee){return this._leafNode(new d(Q,e.operators.ADD,ee))}code(Q){return typeof Q=="function"?Q():Q!==t.nil&&this._leafNode(new $(Q)),this}object(...Q){const ee=["{"];for(const[ve,Ke]of Q)ee.length>1&&ee.push(","),ee.push(ve),(ve!==Ke||this.opts.es5)&&(ee.push(":"),(0,t.addCodeArg)(ee,Ke));return ee.push("}"),new t._Code(ee)}if(Q,ee,ve){if(this._blockNode(new q(Q)),ee&&ve)this.code(ee).else().code(ve).endIf();else if(ee)this.code(ee).endIf();else if(ve)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new q(Q))}else(){return this._elseNode(new P)}endIf(){return this._endBlockNode(q,P)}_for(Q,ee){return this._blockNode(Q),ee&&this.code(ee).endFor(),this}for(Q,ee){return this._for(new D(Q),ee)}forRange(Q,ee,ve,Ke,Ve=this.opts.es5?r.varKinds.var:r.varKinds.let){const at=this._scope.toName(Q);return this._for(new G(Ve,at,ee,ve),()=>Ke(at))}forOf(Q,ee,ve,Ke=r.varKinds.const){const Ve=this._scope.toName(Q);if(this.opts.es5){const at=ee instanceof t.Name?ee:this.var("_arr",ee);return this.forRange("_i",0,(0,t._)`${at}.length`,vr=>{this.var(Ve,(0,t._)`${at}[${vr}]`),ve(Ve)})}return this._for(new B("of",Ke,Ve,ee),()=>ve(Ve))}forIn(Q,ee,ve,Ke=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,(0,t._)`Object.keys(${ee})`,ve);const Ve=this._scope.toName(Q);return this._for(new B("in",Ke,Ve,ee),()=>ve(Ve))}endFor(){return this._endBlockNode(C)}label(Q){return this._leafNode(new m(Q))}break(Q){return this._leafNode(new v(Q))}return(Q){const ee=new X;if(this._blockNode(ee),this.code(Q),ee.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(Q,ee,ve){if(!ee&&!ve)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ke=new re;if(this._blockNode(Ke),this.code(Q),ee){const Ve=this.name("e");this._currNode=Ke.catch=new pe(Ve),ee(Ve)}return ve&&(this._currNode=Ke.finally=new $e,this.code(ve)),this._endBlockNode(pe,$e)}throw(Q){return this._leafNode(new x(Q))}block(Q,ee){return this._blockStarts.push(this._nodes.length),Q&&this.code(Q).endBlock(ee),this}endBlock(Q){const ee=this._blockStarts.pop();if(ee===void 0)throw new Error("CodeGen: not in self-balancing block");const ve=this._nodes.length-ee;if(ve<0||Q!==void 0&&ve!==Q)throw new Error(`CodeGen: wrong number of nodes: ${ve} vs ${Q} expected`);return this._nodes.length=ee,this}func(Q,ee=t.nil,ve,Ke){return this._blockNode(new H(Q,ee,ve)),Ke&&this.code(Ke).endFunc(),this}endFunc(){return this._endBlockNode(H)}optimize(Q=1){for(;Q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,ee){const ve=this._currNode;if(ve instanceof Q||ee&&ve instanceof ee)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ee?`${Q.kind}/${ee.kind}`:Q.kind}"`)}_elseNode(Q){const ee=this._currNode;if(!(ee instanceof q))throw new Error('CodeGen: "else" without "if"');return this._currNode=ee.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){const Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){const ee=this._nodes;ee[ee.length-1]=Q}}e.CodeGen=ke;function Ne(ye,Q){for(const ee in Q)ye[ee]=(ye[ee]||0)+(Q[ee]||0);return ye}function Ye(ye,Q){return Q instanceof t._CodeOrName?Ne(ye,Q.names):ye}function Ar(ye,Q,ee){if(ye instanceof t.Name)return ve(ye);if(!Ke(ye))return ye;return new t._Code(ye._items.reduce((Ve,at)=>(at instanceof t.Name&&(at=ve(at)),at instanceof t._Code?Ve.push(...at._items):Ve.push(at),Ve),[]));function ve(Ve){const at=ee[Ve.str];return at===void 0||Q[Ve.str]!==1?Ve:(delete Q[Ve.str],at)}function Ke(Ve){return Ve instanceof t._Code&&Ve._items.some(at=>at instanceof t.Name&&Q[at.str]===1&&ee[at.str]!==void 0)}}function hi(ye,Q){for(const ee in Q)ye[ee]=(ye[ee]||0)-(Q[ee]||0)}function gi(ye){return typeof ye=="boolean"||typeof ye=="number"||ye===null?!ye:(0,t._)`!${Re(ye)}`}e.not=gi;const Ui=ce(e.operators.AND);function ws(...ye){return ye.reduce(Ui)}e.and=ws;const Gi=ce(e.operators.OR);function Ee(...ye){return ye.reduce(Gi)}e.or=Ee;function ce(ye){return(Q,ee)=>Q===t.nil?ee:ee===t.nil?Q:(0,t._)`${Re(Q)} ${ye} ${Re(ee)}`}function Re(ye){return ye instanceof t.Name?ye:(0,t._)`(${ye})`}})(codegen)),codegen}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1,Object.defineProperty(util,"__esModule",{value:!0}),util.checkStrictMode=util.getErrorPath=util.Type=util.useFunc=util.setEvaluated=util.evaluatedPropsToName=util.mergeEvaluated=util.eachItem=util.unescapeJsonPointer=util.escapeJsonPointer=util.escapeFragment=util.unescapeFragment=util.schemaRefOrVal=util.schemaHasRulesButRef=util.schemaHasRules=util.checkUnknownRules=util.alwaysValidSchema=util.toHash=void 0;const e=requireCodegen(),t=requireCode$1();function r(B){const H={};for(const X of B)H[X]=!0;return H}util.toHash=r;function n(B,H){return typeof H=="boolean"?H:Object.keys(H).length===0?!0:(i(B,H),!a(H,B.self.RULES.all))}util.alwaysValidSchema=n;function i(B,H=B.schema){const{opts:X,self:re}=B;if(!X.strictSchema||typeof H=="boolean")return;const pe=re.RULES.keywords;for(const $e in H)pe[$e]||G(B,`unknown keyword: "${$e}"`)}util.checkUnknownRules=i;function a(B,H){if(typeof B=="boolean")return!B;for(const X in B)if(H[X])return!0;return!1}util.schemaHasRules=a;function l(B,H){if(typeof B=="boolean")return!B;for(const X in B)if(X!=="$ref"&&H.all[X])return!0;return!1}util.schemaHasRulesButRef=l;function u({topSchemaRef:B,schemaPath:H},X,re,pe){if(!pe){if(typeof X=="number"||typeof X=="boolean")return X;if(typeof X=="string")return(0,e._)`${X}`}return(0,e._)`${B}${H}${(0,e.getProperty)(re)}`}util.schemaRefOrVal=u;function d(B){return x(decodeURIComponent(B))}util.unescapeFragment=d;function m(B){return encodeURIComponent(v(B))}util.escapeFragment=m;function v(B){return typeof B=="number"?`${B}`:B.replace(/~/g,"~0").replace(/\//g,"~1")}util.escapeJsonPointer=v;function x(B){return B.replace(/~1/g,"/").replace(/~0/g,"~")}util.unescapeJsonPointer=x;function $(B,H){if(Array.isArray(B))for(const X of B)H(X);else H(B)}util.eachItem=$;function T({mergeNames:B,mergeToName:H,mergeValues:X,resultToName:re}){return(pe,$e,ke,Ne)=>{const Ye=ke===void 0?$e:ke instanceof e.Name?($e instanceof e.Name?B(pe,$e,ke):H(pe,$e,ke),ke):$e instanceof e.Name?(H(pe,ke,$e),$e):X($e,ke);return Ne===e.Name&&!(Ye instanceof e.Name)?re(pe,Ye):Ye}}util.mergeEvaluated={props:T({mergeNames:(B,H,X)=>B.if((0,e._)`${X} !== true && ${H} !== undefined`,()=>{B.if((0,e._)`${H} === true`,()=>B.assign(X,!0),()=>B.assign(X,(0,e._)`${X} || {}`).code((0,e._)`Object.assign(${X}, ${H})`))}),mergeToName:(B,H,X)=>B.if((0,e._)`${X} !== true`,()=>{H===!0?B.assign(X,!0):(B.assign(X,(0,e._)`${X} || {}`),L(B,X,H))}),mergeValues:(B,H)=>B===!0?!0:{...B,...H},resultToName:A}),items:T({mergeNames:(B,H,X)=>B.if((0,e._)`${X} !== true && ${H} !== undefined`,()=>B.assign(X,(0,e._)`${H} === true ? true : ${X} > ${H} ? ${X} : ${H}`)),mergeToName:(B,H,X)=>B.if((0,e._)`${X} !== true`,()=>B.assign(X,H===!0?!0:(0,e._)`${X} > ${H} ? ${X} : ${H}`)),mergeValues:(B,H)=>B===!0?!0:Math.max(B,H),resultToName:(B,H)=>B.var("items",H)})};function A(B,H){if(H===!0)return B.var("props",!0);const X=B.var("props",(0,e._)`{}`);return H!==void 0&&L(B,X,H),X}util.evaluatedPropsToName=A;function L(B,H,X){Object.keys(X).forEach(re=>B.assign((0,e._)`${H}${(0,e.getProperty)(re)}`,!0))}util.setEvaluated=L;const P={};function q(B,H){return B.scopeValue("func",{ref:H,code:P[H.code]||(P[H.code]=new t._Code(H.code))})}util.useFunc=q;var C;(function(B){B[B.Num=0]="Num",B[B.Str=1]="Str"})(C||(util.Type=C={}));function D(B,H,X){if(B instanceof e.Name){const re=H===C.Num;return X?re?(0,e._)`"[" + ${B} + "]"`:(0,e._)`"['" + ${B} + "']"`:re?(0,e._)`"/" + ${B}`:(0,e._)`"/" + ${B}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return X?(0,e.getProperty)(B).toString():"/"+v(B)}util.getErrorPath=D;function G(B,H,X=B.opts.strictSchema){if(X){if(H=`strict mode: ${H}`,X===!0)throw new Error(H);B.self.logger.warn(H)}}return util.checkStrictMode=G,util}var names={},hasRequiredNames;function requireNames(){if(hasRequiredNames)return names;hasRequiredNames=1,Object.defineProperty(names,"__esModule",{value:!0});const e=requireCodegen(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return names.default=t,names}var hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=requireCodegen(),r=requireUtil(),n=requireNames();e.keywordError={message:({keyword:P})=>(0,t.str)`must pass "${P}" keyword validation`},e.keyword$DataError={message:({keyword:P,schemaType:q})=>q?(0,t.str)`"${P}" keyword must be ${q} ($data)`:(0,t.str)`"${P}" keyword is invalid ($data)`};function i(P,q=e.keywordError,C,D){const{it:G}=P,{gen:B,compositeRule:H,allErrors:X}=G,re=x(P,q,C);D??(H||X)?d(B,re):m(G,(0,t._)`[${re}]`)}e.reportError=i;function a(P,q=e.keywordError,C){const{it:D}=P,{gen:G,compositeRule:B,allErrors:H}=D,X=x(P,q,C);d(G,X),B||H||m(D,n.default.vErrors)}e.reportExtraError=a;function l(P,q){P.assign(n.default.errors,q),P.if((0,t._)`${n.default.vErrors} !== null`,()=>P.if(q,()=>P.assign((0,t._)`${n.default.vErrors}.length`,q),()=>P.assign(n.default.vErrors,null)))}e.resetErrorsCount=l;function u({gen:P,keyword:q,schemaValue:C,data:D,errsCount:G,it:B}){if(G===void 0)throw new Error("ajv implementation error");const H=P.name("err");P.forRange("i",G,n.default.errors,X=>{P.const(H,(0,t._)`${n.default.vErrors}[${X}]`),P.if((0,t._)`${H}.instancePath === undefined`,()=>P.assign((0,t._)`${H}.instancePath`,(0,t.strConcat)(n.default.instancePath,B.errorPath))),P.assign((0,t._)`${H}.schemaPath`,(0,t.str)`${B.errSchemaPath}/${q}`),B.opts.verbose&&(P.assign((0,t._)`${H}.schema`,C),P.assign((0,t._)`${H}.data`,D))})}e.extendErrors=u;function d(P,q){const C=P.const("err",q);P.if((0,t._)`${n.default.vErrors} === null`,()=>P.assign(n.default.vErrors,(0,t._)`[${C}]`),(0,t._)`${n.default.vErrors}.push(${C})`),P.code((0,t._)`${n.default.errors}++`)}function m(P,q){const{gen:C,validateName:D,schemaEnv:G}=P;G.$async?C.throw((0,t._)`new ${P.ValidationError}(${q})`):(C.assign((0,t._)`${D}.errors`,q),C.return(!1))}const v={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function x(P,q,C){const{createErrors:D}=P.it;return D===!1?(0,t._)`{}`:$(P,q,C)}function $(P,q,C={}){const{gen:D,it:G}=P,B=[T(G,C),A(P,C)];return L(P,q,B),D.object(...B)}function T({errorPath:P},{instancePath:q}){const C=q?(0,t.str)`${P}${(0,r.getErrorPath)(q,r.Type.Str)}`:P;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,C)]}function A({keyword:P,it:{errSchemaPath:q}},{schemaPath:C,parentSchema:D}){let G=D?q:(0,t.str)`${q}/${P}`;return C&&(G=(0,t.str)`${G}${(0,r.getErrorPath)(C,r.Type.Str)}`),[v.schemaPath,G]}function L(P,{params:q,message:C},D){const{keyword:G,data:B,schemaValue:H,it:X}=P,{opts:re,propertyName:pe,topSchemaRef:$e,schemaPath:ke}=X;D.push([v.keyword,G],[v.params,typeof q=="function"?q(P):q||(0,t._)`{}`]),re.messages&&D.push([v.message,typeof C=="function"?C(P):C]),re.verbose&&D.push([v.schema,H],[v.parentSchema,(0,t._)`${$e}${ke}`],[n.default.data,B]),pe&&D.push([v.propertyName,pe])}})(errors)),errors}var hasRequiredBoolSchema;function requireBoolSchema(){if(hasRequiredBoolSchema)return boolSchema;hasRequiredBoolSchema=1,Object.defineProperty(boolSchema,"__esModule",{value:!0}),boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const e=requireErrors(),t=requireCodegen(),r=requireNames(),n={message:"boolean schema is false"};function i(u){const{gen:d,schema:m,validateName:v}=u;m===!1?l(u,!1):typeof m=="object"&&m.$async===!0?d.return(r.default.data):(d.assign((0,t._)`${v}.errors`,null),d.return(!0))}boolSchema.topBoolOrEmptySchema=i;function a(u,d){const{gen:m,schema:v}=u;v===!1?(m.var(d,!1),l(u)):m.var(d,!0)}boolSchema.boolOrEmptySchema=a;function l(u,d){const{gen:m,data:v}=u,x={gen:m,keyword:"false schema",data:v,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,e.reportError)(x,n,void 0,d)}return boolSchema}var dataType={},rules={},hasRequiredRules;function requireRules(){if(hasRequiredRules)return rules;hasRequiredRules=1,Object.defineProperty(rules,"__esModule",{value:!0}),rules.getRules=rules.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(i){return typeof i=="string"&&t.has(i)}rules.isJSONType=r;function n(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return rules.getRules=n,rules}var applicability={},hasRequiredApplicability;function requireApplicability(){if(hasRequiredApplicability)return applicability;hasRequiredApplicability=1,Object.defineProperty(applicability,"__esModule",{value:!0}),applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function e({schema:n,self:i},a){const l=i.RULES.types[a];return l&&l!==!0&&t(n,l)}applicability.schemaHasRulesForType=e;function t(n,i){return i.rules.some(a=>r(n,a))}applicability.shouldUseGroup=t;function r(n,i){var a;return n[i.keyword]!==void 0||((a=i.definition.implements)===null||a===void 0?void 0:a.some(l=>n[l]!==void 0))}return applicability.shouldUseRule=r,applicability}var hasRequiredDataType;function requireDataType(){if(hasRequiredDataType)return dataType;hasRequiredDataType=1,Object.defineProperty(dataType,"__esModule",{value:!0}),dataType.reportTypeError=dataType.checkDataTypes=dataType.checkDataType=dataType.coerceAndCheckDataType=dataType.getJSONTypes=dataType.getSchemaTypes=dataType.DataType=void 0;const e=requireRules(),t=requireApplicability(),r=requireErrors(),n=requireCodegen(),i=requireUtil();var a;(function(C){C[C.Correct=0]="Correct",C[C.Wrong=1]="Wrong"})(a||(dataType.DataType=a={}));function l(C){const D=u(C.type);if(D.includes("null")){if(C.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!D.length&&C.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');C.nullable===!0&&D.push("null")}return D}dataType.getSchemaTypes=l;function u(C){const D=Array.isArray(C)?C:C?[C]:[];if(D.every(e.isJSONType))return D;throw new Error("type must be JSONType or JSONType[]: "+D.join(","))}dataType.getJSONTypes=u;function d(C,D){const{gen:G,data:B,opts:H}=C,X=v(D,H.coerceTypes),re=D.length>0&&!(X.length===0&&D.length===1&&(0,t.schemaHasRulesForType)(C,D[0]));if(re){const pe=A(D,B,H.strictNumbers,a.Wrong);G.if(pe,()=>{X.length?x(C,D,X):P(C)})}return re}dataType.coerceAndCheckDataType=d;const m=new Set(["string","number","integer","boolean","null"]);function v(C,D){return D?C.filter(G=>m.has(G)||D==="array"&&G==="array"):[]}function x(C,D,G){const{gen:B,data:H,opts:X}=C,re=B.let("dataType",(0,n._)`typeof ${H}`),pe=B.let("coerced",(0,n._)`undefined`);X.coerceTypes==="array"&&B.if((0,n._)`${re} == 'object' && Array.isArray(${H}) && ${H}.length == 1`,()=>B.assign(H,(0,n._)`${H}[0]`).assign(re,(0,n._)`typeof ${H}`).if(A(D,H,X.strictNumbers),()=>B.assign(pe,H))),B.if((0,n._)`${pe} !== undefined`);for(const ke of G)(m.has(ke)||ke==="array"&&X.coerceTypes==="array")&&$e(ke);B.else(),P(C),B.endIf(),B.if((0,n._)`${pe} !== undefined`,()=>{B.assign(H,pe),$(C,pe)});function $e(ke){switch(ke){case"string":B.elseIf((0,n._)`${re} == "number" || ${re} == "boolean"`).assign(pe,(0,n._)`"" + ${H}`).elseIf((0,n._)`${H} === null`).assign(pe,(0,n._)`""`);return;case"number":B.elseIf((0,n._)`${re} == "boolean" || ${H} === null
              || (${re} == "string" && ${H} && ${H} == +${H})`).assign(pe,(0,n._)`+${H}`);return;case"integer":B.elseIf((0,n._)`${re} === "boolean" || ${H} === null
              || (${re} === "string" && ${H} && ${H} == +${H} && !(${H} % 1))`).assign(pe,(0,n._)`+${H}`);return;case"boolean":B.elseIf((0,n._)`${H} === "false" || ${H} === 0 || ${H} === null`).assign(pe,!1).elseIf((0,n._)`${H} === "true" || ${H} === 1`).assign(pe,!0);return;case"null":B.elseIf((0,n._)`${H} === "" || ${H} === 0 || ${H} === false`),B.assign(pe,null);return;case"array":B.elseIf((0,n._)`${re} === "string" || ${re} === "number"
              || ${re} === "boolean" || ${H} === null`).assign(pe,(0,n._)`[${H}]`)}}}function $({gen:C,parentData:D,parentDataProperty:G},B){C.if((0,n._)`${D} !== undefined`,()=>C.assign((0,n._)`${D}[${G}]`,B))}function T(C,D,G,B=a.Correct){const H=B===a.Correct?n.operators.EQ:n.operators.NEQ;let X;switch(C){case"null":return(0,n._)`${D} ${H} null`;case"array":X=(0,n._)`Array.isArray(${D})`;break;case"object":X=(0,n._)`${D} && typeof ${D} == "object" && !Array.isArray(${D})`;break;case"integer":X=re((0,n._)`!(${D} % 1) && !isNaN(${D})`);break;case"number":X=re();break;default:return(0,n._)`typeof ${D} ${H} ${C}`}return B===a.Correct?X:(0,n.not)(X);function re(pe=n.nil){return(0,n.and)((0,n._)`typeof ${D} == "number"`,pe,G?(0,n._)`isFinite(${D})`:n.nil)}}dataType.checkDataType=T;function A(C,D,G,B){if(C.length===1)return T(C[0],D,G,B);let H;const X=(0,i.toHash)(C);if(X.array&&X.object){const re=(0,n._)`typeof ${D} != "object"`;H=X.null?re:(0,n._)`!${D} || ${re}`,delete X.null,delete X.array,delete X.object}else H=n.nil;X.number&&delete X.integer;for(const re in X)H=(0,n.and)(H,T(re,D,G,B));return H}dataType.checkDataTypes=A;const L={message:({schema:C})=>`must be ${C}`,params:({schema:C,schemaValue:D})=>typeof C=="string"?(0,n._)`{type: ${C}}`:(0,n._)`{type: ${D}}`};function P(C){const D=q(C);(0,r.reportError)(D,L)}dataType.reportTypeError=P;function q(C){const{gen:D,data:G,schema:B}=C,H=(0,i.schemaRefOrVal)(C,B,"type");return{gen:D,keyword:"type",data:G,schema:B.type,schemaCode:H,schemaValue:H,parentSchema:B,params:{},it:C}}return dataType}var defaults={},hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults;hasRequiredDefaults=1,Object.defineProperty(defaults,"__esModule",{value:!0}),defaults.assignDefaults=void 0;const e=requireCodegen(),t=requireUtil();function r(i,a){const{properties:l,items:u}=i.schema;if(a==="object"&&l)for(const d in l)n(i,d,l[d].default);else a==="array"&&Array.isArray(u)&&u.forEach((d,m)=>n(i,m,d.default))}defaults.assignDefaults=r;function n(i,a,l){const{gen:u,compositeRule:d,data:m,opts:v}=i;if(l===void 0)return;const x=(0,e._)`${m}${(0,e.getProperty)(a)}`;if(d){(0,t.checkStrictMode)(i,`default is ignored for: ${x}`);return}let $=(0,e._)`${x} === undefined`;v.useDefaults==="empty"&&($=(0,e._)`${$} || ${x} === null || ${x} === ""`),u.if($,(0,e._)`${x} = ${(0,e.stringify)(l)}`)}return defaults}var keyword={},code={},hasRequiredCode;function requireCode(){if(hasRequiredCode)return code;hasRequiredCode=1,Object.defineProperty(code,"__esModule",{value:!0}),code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const e=requireCodegen(),t=requireUtil(),r=requireNames(),n=requireUtil();function i(C,D){const{gen:G,data:B,it:H}=C;G.if(v(G,B,D,H.opts.ownProperties),()=>{C.setParams({missingProperty:(0,e._)`${D}`},!0),C.error()})}code.checkReportMissingProp=i;function a({gen:C,data:D,it:{opts:G}},B,H){return(0,e.or)(...B.map(X=>(0,e.and)(v(C,D,X,G.ownProperties),(0,e._)`${H} = ${X}`)))}code.checkMissingProp=a;function l(C,D){C.setParams({missingProperty:D},!0),C.error()}code.reportMissingProp=l;function u(C){return C.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=u;function d(C,D,G){return(0,e._)`${u(C)}.call(${D}, ${G})`}code.isOwnProperty=d;function m(C,D,G,B){const H=(0,e._)`${D}${(0,e.getProperty)(G)} !== undefined`;return B?(0,e._)`${H} && ${d(C,D,G)}`:H}code.propertyInData=m;function v(C,D,G,B){const H=(0,e._)`${D}${(0,e.getProperty)(G)} === undefined`;return B?(0,e.or)(H,(0,e.not)(d(C,D,G))):H}code.noPropertyInData=v;function x(C){return C?Object.keys(C).filter(D=>D!=="__proto__"):[]}code.allSchemaProperties=x;function $(C,D){return x(D).filter(G=>!(0,t.alwaysValidSchema)(C,D[G]))}code.schemaProperties=$;function T({schemaCode:C,data:D,it:{gen:G,topSchemaRef:B,schemaPath:H,errorPath:X},it:re},pe,$e,ke){const Ne=ke?(0,e._)`${C}, ${D}, ${B}${H}`:D,Ye=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,X)],[r.default.parentData,re.parentData],[r.default.parentDataProperty,re.parentDataProperty],[r.default.rootData,r.default.rootData]];re.opts.dynamicRef&&Ye.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Ar=(0,e._)`${Ne}, ${G.object(...Ye)}`;return $e!==e.nil?(0,e._)`${pe}.call(${$e}, ${Ar})`:(0,e._)`${pe}(${Ar})`}code.callValidateCode=T;const A=(0,e._)`new RegExp`;function L({gen:C,it:{opts:D}},G){const B=D.unicodeRegExp?"u":"",{regExp:H}=D.code,X=H(G,B);return C.scopeValue("pattern",{key:X.toString(),ref:X,code:(0,e._)`${H.code==="new RegExp"?A:(0,n.useFunc)(C,H)}(${G}, ${B})`})}code.usePattern=L;function P(C){const{gen:D,data:G,keyword:B,it:H}=C,X=D.name("valid");if(H.allErrors){const pe=D.let("valid",!0);return re(()=>D.assign(pe,!1)),pe}return D.var(X,!0),re(()=>D.break()),X;function re(pe){const $e=D.const("len",(0,e._)`${G}.length`);D.forRange("i",0,$e,ke=>{C.subschema({keyword:B,dataProp:ke,dataPropType:t.Type.Num},X),D.if((0,e.not)(X),pe)})}}code.validateArray=P;function q(C){const{gen:D,schema:G,keyword:B,it:H}=C;if(!Array.isArray(G))throw new Error("ajv implementation error");if(G.some(pe=>(0,t.alwaysValidSchema)(H,pe))&&!H.opts.unevaluated)return;const X=D.let("valid",!1),re=D.name("_valid");D.block(()=>G.forEach((pe,$e)=>{const ke=C.subschema({keyword:B,schemaProp:$e,compositeRule:!0},re);D.assign(X,(0,e._)`${X} || ${re}`),C.mergeValidEvaluated(ke,re)||D.if((0,e.not)(X))})),C.result(X,()=>C.reset(),()=>C.error(!0))}return code.validateUnion=q,code}var hasRequiredKeyword;function requireKeyword(){if(hasRequiredKeyword)return keyword;hasRequiredKeyword=1,Object.defineProperty(keyword,"__esModule",{value:!0}),keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const e=requireCodegen(),t=requireNames(),r=requireCode(),n=requireErrors();function i($,T){const{gen:A,keyword:L,schema:P,parentSchema:q,it:C}=$,D=T.macro.call(C.self,P,q,C),G=m(A,L,D);C.opts.validateSchema!==!1&&C.self.validateSchema(D,!0);const B=A.name("valid");$.subschema({schema:D,schemaPath:e.nil,errSchemaPath:`${C.errSchemaPath}/${L}`,topSchemaRef:G,compositeRule:!0},B),$.pass(B,()=>$.error(!0))}keyword.macroKeywordCode=i;function a($,T){var A;const{gen:L,keyword:P,schema:q,parentSchema:C,$data:D,it:G}=$;d(G,T);const B=!D&&T.compile?T.compile.call(G.self,q,C,G):T.validate,H=m(L,P,B),X=L.let("valid");$.block$data(X,re),$.ok((A=T.valid)!==null&&A!==void 0?A:X);function re(){if(T.errors===!1)ke(),T.modifying&&l($),Ne(()=>$.error());else{const Ye=T.async?pe():$e();T.modifying&&l($),Ne(()=>u($,Ye))}}function pe(){const Ye=L.let("ruleErrs",null);return L.try(()=>ke((0,e._)`await `),Ar=>L.assign(X,!1).if((0,e._)`${Ar} instanceof ${G.ValidationError}`,()=>L.assign(Ye,(0,e._)`${Ar}.errors`),()=>L.throw(Ar))),Ye}function $e(){const Ye=(0,e._)`${H}.errors`;return L.assign(Ye,null),ke(e.nil),Ye}function ke(Ye=T.async?(0,e._)`await `:e.nil){const Ar=G.opts.passContext?t.default.this:t.default.self,hi=!("compile"in T&&!D||T.schema===!1);L.assign(X,(0,e._)`${Ye}${(0,r.callValidateCode)($,H,Ar,hi)}`,T.modifying)}function Ne(Ye){var Ar;L.if((0,e.not)((Ar=T.valid)!==null&&Ar!==void 0?Ar:X),Ye)}}keyword.funcKeywordCode=a;function l($){const{gen:T,data:A,it:L}=$;T.if(L.parentData,()=>T.assign(A,(0,e._)`${L.parentData}[${L.parentDataProperty}]`))}function u($,T){const{gen:A}=$;A.if((0,e._)`Array.isArray(${T})`,()=>{A.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${T} : ${t.default.vErrors}.concat(${T})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)($)},()=>$.error())}function d({schemaEnv:$},T){if(T.async&&!$.$async)throw new Error("async keyword in sync schema")}function m($,T,A){if(A===void 0)throw new Error(`keyword "${T}" failed to compile`);return $.scopeValue("keyword",typeof A=="function"?{ref:A}:{ref:A,code:(0,e.stringify)(A)})}function v($,T,A=!1){return!T.length||T.some(L=>L==="array"?Array.isArray($):L==="object"?$&&typeof $=="object"&&!Array.isArray($):typeof $==L||A&&typeof $>"u")}keyword.validSchemaType=v;function x({schema:$,opts:T,self:A,errSchemaPath:L},P,q){if(Array.isArray(P.keyword)?!P.keyword.includes(q):P.keyword!==q)throw new Error("ajv implementation error");const C=P.dependencies;if(C?.some(D=>!Object.prototype.hasOwnProperty.call($,D)))throw new Error(`parent schema must have dependencies of ${q}: ${C.join(",")}`);if(P.validateSchema&&!P.validateSchema($[q])){const D=`keyword "${q}" value is invalid at path "${L}": `+A.errorsText(P.validateSchema.errors);if(T.validateSchema==="log")A.logger.error(D);else throw new Error(D)}}return keyword.validateKeywordUsage=x,keyword}var subschema={},hasRequiredSubschema;function requireSubschema(){if(hasRequiredSubschema)return subschema;hasRequiredSubschema=1,Object.defineProperty(subschema,"__esModule",{value:!0}),subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const e=requireCodegen(),t=requireUtil();function r(a,{keyword:l,schemaProp:u,schema:d,schemaPath:m,errSchemaPath:v,topSchemaRef:x}){if(l!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const $=a.schema[l];return u===void 0?{schema:$,schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(l)}`,errSchemaPath:`${a.errSchemaPath}/${l}`}:{schema:$[u],schemaPath:(0,e._)`${a.schemaPath}${(0,e.getProperty)(l)}${(0,e.getProperty)(u)}`,errSchemaPath:`${a.errSchemaPath}/${l}/${(0,t.escapeFragment)(u)}`}}if(d!==void 0){if(m===void 0||v===void 0||x===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:m,topSchemaRef:x,errSchemaPath:v}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=r;function n(a,l,{dataProp:u,dataPropType:d,data:m,dataTypes:v,propertyName:x}){if(m!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:$}=l;if(u!==void 0){const{errorPath:A,dataPathArr:L,opts:P}=l,q=$.let("data",(0,e._)`${l.data}${(0,e.getProperty)(u)}`,!0);T(q),a.errorPath=(0,e.str)`${A}${(0,t.getErrorPath)(u,d,P.jsPropertySyntax)}`,a.parentDataProperty=(0,e._)`${u}`,a.dataPathArr=[...L,a.parentDataProperty]}if(m!==void 0){const A=m instanceof e.Name?m:$.let("data",m,!0);T(A),x!==void 0&&(a.propertyName=x)}v&&(a.dataTypes=v);function T(A){a.data=A,a.dataLevel=l.dataLevel+1,a.dataTypes=[],l.definedProperties=new Set,a.parentData=l.data,a.dataNames=[...l.dataNames,A]}}subschema.extendSubschemaData=n;function i(a,{jtdDiscriminator:l,jtdMetadata:u,compositeRule:d,createErrors:m,allErrors:v}){d!==void 0&&(a.compositeRule=d),m!==void 0&&(a.createErrors=m),v!==void 0&&(a.allErrors=v),a.jtdDiscriminator=l,a.jtdMetadata=u}return subschema.extendSubschemaMode=i,subschema}var resolve={},fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var l=a[i];if(!e(t[l],r[l]))return!1}return!0}return t!==t&&r!==r}),fastDeepEqual}var jsonSchemaTraverse={exports:{}},hasRequiredJsonSchemaTraverse;function requireJsonSchemaTraverse(){if(hasRequiredJsonSchemaTraverse)return jsonSchemaTraverse.exports;hasRequiredJsonSchemaTraverse=1;var e=jsonSchemaTraverse.exports=function(n,i,a){typeof i=="function"&&(a=i,i={}),a=i.cb||a;var l=typeof a=="function"?a:a.pre||function(){},u=a.post||function(){};t(i,l,u,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,i,a,l,u,d,m,v,x,$){if(l&&typeof l=="object"&&!Array.isArray(l)){i(l,u,d,m,v,x,$);for(var T in l){var A=l[T];if(Array.isArray(A)){if(T in e.arrayKeywords)for(var L=0;L<A.length;L++)t(n,i,a,A[L],u+"/"+T+"/"+L,d,u,T,l,L)}else if(T in e.propsKeywords){if(A&&typeof A=="object")for(var P in A)t(n,i,a,A[P],u+"/"+T+"/"+r(P),d,u,T,l,P)}else(T in e.keywords||n.allKeys&&!(T in e.skipKeywords))&&t(n,i,a,A,u+"/"+T,d,u,T,l)}a(l,u,d,m,v,x,$)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse.exports}var hasRequiredResolve;function requireResolve(){if(hasRequiredResolve)return resolve;hasRequiredResolve=1,Object.defineProperty(resolve,"__esModule",{value:!0}),resolve.getSchemaRefs=resolve.resolveUrl=resolve.normalizeId=resolve._getFullPath=resolve.getFullPath=resolve.inlineRef=void 0;const e=requireUtil(),t=requireFastDeepEqual(),r=requireJsonSchemaTraverse(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(L,P=!0){return typeof L=="boolean"?!0:P===!0?!l(L):P?u(L)<=P:!1}resolve.inlineRef=i;const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(L){for(const P in L){if(a.has(P))return!0;const q=L[P];if(Array.isArray(q)&&q.some(l)||typeof q=="object"&&l(q))return!0}return!1}function u(L){let P=0;for(const q in L)if(q==="$ref"||(P++,!n.has(q)&&(typeof L[q]=="object"&&(0,e.eachItem)(L[q],C=>P+=u(C)),P===1/0)))return 1/0;return P}function d(L,P="",q){q!==!1&&(P=x(P));const C=L.parse(P);return m(L,C)}resolve.getFullPath=d;function m(L,P){return L.serialize(P).split("#")[0]+"#"}resolve._getFullPath=m;const v=/#\/?$/;function x(L){return L?L.replace(v,""):""}resolve.normalizeId=x;function $(L,P,q){return q=x(q),L.resolve(P,q)}resolve.resolveUrl=$;const T=/^[a-z_][-a-z0-9._]*$/i;function A(L,P){if(typeof L=="boolean")return{};const{schemaId:q,uriResolver:C}=this.opts,D=x(L[q]||P),G={"":D},B=d(C,D,!1),H={},X=new Set;return r(L,{allKeys:!0},($e,ke,Ne,Ye)=>{if(Ye===void 0)return;const Ar=B+ke;let hi=G[Ye];typeof $e[q]=="string"&&(hi=gi.call(this,$e[q])),Ui.call(this,$e.$anchor),Ui.call(this,$e.$dynamicAnchor),G[ke]=hi;function gi(ws){const Gi=this.opts.uriResolver.resolve;if(ws=x(hi?Gi(hi,ws):ws),X.has(ws))throw pe(ws);X.add(ws);let Ee=this.refs[ws];return typeof Ee=="string"&&(Ee=this.refs[Ee]),typeof Ee=="object"?re($e,Ee.schema,ws):ws!==x(Ar)&&(ws[0]==="#"?(re($e,H[ws],ws),H[ws]=$e):this.refs[ws]=Ar),ws}function Ui(ws){if(typeof ws=="string"){if(!T.test(ws))throw new Error(`invalid anchor "${ws}"`);gi.call(this,`#${ws}`)}}}),H;function re($e,ke,Ne){if(ke!==void 0&&!t($e,ke))throw pe(Ne)}function pe($e){return new Error(`reference "${$e}" resolves to more than one schema`)}}return resolve.getSchemaRefs=A,resolve}var hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate;hasRequiredValidate=1,Object.defineProperty(validate,"__esModule",{value:!0}),validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const e=requireBoolSchema(),t=requireDataType(),r=requireApplicability(),n=requireDataType(),i=requireDefaults(),a=requireKeyword(),l=requireSubschema(),u=requireCodegen(),d=requireNames(),m=requireResolve(),v=requireUtil(),x=requireErrors();function $(se){if(B(se)&&(X(se),G(se))){P(se);return}T(se,()=>(0,e.topBoolOrEmptySchema)(se))}validate.validateFunctionCode=$;function T({gen:se,validateName:ae,schema:Se,schemaEnv:De,opts:bs},Je){bs.code.es5?se.func(ae,(0,u._)`${d.default.data}, ${d.default.valCxt}`,De.$async,()=>{se.code((0,u._)`"use strict"; ${C(Se,bs)}`),L(se,bs),se.code(Je)}):se.func(ae,(0,u._)`${d.default.data}, ${A(bs)}`,De.$async,()=>se.code(C(Se,bs)).code(Je))}function A(se){return(0,u._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${se.dynamicRef?(0,u._)`, ${d.default.dynamicAnchors}={}`:u.nil}}={}`}function L(se,ae){se.if(d.default.valCxt,()=>{se.var(d.default.instancePath,(0,u._)`${d.default.valCxt}.${d.default.instancePath}`),se.var(d.default.parentData,(0,u._)`${d.default.valCxt}.${d.default.parentData}`),se.var(d.default.parentDataProperty,(0,u._)`${d.default.valCxt}.${d.default.parentDataProperty}`),se.var(d.default.rootData,(0,u._)`${d.default.valCxt}.${d.default.rootData}`),ae.dynamicRef&&se.var(d.default.dynamicAnchors,(0,u._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{se.var(d.default.instancePath,(0,u._)`""`),se.var(d.default.parentData,(0,u._)`undefined`),se.var(d.default.parentDataProperty,(0,u._)`undefined`),se.var(d.default.rootData,d.default.data),ae.dynamicRef&&se.var(d.default.dynamicAnchors,(0,u._)`{}`)})}function P(se){const{schema:ae,opts:Se,gen:De}=se;T(se,()=>{Se.$comment&&ae.$comment&&Ye(se),$e(se),De.let(d.default.vErrors,null),De.let(d.default.errors,0),Se.unevaluated&&q(se),re(se),Ar(se)})}function q(se){const{gen:ae,validateName:Se}=se;se.evaluated=ae.const("evaluated",(0,u._)`${Se}.evaluated`),ae.if((0,u._)`${se.evaluated}.dynamicProps`,()=>ae.assign((0,u._)`${se.evaluated}.props`,(0,u._)`undefined`)),ae.if((0,u._)`${se.evaluated}.dynamicItems`,()=>ae.assign((0,u._)`${se.evaluated}.items`,(0,u._)`undefined`))}function C(se,ae){const Se=typeof se=="object"&&se[ae.schemaId];return Se&&(ae.code.source||ae.code.process)?(0,u._)`/*# sourceURL=${Se} */`:u.nil}function D(se,ae){if(B(se)&&(X(se),G(se))){H(se,ae);return}(0,e.boolOrEmptySchema)(se,ae)}function G({schema:se,self:ae}){if(typeof se=="boolean")return!se;for(const Se in se)if(ae.RULES.all[Se])return!0;return!1}function B(se){return typeof se.schema!="boolean"}function H(se,ae){const{schema:Se,gen:De,opts:bs}=se;bs.$comment&&Se.$comment&&Ye(se),ke(se),Ne(se);const Je=De.const("_errs",d.default.errors);re(se,Je),De.var(ae,(0,u._)`${Je} === ${d.default.errors}`)}function X(se){(0,v.checkUnknownRules)(se),pe(se)}function re(se,ae){if(se.opts.jtd)return gi(se,[],!1,ae);const Se=(0,t.getSchemaTypes)(se.schema),De=(0,t.coerceAndCheckDataType)(se,Se);gi(se,Se,!De,ae)}function pe(se){const{schema:ae,errSchemaPath:Se,opts:De,self:bs}=se;ae.$ref&&De.ignoreKeywordsWithRef&&(0,v.schemaHasRulesButRef)(ae,bs.RULES)&&bs.logger.warn(`$ref: keywords ignored in schema at path "${Se}"`)}function $e(se){const{schema:ae,opts:Se}=se;ae.default!==void 0&&Se.useDefaults&&Se.strictSchema&&(0,v.checkStrictMode)(se,"default is ignored in the schema root")}function ke(se){const ae=se.schema[se.opts.schemaId];ae&&(se.baseId=(0,m.resolveUrl)(se.opts.uriResolver,se.baseId,ae))}function Ne(se){if(se.schema.$async&&!se.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ye({gen:se,schemaEnv:ae,schema:Se,errSchemaPath:De,opts:bs}){const Je=Se.$comment;if(bs.$comment===!0)se.code((0,u._)`${d.default.self}.logger.log(${Je})`);else if(typeof bs.$comment=="function"){const pi=(0,u.str)`${De}/$comment`,Os=se.scopeValue("root",{ref:ae.root});se.code((0,u._)`${d.default.self}.opts.$comment(${Je}, ${pi}, ${Os}.schema)`)}}function Ar(se){const{gen:ae,schemaEnv:Se,validateName:De,ValidationError:bs,opts:Je}=se;Se.$async?ae.if((0,u._)`${d.default.errors} === 0`,()=>ae.return(d.default.data),()=>ae.throw((0,u._)`new ${bs}(${d.default.vErrors})`)):(ae.assign((0,u._)`${De}.errors`,d.default.vErrors),Je.unevaluated&&hi(se),ae.return((0,u._)`${d.default.errors} === 0`))}function hi({gen:se,evaluated:ae,props:Se,items:De}){Se instanceof u.Name&&se.assign((0,u._)`${ae}.props`,Se),De instanceof u.Name&&se.assign((0,u._)`${ae}.items`,De)}function gi(se,ae,Se,De){const{gen:bs,schema:Je,data:pi,allErrors:Os,opts:ji,self:ua}=se,{RULES:da}=ua;if(Je.$ref&&(ji.ignoreKeywordsWithRef||!(0,v.schemaHasRulesButRef)(Je,da))){bs.block(()=>Ke(se,"$ref",da.all.$ref.definition));return}ji.jtd||ws(se,ae),bs.block(()=>{for(const ca of da.rules)ga(ca);ga(da.post)});function ga(ca){(0,r.shouldUseGroup)(Je,ca)&&(ca.type?(bs.if((0,n.checkDataType)(ca.type,pi,ji.strictNumbers)),Ui(se,ca),ae.length===1&&ae[0]===ca.type&&Se&&(bs.else(),(0,n.reportTypeError)(se)),bs.endIf()):Ui(se,ca),Os||bs.if((0,u._)`${d.default.errors} === ${De||0}`))}}function Ui(se,ae){const{gen:Se,schema:De,opts:{useDefaults:bs}}=se;bs&&(0,i.assignDefaults)(se,ae.type),Se.block(()=>{for(const Je of ae.rules)(0,r.shouldUseRule)(De,Je)&&Ke(se,Je.keyword,Je.definition,ae.type)})}function ws(se,ae){se.schemaEnv.meta||!se.opts.strictTypes||(Gi(se,ae),se.opts.allowUnionTypes||Ee(se,ae),ce(se,se.dataTypes))}function Gi(se,ae){if(ae.length){if(!se.dataTypes.length){se.dataTypes=ae;return}ae.forEach(Se=>{ye(se.dataTypes,Se)||ee(se,`type "${Se}" not allowed by context "${se.dataTypes.join(",")}"`)}),Q(se,ae)}}function Ee(se,ae){ae.length>1&&!(ae.length===2&&ae.includes("null"))&&ee(se,"use allowUnionTypes to allow union type keyword")}function ce(se,ae){const Se=se.self.RULES.all;for(const De in Se){const bs=Se[De];if(typeof bs=="object"&&(0,r.shouldUseRule)(se.schema,bs)){const{type:Je}=bs.definition;Je.length&&!Je.some(pi=>Re(ae,pi))&&ee(se,`missing type "${Je.join(",")}" for keyword "${De}"`)}}}function Re(se,ae){return se.includes(ae)||ae==="number"&&se.includes("integer")}function ye(se,ae){return se.includes(ae)||ae==="integer"&&se.includes("number")}function Q(se,ae){const Se=[];for(const De of se.dataTypes)ye(ae,De)?Se.push(De):ae.includes("integer")&&De==="number"&&Se.push("integer");se.dataTypes=Se}function ee(se,ae){const Se=se.schemaEnv.baseId+se.errSchemaPath;ae+=` at "${Se}" (strictTypes)`,(0,v.checkStrictMode)(se,ae,se.opts.strictTypes)}class ve{constructor(ae,Se,De){if((0,a.validateKeywordUsage)(ae,Se,De),this.gen=ae.gen,this.allErrors=ae.allErrors,this.keyword=De,this.data=ae.data,this.schema=ae.schema[De],this.$data=Se.$data&&ae.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,v.schemaRefOrVal)(ae,this.schema,De,this.$data),this.schemaType=Se.schemaType,this.parentSchema=ae.schema,this.params={},this.it=ae,this.def=Se,this.$data)this.schemaCode=ae.gen.const("vSchema",vr(this.$data,ae));else if(this.schemaCode=this.schemaValue,!(0,a.validSchemaType)(this.schema,Se.schemaType,Se.allowUndefined))throw new Error(`${De} value must be ${JSON.stringify(Se.schemaType)}`);("code"in Se?Se.trackErrors:Se.errors!==!1)&&(this.errsCount=ae.gen.const("_errs",d.default.errors))}result(ae,Se,De){this.failResult((0,u.not)(ae),Se,De)}failResult(ae,Se,De){this.gen.if(ae),De?De():this.error(),Se?(this.gen.else(),Se(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(ae,Se){this.failResult((0,u.not)(ae),void 0,Se)}fail(ae){if(ae===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(ae),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(ae){if(!this.$data)return this.fail(ae);const{schemaCode:Se}=this;this.fail((0,u._)`${Se} !== undefined && (${(0,u.or)(this.invalid$data(),ae)})`)}error(ae,Se,De){if(Se){this.setParams(Se),this._error(ae,De),this.setParams({});return}this._error(ae,De)}_error(ae,Se){(ae?x.reportExtraError:x.reportError)(this,this.def.error,Se)}$dataError(){(0,x.reportError)(this,this.def.$dataError||x.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,x.resetErrorsCount)(this.gen,this.errsCount)}ok(ae){this.allErrors||this.gen.if(ae)}setParams(ae,Se){Se?Object.assign(this.params,ae):this.params=ae}block$data(ae,Se,De=u.nil){this.gen.block(()=>{this.check$data(ae,De),Se()})}check$data(ae=u.nil,Se=u.nil){if(!this.$data)return;const{gen:De,schemaCode:bs,schemaType:Je,def:pi}=this;De.if((0,u.or)((0,u._)`${bs} === undefined`,Se)),ae!==u.nil&&De.assign(ae,!0),(Je.length||pi.validateSchema)&&(De.elseIf(this.invalid$data()),this.$dataError(),ae!==u.nil&&De.assign(ae,!1)),De.else()}invalid$data(){const{gen:ae,schemaCode:Se,schemaType:De,def:bs,it:Je}=this;return(0,u.or)(pi(),Os());function pi(){if(De.length){if(!(Se instanceof u.Name))throw new Error("ajv implementation error");const ji=Array.isArray(De)?De:[De];return(0,u._)`${(0,n.checkDataTypes)(ji,Se,Je.opts.strictNumbers,n.DataType.Wrong)}`}return u.nil}function Os(){if(bs.validateSchema){const ji=ae.scopeValue("validate$data",{ref:bs.validateSchema});return(0,u._)`!${ji}(${Se})`}return u.nil}}subschema(ae,Se){const De=(0,l.getSubschema)(this.it,ae);(0,l.extendSubschemaData)(De,this.it,ae),(0,l.extendSubschemaMode)(De,ae);const bs={...this.it,...De,items:void 0,props:void 0};return D(bs,Se),bs}mergeEvaluated(ae,Se){const{it:De,gen:bs}=this;De.opts.unevaluated&&(De.props!==!0&&ae.props!==void 0&&(De.props=v.mergeEvaluated.props(bs,ae.props,De.props,Se)),De.items!==!0&&ae.items!==void 0&&(De.items=v.mergeEvaluated.items(bs,ae.items,De.items,Se)))}mergeValidEvaluated(ae,Se){const{it:De,gen:bs}=this;if(De.opts.unevaluated&&(De.props!==!0||De.items!==!0))return bs.if(Se,()=>this.mergeEvaluated(ae,u.Name)),!0}}validate.KeywordCxt=ve;function Ke(se,ae,Se,De){const bs=new ve(se,Se,ae);"code"in Se?Se.code(bs,De):bs.$data&&Se.validate?(0,a.funcKeywordCode)(bs,Se):"macro"in Se?(0,a.macroKeywordCode)(bs,Se):(Se.compile||Se.validate)&&(0,a.funcKeywordCode)(bs,Se)}const Ve=/^\/(?:[^~]|~0|~1)*$/,at=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function vr(se,{dataLevel:ae,dataNames:Se,dataPathArr:De}){let bs,Je;if(se==="")return d.default.rootData;if(se[0]==="/"){if(!Ve.test(se))throw new Error(`Invalid JSON-pointer: ${se}`);bs=se,Je=d.default.rootData}else{const ua=at.exec(se);if(!ua)throw new Error(`Invalid JSON-pointer: ${se}`);const da=+ua[1];if(bs=ua[2],bs==="#"){if(da>=ae)throw new Error(ji("property/index",da));return De[ae-da]}if(da>ae)throw new Error(ji("data",da));if(Je=Se[ae-da],!bs)return Je}let pi=Je;const Os=bs.split("/");for(const ua of Os)ua&&(Je=(0,u._)`${Je}${(0,u.getProperty)((0,v.unescapeJsonPointer)(ua))}`,pi=(0,u._)`${pi} && ${Je}`);return pi;function ji(ua,da){return`Cannot access ${ua} ${da} levels up, current level is ${ae}`}}return validate.getData=vr,validate}var validation_error={},hasRequiredValidation_error;function requireValidation_error(){if(hasRequiredValidation_error)return validation_error;hasRequiredValidation_error=1,Object.defineProperty(validation_error,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return validation_error.default=e,validation_error}var ref_error={},hasRequiredRef_error;function requireRef_error(){if(hasRequiredRef_error)return ref_error;hasRequiredRef_error=1,Object.defineProperty(ref_error,"__esModule",{value:!0});const e=requireResolve();class t extends Error{constructor(n,i,a,l){super(l||`can't resolve reference ${a} from id ${i}`),this.missingRef=(0,e.resolveUrl)(n,i,a),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return ref_error.default=t,ref_error}var compile={},hasRequiredCompile;function requireCompile(){if(hasRequiredCompile)return compile;hasRequiredCompile=1,Object.defineProperty(compile,"__esModule",{value:!0}),compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const e=requireCodegen(),t=requireValidation_error(),r=requireNames(),n=requireResolve(),i=requireUtil(),a=requireValidate();class l{constructor(q){var C;this.refs={},this.dynamicAnchors={};let D;typeof q.schema=="object"&&(D=q.schema),this.schema=q.schema,this.schemaId=q.schemaId,this.root=q.root||this,this.baseId=(C=q.baseId)!==null&&C!==void 0?C:(0,n.normalizeId)(D?.[q.schemaId||"$id"]),this.schemaPath=q.schemaPath,this.localRefs=q.localRefs,this.meta=q.meta,this.$async=D?.$async,this.refs={}}}compile.SchemaEnv=l;function u(P){const q=v.call(this,P);if(q)return q;const C=(0,n.getFullPath)(this.opts.uriResolver,P.root.baseId),{es5:D,lines:G}=this.opts.code,{ownProperties:B}=this.opts,H=new e.CodeGen(this.scope,{es5:D,lines:G,ownProperties:B});let X;P.$async&&(X=H.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const re=H.scopeName("validate");P.validateName=re;const pe={gen:H,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:H.scopeValue("schema",this.opts.code.source===!0?{ref:P.schema,code:(0,e.stringify)(P.schema)}:{ref:P.schema}),validateName:re,ValidationError:X,schema:P.schema,schemaEnv:P,rootId:C,baseId:P.baseId||C,schemaPath:e.nil,errSchemaPath:P.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let $e;try{this._compilations.add(P),(0,a.validateFunctionCode)(pe),H.optimize(this.opts.code.optimize);const ke=H.toString();$e=`${H.scopeRefs(r.default.scope)}return ${ke}`,this.opts.code.process&&($e=this.opts.code.process($e,P));const Ne=new Function(`${r.default.self}`,`${r.default.scope}`,$e)(this,this.scope.get());if(this.scope.value(re,{ref:Ne}),Ne.errors=null,Ne.schema=P.schema,Ne.schemaEnv=P,P.$async&&(Ne.$async=!0),this.opts.code.source===!0&&(Ne.source={validateName:re,validateCode:ke,scopeValues:H._values}),this.opts.unevaluated){const{props:Ye,items:Ar}=pe;Ne.evaluated={props:Ye instanceof e.Name?void 0:Ye,items:Ar instanceof e.Name?void 0:Ar,dynamicProps:Ye instanceof e.Name,dynamicItems:Ar instanceof e.Name},Ne.source&&(Ne.source.evaluated=(0,e.stringify)(Ne.evaluated))}return P.validate=Ne,P}catch(ke){throw delete P.validate,delete P.validateName,$e&&this.logger.error("Error compiling schema, function code:",$e),ke}finally{this._compilations.delete(P)}}compile.compileSchema=u;function d(P,q,C){var D;C=(0,n.resolveUrl)(this.opts.uriResolver,q,C);const G=P.refs[C];if(G)return G;let B=$.call(this,P,C);if(B===void 0){const H=(D=P.localRefs)===null||D===void 0?void 0:D[C],{schemaId:X}=this.opts;H&&(B=new l({schema:H,schemaId:X,root:P,baseId:q}))}if(B!==void 0)return P.refs[C]=m.call(this,B)}compile.resolveRef=d;function m(P){return(0,n.inlineRef)(P.schema,this.opts.inlineRefs)?P.schema:P.validate?P:u.call(this,P)}function v(P){for(const q of this._compilations)if(x(q,P))return q}compile.getCompilingSchema=v;function x(P,q){return P.schema===q.schema&&P.root===q.root&&P.baseId===q.baseId}function $(P,q){let C;for(;typeof(C=this.refs[q])=="string";)q=C;return C||this.schemas[q]||T.call(this,P,q)}function T(P,q){const C=this.opts.uriResolver.parse(q),D=(0,n._getFullPath)(this.opts.uriResolver,C);let G=(0,n.getFullPath)(this.opts.uriResolver,P.baseId,void 0);if(Object.keys(P.schema).length>0&&D===G)return L.call(this,C,P);const B=(0,n.normalizeId)(D),H=this.refs[B]||this.schemas[B];if(typeof H=="string"){const X=T.call(this,P,H);return typeof X?.schema!="object"?void 0:L.call(this,C,X)}if(typeof H?.schema=="object"){if(H.validate||u.call(this,H),B===(0,n.normalizeId)(q)){const{schema:X}=H,{schemaId:re}=this.opts,pe=X[re];return pe&&(G=(0,n.resolveUrl)(this.opts.uriResolver,G,pe)),new l({schema:X,schemaId:re,root:P,baseId:G})}return L.call(this,C,H)}}compile.resolveSchema=T;const A=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function L(P,{baseId:q,schema:C,root:D}){var G;if(((G=P.fragment)===null||G===void 0?void 0:G[0])!=="/")return;for(const X of P.fragment.slice(1).split("/")){if(typeof C=="boolean")return;const re=C[(0,i.unescapeFragment)(X)];if(re===void 0)return;C=re;const pe=typeof C=="object"&&C[this.opts.schemaId];!A.has(X)&&pe&&(q=(0,n.resolveUrl)(this.opts.uriResolver,q,pe))}let B;if(typeof C!="boolean"&&C.$ref&&!(0,i.schemaHasRulesButRef)(C,this.RULES)){const X=(0,n.resolveUrl)(this.opts.uriResolver,q,C.$ref);B=T.call(this,D,X)}const{schemaId:H}=this.opts;if(B=B||new l({schema:C,schemaId:H,root:D,baseId:q}),B.schema!==B.root.schema)return B}return compile}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri={},fastUri={exports:{}},utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r($){let T="",A=0,L=0;for(L=0;L<$.length;L++)if(A=$[L].charCodeAt(0),A!==48){if(!(A>=48&&A<=57||A>=65&&A<=70||A>=97&&A<=102))return"";T+=$[L];break}for(L+=1;L<$.length;L++){if(A=$[L].charCodeAt(0),!(A>=48&&A<=57||A>=65&&A<=70||A>=97&&A<=102))return"";T+=$[L]}return T}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i($){return $.length=0,!0}function a($,T,A){if($.length){const L=r($);if(L!=="")T.push(L);else return A.error=!0,!1;$.length=0}return!0}function l($){let T=0;const A={error:!1,address:"",zone:""},L=[],P=[];let q=!1,C=!1,D=a;for(let G=0;G<$.length;G++){const B=$[G];if(!(B==="["||B==="]"))if(B===":"){if(q===!0&&(C=!0),!D(P,L,A))break;if(++T>7){A.error=!0;break}G>0&&$[G-1]===":"&&(q=!0),L.push(":");continue}else if(B==="%"){if(!D(P,L,A))break;D=i}else{P.push(B);continue}}return P.length&&(D===i?A.zone=P.join(""):C?L.push(P.join("")):L.push(r(P))),A.address=L.join(""),A}function u($){if(d($,":")<2)return{host:$,isIPV6:!1};const T=l($);if(T.error)return{host:$,isIPV6:!1};{let A=T.address,L=T.address;return T.zone&&(A+="%"+T.zone,L+="%25"+T.zone),{host:A,isIPV6:!0,escapedHost:L}}}function d($,T){let A=0;for(let L=0;L<$.length;L++)$[L]===T&&A++;return A}function m($){let T=$;const A=[];let L=-1,P=0;for(;P=T.length;){if(P===1){if(T===".")break;if(T==="/"){A.push("/");break}else{A.push(T);break}}else if(P===2){if(T[0]==="."){if(T[1]===".")break;if(T[1]==="/"){T=T.slice(2);continue}}else if(T[0]==="/"&&(T[1]==="."||T[1]==="/")){A.push("/");break}}else if(P===3&&T==="/.."){A.length!==0&&A.pop(),A.push("/");break}if(T[0]==="."){if(T[1]==="."){if(T[2]==="/"){T=T.slice(3);continue}}else if(T[1]==="/"){T=T.slice(2);continue}}else if(T[0]==="/"&&T[1]==="."){if(T[2]==="/"){T=T.slice(2);continue}else if(T[2]==="."&&T[3]==="/"){T=T.slice(3),A.length!==0&&A.pop();continue}}if((L=T.indexOf("/",1))===-1){A.push(T);break}else A.push(T.slice(0,L)),T=T.slice(L)}return A.join("")}function v($,T){const A=T!==!0?escape:unescape;return $.scheme!==void 0&&($.scheme=A($.scheme)),$.userinfo!==void 0&&($.userinfo=A($.userinfo)),$.host!==void 0&&($.host=A($.host)),$.path!==void 0&&($.path=A($.path)),$.query!==void 0&&($.query=A($.query)),$.fragment!==void 0&&($.fragment=A($.fragment)),$}function x($){const T=[];if($.userinfo!==void 0&&(T.push($.userinfo),T.push("@")),$.host!==void 0){let A=unescape($.host);if(!t(A)){const L=u(A);L.isIPV6===!0?A=`[${L.escapedHost}]`:A=$.host}T.push(A)}return(typeof $.port=="number"||typeof $.port=="string")&&(T.push(":"),T.push(String($.port))),T.length?T.join(""):void 0}return utils={nonSimpleDomain:n,recomposeAuthority:x,normalizeComponentEncoding:v,removeDotSegments:m,isIPv4:t,isUUID:e,normalizeIPv6:u,stringArrayToHexStripped:r},utils}var schemes,hasRequiredSchemes;function requireSchemes(){if(hasRequiredSchemes)return schemes;hasRequiredSchemes=1;const{isUUID:e}=requireUtils(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(D){return r.indexOf(D)!==-1}function i(D){return D.secure===!0?!0:D.secure===!1?!1:D.scheme?D.scheme.length===3&&(D.scheme[0]==="w"||D.scheme[0]==="W")&&(D.scheme[1]==="s"||D.scheme[1]==="S")&&(D.scheme[2]==="s"||D.scheme[2]==="S"):!1}function a(D){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D}function l(D){const G=String(D.scheme).toLowerCase()==="https";return(D.port===(G?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D}function u(D){return D.secure=i(D),D.resourceName=(D.path||"/")+(D.query?"?"+D.query:""),D.path=void 0,D.query=void 0,D}function d(D){if((D.port===(i(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){const[G,B]=D.resourceName.split("?");D.path=G&&G!=="/"?G:void 0,D.query=B,D.resourceName=void 0}return D.fragment=void 0,D}function m(D,G){if(!D.path)return D.error="URN can not be parsed",D;const B=D.path.match(t);if(B){const H=G.scheme||D.scheme||"urn";D.nid=B[1].toLowerCase(),D.nss=B[2];const X=`${H}:${G.nid||D.nid}`,re=C(X);D.path=void 0,re&&(D=re.parse(D,G))}else D.error=D.error||"URN can not be parsed.";return D}function v(D,G){if(D.nid===void 0)throw new Error("URN without nid cannot be serialized");const B=G.scheme||D.scheme||"urn",H=D.nid.toLowerCase(),X=`${B}:${G.nid||H}`,re=C(X);re&&(D=re.serialize(D,G));const pe=D,$e=D.nss;return pe.path=`${H||G.nid}:${$e}`,G.skipEscape=!0,pe}function x(D,G){const B=D;return B.uuid=B.nss,B.nss=void 0,!G.tolerant&&(!B.uuid||!e(B.uuid))&&(B.error=B.error||"UUID is not valid."),B}function $(D){const G=D;return G.nss=(D.uuid||"").toLowerCase(),G}const T={scheme:"http",domainHost:!0,parse:a,serialize:l},A={scheme:"https",domainHost:T.domainHost,parse:a,serialize:l},L={scheme:"ws",domainHost:!0,parse:u,serialize:d},P={scheme:"wss",domainHost:L.domainHost,parse:L.parse,serialize:L.serialize},q={http:T,https:A,ws:L,wss:P,urn:{scheme:"urn",parse:m,serialize:v,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:x,serialize:$,skipNormalize:!0}};Object.setPrototypeOf(q,null);function C(D){return D&&(q[D]||q[D.toLowerCase()])||void 0}return schemes={wsIsSecure:i,SCHEMES:q,isValidSchemeName:n,getSchemeHandler:C},schemes}var hasRequiredFastUri;function requireFastUri(){if(hasRequiredFastUri)return fastUri.exports;hasRequiredFastUri=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:i,nonSimpleDomain:a}=requireUtils(),{SCHEMES:l,getSchemeHandler:u}=requireSchemes();function d(P,q){return typeof P=="string"?P=$(A(P,q),q):typeof P=="object"&&(P=A($(P,q),q)),P}function m(P,q,C){const D=C?Object.assign({scheme:"null"},C):{scheme:"null"},G=v(A(P,D),A(q,D),D,!0);return D.skipEscape=!0,$(G,D)}function v(P,q,C,D){const G={};return D||(P=A($(P,C),C),q=A($(q,C),C)),C=C||{},!C.tolerant&&q.scheme?(G.scheme=q.scheme,G.userinfo=q.userinfo,G.host=q.host,G.port=q.port,G.path=t(q.path||""),G.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(G.userinfo=q.userinfo,G.host=q.host,G.port=q.port,G.path=t(q.path||""),G.query=q.query):(q.path?(q.path[0]==="/"?G.path=t(q.path):((P.userinfo!==void 0||P.host!==void 0||P.port!==void 0)&&!P.path?G.path="/"+q.path:P.path?G.path=P.path.slice(0,P.path.lastIndexOf("/")+1)+q.path:G.path=q.path,G.path=t(G.path)),G.query=q.query):(G.path=P.path,q.query!==void 0?G.query=q.query:G.query=P.query),G.userinfo=P.userinfo,G.host=P.host,G.port=P.port),G.scheme=P.scheme),G.fragment=q.fragment,G}function x(P,q,C){return typeof P=="string"?(P=unescape(P),P=$(n(A(P,C),!0),{...C,skipEscape:!0})):typeof P=="object"&&(P=$(n(P,!0),{...C,skipEscape:!0})),typeof q=="string"?(q=unescape(q),q=$(n(A(q,C),!0),{...C,skipEscape:!0})):typeof q=="object"&&(q=$(n(q,!0),{...C,skipEscape:!0})),P.toLowerCase()===q.toLowerCase()}function $(P,q){const C={host:P.host,scheme:P.scheme,userinfo:P.userinfo,port:P.port,path:P.path,query:P.query,nid:P.nid,nss:P.nss,uuid:P.uuid,fragment:P.fragment,reference:P.reference,resourceName:P.resourceName,secure:P.secure,error:""},D=Object.assign({},q),G=[],B=u(D.scheme||C.scheme);B&&B.serialize&&B.serialize(C,D),C.path!==void 0&&(D.skipEscape?C.path=unescape(C.path):(C.path=escape(C.path),C.scheme!==void 0&&(C.path=C.path.split("%3A").join(":")))),D.reference!=="suffix"&&C.scheme&&G.push(C.scheme,":");const H=r(C);if(H!==void 0&&(D.reference!=="suffix"&&G.push("//"),G.push(H),C.path&&C.path[0]!=="/"&&G.push("/")),C.path!==void 0){let X=C.path;!D.absolutePath&&(!B||!B.absolutePath)&&(X=t(X)),H===void 0&&X[0]==="/"&&X[1]==="/"&&(X="/%2F"+X.slice(2)),G.push(X)}return C.query!==void 0&&G.push("?",C.query),C.fragment!==void 0&&G.push("#",C.fragment),G.join("")}const T=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function A(P,q){const C=Object.assign({},q),D={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let G=!1;C.reference==="suffix"&&(C.scheme?P=C.scheme+":"+P:P="//"+P);const B=P.match(T);if(B){if(D.scheme=B[1],D.userinfo=B[3],D.host=B[4],D.port=parseInt(B[5],10),D.path=B[6]||"",D.query=B[7],D.fragment=B[8],isNaN(D.port)&&(D.port=B[5]),D.host)if(i(D.host)===!1){const X=e(D.host);D.host=X.host.toLowerCase(),G=X.isIPV6}else G=!0;D.scheme===void 0&&D.userinfo===void 0&&D.host===void 0&&D.port===void 0&&D.query===void 0&&!D.path?D.reference="same-document":D.scheme===void 0?D.reference="relative":D.fragment===void 0?D.reference="absolute":D.reference="uri",C.reference&&C.reference!=="suffix"&&C.reference!==D.reference&&(D.error=D.error||"URI is not a "+C.reference+" reference.");const H=u(C.scheme||D.scheme);if(!C.unicodeSupport&&(!H||!H.unicodeSupport)&&D.host&&(C.domainHost||H&&H.domainHost)&&G===!1&&a(D.host))try{D.host=URL.domainToASCII(D.host.toLowerCase())}catch(X){D.error=D.error||"Host's domain name can not be converted to ASCII: "+X}(!H||H&&!H.skipNormalize)&&(P.indexOf("%")!==-1&&(D.scheme!==void 0&&(D.scheme=unescape(D.scheme)),D.host!==void 0&&(D.host=unescape(D.host))),D.path&&(D.path=escape(unescape(D.path))),D.fragment&&(D.fragment=encodeURI(decodeURIComponent(D.fragment)))),H&&H.parse&&H.parse(D,C)}else D.error=D.error||"URI can not be parsed.";return D}const L={SCHEMES:l,normalize:d,resolve:m,resolveComponent:v,equal:x,serialize:$,parse:A};return fastUri.exports=L,fastUri.exports.default=L,fastUri.exports.fastUri=L,fastUri.exports}var hasRequiredUri;function requireUri(){if(hasRequiredUri)return uri;hasRequiredUri=1,Object.defineProperty(uri,"__esModule",{value:!0});const e=requireFastUri();return e.code='require("ajv/dist/runtime/uri").default',uri.default=e,uri}var hasRequiredCore$1;function requireCore$1(){return hasRequiredCore$1||(hasRequiredCore$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=requireValidate();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=requireCodegen();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=requireValidation_error(),i=requireRef_error(),a=requireRules(),l=requireCompile(),u=requireCodegen(),d=requireResolve(),m=requireDataType(),v=requireUtil(),x=require$$9,$=requireUri(),T=(Ee,ce)=>new RegExp(Ee,ce);T.code="new RegExp";const A=["removeAdditional","useDefaults","coerceTypes"],L=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),P={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},q={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},C=200;function D(Ee){var ce,Re,ye,Q,ee,ve,Ke,Ve,at,vr,se,ae,Se,De,bs,Je,pi,Os,ji,ua,da,ga,ca,ma,ya;const vi=Ee.strict,fa=(ce=Ee.code)===null||ce===void 0?void 0:ce.optimize,ha=fa===!0||fa===void 0?1:fa||0,$a=(ye=(Re=Ee.code)===null||Re===void 0?void 0:Re.regExp)!==null&&ye!==void 0?ye:T,ue=(Q=Ee.uriResolver)!==null&&Q!==void 0?Q:$.default;return{strictSchema:(ve=(ee=Ee.strictSchema)!==null&&ee!==void 0?ee:vi)!==null&&ve!==void 0?ve:!0,strictNumbers:(Ve=(Ke=Ee.strictNumbers)!==null&&Ke!==void 0?Ke:vi)!==null&&Ve!==void 0?Ve:!0,strictTypes:(vr=(at=Ee.strictTypes)!==null&&at!==void 0?at:vi)!==null&&vr!==void 0?vr:"log",strictTuples:(ae=(se=Ee.strictTuples)!==null&&se!==void 0?se:vi)!==null&&ae!==void 0?ae:"log",strictRequired:(De=(Se=Ee.strictRequired)!==null&&Se!==void 0?Se:vi)!==null&&De!==void 0?De:!1,code:Ee.code?{...Ee.code,optimize:ha,regExp:$a}:{optimize:ha,regExp:$a},loopRequired:(bs=Ee.loopRequired)!==null&&bs!==void 0?bs:C,loopEnum:(Je=Ee.loopEnum)!==null&&Je!==void 0?Je:C,meta:(pi=Ee.meta)!==null&&pi!==void 0?pi:!0,messages:(Os=Ee.messages)!==null&&Os!==void 0?Os:!0,inlineRefs:(ji=Ee.inlineRefs)!==null&&ji!==void 0?ji:!0,schemaId:(ua=Ee.schemaId)!==null&&ua!==void 0?ua:"$id",addUsedSchema:(da=Ee.addUsedSchema)!==null&&da!==void 0?da:!0,validateSchema:(ga=Ee.validateSchema)!==null&&ga!==void 0?ga:!0,validateFormats:(ca=Ee.validateFormats)!==null&&ca!==void 0?ca:!0,unicodeRegExp:(ma=Ee.unicodeRegExp)!==null&&ma!==void 0?ma:!0,int32range:(ya=Ee.int32range)!==null&&ya!==void 0?ya:!0,uriResolver:ue}}class G{constructor(ce={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ce=this.opts={...ce,...D(ce)};const{es5:Re,lines:ye}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:L,es5:Re,lines:ye}),this.logger=Ne(ce.logger);const Q=ce.validateFormats;ce.validateFormats=!1,this.RULES=(0,a.getRules)(),B.call(this,P,ce,"NOT SUPPORTED"),B.call(this,q,ce,"DEPRECATED","warn"),this._metaOpts=$e.call(this),ce.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ce.keywords&&pe.call(this,ce.keywords),typeof ce.meta=="object"&&this.addMetaSchema(ce.meta),X.call(this),ce.validateFormats=Q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ce,meta:Re,schemaId:ye}=this.opts;let Q=x;ye==="id"&&(Q={...x},Q.id=Q.$id,delete Q.$id),Re&&ce&&this.addMetaSchema(Q,Q[ye],!1)}defaultMeta(){const{meta:ce,schemaId:Re}=this.opts;return this.opts.defaultMeta=typeof ce=="object"?ce[Re]||ce:void 0}validate(ce,Re){let ye;if(typeof ce=="string"){if(ye=this.getSchema(ce),!ye)throw new Error(`no schema with key or ref "${ce}"`)}else ye=this.compile(ce);const Q=ye(Re);return"$async"in ye||(this.errors=ye.errors),Q}compile(ce,Re){const ye=this._addSchema(ce,Re);return ye.validate||this._compileSchemaEnv(ye)}compileAsync(ce,Re){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ye}=this.opts;return Q.call(this,ce,Re);async function Q(vr,se){await ee.call(this,vr.$schema);const ae=this._addSchema(vr,se);return ae.validate||ve.call(this,ae)}async function ee(vr){vr&&!this.getSchema(vr)&&await Q.call(this,{$ref:vr},!0)}async function ve(vr){try{return this._compileSchemaEnv(vr)}catch(se){if(!(se instanceof i.default))throw se;return Ke.call(this,se),await Ve.call(this,se.missingSchema),ve.call(this,vr)}}function Ke({missingSchema:vr,missingRef:se}){if(this.refs[vr])throw new Error(`AnySchema ${vr} is loaded but ${se} cannot be resolved`)}async function Ve(vr){const se=await at.call(this,vr);this.refs[vr]||await ee.call(this,se.$schema),this.refs[vr]||this.addSchema(se,vr,Re)}async function at(vr){const se=this._loading[vr];if(se)return se;try{return await(this._loading[vr]=ye(vr))}finally{delete this._loading[vr]}}}addSchema(ce,Re,ye,Q=this.opts.validateSchema){if(Array.isArray(ce)){for(const ve of ce)this.addSchema(ve,void 0,ye,Q);return this}let ee;if(typeof ce=="object"){const{schemaId:ve}=this.opts;if(ee=ce[ve],ee!==void 0&&typeof ee!="string")throw new Error(`schema ${ve} must be string`)}return Re=(0,d.normalizeId)(Re||ee),this._checkUnique(Re),this.schemas[Re]=this._addSchema(ce,ye,Re,Q,!0),this}addMetaSchema(ce,Re,ye=this.opts.validateSchema){return this.addSchema(ce,Re,!0,ye),this}validateSchema(ce,Re){if(typeof ce=="boolean")return!0;let ye;if(ye=ce.$schema,ye!==void 0&&typeof ye!="string")throw new Error("$schema must be a string");if(ye=ye||this.opts.defaultMeta||this.defaultMeta(),!ye)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Q=this.validate(ye,ce);if(!Q&&Re){const ee="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ee);else throw new Error(ee)}return Q}getSchema(ce){let Re;for(;typeof(Re=H.call(this,ce))=="string";)ce=Re;if(Re===void 0){const{schemaId:ye}=this.opts,Q=new l.SchemaEnv({schema:{},schemaId:ye});if(Re=l.resolveSchema.call(this,Q,ce),!Re)return;this.refs[ce]=Re}return Re.validate||this._compileSchemaEnv(Re)}removeSchema(ce){if(ce instanceof RegExp)return this._removeAllSchemas(this.schemas,ce),this._removeAllSchemas(this.refs,ce),this;switch(typeof ce){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Re=H.call(this,ce);return typeof Re=="object"&&this._cache.delete(Re.schema),delete this.schemas[ce],delete this.refs[ce],this}case"object":{const Re=ce;this._cache.delete(Re);let ye=ce[this.opts.schemaId];return ye&&(ye=(0,d.normalizeId)(ye),delete this.schemas[ye],delete this.refs[ye]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ce){for(const Re of ce)this.addKeyword(Re);return this}addKeyword(ce,Re){let ye;if(typeof ce=="string")ye=ce,typeof Re=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Re.keyword=ye);else if(typeof ce=="object"&&Re===void 0){if(Re=ce,ye=Re.keyword,Array.isArray(ye)&&!ye.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ar.call(this,ye,Re),!Re)return(0,v.eachItem)(ye,ee=>hi.call(this,ee)),this;Ui.call(this,Re);const Q={...Re,type:(0,m.getJSONTypes)(Re.type),schemaType:(0,m.getJSONTypes)(Re.schemaType)};return(0,v.eachItem)(ye,Q.type.length===0?ee=>hi.call(this,ee,Q):ee=>Q.type.forEach(ve=>hi.call(this,ee,Q,ve))),this}getKeyword(ce){const Re=this.RULES.all[ce];return typeof Re=="object"?Re.definition:!!Re}removeKeyword(ce){const{RULES:Re}=this;delete Re.keywords[ce],delete Re.all[ce];for(const ye of Re.rules){const Q=ye.rules.findIndex(ee=>ee.keyword===ce);Q>=0&&ye.rules.splice(Q,1)}return this}addFormat(ce,Re){return typeof Re=="string"&&(Re=new RegExp(Re)),this.formats[ce]=Re,this}errorsText(ce=this.errors,{separator:Re=", ",dataVar:ye="data"}={}){return!ce||ce.length===0?"No errors":ce.map(Q=>`${ye}${Q.instancePath} ${Q.message}`).reduce((Q,ee)=>Q+Re+ee)}$dataMetaSchema(ce,Re){const ye=this.RULES.all;ce=JSON.parse(JSON.stringify(ce));for(const Q of Re){const ee=Q.split("/").slice(1);let ve=ce;for(const Ke of ee)ve=ve[Ke];for(const Ke in ye){const Ve=ye[Ke];if(typeof Ve!="object")continue;const{$data:at}=Ve.definition,vr=ve[Ke];at&&vr&&(ve[Ke]=Gi(vr))}}return ce}_removeAllSchemas(ce,Re){for(const ye in ce){const Q=ce[ye];(!Re||Re.test(ye))&&(typeof Q=="string"?delete ce[ye]:Q&&!Q.meta&&(this._cache.delete(Q.schema),delete ce[ye]))}}_addSchema(ce,Re,ye,Q=this.opts.validateSchema,ee=this.opts.addUsedSchema){let ve;const{schemaId:Ke}=this.opts;if(typeof ce=="object")ve=ce[Ke];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ce!="boolean")throw new Error("schema must be object or boolean")}let Ve=this._cache.get(ce);if(Ve!==void 0)return Ve;ye=(0,d.normalizeId)(ve||ye);const at=d.getSchemaRefs.call(this,ce,ye);return Ve=new l.SchemaEnv({schema:ce,schemaId:Ke,meta:Re,baseId:ye,localRefs:at}),this._cache.set(Ve.schema,Ve),ee&&!ye.startsWith("#")&&(ye&&this._checkUnique(ye),this.refs[ye]=Ve),Q&&this.validateSchema(ce,!0),Ve}_checkUnique(ce){if(this.schemas[ce]||this.refs[ce])throw new Error(`schema with key or id "${ce}" already exists`)}_compileSchemaEnv(ce){if(ce.meta?this._compileMetaSchema(ce):l.compileSchema.call(this,ce),!ce.validate)throw new Error("ajv implementation error");return ce.validate}_compileMetaSchema(ce){const Re=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,ce)}finally{this.opts=Re}}}G.ValidationError=n.default,G.MissingRefError=i.default,e.default=G;function B(Ee,ce,Re,ye="error"){for(const Q in Ee){const ee=Q;ee in ce&&this.logger[ye](`${Re}: option ${Q}. ${Ee[ee]}`)}}function H(Ee){return Ee=(0,d.normalizeId)(Ee),this.schemas[Ee]||this.refs[Ee]}function X(){const Ee=this.opts.schemas;if(Ee)if(Array.isArray(Ee))this.addSchema(Ee);else for(const ce in Ee)this.addSchema(Ee[ce],ce)}function re(){for(const Ee in this.opts.formats){const ce=this.opts.formats[Ee];ce&&this.addFormat(Ee,ce)}}function pe(Ee){if(Array.isArray(Ee)){this.addVocabulary(Ee);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ce in Ee){const Re=Ee[ce];Re.keyword||(Re.keyword=ce),this.addKeyword(Re)}}function $e(){const Ee={...this.opts};for(const ce of A)delete Ee[ce];return Ee}const ke={log(){},warn(){},error(){}};function Ne(Ee){if(Ee===!1)return ke;if(Ee===void 0)return console;if(Ee.log&&Ee.warn&&Ee.error)return Ee;throw new Error("logger must implement log, warn and error methods")}const Ye=/^[a-z_$][a-z0-9_$:-]*$/i;function Ar(Ee,ce){const{RULES:Re}=this;if((0,v.eachItem)(Ee,ye=>{if(Re.keywords[ye])throw new Error(`Keyword ${ye} is already defined`);if(!Ye.test(ye))throw new Error(`Keyword ${ye} has invalid name`)}),!!ce&&ce.$data&&!("code"in ce||"validate"in ce))throw new Error('$data keyword must have "code" or "validate" function')}function hi(Ee,ce,Re){var ye;const Q=ce?.post;if(Re&&Q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ee}=this;let ve=Q?ee.post:ee.rules.find(({type:Ve})=>Ve===Re);if(ve||(ve={type:Re,rules:[]},ee.rules.push(ve)),ee.keywords[Ee]=!0,!ce)return;const Ke={keyword:Ee,definition:{...ce,type:(0,m.getJSONTypes)(ce.type),schemaType:(0,m.getJSONTypes)(ce.schemaType)}};ce.before?gi.call(this,ve,Ke,ce.before):ve.rules.push(Ke),ee.all[Ee]=Ke,(ye=ce.implements)===null||ye===void 0||ye.forEach(Ve=>this.addKeyword(Ve))}function gi(Ee,ce,Re){const ye=Ee.rules.findIndex(Q=>Q.keyword===Re);ye>=0?Ee.rules.splice(ye,0,ce):(Ee.rules.push(ce),this.logger.warn(`rule ${Re} is not defined`))}function Ui(Ee){let{metaSchema:ce}=Ee;ce!==void 0&&(Ee.$data&&this.opts.$data&&(ce=Gi(ce)),Ee.validateSchema=this.compile(ce,!0))}const ws={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Gi(Ee){return{anyOf:[Ee,ws]}}})(core$1)),core$1}var draft7={},core={},id={},hasRequiredId;function requireId(){if(hasRequiredId)return id;hasRequiredId=1,Object.defineProperty(id,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id.default=e,id}var ref={},hasRequiredRef;function requireRef(){if(hasRequiredRef)return ref;hasRequiredRef=1,Object.defineProperty(ref,"__esModule",{value:!0}),ref.callRef=ref.getValidate=void 0;const e=requireRef_error(),t=requireCode(),r=requireCodegen(),n=requireNames(),i=requireCompile(),a=requireUtil(),l={keyword:"$ref",schemaType:"string",code(m){const{gen:v,schema:x,it:$}=m,{baseId:T,schemaEnv:A,validateName:L,opts:P,self:q}=$,{root:C}=A;if((x==="#"||x==="#/")&&T===C.baseId)return G();const D=i.resolveRef.call(q,C,T,x);if(D===void 0)throw new e.default($.opts.uriResolver,T,x);if(D instanceof i.SchemaEnv)return B(D);return H(D);function G(){if(A===C)return d(m,L,A,A.$async);const X=v.scopeValue("root",{ref:C});return d(m,(0,r._)`${X}.validate`,C,C.$async)}function B(X){const re=u(m,X);d(m,re,X,X.$async)}function H(X){const re=v.scopeValue("schema",P.code.source===!0?{ref:X,code:(0,r.stringify)(X)}:{ref:X}),pe=v.name("valid"),$e=m.subschema({schema:X,dataTypes:[],schemaPath:r.nil,topSchemaRef:re,errSchemaPath:x},pe);m.mergeEvaluated($e),m.ok(pe)}}};function u(m,v){const{gen:x}=m;return v.validate?x.scopeValue("validate",{ref:v.validate}):(0,r._)`${x.scopeValue("wrapper",{ref:v})}.validate`}ref.getValidate=u;function d(m,v,x,$){const{gen:T,it:A}=m,{allErrors:L,schemaEnv:P,opts:q}=A,C=q.passContext?n.default.this:r.nil;$?D():G();function D(){if(!P.$async)throw new Error("async schema referenced by sync schema");const X=T.let("valid");T.try(()=>{T.code((0,r._)`await ${(0,t.callValidateCode)(m,v,C)}`),H(v),L||T.assign(X,!0)},re=>{T.if((0,r._)`!(${re} instanceof ${A.ValidationError})`,()=>T.throw(re)),B(re),L||T.assign(X,!1)}),m.ok(X)}function G(){m.result((0,t.callValidateCode)(m,v,C),()=>H(v),()=>B(v))}function B(X){const re=(0,r._)`${X}.errors`;T.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${re} : ${n.default.vErrors}.concat(${re})`),T.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function H(X){var re;if(!A.opts.unevaluated)return;const pe=(re=x?.validate)===null||re===void 0?void 0:re.evaluated;if(A.props!==!0)if(pe&&!pe.dynamicProps)pe.props!==void 0&&(A.props=a.mergeEvaluated.props(T,pe.props,A.props));else{const $e=T.var("props",(0,r._)`${X}.evaluated.props`);A.props=a.mergeEvaluated.props(T,$e,A.props,r.Name)}if(A.items!==!0)if(pe&&!pe.dynamicItems)pe.items!==void 0&&(A.items=a.mergeEvaluated.items(T,pe.items,A.items));else{const $e=T.var("items",(0,r._)`${X}.evaluated.items`);A.items=a.mergeEvaluated.items(T,$e,A.items,r.Name)}}}return ref.callRef=d,ref.default=l,ref}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core;hasRequiredCore=1,Object.defineProperty(core,"__esModule",{value:!0});const e=requireId(),t=requireRef(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return core.default=r,core}var validation={},limitNumber={},hasRequiredLimitNumber;function requireLimitNumber(){if(hasRequiredLimitNumber)return limitNumber;hasRequiredLimitNumber=1,Object.defineProperty(limitNumber,"__esModule",{value:!0});const e=requireCodegen(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:a,schemaCode:l})=>(0,e.str)`must be ${r[a].okStr} ${l}`,params:({keyword:a,schemaCode:l})=>(0,e._)`{comparison: ${r[a].okStr}, limit: ${l}}`},i={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(a){const{keyword:l,data:u,schemaCode:d}=a;a.fail$data((0,e._)`${u} ${r[l].fail} ${d} || isNaN(${u})`)}};return limitNumber.default=i,limitNumber}var multipleOf={},hasRequiredMultipleOf;function requireMultipleOf(){if(hasRequiredMultipleOf)return multipleOf;hasRequiredMultipleOf=1,Object.defineProperty(multipleOf,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:n,data:i,schemaCode:a,it:l}=r,u=l.opts.multipleOfPrecision,d=n.let("res"),m=u?(0,e._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${u}`:(0,e._)`${d} !== parseInt(${d})`;r.fail$data((0,e._)`(${a} === 0 || (${d} = ${i}/${a}, ${m}))`)}};return multipleOf.default=t,multipleOf}var limitLength={},ucs2length={},hasRequiredUcs2length;function requireUcs2length(){if(hasRequiredUcs2length)return ucs2length;hasRequiredUcs2length=1,Object.defineProperty(ucs2length,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,i=0,a;for(;i<r;)n++,a=t.charCodeAt(i++),a>=55296&&a<=56319&&i<r&&(a=t.charCodeAt(i),(a&64512)===56320&&i++);return n}return ucs2length.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',ucs2length}var hasRequiredLimitLength;function requireLimitLength(){if(hasRequiredLimitLength)return limitLength;hasRequiredLimitLength=1,Object.defineProperty(limitLength,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireUcs2length(),n={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:a}){const l=i==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${l} than ${a} characters`},params:({schemaCode:i})=>(0,e._)`{limit: ${i}}`},code(i){const{keyword:a,data:l,schemaCode:u,it:d}=i,m=a==="maxLength"?e.operators.GT:e.operators.LT,v=d.opts.unicode===!1?(0,e._)`${l}.length`:(0,e._)`${(0,t.useFunc)(i.gen,r.default)}(${l})`;i.fail$data((0,e._)`${v} ${m} ${u}`)}};return limitLength.default=n,limitLength}var pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1,Object.defineProperty(pattern,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match pattern "${n}"`,params:({schemaCode:n})=>(0,t._)`{pattern: ${n}}`},code(n){const{data:i,$data:a,schema:l,schemaCode:u,it:d}=n,m=d.opts.unicodeRegExp?"u":"",v=a?(0,t._)`(new RegExp(${u}, ${m}))`:(0,e.usePattern)(n,l);n.fail$data((0,t._)`!${v}.test(${i})`)}};return pattern.default=r,pattern}var limitProperties={},hasRequiredLimitProperties;function requireLimitProperties(){if(hasRequiredLimitProperties)return limitProperties;hasRequiredLimitProperties=1,Object.defineProperty(limitProperties,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:n}){const i=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${n} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:n,data:i,schemaCode:a}=r,l=n==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${i}).length ${l} ${a}`)}};return limitProperties.default=t,limitProperties}var required={},hasRequiredRequired;function requireRequired(){if(hasRequiredRequired)return required;hasRequiredRequired=1,Object.defineProperty(required,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireUtil(),n={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:i}})=>(0,t.str)`must have required property '${i}'`,params:({params:{missingProperty:i}})=>(0,t._)`{missingProperty: ${i}}`},code(i){const{gen:a,schema:l,schemaCode:u,data:d,$data:m,it:v}=i,{opts:x}=v;if(!m&&l.length===0)return;const $=l.length>=x.loopRequired;if(v.allErrors?T():A(),x.strictRequired){const q=i.parentSchema.properties,{definedProperties:C}=i.it;for(const D of l)if(q?.[D]===void 0&&!C.has(D)){const G=v.schemaEnv.baseId+v.errSchemaPath,B=`required property "${D}" is not defined at "${G}" (strictRequired)`;(0,r.checkStrictMode)(v,B,v.opts.strictRequired)}}function T(){if($||m)i.block$data(t.nil,L);else for(const q of l)(0,e.checkReportMissingProp)(i,q)}function A(){const q=a.let("missing");if($||m){const C=a.let("valid",!0);i.block$data(C,()=>P(q,C)),i.ok(C)}else a.if((0,e.checkMissingProp)(i,l,q)),(0,e.reportMissingProp)(i,q),a.else()}function L(){a.forOf("prop",u,q=>{i.setParams({missingProperty:q}),a.if((0,e.noPropertyInData)(a,d,q,x.ownProperties),()=>i.error())})}function P(q,C){i.setParams({missingProperty:q}),a.forOf(q,u,()=>{a.assign(C,(0,e.propertyInData)(a,d,q,x.ownProperties)),a.if((0,t.not)(C),()=>{i.error(),a.break()})},t.nil)}}};return required.default=n,required}var limitItems={},hasRequiredLimitItems;function requireLimitItems(){if(hasRequiredLimitItems)return limitItems;hasRequiredLimitItems=1,Object.defineProperty(limitItems,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:n}){const i=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${n} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:n,data:i,schemaCode:a}=r,l=n==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${i}.length ${l} ${a}`)}};return limitItems.default=t,limitItems}var uniqueItems={},equal={},hasRequiredEqual;function requireEqual(){if(hasRequiredEqual)return equal;hasRequiredEqual=1,Object.defineProperty(equal,"__esModule",{value:!0});const e=requireFastDeepEqual();return e.code='require("ajv/dist/runtime/equal").default',equal.default=e,equal}var hasRequiredUniqueItems;function requireUniqueItems(){if(hasRequiredUniqueItems)return uniqueItems;hasRequiredUniqueItems=1,Object.defineProperty(uniqueItems,"__esModule",{value:!0});const e=requireDataType(),t=requireCodegen(),r=requireUtil(),n=requireEqual(),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:a,j:l}})=>(0,t.str)`must NOT have duplicate items (items ## ${l} and ${a} are identical)`,params:({params:{i:a,j:l}})=>(0,t._)`{i: ${a}, j: ${l}}`},code(a){const{gen:l,data:u,$data:d,schema:m,parentSchema:v,schemaCode:x,it:$}=a;if(!d&&!m)return;const T=l.let("valid"),A=v.items?(0,e.getSchemaTypes)(v.items):[];a.block$data(T,L,(0,t._)`${x} === false`),a.ok(T);function L(){const D=l.let("i",(0,t._)`${u}.length`),G=l.let("j");a.setParams({i:D,j:G}),l.assign(T,!0),l.if((0,t._)`${D} > 1`,()=>(P()?q:C)(D,G))}function P(){return A.length>0&&!A.some(D=>D==="object"||D==="array")}function q(D,G){const B=l.name("item"),H=(0,e.checkDataTypes)(A,B,$.opts.strictNumbers,e.DataType.Wrong),X=l.const("indices",(0,t._)`{}`);l.for((0,t._)`;${D}--;`,()=>{l.let(B,(0,t._)`${u}[${D}]`),l.if(H,(0,t._)`continue`),A.length>1&&l.if((0,t._)`typeof ${B} == "string"`,(0,t._)`${B} += "_"`),l.if((0,t._)`typeof ${X}[${B}] == "number"`,()=>{l.assign(G,(0,t._)`${X}[${B}]`),a.error(),l.assign(T,!1).break()}).code((0,t._)`${X}[${B}] = ${D}`)})}function C(D,G){const B=(0,r.useFunc)(l,n.default),H=l.name("outer");l.label(H).for((0,t._)`;${D}--;`,()=>l.for((0,t._)`${G} = ${D}; ${G}--;`,()=>l.if((0,t._)`${B}(${u}[${D}], ${u}[${G}])`,()=>{a.error(),l.assign(T,!1).break(H)})))}}};return uniqueItems.default=i,uniqueItems}var _const={},hasRequired_const;function require_const(){if(hasRequired_const)return _const;hasRequired_const=1,Object.defineProperty(_const,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireEqual(),n={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:i})=>(0,e._)`{allowedValue: ${i}}`},code(i){const{gen:a,data:l,$data:u,schemaCode:d,schema:m}=i;u||m&&typeof m=="object"?i.fail$data((0,e._)`!${(0,t.useFunc)(a,r.default)}(${l}, ${d})`):i.fail((0,e._)`${m} !== ${l}`)}};return _const.default=n,_const}var _enum={},hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireEqual(),n={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:i})=>(0,e._)`{allowedValues: ${i}}`},code(i){const{gen:a,data:l,$data:u,schema:d,schemaCode:m,it:v}=i;if(!u&&d.length===0)throw new Error("enum must have non-empty array");const x=d.length>=v.opts.loopEnum;let $;const T=()=>$??($=(0,t.useFunc)(a,r.default));let A;if(x||u)A=a.let("valid"),i.block$data(A,L);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const q=a.const("vSchema",m);A=(0,e.or)(...d.map((C,D)=>P(q,D)))}i.pass(A);function L(){a.assign(A,!1),a.forOf("v",m,q=>a.if((0,e._)`${T()}(${l}, ${q})`,()=>a.assign(A,!0).break()))}function P(q,C){const D=d[C];return typeof D=="object"&&D!==null?(0,e._)`${T()}(${l}, ${q}[${C}])`:(0,e._)`${l} === ${D}`}}};return _enum.default=n,_enum}var hasRequiredValidation;function requireValidation(){if(hasRequiredValidation)return validation;hasRequiredValidation=1,Object.defineProperty(validation,"__esModule",{value:!0});const e=requireLimitNumber(),t=requireMultipleOf(),r=requireLimitLength(),n=requirePattern(),i=requireLimitProperties(),a=requireRequired(),l=requireLimitItems(),u=requireUniqueItems(),d=require_const(),m=require_enum(),v=[e.default,t.default,r.default,n.default,i.default,a.default,l.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,m.default];return validation.default=v,validation}var applicator={},additionalItems={},hasRequiredAdditionalItems;function requireAdditionalItems(){if(hasRequiredAdditionalItems)return additionalItems;hasRequiredAdditionalItems=1,Object.defineProperty(additionalItems,"__esModule",{value:!0}),additionalItems.validateAdditionalItems=void 0;const e=requireCodegen(),t=requireUtil(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,e.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,e._)`{limit: ${i}}`},code(i){const{parentSchema:a,it:l}=i,{items:u}=a;if(!Array.isArray(u)){(0,t.checkStrictMode)(l,'"additionalItems" is ignored when "items" is not an array of schemas');return}n(i,u)}};function n(i,a){const{gen:l,schema:u,data:d,keyword:m,it:v}=i;v.items=!0;const x=l.const("len",(0,e._)`${d}.length`);if(u===!1)i.setParams({len:a.length}),i.pass((0,e._)`${x} <= ${a.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(v,u)){const T=l.var("valid",(0,e._)`${x} <= ${a.length}`);l.if((0,e.not)(T),()=>$(T)),i.ok(T)}function $(T){l.forRange("i",a.length,x,A=>{i.subschema({keyword:m,dataProp:A,dataPropType:t.Type.Num},T),v.allErrors||l.if((0,e.not)(T),()=>l.break())})}}return additionalItems.validateAdditionalItems=n,additionalItems.default=r,additionalItems}var prefixItems={},items={},hasRequiredItems;function requireItems(){if(hasRequiredItems)return items;hasRequiredItems=1,Object.defineProperty(items,"__esModule",{value:!0}),items.validateTuple=void 0;const e=requireCodegen(),t=requireUtil(),r=requireCode(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(a){const{schema:l,it:u}=a;if(Array.isArray(l))return i(a,"additionalItems",l);u.items=!0,!(0,t.alwaysValidSchema)(u,l)&&a.ok((0,r.validateArray)(a))}};function i(a,l,u=a.schema){const{gen:d,parentSchema:m,data:v,keyword:x,it:$}=a;L(m),$.opts.unevaluated&&u.length&&$.items!==!0&&($.items=t.mergeEvaluated.items(d,u.length,$.items));const T=d.name("valid"),A=d.const("len",(0,e._)`${v}.length`);u.forEach((P,q)=>{(0,t.alwaysValidSchema)($,P)||(d.if((0,e._)`${A} > ${q}`,()=>a.subschema({keyword:x,schemaProp:q,dataProp:q},T)),a.ok(T))});function L(P){const{opts:q,errSchemaPath:C}=$,D=u.length,G=D===P.minItems&&(D===P.maxItems||P[l]===!1);if(q.strictTuples&&!G){const B=`"${x}" is ${D}-tuple, but minItems or maxItems/${l} are not specified or different at path "${C}"`;(0,t.checkStrictMode)($,B,q.strictTuples)}}}return items.validateTuple=i,items.default=n,items}var hasRequiredPrefixItems;function requirePrefixItems(){if(hasRequiredPrefixItems)return prefixItems;hasRequiredPrefixItems=1,Object.defineProperty(prefixItems,"__esModule",{value:!0});const e=requireItems(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return prefixItems.default=t,prefixItems}var items2020={},hasRequiredItems2020;function requireItems2020(){if(hasRequiredItems2020)return items2020;hasRequiredItems2020=1,Object.defineProperty(items2020,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireCode(),n=requireAdditionalItems(),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{schema:l,parentSchema:u,it:d}=a,{prefixItems:m}=u;d.items=!0,!(0,t.alwaysValidSchema)(d,l)&&(m?(0,n.validateAdditionalItems)(a,m):a.ok((0,r.validateArray)(a)))}};return items2020.default=i,items2020}var contains={},hasRequiredContains;function requireContains(){if(hasRequiredContains)return contains;hasRequiredContains=1,Object.defineProperty(contains,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:n,max:i}})=>i===void 0?(0,e.str)`must contain at least ${n} valid item(s)`:(0,e.str)`must contain at least ${n} and no more than ${i} valid item(s)`,params:({params:{min:n,max:i}})=>i===void 0?(0,e._)`{minContains: ${n}}`:(0,e._)`{minContains: ${n}, maxContains: ${i}}`},code(n){const{gen:i,schema:a,parentSchema:l,data:u,it:d}=n;let m,v;const{minContains:x,maxContains:$}=l;d.opts.next?(m=x===void 0?1:x,v=$):m=1;const T=i.const("len",(0,e._)`${u}.length`);if(n.setParams({min:m,max:v}),v===void 0&&m===0){(0,t.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(v!==void 0&&m>v){(0,t.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),n.fail();return}if((0,t.alwaysValidSchema)(d,a)){let C=(0,e._)`${T} >= ${m}`;v!==void 0&&(C=(0,e._)`${C} && ${T} <= ${v}`),n.pass(C);return}d.items=!0;const A=i.name("valid");v===void 0&&m===1?P(A,()=>i.if(A,()=>i.break())):m===0?(i.let(A,!0),v!==void 0&&i.if((0,e._)`${u}.length > 0`,L)):(i.let(A,!1),L()),n.result(A,()=>n.reset());function L(){const C=i.name("_valid"),D=i.let("count",0);P(C,()=>i.if(C,()=>q(D)))}function P(C,D){i.forRange("i",0,T,G=>{n.subschema({keyword:"contains",dataProp:G,dataPropType:t.Type.Num,compositeRule:!0},C),D()})}function q(C){i.code((0,e._)`${C}++`),v===void 0?i.if((0,e._)`${C} >= ${m}`,()=>i.assign(A,!0).break()):(i.if((0,e._)`${C} > ${v}`,()=>i.assign(A,!1).break()),m===1?i.assign(A,!0):i.if((0,e._)`${C} >= ${m}`,()=>i.assign(A,!0)))}}};return contains.default=r,contains}var dependencies={},hasRequiredDependencies;function requireDependencies(){return hasRequiredDependencies||(hasRequiredDependencies=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=requireCodegen(),r=requireUtil(),n=requireCode();e.error={message:({params:{property:d,depsCount:m,deps:v}})=>{const x=m===1?"property":"properties";return(0,t.str)`must have ${x} ${v} when property ${d} is present`},params:({params:{property:d,depsCount:m,deps:v,missingProperty:x}})=>(0,t._)`{property: ${d},
    missingProperty: ${x},
    depsCount: ${m},
    deps: ${v}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[m,v]=a(d);l(d,m),u(d,v)}};function a({schema:d}){const m={},v={};for(const x in d){if(x==="__proto__")continue;const $=Array.isArray(d[x])?m:v;$[x]=d[x]}return[m,v]}function l(d,m=d.schema){const{gen:v,data:x,it:$}=d;if(Object.keys(m).length===0)return;const T=v.let("missing");for(const A in m){const L=m[A];if(L.length===0)continue;const P=(0,n.propertyInData)(v,x,A,$.opts.ownProperties);d.setParams({property:A,depsCount:L.length,deps:L.join(", ")}),$.allErrors?v.if(P,()=>{for(const q of L)(0,n.checkReportMissingProp)(d,q)}):(v.if((0,t._)`${P} && (${(0,n.checkMissingProp)(d,L,T)})`),(0,n.reportMissingProp)(d,T),v.else())}}e.validatePropertyDeps=l;function u(d,m=d.schema){const{gen:v,data:x,keyword:$,it:T}=d,A=v.name("valid");for(const L in m)(0,r.alwaysValidSchema)(T,m[L])||(v.if((0,n.propertyInData)(v,x,L,T.opts.ownProperties),()=>{const P=d.subschema({keyword:$,schemaProp:L},A);d.mergeValidEvaluated(P,A)},()=>v.var(A,!0)),d.ok(A))}e.validateSchemaDeps=u,e.default=i})(dependencies)),dependencies}var propertyNames={},hasRequiredPropertyNames;function requirePropertyNames(){if(hasRequiredPropertyNames)return propertyNames;hasRequiredPropertyNames=1,Object.defineProperty(propertyNames,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:n})=>(0,e._)`{propertyName: ${n.propertyName}}`},code(n){const{gen:i,schema:a,data:l,it:u}=n;if((0,t.alwaysValidSchema)(u,a))return;const d=i.name("valid");i.forIn("key",l,m=>{n.setParams({propertyName:m}),n.subschema({keyword:"propertyNames",data:m,dataTypes:["string"],propertyName:m,compositeRule:!0},d),i.if((0,e.not)(d),()=>{n.error(!0),u.allErrors||i.break()})}),n.ok(d)}};return propertyNames.default=r,propertyNames}var additionalProperties={},hasRequiredAdditionalProperties;function requireAdditionalProperties(){if(hasRequiredAdditionalProperties)return additionalProperties;hasRequiredAdditionalProperties=1,Object.defineProperty(additionalProperties,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireNames(),n=requireUtil(),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:a})=>(0,t._)`{additionalProperty: ${a.additionalProperty}}`},code(a){const{gen:l,schema:u,parentSchema:d,data:m,errsCount:v,it:x}=a;if(!v)throw new Error("ajv implementation error");const{allErrors:$,opts:T}=x;if(x.props=!0,T.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(x,u))return;const A=(0,e.allSchemaProperties)(d.properties),L=(0,e.allSchemaProperties)(d.patternProperties);P(),a.ok((0,t._)`${v} === ${r.default.errors}`);function P(){l.forIn("key",m,B=>{!A.length&&!L.length?D(B):l.if(q(B),()=>D(B))})}function q(B){let H;if(A.length>8){const X=(0,n.schemaRefOrVal)(x,d.properties,"properties");H=(0,e.isOwnProperty)(l,X,B)}else A.length?H=(0,t.or)(...A.map(X=>(0,t._)`${B} === ${X}`)):H=t.nil;return L.length&&(H=(0,t.or)(H,...L.map(X=>(0,t._)`${(0,e.usePattern)(a,X)}.test(${B})`))),(0,t.not)(H)}function C(B){l.code((0,t._)`delete ${m}[${B}]`)}function D(B){if(T.removeAdditional==="all"||T.removeAdditional&&u===!1){C(B);return}if(u===!1){a.setParams({additionalProperty:B}),a.error(),$||l.break();return}if(typeof u=="object"&&!(0,n.alwaysValidSchema)(x,u)){const H=l.name("valid");T.removeAdditional==="failing"?(G(B,H,!1),l.if((0,t.not)(H),()=>{a.reset(),C(B)})):(G(B,H),$||l.if((0,t.not)(H),()=>l.break()))}}function G(B,H,X){const re={keyword:"additionalProperties",dataProp:B,dataPropType:n.Type.Str};X===!1&&Object.assign(re,{compositeRule:!0,createErrors:!1,allErrors:!1}),a.subschema(re,H)}}};return additionalProperties.default=i,additionalProperties}var properties$1={},hasRequiredProperties;function requireProperties(){if(hasRequiredProperties)return properties$1;hasRequiredProperties=1,Object.defineProperty(properties$1,"__esModule",{value:!0});const e=requireValidate(),t=requireCode(),r=requireUtil(),n=requireAdditionalProperties(),i={keyword:"properties",type:"object",schemaType:"object",code(a){const{gen:l,schema:u,parentSchema:d,data:m,it:v}=a;v.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(v,n.default,"additionalProperties"));const x=(0,t.allSchemaProperties)(u);for(const P of x)v.definedProperties.add(P);v.opts.unevaluated&&x.length&&v.props!==!0&&(v.props=r.mergeEvaluated.props(l,(0,r.toHash)(x),v.props));const $=x.filter(P=>!(0,r.alwaysValidSchema)(v,u[P]));if($.length===0)return;const T=l.name("valid");for(const P of $)A(P)?L(P):(l.if((0,t.propertyInData)(l,m,P,v.opts.ownProperties)),L(P),v.allErrors||l.else().var(T,!0),l.endIf()),a.it.definedProperties.add(P),a.ok(T);function A(P){return v.opts.useDefaults&&!v.compositeRule&&u[P].default!==void 0}function L(P){a.subschema({keyword:"properties",schemaProp:P,dataProp:P},T)}}};return properties$1.default=i,properties$1}var patternProperties={},hasRequiredPatternProperties;function requirePatternProperties(){if(hasRequiredPatternProperties)return patternProperties;hasRequiredPatternProperties=1,Object.defineProperty(patternProperties,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireUtil(),n=requireUtil(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(a){const{gen:l,schema:u,data:d,parentSchema:m,it:v}=a,{opts:x}=v,$=(0,e.allSchemaProperties)(u),T=$.filter(G=>(0,r.alwaysValidSchema)(v,u[G]));if($.length===0||T.length===$.length&&(!v.opts.unevaluated||v.props===!0))return;const A=x.strictSchema&&!x.allowMatchingProperties&&m.properties,L=l.name("valid");v.props!==!0&&!(v.props instanceof t.Name)&&(v.props=(0,n.evaluatedPropsToName)(l,v.props));const{props:P}=v;q();function q(){for(const G of $)A&&C(G),v.allErrors?D(G):(l.var(L,!0),D(G),l.if(L))}function C(G){for(const B in A)new RegExp(G).test(B)&&(0,r.checkStrictMode)(v,`property ${B} matches pattern ${G} (use allowMatchingProperties)`)}function D(G){l.forIn("key",d,B=>{l.if((0,t._)`${(0,e.usePattern)(a,G)}.test(${B})`,()=>{const H=T.includes(G);H||a.subschema({keyword:"patternProperties",schemaProp:G,dataProp:B,dataPropType:n.Type.Str},L),v.opts.unevaluated&&P!==!0?l.assign((0,t._)`${P}[${B}]`,!0):!H&&!v.allErrors&&l.if((0,t.not)(L),()=>l.break())})})}}};return patternProperties.default=i,patternProperties}var not={},hasRequiredNot;function requireNot(){if(hasRequiredNot)return not;hasRequiredNot=1,Object.defineProperty(not,"__esModule",{value:!0});const e=requireUtil(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:i,it:a}=r;if((0,e.alwaysValidSchema)(a,i)){r.fail();return}const l=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),r.failResult(l,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return not.default=t,not}var anyOf={},hasRequiredAnyOf;function requireAnyOf(){if(hasRequiredAnyOf)return anyOf;hasRequiredAnyOf=1,Object.defineProperty(anyOf,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf.default=e,anyOf}var oneOf={},hasRequiredOneOf;function requireOneOf(){if(hasRequiredOneOf)return oneOf;hasRequiredOneOf=1,Object.defineProperty(oneOf,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:n})=>(0,e._)`{passingSchemas: ${n.passing}}`},code(n){const{gen:i,schema:a,parentSchema:l,it:u}=n;if(!Array.isArray(a))throw new Error("ajv implementation error");if(u.opts.discriminator&&l.discriminator)return;const d=a,m=i.let("valid",!1),v=i.let("passing",null),x=i.name("_valid");n.setParams({passing:v}),i.block($),n.result(m,()=>n.reset(),()=>n.error(!0));function $(){d.forEach((T,A)=>{let L;(0,t.alwaysValidSchema)(u,T)?i.var(x,!0):L=n.subschema({keyword:"oneOf",schemaProp:A,compositeRule:!0},x),A>0&&i.if((0,e._)`${x} && ${m}`).assign(m,!1).assign(v,(0,e._)`[${v}, ${A}]`).else(),i.if(x,()=>{i.assign(m,!0),i.assign(v,A),L&&n.mergeEvaluated(L,e.Name)})})}}};return oneOf.default=r,oneOf}var allOf={},hasRequiredAllOf;function requireAllOf(){if(hasRequiredAllOf)return allOf;hasRequiredAllOf=1,Object.defineProperty(allOf,"__esModule",{value:!0});const e=requireUtil(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:i,it:a}=r;if(!Array.isArray(i))throw new Error("ajv implementation error");const l=n.name("valid");i.forEach((u,d)=>{if((0,e.alwaysValidSchema)(a,u))return;const m=r.subschema({keyword:"allOf",schemaProp:d},l);r.ok(l),r.mergeEvaluated(m)})}};return allOf.default=t,allOf}var _if={},hasRequired_if;function require_if(){if(hasRequired_if)return _if;hasRequired_if=1,Object.defineProperty(_if,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:i})=>(0,e.str)`must match "${i.ifClause}" schema`,params:({params:i})=>(0,e._)`{failingKeyword: ${i.ifClause}}`},code(i){const{gen:a,parentSchema:l,it:u}=i;l.then===void 0&&l.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const d=n(u,"then"),m=n(u,"else");if(!d&&!m)return;const v=a.let("valid",!0),x=a.name("_valid");if($(),i.reset(),d&&m){const A=a.let("ifClause");i.setParams({ifClause:A}),a.if(x,T("then",A),T("else",A))}else d?a.if(x,T("then")):a.if((0,e.not)(x),T("else"));i.pass(v,()=>i.error(!0));function $(){const A=i.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},x);i.mergeEvaluated(A)}function T(A,L){return()=>{const P=i.subschema({keyword:A},x);a.assign(v,x),i.mergeValidEvaluated(P,v),L?a.assign(L,(0,e._)`${A}`):i.setParams({ifClause:A})}}}};function n(i,a){const l=i.schema[a];return l!==void 0&&!(0,t.alwaysValidSchema)(i,l)}return _if.default=r,_if}var thenElse={},hasRequiredThenElse;function requireThenElse(){if(hasRequiredThenElse)return thenElse;hasRequiredThenElse=1,Object.defineProperty(thenElse,"__esModule",{value:!0});const e=requireUtil(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:i}){n.if===void 0&&(0,e.checkStrictMode)(i,`"${r}" without "if" is ignored`)}};return thenElse.default=t,thenElse}var hasRequiredApplicator;function requireApplicator(){if(hasRequiredApplicator)return applicator;hasRequiredApplicator=1,Object.defineProperty(applicator,"__esModule",{value:!0});const e=requireAdditionalItems(),t=requirePrefixItems(),r=requireItems(),n=requireItems2020(),i=requireContains(),a=requireDependencies(),l=requirePropertyNames(),u=requireAdditionalProperties(),d=requireProperties(),m=requirePatternProperties(),v=requireNot(),x=requireAnyOf(),$=requireOneOf(),T=requireAllOf(),A=require_if(),L=requireThenElse();function P(q=!1){const C=[v.default,x.default,$.default,T.default,A.default,L.default,l.default,u.default,a.default,d.default,m.default];return q?C.push(t.default,n.default):C.push(e.default,r.default),C.push(i.default),C}return applicator.default=P,applicator}var format$1={},format={},hasRequiredFormat$1;function requireFormat$1(){if(hasRequiredFormat$1)return format;hasRequiredFormat$1=1,Object.defineProperty(format,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,n){const{gen:i,data:a,$data:l,schema:u,schemaCode:d,it:m}=r,{opts:v,errSchemaPath:x,schemaEnv:$,self:T}=m;if(!v.validateFormats)return;l?A():L();function A(){const P=i.scopeValue("formats",{ref:T.formats,code:v.code.formats}),q=i.const("fDef",(0,e._)`${P}[${d}]`),C=i.let("fType"),D=i.let("format");i.if((0,e._)`typeof ${q} == "object" && !(${q} instanceof RegExp)`,()=>i.assign(C,(0,e._)`${q}.type || "string"`).assign(D,(0,e._)`${q}.validate`),()=>i.assign(C,(0,e._)`"string"`).assign(D,q)),r.fail$data((0,e.or)(G(),B()));function G(){return v.strictSchema===!1?e.nil:(0,e._)`${d} && !${D}`}function B(){const H=$.$async?(0,e._)`(${q}.async ? await ${D}(${a}) : ${D}(${a}))`:(0,e._)`${D}(${a})`,X=(0,e._)`(typeof ${D} == "function" ? ${H} : ${D}.test(${a}))`;return(0,e._)`${D} && ${D} !== true && ${C} === ${n} && !${X}`}}function L(){const P=T.formats[u];if(!P){G();return}if(P===!0)return;const[q,C,D]=B(P);q===n&&r.pass(H());function G(){if(v.strictSchema===!1){T.logger.warn(X());return}throw new Error(X());function X(){return`unknown format "${u}" ignored in schema at path "${x}"`}}function B(X){const re=X instanceof RegExp?(0,e.regexpCode)(X):v.code.formats?(0,e._)`${v.code.formats}${(0,e.getProperty)(u)}`:void 0,pe=i.scopeValue("formats",{key:u,ref:X,code:re});return typeof X=="object"&&!(X instanceof RegExp)?[X.type||"string",X.validate,(0,e._)`${pe}.validate`]:["string",X,pe]}function H(){if(typeof P=="object"&&!(P instanceof RegExp)&&P.async){if(!$.$async)throw new Error("async format in sync schema");return(0,e._)`await ${D}(${a})`}return typeof C=="function"?(0,e._)`${D}(${a})`:(0,e._)`${D}.test(${a})`}}}};return format.default=t,format}var hasRequiredFormat;function requireFormat(){if(hasRequiredFormat)return format$1;hasRequiredFormat=1,Object.defineProperty(format$1,"__esModule",{value:!0});const e=[requireFormat$1().default];return format$1.default=e,format$1}var metadata={},hasRequiredMetadata;function requireMetadata(){return hasRequiredMetadata||(hasRequiredMetadata=1,Object.defineProperty(metadata,"__esModule",{value:!0}),metadata.contentVocabulary=metadata.metadataVocabulary=void 0,metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata}var hasRequiredDraft7;function requireDraft7(){if(hasRequiredDraft7)return draft7;hasRequiredDraft7=1,Object.defineProperty(draft7,"__esModule",{value:!0});const e=requireCore(),t=requireValidation(),r=requireApplicator(),n=requireFormat(),i=requireMetadata(),a=[e.default,t.default,(0,r.default)(),n.default,i.metadataVocabulary,i.contentVocabulary];return draft7.default=a,draft7}var discriminator={},types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(types.DiscrError=e={})),types}var hasRequiredDiscriminator;function requireDiscriminator(){if(hasRequiredDiscriminator)return discriminator;hasRequiredDiscriminator=1,Object.defineProperty(discriminator,"__esModule",{value:!0});const e=requireCodegen(),t=requireTypes(),r=requireCompile(),n=requireRef_error(),i=requireUtil(),a={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:l,tagName:u}})=>l===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:l,tag:u,tagName:d}})=>(0,e._)`{error: ${l}, tag: ${d}, tagValue: ${u}}`},code(l){const{gen:u,data:d,schema:m,parentSchema:v,it:x}=l,{oneOf:$}=v;if(!x.opts.discriminator)throw new Error("discriminator: requires discriminator option");const T=m.propertyName;if(typeof T!="string")throw new Error("discriminator: requires propertyName");if(m.mapping)throw new Error("discriminator: mapping is not supported");if(!$)throw new Error("discriminator: requires oneOf keyword");const A=u.let("valid",!1),L=u.const("tag",(0,e._)`${d}${(0,e.getProperty)(T)}`);u.if((0,e._)`typeof ${L} == "string"`,()=>P(),()=>l.error(!1,{discrError:t.DiscrError.Tag,tag:L,tagName:T})),l.ok(A);function P(){const D=C();u.if(!1);for(const G in D)u.elseIf((0,e._)`${L} === ${G}`),u.assign(A,q(D[G]));u.else(),l.error(!1,{discrError:t.DiscrError.Mapping,tag:L,tagName:T}),u.endIf()}function q(D){const G=u.name("valid"),B=l.subschema({keyword:"oneOf",schemaProp:D},G);return l.mergeEvaluated(B,e.Name),G}function C(){var D;const G={},B=X(v);let H=!0;for(let $e=0;$e<$.length;$e++){let ke=$[$e];if(ke?.$ref&&!(0,i.schemaHasRulesButRef)(ke,x.self.RULES)){const Ye=ke.$ref;if(ke=r.resolveRef.call(x.self,x.schemaEnv.root,x.baseId,Ye),ke instanceof r.SchemaEnv&&(ke=ke.schema),ke===void 0)throw new n.default(x.opts.uriResolver,x.baseId,Ye)}const Ne=(D=ke?.properties)===null||D===void 0?void 0:D[T];if(typeof Ne!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${T}"`);H=H&&(B||X(ke)),re(Ne,$e)}if(!H)throw new Error(`discriminator: "${T}" must be required`);return G;function X({required:$e}){return Array.isArray($e)&&$e.includes(T)}function re($e,ke){if($e.const)pe($e.const,ke);else if($e.enum)for(const Ne of $e.enum)pe(Ne,ke);else throw new Error(`discriminator: "properties/${T}" must have "const" or "enum"`)}function pe($e,ke){if(typeof $e!="string"||$e in G)throw new Error(`discriminator: "${T}" values must be unique strings`);G[$e]=ke}}}};return discriminator.default=a,discriminator}const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type,properties,default:!0};var hasRequiredAjv;function requireAjv(){return hasRequiredAjv||(hasRequiredAjv=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=requireCore$1(),n=requireDraft7(),i=requireDiscriminator(),a=require$$3,l=["/properties"],u="http://json-schema.org/draft-07/schema";class d extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(A=>this.addVocabulary(A)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const A=this.opts.$data?this.$dataMetaSchema(a,l):a;this.addMetaSchema(A,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=d,e.exports=t=d,e.exports.Ajv=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var m=requireValidate();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var v=requireCodegen();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return v._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return v.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return v.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return v.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return v.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return v.CodeGen}});var x=requireValidation_error();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return x.default}});var $=requireRef_error();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return $.default}})})(ajv,ajv.exports)),ajv.exports}requireAjv();function __awaiter(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(v){try{m(n.next(v))}catch(x){l(x)}}function d(v){try{m(n.throw(v))}catch(x){l(x)}}function m(v){v.done?a(v.value):i(v.value).then(u,d)}m((n=n.apply(e,[])).next())})}function __generator(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(m){return function(v){return d([m,v])}}function d(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=m[0]&2?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,i=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(v){m=[6,v],i=0}finally{n=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],l;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){l={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a}function __spreadArray(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var defaultErrorConfig={withStackTrace:!1},createNeverThrowError=function(e,t,r){r===void 0&&(r=defaultErrorConfig);var n=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},i=r.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:i}},Result;(function(e){function t(r,n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];try{var l=r.apply(void 0,__spreadArray([],__read(i),!1));return ok(l)}catch(u){return err(n?n(u):u)}}}e.fromThrowable=t})(Result||(Result={}));var ok=function(e){return new Ok(e)},err=function(e){return new Err(e)},Ok=(function(){function e(t){this.value=t}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok(t(this.value))},e.prototype.mapErr=function(t){return ok(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.orElse=function(t){return ok(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync.fromSafePromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype.match=function(t,r){return t(this.value)},e.prototype._unsafeUnwrap=function(t){return this.value},e.prototype._unsafeUnwrapErr=function(t){throw createNeverThrowError("Called `_unsafeUnwrapErr` on an Ok",this,t)},e})(),Err=(function(){function e(t){this.error=t}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err(this.error)},e.prototype.mapErr=function(t){return err(t(this.error))},e.prototype.andThen=function(t){return err(this.error)},e.prototype.orElse=function(t){return t(this.error)},e.prototype.asyncAndThen=function(t){return errAsync(this.error)},e.prototype.asyncMap=function(t){return errAsync(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype.match=function(t,r){return r(this.error)},e.prototype._unsafeUnwrap=function(t){throw createNeverThrowError("Called `_unsafeUnwrap` on an Err",this,t)},e.prototype._unsafeUnwrapErr=function(t){return this.error},e})();Result.fromThrowable;var ResultAsync=(function(){function e(t){this._promise=t}return e.fromSafePromise=function(t){var r=t.then(function(n){return new Ok(n)});return new e(r)},e.fromPromise=function(t,r){var n=t.then(function(i){return new Ok(i)}).catch(function(i){return new Err(r(i))});return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:return n.isErr()?[2,new Err(n.error)]:(i=Ok.bind,[4,t(n.value)]);case 1:return[2,new(i.apply(Ok,[void 0,a.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){var i;return __generator(this,function(a){switch(a.label){case 0:return n.isOk()?[2,new Ok(n.value)]:(i=Err.bind,[4,t(n.error)]);case 1:return[2,new(i.apply(Err,[void 0,a.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.orElse=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(i){return n.isErr()?[2,t(n.error)]:[2,new Ok(n.value)]})})}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t,r){return this._promise.then(t,r)},e})(),errAsync=function(e){return new ResultAsync(Promise.resolve(new Err(e)))};ResultAsync.fromPromise;ResultAsync.fromSafePromise;let blockEndNewlines;try{blockEndNewlines=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{blockEndNewlines=/\n+(?!\n|$)/g}new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function decodeImplVars(e){const t={};for(const[r,n]of Object.entries(e.varInstances)){const i=[];for(const a of n){const l=e.varTypes[a[0]],u=e.variables[a[1]];let d=u.i,m=u.n;if(a.length>2){const x=[],$=[],T=(a.length-2)/2,A=a.slice(2,2+T);for(const L of A){const P=e.subscripts[L];x.push(P.i),$.push(P.n)}d+=`[${x.join(",")}]`,m+=`[${$.join(",")}]`}const v={varId:d,varName:m,varType:l,varIndex:u.x,subscriptIndices:a.length>2?a.slice(2+(a.length-2)/2):void 0};i.push(v)}t[r]=i}return t}function getImplVars(e){const t=decodeImplVars(e),r=new Map,n=[];function i(a,l){const u=[];for(const d of l){if(d.varType==="lookup"||d.varType==="data")continue;const m=`ModelImpl_${d.varId}`;r.set(m,d),u.push(m)}n.push({title:a,fn:a,datasetKeys:u})}return i("initConstants",t.constants||[]),i("initLevels",t.initVars||[]),i("evalLevels",t.levelVars||[]),i("evalAux",t.auxVars||[]),{implVars:r,implVarGroups:n}}function getInputVars(e){const t=new Map;for(const r of e){const n=r.varId,i={inputId:r.inputId,varId:n,varName:r.varName,defaultValue:r.defaultValue,minValue:r.minValue,maxValue:r.maxValue,value:createInputValue(n,r.defaultValue)};t.set(n,i)}return t}function setInputsForScenario(e,t){function r(m,v){v<m.minValue?(console.warn(`WARNING: Scenario input value ${v} is < min value (${m.minValue}) for input '${m.varName}'`),v=m.minValue):v>m.maxValue&&(console.warn(`WARNING: Scenario input value ${v} is > max value (${m.maxValue}) for input '${m.varName}'`),v=m.maxValue),m.value.set(v)}function n(m){m.value.reset()}function i(m){m.value.set(m.minValue)}function a(m){m.value.set(m.maxValue)}function l(){e.forEach(n)}function u(){e.forEach(i)}function d(){e.forEach(a)}switch(t.kind){case"all-inputs":{switch(t.position){case"at-default":l();break;case"at-minimum":u();break;case"at-maximum":d();break}break}case"input-settings":{l();for(const m of t.settings){const v=e.get(m.inputVarId);if(v)switch(m.kind){case"position":switch(m.position){case"at-default":n(v);break;case"at-minimum":i(v);break;case"at-maximum":a(v);break;default:assertNeverExports.assertNever(m.position)}break;case"value":r(v,m.value);break;default:assertNeverExports.assertNever(m)}else console.log(`No model input for scenario input ${m.inputVarId}`)}break}default:assertNeverExports.assertNever(t)}}function getOutputVars(e){const t=new Map;for(const r of e){const n=r.varId,i=datasetKeyForOutputVar(void 0,n);t.set(i,{datasetKey:i,sourceName:void 0,varId:n,varName:r.varName})}return t}function datasetKeyForOutputVar(e,t){return`Model_${t}`}const inputSpecs=[{inputId:"1",varId:"_initial_contact_rate",varName:"Initial Contact Rate",defaultValue:2.5,minValue:0,maxValue:5},{inputId:"2",varId:"_infectivity_i",varName:"Infectivity i",defaultValue:.25,minValue:-2,maxValue:2},{inputId:"3",varId:"_average_duration_of_illness_d",varName:"Average Duration of Illness d",defaultValue:2,minValue:0,maxValue:10}],outputSpecs=[{varId:"_infection_rate",varName:"Infection Rate"},{varId:"_infectious_population_i",varName:"Infectious Population I"},{varId:"_recovered_population_r",varName:"Recovered Population R"},{varId:"_recovery_rate",varName:"Recovery Rate"},{varId:"_susceptible_population_s",varName:"Susceptible Population S"}],encodedImplVars={subscripts:[],variables:[{n:"Average Duration of Illness d",i:"_average_duration_of_illness_d",x:1},{n:"FINAL TIME",i:"_final_time",x:2},{n:"INITIAL TIME",i:"_initial_time",x:3},{n:"Infectivity i",i:"_infectivity_i",x:4},{n:"Initial Contact Rate",i:"_initial_contact_rate",x:5},{n:"SAVEPER",i:"_saveper",x:6},{n:"TIME STEP",i:"_time_step",x:7},{n:"Total Population P",i:"_total_population_p",x:8},{n:"Recovered Population R",i:"_recovered_population_r",x:9},{n:"Infectious Population I",i:"_infectious_population_i",x:10},{n:"Susceptible Population S",i:"_susceptible_population_s",x:11},{n:"Recovery Rate",i:"_recovery_rate",x:12},{n:"Contact Rate c",i:"_contact_rate_c",x:13},{n:"Infection Rate",i:"_infection_rate",x:14}],varTypes:["const","level","aux"],varInstances:{constants:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7]],lookupVars:[],dataVars:[],initVars:[[1,8],[1,9],[1,10]],levelVars:[[1,9],[1,8],[1,10]],auxVars:[[2,11],[2,12],[2,13]]}},modelSizeInBytes=7601,dataSizeInBytes=0,modelWorkerJs='(function(){"use strict";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var worker={},isObservable,hasRequiredIsObservable;function requireIsObservable(){return hasRequiredIsObservable||(hasRequiredIsObservable=1,isObservable=e=>e?typeof Symbol.observable=="symbol"&&typeof e[Symbol.observable]=="function"?e===e[Symbol.observable]():typeof e["@@observable"]=="function"?e===e["@@observable"]():!1:!1),isObservable}var common={},serializers={},hasRequiredSerializers;function requireSerializers(){if(hasRequiredSerializers)return serializers;hasRequiredSerializers=1,Object.defineProperty(serializers,"__esModule",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0;function e(t,r){const i=t.deserialize.bind(t),o=t.serialize.bind(t);return{deserialize(a){return r.deserialize(a,i)},serialize(a){return r.serialize(a,o)}}}serializers.extendSerializer=e;const n={deserialize(t){return Object.assign(Error(t.message),{name:t.name,stack:t.stack})},serialize(t){return{__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack}}},s=t=>t&&typeof t=="object"&&"__error_marker"in t&&t.__error_marker==="$$error";return serializers.DefaultSerializer={deserialize(t){return s(t)?n.deserialize(t):t},serialize(t){return t instanceof Error?n.serialize(t):t}},serializers}var hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1,Object.defineProperty(common,"__esModule",{value:!0}),common.serialize=common.deserialize=common.registerSerializer=void 0;const e=requireSerializers();let n=e.DefaultSerializer;function s(i){n=e.extendSerializer(n,i)}common.registerSerializer=s;function t(i){return n.deserialize(i)}common.deserialize=t;function r(i){return n.serialize(i)}return common.serialize=r,common}var transferable={},symbols={},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,Object.defineProperty(symbols,"__esModule",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol("thread.errors"),symbols.$events=Symbol("thread.events"),symbols.$terminate=Symbol("thread.terminate"),symbols.$transferable=Symbol("thread.transferable"),symbols.$worker=Symbol("thread.worker")),symbols}var hasRequiredTransferable;function requireTransferable(){if(hasRequiredTransferable)return transferable;hasRequiredTransferable=1,Object.defineProperty(transferable,"__esModule",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;const e=requireSymbols();function n(r){return!(!r||typeof r!="object")}function s(r){return r&&typeof r=="object"&&r[e.$transferable]}transferable.isTransferDescriptor=s;function t(r,i){if(!i){if(!n(r))throw Error();i=[r]}return{[e.$transferable]:!0,send:r,transferables:i}}return transferable.Transfer=t,transferable}var messages={},hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageType=e.MasterMessageType=void 0,(function(n){n.cancel="cancel",n.run="run"})(e.MasterMessageType||(e.MasterMessageType={})),(function(n){n.error="error",n.init="init",n.result="result",n.running="running",n.uncaughtError="uncaughtError"})(e.WorkerMessageType||(e.WorkerMessageType={}))})(messages)),messages}var implementation={},implementation_browser={},hasRequiredImplementation_browser;function requireImplementation_browser(){if(hasRequiredImplementation_browser)return implementation_browser;hasRequiredImplementation_browser=1,Object.defineProperty(implementation_browser,"__esModule",{value:!0});const e=function(){const r=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!r)},n=function(r,i){self.postMessage(r,i)},s=function(r){const i=a=>{r(a.data)},o=()=>{self.removeEventListener("message",i)};return self.addEventListener("message",i),o};return implementation_browser.default={isWorkerRuntime:e,postMessageToMaster:n,subscribeToMasterMessages:s},implementation_browser}var implementation_tinyWorker={},hasRequiredImplementation_tinyWorker;function requireImplementation_tinyWorker(){if(hasRequiredImplementation_tinyWorker)return implementation_tinyWorker;hasRequiredImplementation_tinyWorker=1,Object.defineProperty(implementation_tinyWorker,"__esModule",{value:!0}),typeof self>"u"&&(commonjsGlobal.self=commonjsGlobal);const e=function(){return!!(typeof self<"u"&&self.postMessage)},n=function(o){self.postMessage(o)};let s=!1;const t=new Set,r=function(o){return s||(self.addEventListener("message",(c=>{t.forEach(l=>l(c.data))})),s=!0),t.add(o),()=>t.delete(o)};return implementation_tinyWorker.default={isWorkerRuntime:e,postMessageToMaster:n,subscribeToMasterMessages:r},implementation_tinyWorker}var implementation_worker_threads={},worker_threads={},hasRequiredWorker_threads;function requireWorker_threads(){if(hasRequiredWorker_threads)return worker_threads;hasRequiredWorker_threads=1,Object.defineProperty(worker_threads,"__esModule",{value:!0});let implementation;function selectImplementation(){return typeof __non_webpack_require__=="function"?__non_webpack_require__("worker_threads"):eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}return worker_threads.default=getImplementation,worker_threads}var hasRequiredImplementation_worker_threads;function requireImplementation_worker_threads(){if(hasRequiredImplementation_worker_threads)return implementation_worker_threads;hasRequiredImplementation_worker_threads=1;var e=implementation_worker_threads&&implementation_worker_threads.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(implementation_worker_threads,"__esModule",{value:!0});const n=e(requireWorker_threads());function s(a){if(!a)throw Error("Invariant violation: MessagePort to parent is not available.");return a}const t=function(){return!n.default().isMainThread},r=function(c,l){s(n.default().parentPort).postMessage(c,l)},i=function(c){const l=n.default().parentPort;if(!l)throw Error("Invariant violation: MessagePort to parent is not available.");const d=g=>{c(g)},p=()=>{s(l).off("message",d)};return s(l).on("message",d),p};function o(){n.default()}return implementation_worker_threads.default={isWorkerRuntime:t,postMessageToMaster:r,subscribeToMasterMessages:i,testImplementation:o},implementation_worker_threads}var hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var e=implementation&&implementation.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(implementation,"__esModule",{value:!0});const n=e(requireImplementation_browser()),s=e(requireImplementation_tinyWorker()),t=e(requireImplementation_worker_threads()),r=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function i(){try{return t.default.testImplementation(),t.default}catch{return s.default}}return implementation.default=r?i():n.default,implementation}var hasRequiredWorker;function requireWorker(){return hasRequiredWorker||(hasRequiredWorker=1,(function(e){var n=worker&&worker.__awaiter||function(u,f,v,w){function O(k){return k instanceof v?k:new v(function(B){B(k)})}return new(v||(v=Promise))(function(k,B){function A(R){try{z(w.next(R))}catch(W){B(W)}}function P(R){try{z(w.throw(R))}catch(W){B(W)}}function z(R){R.done?k(R.value):O(R.value).then(A,P)}z((w=w.apply(u,f||[])).next())})},s=worker&&worker.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;const t=s(requireIsObservable()),r=requireCommon(),i=requireTransferable(),o=requireMessages(),a=s(requireImplementation());var c=requireCommon();Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return c.registerSerializer}});var l=requireTransferable();Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return l.Transfer}}),e.isWorkerRuntime=a.default.isWorkerRuntime;let d=!1;const p=new Map,g=u=>u&&u.type===o.MasterMessageType.cancel,_=u=>u&&u.type===o.MasterMessageType.run,I=u=>t.default(u)||T(u);function T(u){return u&&typeof u=="object"&&typeof u.subscribe=="function"}function E(u){return i.isTransferDescriptor(u)?{payload:u.send,transferables:u.transferables}:{payload:u,transferables:void 0}}function S(){const u={type:o.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(u)}function y(u){const f={type:o.WorkerMessageType.init,exposed:{type:"module",methods:u}};a.default.postMessageToMaster(f)}function h(u,f){const{payload:v,transferables:w}=E(f),O={type:o.WorkerMessageType.error,uid:u,error:r.serialize(v)};a.default.postMessageToMaster(O,w)}function m(u,f,v){const{payload:w,transferables:O}=E(v),k={type:o.WorkerMessageType.result,uid:u,complete:f?!0:void 0,payload:w};a.default.postMessageToMaster(k,O)}function L(u,f){const v={type:o.WorkerMessageType.running,uid:u,resultType:f};a.default.postMessageToMaster(v)}function b(u){try{const f={type:o.WorkerMessageType.uncaughtError,error:r.serialize(u)};a.default.postMessageToMaster(f)}catch(f){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:`,f,`\nOriginal error:`,u)}}function M(u,f,v){return n(this,void 0,void 0,function*(){let w;try{w=f(...v)}catch(k){return h(u,k)}const O=I(w)?"observable":"promise";if(L(u,O),I(w)){const k=w.subscribe(B=>m(u,!1,r.serialize(B)),B=>{h(u,r.serialize(B)),p.delete(u)},()=>{m(u,!0),p.delete(u)});p.set(u,k)}else try{const k=yield w;m(u,!0,r.serialize(k))}catch(k){h(u,r.serialize(k))}})}function q(u){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(d)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(d=!0,typeof u=="function")a.default.subscribeToMasterMessages(f=>{_(f)&&!f.method&&M(f.uid,u,f.args.map(r.deserialize))}),S();else if(typeof u=="object"&&u){a.default.subscribeToMasterMessages(v=>{_(v)&&v.method&&M(v.uid,u[v.method],v.args.map(r.deserialize))});const f=Object.keys(u).filter(v=>typeof u[v]=="function");y(f)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${u}`);a.default.subscribeToMasterMessages(f=>{if(g(f)){const v=f.uid,w=p.get(v);w&&(w.unsubscribe(),p.delete(v))}})}e.expose=q,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",u=>{setTimeout(()=>b(u.error||u),250)}),self.addEventListener("unhandledrejection",u=>{const f=u.reason;f&&typeof f.message=="string"&&setTimeout(()=>b(f),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",u=>{setTimeout(()=>b(u),250)}),process.on("unhandledRejection",u=>{u&&typeof u.message=="string"&&setTimeout(()=>b(u),250)}))})(worker)),worker}var workerExports=requireWorker();const WorkerContext=getDefaultExportFromCjs(workerExports),expose=WorkerContext.expose;WorkerContext.registerSerializer;const Transfer=WorkerContext.Transfer;function getEncodedVarIndicesLength(e){var n;let s=1;for(const t of e){s+=2;const r=((n=t.subscriptIndices)==null?void 0:n.length)||0;s+=r}return s}function encodeVarIndices(e,n){let s=0;n[s++]=e.length;for(const t of e){n[s++]=t.varIndex;const r=t.subscriptIndices,i=r?.length||0;n[s++]=i;for(let o=0;o<i;o++)n[s++]=r[o]}}function getEncodedLookupBufferLengths(e){var n,s;let t=1,r=0;for(const i of e){const o=i.varRef.varSpec;if(o===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");t+=2;const a=((n=o.subscriptIndices)==null?void 0:n.length)||0;t+=a,t+=2,r+=((s=i.points)==null?void 0:s.length)||0}return{lookupIndicesLength:t,lookupsLength:r}}function encodeLookups(e,n,s){let t=0;n[t++]=e.length;let r=0;for(const i of e){const o=i.varRef.varSpec;n[t++]=o.varIndex;const a=o.subscriptIndices,c=a?.length||0;n[t++]=c;for(let l=0;l<c;l++)n[t++]=a[l];i.points!==void 0?(n[t++]=r,n[t++]=i.points.length,s?.set(i.points,r),r+=i.points.length):(n[t++]=-1,n[t++]=0)}}function decodeLookups(e,n){const s=[];let t=0;const r=e[t++];for(let i=0;i<r;i++){const o=e[t++],a=e[t++],c=a>0?Array(a):void 0;for(let _=0;_<a;_++)c[_]=e[t++];const l=e[t++],d=e[t++],p={varIndex:o,subscriptIndices:c};let g;l>=0?n?g=n.slice(l,l+d):g=new Float64Array(0):g=void 0,s.push({varRef:{varSpec:p},points:g})}return s}function resolveVarRef(e,n,s){if(!n.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${s} variable references by name or identifier when model listing is unavailable`);if(n.varId){const t=e?.getSpecForVarId(n.varId);if(t)n.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varId=${n.varId}`)}else{const t=e?.getSpecForVarName(n.varName);if(t)n.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varName=\'${n.varId}\'`)}}}var headerLengthInElements=16,extrasLengthInElements=1,Int32Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,n,s){this.view=s>0?new Int32Array(e,n,s):void 0,this.offsetInBytes=n,this.lengthInElements=s}},Float64Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,n,s){this.view=s>0?new Float64Array(e,n,s):void 0,this.offsetInBytes=n,this.lengthInElements=s}},BufferedRunModelParams=class{constructor(e){this.listing=e,this.header=new Int32Section,this.extras=new Float64Section,this.inputs=new Float64Section,this.outputs=new Float64Section,this.outputIndices=new Int32Section,this.lookups=new Float64Section,this.lookupIndices=new Int32Section}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(e,n){this.inputs.lengthInElements!==0&&((e===void 0||e.length<this.inputs.lengthInElements)&&(e=n(this.inputs.lengthInElements)),e.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(e,n){this.outputIndices.lengthInElements!==0&&((e===void 0||e.length<this.outputIndices.lengthInElements)&&(e=n(this.outputIndices.lengthInElements)),e.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(e){this.outputs.view!==void 0&&(e.length>this.outputs.view.length?this.outputs.view.set(e.subarray(0,this.outputs.view.length)):this.outputs.view.set(e))}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(e){this.extras.view[0]=e}finalizeOutputs(e){this.outputs.view&&e.updateFromBuffer(this.outputs.view,e.seriesLength),e.runTimeInMillis=this.getElapsedTime()}updateFromParams(e,n,s){const t=e.length,r=n.varIds.length*n.seriesLength;let i;const o=n.varSpecs;o!==void 0&&o.length>0?i=getEncodedVarIndicesLength(o):i=0;let a,c;if(s?.lookups!==void 0&&s.lookups.length>0){for(const M of s.lookups)resolveVarRef(this.listing,M.varRef,"lookup");const b=getEncodedLookupBufferLengths(s.lookups);a=b.lookupsLength,c=b.lookupIndicesLength}else a=0,c=0;let l=0;function d(b,M){const q=l,u=b==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,f=Math.round(M*u),v=Math.ceil(f/8)*8;return l+=v,q}const p=d("int32",headerLengthInElements),g=d("float64",extrasLengthInElements),_=d("float64",t),I=d("float64",r),T=d("int32",i),E=d("float64",a),S=d("int32",c),y=l;if(this.encoded===void 0||this.encoded.byteLength<y){const b=Math.ceil(y*1.2);this.encoded=new ArrayBuffer(b),this.header.update(this.encoded,p,headerLengthInElements)}const h=this.header.view;let m=0;h[m++]=g,h[m++]=extrasLengthInElements,h[m++]=_,h[m++]=t,h[m++]=I,h[m++]=r,h[m++]=T,h[m++]=i,h[m++]=E,h[m++]=a,h[m++]=S,h[m++]=c,this.inputs.update(this.encoded,_,t),this.extras.update(this.encoded,g,extrasLengthInElements),this.outputs.update(this.encoded,I,r),this.outputIndices.update(this.encoded,T,i),this.lookups.update(this.encoded,E,a),this.lookupIndices.update(this.encoded,S,c);const L=this.inputs.view;for(let b=0;b<e.length;b++){const M=e[b];typeof M=="number"?L[b]=M:L[b]=M.get()}this.outputIndices.view&&encodeVarIndices(o,this.outputIndices.view),c>0&&encodeLookups(s.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(e){const n=headerLengthInElements*Int32Array.BYTES_PER_ELEMENT;if(e.byteLength<n)throw new Error("Buffer must be long enough to contain header section");this.encoded=e,this.header.update(this.encoded,0,headerLengthInElements);const t=this.header.view;let r=0;const i=t[r++],o=t[r++],a=t[r++],c=t[r++],l=t[r++],d=t[r++],p=t[r++],g=t[r++],_=t[r++],I=t[r++],T=t[r++],E=t[r++],S=o*Float64Array.BYTES_PER_ELEMENT,y=c*Float64Array.BYTES_PER_ELEMENT,h=d*Float64Array.BYTES_PER_ELEMENT,m=g*Int32Array.BYTES_PER_ELEMENT,L=I*Float64Array.BYTES_PER_ELEMENT,b=E*Int32Array.BYTES_PER_ELEMENT,M=n+S+y+h+m+L+b;if(e.byteLength<M)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,i,o),this.inputs.update(this.encoded,a,c),this.outputs.update(this.encoded,l,d),this.outputIndices.update(this.encoded,p,g),this.lookups.update(this.encoded,_,I),this.lookupIndices.update(this.encoded,T,E)}},_NA_=-Number.MAX_VALUE,JsModelLookup=class{constructor(e,n){if(n&&n.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${n.length} size=${e}`);this.originalData=n,this.originalSize=e,this.dynamicData=void 0,this.dynamicSize=0,this.activeData=this.originalData,this.activeSize=this.originalSize,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}setData(e,n){if(n){if(n.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${n.length} size=${e}`);const s=e*2;if((this.dynamicData===void 0||s>this.dynamicData.length)&&(this.dynamicData=new Float64Array(s)),this.dynamicSize=e,e>0){const t=n.subarray(0,s);this.dynamicData.set(t)}this.activeData=this.dynamicData,this.activeSize=this.dynamicSize}else this.activeData=this.originalData,this.activeSize=this.originalSize;this.invertedData=void 0,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}getValueForX(e,n){return this.getValue(e,!1,n)}getValueForY(e){if(this.invertedData===void 0){const n=this.activeSize*2,s=this.activeData,t=Array(n);for(let r=0;r<n;r+=2)t[r]=s[r+1],t[r+1]=s[r];this.invertedData=t}return this.getValue(e,!0,"interpolate")}getValue(e,n,s){if(this.activeSize===0)return _NA_;const t=n?this.invertedData:this.activeData,r=this.activeSize*2,i=!n;let o;i&&e>=this.lastInput?o=this.lastHitIndex:o=0;for(let a=o;a<r;a+=2){const c=t[a];if(c>=e){if(i&&(this.lastInput=e,this.lastHitIndex=a),a===0||c===e)return t[a+1];switch(s){default:case"interpolate":{const l=t[a-2],d=t[a-1],p=t[a+1],g=c-l,_=p-d;return d+_/g*(e-l)}case"forward":return t[a+1];case"backward":return t[a-1]}}}return i&&(this.lastInput=e,this.lastHitIndex=r),t[r-1]}getValueForGameTime(e,n){if(this.activeSize<=0)return n;const s=this.activeData[0];return e<s?n:this.getValue(e,!1,"backward")}getValueBetweenTimes(e,n){if(this.activeSize===0)return _NA_;const s=this.activeData,t=this.activeSize*2;switch(n){case"forward":{e=Math.floor(e);for(let r=0;r<t;r+=2)if(s[r]>=e)return s[r+1];return s[t-1]}case"backward":{e=Math.floor(e);for(let r=2;r<t;r+=2)if(s[r]>=e)return s[r-1];return t>=4?s[t-3]:s[1]}case"interpolate":default:{if(e-Math.floor(e)>0){let r=`GET DATA BETWEEN TIMES was called with an input value (${e}) that has a fractional part. `;throw r+="When mode is 0 (interpolate) and the input value is not a whole number, Vensim produces unexpected ",r+="results that may differ from those produced by SDEverywhere.",new Error(r)}for(let r=2;r<t;r+=2){const i=s[r];if(i>=e){const o=s[r-2],a=s[r-1],c=s[r+1],l=i-o,d=c-a;return a+d/l*(e-o)}}return s[t-1]}}}},EPSILON=1e-6;function getJsModelFunctions(){let e;const n=new Map,s=new Map;return{setContext(t){e=t},ABS(t){return Math.abs(t)},ARCCOS(t){return Math.acos(t)},ARCSIN(t){return Math.asin(t)},ARCTAN(t){return Math.atan(t)},COS(t){return Math.cos(t)},EXP(t){return Math.exp(t)},GAME(t,r){return t?t.getValueForGameTime(e.currentTime,r):r},INTEG(t,r){return t+r*e.timeStep},INTEGER(t){return Math.trunc(t)},LN(t){return Math.log(t)},MAX(t,r){return Math.max(t,r)},MIN(t,r){return Math.min(t,r)},MODULO(t,r){return t%r},POW(t,r){return Math.pow(t,r)},POWER(t,r){return Math.pow(t,r)},PULSE(t,r){return pulse(e,t,r)},PULSE_TRAIN(t,r,i,o){const a=Math.floor((o-t)/i);for(let c=0;c<=a;c++)if(e.currentTime<=o&&pulse(e,t+c*i,r))return 1;return 0},QUANTUM(t,r){return r<=0?t:r*Math.trunc(t/r)},RAMP(t,r,i){return e.currentTime>r?e.currentTime<i||r>i?t*(e.currentTime-r):t*(i-r):0},SIN(t){return Math.sin(t)},SQRT(t){return Math.sqrt(t)},STEP(t,r){return e.currentTime+e.timeStep/2>r?t:0},TAN(t){return Math.tan(t)},VECTOR_SORT_ORDER(t,r,i){if(r>t.length)throw new Error(`VECTOR SORT ORDER input vector length (${t.length}) must be >= size (${r})`);let o=s.get(r);if(o===void 0){o=Array(r);for(let l=0;l<r;l++)o[l]={x:0,ind:0};s.set(r,o)}let a=n.get(r);a===void 0&&(a=Array(r),n.set(r,a));for(let l=0;l<r;l++)o[l].x=t[l],o[l].ind=l;const c=i>0?1:-1;o.sort((l,d)=>{let p;return l.x<d.x?p=-1:l.x>d.x?p=1:p=0,p*c});for(let l=0;l<r;l++)a[l]=o[l].ind;return a},XIDZ(t,r,i){return Math.abs(r)<EPSILON?i:t/r},ZIDZ(t,r){return Math.abs(r)<EPSILON?0:t/r},createLookup(t,r){return new JsModelLookup(t,r)},LOOKUP(t,r){return t?t.getValueForX(r,"interpolate"):_NA_},LOOKUP_FORWARD(t,r){return t?t.getValueForX(r,"forward"):_NA_},LOOKUP_BACKWARD(t,r){return t?t.getValueForX(r,"backward"):_NA_},LOOKUP_INVERT(t,r){return t?t.getValueForY(r):_NA_},WITH_LOOKUP(t,r){return r?r.getValueForX(t,"interpolate"):_NA_},GET_DATA_BETWEEN_TIMES(t,r,i){let o;return i>=1?o="forward":i<=-1?o="backward":o="interpolate",t?t.getValueBetweenTimes(r,o):_NA_}}}function pulse(e,n,s){const t=e.currentTime+e.timeStep/2;return s===0&&(s=e.timeStep),t>n&&t<n+s?1:0}var isWeb;function perfNow(){return isWeb===void 0&&(isWeb=typeof self<"u"&&self?.performance!==void 0),isWeb?self.performance.now():process==null?void 0:process.hrtime()}function perfElapsed(e){if(isWeb)return self.performance.now()-e;{const n=process.hrtime(e);return(n[0]*1e9+n[1])/1e6}}var BaseRunnableModel=class{constructor(e){this.startTime=e.startTime,this.endTime=e.endTime,this.saveFreq=e.saveFreq,this.numSavePoints=e.numSavePoints,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.onRunModel=e.onRunModel}runModel(e){var n;let s=e.getInputs();s===void 0&&(e.copyInputs(this.inputs,c=>(this.inputs=new Float64Array(c),this.inputs)),s=this.inputs);let t=e.getOutputIndices();t===void 0&&e.getOutputIndicesLength()>0&&(e.copyOutputIndices(this.outputIndices,c=>(this.outputIndices=new Int32Array(c),this.outputIndices)),t=this.outputIndices);const r=e.getOutputsLength();(this.outputs===void 0||this.outputs.length<r)&&(this.outputs=new Float64Array(r));const i=this.outputs,o=perfNow();(n=this.onRunModel)==null||n.call(this,s,i,{outputIndices:t,lookups:e.getLookups()});const a=perfElapsed(o);e.storeOutputs(i),e.storeElapsedTime(a)}terminate(){}};function initJsModel(e){let n=e.getModelFunctions();n===void 0&&(n=getJsModelFunctions(),e.setModelFunctions(n));const s=e.getInitialTime(),t=e.getFinalTime(),r=e.getTimeStep(),i=e.getSaveFreq(),o=Math.round((t-s)/i)+1;return new BaseRunnableModel({startTime:s,endTime:t,saveFreq:i,numSavePoints:o,outputVarIds:e.outputVarIds,modelListing:e.modelListing,onRunModel:(a,c,l)=>{runJsModel(e,s,t,r,i,o,a,c,l?.outputIndices,l?.lookups)}})}function runJsModel(e,n,s,t,r,i,o,a,c,l,d){let p=n;e.setTime(p);const g={timeStep:t,currentTime:p};if(e.getModelFunctions().setContext(g),e.initConstants(),l!==void 0)for(const y of l)e.setLookup(y.varRef.varSpec,y.points);o?.length>0&&e.setInputs(y=>o[y]),e.initLevels();const _=Math.round((s-n)/t),I=s;let T=0,E=0,S=0;for(;T<=_;){if(e.evalAux(),p%r<1e-6){S=0;const y=h=>{const m=S*i+E;a[m]=p<=I?h:void 0,S++};if(c!==void 0){let h=0;const m=c[h++];for(let L=0;L<m;L++){const b=c[h++],M=c[h++];let q;M>0&&(q=c.subarray(h,h+M),h+=M);const u={varIndex:b,subscriptIndices:q};e.storeOutput(u,y)}}else e.storeOutputs(y);E++}if(T===_)break;e.evalLevels(),p+=t,e.setTime(p),g.currentTime=p,T++}}var WasmBuffer=class{constructor(e,n,s,t){this.wasmModule=e,this.numElements=n,this.byteOffset=s,this.heapArray=t}getArrayView(){return this.heapArray}getAddress(){return this.byteOffset}dispose(){var e,n;this.heapArray&&((n=(e=this.wasmModule)._free)==null||n.call(e,this.byteOffset),this.numElements=void 0,this.heapArray=void 0,this.byteOffset=void 0)}};function createInt32WasmBuffer(e,n){const t=n*4,r=e._malloc(t),i=r/4,o=e.HEAP32.subarray(i,i+n);return new WasmBuffer(e,n,r,o)}function createFloat64WasmBuffer(e,n){const t=n*8,r=e._malloc(t),i=r/8,o=e.HEAPF64.subarray(i,i+n);return new WasmBuffer(e,n,r,o)}var WasmModel=class{constructor(e){this.wasmModule=e;function n(s){return e.cwrap(s,"number",[])()}this.startTime=n("getInitialTime"),this.endTime=n("getFinalTime"),this.saveFreq=n("getSaveper"),this.numSavePoints=Math.round((this.endTime-this.startTime)/this.saveFreq)+1,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.wasmSetLookup=e.cwrap("setLookup",null,["number","number","number","number"]),this.wasmRunModel=e.cwrap("runModelWithBuffers",null,["number","number","number"])}runModel(e){var n,s,t,r,i,o,a;const c=e.getLookups();if(c!==void 0)for(const _ of c){const I=_.varRef.varSpec,T=((n=I.subscriptIndices)==null?void 0:n.length)||0;let E;T>0?((this.lookupSubIndicesBuffer===void 0||this.lookupSubIndicesBuffer.numElements<T)&&((s=this.lookupSubIndicesBuffer)==null||s.dispose(),this.lookupSubIndicesBuffer=createInt32WasmBuffer(this.wasmModule,T)),this.lookupSubIndicesBuffer.getArrayView().set(I.subscriptIndices),E=this.lookupSubIndicesBuffer.getAddress()):E=0;let S,y;if(_.points){const m=_.points.length;(this.lookupDataBuffer===void 0||this.lookupDataBuffer.numElements<m)&&((t=this.lookupDataBuffer)==null||t.dispose(),this.lookupDataBuffer=createFloat64WasmBuffer(this.wasmModule,m)),this.lookupDataBuffer.getArrayView().set(_.points),S=this.lookupDataBuffer.getAddress(),y=m/2}else S=0,y=0;const h=I.varIndex;this.wasmSetLookup(h,E,S,y)}e.copyInputs((r=this.inputsBuffer)==null?void 0:r.getArrayView(),_=>{var I;return(I=this.inputsBuffer)==null||I.dispose(),this.inputsBuffer=createFloat64WasmBuffer(this.wasmModule,_),this.inputsBuffer.getArrayView()});let l;e.getOutputIndicesLength()>0?(e.copyOutputIndices((i=this.outputIndicesBuffer)==null?void 0:i.getArrayView(),_=>{var I;return(I=this.outputIndicesBuffer)==null||I.dispose(),this.outputIndicesBuffer=createInt32WasmBuffer(this.wasmModule,_),this.outputIndicesBuffer.getArrayView()}),l=this.outputIndicesBuffer):l=void 0;const d=e.getOutputsLength();(this.outputsBuffer===void 0||this.outputsBuffer.numElements<d)&&((o=this.outputsBuffer)==null||o.dispose(),this.outputsBuffer=createFloat64WasmBuffer(this.wasmModule,d));const p=perfNow();this.wasmRunModel(((a=this.inputsBuffer)==null?void 0:a.getAddress())||0,this.outputsBuffer.getAddress(),l?.getAddress()||0);const g=perfElapsed(p);e.storeOutputs(this.outputsBuffer.getArrayView()),e.storeElapsedTime(g)}terminate(){var e,n,s;(e=this.inputsBuffer)==null||e.dispose(),this.inputsBuffer=void 0,(n=this.outputsBuffer)==null||n.dispose(),this.outputsBuffer=void 0,(s=this.outputIndicesBuffer)==null||s.dispose(),this.outputIndicesBuffer=void 0}};function initWasmModel(e){return new WasmModel(e)}function createRunnableModel(e){switch(e.kind){case"js":return initJsModel(e);case"wasm":return initWasmModel(e);default:throw new Error("Unable to identify generated model kind")}}var initGeneratedModel,runnableModel,params=new BufferedRunModelParams,modelWorker={async initModel(){if(runnableModel)throw new Error("RunnableModel was already initialized");const e=await initGeneratedModel();return runnableModel=createRunnableModel(e),{outputVarIds:runnableModel.outputVarIds,modelListing:runnableModel.modelListing,startTime:runnableModel.startTime,endTime:runnableModel.endTime,saveFreq:runnableModel.saveFreq,outputRowLength:runnableModel.numSavePoints}},runModel(e){if(!runnableModel)throw new Error("RunnableModel must be initialized before running the model in worker");return params.updateFromEncodedBuffer(e),runnableModel.runModel(params),Transfer(e)}};function exposeModelWorker(e){initGeneratedModel=e,expose(modelWorker)}let _average_duration_of_illness_d,_contact_rate_c,_final_time,_infection_rate,_infectious_population_i,_infectivity_i,_initial_contact_rate,_initial_time,_recovered_population_r,_recovery_rate,_saveper,_susceptible_population_s,_time_step,_total_population_p,_time;function setTime(e){_time=e}let controlParamsInitialized=!1;function initControlParamsIfNeeded(){if(!controlParamsInitialized){if(fns===void 0)throw new Error("Must call setModelFunctions() before running the model");if(initConstants(),_initial_time===void 0)throw new Error("INITIAL TIME must be defined as a constant value");if(_time_step===void 0)throw new Error("TIME STEP must be defined as a constant value");if(_final_time===void 0||_saveper===void 0){if(setTime(_initial_time),fns.setContext({timeStep:_time_step,currentTime:_time}),initLevels(),evalAux(),_final_time===void 0)throw new Error("FINAL TIME must be defined");if(_saveper===void 0)throw new Error("SAVEPER must be defined")}controlParamsInitialized=!0}}function getInitialTime(){return initControlParamsIfNeeded(),_initial_time}function getFinalTime(){return initControlParamsIfNeeded(),_final_time}function getTimeStep(){return initControlParamsIfNeeded(),_time_step}function getSaveFreq(){return initControlParamsIfNeeded(),_saveper}let fns;function getModelFunctions(){return fns}function setModelFunctions(e){fns=e}function initConstants0(){_average_duration_of_illness_d=2,_final_time=200,_initial_time=0,_infectivity_i=.25,_initial_contact_rate=2.5,_saveper=1,_time_step=.0625,_total_population_p=1e4}function initConstants(){initConstants0()}function initLevels0(){_recovered_population_r=0,_infectious_population_i=1,_susceptible_population_s=_total_population_p-_infectious_population_i-_recovered_population_r}function initLevels(){initLevels0()}function evalAux0(){_recovery_rate=_infectious_population_i/_average_duration_of_illness_d,_contact_rate_c=_initial_contact_rate,_infection_rate=_contact_rate_c*_infectivity_i*_susceptible_population_s*_infectious_population_i/_total_population_p}function evalAux(){evalAux0()}function evalLevels0(){_infectious_population_i=fns.INTEG(_infectious_population_i,_infection_rate-_recovery_rate),_recovered_population_r=fns.INTEG(_recovered_population_r,_recovery_rate),_susceptible_population_s=fns.INTEG(_susceptible_population_s,-_infection_rate)}function evalLevels(){evalLevels0()}function setInputs(e){_initial_contact_rate=e(0),_infectivity_i=e(1),_average_duration_of_illness_d=e(2)}function setLookup(e,n){throw new Error("The setLookup function was not enabled for the generated model. Set the customLookups property in the spec/config file to allow for overriding lookups at runtime.")}const outputVarIds=["_infection_rate","_infectious_population_i","_recovered_population_r","_recovery_rate","_susceptible_population_s"],outputVarNames=["Infection Rate","Infectious Population I","Recovered Population R","Recovery Rate","Susceptible Population S"];function storeOutputs(e){e(_infection_rate),e(_infectious_population_i),e(_recovered_population_r),e(_recovery_rate),e(_susceptible_population_s)}function storeOutput(e,n){throw new Error("The storeOutput function was not enabled for the generated model. Set the customOutputs property in the spec/config file to allow for capturing arbitrary variables at runtime.")}const modelListing=void 0;async function loadGeneratedModel(){return{kind:"js",outputVarIds,outputVarNames,modelListing,getInitialTime,getFinalTime,getTimeStep,getSaveFreq,getModelFunctions,setModelFunctions,setTime,setInputs,setLookup,storeOutputs,storeOutput,initConstants,initLevels,evalAux,evalLevels}}exposeModelWorker(loadGeneratedModel)})();\n';class BundleModelRunner{constructor(t,r,n){this.modelSpec=t,this.inputMap=r,this.modelRunner=n,this.inputs=[...r.values()].map(i=>i.value),this.outputs=n.createOutputs()}async runModelForScenario(t,r){return setInputsForScenario(this.inputMap,t),r[0]?.startsWith("ModelImpl")?this.runModelWithImplOutputs(r):this.runModelWithNormalOutputs(r)}async runModelWithNormalOutputs(t){this.outputs=await this.modelRunner.runModel(this.inputs,this.outputs);const r=this.outputs.runTimeInMillis,n=new Map;for(const i of t){const a=this.modelSpec.outputVars.get(i);if(a)if(a.sourceName===void 0){const l=this.outputs.getSeriesForVar(a.varId);l&&n.set(i,datasetFromPoints(l.points))}else console.error("Static data sources not yet handled in default model check bundle")}return{datasetMap:n,modelRunTime:r}}async runModelWithImplOutputs(t){const r=[];for(const m of t){const v=this.modelSpec.implVars.get(m);v&&r.push(v)}const n=this.outputs.startTime,i=this.outputs.endTime,a=this.outputs.saveFreq;let l=createImplOutputs(r,n,i,a);l=await this.modelRunner.runModel(this.inputs,l);const u=l.runTimeInMillis,d=new Map;for(const m of t){const v=this.modelSpec.implVars.get(m),x=l.getSeriesForVar(v.varId);x&&d.set(m,datasetFromPoints(x.points))}return{datasetMap:d,modelRunTime:u}}}function datasetFromPoints(e){const t=new Map;for(const r of e)r.y!==void 0&&t.set(r.x,r.y);return t}function createImplOutputs(e,t,r,n){const i=[],a=[];for(const u of e)i.push(u.varId),a.push({varIndex:u.varIndex,subscriptIndices:u.subscriptIndices});const l=new Outputs(i,t,r,n);return l.varSpecs=a,l}const VERSION=1;class BundleModel{constructor(t,r){this.modelSpec=t,this.bundleModelRunner=r}async getDatasetsForScenario(t,r){return this.bundleModelRunner.runModelForScenario(t,r)}async getGraphDataForScenario(){}getGraphLinksForScenario(){return[]}}async function initBundleModel(e,t){const r=await spawnAsyncModelRunner({source:modelWorkerJs}),n=new BundleModelRunner(e,t,r);return new BundleModel(e,n)}function createBundle(){const e=getInputVars(inputSpecs),t=getOutputVars(outputSpecs),{implVars:r,implVarGroups:n}=getImplVars(encodedImplVars),i={modelSizeInBytes,dataSizeInBytes,inputVars:e,outputVars:t,implVars:r,implVarGroups:n};return{version:VERSION,modelSpec:i,initModel:()=>initBundleModel(i,e)}}const w=`# yaml-language-server: $schema=../../node_modules/@sdeverywhere/plugin-check/node_modules/@sdeverywhere/check-core/schema/check.schema.json

#
# This is a simple example of "check" tests that exercise the model under different
# input scenarios.  For more guidance, consult the following wiki page:
#   https://github.com/climateinteractive/SDEverywhere/wiki/Testing-and-Comparing-Your-Model
#

- describe: Population Variables
  tests:
    - it: should be between 0 and 10000 for all input scenarios
      scenarios:
        - preset: matrix
      datasets:
        - name: Infectious Population I
        - name: Recovered Population R
        - name: Susceptible Population S
      predicates:
        - gte: 0
          lte: 10000
`,b=`# yaml-language-server: $schema=../../node_modules/@sdeverywhere/plugin-check/node_modules/@sdeverywhere/check-core/schema/comparison.schema.json

#
# This is a simple example of defining custom comparison scenarios, which allow you to see
# how the behavior of the model compares to that of previous versions.  For more guidance,
# consult the following wiki page:
#   https://github.com/climateinteractive/SDEverywhere/wiki/Testing-and-Comparing-Your-Model
#

- scenario:
    title: Custom scenario
    subtitle: with avg duration=4 and contact rate=2
    with:
      - input: Average Duration of Illness d
        at: 4
      - input: Initial contact rate
        at: 2

- scenario:
    title: Custom scenario
    subtitle: with avg duration=4 and contact rate=4
    with:
      - input: Average Duration of Illness d
        at: 4
      - input: Initial contact rate
        at: 4
`,h=Object.assign({"../../../../../model/checks/checks.yaml":w}),f=[];for(const e of Object.keys(h)){const t=h[e];f.push(t)}const y=Object.assign({"../../../../../model/comparisons/comparisons.yaml":b}),k=Object.entries(y).map(e=>({kind:"yaml",filename:e[0],content:e[1]})),_=new Map([]);async function I(e,t,r){let n;if(e&&e.version===t.version){const i=[S(e,t),...k];n={baseline:{name:"baseline",bundle:e},thresholds:[1,5,10],specs:i,datasets:{renamedDatasetKeys:_}}}return{current:{name:r?.bundleNameR||"current",bundle:t},check:{tests:f},comparison:n}}function S(e,t){const r=new Set,n=(m,v)=>{for(const x of m.modelSpec.inputVars.values())r.add(x.inputId),v.set(x.inputId,x)},i=new Map,a=new Map;n(e,i),n(t,a);const l=[];l.push({kind:"scenario-with-all-inputs",id:"all_inputs_at_default",title:"All inputs",subtitle:"at default",position:"default"});const u=(m,v)=>{const x=i.get(m),$=a.get(m);if(x===void 0||$===void 0)return;if(v==="min"){if(x.minValue===x.defaultValue&&$.minValue===$.defaultValue)return}else if(x.maxValue===x.defaultValue&&$.maxValue===$.defaultValue)return;const T=$||x,A=T.relatedItem?.locationPath,L=A?A[A.length-1]:T.varName;l.push({kind:"scenario-with-inputs",id:`id_${m}_at_${v}`,title:L,subtitle:`at ${v}`,inputs:[{kind:"input-at-position",inputName:`id ${m}`,position:v}]})},d=[...r];for(const m of d)u(m,"min"),u(m,"max");return{scenarios:l,scenarioGroups:[],viewGroups:[]}}async function initForProduction(){const e='{"date":"2025-12-12T18:02:01.808Z","elapsed":123.60551799999985,"checkSummary":{"predicateSummaries":[]}}';let t;t=JSON.parse(e);const r=createBundle();let n;const i=createBundle$1();i.version===r.version&&(n=i);const l=await I(n,r,{bundleNameR:"main"});ap(l,{suiteSummary:t})}async function initBundlesAndUI(){const e=document.getElementById("app-shell-container");for(;e.firstChild;)e.removeChild(e.firstChild);await initForProduction()}initOverlay();initBundlesAndUI()});export default t0();
