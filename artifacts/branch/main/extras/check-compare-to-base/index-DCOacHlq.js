var n0=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var s0=n0((exports,module)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function getDefaultExportFromCjs$2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var assertNever$2={},hasRequiredAssertNever$2;function requireAssertNever$2(){if(hasRequiredAssertNever$2)return assertNever$2;hasRequiredAssertNever$2=1,Object.defineProperty(assertNever$2,"__esModule",{value:!0}),assertNever$2.assertNever=e;function e(t,r){if(typeof r=="string")throw new Error(r);if(typeof r=="function")throw new Error(r(t));if(r)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}return assertNever$2.default=e,assertNever$2}var assertNeverExports$2=requireAssertNever$2();const Tr=getDefaultExportFromCjs$2(assertNeverExports$2);var ajv$2={exports:{}},core$4={},validate$2={},boolSchema$2={},errors$2={},codegen$2={},code$4={},hasRequiredCode$4;function requireCode$4(){return hasRequiredCode$4||(hasRequiredCode$4=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(x){if(super(),!e.IDENTIFIER.test(x))throw new Error("CodeGen: name must be a valid identifier");this.str=x}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(x){super(),this._items=typeof x=="string"?[x]:x}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const x=this._items[0];return x===""||x==='""'}get str(){var x;return(x=this._str)!==null&&x!==void 0?x:this._str=this._items.reduce((P,K)=>`${P}${K}`,"")}get names(){var x;return(x=this._names)!==null&&x!==void 0?x:this._names=this._items.reduce((P,K)=>(K instanceof r&&(P[K.str]=(P[K.str]||0)+1),P),{})}}e._Code=n,e.nil=new n("");function s(q,...x){const P=[q[0]];let K=0;for(;K<x.length;)u(P,x[K]),P.push(q[++K]);return new n(P)}e._=s;const i=new n("+");function o(q,...x){const P=[C(q[0])];let K=0;for(;K<x.length;)P.push(i),u(P,x[K]),P.push(i,C(q[++K]));return c(P),new n(P)}e.str=o;function u(q,x){x instanceof n?q.push(...x._items):x instanceof r?q.push(x):q.push(T(x))}e.addCodeArg=u;function c(q){let x=1;for(;x<q.length-1;){if(q[x]===i){const P=d(q[x-1],q[x+1]);if(P!==void 0){q.splice(x-1,3,P);continue}q[x++]="+"}x++}}function d(q,x){if(x==='""')return q;if(q==='""')return x;if(typeof q=="string")return x instanceof r||q[q.length-1]!=='"'?void 0:typeof x!="string"?`${q.slice(0,-1)}${x}"`:x[0]==='"'?q.slice(0,-1)+x.slice(1):void 0;if(typeof x=="string"&&x[0]==='"'&&!(q instanceof r))return`"${q}${x.slice(1)}`}function m(q,x){return x.emptyStr()?q:q.emptyStr()?x:o`${q}${x}`}e.strConcat=m;function T(q){return typeof q=="number"||typeof q=="boolean"||q===null?q:C(Array.isArray(q)?q.join(","):q)}function $(q){return new n(C(q))}e.stringify=$;function C(q){return JSON.stringify(q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=C;function D(q){return typeof q=="string"&&e.IDENTIFIER.test(q)?new n(`.${q}`):s`[${q}]`}e.getProperty=D;function F(q){if(typeof q=="string"&&e.IDENTIFIER.test(q))return new n(`${q}`);throw new Error(`CodeGen: invalid export name: ${q}, use explicit $id name mapping`)}e.getEsmExportName=F;function g(q){return new n(q.toString())}e.regexpCode=g})(code$4)),code$4}var scope$2={},hasRequiredScope$2;function requireScope$2(){return hasRequiredScope$2||(hasRequiredScope$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=requireCode$4();class r extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:d,parent:m}={}){this._names={},this._prefixes=d,this._parent=m}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const m=this._names[d]||this._nameGroup(d);return`${d}${m.index++}`}_nameGroup(d){var m,T;if(!((T=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||T===void 0)&&T.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=s;class i extends t.Name{constructor(d,m){super(m),this.prefix=d}setValue(d,{property:m,itemIndex:T}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(m)}[${T}]`}}e.ValueScopeName=i;const o=(0,t._)`\n`;class u extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:t.nil}}get(){return this._scope}name(d){return new i(d,this._newName(d))}value(d,m){var T;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(d),{prefix:C}=$,D=(T=m.key)!==null&&T!==void 0?T:m.ref;let F=this._values[C];if(F){const x=F.get(D);if(x)return x}else F=this._values[C]=new Map;F.set(D,$);const g=this._scope[C]||(this._scope[C]=[]),q=g.length;return g[q]=m.ref,$.setValue(m,{property:C,itemIndex:q}),$}getValue(d,m){const T=this._values[d];if(T)return T.get(m)}scopeRefs(d,m=this._values){return this._reduceValues(m,T=>{if(T.scopePath===void 0)throw new Error(`CodeGen: name "${T}" has no value`);return(0,t._)`${d}${T.scopePath}`})}scopeCode(d=this._values,m,T){return this._reduceValues(d,$=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},m,T)}_reduceValues(d,m,T={},$){let C=t.nil;for(const D in d){const F=d[D];if(!F)continue;const g=T[D]=T[D]||new Map;F.forEach(q=>{if(g.has(q))return;g.set(q,n.Started);let x=m(q);if(x){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;C=(0,t._)`${C}${P} ${q} = ${x};${this.opts._n}`}else if(x=$?.(q))C=(0,t._)`${C}${x}${this.opts._n}`;else throw new r(q);g.set(q,n.Completed)})}return C}}e.ValueScope=u})(scope$2)),scope$2}var hasRequiredCodegen$2;function requireCodegen$2(){return hasRequiredCodegen$2||(hasRequiredCodegen$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=requireCode$4(),r=requireScope$2();var n=requireCode$4();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=requireScope$2();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(G,X){return this}}class o extends i{constructor(G,X,ce){super(),this.varKind=G,this.name=X,this.rhs=ce}render({es5:G,_n:X}){const ce=G?r.varKinds.var:this.varKind,De=this.rhs===void 0?"":` = ${this.rhs}`;return`${ce} ${this.name}${De};`+X}optimizeNames(G,X){if(G[this.name.str])return this.rhs&&(this.rhs=Ar(this.rhs,G,X)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends i{constructor(G,X,ce){super(),this.lhs=G,this.rhs=X,this.sideEffects=ce}render({_n:G}){return`${this.lhs} = ${this.rhs};`+G}optimizeNames(G,X){if(!(this.lhs instanceof t.Name&&!G[this.lhs.str]&&!this.sideEffects))return this.rhs=Ar(this.rhs,G,X),this}get names(){const G=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Ke(G,this.rhs)}}class c extends u{constructor(G,X,ce,De){super(G,ce,De),this.op=X}render({_n:G}){return`${this.lhs} ${this.op}= ${this.rhs};`+G}}class d extends i{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`${this.label}:`+G}}class m extends i{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`break${this.label?` ${this.label}`:""};`+G}}class T extends i{constructor(G){super(),this.error=G}render({_n:G}){return`throw ${this.error};`+G}get names(){return this.error.names}}class $ extends i{constructor(G){super(),this.code=G}render({_n:G}){return`${this.code};`+G}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(G,X){return this.code=Ar(this.code,G,X),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class C extends i{constructor(G=[]){super(),this.nodes=G}render(G){return this.nodes.reduce((X,ce)=>X+ce.render(G),"")}optimizeNodes(){const{nodes:G}=this;let X=G.length;for(;X--;){const ce=G[X].optimizeNodes();Array.isArray(ce)?G.splice(X,1,...ce):ce?G[X]=ce:G.splice(X,1)}return G.length>0?this:void 0}optimizeNames(G,X){const{nodes:ce}=this;let De=ce.length;for(;De--;){const qe=ce[De];qe.optimizeNames(G,X)||(hi(G,qe.names),ce.splice(De,1))}return ce.length>0?this:void 0}get names(){return this.nodes.reduce((G,X)=>Ne(G,X.names),{})}}class D extends C{render(G){return"{"+G._n+super.render(G)+"}"+G._n}}class F extends C{}class g extends D{}g.kind="else";class q extends D{constructor(G,X){super(X),this.condition=G}render(G){let X=`if(${this.condition})`+super.render(G);return this.else&&(X+="else "+this.else.render(G)),X}optimizeNodes(){super.optimizeNodes();const G=this.condition;if(G===!0)return this.nodes;let X=this.else;if(X){const ce=X.optimizeNodes();X=this.else=Array.isArray(ce)?new g(ce):ce}if(X)return G===!1?X instanceof q?X:X.nodes:this.nodes.length?this:new q(gi(G),X instanceof q?[X]:X.nodes);if(!(G===!1||!this.nodes.length))return this}optimizeNames(G,X){var ce;if(this.else=(ce=this.else)===null||ce===void 0?void 0:ce.optimizeNames(G,X),!!(super.optimizeNames(G,X)||this.else))return this.condition=Ar(this.condition,G,X),this}get names(){const G=super.names;return Ke(G,this.condition),this.else&&Ne(G,this.else.names),G}}q.kind="if";class x extends D{}x.kind="for";class P extends x{constructor(G){super(),this.iteration=G}render(G){return`for(${this.iteration})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iteration=Ar(this.iteration,G,X),this}get names(){return Ne(super.names,this.iteration.names)}}class K extends x{constructor(G,X,ce,De){super(),this.varKind=G,this.name=X,this.from=ce,this.to=De}render(G){const X=G.es5?r.varKinds.var:this.varKind,{name:ce,from:De,to:qe}=this;return`for(${X} ${ce}=${De}; ${ce}<${qe}; ${ce}++)`+super.render(G)}get names(){const G=Ke(super.names,this.from);return Ke(G,this.to)}}class L extends x{constructor(G,X,ce,De){super(),this.loop=G,this.varKind=X,this.name=ce,this.iterable=De}render(G){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iterable=Ar(this.iterable,G,X),this}get names(){return Ne(super.names,this.iterable.names)}}class B extends D{constructor(G,X,ce){super(),this.name=G,this.args=X,this.async=ce}render(G){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(G)}}B.kind="func";class J extends C{render(G){return"return "+super.render(G)}}J.kind="return";class re extends D{render(G){let X="try"+super.render(G);return this.catch&&(X+=this.catch.render(G)),this.finally&&(X+=this.finally.render(G)),X}optimizeNodes(){var G,X;return super.optimizeNodes(),(G=this.catch)===null||G===void 0||G.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(G,X){var ce,De;return super.optimizeNames(G,X),(ce=this.catch)===null||ce===void 0||ce.optimizeNames(G,X),(De=this.finally)===null||De===void 0||De.optimizeNames(G,X),this}get names(){const G=super.names;return this.catch&&Ne(G,this.catch.names),this.finally&&Ne(G,this.finally.names),G}}class ve extends D{constructor(G){super(),this.error=G}render(G){return`catch(${this.error})`+super.render(G)}}ve.kind="catch";class ye extends D{render(G){return"finally"+super.render(G)}}ye.kind="finally";class Se{constructor(G,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=G,this._scope=new r.Scope({parent:G}),this._nodes=[new F]}toString(){return this._root.render(this.opts)}name(G){return this._scope.name(G)}scopeName(G){return this._extScope.name(G)}scopeValue(G,X){const ce=this._extScope.value(G,X);return(this._values[ce.prefix]||(this._values[ce.prefix]=new Set)).add(ce),ce}getScopeValue(G,X){return this._extScope.getValue(G,X)}scopeRefs(G){return this._extScope.scopeRefs(G,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(G,X,ce,De){const qe=this._scope.toName(X);return ce!==void 0&&De&&(this._constants[qe.str]=ce),this._leafNode(new o(G,qe,ce)),qe}const(G,X,ce){return this._def(r.varKinds.const,G,X,ce)}let(G,X,ce){return this._def(r.varKinds.let,G,X,ce)}var(G,X,ce){return this._def(r.varKinds.var,G,X,ce)}assign(G,X,ce){return this._leafNode(new u(G,X,ce))}add(G,X){return this._leafNode(new c(G,e.operators.ADD,X))}code(G){return typeof G=="function"?G():G!==t.nil&&this._leafNode(new $(G)),this}object(...G){const X=["{"];for(const[ce,De]of G)X.length>1&&X.push(","),X.push(ce),(ce!==De||this.opts.es5)&&(X.push(":"),(0,t.addCodeArg)(X,De));return X.push("}"),new t._Code(X)}if(G,X,ce){if(this._blockNode(new q(G)),X&&ce)this.code(X).else().code(ce).endIf();else if(X)this.code(X).endIf();else if(ce)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(G){return this._elseNode(new q(G))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(q,g)}_for(G,X){return this._blockNode(G),X&&this.code(X).endFor(),this}for(G,X){return this._for(new P(G),X)}forRange(G,X,ce,De,qe=this.opts.es5?r.varKinds.var:r.varKinds.let){const bt=this._scope.toName(G);return this._for(new K(qe,bt,X,ce),()=>De(bt))}forOf(G,X,ce,De=r.varKinds.const){const qe=this._scope.toName(G);if(this.opts.es5){const bt=X instanceof t.Name?X:this.var("_arr",X);return this.forRange("_i",0,(0,t._)`${bt}.length`,vr=>{this.var(qe,(0,t._)`${bt}[${vr}]`),ce(qe)})}return this._for(new L("of",De,qe,X),()=>ce(qe))}forIn(G,X,ce,De=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(G,(0,t._)`Object.keys(${X})`,ce);const qe=this._scope.toName(G);return this._for(new L("in",De,qe,X),()=>ce(qe))}endFor(){return this._endBlockNode(x)}label(G){return this._leafNode(new d(G))}break(G){return this._leafNode(new m(G))}return(G){const X=new J;if(this._blockNode(X),this.code(G),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(J)}try(G,X,ce){if(!X&&!ce)throw new Error('CodeGen: "try" without "catch" and "finally"');const De=new re;if(this._blockNode(De),this.code(G),X){const qe=this.name("e");this._currNode=De.catch=new ve(qe),X(qe)}return ce&&(this._currNode=De.finally=new ye,this.code(ce)),this._endBlockNode(ve,ye)}throw(G){return this._leafNode(new T(G))}block(G,X){return this._blockStarts.push(this._nodes.length),G&&this.code(G).endBlock(X),this}endBlock(G){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const ce=this._nodes.length-X;if(ce<0||G!==void 0&&ce!==G)throw new Error(`CodeGen: wrong number of nodes: ${ce} vs ${G} expected`);return this._nodes.length=X,this}func(G,X=t.nil,ce,De){return this._blockNode(new B(G,X,ce)),De&&this.code(De).endFunc(),this}endFunc(){return this._endBlockNode(B)}optimize(G=1){for(;G-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(G){return this._currNode.nodes.push(G),this}_blockNode(G){this._currNode.nodes.push(G),this._nodes.push(G)}_endBlockNode(G,X){const ce=this._currNode;if(ce instanceof G||X&&ce instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${G.kind}/${X.kind}`:G.kind}"`)}_elseNode(G){const X=this._currNode;if(!(X instanceof q))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=G,this}get _root(){return this._nodes[0]}get _currNode(){const G=this._nodes;return G[G.length-1]}set _currNode(G){const X=this._nodes;X[X.length-1]=G}}e.CodeGen=Se;function Ne(ue,G){for(const X in G)ue[X]=(ue[X]||0)+(G[X]||0);return ue}function Ke(ue,G){return G instanceof t._CodeOrName?Ne(ue,G.names):ue}function Ar(ue,G,X){if(ue instanceof t.Name)return ce(ue);if(!De(ue))return ue;return new t._Code(ue._items.reduce((qe,bt)=>(bt instanceof t.Name&&(bt=ce(bt)),bt instanceof t._Code?qe.push(...bt._items):qe.push(bt),qe),[]));function ce(qe){const bt=X[qe.str];return bt===void 0||G[qe.str]!==1?qe:(delete G[qe.str],bt)}function De(qe){return qe instanceof t._Code&&qe._items.some(bt=>bt instanceof t.Name&&G[bt.str]===1&&X[bt.str]!==void 0)}}function hi(ue,G){for(const X in G)ue[X]=(ue[X]||0)-(G[X]||0)}function gi(ue){return typeof ue=="boolean"||typeof ue=="number"||ue===null?!ue:(0,t._)`!${ke(ue)}`}e.not=gi;const Gi=ie(e.operators.AND);function bs(...ue){return ue.reduce(Gi)}e.and=bs;const ua=ie(e.operators.OR);function Re(...ue){return ue.reduce(ua)}e.or=Re;function ie(ue){return(G,X)=>G===t.nil?X:X===t.nil?G:(0,t._)`${ke(G)} ${ue} ${ke(X)}`}function ke(ue){return ue instanceof t.Name?ue:(0,t._)`(${ue})`}})(codegen$2)),codegen$2}var util$2={},hasRequiredUtil$2;function requireUtil$2(){if(hasRequiredUtil$2)return util$2;hasRequiredUtil$2=1,Object.defineProperty(util$2,"__esModule",{value:!0}),util$2.checkStrictMode=util$2.getErrorPath=util$2.Type=util$2.useFunc=util$2.setEvaluated=util$2.evaluatedPropsToName=util$2.mergeEvaluated=util$2.eachItem=util$2.unescapeJsonPointer=util$2.escapeJsonPointer=util$2.escapeFragment=util$2.unescapeFragment=util$2.schemaRefOrVal=util$2.schemaHasRulesButRef=util$2.schemaHasRules=util$2.checkUnknownRules=util$2.alwaysValidSchema=util$2.toHash=void 0;const e=requireCodegen$2(),t=requireCode$4();function r(L){const B={};for(const J of L)B[J]=!0;return B}util$2.toHash=r;function n(L,B){return typeof B=="boolean"?B:Object.keys(B).length===0?!0:(s(L,B),!i(B,L.self.RULES.all))}util$2.alwaysValidSchema=n;function s(L,B=L.schema){const{opts:J,self:re}=L;if(!J.strictSchema||typeof B=="boolean")return;const ve=re.RULES.keywords;for(const ye in B)ve[ye]||K(L,`unknown keyword: "${ye}"`)}util$2.checkUnknownRules=s;function i(L,B){if(typeof L=="boolean")return!L;for(const J in L)if(B[J])return!0;return!1}util$2.schemaHasRules=i;function o(L,B){if(typeof L=="boolean")return!L;for(const J in L)if(J!=="$ref"&&B.all[J])return!0;return!1}util$2.schemaHasRulesButRef=o;function u({topSchemaRef:L,schemaPath:B},J,re,ve){if(!ve){if(typeof J=="number"||typeof J=="boolean")return J;if(typeof J=="string")return(0,e._)`${J}`}return(0,e._)`${L}${B}${(0,e.getProperty)(re)}`}util$2.schemaRefOrVal=u;function c(L){return T(decodeURIComponent(L))}util$2.unescapeFragment=c;function d(L){return encodeURIComponent(m(L))}util$2.escapeFragment=d;function m(L){return typeof L=="number"?`${L}`:L.replace(/~/g,"~0").replace(/\//g,"~1")}util$2.escapeJsonPointer=m;function T(L){return L.replace(/~1/g,"/").replace(/~0/g,"~")}util$2.unescapeJsonPointer=T;function $(L,B){if(Array.isArray(L))for(const J of L)B(J);else B(L)}util$2.eachItem=$;function C({mergeNames:L,mergeToName:B,mergeValues:J,resultToName:re}){return(ve,ye,Se,Ne)=>{const Ke=Se===void 0?ye:Se instanceof e.Name?(ye instanceof e.Name?L(ve,ye,Se):B(ve,ye,Se),Se):ye instanceof e.Name?(B(ve,Se,ye),ye):J(ye,Se);return Ne===e.Name&&!(Ke instanceof e.Name)?re(ve,Ke):Ke}}util$2.mergeEvaluated={props:C({mergeNames:(L,B,J)=>L.if((0,e._)`${J} !== true && ${B} !== undefined`,()=>{L.if((0,e._)`${B} === true`,()=>L.assign(J,!0),()=>L.assign(J,(0,e._)`${J} || {}`).code((0,e._)`Object.assign(${J}, ${B})`))}),mergeToName:(L,B,J)=>L.if((0,e._)`${J} !== true`,()=>{B===!0?L.assign(J,!0):(L.assign(J,(0,e._)`${J} || {}`),F(L,J,B))}),mergeValues:(L,B)=>L===!0?!0:{...L,...B},resultToName:D}),items:C({mergeNames:(L,B,J)=>L.if((0,e._)`${J} !== true && ${B} !== undefined`,()=>L.assign(J,(0,e._)`${B} === true ? true : ${J} > ${B} ? ${J} : ${B}`)),mergeToName:(L,B,J)=>L.if((0,e._)`${J} !== true`,()=>L.assign(J,B===!0?!0:(0,e._)`${J} > ${B} ? ${J} : ${B}`)),mergeValues:(L,B)=>L===!0?!0:Math.max(L,B),resultToName:(L,B)=>L.var("items",B)})};function D(L,B){if(B===!0)return L.var("props",!0);const J=L.var("props",(0,e._)`{}`);return B!==void 0&&F(L,J,B),J}util$2.evaluatedPropsToName=D;function F(L,B,J){Object.keys(J).forEach(re=>L.assign((0,e._)`${B}${(0,e.getProperty)(re)}`,!0))}util$2.setEvaluated=F;const g={};function q(L,B){return L.scopeValue("func",{ref:B,code:g[B.code]||(g[B.code]=new t._Code(B.code))})}util$2.useFunc=q;var x;(function(L){L[L.Num=0]="Num",L[L.Str=1]="Str"})(x||(util$2.Type=x={}));function P(L,B,J){if(L instanceof e.Name){const re=B===x.Num;return J?re?(0,e._)`"[" + ${L} + "]"`:(0,e._)`"['" + ${L} + "']"`:re?(0,e._)`"/" + ${L}`:(0,e._)`"/" + ${L}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return J?(0,e.getProperty)(L).toString():"/"+m(L)}util$2.getErrorPath=P;function K(L,B,J=L.opts.strictSchema){if(J){if(B=`strict mode: ${B}`,J===!0)throw new Error(B);L.self.logger.warn(B)}}return util$2.checkStrictMode=K,util$2}var names$2={},hasRequiredNames$2;function requireNames$2(){if(hasRequiredNames$2)return names$2;hasRequiredNames$2=1,Object.defineProperty(names$2,"__esModule",{value:!0});const e=requireCodegen$2(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return names$2.default=t,names$2}var hasRequiredErrors$2;function requireErrors$2(){return hasRequiredErrors$2||(hasRequiredErrors$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=requireCodegen$2(),r=requireUtil$2(),n=requireNames$2();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:q})=>q?(0,t.str)`"${g}" keyword must be ${q} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function s(g,q=e.keywordError,x,P){const{it:K}=g,{gen:L,compositeRule:B,allErrors:J}=K,re=T(g,q,x);P??(B||J)?c(L,re):d(K,(0,t._)`[${re}]`)}e.reportError=s;function i(g,q=e.keywordError,x){const{it:P}=g,{gen:K,compositeRule:L,allErrors:B}=P,J=T(g,q,x);c(K,J),L||B||d(P,n.default.vErrors)}e.reportExtraError=i;function o(g,q){g.assign(n.default.errors,q),g.if((0,t._)`${n.default.vErrors} !== null`,()=>g.if(q,()=>g.assign((0,t._)`${n.default.vErrors}.length`,q),()=>g.assign(n.default.vErrors,null)))}e.resetErrorsCount=o;function u({gen:g,keyword:q,schemaValue:x,data:P,errsCount:K,it:L}){if(K===void 0)throw new Error("ajv implementation error");const B=g.name("err");g.forRange("i",K,n.default.errors,J=>{g.const(B,(0,t._)`${n.default.vErrors}[${J}]`),g.if((0,t._)`${B}.instancePath === undefined`,()=>g.assign((0,t._)`${B}.instancePath`,(0,t.strConcat)(n.default.instancePath,L.errorPath))),g.assign((0,t._)`${B}.schemaPath`,(0,t.str)`${L.errSchemaPath}/${q}`),L.opts.verbose&&(g.assign((0,t._)`${B}.schema`,x),g.assign((0,t._)`${B}.data`,P))})}e.extendErrors=u;function c(g,q){const x=g.const("err",q);g.if((0,t._)`${n.default.vErrors} === null`,()=>g.assign(n.default.vErrors,(0,t._)`[${x}]`),(0,t._)`${n.default.vErrors}.push(${x})`),g.code((0,t._)`${n.default.errors}++`)}function d(g,q){const{gen:x,validateName:P,schemaEnv:K}=g;K.$async?x.throw((0,t._)`new ${g.ValidationError}(${q})`):(x.assign((0,t._)`${P}.errors`,q),x.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function T(g,q,x){const{createErrors:P}=g.it;return P===!1?(0,t._)`{}`:$(g,q,x)}function $(g,q,x={}){const{gen:P,it:K}=g,L=[C(K,x),D(g,x)];return F(g,q,L),P.object(...L)}function C({errorPath:g},{instancePath:q}){const x=q?(0,t.str)`${g}${(0,r.getErrorPath)(q,r.Type.Str)}`:g;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,x)]}function D({keyword:g,it:{errSchemaPath:q}},{schemaPath:x,parentSchema:P}){let K=P?q:(0,t.str)`${q}/${g}`;return x&&(K=(0,t.str)`${K}${(0,r.getErrorPath)(x,r.Type.Str)}`),[m.schemaPath,K]}function F(g,{params:q,message:x},P){const{keyword:K,data:L,schemaValue:B,it:J}=g,{opts:re,propertyName:ve,topSchemaRef:ye,schemaPath:Se}=J;P.push([m.keyword,K],[m.params,typeof q=="function"?q(g):q||(0,t._)`{}`]),re.messages&&P.push([m.message,typeof x=="function"?x(g):x]),re.verbose&&P.push([m.schema,B],[m.parentSchema,(0,t._)`${ye}${Se}`],[n.default.data,L]),ve&&P.push([m.propertyName,ve])}})(errors$2)),errors$2}var hasRequiredBoolSchema$2;function requireBoolSchema$2(){if(hasRequiredBoolSchema$2)return boolSchema$2;hasRequiredBoolSchema$2=1,Object.defineProperty(boolSchema$2,"__esModule",{value:!0}),boolSchema$2.boolOrEmptySchema=boolSchema$2.topBoolOrEmptySchema=void 0;const e=requireErrors$2(),t=requireCodegen$2(),r=requireNames$2(),n={message:"boolean schema is false"};function s(u){const{gen:c,schema:d,validateName:m}=u;d===!1?o(u,!1):typeof d=="object"&&d.$async===!0?c.return(r.default.data):(c.assign((0,t._)`${m}.errors`,null),c.return(!0))}boolSchema$2.topBoolOrEmptySchema=s;function i(u,c){const{gen:d,schema:m}=u;m===!1?(d.var(c,!1),o(u)):d.var(c,!0)}boolSchema$2.boolOrEmptySchema=i;function o(u,c){const{gen:d,data:m}=u,T={gen:d,keyword:"false schema",data:m,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,e.reportError)(T,n,void 0,c)}return boolSchema$2}var dataType$2={},rules$2={},hasRequiredRules$2;function requireRules$2(){if(hasRequiredRules$2)return rules$2;hasRequiredRules$2=1,Object.defineProperty(rules$2,"__esModule",{value:!0}),rules$2.getRules=rules$2.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(s){return typeof s=="string"&&t.has(s)}rules$2.isJSONType=r;function n(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}return rules$2.getRules=n,rules$2}var applicability$2={},hasRequiredApplicability$2;function requireApplicability$2(){if(hasRequiredApplicability$2)return applicability$2;hasRequiredApplicability$2=1,Object.defineProperty(applicability$2,"__esModule",{value:!0}),applicability$2.shouldUseRule=applicability$2.shouldUseGroup=applicability$2.schemaHasRulesForType=void 0;function e({schema:n,self:s},i){const o=s.RULES.types[i];return o&&o!==!0&&t(n,o)}applicability$2.schemaHasRulesForType=e;function t(n,s){return s.rules.some(i=>r(n,i))}applicability$2.shouldUseGroup=t;function r(n,s){var i;return n[s.keyword]!==void 0||((i=s.definition.implements)===null||i===void 0?void 0:i.some(o=>n[o]!==void 0))}return applicability$2.shouldUseRule=r,applicability$2}var hasRequiredDataType$2;function requireDataType$2(){if(hasRequiredDataType$2)return dataType$2;hasRequiredDataType$2=1,Object.defineProperty(dataType$2,"__esModule",{value:!0}),dataType$2.reportTypeError=dataType$2.checkDataTypes=dataType$2.checkDataType=dataType$2.coerceAndCheckDataType=dataType$2.getJSONTypes=dataType$2.getSchemaTypes=dataType$2.DataType=void 0;const e=requireRules$2(),t=requireApplicability$2(),r=requireErrors$2(),n=requireCodegen$2(),s=requireUtil$2();var i;(function(x){x[x.Correct=0]="Correct",x[x.Wrong=1]="Wrong"})(i||(dataType$2.DataType=i={}));function o(x){const P=u(x.type);if(P.includes("null")){if(x.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!P.length&&x.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');x.nullable===!0&&P.push("null")}return P}dataType$2.getSchemaTypes=o;function u(x){const P=Array.isArray(x)?x:x?[x]:[];if(P.every(e.isJSONType))return P;throw new Error("type must be JSONType or JSONType[]: "+P.join(","))}dataType$2.getJSONTypes=u;function c(x,P){const{gen:K,data:L,opts:B}=x,J=m(P,B.coerceTypes),re=P.length>0&&!(J.length===0&&P.length===1&&(0,t.schemaHasRulesForType)(x,P[0]));if(re){const ve=D(P,L,B.strictNumbers,i.Wrong);K.if(ve,()=>{J.length?T(x,P,J):g(x)})}return re}dataType$2.coerceAndCheckDataType=c;const d=new Set(["string","number","integer","boolean","null"]);function m(x,P){return P?x.filter(K=>d.has(K)||P==="array"&&K==="array"):[]}function T(x,P,K){const{gen:L,data:B,opts:J}=x,re=L.let("dataType",(0,n._)`typeof ${B}`),ve=L.let("coerced",(0,n._)`undefined`);J.coerceTypes==="array"&&L.if((0,n._)`${re} == 'object' && Array.isArray(${B}) && ${B}.length == 1`,()=>L.assign(B,(0,n._)`${B}[0]`).assign(re,(0,n._)`typeof ${B}`).if(D(P,B,J.strictNumbers),()=>L.assign(ve,B))),L.if((0,n._)`${ve} !== undefined`);for(const Se of K)(d.has(Se)||Se==="array"&&J.coerceTypes==="array")&&ye(Se);L.else(),g(x),L.endIf(),L.if((0,n._)`${ve} !== undefined`,()=>{L.assign(B,ve),$(x,ve)});function ye(Se){switch(Se){case"string":L.elseIf((0,n._)`${re} == "number" || ${re} == "boolean"`).assign(ve,(0,n._)`"" + ${B}`).elseIf((0,n._)`${B} === null`).assign(ve,(0,n._)`""`);return;case"number":L.elseIf((0,n._)`${re} == "boolean" || ${B} === null
              || (${re} == "string" && ${B} && ${B} == +${B})`).assign(ve,(0,n._)`+${B}`);return;case"integer":L.elseIf((0,n._)`${re} === "boolean" || ${B} === null
              || (${re} === "string" && ${B} && ${B} == +${B} && !(${B} % 1))`).assign(ve,(0,n._)`+${B}`);return;case"boolean":L.elseIf((0,n._)`${B} === "false" || ${B} === 0 || ${B} === null`).assign(ve,!1).elseIf((0,n._)`${B} === "true" || ${B} === 1`).assign(ve,!0);return;case"null":L.elseIf((0,n._)`${B} === "" || ${B} === 0 || ${B} === false`),L.assign(ve,null);return;case"array":L.elseIf((0,n._)`${re} === "string" || ${re} === "number"
              || ${re} === "boolean" || ${B} === null`).assign(ve,(0,n._)`[${B}]`)}}}function $({gen:x,parentData:P,parentDataProperty:K},L){x.if((0,n._)`${P} !== undefined`,()=>x.assign((0,n._)`${P}[${K}]`,L))}function C(x,P,K,L=i.Correct){const B=L===i.Correct?n.operators.EQ:n.operators.NEQ;let J;switch(x){case"null":return(0,n._)`${P} ${B} null`;case"array":J=(0,n._)`Array.isArray(${P})`;break;case"object":J=(0,n._)`${P} && typeof ${P} == "object" && !Array.isArray(${P})`;break;case"integer":J=re((0,n._)`!(${P} % 1) && !isNaN(${P})`);break;case"number":J=re();break;default:return(0,n._)`typeof ${P} ${B} ${x}`}return L===i.Correct?J:(0,n.not)(J);function re(ve=n.nil){return(0,n.and)((0,n._)`typeof ${P} == "number"`,ve,K?(0,n._)`isFinite(${P})`:n.nil)}}dataType$2.checkDataType=C;function D(x,P,K,L){if(x.length===1)return C(x[0],P,K,L);let B;const J=(0,s.toHash)(x);if(J.array&&J.object){const re=(0,n._)`typeof ${P} != "object"`;B=J.null?re:(0,n._)`!${P} || ${re}`,delete J.null,delete J.array,delete J.object}else B=n.nil;J.number&&delete J.integer;for(const re in J)B=(0,n.and)(B,C(re,P,K,L));return B}dataType$2.checkDataTypes=D;const F={message:({schema:x})=>`must be ${x}`,params:({schema:x,schemaValue:P})=>typeof x=="string"?(0,n._)`{type: ${x}}`:(0,n._)`{type: ${P}}`};function g(x){const P=q(x);(0,r.reportError)(P,F)}dataType$2.reportTypeError=g;function q(x){const{gen:P,data:K,schema:L}=x,B=(0,s.schemaRefOrVal)(x,L,"type");return{gen:P,keyword:"type",data:K,schema:L.type,schemaCode:B,schemaValue:B,parentSchema:L,params:{},it:x}}return dataType$2}var defaults$3={},hasRequiredDefaults$2;function requireDefaults$2(){if(hasRequiredDefaults$2)return defaults$3;hasRequiredDefaults$2=1,Object.defineProperty(defaults$3,"__esModule",{value:!0}),defaults$3.assignDefaults=void 0;const e=requireCodegen$2(),t=requireUtil$2();function r(s,i){const{properties:o,items:u}=s.schema;if(i==="object"&&o)for(const c in o)n(s,c,o[c].default);else i==="array"&&Array.isArray(u)&&u.forEach((c,d)=>n(s,d,c.default))}defaults$3.assignDefaults=r;function n(s,i,o){const{gen:u,compositeRule:c,data:d,opts:m}=s;if(o===void 0)return;const T=(0,e._)`${d}${(0,e.getProperty)(i)}`;if(c){(0,t.checkStrictMode)(s,`default is ignored for: ${T}`);return}let $=(0,e._)`${T} === undefined`;m.useDefaults==="empty"&&($=(0,e._)`${$} || ${T} === null || ${T} === ""`),u.if($,(0,e._)`${T} = ${(0,e.stringify)(o)}`)}return defaults$3}var keyword$2={},code$3={},hasRequiredCode$3;function requireCode$3(){if(hasRequiredCode$3)return code$3;hasRequiredCode$3=1,Object.defineProperty(code$3,"__esModule",{value:!0}),code$3.validateUnion=code$3.validateArray=code$3.usePattern=code$3.callValidateCode=code$3.schemaProperties=code$3.allSchemaProperties=code$3.noPropertyInData=code$3.propertyInData=code$3.isOwnProperty=code$3.hasPropFunc=code$3.reportMissingProp=code$3.checkMissingProp=code$3.checkReportMissingProp=void 0;const e=requireCodegen$2(),t=requireUtil$2(),r=requireNames$2(),n=requireUtil$2();function s(x,P){const{gen:K,data:L,it:B}=x;K.if(m(K,L,P,B.opts.ownProperties),()=>{x.setParams({missingProperty:(0,e._)`${P}`},!0),x.error()})}code$3.checkReportMissingProp=s;function i({gen:x,data:P,it:{opts:K}},L,B){return(0,e.or)(...L.map(J=>(0,e.and)(m(x,P,J,K.ownProperties),(0,e._)`${B} = ${J}`)))}code$3.checkMissingProp=i;function o(x,P){x.setParams({missingProperty:P},!0),x.error()}code$3.reportMissingProp=o;function u(x){return x.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}code$3.hasPropFunc=u;function c(x,P,K){return(0,e._)`${u(x)}.call(${P}, ${K})`}code$3.isOwnProperty=c;function d(x,P,K,L){const B=(0,e._)`${P}${(0,e.getProperty)(K)} !== undefined`;return L?(0,e._)`${B} && ${c(x,P,K)}`:B}code$3.propertyInData=d;function m(x,P,K,L){const B=(0,e._)`${P}${(0,e.getProperty)(K)} === undefined`;return L?(0,e.or)(B,(0,e.not)(c(x,P,K))):B}code$3.noPropertyInData=m;function T(x){return x?Object.keys(x).filter(P=>P!=="__proto__"):[]}code$3.allSchemaProperties=T;function $(x,P){return T(P).filter(K=>!(0,t.alwaysValidSchema)(x,P[K]))}code$3.schemaProperties=$;function C({schemaCode:x,data:P,it:{gen:K,topSchemaRef:L,schemaPath:B,errorPath:J},it:re},ve,ye,Se){const Ne=Se?(0,e._)`${x}, ${P}, ${L}${B}`:P,Ke=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,J)],[r.default.parentData,re.parentData],[r.default.parentDataProperty,re.parentDataProperty],[r.default.rootData,r.default.rootData]];re.opts.dynamicRef&&Ke.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Ar=(0,e._)`${Ne}, ${K.object(...Ke)}`;return ye!==e.nil?(0,e._)`${ve}.call(${ye}, ${Ar})`:(0,e._)`${ve}(${Ar})`}code$3.callValidateCode=C;const D=(0,e._)`new RegExp`;function F({gen:x,it:{opts:P}},K){const L=P.unicodeRegExp?"u":"",{regExp:B}=P.code,J=B(K,L);return x.scopeValue("pattern",{key:J.toString(),ref:J,code:(0,e._)`${B.code==="new RegExp"?D:(0,n.useFunc)(x,B)}(${K}, ${L})`})}code$3.usePattern=F;function g(x){const{gen:P,data:K,keyword:L,it:B}=x,J=P.name("valid");if(B.allErrors){const ve=P.let("valid",!0);return re(()=>P.assign(ve,!1)),ve}return P.var(J,!0),re(()=>P.break()),J;function re(ve){const ye=P.const("len",(0,e._)`${K}.length`);P.forRange("i",0,ye,Se=>{x.subschema({keyword:L,dataProp:Se,dataPropType:t.Type.Num},J),P.if((0,e.not)(J),ve)})}}code$3.validateArray=g;function q(x){const{gen:P,schema:K,keyword:L,it:B}=x;if(!Array.isArray(K))throw new Error("ajv implementation error");if(K.some(ye=>(0,t.alwaysValidSchema)(B,ye))&&!B.opts.unevaluated)return;const re=P.let("valid",!1),ve=P.name("_valid");P.block(()=>K.forEach((ye,Se)=>{const Ne=x.subschema({keyword:L,schemaProp:Se,compositeRule:!0},ve);P.assign(re,(0,e._)`${re} || ${ve}`),x.mergeValidEvaluated(Ne,ve)||P.if((0,e.not)(re))})),x.result(re,()=>x.reset(),()=>x.error(!0))}return code$3.validateUnion=q,code$3}var hasRequiredKeyword$2;function requireKeyword$2(){if(hasRequiredKeyword$2)return keyword$2;hasRequiredKeyword$2=1,Object.defineProperty(keyword$2,"__esModule",{value:!0}),keyword$2.validateKeywordUsage=keyword$2.validSchemaType=keyword$2.funcKeywordCode=keyword$2.macroKeywordCode=void 0;const e=requireCodegen$2(),t=requireNames$2(),r=requireCode$3(),n=requireErrors$2();function s($,C){const{gen:D,keyword:F,schema:g,parentSchema:q,it:x}=$,P=C.macro.call(x.self,g,q,x),K=d(D,F,P);x.opts.validateSchema!==!1&&x.self.validateSchema(P,!0);const L=D.name("valid");$.subschema({schema:P,schemaPath:e.nil,errSchemaPath:`${x.errSchemaPath}/${F}`,topSchemaRef:K,compositeRule:!0},L),$.pass(L,()=>$.error(!0))}keyword$2.macroKeywordCode=s;function i($,C){var D;const{gen:F,keyword:g,schema:q,parentSchema:x,$data:P,it:K}=$;c(K,C);const L=!P&&C.compile?C.compile.call(K.self,q,x,K):C.validate,B=d(F,g,L),J=F.let("valid");$.block$data(J,re),$.ok((D=C.valid)!==null&&D!==void 0?D:J);function re(){if(C.errors===!1)Se(),C.modifying&&o($),Ne(()=>$.error());else{const Ke=C.async?ve():ye();C.modifying&&o($),Ne(()=>u($,Ke))}}function ve(){const Ke=F.let("ruleErrs",null);return F.try(()=>Se((0,e._)`await `),Ar=>F.assign(J,!1).if((0,e._)`${Ar} instanceof ${K.ValidationError}`,()=>F.assign(Ke,(0,e._)`${Ar}.errors`),()=>F.throw(Ar))),Ke}function ye(){const Ke=(0,e._)`${B}.errors`;return F.assign(Ke,null),Se(e.nil),Ke}function Se(Ke=C.async?(0,e._)`await `:e.nil){const Ar=K.opts.passContext?t.default.this:t.default.self,hi=!("compile"in C&&!P||C.schema===!1);F.assign(J,(0,e._)`${Ke}${(0,r.callValidateCode)($,B,Ar,hi)}`,C.modifying)}function Ne(Ke){var Ar;F.if((0,e.not)((Ar=C.valid)!==null&&Ar!==void 0?Ar:J),Ke)}}keyword$2.funcKeywordCode=i;function o($){const{gen:C,data:D,it:F}=$;C.if(F.parentData,()=>C.assign(D,(0,e._)`${F.parentData}[${F.parentDataProperty}]`))}function u($,C){const{gen:D}=$;D.if((0,e._)`Array.isArray(${C})`,()=>{D.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${C} : ${t.default.vErrors}.concat(${C})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)($)},()=>$.error())}function c({schemaEnv:$},C){if(C.async&&!$.$async)throw new Error("async keyword in sync schema")}function d($,C,D){if(D===void 0)throw new Error(`keyword "${C}" failed to compile`);return $.scopeValue("keyword",typeof D=="function"?{ref:D}:{ref:D,code:(0,e.stringify)(D)})}function m($,C,D=!1){return!C.length||C.some(F=>F==="array"?Array.isArray($):F==="object"?$&&typeof $=="object"&&!Array.isArray($):typeof $==F||D&&typeof $>"u")}keyword$2.validSchemaType=m;function T({schema:$,opts:C,self:D,errSchemaPath:F},g,q){if(Array.isArray(g.keyword)?!g.keyword.includes(q):g.keyword!==q)throw new Error("ajv implementation error");const x=g.dependencies;if(x?.some(P=>!Object.prototype.hasOwnProperty.call($,P)))throw new Error(`parent schema must have dependencies of ${q}: ${x.join(",")}`);if(g.validateSchema&&!g.validateSchema($[q])){const K=`keyword "${q}" value is invalid at path "${F}": `+D.errorsText(g.validateSchema.errors);if(C.validateSchema==="log")D.logger.error(K);else throw new Error(K)}}return keyword$2.validateKeywordUsage=T,keyword$2}var subschema$2={},hasRequiredSubschema$2;function requireSubschema$2(){if(hasRequiredSubschema$2)return subschema$2;hasRequiredSubschema$2=1,Object.defineProperty(subschema$2,"__esModule",{value:!0}),subschema$2.extendSubschemaMode=subschema$2.extendSubschemaData=subschema$2.getSubschema=void 0;const e=requireCodegen$2(),t=requireUtil$2();function r(i,{keyword:o,schemaProp:u,schema:c,schemaPath:d,errSchemaPath:m,topSchemaRef:T}){if(o!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const $=i.schema[o];return u===void 0?{schema:$,schemaPath:(0,e._)`${i.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${i.errSchemaPath}/${o}`}:{schema:$[u],schemaPath:(0,e._)`${i.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(u)}`,errSchemaPath:`${i.errSchemaPath}/${o}/${(0,t.escapeFragment)(u)}`}}if(c!==void 0){if(d===void 0||m===void 0||T===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:d,topSchemaRef:T,errSchemaPath:m}}throw new Error('either "keyword" or "schema" must be passed')}subschema$2.getSubschema=r;function n(i,o,{dataProp:u,dataPropType:c,data:d,dataTypes:m,propertyName:T}){if(d!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:$}=o;if(u!==void 0){const{errorPath:D,dataPathArr:F,opts:g}=o,q=$.let("data",(0,e._)`${o.data}${(0,e.getProperty)(u)}`,!0);C(q),i.errorPath=(0,e.str)`${D}${(0,t.getErrorPath)(u,c,g.jsPropertySyntax)}`,i.parentDataProperty=(0,e._)`${u}`,i.dataPathArr=[...F,i.parentDataProperty]}if(d!==void 0){const D=d instanceof e.Name?d:$.let("data",d,!0);C(D),T!==void 0&&(i.propertyName=T)}m&&(i.dataTypes=m);function C(D){i.data=D,i.dataLevel=o.dataLevel+1,i.dataTypes=[],o.definedProperties=new Set,i.parentData=o.data,i.dataNames=[...o.dataNames,D]}}subschema$2.extendSubschemaData=n;function s(i,{jtdDiscriminator:o,jtdMetadata:u,compositeRule:c,createErrors:d,allErrors:m}){c!==void 0&&(i.compositeRule=c),d!==void 0&&(i.createErrors=d),m!==void 0&&(i.allErrors=m),i.jtdDiscriminator=o,i.jtdMetadata=u}return subschema$2.extendSubschemaMode=s,subschema$2}var resolve$2={},fastDeepEqual$2,hasRequiredFastDeepEqual$2;function requireFastDeepEqual$2(){return hasRequiredFastDeepEqual$2||(hasRequiredFastDeepEqual$2=1,fastDeepEqual$2=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}),fastDeepEqual$2}var jsonSchemaTraverse$2={exports:{}},hasRequiredJsonSchemaTraverse$2;function requireJsonSchemaTraverse$2(){if(hasRequiredJsonSchemaTraverse$2)return jsonSchemaTraverse$2.exports;hasRequiredJsonSchemaTraverse$2=1;var e=jsonSchemaTraverse$2.exports=function(n,s,i){typeof s=="function"&&(i=s,s={}),i=s.cb||i;var o=typeof i=="function"?i:i.pre||function(){},u=i.post||function(){};t(s,o,u,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,s,i,o,u,c,d,m,T,$){if(o&&typeof o=="object"&&!Array.isArray(o)){s(o,u,c,d,m,T,$);for(var C in o){var D=o[C];if(Array.isArray(D)){if(C in e.arrayKeywords)for(var F=0;F<D.length;F++)t(n,s,i,D[F],u+"/"+C+"/"+F,c,u,C,o,F)}else if(C in e.propsKeywords){if(D&&typeof D=="object")for(var g in D)t(n,s,i,D[g],u+"/"+C+"/"+r(g),c,u,C,o,g)}else(C in e.keywords||n.allKeys&&!(C in e.skipKeywords))&&t(n,s,i,D,u+"/"+C,c,u,C,o)}i(o,u,c,d,m,T,$)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse$2.exports}var hasRequiredResolve$2;function requireResolve$2(){if(hasRequiredResolve$2)return resolve$2;hasRequiredResolve$2=1,Object.defineProperty(resolve$2,"__esModule",{value:!0}),resolve$2.getSchemaRefs=resolve$2.resolveUrl=resolve$2.normalizeId=resolve$2._getFullPath=resolve$2.getFullPath=resolve$2.inlineRef=void 0;const e=requireUtil$2(),t=requireFastDeepEqual$2(),r=requireJsonSchemaTraverse$2(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function s(F,g=!0){return typeof F=="boolean"?!0:g===!0?!o(F):g?u(F)<=g:!1}resolve$2.inlineRef=s;const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(F){for(const g in F){if(i.has(g))return!0;const q=F[g];if(Array.isArray(q)&&q.some(o)||typeof q=="object"&&o(q))return!0}return!1}function u(F){let g=0;for(const q in F){if(q==="$ref")return 1/0;if(g++,!n.has(q)&&(typeof F[q]=="object"&&(0,e.eachItem)(F[q],x=>g+=u(x)),g===1/0))return 1/0}return g}function c(F,g="",q){q!==!1&&(g=T(g));const x=F.parse(g);return d(F,x)}resolve$2.getFullPath=c;function d(F,g){return F.serialize(g).split("#")[0]+"#"}resolve$2._getFullPath=d;const m=/#\/?$/;function T(F){return F?F.replace(m,""):""}resolve$2.normalizeId=T;function $(F,g,q){return q=T(q),F.resolve(g,q)}resolve$2.resolveUrl=$;const C=/^[a-z_][-a-z0-9._]*$/i;function D(F,g){if(typeof F=="boolean")return{};const{schemaId:q,uriResolver:x}=this.opts,P=T(F[q]||g),K={"":P},L=c(x,P,!1),B={},J=new Set;return r(F,{allKeys:!0},(ye,Se,Ne,Ke)=>{if(Ke===void 0)return;const Ar=L+Se;let hi=K[Ke];typeof ye[q]=="string"&&(hi=gi.call(this,ye[q])),Gi.call(this,ye.$anchor),Gi.call(this,ye.$dynamicAnchor),K[Se]=hi;function gi(bs){const ua=this.opts.uriResolver.resolve;if(bs=T(hi?ua(hi,bs):bs),J.has(bs))throw ve(bs);J.add(bs);let Re=this.refs[bs];return typeof Re=="string"&&(Re=this.refs[Re]),typeof Re=="object"?re(ye,Re.schema,bs):bs!==T(Ar)&&(bs[0]==="#"?(re(ye,B[bs],bs),B[bs]=ye):this.refs[bs]=Ar),bs}function Gi(bs){if(typeof bs=="string"){if(!C.test(bs))throw new Error(`invalid anchor "${bs}"`);gi.call(this,`#${bs}`)}}}),B;function re(ye,Se,Ne){if(Se!==void 0&&!t(ye,Se))throw ve(Ne)}function ve(ye){return new Error(`reference "${ye}" resolves to more than one schema`)}}return resolve$2.getSchemaRefs=D,resolve$2}var hasRequiredValidate$2;function requireValidate$2(){if(hasRequiredValidate$2)return validate$2;hasRequiredValidate$2=1,Object.defineProperty(validate$2,"__esModule",{value:!0}),validate$2.getData=validate$2.KeywordCxt=validate$2.validateFunctionCode=void 0;const e=requireBoolSchema$2(),t=requireDataType$2(),r=requireApplicability$2(),n=requireDataType$2(),s=requireDefaults$2(),i=requireKeyword$2(),o=requireSubschema$2(),u=requireCodegen$2(),c=requireNames$2(),d=requireResolve$2(),m=requireUtil$2(),T=requireErrors$2();function $(te){if(L(te)&&(J(te),K(te))){g(te);return}C(te,()=>(0,e.topBoolOrEmptySchema)(te))}validate$2.validateFunctionCode=$;function C({gen:te,validateName:se,schema:$e,schemaEnv:Ie,opts:Ye},Je){Ye.code.es5?te.func(se,(0,u._)`${c.default.data}, ${c.default.valCxt}`,Ie.$async,()=>{te.code((0,u._)`"use strict"; ${x($e,Ye)}`),F(te,Ye),te.code(Je)}):te.func(se,(0,u._)`${c.default.data}, ${D(Ye)}`,Ie.$async,()=>te.code(x($e,Ye)).code(Je))}function D(te){return(0,u._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${te.dynamicRef?(0,u._)`, ${c.default.dynamicAnchors}={}`:u.nil}}={}`}function F(te,se){te.if(c.default.valCxt,()=>{te.var(c.default.instancePath,(0,u._)`${c.default.valCxt}.${c.default.instancePath}`),te.var(c.default.parentData,(0,u._)`${c.default.valCxt}.${c.default.parentData}`),te.var(c.default.parentDataProperty,(0,u._)`${c.default.valCxt}.${c.default.parentDataProperty}`),te.var(c.default.rootData,(0,u._)`${c.default.valCxt}.${c.default.rootData}`),se.dynamicRef&&te.var(c.default.dynamicAnchors,(0,u._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{te.var(c.default.instancePath,(0,u._)`""`),te.var(c.default.parentData,(0,u._)`undefined`),te.var(c.default.parentDataProperty,(0,u._)`undefined`),te.var(c.default.rootData,c.default.data),se.dynamicRef&&te.var(c.default.dynamicAnchors,(0,u._)`{}`)})}function g(te){const{schema:se,opts:$e,gen:Ie}=te;C(te,()=>{$e.$comment&&se.$comment&&Ke(te),ye(te),Ie.let(c.default.vErrors,null),Ie.let(c.default.errors,0),$e.unevaluated&&q(te),re(te),Ar(te)})}function q(te){const{gen:se,validateName:$e}=te;te.evaluated=se.const("evaluated",(0,u._)`${$e}.evaluated`),se.if((0,u._)`${te.evaluated}.dynamicProps`,()=>se.assign((0,u._)`${te.evaluated}.props`,(0,u._)`undefined`)),se.if((0,u._)`${te.evaluated}.dynamicItems`,()=>se.assign((0,u._)`${te.evaluated}.items`,(0,u._)`undefined`))}function x(te,se){const $e=typeof te=="object"&&te[se.schemaId];return $e&&(se.code.source||se.code.process)?(0,u._)`/*# sourceURL=${$e} */`:u.nil}function P(te,se){if(L(te)&&(J(te),K(te))){B(te,se);return}(0,e.boolOrEmptySchema)(te,se)}function K({schema:te,self:se}){if(typeof te=="boolean")return!te;for(const $e in te)if(se.RULES.all[$e])return!0;return!1}function L(te){return typeof te.schema!="boolean"}function B(te,se){const{schema:$e,gen:Ie,opts:Ye}=te;Ye.$comment&&$e.$comment&&Ke(te),Se(te),Ne(te);const Je=Ie.const("_errs",c.default.errors);re(te,Je),Ie.var(se,(0,u._)`${Je} === ${c.default.errors}`)}function J(te){(0,m.checkUnknownRules)(te),ve(te)}function re(te,se){if(te.opts.jtd)return gi(te,[],!1,se);const $e=(0,t.getSchemaTypes)(te.schema),Ie=(0,t.coerceAndCheckDataType)(te,$e);gi(te,$e,!Ie,se)}function ve(te){const{schema:se,errSchemaPath:$e,opts:Ie,self:Ye}=te;se.$ref&&Ie.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(se,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function ye(te){const{schema:se,opts:$e}=te;se.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,m.checkStrictMode)(te,"default is ignored in the schema root")}function Se(te){const se=te.schema[te.opts.schemaId];se&&(te.baseId=(0,d.resolveUrl)(te.opts.uriResolver,te.baseId,se))}function Ne(te){if(te.schema.$async&&!te.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ke({gen:te,schemaEnv:se,schema:$e,errSchemaPath:Ie,opts:Ye}){const Je=$e.$comment;if(Ye.$comment===!0)te.code((0,u._)`${c.default.self}.logger.log(${Je})`);else if(typeof Ye.$comment=="function"){const pi=(0,u.str)`${Ie}/$comment`,Os=te.scopeValue("root",{ref:se.root});te.code((0,u._)`${c.default.self}.opts.$comment(${Je}, ${pi}, ${Os}.schema)`)}}function Ar(te){const{gen:se,schemaEnv:$e,validateName:Ie,ValidationError:Ye,opts:Je}=te;$e.$async?se.if((0,u._)`${c.default.errors} === 0`,()=>se.return(c.default.data),()=>se.throw((0,u._)`new ${Ye}(${c.default.vErrors})`)):(se.assign((0,u._)`${Ie}.errors`,c.default.vErrors),Je.unevaluated&&hi(te),se.return((0,u._)`${c.default.errors} === 0`))}function hi({gen:te,evaluated:se,props:$e,items:Ie}){$e instanceof u.Name&&te.assign((0,u._)`${se}.props`,$e),Ie instanceof u.Name&&te.assign((0,u._)`${se}.items`,Ie)}function gi(te,se,$e,Ie){const{gen:Ye,schema:Je,data:pi,allErrors:Os,opts:vi,self:Ui}=te,{RULES:ca}=Ui;if(Je.$ref&&(vi.ignoreKeywordsWithRef||!(0,m.schemaHasRulesButRef)(Je,ca))){Ye.block(()=>De(te,"$ref",ca.all.$ref.definition));return}vi.jtd||bs(te,se),Ye.block(()=>{for(const da of ca.rules)va(da);va(ca.post)});function va(da){(0,r.shouldUseGroup)(Je,da)&&(da.type?(Ye.if((0,n.checkDataType)(da.type,pi,vi.strictNumbers)),Gi(te,da),se.length===1&&se[0]===da.type&&$e&&(Ye.else(),(0,n.reportTypeError)(te)),Ye.endIf()):Gi(te,da),Os||Ye.if((0,u._)`${c.default.errors} === ${Ie||0}`))}}function Gi(te,se){const{gen:$e,schema:Ie,opts:{useDefaults:Ye}}=te;Ye&&(0,s.assignDefaults)(te,se.type),$e.block(()=>{for(const Je of se.rules)(0,r.shouldUseRule)(Ie,Je)&&De(te,Je.keyword,Je.definition,se.type)})}function bs(te,se){te.schemaEnv.meta||!te.opts.strictTypes||(ua(te,se),te.opts.allowUnionTypes||Re(te,se),ie(te,te.dataTypes))}function ua(te,se){if(se.length){if(!te.dataTypes.length){te.dataTypes=se;return}se.forEach($e=>{ue(te.dataTypes,$e)||X(te,`type "${$e}" not allowed by context "${te.dataTypes.join(",")}"`)}),G(te,se)}}function Re(te,se){se.length>1&&!(se.length===2&&se.includes("null"))&&X(te,"use allowUnionTypes to allow union type keyword")}function ie(te,se){const $e=te.self.RULES.all;for(const Ie in $e){const Ye=$e[Ie];if(typeof Ye=="object"&&(0,r.shouldUseRule)(te.schema,Ye)){const{type:Je}=Ye.definition;Je.length&&!Je.some(pi=>ke(se,pi))&&X(te,`missing type "${Je.join(",")}" for keyword "${Ie}"`)}}}function ke(te,se){return te.includes(se)||se==="number"&&te.includes("integer")}function ue(te,se){return te.includes(se)||se==="integer"&&te.includes("number")}function G(te,se){const $e=[];for(const Ie of te.dataTypes)ue(se,Ie)?$e.push(Ie):se.includes("integer")&&Ie==="number"&&$e.push("integer");te.dataTypes=$e}function X(te,se){const $e=te.schemaEnv.baseId+te.errSchemaPath;se+=` at "${$e}" (strictTypes)`,(0,m.checkStrictMode)(te,se,te.opts.strictTypes)}class ce{constructor(se,$e,Ie){if((0,i.validateKeywordUsage)(se,$e,Ie),this.gen=se.gen,this.allErrors=se.allErrors,this.keyword=Ie,this.data=se.data,this.schema=se.schema[Ie],this.$data=$e.$data&&se.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(se,this.schema,Ie,this.$data),this.schemaType=$e.schemaType,this.parentSchema=se.schema,this.params={},this.it=se,this.def=$e,this.$data)this.schemaCode=se.gen.const("vSchema",vr(this.$data,se));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${Ie} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=se.gen.const("_errs",c.default.errors))}result(se,$e,Ie){this.failResult((0,u.not)(se),$e,Ie)}failResult(se,$e,Ie){this.gen.if(se),Ie?Ie():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(se,$e){this.failResult((0,u.not)(se),void 0,$e)}fail(se){if(se===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(se),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(se){if(!this.$data)return this.fail(se);const{schemaCode:$e}=this;this.fail((0,u._)`${$e} !== undefined && (${(0,u.or)(this.invalid$data(),se)})`)}error(se,$e,Ie){if($e){this.setParams($e),this._error(se,Ie),this.setParams({});return}this._error(se,Ie)}_error(se,$e){(se?T.reportExtraError:T.reportError)(this,this.def.error,$e)}$dataError(){(0,T.reportError)(this,this.def.$dataError||T.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,T.resetErrorsCount)(this.gen,this.errsCount)}ok(se){this.allErrors||this.gen.if(se)}setParams(se,$e){$e?Object.assign(this.params,se):this.params=se}block$data(se,$e,Ie=u.nil){this.gen.block(()=>{this.check$data(se,Ie),$e()})}check$data(se=u.nil,$e=u.nil){if(!this.$data)return;const{gen:Ie,schemaCode:Ye,schemaType:Je,def:pi}=this;Ie.if((0,u.or)((0,u._)`${Ye} === undefined`,$e)),se!==u.nil&&Ie.assign(se,!0),(Je.length||pi.validateSchema)&&(Ie.elseIf(this.invalid$data()),this.$dataError(),se!==u.nil&&Ie.assign(se,!1)),Ie.else()}invalid$data(){const{gen:se,schemaCode:$e,schemaType:Ie,def:Ye,it:Je}=this;return(0,u.or)(pi(),Os());function pi(){if(Ie.length){if(!($e instanceof u.Name))throw new Error("ajv implementation error");const vi=Array.isArray(Ie)?Ie:[Ie];return(0,u._)`${(0,n.checkDataTypes)(vi,$e,Je.opts.strictNumbers,n.DataType.Wrong)}`}return u.nil}function Os(){if(Ye.validateSchema){const vi=se.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,u._)`!${vi}(${$e})`}return u.nil}}subschema(se,$e){const Ie=(0,o.getSubschema)(this.it,se);(0,o.extendSubschemaData)(Ie,this.it,se),(0,o.extendSubschemaMode)(Ie,se);const Ye={...this.it,...Ie,items:void 0,props:void 0};return P(Ye,$e),Ye}mergeEvaluated(se,$e){const{it:Ie,gen:Ye}=this;Ie.opts.unevaluated&&(Ie.props!==!0&&se.props!==void 0&&(Ie.props=m.mergeEvaluated.props(Ye,se.props,Ie.props,$e)),Ie.items!==!0&&se.items!==void 0&&(Ie.items=m.mergeEvaluated.items(Ye,se.items,Ie.items,$e)))}mergeValidEvaluated(se,$e){const{it:Ie,gen:Ye}=this;if(Ie.opts.unevaluated&&(Ie.props!==!0||Ie.items!==!0))return Ye.if($e,()=>this.mergeEvaluated(se,u.Name)),!0}}validate$2.KeywordCxt=ce;function De(te,se,$e,Ie){const Ye=new ce(te,$e,se);"code"in $e?$e.code(Ye,Ie):Ye.$data&&$e.validate?(0,i.funcKeywordCode)(Ye,$e):"macro"in $e?(0,i.macroKeywordCode)(Ye,$e):($e.compile||$e.validate)&&(0,i.funcKeywordCode)(Ye,$e)}const qe=/^\/(?:[^~]|~0|~1)*$/,bt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function vr(te,{dataLevel:se,dataNames:$e,dataPathArr:Ie}){let Ye,Je;if(te==="")return c.default.rootData;if(te[0]==="/"){if(!qe.test(te))throw new Error(`Invalid JSON-pointer: ${te}`);Ye=te,Je=c.default.rootData}else{const Ui=bt.exec(te);if(!Ui)throw new Error(`Invalid JSON-pointer: ${te}`);const ca=+Ui[1];if(Ye=Ui[2],Ye==="#"){if(ca>=se)throw new Error(vi("property/index",ca));return Ie[se-ca]}if(ca>se)throw new Error(vi("data",ca));if(Je=$e[se-ca],!Ye)return Je}let pi=Je;const Os=Ye.split("/");for(const Ui of Os)Ui&&(Je=(0,u._)`${Je}${(0,u.getProperty)((0,m.unescapeJsonPointer)(Ui))}`,pi=(0,u._)`${pi} && ${Je}`);return pi;function vi(Ui,ca){return`Cannot access ${Ui} ${ca} levels up, current level is ${se}`}}return validate$2.getData=vr,validate$2}var validation_error$2={},hasRequiredValidation_error$2;function requireValidation_error$2(){if(hasRequiredValidation_error$2)return validation_error$2;hasRequiredValidation_error$2=1,Object.defineProperty(validation_error$2,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return validation_error$2.default=e,validation_error$2}var ref_error$2={},hasRequiredRef_error$2;function requireRef_error$2(){if(hasRequiredRef_error$2)return ref_error$2;hasRequiredRef_error$2=1,Object.defineProperty(ref_error$2,"__esModule",{value:!0});const e=requireResolve$2();class t extends Error{constructor(n,s,i,o){super(o||`can't resolve reference ${i} from id ${s}`),this.missingRef=(0,e.resolveUrl)(n,s,i),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return ref_error$2.default=t,ref_error$2}var compile$2={},hasRequiredCompile$2;function requireCompile$2(){if(hasRequiredCompile$2)return compile$2;hasRequiredCompile$2=1,Object.defineProperty(compile$2,"__esModule",{value:!0}),compile$2.resolveSchema=compile$2.getCompilingSchema=compile$2.resolveRef=compile$2.compileSchema=compile$2.SchemaEnv=void 0;const e=requireCodegen$2(),t=requireValidation_error$2(),r=requireNames$2(),n=requireResolve$2(),s=requireUtil$2(),i=requireValidate$2();class o{constructor(q){var x;this.refs={},this.dynamicAnchors={};let P;typeof q.schema=="object"&&(P=q.schema),this.schema=q.schema,this.schemaId=q.schemaId,this.root=q.root||this,this.baseId=(x=q.baseId)!==null&&x!==void 0?x:(0,n.normalizeId)(P?.[q.schemaId||"$id"]),this.schemaPath=q.schemaPath,this.localRefs=q.localRefs,this.meta=q.meta,this.$async=P?.$async,this.refs={}}}compile$2.SchemaEnv=o;function u(g){const q=m.call(this,g);if(q)return q;const x=(0,n.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:P,lines:K}=this.opts.code,{ownProperties:L}=this.opts,B=new e.CodeGen(this.scope,{es5:P,lines:K,ownProperties:L});let J;g.$async&&(J=B.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const re=B.scopeName("validate");g.validateName=re;const ve={gen:B,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:B.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:re,ValidationError:J,schema:g.schema,schemaEnv:g,rootId:x,baseId:g.baseId||x,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let ye;try{this._compilations.add(g),(0,i.validateFunctionCode)(ve),B.optimize(this.opts.code.optimize);const Se=B.toString();ye=`${B.scopeRefs(r.default.scope)}return ${Se}`,this.opts.code.process&&(ye=this.opts.code.process(ye,g));const Ke=new Function(`${r.default.self}`,`${r.default.scope}`,ye)(this,this.scope.get());if(this.scope.value(re,{ref:Ke}),Ke.errors=null,Ke.schema=g.schema,Ke.schemaEnv=g,g.$async&&(Ke.$async=!0),this.opts.code.source===!0&&(Ke.source={validateName:re,validateCode:Se,scopeValues:B._values}),this.opts.unevaluated){const{props:Ar,items:hi}=ve;Ke.evaluated={props:Ar instanceof e.Name?void 0:Ar,items:hi instanceof e.Name?void 0:hi,dynamicProps:Ar instanceof e.Name,dynamicItems:hi instanceof e.Name},Ke.source&&(Ke.source.evaluated=(0,e.stringify)(Ke.evaluated))}return g.validate=Ke,g}catch(Se){throw delete g.validate,delete g.validateName,ye&&this.logger.error("Error compiling schema, function code:",ye),Se}finally{this._compilations.delete(g)}}compile$2.compileSchema=u;function c(g,q,x){var P;x=(0,n.resolveUrl)(this.opts.uriResolver,q,x);const K=g.refs[x];if(K)return K;let L=$.call(this,g,x);if(L===void 0){const B=(P=g.localRefs)===null||P===void 0?void 0:P[x],{schemaId:J}=this.opts;B&&(L=new o({schema:B,schemaId:J,root:g,baseId:q}))}if(L!==void 0)return g.refs[x]=d.call(this,L)}compile$2.resolveRef=c;function d(g){return(0,n.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:u.call(this,g)}function m(g){for(const q of this._compilations)if(T(q,g))return q}compile$2.getCompilingSchema=m;function T(g,q){return g.schema===q.schema&&g.root===q.root&&g.baseId===q.baseId}function $(g,q){let x;for(;typeof(x=this.refs[q])=="string";)q=x;return x||this.schemas[q]||C.call(this,g,q)}function C(g,q){const x=this.opts.uriResolver.parse(q),P=(0,n._getFullPath)(this.opts.uriResolver,x);let K=(0,n.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&P===K)return F.call(this,x,g);const L=(0,n.normalizeId)(P),B=this.refs[L]||this.schemas[L];if(typeof B=="string"){const J=C.call(this,g,B);return typeof J?.schema!="object"?void 0:F.call(this,x,J)}if(typeof B?.schema=="object"){if(B.validate||u.call(this,B),L===(0,n.normalizeId)(q)){const{schema:J}=B,{schemaId:re}=this.opts,ve=J[re];return ve&&(K=(0,n.resolveUrl)(this.opts.uriResolver,K,ve)),new o({schema:J,schemaId:re,root:g,baseId:K})}return F.call(this,x,B)}}compile$2.resolveSchema=C;const D=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function F(g,{baseId:q,schema:x,root:P}){var K;if(((K=g.fragment)===null||K===void 0?void 0:K[0])!=="/")return;for(const J of g.fragment.slice(1).split("/")){if(typeof x=="boolean")return;const re=x[(0,s.unescapeFragment)(J)];if(re===void 0)return;x=re;const ve=typeof x=="object"&&x[this.opts.schemaId];!D.has(J)&&ve&&(q=(0,n.resolveUrl)(this.opts.uriResolver,q,ve))}let L;if(typeof x!="boolean"&&x.$ref&&!(0,s.schemaHasRulesButRef)(x,this.RULES)){const J=(0,n.resolveUrl)(this.opts.uriResolver,q,x.$ref);L=C.call(this,P,J)}const{schemaId:B}=this.opts;if(L=L||new o({schema:x,schemaId:B,root:P,baseId:q}),L.schema!==L.root.schema)return L}return compile$2}const $id$4="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description$2="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$4="object",required$4=["$data"],properties$6={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$4=!1,require$$9$2={$id:$id$4,description:description$2,type:type$4,required:required$4,properties:properties$6,additionalProperties:additionalProperties$4};var uri$2={},fastUri$2={exports:{}},utils$2,hasRequiredUtils$2;function requireUtils$2(){if(hasRequiredUtils$2)return utils$2;hasRequiredUtils$2=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r($){let C="",D=0,F=0;for(F=0;F<$.length;F++)if(D=$[F].charCodeAt(0),D!==48){if(!(D>=48&&D<=57||D>=65&&D<=70||D>=97&&D<=102))return"";C+=$[F];break}for(F+=1;F<$.length;F++){if(D=$[F].charCodeAt(0),!(D>=48&&D<=57||D>=65&&D<=70||D>=97&&D<=102))return"";C+=$[F]}return C}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function s($){return $.length=0,!0}function i($,C,D){if($.length){const F=r($);if(F!=="")C.push(F);else return D.error=!0,!1;$.length=0}return!0}function o($){let C=0;const D={error:!1,address:"",zone:""},F=[],g=[];let q=!1,x=!1,P=i;for(let K=0;K<$.length;K++){const L=$[K];if(!(L==="["||L==="]"))if(L===":"){if(q===!0&&(x=!0),!P(g,F,D))break;if(++C>7){D.error=!0;break}K>0&&$[K-1]===":"&&(q=!0),F.push(":");continue}else if(L==="%"){if(!P(g,F,D))break;P=s}else{g.push(L);continue}}return g.length&&(P===s?D.zone=g.join(""):x?F.push(g.join("")):F.push(r(g))),D.address=F.join(""),D}function u($){if(c($,":")<2)return{host:$,isIPV6:!1};const C=o($);if(C.error)return{host:$,isIPV6:!1};{let D=C.address,F=C.address;return C.zone&&(D+="%"+C.zone,F+="%25"+C.zone),{host:D,isIPV6:!0,escapedHost:F}}}function c($,C){let D=0;for(let F=0;F<$.length;F++)$[F]===C&&D++;return D}function d($){let C=$;const D=[];let F=-1,g=0;for(;g=C.length;){if(g===1){if(C===".")break;if(C==="/"){D.push("/");break}else{D.push(C);break}}else if(g===2){if(C[0]==="."){if(C[1]===".")break;if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&(C[1]==="."||C[1]==="/")){D.push("/");break}}else if(g===3&&C==="/.."){D.length!==0&&D.pop(),D.push("/");break}if(C[0]==="."){if(C[1]==="."){if(C[2]==="/"){C=C.slice(3);continue}}else if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&C[1]==="."){if(C[2]==="/"){C=C.slice(2);continue}else if(C[2]==="."&&C[3]==="/"){C=C.slice(3),D.length!==0&&D.pop();continue}}if((F=C.indexOf("/",1))===-1){D.push(C);break}else D.push(C.slice(0,F)),C=C.slice(F)}return D.join("")}function m($,C){const D=C!==!0?escape:unescape;return $.scheme!==void 0&&($.scheme=D($.scheme)),$.userinfo!==void 0&&($.userinfo=D($.userinfo)),$.host!==void 0&&($.host=D($.host)),$.path!==void 0&&($.path=D($.path)),$.query!==void 0&&($.query=D($.query)),$.fragment!==void 0&&($.fragment=D($.fragment)),$}function T($){const C=[];if($.userinfo!==void 0&&(C.push($.userinfo),C.push("@")),$.host!==void 0){let D=unescape($.host);if(!t(D)){const F=u(D);F.isIPV6===!0?D=`[${F.escapedHost}]`:D=$.host}C.push(D)}return(typeof $.port=="number"||typeof $.port=="string")&&(C.push(":"),C.push(String($.port))),C.length?C.join(""):void 0}return utils$2={nonSimpleDomain:n,recomposeAuthority:T,normalizeComponentEncoding:m,removeDotSegments:d,isIPv4:t,isUUID:e,normalizeIPv6:u,stringArrayToHexStripped:r},utils$2}var schemes$2,hasRequiredSchemes$2;function requireSchemes$2(){if(hasRequiredSchemes$2)return schemes$2;hasRequiredSchemes$2=1;const{isUUID:e}=requireUtils$2(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(L){return r.indexOf(L)!==-1}function s(L){return L.secure===!0?!0:L.secure===!1?!1:L.scheme?L.scheme.length===3&&(L.scheme[0]==="w"||L.scheme[0]==="W")&&(L.scheme[1]==="s"||L.scheme[1]==="S")&&(L.scheme[2]==="s"||L.scheme[2]==="S"):!1}function i(L){return L.host||(L.error=L.error||"HTTP URIs must have a host."),L}function o(L){const B=String(L.scheme).toLowerCase()==="https";return(L.port===(B?443:80)||L.port==="")&&(L.port=void 0),L.path||(L.path="/"),L}function u(L){return L.secure=s(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L}function c(L){if((L.port===(s(L)?443:80)||L.port==="")&&(L.port=void 0),typeof L.secure=="boolean"&&(L.scheme=L.secure?"wss":"ws",L.secure=void 0),L.resourceName){const[B,J]=L.resourceName.split("?");L.path=B&&B!=="/"?B:void 0,L.query=J,L.resourceName=void 0}return L.fragment=void 0,L}function d(L,B){if(!L.path)return L.error="URN can not be parsed",L;const J=L.path.match(t);if(J){const re=B.scheme||L.scheme||"urn";L.nid=J[1].toLowerCase(),L.nss=J[2];const ve=`${re}:${B.nid||L.nid}`,ye=K(ve);L.path=void 0,ye&&(L=ye.parse(L,B))}else L.error=L.error||"URN can not be parsed.";return L}function m(L,B){if(L.nid===void 0)throw new Error("URN without nid cannot be serialized");const J=B.scheme||L.scheme||"urn",re=L.nid.toLowerCase(),ve=`${J}:${B.nid||re}`,ye=K(ve);ye&&(L=ye.serialize(L,B));const Se=L,Ne=L.nss;return Se.path=`${re||B.nid}:${Ne}`,B.skipEscape=!0,Se}function T(L,B){const J=L;return J.uuid=J.nss,J.nss=void 0,!B.tolerant&&(!J.uuid||!e(J.uuid))&&(J.error=J.error||"UUID is not valid."),J}function $(L){const B=L;return B.nss=(L.uuid||"").toLowerCase(),B}const C={scheme:"http",domainHost:!0,parse:i,serialize:o},D={scheme:"https",domainHost:C.domainHost,parse:i,serialize:o},F={scheme:"ws",domainHost:!0,parse:u,serialize:c},g={scheme:"wss",domainHost:F.domainHost,parse:F.parse,serialize:F.serialize},P={http:C,https:D,ws:F,wss:g,urn:{scheme:"urn",parse:d,serialize:m,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:T,serialize:$,skipNormalize:!0}};Object.setPrototypeOf(P,null);function K(L){return L&&(P[L]||P[L.toLowerCase()])||void 0}return schemes$2={wsIsSecure:s,SCHEMES:P,isValidSchemeName:n,getSchemeHandler:K},schemes$2}var hasRequiredFastUri$2;function requireFastUri$2(){if(hasRequiredFastUri$2)return fastUri$2.exports;hasRequiredFastUri$2=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:s,nonSimpleDomain:i}=requireUtils$2(),{SCHEMES:o,getSchemeHandler:u}=requireSchemes$2();function c(g,q){return typeof g=="string"?g=$(D(g,q),q):typeof g=="object"&&(g=D($(g,q),q)),g}function d(g,q,x){const P=x?Object.assign({scheme:"null"},x):{scheme:"null"},K=m(D(g,P),D(q,P),P,!0);return P.skipEscape=!0,$(K,P)}function m(g,q,x,P){const K={};return P||(g=D($(g,x),x),q=D($(q,x),x)),x=x||{},!x.tolerant&&q.scheme?(K.scheme=q.scheme,K.userinfo=q.userinfo,K.host=q.host,K.port=q.port,K.path=t(q.path||""),K.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(K.userinfo=q.userinfo,K.host=q.host,K.port=q.port,K.path=t(q.path||""),K.query=q.query):(q.path?(q.path[0]==="/"?K.path=t(q.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?K.path="/"+q.path:g.path?K.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+q.path:K.path=q.path,K.path=t(K.path)),K.query=q.query):(K.path=g.path,q.query!==void 0?K.query=q.query:K.query=g.query),K.userinfo=g.userinfo,K.host=g.host,K.port=g.port),K.scheme=g.scheme),K.fragment=q.fragment,K}function T(g,q,x){return typeof g=="string"?(g=unescape(g),g=$(n(D(g,x),!0),{...x,skipEscape:!0})):typeof g=="object"&&(g=$(n(g,!0),{...x,skipEscape:!0})),typeof q=="string"?(q=unescape(q),q=$(n(D(q,x),!0),{...x,skipEscape:!0})):typeof q=="object"&&(q=$(n(q,!0),{...x,skipEscape:!0})),g.toLowerCase()===q.toLowerCase()}function $(g,q){const x={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},P=Object.assign({},q),K=[],L=u(P.scheme||x.scheme);L&&L.serialize&&L.serialize(x,P),x.path!==void 0&&(P.skipEscape?x.path=unescape(x.path):(x.path=escape(x.path),x.scheme!==void 0&&(x.path=x.path.split("%3A").join(":")))),P.reference!=="suffix"&&x.scheme&&K.push(x.scheme,":");const B=r(x);if(B!==void 0&&(P.reference!=="suffix"&&K.push("//"),K.push(B),x.path&&x.path[0]!=="/"&&K.push("/")),x.path!==void 0){let J=x.path;!P.absolutePath&&(!L||!L.absolutePath)&&(J=t(J)),B===void 0&&J[0]==="/"&&J[1]==="/"&&(J="/%2F"+J.slice(2)),K.push(J)}return x.query!==void 0&&K.push("?",x.query),x.fragment!==void 0&&K.push("#",x.fragment),K.join("")}const C=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function D(g,q){const x=Object.assign({},q),P={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let K=!1;x.reference==="suffix"&&(x.scheme?g=x.scheme+":"+g:g="//"+g);const L=g.match(C);if(L){if(P.scheme=L[1],P.userinfo=L[3],P.host=L[4],P.port=parseInt(L[5],10),P.path=L[6]||"",P.query=L[7],P.fragment=L[8],isNaN(P.port)&&(P.port=L[5]),P.host)if(s(P.host)===!1){const re=e(P.host);P.host=re.host.toLowerCase(),K=re.isIPV6}else K=!0;P.scheme===void 0&&P.userinfo===void 0&&P.host===void 0&&P.port===void 0&&P.query===void 0&&!P.path?P.reference="same-document":P.scheme===void 0?P.reference="relative":P.fragment===void 0?P.reference="absolute":P.reference="uri",x.reference&&x.reference!=="suffix"&&x.reference!==P.reference&&(P.error=P.error||"URI is not a "+x.reference+" reference.");const B=u(x.scheme||P.scheme);if(!x.unicodeSupport&&(!B||!B.unicodeSupport)&&P.host&&(x.domainHost||B&&B.domainHost)&&K===!1&&i(P.host))try{P.host=URL.domainToASCII(P.host.toLowerCase())}catch(J){P.error=P.error||"Host's domain name can not be converted to ASCII: "+J}(!B||B&&!B.skipNormalize)&&(g.indexOf("%")!==-1&&(P.scheme!==void 0&&(P.scheme=unescape(P.scheme)),P.host!==void 0&&(P.host=unescape(P.host))),P.path&&(P.path=escape(unescape(P.path))),P.fragment&&(P.fragment=encodeURI(decodeURIComponent(P.fragment)))),B&&B.parse&&B.parse(P,x)}else P.error=P.error||"URI can not be parsed.";return P}const F={SCHEMES:o,normalize:c,resolve:d,resolveComponent:m,equal:T,serialize:$,parse:D};return fastUri$2.exports=F,fastUri$2.exports.default=F,fastUri$2.exports.fastUri=F,fastUri$2.exports}var hasRequiredUri$2;function requireUri$2(){if(hasRequiredUri$2)return uri$2;hasRequiredUri$2=1,Object.defineProperty(uri$2,"__esModule",{value:!0});const e=requireFastUri$2();return e.code='require("ajv/dist/runtime/uri").default',uri$2.default=e,uri$2}var hasRequiredCore$4;function requireCore$4(){return hasRequiredCore$4||(hasRequiredCore$4=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=requireValidate$2();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=requireCodegen$2();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=requireValidation_error$2(),s=requireRef_error$2(),i=requireRules$2(),o=requireCompile$2(),u=requireCodegen$2(),c=requireResolve$2(),d=requireDataType$2(),m=requireUtil$2(),T=require$$9$2,$=requireUri$2(),C=(Re,ie)=>new RegExp(Re,ie);C.code="new RegExp";const D=["removeAdditional","useDefaults","coerceTypes"],F=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},q={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},x=200;function P(Re){var ie,ke,ue,G,X,ce,De,qe,bt,vr,te,se,$e,Ie,Ye,Je,pi,Os,vi,Ui,ca,va,da,ha,ya;const mi=Re.strict,fa=(ie=Re.code)===null||ie===void 0?void 0:ie.optimize,pa=fa===!0||fa===void 0?1:fa||0,_a=(ue=(ke=Re.code)===null||ke===void 0?void 0:ke.regExp)!==null&&ue!==void 0?ue:C,be=(G=Re.uriResolver)!==null&&G!==void 0?G:$.default;return{strictSchema:(ce=(X=Re.strictSchema)!==null&&X!==void 0?X:mi)!==null&&ce!==void 0?ce:!0,strictNumbers:(qe=(De=Re.strictNumbers)!==null&&De!==void 0?De:mi)!==null&&qe!==void 0?qe:!0,strictTypes:(vr=(bt=Re.strictTypes)!==null&&bt!==void 0?bt:mi)!==null&&vr!==void 0?vr:"log",strictTuples:(se=(te=Re.strictTuples)!==null&&te!==void 0?te:mi)!==null&&se!==void 0?se:"log",strictRequired:(Ie=($e=Re.strictRequired)!==null&&$e!==void 0?$e:mi)!==null&&Ie!==void 0?Ie:!1,code:Re.code?{...Re.code,optimize:pa,regExp:_a}:{optimize:pa,regExp:_a},loopRequired:(Ye=Re.loopRequired)!==null&&Ye!==void 0?Ye:x,loopEnum:(Je=Re.loopEnum)!==null&&Je!==void 0?Je:x,meta:(pi=Re.meta)!==null&&pi!==void 0?pi:!0,messages:(Os=Re.messages)!==null&&Os!==void 0?Os:!0,inlineRefs:(vi=Re.inlineRefs)!==null&&vi!==void 0?vi:!0,schemaId:(Ui=Re.schemaId)!==null&&Ui!==void 0?Ui:"$id",addUsedSchema:(ca=Re.addUsedSchema)!==null&&ca!==void 0?ca:!0,validateSchema:(va=Re.validateSchema)!==null&&va!==void 0?va:!0,validateFormats:(da=Re.validateFormats)!==null&&da!==void 0?da:!0,unicodeRegExp:(ha=Re.unicodeRegExp)!==null&&ha!==void 0?ha:!0,int32range:(ya=Re.int32range)!==null&&ya!==void 0?ya:!0,uriResolver:be}}class K{constructor(ie={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ie=this.opts={...ie,...P(ie)};const{es5:ke,lines:ue}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:F,es5:ke,lines:ue}),this.logger=Ne(ie.logger);const G=ie.validateFormats;ie.validateFormats=!1,this.RULES=(0,i.getRules)(),L.call(this,g,ie,"NOT SUPPORTED"),L.call(this,q,ie,"DEPRECATED","warn"),this._metaOpts=ye.call(this),ie.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ie.keywords&&ve.call(this,ie.keywords),typeof ie.meta=="object"&&this.addMetaSchema(ie.meta),J.call(this),ie.validateFormats=G}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ie,meta:ke,schemaId:ue}=this.opts;let G=T;ue==="id"&&(G={...T},G.id=G.$id,delete G.$id),ke&&ie&&this.addMetaSchema(G,G[ue],!1)}defaultMeta(){const{meta:ie,schemaId:ke}=this.opts;return this.opts.defaultMeta=typeof ie=="object"?ie[ke]||ie:void 0}validate(ie,ke){let ue;if(typeof ie=="string"){if(ue=this.getSchema(ie),!ue)throw new Error(`no schema with key or ref "${ie}"`)}else ue=this.compile(ie);const G=ue(ke);return"$async"in ue||(this.errors=ue.errors),G}compile(ie,ke){const ue=this._addSchema(ie,ke);return ue.validate||this._compileSchemaEnv(ue)}compileAsync(ie,ke){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ue}=this.opts;return G.call(this,ie,ke);async function G(vr,te){await X.call(this,vr.$schema);const se=this._addSchema(vr,te);return se.validate||ce.call(this,se)}async function X(vr){vr&&!this.getSchema(vr)&&await G.call(this,{$ref:vr},!0)}async function ce(vr){try{return this._compileSchemaEnv(vr)}catch(te){if(!(te instanceof s.default))throw te;return De.call(this,te),await qe.call(this,te.missingSchema),ce.call(this,vr)}}function De({missingSchema:vr,missingRef:te}){if(this.refs[vr])throw new Error(`AnySchema ${vr} is loaded but ${te} cannot be resolved`)}async function qe(vr){const te=await bt.call(this,vr);this.refs[vr]||await X.call(this,te.$schema),this.refs[vr]||this.addSchema(te,vr,ke)}async function bt(vr){const te=this._loading[vr];if(te)return te;try{return await(this._loading[vr]=ue(vr))}finally{delete this._loading[vr]}}}addSchema(ie,ke,ue,G=this.opts.validateSchema){if(Array.isArray(ie)){for(const ce of ie)this.addSchema(ce,void 0,ue,G);return this}let X;if(typeof ie=="object"){const{schemaId:ce}=this.opts;if(X=ie[ce],X!==void 0&&typeof X!="string")throw new Error(`schema ${ce} must be string`)}return ke=(0,c.normalizeId)(ke||X),this._checkUnique(ke),this.schemas[ke]=this._addSchema(ie,ue,ke,G,!0),this}addMetaSchema(ie,ke,ue=this.opts.validateSchema){return this.addSchema(ie,ke,!0,ue),this}validateSchema(ie,ke){if(typeof ie=="boolean")return!0;let ue;if(ue=ie.$schema,ue!==void 0&&typeof ue!="string")throw new Error("$schema must be a string");if(ue=ue||this.opts.defaultMeta||this.defaultMeta(),!ue)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const G=this.validate(ue,ie);if(!G&&ke){const X="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(X);else throw new Error(X)}return G}getSchema(ie){let ke;for(;typeof(ke=B.call(this,ie))=="string";)ie=ke;if(ke===void 0){const{schemaId:ue}=this.opts,G=new o.SchemaEnv({schema:{},schemaId:ue});if(ke=o.resolveSchema.call(this,G,ie),!ke)return;this.refs[ie]=ke}return ke.validate||this._compileSchemaEnv(ke)}removeSchema(ie){if(ie instanceof RegExp)return this._removeAllSchemas(this.schemas,ie),this._removeAllSchemas(this.refs,ie),this;switch(typeof ie){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ke=B.call(this,ie);return typeof ke=="object"&&this._cache.delete(ke.schema),delete this.schemas[ie],delete this.refs[ie],this}case"object":{const ke=ie;this._cache.delete(ke);let ue=ie[this.opts.schemaId];return ue&&(ue=(0,c.normalizeId)(ue),delete this.schemas[ue],delete this.refs[ue]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ie){for(const ke of ie)this.addKeyword(ke);return this}addKeyword(ie,ke){let ue;if(typeof ie=="string")ue=ie,typeof ke=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ke.keyword=ue);else if(typeof ie=="object"&&ke===void 0){if(ke=ie,ue=ke.keyword,Array.isArray(ue)&&!ue.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ar.call(this,ue,ke),!ke)return(0,m.eachItem)(ue,X=>hi.call(this,X)),this;Gi.call(this,ke);const G={...ke,type:(0,d.getJSONTypes)(ke.type),schemaType:(0,d.getJSONTypes)(ke.schemaType)};return(0,m.eachItem)(ue,G.type.length===0?X=>hi.call(this,X,G):X=>G.type.forEach(ce=>hi.call(this,X,G,ce))),this}getKeyword(ie){const ke=this.RULES.all[ie];return typeof ke=="object"?ke.definition:!!ke}removeKeyword(ie){const{RULES:ke}=this;delete ke.keywords[ie],delete ke.all[ie];for(const ue of ke.rules){const G=ue.rules.findIndex(X=>X.keyword===ie);G>=0&&ue.rules.splice(G,1)}return this}addFormat(ie,ke){return typeof ke=="string"&&(ke=new RegExp(ke)),this.formats[ie]=ke,this}errorsText(ie=this.errors,{separator:ke=", ",dataVar:ue="data"}={}){return!ie||ie.length===0?"No errors":ie.map(G=>`${ue}${G.instancePath} ${G.message}`).reduce((G,X)=>G+ke+X)}$dataMetaSchema(ie,ke){const ue=this.RULES.all;ie=JSON.parse(JSON.stringify(ie));for(const G of ke){const X=G.split("/").slice(1);let ce=ie;for(const De of X)ce=ce[De];for(const De in ue){const qe=ue[De];if(typeof qe!="object")continue;const{$data:bt}=qe.definition,vr=ce[De];bt&&vr&&(ce[De]=ua(vr))}}return ie}_removeAllSchemas(ie,ke){for(const ue in ie){const G=ie[ue];(!ke||ke.test(ue))&&(typeof G=="string"?delete ie[ue]:G&&!G.meta&&(this._cache.delete(G.schema),delete ie[ue]))}}_addSchema(ie,ke,ue,G=this.opts.validateSchema,X=this.opts.addUsedSchema){let ce;const{schemaId:De}=this.opts;if(typeof ie=="object")ce=ie[De];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ie!="boolean")throw new Error("schema must be object or boolean")}let qe=this._cache.get(ie);if(qe!==void 0)return qe;ue=(0,c.normalizeId)(ce||ue);const bt=c.getSchemaRefs.call(this,ie,ue);return qe=new o.SchemaEnv({schema:ie,schemaId:De,meta:ke,baseId:ue,localRefs:bt}),this._cache.set(qe.schema,qe),X&&!ue.startsWith("#")&&(ue&&this._checkUnique(ue),this.refs[ue]=qe),G&&this.validateSchema(ie,!0),qe}_checkUnique(ie){if(this.schemas[ie]||this.refs[ie])throw new Error(`schema with key or id "${ie}" already exists`)}_compileSchemaEnv(ie){if(ie.meta?this._compileMetaSchema(ie):o.compileSchema.call(this,ie),!ie.validate)throw new Error("ajv implementation error");return ie.validate}_compileMetaSchema(ie){const ke=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,ie)}finally{this.opts=ke}}}K.ValidationError=n.default,K.MissingRefError=s.default,e.default=K;function L(Re,ie,ke,ue="error"){for(const G in Re){const X=G;X in ie&&this.logger[ue](`${ke}: option ${G}. ${Re[X]}`)}}function B(Re){return Re=(0,c.normalizeId)(Re),this.schemas[Re]||this.refs[Re]}function J(){const Re=this.opts.schemas;if(Re)if(Array.isArray(Re))this.addSchema(Re);else for(const ie in Re)this.addSchema(Re[ie],ie)}function re(){for(const Re in this.opts.formats){const ie=this.opts.formats[Re];ie&&this.addFormat(Re,ie)}}function ve(Re){if(Array.isArray(Re)){this.addVocabulary(Re);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ie in Re){const ke=Re[ie];ke.keyword||(ke.keyword=ie),this.addKeyword(ke)}}function ye(){const Re={...this.opts};for(const ie of D)delete Re[ie];return Re}const Se={log(){},warn(){},error(){}};function Ne(Re){if(Re===!1)return Se;if(Re===void 0)return console;if(Re.log&&Re.warn&&Re.error)return Re;throw new Error("logger must implement log, warn and error methods")}const Ke=/^[a-z_$][a-z0-9_$:-]*$/i;function Ar(Re,ie){const{RULES:ke}=this;if((0,m.eachItem)(Re,ue=>{if(ke.keywords[ue])throw new Error(`Keyword ${ue} is already defined`);if(!Ke.test(ue))throw new Error(`Keyword ${ue} has invalid name`)}),!!ie&&ie.$data&&!("code"in ie||"validate"in ie))throw new Error('$data keyword must have "code" or "validate" function')}function hi(Re,ie,ke){var ue;const G=ie?.post;if(ke&&G)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:X}=this;let ce=G?X.post:X.rules.find(({type:qe})=>qe===ke);if(ce||(ce={type:ke,rules:[]},X.rules.push(ce)),X.keywords[Re]=!0,!ie)return;const De={keyword:Re,definition:{...ie,type:(0,d.getJSONTypes)(ie.type),schemaType:(0,d.getJSONTypes)(ie.schemaType)}};ie.before?gi.call(this,ce,De,ie.before):ce.rules.push(De),X.all[Re]=De,(ue=ie.implements)===null||ue===void 0||ue.forEach(qe=>this.addKeyword(qe))}function gi(Re,ie,ke){const ue=Re.rules.findIndex(G=>G.keyword===ke);ue>=0?Re.rules.splice(ue,0,ie):(Re.rules.push(ie),this.logger.warn(`rule ${ke} is not defined`))}function Gi(Re){let{metaSchema:ie}=Re;ie!==void 0&&(Re.$data&&this.opts.$data&&(ie=ua(ie)),Re.validateSchema=this.compile(ie,!0))}const bs={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ua(Re){return{anyOf:[Re,bs]}}})(core$4)),core$4}var draft7$2={},core$3={},id$3={},hasRequiredId$2;function requireId$2(){if(hasRequiredId$2)return id$3;hasRequiredId$2=1,Object.defineProperty(id$3,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id$3.default=e,id$3}var ref$2={},hasRequiredRef$2;function requireRef$2(){if(hasRequiredRef$2)return ref$2;hasRequiredRef$2=1,Object.defineProperty(ref$2,"__esModule",{value:!0}),ref$2.callRef=ref$2.getValidate=void 0;const e=requireRef_error$2(),t=requireCode$3(),r=requireCodegen$2(),n=requireNames$2(),s=requireCompile$2(),i=requireUtil$2(),o={keyword:"$ref",schemaType:"string",code(d){const{gen:m,schema:T,it:$}=d,{baseId:C,schemaEnv:D,validateName:F,opts:g,self:q}=$,{root:x}=D;if((T==="#"||T==="#/")&&C===x.baseId)return K();const P=s.resolveRef.call(q,x,C,T);if(P===void 0)throw new e.default($.opts.uriResolver,C,T);if(P instanceof s.SchemaEnv)return L(P);return B(P);function K(){if(D===x)return c(d,F,D,D.$async);const J=m.scopeValue("root",{ref:x});return c(d,(0,r._)`${J}.validate`,x,x.$async)}function L(J){const re=u(d,J);c(d,re,J,J.$async)}function B(J){const re=m.scopeValue("schema",g.code.source===!0?{ref:J,code:(0,r.stringify)(J)}:{ref:J}),ve=m.name("valid"),ye=d.subschema({schema:J,dataTypes:[],schemaPath:r.nil,topSchemaRef:re,errSchemaPath:T},ve);d.mergeEvaluated(ye),d.ok(ve)}}};function u(d,m){const{gen:T}=d;return m.validate?T.scopeValue("validate",{ref:m.validate}):(0,r._)`${T.scopeValue("wrapper",{ref:m})}.validate`}ref$2.getValidate=u;function c(d,m,T,$){const{gen:C,it:D}=d,{allErrors:F,schemaEnv:g,opts:q}=D,x=q.passContext?n.default.this:r.nil;$?P():K();function P(){if(!g.$async)throw new Error("async schema referenced by sync schema");const J=C.let("valid");C.try(()=>{C.code((0,r._)`await ${(0,t.callValidateCode)(d,m,x)}`),B(m),F||C.assign(J,!0)},re=>{C.if((0,r._)`!(${re} instanceof ${D.ValidationError})`,()=>C.throw(re)),L(re),F||C.assign(J,!1)}),d.ok(J)}function K(){d.result((0,t.callValidateCode)(d,m,x),()=>B(m),()=>L(m))}function L(J){const re=(0,r._)`${J}.errors`;C.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${re} : ${n.default.vErrors}.concat(${re})`),C.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function B(J){var re;if(!D.opts.unevaluated)return;const ve=(re=T?.validate)===null||re===void 0?void 0:re.evaluated;if(D.props!==!0)if(ve&&!ve.dynamicProps)ve.props!==void 0&&(D.props=i.mergeEvaluated.props(C,ve.props,D.props));else{const ye=C.var("props",(0,r._)`${J}.evaluated.props`);D.props=i.mergeEvaluated.props(C,ye,D.props,r.Name)}if(D.items!==!0)if(ve&&!ve.dynamicItems)ve.items!==void 0&&(D.items=i.mergeEvaluated.items(C,ve.items,D.items));else{const ye=C.var("items",(0,r._)`${J}.evaluated.items`);D.items=i.mergeEvaluated.items(C,ye,D.items,r.Name)}}}return ref$2.callRef=c,ref$2.default=o,ref$2}var hasRequiredCore$3;function requireCore$3(){if(hasRequiredCore$3)return core$3;hasRequiredCore$3=1,Object.defineProperty(core$3,"__esModule",{value:!0});const e=requireId$2(),t=requireRef$2(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return core$3.default=r,core$3}var validation$2={},limitNumber$2={},hasRequiredLimitNumber$2;function requireLimitNumber$2(){if(hasRequiredLimitNumber$2)return limitNumber$2;hasRequiredLimitNumber$2=1,Object.defineProperty(limitNumber$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:i,schemaCode:o})=>(0,e.str)`must be ${r[i].okStr} ${o}`,params:({keyword:i,schemaCode:o})=>(0,e._)`{comparison: ${r[i].okStr}, limit: ${o}}`},s={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(i){const{keyword:o,data:u,schemaCode:c}=i;i.fail$data((0,e._)`${u} ${r[o].fail} ${c} || isNaN(${u})`)}};return limitNumber$2.default=s,limitNumber$2}var multipleOf$2={},hasRequiredMultipleOf$2;function requireMultipleOf$2(){if(hasRequiredMultipleOf$2)return multipleOf$2;hasRequiredMultipleOf$2=1,Object.defineProperty(multipleOf$2,"__esModule",{value:!0});const e=requireCodegen$2(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,e._)`{multipleOf: ${n}}`},code(n){const{gen:s,data:i,schemaCode:o,it:u}=n,c=u.opts.multipleOfPrecision,d=s.let("res"),m=c?(0,e._)`Math.abs(Math.round(${d}) - ${d}) > 1e-${c}`:(0,e._)`${d} !== parseInt(${d})`;n.fail$data((0,e._)`(${o} === 0 || (${d} = ${i}/${o}, ${m}))`)}};return multipleOf$2.default=r,multipleOf$2}var limitLength$2={},ucs2length$2={},hasRequiredUcs2length$2;function requireUcs2length$2(){if(hasRequiredUcs2length$2)return ucs2length$2;hasRequiredUcs2length$2=1,Object.defineProperty(ucs2length$2,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,s=0,i;for(;s<r;)n++,i=t.charCodeAt(s++),i>=55296&&i<=56319&&s<r&&(i=t.charCodeAt(s),(i&64512)===56320&&s++);return n}return ucs2length$2.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',ucs2length$2}var hasRequiredLimitLength$2;function requireLimitLength$2(){if(hasRequiredLimitLength$2)return limitLength$2;hasRequiredLimitLength$2=1,Object.defineProperty(limitLength$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),r=requireUcs2length$2(),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:o}){const u=i==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${u} than ${o} characters`},params:({schemaCode:i})=>(0,e._)`{limit: ${i}}`},code(i){const{keyword:o,data:u,schemaCode:c,it:d}=i,m=o==="maxLength"?e.operators.GT:e.operators.LT,T=d.opts.unicode===!1?(0,e._)`${u}.length`:(0,e._)`${(0,t.useFunc)(i.gen,r.default)}(${u})`;i.fail$data((0,e._)`${T} ${m} ${c}`)}};return limitLength$2.default=s,limitLength$2}var pattern$2={},hasRequiredPattern$2;function requirePattern$2(){if(hasRequiredPattern$2)return pattern$2;hasRequiredPattern$2=1,Object.defineProperty(pattern$2,"__esModule",{value:!0});const e=requireCode$3(),t=requireCodegen$2(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:s})=>(0,t.str)`must match pattern "${s}"`,params:({schemaCode:s})=>(0,t._)`{pattern: ${s}}`},code(s){const{data:i,$data:o,schema:u,schemaCode:c,it:d}=s,m=d.opts.unicodeRegExp?"u":"",T=o?(0,t._)`(new RegExp(${c}, ${m}))`:(0,e.usePattern)(s,u);s.fail$data((0,t._)`!${T}.test(${i})`)}};return pattern$2.default=n,pattern$2}var limitProperties$2={},hasRequiredLimitProperties$2;function requireLimitProperties$2(){if(hasRequiredLimitProperties$2)return limitProperties$2;hasRequiredLimitProperties$2=1,Object.defineProperty(limitProperties$2,"__esModule",{value:!0});const e=requireCodegen$2(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:s}){const i=n==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${s} properties`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:s,data:i,schemaCode:o}=n,u=s==="maxProperties"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`Object.keys(${i}).length ${u} ${o}`)}};return limitProperties$2.default=r,limitProperties$2}var required$3={},hasRequiredRequired$2;function requireRequired$2(){if(hasRequiredRequired$2)return required$3;hasRequiredRequired$2=1,Object.defineProperty(required$3,"__esModule",{value:!0});const e=requireCode$3(),t=requireCodegen$2(),r=requireUtil$2(),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:i}})=>(0,t.str)`must have required property '${i}'`,params:({params:{missingProperty:i}})=>(0,t._)`{missingProperty: ${i}}`},code(i){const{gen:o,schema:u,schemaCode:c,data:d,$data:m,it:T}=i,{opts:$}=T;if(!m&&u.length===0)return;const C=u.length>=$.loopRequired;if(T.allErrors?D():F(),$.strictRequired){const x=i.parentSchema.properties,{definedProperties:P}=i.it;for(const K of u)if(x?.[K]===void 0&&!P.has(K)){const L=T.schemaEnv.baseId+T.errSchemaPath,B=`required property "${K}" is not defined at "${L}" (strictRequired)`;(0,r.checkStrictMode)(T,B,T.opts.strictRequired)}}function D(){if(C||m)i.block$data(t.nil,g);else for(const x of u)(0,e.checkReportMissingProp)(i,x)}function F(){const x=o.let("missing");if(C||m){const P=o.let("valid",!0);i.block$data(P,()=>q(x,P)),i.ok(P)}else o.if((0,e.checkMissingProp)(i,u,x)),(0,e.reportMissingProp)(i,x),o.else()}function g(){o.forOf("prop",c,x=>{i.setParams({missingProperty:x}),o.if((0,e.noPropertyInData)(o,d,x,$.ownProperties),()=>i.error())})}function q(x,P){i.setParams({missingProperty:x}),o.forOf(x,c,()=>{o.assign(P,(0,e.propertyInData)(o,d,x,$.ownProperties)),o.if((0,t.not)(P),()=>{i.error(),o.break()})},t.nil)}}};return required$3.default=s,required$3}var limitItems$2={},hasRequiredLimitItems$2;function requireLimitItems$2(){if(hasRequiredLimitItems$2)return limitItems$2;hasRequiredLimitItems$2=1,Object.defineProperty(limitItems$2,"__esModule",{value:!0});const e=requireCodegen$2(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:s}){const i=n==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${s} items`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:s,data:i,schemaCode:o}=n,u=s==="maxItems"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`${i}.length ${u} ${o}`)}};return limitItems$2.default=r,limitItems$2}var uniqueItems$2={},equal$2={},hasRequiredEqual$2;function requireEqual$2(){if(hasRequiredEqual$2)return equal$2;hasRequiredEqual$2=1,Object.defineProperty(equal$2,"__esModule",{value:!0});const e=requireFastDeepEqual$2();return e.code='require("ajv/dist/runtime/equal").default',equal$2.default=e,equal$2}var hasRequiredUniqueItems$2;function requireUniqueItems$2(){if(hasRequiredUniqueItems$2)return uniqueItems$2;hasRequiredUniqueItems$2=1,Object.defineProperty(uniqueItems$2,"__esModule",{value:!0});const e=requireDataType$2(),t=requireCodegen$2(),r=requireUtil$2(),n=requireEqual$2(),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:u}})=>(0,t.str)`must NOT have duplicate items (items ## ${u} and ${o} are identical)`,params:({params:{i:o,j:u}})=>(0,t._)`{i: ${o}, j: ${u}}`},code(o){const{gen:u,data:c,$data:d,schema:m,parentSchema:T,schemaCode:$,it:C}=o;if(!d&&!m)return;const D=u.let("valid"),F=T.items?(0,e.getSchemaTypes)(T.items):[];o.block$data(D,g,(0,t._)`${$} === false`),o.ok(D);function g(){const K=u.let("i",(0,t._)`${c}.length`),L=u.let("j");o.setParams({i:K,j:L}),u.assign(D,!0),u.if((0,t._)`${K} > 1`,()=>(q()?x:P)(K,L))}function q(){return F.length>0&&!F.some(K=>K==="object"||K==="array")}function x(K,L){const B=u.name("item"),J=(0,e.checkDataTypes)(F,B,C.opts.strictNumbers,e.DataType.Wrong),re=u.const("indices",(0,t._)`{}`);u.for((0,t._)`;${K}--;`,()=>{u.let(B,(0,t._)`${c}[${K}]`),u.if(J,(0,t._)`continue`),F.length>1&&u.if((0,t._)`typeof ${B} == "string"`,(0,t._)`${B} += "_"`),u.if((0,t._)`typeof ${re}[${B}] == "number"`,()=>{u.assign(L,(0,t._)`${re}[${B}]`),o.error(),u.assign(D,!1).break()}).code((0,t._)`${re}[${B}] = ${K}`)})}function P(K,L){const B=(0,r.useFunc)(u,n.default),J=u.name("outer");u.label(J).for((0,t._)`;${K}--;`,()=>u.for((0,t._)`${L} = ${K}; ${L}--;`,()=>u.if((0,t._)`${B}(${c}[${K}], ${c}[${L}])`,()=>{o.error(),u.assign(D,!1).break(J)})))}}};return uniqueItems$2.default=i,uniqueItems$2}var _const$2={},hasRequired_const$2;function require_const$2(){if(hasRequired_const$2)return _const$2;hasRequired_const$2=1,Object.defineProperty(_const$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),r=requireEqual$2(),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:i})=>(0,e._)`{allowedValue: ${i}}`},code(i){const{gen:o,data:u,$data:c,schemaCode:d,schema:m}=i;c||m&&typeof m=="object"?i.fail$data((0,e._)`!${(0,t.useFunc)(o,r.default)}(${u}, ${d})`):i.fail((0,e._)`${m} !== ${u}`)}};return _const$2.default=s,_const$2}var _enum$2={},hasRequired_enum$2;function require_enum$2(){if(hasRequired_enum$2)return _enum$2;hasRequired_enum$2=1,Object.defineProperty(_enum$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),r=requireEqual$2(),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:i})=>(0,e._)`{allowedValues: ${i}}`},code(i){const{gen:o,data:u,$data:c,schema:d,schemaCode:m,it:T}=i;if(!c&&d.length===0)throw new Error("enum must have non-empty array");const $=d.length>=T.opts.loopEnum;let C;const D=()=>C??(C=(0,t.useFunc)(o,r.default));let F;if($||c)F=o.let("valid"),i.block$data(F,g);else{if(!Array.isArray(d))throw new Error("ajv implementation error");const x=o.const("vSchema",m);F=(0,e.or)(...d.map((P,K)=>q(x,K)))}i.pass(F);function g(){o.assign(F,!1),o.forOf("v",m,x=>o.if((0,e._)`${D()}(${u}, ${x})`,()=>o.assign(F,!0).break()))}function q(x,P){const K=d[P];return typeof K=="object"&&K!==null?(0,e._)`${D()}(${u}, ${x}[${P}])`:(0,e._)`${u} === ${K}`}}};return _enum$2.default=s,_enum$2}var hasRequiredValidation$2;function requireValidation$2(){if(hasRequiredValidation$2)return validation$2;hasRequiredValidation$2=1,Object.defineProperty(validation$2,"__esModule",{value:!0});const e=requireLimitNumber$2(),t=requireMultipleOf$2(),r=requireLimitLength$2(),n=requirePattern$2(),s=requireLimitProperties$2(),i=requireRequired$2(),o=requireLimitItems$2(),u=requireUniqueItems$2(),c=require_const$2(),d=require_enum$2(),m=[e.default,t.default,r.default,n.default,s.default,i.default,o.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,d.default];return validation$2.default=m,validation$2}var applicator$2={},additionalItems$2={},hasRequiredAdditionalItems$2;function requireAdditionalItems$2(){if(hasRequiredAdditionalItems$2)return additionalItems$2;hasRequiredAdditionalItems$2=1,Object.defineProperty(additionalItems$2,"__esModule",{value:!0}),additionalItems$2.validateAdditionalItems=void 0;const e=requireCodegen$2(),t=requireUtil$2(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,e.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,e._)`{limit: ${i}}`},code(i){const{parentSchema:o,it:u}=i,{items:c}=o;if(!Array.isArray(c)){(0,t.checkStrictMode)(u,'"additionalItems" is ignored when "items" is not an array of schemas');return}s(i,c)}};function s(i,o){const{gen:u,schema:c,data:d,keyword:m,it:T}=i;T.items=!0;const $=u.const("len",(0,e._)`${d}.length`);if(c===!1)i.setParams({len:o.length}),i.pass((0,e._)`${$} <= ${o.length}`);else if(typeof c=="object"&&!(0,t.alwaysValidSchema)(T,c)){const D=u.var("valid",(0,e._)`${$} <= ${o.length}`);u.if((0,e.not)(D),()=>C(D)),i.ok(D)}function C(D){u.forRange("i",o.length,$,F=>{i.subschema({keyword:m,dataProp:F,dataPropType:t.Type.Num},D),T.allErrors||u.if((0,e.not)(D),()=>u.break())})}}return additionalItems$2.validateAdditionalItems=s,additionalItems$2.default=n,additionalItems$2}var prefixItems$2={},items$2={},hasRequiredItems$2;function requireItems$2(){if(hasRequiredItems$2)return items$2;hasRequiredItems$2=1,Object.defineProperty(items$2,"__esModule",{value:!0}),items$2.validateTuple=void 0;const e=requireCodegen$2(),t=requireUtil$2(),r=requireCode$3(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(i){const{schema:o,it:u}=i;if(Array.isArray(o))return s(i,"additionalItems",o);u.items=!0,!(0,t.alwaysValidSchema)(u,o)&&i.ok((0,r.validateArray)(i))}};function s(i,o,u=i.schema){const{gen:c,parentSchema:d,data:m,keyword:T,it:$}=i;F(d),$.opts.unevaluated&&u.length&&$.items!==!0&&($.items=t.mergeEvaluated.items(c,u.length,$.items));const C=c.name("valid"),D=c.const("len",(0,e._)`${m}.length`);u.forEach((g,q)=>{(0,t.alwaysValidSchema)($,g)||(c.if((0,e._)`${D} > ${q}`,()=>i.subschema({keyword:T,schemaProp:q,dataProp:q},C)),i.ok(C))});function F(g){const{opts:q,errSchemaPath:x}=$,P=u.length,K=P===g.minItems&&(P===g.maxItems||g[o]===!1);if(q.strictTuples&&!K){const L=`"${T}" is ${P}-tuple, but minItems or maxItems/${o} are not specified or different at path "${x}"`;(0,t.checkStrictMode)($,L,q.strictTuples)}}}return items$2.validateTuple=s,items$2.default=n,items$2}var hasRequiredPrefixItems$2;function requirePrefixItems$2(){if(hasRequiredPrefixItems$2)return prefixItems$2;hasRequiredPrefixItems$2=1,Object.defineProperty(prefixItems$2,"__esModule",{value:!0});const e=requireItems$2(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return prefixItems$2.default=t,prefixItems$2}var items2020$2={},hasRequiredItems2020$2;function requireItems2020$2(){if(hasRequiredItems2020$2)return items2020$2;hasRequiredItems2020$2=1,Object.defineProperty(items2020$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),r=requireCode$3(),n=requireAdditionalItems$2(),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:u,parentSchema:c,it:d}=o,{prefixItems:m}=c;d.items=!0,!(0,t.alwaysValidSchema)(d,u)&&(m?(0,n.validateAdditionalItems)(o,m):o.ok((0,r.validateArray)(o)))}};return items2020$2.default=i,items2020$2}var contains$2={},hasRequiredContains$2;function requireContains$2(){if(hasRequiredContains$2)return contains$2;hasRequiredContains$2=1,Object.defineProperty(contains$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:s,max:i}})=>i===void 0?(0,e.str)`must contain at least ${s} valid item(s)`:(0,e.str)`must contain at least ${s} and no more than ${i} valid item(s)`,params:({params:{min:s,max:i}})=>i===void 0?(0,e._)`{minContains: ${s}}`:(0,e._)`{minContains: ${s}, maxContains: ${i}}`},code(s){const{gen:i,schema:o,parentSchema:u,data:c,it:d}=s;let m,T;const{minContains:$,maxContains:C}=u;d.opts.next?(m=$===void 0?1:$,T=C):m=1;const D=i.const("len",(0,e._)`${c}.length`);if(s.setParams({min:m,max:T}),T===void 0&&m===0){(0,t.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(T!==void 0&&m>T){(0,t.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),s.fail();return}if((0,t.alwaysValidSchema)(d,o)){let P=(0,e._)`${D} >= ${m}`;T!==void 0&&(P=(0,e._)`${P} && ${D} <= ${T}`),s.pass(P);return}d.items=!0;const F=i.name("valid");T===void 0&&m===1?q(F,()=>i.if(F,()=>i.break())):m===0?(i.let(F,!0),T!==void 0&&i.if((0,e._)`${c}.length > 0`,g)):(i.let(F,!1),g()),s.result(F,()=>s.reset());function g(){const P=i.name("_valid"),K=i.let("count",0);q(P,()=>i.if(P,()=>x(K)))}function q(P,K){i.forRange("i",0,D,L=>{s.subschema({keyword:"contains",dataProp:L,dataPropType:t.Type.Num,compositeRule:!0},P),K()})}function x(P){i.code((0,e._)`${P}++`),T===void 0?i.if((0,e._)`${P} >= ${m}`,()=>i.assign(F,!0).break()):(i.if((0,e._)`${P} > ${T}`,()=>i.assign(F,!1).break()),m===1?i.assign(F,!0):i.if((0,e._)`${P} >= ${m}`,()=>i.assign(F,!0)))}}};return contains$2.default=n,contains$2}var dependencies$2={},hasRequiredDependencies$2;function requireDependencies$2(){return hasRequiredDependencies$2||(hasRequiredDependencies$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=requireCodegen$2(),r=requireUtil$2(),n=requireCode$3();e.error={message:({params:{property:c,depsCount:d,deps:m}})=>{const T=d===1?"property":"properties";return(0,t.str)`must have ${T} ${m} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:m,missingProperty:T}})=>(0,t._)`{property: ${c},
    missingProperty: ${T},
    depsCount: ${d},
    deps: ${m}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,m]=i(c);o(c,d),u(c,m)}};function i({schema:c}){const d={},m={};for(const T in c){if(T==="__proto__")continue;const $=Array.isArray(c[T])?d:m;$[T]=c[T]}return[d,m]}function o(c,d=c.schema){const{gen:m,data:T,it:$}=c;if(Object.keys(d).length===0)return;const C=m.let("missing");for(const D in d){const F=d[D];if(F.length===0)continue;const g=(0,n.propertyInData)(m,T,D,$.opts.ownProperties);c.setParams({property:D,depsCount:F.length,deps:F.join(", ")}),$.allErrors?m.if(g,()=>{for(const q of F)(0,n.checkReportMissingProp)(c,q)}):(m.if((0,t._)`${g} && (${(0,n.checkMissingProp)(c,F,C)})`),(0,n.reportMissingProp)(c,C),m.else())}}e.validatePropertyDeps=o;function u(c,d=c.schema){const{gen:m,data:T,keyword:$,it:C}=c,D=m.name("valid");for(const F in d)(0,r.alwaysValidSchema)(C,d[F])||(m.if((0,n.propertyInData)(m,T,F,C.opts.ownProperties),()=>{const g=c.subschema({keyword:$,schemaProp:F},D);c.mergeValidEvaluated(g,D)},()=>m.var(D,!0)),c.ok(D))}e.validateSchemaDeps=u,e.default=s})(dependencies$2)),dependencies$2}var propertyNames$2={},hasRequiredPropertyNames$2;function requirePropertyNames$2(){if(hasRequiredPropertyNames$2)return propertyNames$2;hasRequiredPropertyNames$2=1,Object.defineProperty(propertyNames$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:s})=>(0,e._)`{propertyName: ${s.propertyName}}`},code(s){const{gen:i,schema:o,data:u,it:c}=s;if((0,t.alwaysValidSchema)(c,o))return;const d=i.name("valid");i.forIn("key",u,m=>{s.setParams({propertyName:m}),s.subschema({keyword:"propertyNames",data:m,dataTypes:["string"],propertyName:m,compositeRule:!0},d),i.if((0,e.not)(d),()=>{s.error(!0),c.allErrors||i.break()})}),s.ok(d)}};return propertyNames$2.default=n,propertyNames$2}var additionalProperties$3={},hasRequiredAdditionalProperties$2;function requireAdditionalProperties$2(){if(hasRequiredAdditionalProperties$2)return additionalProperties$3;hasRequiredAdditionalProperties$2=1,Object.defineProperty(additionalProperties$3,"__esModule",{value:!0});const e=requireCode$3(),t=requireCodegen$2(),r=requireNames$2(),n=requireUtil$2(),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:u,schema:c,parentSchema:d,data:m,errsCount:T,it:$}=o;if(!T)throw new Error("ajv implementation error");const{allErrors:C,opts:D}=$;if($.props=!0,D.removeAdditional!=="all"&&(0,n.alwaysValidSchema)($,c))return;const F=(0,e.allSchemaProperties)(d.properties),g=(0,e.allSchemaProperties)(d.patternProperties);q(),o.ok((0,t._)`${T} === ${r.default.errors}`);function q(){u.forIn("key",m,B=>{!F.length&&!g.length?K(B):u.if(x(B),()=>K(B))})}function x(B){let J;if(F.length>8){const re=(0,n.schemaRefOrVal)($,d.properties,"properties");J=(0,e.isOwnProperty)(u,re,B)}else F.length?J=(0,t.or)(...F.map(re=>(0,t._)`${B} === ${re}`)):J=t.nil;return g.length&&(J=(0,t.or)(J,...g.map(re=>(0,t._)`${(0,e.usePattern)(o,re)}.test(${B})`))),(0,t.not)(J)}function P(B){u.code((0,t._)`delete ${m}[${B}]`)}function K(B){if(D.removeAdditional==="all"||D.removeAdditional&&c===!1){P(B);return}if(c===!1){o.setParams({additionalProperty:B}),o.error(),C||u.break();return}if(typeof c=="object"&&!(0,n.alwaysValidSchema)($,c)){const J=u.name("valid");D.removeAdditional==="failing"?(L(B,J,!1),u.if((0,t.not)(J),()=>{o.reset(),P(B)})):(L(B,J),C||u.if((0,t.not)(J),()=>u.break()))}}function L(B,J,re){const ve={keyword:"additionalProperties",dataProp:B,dataPropType:n.Type.Str};re===!1&&Object.assign(ve,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(ve,J)}}};return additionalProperties$3.default=i,additionalProperties$3}var properties$5={},hasRequiredProperties$2;function requireProperties$2(){if(hasRequiredProperties$2)return properties$5;hasRequiredProperties$2=1,Object.defineProperty(properties$5,"__esModule",{value:!0});const e=requireValidate$2(),t=requireCode$3(),r=requireUtil$2(),n=requireAdditionalProperties$2(),s={keyword:"properties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,parentSchema:c,data:d,it:m}=i;m.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(m,n.default,"additionalProperties"));const T=(0,t.allSchemaProperties)(u);for(const g of T)m.definedProperties.add(g);m.opts.unevaluated&&T.length&&m.props!==!0&&(m.props=r.mergeEvaluated.props(o,(0,r.toHash)(T),m.props));const $=T.filter(g=>!(0,r.alwaysValidSchema)(m,u[g]));if($.length===0)return;const C=o.name("valid");for(const g of $)D(g)?F(g):(o.if((0,t.propertyInData)(o,d,g,m.opts.ownProperties)),F(g),m.allErrors||o.else().var(C,!0),o.endIf()),i.it.definedProperties.add(g),i.ok(C);function D(g){return m.opts.useDefaults&&!m.compositeRule&&u[g].default!==void 0}function F(g){i.subschema({keyword:"properties",schemaProp:g,dataProp:g},C)}}};return properties$5.default=s,properties$5}var patternProperties$2={},hasRequiredPatternProperties$2;function requirePatternProperties$2(){if(hasRequiredPatternProperties$2)return patternProperties$2;hasRequiredPatternProperties$2=1,Object.defineProperty(patternProperties$2,"__esModule",{value:!0});const e=requireCode$3(),t=requireCodegen$2(),r=requireUtil$2(),n=requireUtil$2(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,data:c,parentSchema:d,it:m}=i,{opts:T}=m,$=(0,e.allSchemaProperties)(u),C=$.filter(K=>(0,r.alwaysValidSchema)(m,u[K]));if($.length===0||C.length===$.length&&(!m.opts.unevaluated||m.props===!0))return;const D=T.strictSchema&&!T.allowMatchingProperties&&d.properties,F=o.name("valid");m.props!==!0&&!(m.props instanceof t.Name)&&(m.props=(0,n.evaluatedPropsToName)(o,m.props));const{props:g}=m;q();function q(){for(const K of $)D&&x(K),m.allErrors?P(K):(o.var(F,!0),P(K),o.if(F))}function x(K){for(const L in D)new RegExp(K).test(L)&&(0,r.checkStrictMode)(m,`property ${L} matches pattern ${K} (use allowMatchingProperties)`)}function P(K){o.forIn("key",c,L=>{o.if((0,t._)`${(0,e.usePattern)(i,K)}.test(${L})`,()=>{const B=C.includes(K);B||i.subschema({keyword:"patternProperties",schemaProp:K,dataProp:L,dataPropType:n.Type.Str},F),m.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${L}]`,!0):!B&&!m.allErrors&&o.if((0,t.not)(F),()=>o.break())})})}}};return patternProperties$2.default=s,patternProperties$2}var not$2={},hasRequiredNot$2;function requireNot$2(){if(hasRequiredNot$2)return not$2;hasRequiredNot$2=1,Object.defineProperty(not$2,"__esModule",{value:!0});const e=requireUtil$2(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:s,it:i}=r;if((0,e.alwaysValidSchema)(i,s)){r.fail();return}const o=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),r.failResult(o,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return not$2.default=t,not$2}var anyOf$2={},hasRequiredAnyOf$2;function requireAnyOf$2(){if(hasRequiredAnyOf$2)return anyOf$2;hasRequiredAnyOf$2=1,Object.defineProperty(anyOf$2,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode$3().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf$2.default=t,anyOf$2}var oneOf$2={},hasRequiredOneOf$2;function requireOneOf$2(){if(hasRequiredOneOf$2)return oneOf$2;hasRequiredOneOf$2=1,Object.defineProperty(oneOf$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:s})=>(0,e._)`{passingSchemas: ${s.passing}}`},code(s){const{gen:i,schema:o,parentSchema:u,it:c}=s;if(!Array.isArray(o))throw new Error("ajv implementation error");if(c.opts.discriminator&&u.discriminator)return;const d=o,m=i.let("valid",!1),T=i.let("passing",null),$=i.name("_valid");s.setParams({passing:T}),i.block(C),s.result(m,()=>s.reset(),()=>s.error(!0));function C(){d.forEach((D,F)=>{let g;(0,t.alwaysValidSchema)(c,D)?i.var($,!0):g=s.subschema({keyword:"oneOf",schemaProp:F,compositeRule:!0},$),F>0&&i.if((0,e._)`${$} && ${m}`).assign(m,!1).assign(T,(0,e._)`[${T}, ${F}]`).else(),i.if($,()=>{i.assign(m,!0),i.assign(T,F),g&&s.mergeEvaluated(g,e.Name)})})}}};return oneOf$2.default=n,oneOf$2}var allOf$2={},hasRequiredAllOf$2;function requireAllOf$2(){if(hasRequiredAllOf$2)return allOf$2;hasRequiredAllOf$2=1,Object.defineProperty(allOf$2,"__esModule",{value:!0});const e=requireUtil$2(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:s,it:i}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");const o=n.name("valid");s.forEach((u,c)=>{if((0,e.alwaysValidSchema)(i,u))return;const d=r.subschema({keyword:"allOf",schemaProp:c},o);r.ok(o),r.mergeEvaluated(d)})}};return allOf$2.default=t,allOf$2}var _if$2={},hasRequired_if$2;function require_if$2(){if(hasRequired_if$2)return _if$2;hasRequired_if$2=1,Object.defineProperty(_if$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireUtil$2(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:i})=>(0,e.str)`must match "${i.ifClause}" schema`,params:({params:i})=>(0,e._)`{failingKeyword: ${i.ifClause}}`},code(i){const{gen:o,parentSchema:u,it:c}=i;u.then===void 0&&u.else===void 0&&(0,t.checkStrictMode)(c,'"if" without "then" and "else" is ignored');const d=s(c,"then"),m=s(c,"else");if(!d&&!m)return;const T=o.let("valid",!0),$=o.name("_valid");if(C(),i.reset(),d&&m){const F=o.let("ifClause");i.setParams({ifClause:F}),o.if($,D("then",F),D("else",F))}else d?o.if($,D("then")):o.if((0,e.not)($),D("else"));i.pass(T,()=>i.error(!0));function C(){const F=i.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},$);i.mergeEvaluated(F)}function D(F,g){return()=>{const q=i.subschema({keyword:F},$);o.assign(T,$),i.mergeValidEvaluated(q,T),g?o.assign(g,(0,e._)`${F}`):i.setParams({ifClause:F})}}}};function s(i,o){const u=i.schema[o];return u!==void 0&&!(0,t.alwaysValidSchema)(i,u)}return _if$2.default=n,_if$2}var thenElse$2={},hasRequiredThenElse$2;function requireThenElse$2(){if(hasRequiredThenElse$2)return thenElse$2;hasRequiredThenElse$2=1,Object.defineProperty(thenElse$2,"__esModule",{value:!0});const e=requireUtil$2(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:s}){n.if===void 0&&(0,e.checkStrictMode)(s,`"${r}" without "if" is ignored`)}};return thenElse$2.default=t,thenElse$2}var hasRequiredApplicator$2;function requireApplicator$2(){if(hasRequiredApplicator$2)return applicator$2;hasRequiredApplicator$2=1,Object.defineProperty(applicator$2,"__esModule",{value:!0});const e=requireAdditionalItems$2(),t=requirePrefixItems$2(),r=requireItems$2(),n=requireItems2020$2(),s=requireContains$2(),i=requireDependencies$2(),o=requirePropertyNames$2(),u=requireAdditionalProperties$2(),c=requireProperties$2(),d=requirePatternProperties$2(),m=requireNot$2(),T=requireAnyOf$2(),$=requireOneOf$2(),C=requireAllOf$2(),D=require_if$2(),F=requireThenElse$2();function g(q=!1){const x=[m.default,T.default,$.default,C.default,D.default,F.default,o.default,u.default,i.default,c.default,d.default];return q?x.push(t.default,n.default):x.push(e.default,r.default),x.push(s.default),x}return applicator$2.default=g,applicator$2}var format$5={},format$4={},hasRequiredFormat$4;function requireFormat$4(){if(hasRequiredFormat$4)return format$4;hasRequiredFormat$4=1,Object.defineProperty(format$4,"__esModule",{value:!0});const e=requireCodegen$2(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,e._)`{format: ${n}}`},code(n,s){const{gen:i,data:o,$data:u,schema:c,schemaCode:d,it:m}=n,{opts:T,errSchemaPath:$,schemaEnv:C,self:D}=m;if(!T.validateFormats)return;u?F():g();function F(){const q=i.scopeValue("formats",{ref:D.formats,code:T.code.formats}),x=i.const("fDef",(0,e._)`${q}[${d}]`),P=i.let("fType"),K=i.let("format");i.if((0,e._)`typeof ${x} == "object" && !(${x} instanceof RegExp)`,()=>i.assign(P,(0,e._)`${x}.type || "string"`).assign(K,(0,e._)`${x}.validate`),()=>i.assign(P,(0,e._)`"string"`).assign(K,x)),n.fail$data((0,e.or)(L(),B()));function L(){return T.strictSchema===!1?e.nil:(0,e._)`${d} && !${K}`}function B(){const J=C.$async?(0,e._)`(${x}.async ? await ${K}(${o}) : ${K}(${o}))`:(0,e._)`${K}(${o})`,re=(0,e._)`(typeof ${K} == "function" ? ${J} : ${K}.test(${o}))`;return(0,e._)`${K} && ${K} !== true && ${P} === ${s} && !${re}`}}function g(){const q=D.formats[c];if(!q){L();return}if(q===!0)return;const[x,P,K]=B(q);x===s&&n.pass(J());function L(){if(T.strictSchema===!1){D.logger.warn(re());return}throw new Error(re());function re(){return`unknown format "${c}" ignored in schema at path "${$}"`}}function B(re){const ve=re instanceof RegExp?(0,e.regexpCode)(re):T.code.formats?(0,e._)`${T.code.formats}${(0,e.getProperty)(c)}`:void 0,ye=i.scopeValue("formats",{key:c,ref:re,code:ve});return typeof re=="object"&&!(re instanceof RegExp)?[re.type||"string",re.validate,(0,e._)`${ye}.validate`]:["string",re,ye]}function J(){if(typeof q=="object"&&!(q instanceof RegExp)&&q.async){if(!C.$async)throw new Error("async format in sync schema");return(0,e._)`await ${K}(${o})`}return typeof P=="function"?(0,e._)`${K}(${o})`:(0,e._)`${K}.test(${o})`}}}};return format$4.default=r,format$4}var hasRequiredFormat$3;function requireFormat$3(){if(hasRequiredFormat$3)return format$5;hasRequiredFormat$3=1,Object.defineProperty(format$5,"__esModule",{value:!0});const t=[requireFormat$4().default];return format$5.default=t,format$5}var metadata$2={},hasRequiredMetadata$2;function requireMetadata$2(){return hasRequiredMetadata$2||(hasRequiredMetadata$2=1,Object.defineProperty(metadata$2,"__esModule",{value:!0}),metadata$2.contentVocabulary=metadata$2.metadataVocabulary=void 0,metadata$2.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata$2.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata$2}var hasRequiredDraft7$2;function requireDraft7$2(){if(hasRequiredDraft7$2)return draft7$2;hasRequiredDraft7$2=1,Object.defineProperty(draft7$2,"__esModule",{value:!0});const e=requireCore$3(),t=requireValidation$2(),r=requireApplicator$2(),n=requireFormat$3(),s=requireMetadata$2(),i=[e.default,t.default,(0,r.default)(),n.default,s.metadataVocabulary,s.contentVocabulary];return draft7$2.default=i,draft7$2}var discriminator$2={},types$2={},hasRequiredTypes$2;function requireTypes$2(){if(hasRequiredTypes$2)return types$2;hasRequiredTypes$2=1,Object.defineProperty(types$2,"__esModule",{value:!0}),types$2.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(types$2.DiscrError=e={})),types$2}var hasRequiredDiscriminator$2;function requireDiscriminator$2(){if(hasRequiredDiscriminator$2)return discriminator$2;hasRequiredDiscriminator$2=1,Object.defineProperty(discriminator$2,"__esModule",{value:!0});const e=requireCodegen$2(),t=requireTypes$2(),r=requireCompile$2(),n=requireRef_error$2(),s=requireUtil$2(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:u,tagName:c}})=>u===t.DiscrError.Tag?`tag "${c}" must be string`:`value of tag "${c}" must be in oneOf`,params:({params:{discrError:u,tag:c,tagName:d}})=>(0,e._)`{error: ${u}, tag: ${d}, tagValue: ${c}}`},code(u){const{gen:c,data:d,schema:m,parentSchema:T,it:$}=u,{oneOf:C}=T;if(!$.opts.discriminator)throw new Error("discriminator: requires discriminator option");const D=m.propertyName;if(typeof D!="string")throw new Error("discriminator: requires propertyName");if(m.mapping)throw new Error("discriminator: mapping is not supported");if(!C)throw new Error("discriminator: requires oneOf keyword");const F=c.let("valid",!1),g=c.const("tag",(0,e._)`${d}${(0,e.getProperty)(D)}`);c.if((0,e._)`typeof ${g} == "string"`,()=>q(),()=>u.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:D})),u.ok(F);function q(){const K=P();c.if(!1);for(const L in K)c.elseIf((0,e._)`${g} === ${L}`),c.assign(F,x(K[L]));c.else(),u.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:D}),c.endIf()}function x(K){const L=c.name("valid"),B=u.subschema({keyword:"oneOf",schemaProp:K},L);return u.mergeEvaluated(B,e.Name),L}function P(){var K;const L={},B=re(T);let J=!0;for(let Se=0;Se<C.length;Se++){let Ne=C[Se];if(Ne?.$ref&&!(0,s.schemaHasRulesButRef)(Ne,$.self.RULES)){const Ar=Ne.$ref;if(Ne=r.resolveRef.call($.self,$.schemaEnv.root,$.baseId,Ar),Ne instanceof r.SchemaEnv&&(Ne=Ne.schema),Ne===void 0)throw new n.default($.opts.uriResolver,$.baseId,Ar)}const Ke=(K=Ne?.properties)===null||K===void 0?void 0:K[D];if(typeof Ke!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${D}"`);J=J&&(B||re(Ne)),ve(Ke,Se)}if(!J)throw new Error(`discriminator: "${D}" must be required`);return L;function re({required:Se}){return Array.isArray(Se)&&Se.includes(D)}function ve(Se,Ne){if(Se.const)ye(Se.const,Ne);else if(Se.enum)for(const Ke of Se.enum)ye(Ke,Ne);else throw new Error(`discriminator: "properties/${D}" must have "const" or "enum"`)}function ye(Se,Ne){if(typeof Se!="string"||Se in L)throw new Error(`discriminator: "${D}" values must be unique strings`);L[Se]=Ne}}}};return discriminator$2.default=o,discriminator$2}const $schema$2="http://json-schema.org/draft-07/schema#",$id$3="http://json-schema.org/draft-07/schema#",title$2="Core schema meta-schema",definitions$2={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$3=["object","boolean"],properties$4={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3$2={$schema:$schema$2,$id:$id$3,title:title$2,definitions:definitions$2,type:type$3,properties:properties$4,default:!0};var hasRequiredAjv$2;function requireAjv$2(){return hasRequiredAjv$2||(hasRequiredAjv$2=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=requireCore$4(),n=requireDraft7$2(),s=requireDiscriminator$2(),i=require$$3$2,o=["/properties"],u="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(D=>this.addVocabulary(D)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const D=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(D,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=requireValidate$2();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var m=requireCodegen$2();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var T=requireValidation_error$2();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return T.default}});var $=requireRef_error$2();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return $.default}})})(ajv$2,ajv$2.exports)),ajv$2.exports}var ajvExports=requireAjv$2();const Ajv2=getDefaultExportFromCjs$2(ajvExports);function __awaiter$4(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(m){try{d(n.next(m))}catch(T){o(T)}}function c(m){try{d(n.throw(m))}catch(T){o(T)}}function d(m){m.done?i(m.value):s(m.value).then(u,c)}d((n=n.apply(e,[])).next())})}function __generator$3(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(m){return c([d,m])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __read$2(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(u){o={error:u}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function __spreadArray$2(e,t,r){if(arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var defaultErrorConfig$2={withStackTrace:!1},createNeverThrowError$2=function(e,t,r){r===void 0&&(r=defaultErrorConfig$2);var n=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},s=r.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:s}},Result$2;(function(e){function t(r,n){return function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];try{var o=r.apply(void 0,__spreadArray$2([],__read$2(s),!1));return ok$3(o)}catch(u){return err$3(n?n(u):u)}}}e.fromThrowable=t})(Result$2||(Result$2={}));var ok$3=function(e){return new Ok$3(e)},err$3=function(e){return new Err$3(e)},Ok$3=(function(){function e(t){this.value=t}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$3(t(this.value))},e.prototype.mapErr=function(t){return ok$3(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.orElse=function(t){return ok$3(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$3.fromSafePromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype.match=function(t,r){return t(this.value)},e.prototype._unsafeUnwrap=function(t){return this.value},e.prototype._unsafeUnwrapErr=function(t){throw createNeverThrowError$2("Called `_unsafeUnwrapErr` on an Ok",this,t)},e})(),Err$3=(function(){function e(t){this.error=t}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$3(this.error)},e.prototype.mapErr=function(t){return err$3(t(this.error))},e.prototype.andThen=function(t){return err$3(this.error)},e.prototype.orElse=function(t){return t(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$3(this.error)},e.prototype.asyncMap=function(t){return errAsync$3(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype.match=function(t,r){return r(this.error)},e.prototype._unsafeUnwrap=function(t){throw createNeverThrowError$2("Called `_unsafeUnwrap` on an Err",this,t)},e.prototype._unsafeUnwrapErr=function(t){return this.error},e})();Result$2.fromThrowable;var ResultAsync$3=(function(){function e(t){this._promise=t}return e.fromSafePromise=function(t){var r=t.then(function(n){return new Ok$3(n)});return new e(r)},e.fromPromise=function(t,r){var n=t.then(function(s){return new Ok$3(s)}).catch(function(s){return new Err$3(r(s))});return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$4(r,void 0,void 0,function(){var s;return __generator$3(this,function(i){switch(i.label){case 0:return n.isErr()?[2,new Err$3(n.error)]:(s=Ok$3.bind,[4,t(n.value)]);case 1:return[2,new(s.apply(Ok$3,[void 0,i.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$4(r,void 0,void 0,function(){var s;return __generator$3(this,function(i){switch(i.label){case 0:return n.isOk()?[2,new Ok$3(n.value)]:(s=Err$3.bind,[4,t(n.error)]);case 1:return[2,new(s.apply(Err$3,[void 0,i.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$3(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.orElse=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$4(r,void 0,void 0,function(){return __generator$3(this,function(s){return n.isErr()?[2,t(n.error)]:[2,new Ok$3(n.value)]})})}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t,r){return this._promise.then(t,r)},e})(),errAsync$3=function(e){return new ResultAsync$3(Promise.resolve(new Err$3(e)))};ResultAsync$3.fromPromise;ResultAsync$3.fromSafePromise;const ALIAS=Symbol.for("yaml.alias"),DOC=Symbol.for("yaml.document"),MAP=Symbol.for("yaml.map"),PAIR=Symbol.for("yaml.pair"),SCALAR$1=Symbol.for("yaml.scalar"),SEQ=Symbol.for("yaml.seq"),NODE_TYPE=Symbol.for("yaml.node.type"),isAlias=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===ALIAS,isDocument=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===DOC,isMap=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===MAP,isPair=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===PAIR,isScalar$1=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===SCALAR$1,isSeq=e=>!!e&&typeof e=="object"&&e[NODE_TYPE]===SEQ;function isCollection$1(e){if(e&&typeof e=="object")switch(e[NODE_TYPE]){case MAP:case SEQ:return!0}return!1}function isNode(e){if(e&&typeof e=="object")switch(e[NODE_TYPE]){case ALIAS:case MAP:case SCALAR$1:case SEQ:return!0}return!1}const hasAnchor=e=>(isScalar$1(e)||isCollection$1(e))&&!!e.anchor,BREAK$1=Symbol("break visit"),SKIP$1=Symbol("skip children"),REMOVE$1=Symbol("remove node");function visit$1(e,t){const r=initVisitor(t);isDocument(e)?visit_(null,e.contents,r,Object.freeze([e]))===REMOVE$1&&(e.contents=null):visit_(null,e,r,Object.freeze([]))}visit$1.BREAK=BREAK$1;visit$1.SKIP=SKIP$1;visit$1.REMOVE=REMOVE$1;function visit_(e,t,r,n){const s=callVisitor(e,t,r,n);if(isNode(s)||isPair(s))return replaceNode(e,n,s),visit_(e,s,r,n);if(typeof s!="symbol"){if(isCollection$1(t)){n=Object.freeze(n.concat(t));for(let i=0;i<t.items.length;++i){const o=visit_(i,t.items[i],r,n);if(typeof o=="number")i=o-1;else{if(o===BREAK$1)return BREAK$1;o===REMOVE$1&&(t.items.splice(i,1),i-=1)}}}else if(isPair(t)){n=Object.freeze(n.concat(t));const i=visit_("key",t.key,r,n);if(i===BREAK$1)return BREAK$1;i===REMOVE$1&&(t.key=null);const o=visit_("value",t.value,r,n);if(o===BREAK$1)return BREAK$1;o===REMOVE$1&&(t.value=null)}}return s}async function visitAsync(e,t){const r=initVisitor(t);isDocument(e)?await visitAsync_(null,e.contents,r,Object.freeze([e]))===REMOVE$1&&(e.contents=null):await visitAsync_(null,e,r,Object.freeze([]))}visitAsync.BREAK=BREAK$1;visitAsync.SKIP=SKIP$1;visitAsync.REMOVE=REMOVE$1;async function visitAsync_(e,t,r,n){const s=await callVisitor(e,t,r,n);if(isNode(s)||isPair(s))return replaceNode(e,n,s),visitAsync_(e,s,r,n);if(typeof s!="symbol"){if(isCollection$1(t)){n=Object.freeze(n.concat(t));for(let i=0;i<t.items.length;++i){const o=await visitAsync_(i,t.items[i],r,n);if(typeof o=="number")i=o-1;else{if(o===BREAK$1)return BREAK$1;o===REMOVE$1&&(t.items.splice(i,1),i-=1)}}}else if(isPair(t)){n=Object.freeze(n.concat(t));const i=await visitAsync_("key",t.key,r,n);if(i===BREAK$1)return BREAK$1;i===REMOVE$1&&(t.key=null);const o=await visitAsync_("value",t.value,r,n);if(o===BREAK$1)return BREAK$1;o===REMOVE$1&&(t.value=null)}}return s}function initVisitor(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function callVisitor(e,t,r,n){if(typeof r=="function")return r(e,t,n);if(isMap(t))return r.Map?.(e,t,n);if(isSeq(t))return r.Seq?.(e,t,n);if(isPair(t))return r.Pair?.(e,t,n);if(isScalar$1(t))return r.Scalar?.(e,t,n);if(isAlias(t))return r.Alias?.(e,t,n)}function replaceNode(e,t,r){const n=t[t.length-1];if(isCollection$1(n))n.items[e]=r;else if(isPair(n))e==="key"?n.key=r:n.value=r;else if(isDocument(n))n.contents=r;else{const s=isAlias(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}}const escapeChars={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},escapeTagName=e=>e.replace(/[!,[\]{}]/g,t=>escapeChars[t]);class Directives{constructor(t,r){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Directives.defaultYaml,t),this.tags=Object.assign({},Directives.defaultTags,r)}clone(){const t=new Directives(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Directives(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Directives.defaultTags);break}return t}add(t,r){this.atNextDocument&&(this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Directives.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),s=n.shift();switch(s){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[i,o]=n;return this.tags[i]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return r(0,"%YAML directive should contain exactly one part"),!1;const[i]=n;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const o=/^\d+\.\d+$/.test(i);return r(6,`Unsupported YAML version ${i}`,o),!1}}default:return r(0,`Unknown directive ${s}`,!0),!1}}tagName(t,r){if(t==="!")return"!";if(t[0]!=="!")return r(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const o=t.slice(2,-1);return o==="!"||o==="!!"?(r(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&r("Verbatim tags must end with a >"),o)}const[,n,s]=t.match(/^(.*!)([^!]*)$/s);s||r(`The ${t} tag has no suffix`);const i=this.tags[n];if(i)try{return i+decodeURIComponent(s)}catch(o){return r(String(o)),null}return n==="!"?t:(r(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[r,n]of Object.entries(this.tags))if(t.startsWith(n))return r+escapeTagName(t.substring(n.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let s;if(t&&n.length>0&&isNode(t.contents)){const i={};visit$1(t.contents,(o,u)=>{isNode(u)&&u.tag&&(i[u.tag]=!0)}),s=Object.keys(i)}else s=[];for(const[i,o]of n)i==="!!"&&o==="tag:yaml.org,2002:"||(!t||s.some(u=>u.startsWith(o)))&&r.push(`%TAG ${i} ${o}`);return r.join(`
`)}}Directives.defaultYaml={explicit:!1,version:"1.2"};Directives.defaultTags={"!!":"tag:yaml.org,2002:"};function anchorIsValid(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(r)}return!0}function anchorNames(e){const t=new Set;return visit$1(e,{Value(r,n){n.anchor&&t.add(n.anchor)}}),t}function findNewAnchor(e,t){for(let r=1;;++r){const n=`${e}${r}`;if(!t.has(n))return n}}function createNodeAnchors(e,t){const r=[],n=new Map;let s=null;return{onAnchor:i=>{r.push(i),s??(s=anchorNames(e));const o=findNewAnchor(t,s);return s.add(o),o},setAnchors:()=>{for(const i of r){const o=n.get(i);if(typeof o=="object"&&o.anchor&&(isScalar$1(o.node)||isCollection$1(o.node)))o.node.anchor=o.anchor;else{const u=new Error("Failed to resolve repeated object (this should not happen)");throw u.source=i,u}}},sourceObjects:n}}function applyReviver(e,t,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let s=0,i=n.length;s<i;++s){const o=n[s],u=applyReviver(e,n,String(s),o);u===void 0?delete n[s]:u!==o&&(n[s]=u)}else if(n instanceof Map)for(const s of Array.from(n.keys())){const i=n.get(s),o=applyReviver(e,n,s,i);o===void 0?n.delete(s):o!==i&&n.set(s,o)}else if(n instanceof Set)for(const s of Array.from(n)){const i=applyReviver(e,n,s,s);i===void 0?n.delete(s):i!==s&&(n.delete(s),n.add(i))}else for(const[s,i]of Object.entries(n)){const o=applyReviver(e,n,s,i);o===void 0?delete n[s]:o!==i&&(n[s]=o)}return e.call(t,r,n)}function toJS(e,t,r){if(Array.isArray(e))return e.map((n,s)=>toJS(n,String(s),r));if(e&&typeof e.toJSON=="function"){if(!r||!hasAnchor(e))return e.toJSON(t,r);const n={aliasCount:0,count:1,res:void 0};r.anchors.set(e,n),r.onCreate=i=>{n.res=i,delete r.onCreate};const s=e.toJSON(t,r);return r.onCreate&&r.onCreate(s),s}return typeof e=="bigint"&&!r?.keep?Number(e):e}class NodeBase{constructor(t){Object.defineProperty(this,NODE_TYPE,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:r,maxAliasCount:n,onAnchor:s,reviver:i}={}){if(!isDocument(t))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:t,keep:!0,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},u=toJS(this,"",o);if(typeof s=="function")for(const{count:c,res:d}of o.anchors.values())s(d,c);return typeof i=="function"?applyReviver(i,{"":u},"",u):u}}class Alias extends NodeBase{constructor(t){super(ALIAS),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,r){let n;r?.aliasResolveCache?n=r.aliasResolveCache:(n=[],visit$1(t,{Node:(i,o)=>{(isAlias(o)||hasAnchor(o))&&n.push(o)}}),r&&(r.aliasResolveCache=n));let s;for(const i of n){if(i===this)break;i.anchor===this.source&&(s=i)}return s}toJSON(t,r){if(!r)return{source:this.source};const{anchors:n,doc:s,maxAliasCount:i}=r,o=this.resolve(s,r);if(!o){const c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let u=n.get(o);if(u||(toJS(o,null,r),u=n.get(o)),u?.res===void 0){const c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(i>=0&&(u.count+=1,u.aliasCount===0&&(u.aliasCount=getAliasCount(s,o,n)),u.count*u.aliasCount>i)){const c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return u.res}toString(t,r,n){const s=`*${this.source}`;if(t){if(anchorIsValid(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(t.implicitKey)return`${s} `}return s}}function getAliasCount(e,t,r){if(isAlias(t)){const n=t.resolve(e),s=r&&n&&r.get(n);return s?s.count*s.aliasCount:0}else if(isCollection$1(t)){let n=0;for(const s of t.items){const i=getAliasCount(e,s,r);i>n&&(n=i)}return n}else if(isPair(t)){const n=getAliasCount(e,t.key,r),s=getAliasCount(e,t.value,r);return Math.max(n,s)}return 1}const isScalarValue=e=>!e||typeof e!="function"&&typeof e!="object";class Scalar extends NodeBase{constructor(t){super(SCALAR$1),this.value=t}toJSON(t,r){return r?.keep?this.value:toJS(this.value,t,r)}toString(){return String(this.value)}}Scalar.BLOCK_FOLDED="BLOCK_FOLDED";Scalar.BLOCK_LITERAL="BLOCK_LITERAL";Scalar.PLAIN="PLAIN";Scalar.QUOTE_DOUBLE="QUOTE_DOUBLE";Scalar.QUOTE_SINGLE="QUOTE_SINGLE";const defaultTagPrefix="tag:yaml.org,2002:";function findTagObject(e,t,r){if(t){const n=r.filter(i=>i.tag===t),s=n.find(i=>!i.format)??n[0];if(!s)throw new Error(`Tag ${t} not found`);return s}return r.find(n=>n.identify?.(e)&&!n.format)}function createNode(e,t,r){if(isDocument(e)&&(e=e.contents),isNode(e))return e;if(isPair(e)){const T=r.schema[MAP].createNode?.(r.schema,null,r);return T.items.push(e),T}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:n,onAnchor:s,onTagObj:i,schema:o,sourceObjects:u}=r;let c;if(n&&e&&typeof e=="object"){if(c=u.get(e),c)return c.anchor??(c.anchor=s(e)),new Alias(c.anchor);c={anchor:null,node:null},u.set(e,c)}t?.startsWith("!!")&&(t=defaultTagPrefix+t.slice(2));let d=findTagObject(e,t,o.tags);if(!d){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){const T=new Scalar(e);return c&&(c.node=T),T}d=e instanceof Map?o[MAP]:Symbol.iterator in Object(e)?o[SEQ]:o[MAP]}i&&(i(d),delete r.onTagObj);const m=d?.createNode?d.createNode(r.schema,e,r):typeof d?.nodeClass?.from=="function"?d.nodeClass.from(r.schema,e,r):new Scalar(e);return t?m.tag=t:d.default||(m.tag=d.tag),c&&(c.node=m),m}function collectionFromPath(e,t,r){let n=r;for(let s=t.length-1;s>=0;--s){const i=t[s];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=n,n=o}else n=new Map([[i,n]])}return createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const isEmptyPath=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done;class Collection extends NodeBase{constructor(t,r){super(t),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(t){const r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(r.schema=t),r.items=r.items.map(n=>isNode(n)||isPair(n)?n.clone(t):n),this.range&&(r.range=this.range.slice()),r}addIn(t,r){if(isEmptyPath(t))this.add(r);else{const[n,...s]=t,i=this.get(n,!0);if(isCollection$1(i))i.addIn(s,r);else if(i===void 0&&this.schema)this.set(n,collectionFromPath(this.schema,s,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}}deleteIn(t){const[r,...n]=t;if(n.length===0)return this.delete(r);const s=this.get(r,!0);if(isCollection$1(s))return s.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(t,r){const[n,...s]=t,i=this.get(n,!0);return s.length===0?!r&&isScalar$1(i)?i.value:i:isCollection$1(i)?i.getIn(s,r):void 0}hasAllNullValues(t){return this.items.every(r=>{if(!isPair(r))return!1;const n=r.value;return n==null||t&&isScalar$1(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(t){const[r,...n]=t;if(n.length===0)return this.has(r);const s=this.get(r,!0);return isCollection$1(s)?s.hasIn(n):!1}setIn(t,r){const[n,...s]=t;if(s.length===0)this.set(n,r);else{const i=this.get(n,!0);if(isCollection$1(i))i.setIn(s,r);else if(i===void 0&&this.schema)this.set(n,collectionFromPath(this.schema,s,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}}}const stringifyComment=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function indentComment(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const lineComment=(e,t,r)=>e.endsWith(`
`)?indentComment(r,t):r.includes(`
`)?`
`+indentComment(r,t):(e.endsWith(" ")?"":" ")+r,FOLD_FLOW="flow",FOLD_BLOCK="block",FOLD_QUOTED="quoted";function foldFlowLines(e,t,r="flow",{indentAtStart:n,lineWidth:s=80,minContentWidth:i=20,onFold:o,onOverflow:u}={}){if(!s||s<0)return e;s<i&&(i=0);const c=Math.max(1+i,1+s-t.length);if(e.length<=c)return e;const d=[],m={};let T=s-t.length;typeof n=="number"&&(n>s-Math.max(2,i)?d.push(0):T=s-n);let $,C,D=!1,F=-1,g=-1,q=-1;r===FOLD_BLOCK&&(F=consumeMoreIndentedLines(e,F,t.length),F!==-1&&(T=F+c));for(let P;P=e[F+=1];){if(r===FOLD_QUOTED&&P==="\\"){switch(g=F,e[F+1]){case"x":F+=3;break;case"u":F+=5;break;case"U":F+=9;break;default:F+=1}q=F}if(P===`
`)r===FOLD_BLOCK&&(F=consumeMoreIndentedLines(e,F,t.length)),T=F+t.length+c,$=void 0;else{if(P===" "&&C&&C!==" "&&C!==`
`&&C!=="	"){const K=e[F+1];K&&K!==" "&&K!==`
`&&K!=="	"&&($=F)}if(F>=T)if($)d.push($),T=$+c,$=void 0;else if(r===FOLD_QUOTED){for(;C===" "||C==="	";)C=P,P=e[F+=1],D=!0;const K=F>q+1?F-2:g-1;if(m[K])return e;d.push(K),m[K]=!0,T=K+c,$=void 0}else D=!0}C=P}if(D&&u&&u(),d.length===0)return e;o&&o();let x=e.slice(0,d[0]);for(let P=0;P<d.length;++P){const K=d[P],L=d[P+1]||e.length;K===0?x=`
${t}${e.slice(0,L)}`:(r===FOLD_QUOTED&&m[K]&&(x+=`${e[K]}\\`),x+=`
${t}${e.slice(K+1,L)}`)}return x}function consumeMoreIndentedLines(e,t,r){let n=t,s=t+1,i=e[s];for(;i===" "||i==="	";)if(t<s+r)i=e[++t];else{do i=e[++t];while(i&&i!==`
`);n=t,s=t+1,i=e[s]}return n}const getFoldOptions=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),containsDocumentMarker=e=>/^(%|---|\.\.\.)/m.test(e);function lineLengthOverLimit(e,t,r){if(!t||t<0)return!1;const n=t-r,s=e.length;if(s<=n)return!1;for(let i=0,o=0;i<s;++i)if(e[i]===`
`){if(i-o>n)return!0;if(o=i+1,s-o<=n)return!1}return!0}function doubleQuotedString(e,t){const r=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return r;const{implicitKey:n}=t,s=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(containsDocumentMarker(e)?"  ":"");let o="",u=0;for(let c=0,d=r[c];d;d=r[++c])if(d===" "&&r[c+1]==="\\"&&r[c+2]==="n"&&(o+=r.slice(u,c)+"\\ ",c+=1,u=c,d="\\"),d==="\\")switch(r[c+1]){case"u":{o+=r.slice(u,c);const m=r.substr(c+2,4);switch(m){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:m.substr(0,2)==="00"?o+="\\x"+m.substr(2):o+=r.substr(c,6)}c+=5,u=c+1}break;case"n":if(n||r[c+2]==='"'||r.length<s)c+=1;else{for(o+=r.slice(u,c)+`

`;r[c+2]==="\\"&&r[c+3]==="n"&&r[c+4]!=='"';)o+=`
`,c+=2;o+=i,r[c+2]===" "&&(o+="\\"),c+=1,u=c+1}break;default:c+=1}return o=u?o+r.slice(u):r,n?o:foldFlowLines(o,i,FOLD_QUOTED,getFoldOptions(t,!1))}function singleQuotedString(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return doubleQuotedString(e,t);const r=t.indent||(containsDocumentMarker(e)?"  ":""),n="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return t.implicitKey?n:foldFlowLines(n,r,FOLD_FLOW,getFoldOptions(t,!1))}function quotedString(e,t){const{singleQuote:r}=t.options;let n;if(r===!1)n=doubleQuotedString;else{const s=e.includes('"'),i=e.includes("'");s&&!i?n=singleQuotedString:i&&!s?n=doubleQuotedString:n=r?singleQuotedString:doubleQuotedString}return n(e,t)}let blockEndNewlines$2;try{blockEndNewlines$2=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{blockEndNewlines$2=/\n+(?!\n|$)/g}function blockString({comment:e,type:t,value:r},n,s,i){const{blockQuote:o,commentString:u,lineWidth:c}=n.options;if(!o||/\n[\t ]+$/.test(r))return quotedString(r,n);const d=n.indent||(n.forceBlockIndent||containsDocumentMarker(r)?"  ":""),m=o==="literal"?!0:o==="folded"||t===Scalar.BLOCK_FOLDED?!1:t===Scalar.BLOCK_LITERAL?!0:!lineLengthOverLimit(r,c,d.length);if(!r)return m?`|
`:`>
`;let T,$;for($=r.length;$>0;--$){const L=r[$-1];if(L!==`
`&&L!=="	"&&L!==" ")break}let C=r.substring($);const D=C.indexOf(`
`);D===-1?T="-":r===C||D!==C.length-1?(T="+",i&&i()):T="",C&&(r=r.slice(0,-C.length),C[C.length-1]===`
`&&(C=C.slice(0,-1)),C=C.replace(blockEndNewlines$2,`$&${d}`));let F=!1,g,q=-1;for(g=0;g<r.length;++g){const L=r[g];if(L===" ")F=!0;else if(L===`
`)q=g;else break}let x=r.substring(0,q<g?q+1:g);x&&(r=r.substring(x.length),x=x.replace(/\n+/g,`$&${d}`));let K=(F?d?"2":"1":"")+T;if(e&&(K+=" "+u(e.replace(/ ?[\r\n]+/g," ")),s&&s()),!m){const L=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${d}`);let B=!1;const J=getFoldOptions(n,!0);o!=="folded"&&t!==Scalar.BLOCK_FOLDED&&(J.onOverflow=()=>{B=!0});const re=foldFlowLines(`${x}${L}${C}`,d,FOLD_BLOCK,J);if(!B)return`>${K}
${d}${re}`}return r=r.replace(/\n+/g,`$&${d}`),`|${K}
${d}${x}${r}${C}`}function plainString(e,t,r,n){const{type:s,value:i}=e,{actualString:o,implicitKey:u,indent:c,indentStep:d,inFlow:m}=t;if(u&&i.includes(`
`)||m&&/[[\]{},]/.test(i))return quotedString(i,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return u||m||!i.includes(`
`)?quotedString(i,t):blockString(e,t,r,n);if(!u&&!m&&s!==Scalar.PLAIN&&i.includes(`
`))return blockString(e,t,r,n);if(containsDocumentMarker(i)){if(c==="")return t.forceBlockIndent=!0,blockString(e,t,r,n);if(u&&c===d)return quotedString(i,t)}const T=i.replace(/\n+/g,`$&
${c}`);if(o){const $=F=>F.default&&F.tag!=="tag:yaml.org,2002:str"&&F.test?.test(T),{compat:C,tags:D}=t.doc.schema;if(D.some($)||C?.some($))return quotedString(i,t)}return u?T:foldFlowLines(T,c,FOLD_FLOW,getFoldOptions(t,!1))}function stringifyString(e,t,r,n){const{implicitKey:s,inFlow:i}=t,o=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)});let{type:u}=e;u!==Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(u=Scalar.QUOTE_DOUBLE);const c=m=>{switch(m){case Scalar.BLOCK_FOLDED:case Scalar.BLOCK_LITERAL:return s||i?quotedString(o.value,t):blockString(o,t,r,n);case Scalar.QUOTE_DOUBLE:return doubleQuotedString(o.value,t);case Scalar.QUOTE_SINGLE:return singleQuotedString(o.value,t);case Scalar.PLAIN:return plainString(o,t,r,n);default:return null}};let d=c(u);if(d===null){const{defaultKeyType:m,defaultStringType:T}=t.options,$=s&&m||T;if(d=c($),d===null)throw new Error(`Unsupported default string type ${$}`)}return d}function createStringifyContext(e,t){const r=Object.assign({blockQuote:!0,commentString:stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:e,flowCollectionPadding:r.flowCollectionPadding?" ":"",indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function getTagObject(e,t){if(t.tag){const s=e.filter(i=>i.tag===t.tag);if(s.length>0)return s.find(i=>i.format===t.format)??s[0]}let r,n;if(isScalar$1(t)){n=t.value;let s=e.filter(i=>i.identify?.(n));if(s.length>1){const i=s.filter(o=>o.test);i.length>0&&(s=i)}r=s.find(i=>i.format===t.format)??s.find(i=>!i.format)}else n=t,r=e.find(s=>s.nodeClass&&n instanceof s.nodeClass);if(!r){const s=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${s} value`)}return r}function stringifyProps(e,t,{anchors:r,doc:n}){if(!n.directives)return"";const s=[],i=(isScalar$1(e)||isCollection$1(e))&&e.anchor;i&&anchorIsValid(i)&&(r.add(i),s.push(`&${i}`));const o=e.tag??(t.default?null:t.tag);return o&&s.push(n.directives.tagString(o)),s.join(" ")}function stringify$2(e,t,r,n){if(isPair(e))return e.toString(t,r,n);if(isAlias(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let s;const i=isNode(e)?e:t.doc.createNode(e,{onTagObj:c=>s=c});s??(s=getTagObject(t.doc.schema.tags,i));const o=stringifyProps(i,s,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const u=typeof s.stringify=="function"?s.stringify(i,t,r,n):isScalar$1(i)?stringifyString(i,t,r,n):i.toString(t,r,n);return o?isScalar$1(i)||u[0]==="{"||u[0]==="["?`${o} ${u}`:`${o}
${t.indent}${u}`:u}function stringifyPair({key:e,value:t},r,n,s){const{allNullValues:i,doc:o,indent:u,indentStep:c,options:{commentString:d,indentSeq:m,simpleKeys:T}}=r;let $=isNode(e)&&e.comment||null;if(T){if($)throw new Error("With simple keys, key nodes cannot have comments");if(isCollection$1(e)||!isNode(e)&&typeof e=="object"){const J="With simple keys, collection cannot be used as a key value";throw new Error(J)}}let C=!T&&(!e||$&&t==null&&!r.inFlow||isCollection$1(e)||(isScalar$1(e)?e.type===Scalar.BLOCK_FOLDED||e.type===Scalar.BLOCK_LITERAL:typeof e=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!C&&(T||!i),indent:u+c});let D=!1,F=!1,g=stringify$2(e,r,()=>D=!0,()=>F=!0);if(!C&&!r.inFlow&&g.length>1024){if(T)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");C=!0}if(r.inFlow){if(i||t==null)return D&&n&&n(),g===""?"?":C?`? ${g}`:g}else if(i&&!T||t==null&&C)return g=`? ${g}`,$&&!D?g+=lineComment(g,r.indent,d($)):F&&s&&s(),g;D&&($=null),C?($&&(g+=lineComment(g,r.indent,d($))),g=`? ${g}
${u}:`):(g=`${g}:`,$&&(g+=lineComment(g,r.indent,d($))));let q,x,P;isNode(t)?(q=!!t.spaceBefore,x=t.commentBefore,P=t.comment):(q=!1,x=null,P=null,t&&typeof t=="object"&&(t=o.createNode(t))),r.implicitKey=!1,!C&&!$&&isScalar$1(t)&&(r.indentAtStart=g.length+1),F=!1,!m&&c.length>=2&&!r.inFlow&&!C&&isSeq(t)&&!t.flow&&!t.tag&&!t.anchor&&(r.indent=r.indent.substring(2));let K=!1;const L=stringify$2(t,r,()=>K=!0,()=>F=!0);let B=" ";if($||q||x){if(B=q?`
`:"",x){const J=d(x);B+=`
${indentComment(J,r.indent)}`}L===""&&!r.inFlow?B===`
`&&P&&(B=`

`):B+=`
${r.indent}`}else if(!C&&isCollection$1(t)){const J=L[0],re=L.indexOf(`
`),ve=re!==-1,ye=r.inFlow??t.flow??t.items.length===0;if(ve||!ye){let Se=!1;if(ve&&(J==="&"||J==="!")){let Ne=L.indexOf(" ");J==="&"&&Ne!==-1&&Ne<re&&L[Ne+1]==="!"&&(Ne=L.indexOf(" ",Ne+1)),(Ne===-1||re<Ne)&&(Se=!0)}Se||(B=`
${r.indent}`)}}else(L===""||L[0]===`
`)&&(B="");return g+=B+L,r.inFlow?K&&n&&n():P&&!K?g+=lineComment(g,r.indent,d(P)):F&&s&&s(),g}function warn$1(e,t){(e==="debug"||e==="warn")&&console.warn(t)}const MERGE_KEY="<<",merge={identify:e=>e===MERGE_KEY||typeof e=="symbol"&&e.description===MERGE_KEY,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Scalar(Symbol(MERGE_KEY)),{addToJSMap:addMergeToJSMap}),stringify:()=>MERGE_KEY},isMergeKey=(e,t)=>(merge.identify(t)||isScalar$1(t)&&(!t.type||t.type===Scalar.PLAIN)&&merge.identify(t.value))&&e?.doc.schema.tags.some(r=>r.tag===merge.tag&&r.default);function addMergeToJSMap(e,t,r){if(r=e&&isAlias(r)?r.resolve(e.doc):r,isSeq(r))for(const n of r.items)mergeValue(e,t,n);else if(Array.isArray(r))for(const n of r)mergeValue(e,t,n);else mergeValue(e,t,r)}function mergeValue(e,t,r){const n=e&&isAlias(r)?r.resolve(e.doc):r;if(!isMap(n))throw new Error("Merge sources must be maps or map aliases");const s=n.toJSON(null,e,Map);for(const[i,o]of s)t instanceof Map?t.has(i)||t.set(i,o):t instanceof Set?t.add(i):Object.prototype.hasOwnProperty.call(t,i)||Object.defineProperty(t,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return t}function addPairToJSMap(e,t,{key:r,value:n}){if(isNode(r)&&r.addToJSMap)r.addToJSMap(e,t,n);else if(isMergeKey(e,r))addMergeToJSMap(e,t,n);else{const s=toJS(r,"",e);if(t instanceof Map)t.set(s,toJS(n,s,e));else if(t instanceof Set)t.add(s);else{const i=stringifyKey(r,s,e),o=toJS(n,i,e);i in t?Object.defineProperty(t,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[i]=o}}return t}function stringifyKey(e,t,r){if(t===null)return"";if(typeof t!="object")return String(t);if(isNode(e)&&r?.doc){const n=createStringifyContext(r.doc,{});n.anchors=new Set;for(const i of r.anchors.keys())n.anchors.add(i.anchor);n.inFlow=!0,n.inStringifyKey=!0;const s=e.toString(n);if(!r.mapKeyWarned){let i=JSON.stringify(s);i.length>40&&(i=i.substring(0,36)+'..."'),warn$1(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return s}return JSON.stringify(t)}function createPair(e,t,r){const n=createNode(e,void 0,r),s=createNode(t,void 0,r);return new Pair(n,s)}class Pair{constructor(t,r=null){Object.defineProperty(this,NODE_TYPE,{value:PAIR}),this.key=t,this.value=r}clone(t){let{key:r,value:n}=this;return isNode(r)&&(r=r.clone(t)),isNode(n)&&(n=n.clone(t)),new Pair(r,n)}toJSON(t,r){const n=r?.mapAsMap?new Map:{};return addPairToJSMap(r,n,this)}toString(t,r,n){return t?.doc?stringifyPair(this,t,r,n):JSON.stringify(this)}}function stringifyCollection(e,t,r){return(t.inFlow??e.flow?stringifyFlowCollection:stringifyBlockCollection)(e,t,r)}function stringifyBlockCollection({comment:e,items:t},r,{blockItemPrefix:n,flowChars:s,itemIndent:i,onChompKeep:o,onComment:u}){const{indent:c,options:{commentString:d}}=r,m=Object.assign({},r,{indent:i,type:null});let T=!1;const $=[];for(let D=0;D<t.length;++D){const F=t[D];let g=null;if(isNode(F))!T&&F.spaceBefore&&$.push(""),addCommentBefore(r,$,F.commentBefore,T),F.comment&&(g=F.comment);else if(isPair(F)){const x=isNode(F.key)?F.key:null;x&&(!T&&x.spaceBefore&&$.push(""),addCommentBefore(r,$,x.commentBefore,T))}T=!1;let q=stringify$2(F,m,()=>g=null,()=>T=!0);g&&(q+=lineComment(q,i,d(g))),T&&g&&(T=!1),$.push(n+q)}let C;if($.length===0)C=s.start+s.end;else{C=$[0];for(let D=1;D<$.length;++D){const F=$[D];C+=F?`
${c}${F}`:`
`}}return e?(C+=`
`+indentComment(d(e),c),u&&u()):T&&o&&o(),C}function stringifyFlowCollection({items:e},t,{flowChars:r,itemIndent:n}){const{indent:s,indentStep:i,flowCollectionPadding:o,options:{commentString:u}}=t;n+=i;const c=Object.assign({},t,{indent:n,inFlow:!0,type:null});let d=!1,m=0;const T=[];for(let D=0;D<e.length;++D){const F=e[D];let g=null;if(isNode(F))F.spaceBefore&&T.push(""),addCommentBefore(t,T,F.commentBefore,!1),F.comment&&(g=F.comment);else if(isPair(F)){const x=isNode(F.key)?F.key:null;x&&(x.spaceBefore&&T.push(""),addCommentBefore(t,T,x.commentBefore,!1),x.comment&&(d=!0));const P=isNode(F.value)?F.value:null;P?(P.comment&&(g=P.comment),P.commentBefore&&(d=!0)):F.value==null&&x?.comment&&(g=x.comment)}g&&(d=!0);let q=stringify$2(F,c,()=>g=null);D<e.length-1&&(q+=","),g&&(q+=lineComment(q,n,u(g))),!d&&(T.length>m||q.includes(`
`))&&(d=!0),T.push(q),m=T.length}const{start:$,end:C}=r;if(T.length===0)return $+C;if(!d){const D=T.reduce((F,g)=>F+g.length+2,2);d=t.options.lineWidth>0&&D>t.options.lineWidth}if(d){let D=$;for(const F of T)D+=F?`
${i}${s}${F}`:`
`;return`${D}
${s}${C}`}else return`${$}${o}${T.join(" ")}${o}${C}`}function addCommentBefore({indent:e,options:{commentString:t}},r,n,s){if(n&&s&&(n=n.replace(/^\n+/,"")),n){const i=indentComment(t(n),e);r.push(i.trimStart())}}function findPair(e,t){const r=isScalar$1(t)?t.value:t;for(const n of e)if(isPair(n)&&(n.key===t||n.key===r||isScalar$1(n.key)&&n.key.value===r))return n}class YAMLMap extends Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(MAP,t),this.items=[]}static from(t,r,n){const{keepUndefined:s,replacer:i}=n,o=new this(t),u=(c,d)=>{if(typeof i=="function")d=i.call(r,c,d);else if(Array.isArray(i)&&!i.includes(c))return;(d!==void 0||s)&&o.items.push(createPair(c,d,n))};if(r instanceof Map)for(const[c,d]of r)u(c,d);else if(r&&typeof r=="object")for(const c of Object.keys(r))u(c,r[c]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}add(t,r){let n;isPair(t)?n=t:!t||typeof t!="object"||!("key"in t)?n=new Pair(t,t?.value):n=new Pair(t.key,t.value);const s=findPair(this.items,n.key),i=this.schema?.sortMapEntries;if(s){if(!r)throw new Error(`Key ${n.key} already set`);isScalar$1(s.value)&&isScalarValue(n.value)?s.value.value=n.value:s.value=n.value}else if(i){const o=this.items.findIndex(u=>i(n,u)<0);o===-1?this.items.push(n):this.items.splice(o,0,n)}else this.items.push(n)}delete(t){const r=findPair(this.items,t);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(t,r){const s=findPair(this.items,t)?.value;return(!r&&isScalar$1(s)?s.value:s)??void 0}has(t){return!!findPair(this.items,t)}set(t,r){this.add(new Pair(t,r),!0)}toJSON(t,r,n){const s=n?new n:r?.mapAsMap?new Map:{};r?.onCreate&&r.onCreate(s);for(const i of this.items)addPairToJSMap(r,s,i);return s}toString(t,r,n){if(!t)return JSON.stringify(this);for(const s of this.items)if(!isPair(s))throw new Error(`Map items must all be pairs; found ${JSON.stringify(s)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),stringifyCollection(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:r})}}const map$1={collection:"map",default:!0,nodeClass:YAMLMap,tag:"tag:yaml.org,2002:map",resolve(e,t){return isMap(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,r)=>YAMLMap.from(e,t,r)};class YAMLSeq extends Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(SEQ,t),this.items=[]}add(t){this.items.push(t)}delete(t){const r=asItemIndex(t);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(t,r){const n=asItemIndex(t);if(typeof n!="number")return;const s=this.items[n];return!r&&isScalar$1(s)?s.value:s}has(t){const r=asItemIndex(t);return typeof r=="number"&&r<this.items.length}set(t,r){const n=asItemIndex(t);if(typeof n!="number")throw new Error(`Expected a valid index, not ${t}.`);const s=this.items[n];isScalar$1(s)&&isScalarValue(r)?s.value=r:this.items[n]=r}toJSON(t,r){const n=[];r?.onCreate&&r.onCreate(n);let s=0;for(const i of this.items)n.push(toJS(i,String(s++),r));return n}toString(t,r,n){return t?stringifyCollection(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}static from(t,r,n){const{replacer:s}=n,i=new this(t);if(r&&Symbol.iterator in Object(r)){let o=0;for(let u of r){if(typeof s=="function"){const c=r instanceof Set?u:String(o++);u=s.call(r,c,u)}i.items.push(createNode(u,void 0,n))}}return i}}function asItemIndex(e){let t=isScalar$1(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const seq={collection:"seq",default:!0,nodeClass:YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(e,t){return isSeq(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,r)=>YAMLSeq.from(e,t,r)},string={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,r,n){return t=Object.assign({actualString:!0},t),stringifyString(e,t,r,n)}},nullTag={identify:e=>e==null,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Scalar(null),stringify:({source:e},t)=>typeof e=="string"&&nullTag.test.test(e)?e:t.options.nullStr},boolTag={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Scalar(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},r){if(e&&boolTag.test.test(e)){const n=e[0]==="t"||e[0]==="T";if(t===n)return e}return t?r.options.trueStr:r.options.falseStr}};function stringifyNumber({format:e,minFractionDigits:t,tag:r,value:n}){if(typeof n=="bigint")return String(n);const s=typeof n=="number"?n:Number(n);if(!isFinite(s))return isNaN(s)?".nan":s<0?"-.inf":".inf";let i=Object.is(n,-0)?"-0":JSON.stringify(n);if(!e&&t&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let o=i.indexOf(".");o<0&&(o=i.length,i+=".");let u=t-(i.length-o-1);for(;u-- >0;)i+="0"}return i}const floatNaN$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:stringifyNumber},floatExp$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():stringifyNumber(e)}},float$1={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Scalar(parseFloat(e)),r=e.indexOf(".");return r!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-r-1),t},stringify:stringifyNumber},intIdentify$2=e=>typeof e=="bigint"||Number.isInteger(e),intResolve$1=(e,t,r,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),r);function intStringify$1(e,t,r){const{value:n}=e;return intIdentify$2(n)&&n>=0?r+n.toString(t):stringifyNumber(e)}const intOct$1={identify:e=>intIdentify$2(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,r)=>intResolve$1(e,2,8,r),stringify:e=>intStringify$1(e,8,"0o")},int$1={identify:intIdentify$2,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,r)=>intResolve$1(e,0,10,r),stringify:stringifyNumber},intHex$1={identify:e=>intIdentify$2(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,r)=>intResolve$1(e,2,16,r),stringify:e=>intStringify$1(e,16,"0x")},schema$2=[map$1,seq,string,nullTag,boolTag,intOct$1,int$1,intHex$1,floatNaN$1,floatExp$1,float$1];function intIdentify$1(e){return typeof e=="bigint"||Number.isInteger(e)}const stringifyJSON=({value:e})=>JSON.stringify(e),jsonScalars=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:stringifyJSON},{identify:e=>e==null,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:stringifyJSON},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:stringifyJSON},{identify:intIdentify$1,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:r})=>r?BigInt(e):parseInt(e,10),stringify:({value:e})=>intIdentify$1(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:stringifyJSON}],jsonError={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},schema$1=[map$1,seq].concat(jsonScalars,jsonError),binary={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){const r=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let s=0;s<r.length;++s)n[s]=r.charCodeAt(s);return n}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:r},n,s,i){if(!r)return"";const o=r;let u;if(typeof btoa=="function"){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);u=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=Scalar.BLOCK_LITERAL),t!==Scalar.QUOTE_DOUBLE){const c=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),d=Math.ceil(u.length/c),m=new Array(d);for(let T=0,$=0;T<d;++T,$+=c)m[T]=u.substr($,c);u=m.join(t===Scalar.BLOCK_LITERAL?`
`:" ")}return stringifyString({comment:e,type:t,value:u},n,s,i)}};function resolvePairs(e,t){if(isSeq(e))for(let r=0;r<e.items.length;++r){let n=e.items[r];if(!isPair(n)){if(isMap(n)){n.items.length>1&&t("Each pair must have its own sequence indicator");const s=n.items[0]||new Pair(new Scalar(null));if(n.commentBefore&&(s.key.commentBefore=s.key.commentBefore?`${n.commentBefore}
${s.key.commentBefore}`:n.commentBefore),n.comment){const i=s.value??s.key;i.comment=i.comment?`${n.comment}
${i.comment}`:n.comment}n=s}e.items[r]=isPair(n)?n:new Pair(n)}}else t("Expected a sequence for this tag");return e}function createPairs(e,t,r){const{replacer:n}=r,s=new YAMLSeq(e);s.tag="tag:yaml.org,2002:pairs";let i=0;if(t&&Symbol.iterator in Object(t))for(let o of t){typeof n=="function"&&(o=n.call(t,String(i++),o));let u,c;if(Array.isArray(o))if(o.length===2)u=o[0],c=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const d=Object.keys(o);if(d.length===1)u=d[0],c=o[u];else throw new TypeError(`Expected tuple with one key, not ${d.length} keys`)}else u=o;s.items.push(createPair(u,c,r))}return s}const pairs={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:resolvePairs,createNode:createPairs};class YAMLOMap extends YAMLSeq{constructor(){super(),this.add=YAMLMap.prototype.add.bind(this),this.delete=YAMLMap.prototype.delete.bind(this),this.get=YAMLMap.prototype.get.bind(this),this.has=YAMLMap.prototype.has.bind(this),this.set=YAMLMap.prototype.set.bind(this),this.tag=YAMLOMap.tag}toJSON(t,r){if(!r)return super.toJSON(t);const n=new Map;r?.onCreate&&r.onCreate(n);for(const s of this.items){let i,o;if(isPair(s)?(i=toJS(s.key,"",r),o=toJS(s.value,i,r)):i=toJS(s,"",r),n.has(i))throw new Error("Ordered maps must not include duplicate keys");n.set(i,o)}return n}static from(t,r,n){const s=createPairs(t,r,n),i=new this;return i.items=s.items,i}}YAMLOMap.tag="tag:yaml.org,2002:omap";const omap={collection:"seq",identify:e=>e instanceof Map,nodeClass:YAMLOMap,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const r=resolvePairs(e,t),n=[];for(const{key:s}of r.items)isScalar$1(s)&&(n.includes(s.value)?t(`Ordered maps must not include duplicate keys: ${s.value}`):n.push(s.value));return Object.assign(new YAMLOMap,r)},createNode:(e,t,r)=>YAMLOMap.from(e,t,r)};function boolStringify({value:e,source:t},r){return t&&(e?trueTag:falseTag).test.test(t)?t:e?r.options.trueStr:r.options.falseStr}const trueTag={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Scalar(!0),stringify:boolStringify},falseTag={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Scalar(!1),stringify:boolStringify},floatNaN={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:stringifyNumber},floatExp={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():stringifyNumber(e)}},float={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Scalar(parseFloat(e.replace(/_/g,""))),r=e.indexOf(".");if(r!==-1){const n=e.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(t.minFractionDigits=n.length)}return t},stringify:stringifyNumber},intIdentify=e=>typeof e=="bigint"||Number.isInteger(e);function intResolve(e,t,r,{intAsBigInt:n}){const s=e[0];if((s==="-"||s==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(r){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const o=BigInt(e);return s==="-"?BigInt(-1)*o:o}const i=parseInt(e,r);return s==="-"?-1*i:i}function intStringify(e,t,r){const{value:n}=e;if(intIdentify(n)){const s=n.toString(t);return n<0?"-"+r+s.substr(1):r+s}return stringifyNumber(e)}const intBin={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,r)=>intResolve(e,2,2,r),stringify:e=>intStringify(e,2,"0b")},intOct={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,r)=>intResolve(e,1,8,r),stringify:e=>intStringify(e,8,"0")},int={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,r)=>intResolve(e,0,10,r),stringify:stringifyNumber},intHex={identify:intIdentify,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,r)=>intResolve(e,2,16,r),stringify:e=>intStringify(e,16,"0x")};class YAMLSet extends YAMLMap{constructor(t){super(t),this.tag=YAMLSet.tag}add(t){let r;isPair(t)?r=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?r=new Pair(t.key,null):r=new Pair(t,null),findPair(this.items,r.key)||this.items.push(r)}get(t,r){const n=findPair(this.items,t);return!r&&isPair(n)?isScalar$1(n.key)?n.key.value:n.key:n}set(t,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);const n=findPair(this.items,t);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new Pair(t))}toJSON(t,r){return super.toJSON(t,r,Set)}toString(t,r,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}static from(t,r,n){const{replacer:s}=n,i=new this(t);if(r&&Symbol.iterator in Object(r))for(let o of r)typeof s=="function"&&(o=s.call(r,o,o)),i.items.push(createPair(o,null,n));return i}}YAMLSet.tag="tag:yaml.org,2002:set";const set$2={collection:"map",identify:e=>e instanceof Set,nodeClass:YAMLSet,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,r)=>YAMLSet.from(e,t,r),resolve(e,t){if(isMap(e)){if(e.hasAllNullValues(!0))return Object.assign(new YAMLSet,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function parseSexagesimal(e,t){const r=e[0],n=r==="-"||r==="+"?e.substring(1):e,s=o=>t?BigInt(o):Number(o),i=n.replace(/_/g,"").split(":").reduce((o,u)=>o*s(60)+s(u),s(0));return r==="-"?s(-1)*i:i}function stringifySexagesimal(e){let{value:t}=e,r=o=>o;if(typeof t=="bigint")r=o=>BigInt(o);else if(isNaN(t)||!isFinite(t))return stringifyNumber(e);let n="";t<0&&(n="-",t*=r(-1));const s=r(60),i=[t%s];return t<60?i.unshift(0):(t=(t-i[0])/s,i.unshift(t%s),t>=60&&(t=(t-i[0])/s,i.unshift(t))),n+i.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const intTime={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:r})=>parseSexagesimal(e,r),stringify:stringifySexagesimal},floatTime={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>parseSexagesimal(e,!1),stringify:stringifySexagesimal},timestamp={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(timestamp.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,r,n,s,i,o,u]=t.map(Number),c=t[7]?Number((t[7]+"00").substr(1,3)):0;let d=Date.UTC(r,n-1,s,i||0,o||0,u||0,c);const m=t[8];if(m&&m!=="Z"){let T=parseSexagesimal(m,!1);Math.abs(T)<30&&(T*=60),d-=6e4*T}return new Date(d)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},schema=[map$1,seq,string,nullTag,trueTag,falseTag,intBin,intOct,int,intHex,floatNaN,floatExp,float,binary,merge,omap,pairs,set$2,intTime,floatTime,timestamp],schemas=new Map([["core",schema$2],["failsafe",[map$1,seq,string]],["json",schema$1],["yaml11",schema],["yaml-1.1",schema]]),tagsByName={binary,bool:boolTag,float:float$1,floatExp:floatExp$1,floatNaN:floatNaN$1,floatTime,int:int$1,intHex:intHex$1,intOct:intOct$1,intTime,map:map$1,merge,null:nullTag,omap,pairs,seq,set:set$2,timestamp},coreKnownTags={"tag:yaml.org,2002:binary":binary,"tag:yaml.org,2002:merge":merge,"tag:yaml.org,2002:omap":omap,"tag:yaml.org,2002:pairs":pairs,"tag:yaml.org,2002:set":set$2,"tag:yaml.org,2002:timestamp":timestamp};function getTags(e,t,r){const n=schemas.get(t);if(n&&!e)return r&&!n.includes(merge)?n.concat(merge):n.slice();let s=n;if(!s)if(Array.isArray(e))s=[];else{const i=Array.from(schemas.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${i} or define customTags array`)}if(Array.isArray(e))for(const i of e)s=s.concat(i);else typeof e=="function"&&(s=e(s.slice()));return r&&(s=s.concat(merge)),s.reduce((i,o)=>{const u=typeof o=="string"?tagsByName[o]:o;if(!u){const c=JSON.stringify(o),d=Object.keys(tagsByName).map(m=>JSON.stringify(m)).join(", ");throw new Error(`Unknown custom tag ${c}; use one of ${d}`)}return i.includes(u)||i.push(u),i},[])}const sortMapEntriesByKey=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Schema{constructor({compat:t,customTags:r,merge:n,resolveKnownTags:s,schema:i,sortMapEntries:o,toStringDefaults:u}){this.compat=Array.isArray(t)?getTags(t,"compat"):t?getTags(null,t):null,this.name=typeof i=="string"&&i||"core",this.knownTags=s?coreKnownTags:{},this.tags=getTags(r,this.name,n),this.toStringOptions=u??null,Object.defineProperty(this,MAP,{value:map$1}),Object.defineProperty(this,SCALAR$1,{value:string}),Object.defineProperty(this,SEQ,{value:seq}),this.sortMapEntries=typeof o=="function"?o:o===!0?sortMapEntriesByKey:null}clone(){const t=Object.create(Schema.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function stringifyDocument(e,t){const r=[];let n=t.directives===!0;if(t.directives!==!1&&e.directives){const c=e.directives.toString(e);c?(r.push(c),n=!0):e.directives.docStart&&(n=!0)}n&&r.push("---");const s=createStringifyContext(e,t),{commentString:i}=s.options;if(e.commentBefore){r.length!==1&&r.unshift("");const c=i(e.commentBefore);r.unshift(indentComment(c,""))}let o=!1,u=null;if(e.contents){if(isNode(e.contents)){if(e.contents.spaceBefore&&n&&r.push(""),e.contents.commentBefore){const m=i(e.contents.commentBefore);r.push(indentComment(m,""))}s.forceBlockIndent=!!e.comment,u=e.contents.comment}const c=u?void 0:()=>o=!0;let d=stringify$2(e.contents,s,()=>u=null,c);u&&(d+=lineComment(d,"",i(u))),(d[0]==="|"||d[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${d}`:r.push(d)}else r.push(stringify$2(e.contents,s));if(e.directives?.docEnd)if(e.comment){const c=i(e.comment);c.includes(`
`)?(r.push("..."),r.push(indentComment(c,""))):r.push(`... ${c}`)}else r.push("...");else{let c=e.comment;c&&o&&(c=c.replace(/^\n+/,"")),c&&((!o||u)&&r[r.length-1]!==""&&r.push(""),r.push(indentComment(i(c),"")))}return r.join(`
`)+`
`}class Document{constructor(t,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,NODE_TYPE,{value:DOC});let s=null;typeof r=="function"||Array.isArray(r)?s=r:n===void 0&&r&&(n=r,r=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=i;let{version:o}=i;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Directives({version:o}),this.setSchema(o,n),this.contents=t===void 0?null:this.createNode(t,s,n)}clone(){const t=Object.create(Document.prototype,{[NODE_TYPE]:{value:DOC}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=isNode(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){assertCollection(this.contents)&&this.contents.add(t)}addIn(t,r){assertCollection(this.contents)&&this.contents.addIn(t,r)}createAlias(t,r){if(!t.anchor){const n=anchorNames(this);t.anchor=!r||n.has(r)?findNewAnchor(r||"a",n):r}return new Alias(t.anchor)}createNode(t,r,n){let s;if(typeof r=="function")t=r.call({"":t},"",t),s=r;else if(Array.isArray(r)){const g=x=>typeof x=="number"||x instanceof String||x instanceof Number,q=r.filter(g).map(String);q.length>0&&(r=r.concat(q)),s=r}else n===void 0&&r&&(n=r,r=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:u,keepUndefined:c,onTagObj:d,tag:m}=n??{},{onAnchor:T,setAnchors:$,sourceObjects:C}=createNodeAnchors(this,o||"a"),D={aliasDuplicateObjects:i??!0,keepUndefined:c??!1,onAnchor:T,onTagObj:d,replacer:s,schema:this.schema,sourceObjects:C},F=createNode(t,m,D);return u&&isCollection$1(F)&&(F.flow=!0),$(),F}createPair(t,r,n={}){const s=this.createNode(t,null,n),i=this.createNode(r,null,n);return new Pair(s,i)}delete(t){return assertCollection(this.contents)?this.contents.delete(t):!1}deleteIn(t){return isEmptyPath(t)?this.contents==null?!1:(this.contents=null,!0):assertCollection(this.contents)?this.contents.deleteIn(t):!1}get(t,r){return isCollection$1(this.contents)?this.contents.get(t,r):void 0}getIn(t,r){return isEmptyPath(t)?!r&&isScalar$1(this.contents)?this.contents.value:this.contents:isCollection$1(this.contents)?this.contents.getIn(t,r):void 0}has(t){return isCollection$1(this.contents)?this.contents.has(t):!1}hasIn(t){return isEmptyPath(t)?this.contents!==void 0:isCollection$1(this.contents)?this.contents.hasIn(t):!1}set(t,r){this.contents==null?this.contents=collectionFromPath(this.schema,[t],r):assertCollection(this.contents)&&this.contents.set(t,r)}setIn(t,r){isEmptyPath(t)?this.contents=r:this.contents==null?this.contents=collectionFromPath(this.schema,Array.from(t),r):assertCollection(this.contents)&&this.contents.setIn(t,r)}setSchema(t,r={}){typeof t=="number"&&(t=String(t));let n;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Directives({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Directives({version:t}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const s=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${s}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:r,mapAsMap:n,maxAliasCount:s,onAnchor:i,reviver:o}={}){const u={anchors:new Map,doc:this,keep:!t,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},c=toJS(this.contents,r??"",u);if(typeof i=="function")for(const{count:d,res:m}of u.anchors.values())i(m,d);return typeof o=="function"?applyReviver(o,{"":c},"",c):c}toJSON(t,r){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:r})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const r=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return stringifyDocument(this,t)}}function assertCollection(e){if(isCollection$1(e))return!0;throw new Error("Expected a YAML collection as document contents")}class YAMLError extends Error{constructor(t,r,n,s){super(),this.name=t,this.code=n,this.message=s,this.pos=r}}class YAMLParseError extends YAMLError{constructor(t,r,n){super("YAMLParseError",t,r,n)}}class YAMLWarning extends YAMLError{constructor(t,r,n){super("YAMLWarning",t,r,n)}}const prettifyError=(e,t)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(u=>t.linePos(u));const{line:n,col:s}=r.linePos[0];r.message+=` at line ${n}, column ${s}`;let i=s-1,o=e.substring(t.lineStarts[n-1],t.lineStarts[n]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const u=Math.min(i-39,o.length-79);o=""+o.substring(u),i-=u-1}if(o.length>80&&(o=o.substring(0,79)+""),n>1&&/^ *$/.test(o.substring(0,i))){let u=e.substring(t.lineStarts[n-2],t.lineStarts[n-1]);u.length>80&&(u=u.substring(0,79)+`
`),o=u+o}if(/[^ ]/.test(o)){let u=1;const c=r.linePos[1];c?.line===n&&c.col>s&&(u=Math.max(1,Math.min(c.col-s,80-i)));const d=" ".repeat(i)+"^".repeat(u);r.message+=`:

${o}
${d}
`}};function resolveProps(e,{flow:t,indicator:r,next:n,offset:s,onError:i,parentIndent:o,startOnNewline:u}){let c=!1,d=u,m=u,T="",$="",C=!1,D=!1,F=null,g=null,q=null,x=null,P=null,K=null,L=null;for(const re of e)switch(D&&(re.type!=="space"&&re.type!=="newline"&&re.type!=="comma"&&i(re.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),D=!1),F&&(d&&re.type!=="comment"&&re.type!=="newline"&&i(F,"TAB_AS_INDENT","Tabs are not allowed as indentation"),F=null),re.type){case"space":!t&&(r!=="doc-start"||n?.type!=="flow-collection")&&re.source.includes("	")&&(F=re),m=!0;break;case"comment":{m||i(re,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const ve=re.source.substring(1)||" ";T?T+=$+ve:T=ve,$="",d=!1;break}case"newline":d?T?T+=re.source:(!K||r!=="seq-item-ind")&&(c=!0):$+=re.source,d=!0,C=!0,(g||q)&&(x=re),m=!0;break;case"anchor":g&&i(re,"MULTIPLE_ANCHORS","A node can have at most one anchor"),re.source.endsWith(":")&&i(re.offset+re.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=re,L??(L=re.offset),d=!1,m=!1,D=!0;break;case"tag":{q&&i(re,"MULTIPLE_TAGS","A node can have at most one tag"),q=re,L??(L=re.offset),d=!1,m=!1,D=!0;break}case r:(g||q)&&i(re,"BAD_PROP_ORDER",`Anchors and tags must be after the ${re.source} indicator`),K&&i(re,"UNEXPECTED_TOKEN",`Unexpected ${re.source} in ${t??"collection"}`),K=re,d=r==="seq-item-ind"||r==="explicit-key-ind",m=!1;break;case"comma":if(t){P&&i(re,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),P=re,d=!1,m=!1;break}default:i(re,"UNEXPECTED_TOKEN",`Unexpected ${re.type} token`),d=!1,m=!1}const B=e[e.length-1],J=B?B.offset+B.source.length:s;return D&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&i(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),F&&(d&&F.indent<=o||n?.type==="block-map"||n?.type==="block-seq")&&i(F,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:P,found:K,spaceBefore:c,comment:T,hasNewline:C,anchor:g,tag:q,newlineAfterProp:x,end:J,start:L??J}}function containsNewline(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(const t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of e.items){for(const r of t.start)if(r.type==="newline")return!0;if(t.sep){for(const r of t.sep)if(r.type==="newline")return!0}if(containsNewline(t.key)||containsNewline(t.value))return!0}return!1;default:return!0}}function flowIndentCheck(e,t,r){if(t?.type==="flow-collection"){const n=t.end[0];n.indent===e&&(n.source==="]"||n.source==="}")&&containsNewline(t)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function mapIncludes(e,t,r){const{uniqueKeys:n}=e.options;if(n===!1)return!1;const s=typeof n=="function"?n:(i,o)=>i===o||isScalar$1(i)&&isScalar$1(o)&&i.value===o.value;return t.some(i=>s(i.key,r))}const startColMsg="All mapping items must start at the same column";function resolveBlockMap({composeNode:e,composeEmptyNode:t},r,n,s,i){const o=i?.nodeClass??YAMLMap,u=new o(r.schema);r.atRoot&&(r.atRoot=!1);let c=n.offset,d=null;for(const m of n.items){const{start:T,key:$,sep:C,value:D}=m,F=resolveProps(T,{indicator:"explicit-key-ind",next:$??C?.[0],offset:c,onError:s,parentIndent:n.indent,startOnNewline:!0}),g=!F.found;if(g){if($&&($.type==="block-seq"?s(c,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in $&&$.indent!==n.indent&&s(c,"BAD_INDENT",startColMsg)),!F.anchor&&!F.tag&&!C){d=F.end,F.comment&&(u.comment?u.comment+=`
`+F.comment:u.comment=F.comment);continue}(F.newlineAfterProp||containsNewline($))&&s($??T[T.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else F.found?.indent!==n.indent&&s(c,"BAD_INDENT",startColMsg);r.atKey=!0;const q=F.end,x=$?e(r,$,F,s):t(r,q,T,null,F,s);r.schema.compat&&flowIndentCheck(n.indent,$,s),r.atKey=!1,mapIncludes(r,u.items,x)&&s(q,"DUPLICATE_KEY","Map keys must be unique");const P=resolveProps(C??[],{indicator:"map-value-ind",next:D,offset:x.range[2],onError:s,parentIndent:n.indent,startOnNewline:!$||$.type==="block-scalar"});if(c=P.end,P.found){g&&(D?.type==="block-map"&&!P.hasNewline&&s(c,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&F.start<P.found.offset-1024&&s(x.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const K=D?e(r,D,P,s):t(r,c,C,null,P,s);r.schema.compat&&flowIndentCheck(n.indent,D,s),c=K.range[2];const L=new Pair(x,K);r.options.keepSourceTokens&&(L.srcToken=m),u.items.push(L)}else{g&&s(x.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),P.comment&&(x.comment?x.comment+=`
`+P.comment:x.comment=P.comment);const K=new Pair(x);r.options.keepSourceTokens&&(K.srcToken=m),u.items.push(K)}}return d&&d<c&&s(d,"IMPOSSIBLE","Map comment with trailing content"),u.range=[n.offset,c,d??c],u}function resolveBlockSeq({composeNode:e,composeEmptyNode:t},r,n,s,i){const o=i?.nodeClass??YAMLSeq,u=new o(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let c=n.offset,d=null;for(const{start:m,value:T}of n.items){const $=resolveProps(m,{indicator:"seq-item-ind",next:T,offset:c,onError:s,parentIndent:n.indent,startOnNewline:!0});if(!$.found)if($.anchor||$.tag||T)T?.type==="block-seq"?s($.end,"BAD_INDENT","All sequence items must start at the same column"):s(c,"MISSING_CHAR","Sequence item without - indicator");else{d=$.end,$.comment&&(u.comment=$.comment);continue}const C=T?e(r,T,$,s):t(r,$.end,m,null,$,s);r.schema.compat&&flowIndentCheck(n.indent,T,s),c=C.range[2],u.items.push(C)}return u.range=[n.offset,c,d??c],u}function resolveEnd(e,t,r,n){let s="";if(e){let i=!1,o="";for(const u of e){const{source:c,type:d}=u;switch(d){case"space":i=!0;break;case"comment":{r&&!i&&n(u,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const m=c.substring(1)||" ";s?s+=o+m:s=m,o="";break}case"newline":s&&(o+=c),i=!0;break;default:n(u,"UNEXPECTED_TOKEN",`Unexpected ${d} at node end`)}t+=c.length}}return{comment:s,offset:t}}const blockMsg="Block collections are not allowed within flow collections",isBlock=e=>e&&(e.type==="block-map"||e.type==="block-seq");function resolveFlowCollection({composeNode:e,composeEmptyNode:t},r,n,s,i){const o=n.start.source==="{",u=o?"flow map":"flow sequence",c=i?.nodeClass??(o?YAMLMap:YAMLSeq),d=new c(r.schema);d.flow=!0;const m=r.atRoot;m&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let T=n.offset+n.start.source.length;for(let g=0;g<n.items.length;++g){const q=n.items[g],{start:x,key:P,sep:K,value:L}=q,B=resolveProps(x,{flow:u,indicator:"explicit-key-ind",next:P??K?.[0],offset:T,onError:s,parentIndent:n.indent,startOnNewline:!1});if(!B.found){if(!B.anchor&&!B.tag&&!K&&!L){g===0&&B.comma?s(B.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${u}`):g<n.items.length-1&&s(B.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${u}`),B.comment&&(d.comment?d.comment+=`
`+B.comment:d.comment=B.comment),T=B.end;continue}!o&&r.options.strict&&containsNewline(P)&&s(P,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)B.comma&&s(B.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${u}`);else if(B.comma||s(B.start,"MISSING_CHAR",`Missing , between ${u} items`),B.comment){let J="";e:for(const re of x)switch(re.type){case"comma":case"space":break;case"comment":J=re.source.substring(1);break e;default:break e}if(J){let re=d.items[d.items.length-1];isPair(re)&&(re=re.value??re.key),re.comment?re.comment+=`
`+J:re.comment=J,B.comment=B.comment.substring(J.length+1)}}if(!o&&!K&&!B.found){const J=L?e(r,L,B,s):t(r,B.end,K,null,B,s);d.items.push(J),T=J.range[2],isBlock(L)&&s(J.range,"BLOCK_IN_FLOW",blockMsg)}else{r.atKey=!0;const J=B.end,re=P?e(r,P,B,s):t(r,J,x,null,B,s);isBlock(P)&&s(re.range,"BLOCK_IN_FLOW",blockMsg),r.atKey=!1;const ve=resolveProps(K??[],{flow:u,indicator:"map-value-ind",next:L,offset:re.range[2],onError:s,parentIndent:n.indent,startOnNewline:!1});if(ve.found){if(!o&&!B.found&&r.options.strict){if(K)for(const Ne of K){if(Ne===ve.found)break;if(Ne.type==="newline"){s(Ne,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}B.start<ve.found.offset-1024&&s(ve.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else L&&("source"in L&&L.source?.[0]===":"?s(L,"MISSING_CHAR",`Missing space after : in ${u}`):s(ve.start,"MISSING_CHAR",`Missing , or : between ${u} items`));const ye=L?e(r,L,ve,s):ve.found?t(r,ve.end,K,null,ve,s):null;ye?isBlock(L)&&s(ye.range,"BLOCK_IN_FLOW",blockMsg):ve.comment&&(re.comment?re.comment+=`
`+ve.comment:re.comment=ve.comment);const Se=new Pair(re,ye);if(r.options.keepSourceTokens&&(Se.srcToken=q),o){const Ne=d;mapIncludes(r,Ne.items,re)&&s(J,"DUPLICATE_KEY","Map keys must be unique"),Ne.items.push(Se)}else{const Ne=new YAMLMap(r.schema);Ne.flow=!0,Ne.items.push(Se);const Ke=(ye??re).range;Ne.range=[re.range[0],Ke[1],Ke[2]],d.items.push(Ne)}T=ye?ye.range[2]:ve.end}}const $=o?"}":"]",[C,...D]=n.end;let F=T;if(C?.source===$)F=C.offset+C.source.length;else{const g=u[0].toUpperCase()+u.substring(1),q=m?`${g} must end with a ${$}`:`${g} in block collection must be sufficiently indented and end with a ${$}`;s(T,m?"MISSING_CHAR":"BAD_INDENT",q),C&&C.source.length!==1&&D.unshift(C)}if(D.length>0){const g=resolveEnd(D,F,r.options.strict,s);g.comment&&(d.comment?d.comment+=`
`+g.comment:d.comment=g.comment),d.range=[n.offset,F,g.offset]}else d.range=[n.offset,F,F];return d}function resolveCollection(e,t,r,n,s,i){const o=r.type==="block-map"?resolveBlockMap(e,t,r,n,i):r.type==="block-seq"?resolveBlockSeq(e,t,r,n,i):resolveFlowCollection(e,t,r,n,i),u=o.constructor;return s==="!"||s===u.tagName?(o.tag=u.tagName,o):(s&&(o.tag=s),o)}function composeCollection(e,t,r,n,s){const i=n.tag,o=i?t.directives.tagName(i.source,$=>s(i,"TAG_RESOLVE_FAILED",$)):null;if(r.type==="block-seq"){const{anchor:$,newlineAfterProp:C}=n,D=$&&i?$.offset>i.offset?$:i:$??i;D&&(!C||C.offset<D.offset)&&s(D,"MISSING_CHAR","Missing newline after block sequence props")}const u=r.type==="block-map"?"map":r.type==="block-seq"?"seq":r.start.source==="{"?"map":"seq";if(!i||!o||o==="!"||o===YAMLMap.tagName&&u==="map"||o===YAMLSeq.tagName&&u==="seq")return resolveCollection(e,t,r,s,o);let c=t.schema.tags.find($=>$.tag===o&&$.collection===u);if(!c){const $=t.schema.knownTags[o];if($?.collection===u)t.schema.tags.push(Object.assign({},$,{default:!1})),c=$;else return $?s(i,"BAD_COLLECTION_TYPE",`${$.tag} used for ${u} collection, but expects ${$.collection??"scalar"}`,!0):s(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),resolveCollection(e,t,r,s,o)}const d=resolveCollection(e,t,r,s,o,c),m=c.resolve?.(d,$=>s(i,"TAG_RESOLVE_FAILED",$),t.options)??d,T=isNode(m)?m:new Scalar(m);return T.range=d.range,T.tag=o,c?.format&&(T.format=c.format),T}function resolveBlockScalar(e,t,r){const n=t.offset,s=parseBlockScalarHeader(t,e.options.strict,r);if(!s)return{value:"",type:null,comment:"",range:[n,n,n]};const i=s.mode===">"?Scalar.BLOCK_FOLDED:Scalar.BLOCK_LITERAL,o=t.source?splitLines(t.source):[];let u=o.length;for(let F=o.length-1;F>=0;--F){const g=o[F][1];if(g===""||g==="\r")u=F;else break}if(u===0){const F=s.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let g=n+s.length;return t.source&&(g+=t.source.length),{value:F,type:i,comment:s.comment,range:[n,g,g]}}let c=t.indent+s.indent,d=t.offset+s.length,m=0;for(let F=0;F<u;++F){const[g,q]=o[F];if(q===""||q==="\r")s.indent===0&&g.length>c&&(c=g.length);else{g.length<c&&r(d+g.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),s.indent===0&&(c=g.length),m=F,c===0&&!e.atRoot&&r(d,"BAD_INDENT","Block scalar values in collections must be indented");break}d+=g.length+q.length+1}for(let F=o.length-1;F>=u;--F)o[F][0].length>c&&(u=F+1);let T="",$="",C=!1;for(let F=0;F<m;++F)T+=o[F][0].slice(c)+`
`;for(let F=m;F<u;++F){let[g,q]=o[F];d+=g.length+q.length+1;const x=q[q.length-1]==="\r";if(x&&(q=q.slice(0,-1)),q&&g.length<c){const K=`Block scalar lines must not be less indented than their ${s.indent?"explicit indentation indicator":"first line"}`;r(d-q.length-(x?2:1),"BAD_INDENT",K),g=""}i===Scalar.BLOCK_LITERAL?(T+=$+g.slice(c)+q,$=`
`):g.length>c||q[0]==="	"?($===" "?$=`
`:!C&&$===`
`&&($=`

`),T+=$+g.slice(c)+q,$=`
`,C=!0):q===""?$===`
`?T+=`
`:$=`
`:(T+=$+q,$=" ",C=!1)}switch(s.chomp){case"-":break;case"+":for(let F=u;F<o.length;++F)T+=`
`+o[F][0].slice(c);T[T.length-1]!==`
`&&(T+=`
`);break;default:T+=`
`}const D=n+s.length+t.source.length;return{value:T,type:i,comment:s.comment,range:[n,D,D]}}function parseBlockScalarHeader({offset:e,props:t},r,n){if(t[0].type!=="block-scalar-header")return n(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:s}=t[0],i=s[0];let o=0,u="",c=-1;for(let $=1;$<s.length;++$){const C=s[$];if(!u&&(C==="-"||C==="+"))u=C;else{const D=Number(C);!o&&D?o=D:c===-1&&(c=e+$)}}c!==-1&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${s}`);let d=!1,m="",T=s.length;for(let $=1;$<t.length;++$){const C=t[$];switch(C.type){case"space":d=!0;case"newline":T+=C.source.length;break;case"comment":r&&!d&&n(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),T+=C.source.length,m=C.source.substring(1);break;case"error":n(C,"UNEXPECTED_TOKEN",C.message),T+=C.source.length;break;default:{const D=`Unexpected token in block scalar header: ${C.type}`;n(C,"UNEXPECTED_TOKEN",D);const F=C.source;F&&typeof F=="string"&&(T+=F.length)}}}return{mode:i,indent:o,chomp:u,comment:m,length:T}}function splitLines(e){const t=e.split(/\n( *)/),r=t[0],n=r.match(/^( *)/),i=[n?.[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let o=1;o<t.length;o+=2)i.push([t[o],t[o+1]]);return i}function resolveFlowScalar(e,t,r){const{offset:n,type:s,source:i,end:o}=e;let u,c;const d=($,C,D)=>r(n+$,C,D);switch(s){case"scalar":u=Scalar.PLAIN,c=plainValue(i,d);break;case"single-quoted-scalar":u=Scalar.QUOTE_SINGLE,c=singleQuotedValue(i,d);break;case"double-quoted-scalar":u=Scalar.QUOTE_DOUBLE,c=doubleQuotedValue(i,d);break;default:return r(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${s}`),{value:"",type:null,comment:"",range:[n,n+i.length,n+i.length]}}const m=n+i.length,T=resolveEnd(o,m,t,r);return{value:c,type:u,comment:T.comment,range:[n,m,T.offset]}}function plainValue(e,t){let r="";switch(e[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${e[0]}`;break}case"@":case"`":{r=`reserved character ${e[0]}`;break}}return r&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),foldLines(e)}function singleQuotedValue(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),foldLines(e.slice(1,-1)).replace(/''/g,"'")}function foldLines(e){let t,r;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=t.exec(e);if(!n)return e;let s=n[1],i=" ",o=t.lastIndex;for(r.lastIndex=o;n=r.exec(e);)n[1]===""?i===`
`?s+=i:i=`
`:(s+=i+n[1],i=" "),o=r.lastIndex;const u=/[ \t]*(.*)/sy;return u.lastIndex=o,n=u.exec(e),s+i+(n?.[1]??"")}function doubleQuotedValue(e,t){let r="";for(let n=1;n<e.length-1;++n){const s=e[n];if(!(s==="\r"&&e[n+1]===`
`))if(s===`
`){const{fold:i,offset:o}=foldNewline(e,n);r+=i,n=o}else if(s==="\\"){let i=e[++n];const o=escapeCodes[i];if(o)r+=o;else if(i===`
`)for(i=e[n+1];i===" "||i==="	";)i=e[++n+1];else if(i==="\r"&&e[n+1]===`
`)for(i=e[++n+1];i===" "||i==="	";)i=e[++n+1];else if(i==="x"||i==="u"||i==="U"){const u={x:2,u:4,U:8}[i];r+=parseCharCode(e,n+1,u,t),n+=u}else{const u=e.substr(n-1,2);t(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${u}`),r+=u}}else if(s===" "||s==="	"){const i=n;let o=e[n+1];for(;o===" "||o==="	";)o=e[++n+1];o!==`
`&&!(o==="\r"&&e[n+2]===`
`)&&(r+=n>i?e.slice(i,n+1):s)}else r+=s}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),r}function foldNewline(e,t){let r="",n=e[t+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&e[t+2]!==`
`);)n===`
`&&(r+=`
`),t+=1,n=e[t+1];return r||(r=" "),{fold:r,offset:t}}const escapeCodes={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function parseCharCode(e,t,r,n){const s=e.substr(t,r),o=s.length===r&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;if(isNaN(o)){const u=e.substr(t-2,r+2);return n(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${u}`),u}return String.fromCodePoint(o)}function composeScalar(e,t,r,n){const{value:s,type:i,comment:o,range:u}=t.type==="block-scalar"?resolveBlockScalar(e,t,n):resolveFlowScalar(t,e.options.strict,n),c=r?e.directives.tagName(r.source,T=>n(r,"TAG_RESOLVE_FAILED",T)):null;let d;e.options.stringKeys&&e.atKey?d=e.schema[SCALAR$1]:c?d=findScalarTagByName(e.schema,s,c,r,n):t.type==="scalar"?d=findScalarTagByTest(e,s,t,n):d=e.schema[SCALAR$1];let m;try{const T=d.resolve(s,$=>n(r??t,"TAG_RESOLVE_FAILED",$),e.options);m=isScalar$1(T)?T:new Scalar(T)}catch(T){const $=T instanceof Error?T.message:String(T);n(r??t,"TAG_RESOLVE_FAILED",$),m=new Scalar(s)}return m.range=u,m.source=s,i&&(m.type=i),c&&(m.tag=c),d.format&&(m.format=d.format),o&&(m.comment=o),m}function findScalarTagByName(e,t,r,n,s){if(r==="!")return e[SCALAR$1];const i=[];for(const u of e.tags)if(!u.collection&&u.tag===r)if(u.default&&u.test)i.push(u);else return u;for(const u of i)if(u.test?.test(t))return u;const o=e.knownTags[r];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(s(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),e[SCALAR$1])}function findScalarTagByTest({atKey:e,directives:t,schema:r},n,s,i){const o=r.tags.find(u=>(u.default===!0||e&&u.default==="key")&&u.test?.test(n))||r[SCALAR$1];if(r.compat){const u=r.compat.find(c=>c.default&&c.test?.test(n))??r[SCALAR$1];if(o.tag!==u.tag){const c=t.tagString(o.tag),d=t.tagString(u.tag),m=`Value may be parsed as either ${c} or ${d}`;i(s,"TAG_RESOLVE_FAILED",m,!0)}}return o}function emptyScalarPosition(e,t,r){if(t){r??(r=t.length);for(let n=r-1;n>=0;--n){let s=t[n];switch(s.type){case"space":case"comment":case"newline":e-=s.source.length;continue}for(s=t[++n];s?.type==="space";)e+=s.source.length,s=t[++n];break}}return e}const CN={composeNode,composeEmptyNode};function composeNode(e,t,r,n){const s=e.atKey,{spaceBefore:i,comment:o,anchor:u,tag:c}=r;let d,m=!0;switch(t.type){case"alias":d=composeAlias(e,t,n),(u||c)&&n(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":d=composeScalar(e,t,c,n),u&&(d.anchor=u.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":d=composeCollection(CN,e,t,r,n),u&&(d.anchor=u.source.substring(1));break;default:{const T=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;n(t,"UNEXPECTED_TOKEN",T),d=composeEmptyNode(e,t.offset,void 0,null,r,n),m=!1}}return u&&d.anchor===""&&n(u,"BAD_ALIAS","Anchor cannot be an empty string"),s&&e.options.stringKeys&&(!isScalar$1(d)||typeof d.value!="string"||d.tag&&d.tag!=="tag:yaml.org,2002:str")&&n(c??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(d.spaceBefore=!0),o&&(t.type==="scalar"&&t.source===""?d.comment=o:d.commentBefore=o),e.options.keepSourceTokens&&m&&(d.srcToken=t),d}function composeEmptyNode(e,t,r,n,{spaceBefore:s,comment:i,anchor:o,tag:u,end:c},d){const m={type:"scalar",offset:emptyScalarPosition(t,r,n),indent:-1,source:""},T=composeScalar(e,m,u,d);return o&&(T.anchor=o.source.substring(1),T.anchor===""&&d(o,"BAD_ALIAS","Anchor cannot be an empty string")),s&&(T.spaceBefore=!0),i&&(T.comment=i,T.range[2]=c),T}function composeAlias({options:e},{offset:t,source:r,end:n},s){const i=new Alias(r.substring(1));i.source===""&&s(t,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&s(t+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=t+r.length,u=resolveEnd(n,o,e.strict,s);return i.range=[t,o,u.offset],u.comment&&(i.comment=u.comment),i}function composeDoc(e,t,{offset:r,start:n,value:s,end:i},o){const u=Object.assign({_directives:t},e),c=new Document(void 0,u),d={atKey:!1,atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},m=resolveProps(n,{indicator:"doc-start",next:s??i?.[0],offset:r,onError:o,parentIndent:0,startOnNewline:!0});m.found&&(c.directives.docStart=!0,s&&(s.type==="block-map"||s.type==="block-seq")&&!m.hasNewline&&o(m.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=s?composeNode(d,s,m,o):composeEmptyNode(d,m.end,n,null,m,o);const T=c.contents.range[2],$=resolveEnd(i,T,!1,o);return $.comment&&(c.comment=$.comment),c.range=[r,T,$.offset],c}function getErrorPos(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:t,source:r}=e;return[t,t+(typeof r=="string"?r.length:1)]}function parsePrelude(e){let t="",r=!1,n=!1;for(let s=0;s<e.length;++s){const i=e[s];switch(i[0]){case"#":t+=(t===""?"":n?`

`:`
`)+(i.substring(1)||" "),r=!0,n=!1;break;case"%":e[s+1]?.[0]!=="#"&&(s+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:t,afterEmptyLine:n}}class Composer{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,s,i)=>{const o=getErrorPos(r);i?this.warnings.push(new YAMLWarning(o,n,s)):this.errors.push(new YAMLParseError(o,n,s))},this.directives=new Directives({version:t.version||"1.2"}),this.options=t}decorate(t,r){const{comment:n,afterEmptyLine:s}=parsePrelude(this.prelude);if(n){const i=t.contents;if(r)t.comment=t.comment?`${t.comment}
${n}`:n;else if(s||t.directives.docStart||!i)t.commentBefore=n;else if(isCollection$1(i)&&!i.flow&&i.items.length>0){let o=i.items[0];isPair(o)&&(o=o.key);const u=o.commentBefore;o.commentBefore=u?`${n}
${u}`:n}else{const o=i.commentBefore;i.commentBefore=o?`${n}
${o}`:n}}r?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:parsePrelude(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,r=!1,n=-1){for(const s of t)yield*this.next(s);yield*this.end(r,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(r,n,s)=>{const i=getErrorPos(t);i[0]+=r,this.onError(i,"BAD_DIRECTIVE",n,s)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const r=composeDoc(this.options,this.directives,t,this.onError);this.atDirectives&&!r.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const r=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const n="Unexpected doc-end without preceding document";this.errors.push(new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;const r=resolveEnd(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){const n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new YAMLParseError(getErrorPos(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const n=Object.assign({_directives:this.directives},this.options),s=new Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),s.range=[0,r,r],this.decorate(s,!1),yield s}}}function resolveAsScalar(e,t=!0,r){if(e){const n=(s,i,o)=>{const u=typeof s=="number"?s:Array.isArray(s)?s[0]:s.offset;if(r)r(u,i,o);else throw new YAMLParseError([u,u+1],i,o)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return resolveFlowScalar(e,t,n);case"block-scalar":return resolveBlockScalar({options:{strict:t}},e,n)}}return null}function createScalarToken(e,t){const{implicitKey:r=!1,indent:n,inFlow:s=!1,offset:i=-1,type:o="PLAIN"}=t,u=stringifyString({type:o,value:e},{implicitKey:r,indent:n>0?" ".repeat(n):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}}),c=t.end??[{type:"newline",offset:-1,indent:n,source:`
`}];switch(u[0]){case"|":case">":{const d=u.indexOf(`
`),m=u.substring(0,d),T=u.substring(d+1)+`
`,$=[{type:"block-scalar-header",offset:i,indent:n,source:m}];return addEndtoBlockProps($,c)||$.push({type:"newline",offset:-1,indent:n,source:`
`}),{type:"block-scalar",offset:i,indent:n,props:$,source:T}}case'"':return{type:"double-quoted-scalar",offset:i,indent:n,source:u,end:c};case"'":return{type:"single-quoted-scalar",offset:i,indent:n,source:u,end:c};default:return{type:"scalar",offset:i,indent:n,source:u,end:c}}}function setScalarValue(e,t,r={}){let{afterKey:n=!1,implicitKey:s=!1,inFlow:i=!1,type:o}=r,u="indent"in e?e.indent:null;if(n&&typeof u=="number"&&(u+=2),!o)switch(e.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const d=e.props[0];if(d.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=d.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const c=stringifyString({type:o,value:t},{implicitKey:s||u===null,indent:u!==null&&u>0?" ".repeat(u):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":setBlockScalarValue(e,c);break;case'"':setFlowScalarValue(e,c,"double-quoted-scalar");break;case"'":setFlowScalarValue(e,c,"single-quoted-scalar");break;default:setFlowScalarValue(e,c,"scalar")}}function setBlockScalarValue(e,t){const r=t.indexOf(`
`),n=t.substring(0,r),s=t.substring(r+1)+`
`;if(e.type==="block-scalar"){const i=e.props[0];if(i.type!=="block-scalar-header")throw new Error("Invalid block scalar header");i.source=n,e.source=s}else{const{offset:i}=e,o="indent"in e?e.indent:-1,u=[{type:"block-scalar-header",offset:i,indent:o,source:n}];addEndtoBlockProps(u,"end"in e?e.end:void 0)||u.push({type:"newline",offset:-1,indent:o,source:`
`});for(const c of Object.keys(e))c!=="type"&&c!=="offset"&&delete e[c];Object.assign(e,{type:"block-scalar",indent:o,props:u,source:s})}}function addEndtoBlockProps(e,t){if(t)for(const r of t)switch(r.type){case"space":case"comment":e.push(r);break;case"newline":return e.push(r),!0}return!1}function setFlowScalarValue(e,t,r){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=r,e.source=t;break;case"block-scalar":{const n=e.props.slice(1);let s=t.length;e.props[0].type==="block-scalar-header"&&(s-=e.props[0].source.length);for(const i of n)i.offset+=s;delete e.props,Object.assign(e,{type:r,source:t,end:n});break}case"block-map":case"block-seq":{const s={type:"newline",offset:e.offset+t.length,indent:e.indent,source:`
`};delete e.items,Object.assign(e,{type:r,source:t,end:[s]});break}default:{const n="indent"in e?e.indent:-1,s="end"in e&&Array.isArray(e.end)?e.end.filter(i=>i.type==="space"||i.type==="comment"||i.type==="newline"):[];for(const i of Object.keys(e))i!=="type"&&i!=="offset"&&delete e[i];Object.assign(e,{type:r,indent:n,source:t,end:s})}}}const stringify$1=e=>"type"in e?stringifyToken(e):stringifyItem(e);function stringifyToken(e){switch(e.type){case"block-scalar":{let t="";for(const r of e.props)t+=stringifyToken(r);return t+e.source}case"block-map":case"block-seq":{let t="";for(const r of e.items)t+=stringifyItem(r);return t}case"flow-collection":{let t=e.start.source;for(const r of e.items)t+=stringifyItem(r);for(const r of e.end)t+=r.source;return t}case"document":{let t=stringifyItem(e);if(e.end)for(const r of e.end)t+=r.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const r of e.end)t+=r.source;return t}}}function stringifyItem({start:e,key:t,sep:r,value:n}){let s="";for(const i of e)s+=i.source;if(t&&(s+=stringifyToken(t)),r)for(const i of r)s+=i.source;return n&&(s+=stringifyToken(n)),s}const BREAK=Symbol("break visit"),SKIP=Symbol("skip children"),REMOVE=Symbol("remove item");function visit(e,t){"type"in e&&e.type==="document"&&(e={start:e.start,value:e.value}),_visit(Object.freeze([]),e,t)}visit.BREAK=BREAK;visit.SKIP=SKIP;visit.REMOVE=REMOVE;visit.itemAtPath=(e,t)=>{let r=e;for(const[n,s]of t){const i=r?.[n];if(i&&"items"in i)r=i.items[s];else return}return r};visit.parentCollection=(e,t)=>{const r=visit.itemAtPath(e,t.slice(0,-1)),n=t[t.length-1][0],s=r?.[n];if(s&&"items"in s)return s;throw new Error("Parent collection not found")};function _visit(e,t,r){let n=r(t,e);if(typeof n=="symbol")return n;for(const s of["key","value"]){const i=t[s];if(i&&"items"in i){for(let o=0;o<i.items.length;++o){const u=_visit(Object.freeze(e.concat([[s,o]])),i.items[o],r);if(typeof u=="number")o=u-1;else{if(u===BREAK)return BREAK;u===REMOVE&&(i.items.splice(o,1),o-=1)}}typeof n=="function"&&s==="key"&&(n=n(t,e))}}return typeof n=="function"?n(t,e):n}const BOM="\uFEFF",DOCUMENT="",FLOW_END="",SCALAR="",isCollection=e=>!!e&&"items"in e,isScalar=e=>!!e&&(e.type==="scalar"||e.type==="single-quoted-scalar"||e.type==="double-quoted-scalar"||e.type==="block-scalar");function prettyToken(e){switch(e){case BOM:return"<BOM>";case DOCUMENT:return"<DOC>";case FLOW_END:return"<FLOW_END>";case SCALAR:return"<SCALAR>";default:return JSON.stringify(e)}}function tokenType(e){switch(e){case BOM:return"byte-order-mark";case DOCUMENT:return"doc-mode";case FLOW_END:return"flow-error-end";case SCALAR:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const cst=Object.freeze(Object.defineProperty({__proto__:null,BOM,DOCUMENT,FLOW_END,SCALAR,createScalarToken,isCollection,isScalar,prettyToken,resolveAsScalar,setScalarValue,stringify:stringify$1,tokenType,visit},Symbol.toStringTag,{value:"Module"}));function isEmpty(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const hexDigits=new Set("0123456789ABCDEFabcdef"),tagChars=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),flowIndicatorChars=new Set(",[]{}"),invalidAnchorChars=new Set(` ,[]{}
\r	`),isNotAnchorChar=e=>!e||invalidAnchorChars.has(e);class Lexer{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,r=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!r;let n=this.next??"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,r=this.buffer[t];for(;r===" "||r==="	";)r=this.buffer[++t];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let r=this.buffer[t];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+t];if(r==="\r"){const s=this.buffer[n+t+1];if(s===`
`||!s&&!this.atEnd)return t+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?t+n:-1}if(r==="-"||r==="."){const n=this.buffer.substr(t,3);if((n==="---"||n==="...")&&isEmpty(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===BOM&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let r=t.length,n=t.indexOf("#");for(;n!==-1;){const i=t[n-1];if(i===" "||i==="	"){r=n-1;break}else n=t.indexOf("#",n+1)}for(;;){const i=t[r-1];if(i===" "||i==="	")r-=1;else break}const s=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-s),this.pushNewline(),"stream"}if(this.atLineEnd()){const r=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-r),yield*this.pushNewline(),"stream"}return yield DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const r=this.peek(3);if((r==="---"||r==="...")&&isEmpty(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,r==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!isEmpty(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&isEmpty(r)){const n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(t[r]){case"#":yield*this.pushCount(t.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(isNotAnchorChar),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,r,n=-1;do t=yield*this.pushNewline(),t>0?(r=yield*this.pushSpaces(!1),this.indentValue=n=r):r=0,r+=yield*this.pushSpaces(!0);while(t+r>0);const s=this.getLine();if(s===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&s[0]!=="#"||n===0&&(s.startsWith("---")||s.startsWith("..."))&&isEmpty(s[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(s[0]==="]"||s[0]==="}")))return this.flowLevel=0,yield FLOW_END,yield*this.parseLineStart();let i=0;for(;s[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),s[i]){case void 0:return"flow";case"#":return yield*this.pushCount(s.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(isNotAnchorChar),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||isEmpty(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let r=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let i=0;for(;this.buffer[r-1-i]==="\\";)i+=1;if(i%2===0)break;r=this.buffer.indexOf('"',r+1)}const n=this.buffer.substring(0,r);let s=n.indexOf(`
`,this.pos);if(s!==-1){for(;s!==-1;){const i=this.continueScalar(s+1);if(i===-1)break;s=n.indexOf(`
`,i)}s!==-1&&(r=s-(n[s-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const r=this.buffer[++t];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>isEmpty(r)||r==="#")}*parseBlockScalar(){let t=this.pos-1,r=0,n;e:for(let i=this.pos;n=this.buffer[i];++i)switch(n){case" ":r+=1;break;case`
`:t=i,r=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(t+1);if(i===-1)break;t=this.buffer.indexOf(`
`,i)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let s=t+1;for(n=this.buffer[s];n===" ";)n=this.buffer[++s];if(n==="	"){for(;n==="	"||n===" "||n==="\r"||n===`
`;)n=this.buffer[++s];t=s-1}else if(!this.blockScalarKeep)do{let i=t-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const u=i;for(;o===" ";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+r>u)t=i;else break}while(!0);return yield SCALAR,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let r=this.pos-1,n=this.pos-1,s;for(;s=this.buffer[++n];)if(s===":"){const i=this.buffer[n+1];if(isEmpty(i)||t&&flowIndicatorChars.has(i))break;r=n}else if(isEmpty(s)){let i=this.buffer[n+1];if(s==="\r"&&(i===`
`?(n+=1,s=`
`,i=this.buffer[n+1]):r=n),i==="#"||t&&flowIndicatorChars.has(i))break;if(s===`
`){const o=this.continueScalar(n+1);if(o===-1)break;n=Math.max(n,o-2)}}else{if(t&&flowIndicatorChars.has(s))break;r=n}return!s&&!this.atEnd?this.setNext("plain-scalar"):(yield SCALAR,yield*this.pushToIndex(r+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,r){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(isNotAnchorChar))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,r=this.charAt(1);if(isEmpty(r)||t&&flowIndicatorChars.has(r))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,r=this.buffer[t];for(;!isEmpty(r)&&r!==">";)r=this.buffer[++t];return yield*this.pushToIndex(r===">"?t+1:t,!1)}else{let t=this.pos+1,r=this.buffer[t];for(;r;)if(tagChars.has(r))r=this.buffer[++t];else if(r==="%"&&hexDigits.has(this.buffer[t+1])&&hexDigits.has(this.buffer[t+2]))r=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||t&&n==="	");const s=r-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=r),s}*pushUntil(t){let r=this.pos,n=this.buffer[r];for(;!t(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}}class LineCounter{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let r=0,n=this.lineStarts.length;for(;r<n;){const i=r+n>>1;this.lineStarts[i]<t?r=i+1:n=i}if(this.lineStarts[r]===t)return{line:r+1,col:1};if(r===0)return{line:0,col:t};const s=this.lineStarts[r-1];return{line:r,col:t-s+1}}}}function includesToken(e,t){for(let r=0;r<e.length;++r)if(e[r].type===t)return!0;return!1}function findNonEmptyIndex(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function isFlowToken(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function getPrevProps(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function getFirstKeyStartProps(e){if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;e[++t]?.type==="space";);return e.splice(t,e.length)}function fixFlowSeqItems(e){if(e.start.type==="flow-seq-start")for(const t of e.items)t.sep&&!t.value&&!includesToken(t.start,"explicit-key-ind")&&!includesToken(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,isFlowToken(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Parser{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Lexer,this.onNewLine=t}*parse(t,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const n of this.lexer.lex(t,r))yield*this.next(n);r||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const r=tokenType(t);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const n=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&t?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const r=t??this.stack.pop();if(!r)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield r;else{const n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&fixFlowSeqItems(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{const s=n.items[n.items.length-1];if(s.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(s.sep)s.value=r;else{Object.assign(s,{key:r,sep:[]}),this.onKeyLine=!s.explicitKey;return}break}case"block-seq":{const s=n.items[n.items.length-1];s.value?n.items.push({start:[],value:r}):s.value=r;break}case"flow-collection":{const s=n.items[n.items.length-1];!s||s.value?n.items.push({start:[],key:r,sep:[]}):s.sep?s.value=r:Object.assign(s,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){const s=r.items[r.items.length-1];s&&!s.sep&&!s.value&&s.start.length>0&&findNonEmptyIndex(s.start)===-1&&(r.indent===0||s.start.every(i=>i.type!=="comment"||i.indent<r.indent))&&(n.type==="document"?n.end=s.start:n.items.push({start:s.start}),r.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{findNonEmptyIndex(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const r=this.startBlockValue(t);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const r=getPrevProps(this.peek(2)),n=getFirstKeyStartProps(r);let s;t.end?(s=t.end,s.push(this.sourceToken),delete t.end):s=[this.sourceToken];const i={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const r=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,r.value){const n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)t.items.push({start:[this.sourceToken]});else if(r.sep)r.sep.push(this.sourceToken);else{if(this.atIndentedComment(r.start,t.indent)){const s=t.items[t.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,r.start),s.push(this.sourceToken),t.items.pop();return}}r.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const n=!this.onKeyLine&&this.indent===t.indent,s=n&&(r.sep||r.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(s&&r.sep&&!r.value){const o=[];for(let u=0;u<r.sep.length;++u){const c=r.sep[u];switch(c.type){case"newline":o.push(u);break;case"space":break;case"comment":c.indent>t.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=r.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":s||r.value?(i.push(this.sourceToken),t.items.push({start:i}),this.onKeyLine=!0):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"explicit-key-ind":!r.sep&&!r.explicitKey?(r.start.push(this.sourceToken),r.explicitKey=!0):s||r.value?(i.push(this.sourceToken),t.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(r.explicitKey)if(r.sep)if(r.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(includesToken(r.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(isFlowToken(r.key)&&!includesToken(r.sep,"newline")){const o=getFirstKeyStartProps(r.start),u=r.key,c=r.sep;c.push(this.sourceToken),delete r.key,delete r.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:u,sep:c}]})}else i.length>0?r.sep=r.sep.concat(i,this.sourceToken):r.sep.push(this.sourceToken);else if(includesToken(r.start,"newline"))Object.assign(r,{key:null,sep:[this.sourceToken]});else{const o=getFirstKeyStartProps(r.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else r.sep?r.value||s?t.items.push({start:i,key:null,sep:[this.sourceToken]}):includesToken(r.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);s||r.value?(t.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):r.sep?this.stack.push(o):(Object.assign(r,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(t);if(o){if(o.type==="block-seq"){if(!r.explicitKey&&r.sep&&!includesToken(r.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else n&&t.items.push({start:i});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const r=t.items[t.items.length-1];switch(this.type){case"newline":if(r.value){const n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(r.start,t.indent)){const s=t.items[t.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,r.start),s.push(this.sourceToken),t.items.pop();return}}r.start.push(this.sourceToken)}return;case"anchor":case"tag":if(r.value||this.indent<=t.indent)break;r.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;r.value||includesToken(r.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return}if(this.indent>t.indent){const n=this.startBlockValue(t);if(n){this.stack.push(n);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const r=t.items[t.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n?.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?t.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?t.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const s=this.flowScalar(this.type);!r||r.value?t.items.push({start:[],key:s,sep:[]}):r.sep?this.stack.push(s):Object.assign(r,{key:s,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===t.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){const s=getPrevProps(n),i=getFirstKeyStartProps(s);fixFlowSeqItems(t);const o=t.end.splice(1,t.end.length);o.push(this.sourceToken);const u={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:i,key:t,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=u}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const r=getPrevProps(t),n=getFirstKeyStartProps(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const r=getPrevProps(t),n=getFirstKeyStartProps(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,r){return this.type!=="comment"||this.indent<=r?!1:t.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function parseOptions(e){const t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new LineCounter||null,prettyErrors:t}}function parseAllDocuments(e,t={}){const{lineCounter:r,prettyErrors:n}=parseOptions(t),s=new Parser(r?.addNewLine),i=new Composer(t),o=Array.from(i.compose(s.parse(e)));if(n&&r)for(const u of o)u.errors.forEach(prettifyError(e,r)),u.warnings.forEach(prettifyError(e,r));return o.length>0?o:Object.assign([],{empty:!0},i.streamInfo())}function parseDocument(e,t={}){const{lineCounter:r,prettyErrors:n}=parseOptions(t),s=new Parser(r?.addNewLine),i=new Composer(t);let o=null;for(const u of i.compose(s.parse(e),!0,e.length))if(!o)o=u;else if(o.options.logLevel!=="silent"){o.errors.push(new YAMLParseError(u.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(o.errors.forEach(prettifyError(e,r)),o.warnings.forEach(prettifyError(e,r))),o}function parse(e,t,r){let n;typeof t=="function"?n=t:r===void 0&&t&&typeof t=="object"&&(r=t);const s=parseDocument(e,r);if(!s)return null;if(s.warnings.forEach(i=>warn$1(s.options.logLevel,i)),s.errors.length>0){if(s.options.logLevel!=="silent")throw s.errors[0];s.errors=[]}return s.toJS(Object.assign({reviver:n},r))}function stringify(e,t,r){let n=null;if(typeof t=="function"||Array.isArray(t)?n=t:r===void 0&&t&&(r=t),typeof r=="string"&&(r=r.length),typeof r=="number"){const s=Math.round(r);r=s<1?void 0:s>8?{indent:8}:{indent:s}}if(e===void 0){const{keepUndefined:s}=r??t??{};if(!s)return}return isDocument(e)&&!n?e.toString(r):new Document(e,n,r).toString(r)}const YAML=Object.freeze(Object.defineProperty({__proto__:null,Alias,CST:cst,Composer,Document,Lexer,LineCounter,Pair,Parser,Scalar,Schema,YAMLError,YAMLMap,YAMLParseError,YAMLSeq,YAMLWarning,isAlias,isCollection:isCollection$1,isDocument,isMap,isNode,isPair,isScalar:isScalar$1,isSeq,parse,parseAllDocuments,parseDocument,stringify,visit:visit$1,visitAsync},Symbol.toStringTag,{value:"Module"}));var __defProp$2=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(e,t,r)=>t in e?__defProp$2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues$2=(e,t)=>{for(var r in t||(t={}))__hasOwnProp$2.call(t,r)&&__defNormalProp$2(e,r,t[r]);if(__getOwnPropSymbols$2)for(var r of __getOwnPropSymbols$2(t))__propIsEnum$2.call(t,r)&&__defNormalProp$2(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__async=(e,t,r)=>new Promise((n,s)=>{var i=c=>{try{u(r.next(c))}catch(d){s(d)}},o=c=>{try{u(r.throw(c))}catch(d){s(d)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,o);u((r=r.apply(e,t)).next())}),TaskQueue=class Vm{constructor(t){this.executors=t,this.taskKeyQueue=[],this.taskMap=new Map,this.idleListeners=[],this.processing=!1,this.stopped=!1}static initialize(t){if(t.size===0)throw new Error("Must provide at least one executor");this.instance=new Vm(t)}static getInstance(){if(!this.instance)throw new Error("TaskQueue not initialized; must call `initialize` first");return this.instance}addTask(t){if(!this.stopped){if(this.taskMap.has(t.key))throw new Error(`Task already added for key ${t.key}`);this.taskKeyQueue.push(t.key),this.taskMap.set(t.key,t),this.processTasksIfNeeded()}}cancelTask(t){const r=this.taskKeyQueue.indexOf(t);r>=0&&this.taskKeyQueue.splice(r,1),this.taskMap.delete(t)}onIdle(t){this.idleListeners.push(t)}removeIdleListener(t){this.idleListeners.splice(this.idleListeners.indexOf(t),1)}notifyIdle(t){for(const r of this.idleListeners)r(t)}shutdown(){this.stopped=!0,this.taskKeyQueue.length=0,this.taskMap.clear()}processTasksIfNeeded(){!this.stopped&&!this.processing&&(this.processing=!0,setTimeout(()=>{this.processNextTasks()}))}processNextTasks(){return __async(this,null,function*(){const t=this.taskKeyQueue.splice(0,this.executors.size);if(t.length===0){this.processing=!1,this.stopped||this.notifyIdle();return}const r=[],n=Array.from(this.executors.keys());for(const s of t){const i=this.taskMap.get(s);if(!i)continue;this.taskMap.delete(s);const o=n.shift(),u=this.executors.get(o);if(!u)throw new Error(`No executor found for key ${o}`);r.push(u.execute(i))}try{yield Promise.all(r)}catch(s){this.stopped||(this.shutdown(),this.notifyIdle(s));return}this.taskKeyQueue.length>0?setTimeout(()=>{this.processNextTasks()}):(this.processing=!1,this.stopped||this.notifyIdle())})}};function createExecutor(e,t){return{execute:r=>__async(this,null,function*(){return r.process({L:e,R:t})})}}var CheckDataCoordinator=class{constructor(e){this.taskQueue=e}requestDataset(e,t,r,n){const s={key:e,kind:"check-data-coordinator",process:i=>__async(this,null,function*(){const c=(yield i.R.getDatasetsForScenario(t,[r])).datasetMap.get(r);n(c)})};this.taskQueue.addTask(s)}cancelRequest(e){this.taskQueue.cancelTask(e)}};function createCheckDataCoordinator(){return new CheckDataCoordinator(TaskQueue.getInstance())}function symbolForPredicateOp(e){switch(e){case"gt":return">";case"gte":return">=";case"lt":return"<";case"lte":return"<=";case"eq":return"==";case"approx":return"";default:Tr(e)}}function buildCheckReport(e,t){const r=[];for(const n of e.groups){const s=[];for(const i of n.tests){let o="passed";const u=[];for(const c of i.scenarios){let d="passed";c.checkScenario.spec===void 0&&(o="error",d="error");const m=[];for(const T of c.datasets){let $="passed";T.checkDataset.datasetKey===void 0&&(o="error",d="error",$="error");const C=[];for(const D of T.predicates){const F=D.checkKey,g=t.get(F);g?(g.status!=="passed"&&(g.status==="error"?(o="error",d="error",$="error"):g.status==="failed"&&o!=="error"?(o="failed",d="failed",$="failed"):g.status==="skipped"&&o==="passed"&&(o="skipped",d="skipped",$="skipped")),C.push(predicateReport(D,F,g))):C.push(predicateReport(D,F,{status:"passed"}))}m.push({checkDataset:T.checkDataset,status:$,predicates:C})}u.push({checkScenario:c.checkScenario,status:d,datasets:m})}s.push({name:i.name,status:o,scenarios:u})}r.push({name:n.name,tests:s})}return{groups:r}}function predicateReport(e,t,r){if(r.status==="error")return{checkKey:t,result:r,opRefs:new Map,opValues:[]};const n=e.action.predicateSpec,s=new Map,i=[];function o(u){var c,d;const m=symbolForPredicateOp(u),T=n[u];if(T!==void 0){let $,C;if(typeof T=="number")$={kind:"constant",value:T},C=`${m} ${T}`;else{const D=(c=e.dataRefs)==null?void 0:c.get(u);if(!D)return;$={kind:"data",dataRef:D},C=`${m} '${D.dataset.name}'`;const g=(d=D.scenario)==null?void 0:d.spec;if(!g)return;T.scenario==="inherit"?C+=" (w/ same scenario)":g.kind==="all-inputs"&&g.position==="at-default"?C+=" (w/ default scenario)":C+=" (w/ configured scenario)"}if(u==="approx"){const D=n.tolerance||.1;C+=` ${D}`}s.set(u,$),i.push(C)}}return o("gt"),o("gte"),o("lt"),o("lte"),o("eq"),o("approx"),i.length===0&&i.push("INVALID PREDICATE"),{checkKey:t,result:r,opRefs:s,opValues:i,time:n.time,tolerance:n.tolerance}}function scenarioMessage(e,t){const r=e.checkScenario;if(r.spec===void 0)if(r.error)switch(r.error.kind){case"unknown-input-group":return`error: input group ${t(r.error.name)} is unknown`;case"empty-input-group":return`error: input group ${t(r.error.name)} is empty`;default:Tr(r.error.kind)}else{const i=r.inputDescs.filter(u=>u.inputVar===void 0).map(u=>t(u.name));return`error: unknown ${i.length===1?"input":"inputs"} ${i.join(", ")}`}function n(i){switch(i){case"at-default":return"default";case"at-minimum":return"minimum";case"at-maximum":return"maximum";default:Tr(i)}}function s(i){let o=t(i.name);return i.position?(o+=` is at ${t(n(i.position))}`,i.value!==void 0&&(o+=` (${i.value})`)):i.value!==void 0&&(o+=` is ${t(i.value.toString())}`),o}if(r.spec.kind==="all-inputs"){const i=r.spec.position;return`when ${t("all inputs")} are at ${t(n(i))}...`}else if(r.inputGroupName){let i="at-default";r.spec.settings[0].kind==="position"&&(i=r.spec.settings[0].position);const o=r.inputGroupName;return`when all inputs in ${t(o)} are at ${t(n(i))}...`}else return`when ${r.inputDescs.map(s).join(" and ")}...`}function datasetMessage(e,t){const r=e.checkDataset;return r.datasetKey===void 0?`error: ${t(r.name)} did not match any datasets`:`then ${t(r.name)}...`}function predicateMessage(e,t){const r=e.result;if(r.status==="error"){if(r.message)return`error: ${e.result.message}`;if(r.errorInfo)switch(r.errorInfo.kind){case"unknown-dataset":return`error: referenced dataset ${t(r.errorInfo.name)} is unknown`;case"unknown-input":return`error: referenced input ${t(r.errorInfo.name)} is unknown`;case"unknown-input-group":return`error: referenced input group ${t(r.errorInfo.name)} is unknown`;case"empty-input-group":return`error: referenced input group ${t(r.errorInfo.name)} is empty`;default:Tr(r.errorInfo.kind)}else return"unknown error"}let s=`should be ${e.opValues.map(t).join(" and ")}`;if(e.time!==void 0)if(typeof e.time=="number")s+=` in ${t(e.time.toString())}`;else{let i,o,u,c;if(Array.isArray(e.time)){const d=e.time;i=d[0],o=d[1],u=!0,c=!0}else{const d=e.time;d.after_excl!==void 0?(i=d.after_excl,u=!1):d.after_incl!==void 0&&(i=d.after_incl,u=!0),d.before_excl!==void 0?(o=d.before_excl,c=!1):d.before_incl!==void 0&&(o=d.before_incl,c=!0)}if(i!==void 0&&o!==void 0){const T=`${u?"[":"("}${i}, ${o}${c?"]":")"}`;s+=` in ${t(T)}`}else i!==void 0?s+=` ${u?"in/after":"after"} ${t(i.toString())}`:o!==void 0&&(s+=` ${c?"in/before":"before"} ${t(o.toString())}`)}if(e.result.status==="failed"){if(e.result.failValue!==void 0){if(s+=` but got ${t(e.result.failValue.toString())}`,e.result.failRefValue!==void 0){const o=`${symbolForPredicateOp(e.result.failOp)} ${e.result.failRefValue.toString()}`;s+=` (expected ${t(o)})`}}else e.result.message&&(s+=` but got ${t(e.result.message)}`);e.result.failTime!==void 0&&(s+=` in ${t(e.result.failTime.toString())}`)}else e.result.status==="error"&&e.result.message&&(s+=` but got error: ${t(e.result.message)}`);return s}var check_schema_default={$schema:"http://json-schema.org/draft-07/schema#",title:"Model Check Test",type:"array",description:"A group of tests.",items:{$ref:"#/$defs/group"},$defs:{group:{type:"object",additionalProperties:!1,properties:{describe:{type:"string"},tests:{type:"array",items:{$ref:"#/$defs/test"}}},required:["describe","tests"]},test:{type:"object",additionalProperties:!1,properties:{it:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/scenario"},minItems:1},datasets:{type:"array",items:{$ref:"#/$defs/dataset"},minItems:1},predicates:{type:"array",items:{$ref:"#/$defs/predicate"},minItems:1}},required:["it","datasets","predicates"]},scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_with_inputs_in_group_at_position"},{$ref:"#/$defs/scenario_preset"},{$ref:"#/$defs/scenario_expand_for_each_input_in_group"}]},scenario_position:{type:"string",enum:["min","max","default"]},scenario_with_input_at_position:{type:"object",additionalProperties:!1,properties:{with:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with","at"]},scenario_with_input_at_value:{type:"object",additionalProperties:!1,properties:{with:{type:"string"},at:{type:"number"}},required:["with","at"]},scenario_input_at_position:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["input","at"]},scenario_input_at_value:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{type:"number"}},required:["input","at"]},scenario_input_setting:{oneOf:[{$ref:"#/$defs/scenario_input_at_position"},{$ref:"#/$defs/scenario_input_at_value"}]},scenario_input_setting_array:{type:"array",items:{$ref:"#/$defs/scenario_input_setting"},minItems:1},scenario_with_multiple_input_settings:{type:"object",additionalProperties:!1,properties:{with:{$ref:"#/$defs/scenario_input_setting_array"}},required:["with"]},scenario_with_inputs_in_preset_at_position:{type:"object",additionalProperties:!1,properties:{with_inputs:{type:"string",enum:["all"]},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs","at"]},scenario_with_inputs_in_group_at_position:{type:"object",additionalProperties:!1,properties:{with_inputs_in:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs_in","at"]},scenario_preset:{type:"object",additionalProperties:!1,properties:{preset:{type:"string",enum:["matrix"]}},required:["preset"]},scenario_expand_for_each_input_in_group:{type:"object",additionalProperties:!1,properties:{scenarios_for_each_input_in:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["scenarios_for_each_input_in","at"]},dataset:{oneOf:[{$ref:"#/$defs/dataset_name"},{$ref:"#/$defs/dataset_group"},{$ref:"#/$defs/dataset_matching"}]},dataset_name:{type:"object",additionalProperties:!1,properties:{name:{type:"string"},source:{type:"string"}},required:["name"]},dataset_group:{type:"object",additionalProperties:!1,properties:{group:{type:"string"}},required:["group"]},dataset_matching:{type:"object",additionalProperties:!1,properties:{matching:{type:"object",additionalProperties:!1,properties:{type:{type:"string"}},required:["type"]}},required:["matching"]},predicate:{type:"object",oneOf:[{$ref:"#/$defs/predicate_gt"},{$ref:"#/$defs/predicate_gte"},{$ref:"#/$defs/predicate_lt"},{$ref:"#/$defs/predicate_lte"},{$ref:"#/$defs/predicate_gt_lt"},{$ref:"#/$defs/predicate_gt_lte"},{$ref:"#/$defs/predicate_gte_lt"},{$ref:"#/$defs/predicate_gte_lte"},{$ref:"#/$defs/predicate_eq"},{$ref:"#/$defs/predicate_approx"}]},predicate_gt:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt"]},predicate_gte:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte"]},predicate_lt:{type:"object",additionalProperties:!1,properties:{lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["lt"]},predicate_lte:{type:"object",additionalProperties:!1,properties:{lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["lte"]},predicate_gt_lt:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt","lt"]},predicate_gt_lte:{type:"object",additionalProperties:!1,properties:{gt:{$ref:"#/$defs/predicate_ref"},lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gt","lte"]},predicate_gte_lt:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},lt:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte","lt"]},predicate_gte_lte:{type:"object",additionalProperties:!1,properties:{gte:{$ref:"#/$defs/predicate_ref"},lte:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["gte","lte"]},predicate_eq:{type:"object",additionalProperties:!1,properties:{eq:{$ref:"#/$defs/predicate_ref"},time:{$ref:"#/$defs/predicate_time"}},required:["eq"]},predicate_approx:{type:"object",additionalProperties:!1,properties:{approx:{$ref:"#/$defs/predicate_ref"},tolerance:{type:"number"},time:{$ref:"#/$defs/predicate_time"}},required:["approx"]},predicate_ref:{oneOf:[{$ref:"#/$defs/predicate_ref_constant"},{$ref:"#/$defs/predicate_ref_data"}]},predicate_ref_constant:{type:"number"},predicate_ref_data:{type:"object",additionalProperties:!1,properties:{dataset:{$ref:"#/$defs/predicate_ref_data_dataset"},scenario:{$ref:"#/$defs/predicate_ref_data_scenario"}},required:["dataset"]},predicate_ref_data_dataset:{oneOf:[{$ref:"#/$defs/dataset_name"},{$ref:"#/$defs/predicate_ref_data_dataset_special"}]},predicate_ref_data_dataset_special:{type:"string",enum:["inherit"]},predicate_ref_data_scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_with_inputs_in_group_at_position"},{$ref:"#/$defs/predicate_ref_data_scenario_special"}]},predicate_ref_data_scenario_special:{type:"string",enum:["inherit"]},predicate_time:{oneOf:[{$ref:"#/$defs/predicate_time_single"},{$ref:"#/$defs/predicate_time_pair"},{$ref:"#/$defs/predicate_time_gt"},{$ref:"#/$defs/predicate_time_gte"},{$ref:"#/$defs/predicate_time_lt"},{$ref:"#/$defs/predicate_time_lte"},{$ref:"#/$defs/predicate_time_gt_lt"},{$ref:"#/$defs/predicate_time_gt_lte"},{$ref:"#/$defs/predicate_time_gte_lt"},{$ref:"#/$defs/predicate_time_gte_lte"}]},predicate_time_single:{type:"number"},predicate_time_pair:{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},predicate_time_gt:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"}},required:["after_excl"]},predicate_time_gte:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"}},required:["after_incl"]},predicate_time_lt:{type:"object",additionalProperties:!1,properties:{before_excl:{type:"number"}},required:["before_excl"]},predicate_time_lte:{type:"object",additionalProperties:!1,properties:{before_incl:{type:"number"}},required:["before_incl"]},predicate_time_gt_lt:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"},before_excl:{type:"number"}},required:["after_excl","before_excl"]},predicate_time_gt_lte:{type:"object",additionalProperties:!1,properties:{after_excl:{type:"number"},before_incl:{type:"number"}},required:["after_excl","before_incl"]},predicate_time_gte_lt:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"},before_excl:{type:"number"}},required:["after_incl","before_excl"]},predicate_time_gte_lte:{type:"object",additionalProperties:!1,properties:{after_incl:{type:"number"},before_incl:{type:"number"}},required:["after_incl","before_incl"]}}};function parseTestYaml(e){const t=[],n=new Ajv2().compile(check_schema_default);for(const i of e){const o=YAML.parse(i);if(n(o))for(const u of o)t.push(u);else{let u="Failed to parse YAML check definitions";for(const c of n.errors||[])c.message&&(u+=`
${c.message}`);return err$3(new Error(u))}}return ok$3({groups:t})}var passed={status:"passed"},gt$1=(e,t)=>e>t,gte=(e,t)=>e>=t,lt$1=(e,t)=>e<t,lte=(e,t)=>e<=t,eq=(e,t)=>e===t,approx=e=>(r,n)=>r>=n-e&&r<=n+e;function checkFunc(e){function t(s,i){const o=e[s];o!==void 0&&(typeof o=="number"?r.push((u,c)=>i(u,o)?passed:{status:"failed",failValue:u,failTime:c}):r.push((u,c,d)=>{const m=d?.get(s);if(m===void 0)return{status:"error",message:"unhandled data reference"};const T=m.get(c);return T!==void 0?i(u,T)?passed:{status:"failed",failValue:u,failOp:s,failRefValue:T,failTime:c}:{status:"failed",message:"no reference value",failTime:c}}))}const r=[];if(t("gt",gt$1),t("gte",gte),t("lt",lt$1),t("lte",lte),t("eq",eq),e.approx!==void 0){const s=e.tolerance||.1;t("approx",approx(s))}const n=(s,i,o)=>{for(const u of r){const c=u(s,i,o);if(c.status!=="passed")return c}return passed};if(e.time!==void 0&&typeof e.time=="number"){const s=e.time;return(i,o)=>{const u=i.get(s);return u!==void 0?n(u,s,o):{status:"failed",message:"no value",failTime:s}}}else{let s;if(e.time!==void 0)if(Array.isArray(e.time)){const i=e.time;s=o=>o>=i[0]&&o<=i[1]}else{const i=[],o=e.time;o.after_excl!==void 0&&i.push(u=>u>o.after_excl),o.after_incl!==void 0&&i.push(u=>u>=o.after_incl),o.before_excl!==void 0&&i.push(u=>u<o.before_excl),o.before_incl!==void 0&&i.push(u=>u<=o.before_incl),s=u=>{for(const c of i)if(!c(u))return!1;return!0}}else s=()=>!0;return(i,o)=>{for(const[u,c]of i)if(s(u)){const d=n(c,u,o);if(d.status!=="passed")return d}return passed}}}function actionForPredicate(e){return{predicateSpec:e,run:checkFunc(e)}}function expandDatasets(e,t){var r;let n;if(t.name?n=matchByName(e,t.name,t.source):t.group?n=matchByGroup(e,t.group):(r=t.matching)!=null&&r.type&&(n=matchByType(e,t.matching.type)),n.error)return[{name:n.error.name,error:n.error.kind}];const s=n.matches,i=[];for(const o of s)o.outputVar?i.push({datasetKey:o.datasetKey,name:o.outputVar.varName}):o.implVar&&i.push({datasetKey:o.datasetKey,name:o.implVar.varName});return i}function matchByName(e,t,r){var n;const s=t.toLowerCase(),i=r?.toLowerCase();for(const[o,u]of e.outputVars)if(((n=u.sourceName)==null?void 0:n.toLowerCase())===i&&u.varName.toLowerCase()===s)return{matches:[{datasetKey:o,outputVar:u}]};for(const[o,u]of e.implVars)if(u.varName.toLowerCase()===s)return{matches:[{datasetKey:o,implVar:u}]};return{matches:[],error:{kind:"no-matches-for-dataset",name:t}}}function matchByGroup(e,t){let r,n;if(e.datasetGroups){const i=t.toLowerCase();for(const[o,u]of e.datasetGroups)if(o.toLowerCase()===i){r=o,n=u;break}}if(r===void 0)return{matches:[],error:{kind:"no-matches-for-group",name:t}};const s=[];for(const i of n){const o=e.outputVars.get(i);if(o){s.push({datasetKey:i,outputVar:o});continue}const u=e.implVars.get(i);if(u){s.push({datasetKey:i,implVar:u});continue}return{matches:[],error:{kind:"no-matches-for-dataset",name:i}}}return s.length===0?{matches:[],error:{kind:"no-matches-for-group",name:r}}:{matches:s}}function matchByType(e,t){const r=[];for(const[n,s]of e.implVars)s.varType===t&&r.push({datasetKey:n,implVar:s});return r.length===0?{matches:[],error:{kind:"no-matches-for-type",name:t}}:{matches:r}}function positionSetting(e,t){return{kind:"position",inputVarId:e,position:t}}function valueSetting(e,t){return{kind:"value",inputVarId:e,value:t}}function inputSettingsSpec(e){return{kind:"input-settings",uid:`inputs_${e.map(n=>{switch(n.kind){case"position":return`${n.inputVarId}_at_${keyForInputPosition(n.position)}`;case"value":return`${n.inputVarId}_at_${n.value}`;default:assertNeverExports$2.assertNever(n)}}).sort().join("_")}`,settings:e}}function inputAtPositionSpec(e,t){return inputSettingsSpec([positionSetting(e,t)])}function allInputsAtPositionSpec(e){return{kind:"all-inputs",uid:`all_inputs_at_${keyForInputPosition(e)}`,position:e}}function keyForInputPosition(e){switch(e){case"at-default":return"default";case"at-minimum":return"min";case"at-maximum":return"max";default:assertNeverExports$2.assertNever(e)}}function expandScenarios(e,t,r){if(t.length===0)return checkScenariosFromSpec(e,{with_inputs:"all",at:"default"},r);const n=[];for(const s of t)n.push(...checkScenariosFromSpec(e,s,r));return n}function inputPosition(e){switch(e){case"default":return"at-default";case"min":return"at-minimum";case"max":return"at-maximum";default:return}}function inputValueAtPosition(e,t){switch(t){case"at-default":return e.defaultValue;case"at-minimum":return e.minValue;case"at-maximum":return e.maxValue;default:Tr(t)}}function inputDescAtPosition(e,t){return{name:e.varName,inputVar:e,position:t,value:inputValueAtPosition(e,t)}}function inputDescAtValue(e,t){return{name:e.varName,inputVar:e,value:t}}function inputDescForVar(e,t){if(typeof t=="number")return inputDescAtValue(e,t);{const r=inputPosition(t);return inputDescAtPosition(e,r)}}function inputDescForName(e,t,r){const n=t.toLowerCase(),s=[...e.inputVars.values()].find(i=>i.varName.toLowerCase()===n);return s?inputDescForVar(s,r):{name:t}}function groupForName(e,t){if(e.inputGroups){const r=t.toLowerCase();for(const[n,s]of e.inputGroups)if(n.toLowerCase()===r)return[n,s]}}function errorScenarioForInputGroup(e,t){return{inputDescs:[],error:{kind:e,name:t}}}function checkScenarioWithAllInputsAtPosition(e){return{spec:allInputsAtPositionSpec(e),inputDescs:[]}}function checkScenarioWithInputAtPosition(e,t){const r=e.varId;return{spec:inputAtPositionSpec(r,t),inputDescs:[inputDescAtPosition(e,t)]}}function checkScenarioForInputDescs(e,t){let r;if(t.every(n=>n.inputVar!==void 0)){const n=t.map(s=>{const i=s.inputVar.varId;return s.position?positionSetting(i,s.position):valueSetting(i,s.value)});r=inputSettingsSpec(n)}else r=void 0;return{spec:r,inputGroupName:e,inputDescs:t}}function checkScenarioForInputSpecs(e,t){const r=t.map(n=>inputDescForName(e,n.input,n.at));return checkScenarioForInputDescs(void 0,r)}function checkScenarioMatrix(e,t){const r=[];if(r.push(checkScenarioWithAllInputsAtPosition("at-default")),!t){r.push(checkScenarioWithAllInputsAtPosition("at-minimum")),r.push(checkScenarioWithAllInputsAtPosition("at-maximum"));for(const n of e.inputVars.values())r.push(checkScenarioWithInputAtPosition(n,"at-minimum")),r.push(checkScenarioWithInputAtPosition(n,"at-maximum"))}return r}function checkScenarioWithAllInputsInGroupAtPosition(e,t,r){const n=groupForName(e,t);if(n===void 0)return errorScenarioForInputGroup("unknown-input-group",t);const[s,i]=n;if(i.length===0)return errorScenarioForInputGroup("empty-input-group",s);const o=[];for(const u of i)o.push(inputDescForVar(u,r));return checkScenarioForInputDescs(s,o)}function checkScenariosForEachInputInGroup(e,t,r){const n=groupForName(e,t);if(n===void 0)return[errorScenarioForInputGroup("unknown-input-group",t)];const[s,i]=n;if(i.length===0)return[errorScenarioForInputGroup("empty-input-group",s)];const o=[];for(const u of i){const c=inputDescForVar(u,r);o.push(checkScenarioForInputDescs(void 0,[c]))}return o}function checkScenariosFromSpec(e,t,r){if(t.preset==="matrix")return checkScenarioMatrix(e,r);if(t.scenarios_for_each_input_in!==void 0){const n=t.scenarios_for_each_input_in,s=t.at;return checkScenariosForEachInputInGroup(e,n,s)}if(t.with!==void 0)if(Array.isArray(t.with)){const n=t.with;return[checkScenarioForInputSpecs(e,n)]}else{const n={input:t.with,at:t.at};return[checkScenarioForInputSpecs(e,[n])]}if(t.with_inputs==="all"){const n=inputPosition(t.at);return[checkScenarioWithAllInputsAtPosition(n)]}if(t.with_inputs_in!==void 0){const n=t.with_inputs_in,s=t.at;return[checkScenarioWithAllInputsInGroupAtPosition(e,n,s)]}throw new Error(`Unhandled scenario spec: ${JSON.stringify(t)}`)}var CheckPlanner=class{constructor(e){this.modelSpec=e,this.groups=[],this.tasks=new Map,this.dataRefs=new Map,this.checkKey=1}addAllChecks(e,t){function r(s,i){return`${s.toLowerCase()} :: ${i.toLowerCase()}`}const n=new Set(t.map(s=>r(s.groupName,s.testName)));for(const s of e.groups){const i=s.describe,o=[];for(const u of s.tests){const c=u.it,d=n.has(r(i,c)),T=expandScenarios(this.modelSpec,u.scenarios||[],!1),$=[];for(const F of u.datasets)$.push(...expandDatasets(this.modelSpec,F));const C=[];for(const F of u.predicates)C.push(actionForPredicate(F));const D=[];for(const F of T){if(F.spec===void 0){D.push({checkScenario:F,datasets:[]});continue}const g=[];for(const q of $){if(q.datasetKey===void 0){g.push({checkDataset:q,predicates:[]});continue}const x=[];for(const P of C){const K=this.addDataRefs(P.predicateSpec,F,q),L=this.checkKey++;x.push({checkKey:L,action:P,dataRefs:K}),this.tasks.set(L,{scenario:F,dataset:q,action:P,dataRefs:K,skip:d})}g.push({checkDataset:q,predicates:x})}D.push({checkScenario:F,datasets:g})}o.push({name:c,scenarios:D})}this.groups.push({name:i,tests:o})}}buildPlan(){return{groups:this.groups,tasks:this.tasks,dataRefs:this.dataRefs}}addDataRefs(e,t,r){let n;const s=i=>{const o=e[i];if(o===void 0||typeof o=="number")return;let u;if(typeof o.dataset=="string")switch(o.dataset){case"inherit":u=r;break;default:Tr(o.dataset)}else{const T={name:o.dataset.name},$=expandDatasets(this.modelSpec,T);$.length===1?u=$[0]:u={name:o.dataset.name}}let c;if(typeof o.scenario=="string")switch(o.scenario){case"inherit":c=t;break;default:Tr(o.scenario)}else{const T=o.scenario?[o.scenario]:[],$=expandScenarios(this.modelSpec,T,!0);$.length===1&&(c=$[0]),c===void 0&&(c={inputDescs:[]})}let d;c.spec&&u.datasetKey&&(d=`${c.spec.uid}::${u.datasetKey}`);const m={key:d,dataset:u,scenario:c};d&&this.dataRefs.set(d,m),n===void 0&&(n=new Map),n.set(i,m)};return s("gt"),s("gte"),s("lt"),s("lte"),s("eq"),s("approx"),n}};function checkReportFromSummary(e,t,r=[]){const n=parseTestYaml(e.tests);if(n.isErr())return;const s=n.value,i=new CheckPlanner(e.bundle.modelSpec);i.addAllChecks(s,r);const o=i.buildPlan(),u=new Map;for(const c of t.predicateSummaries)u.set(c.checkKey,c.result);return buildCheckReport(o,u)}var ComparisonDataCoordinator=class{constructor(e){this.taskQueue=e}requestDatasetMaps(e,t,r,n,s,i,o){function u(d,m){return __async(this,null,function*(){if(m)return d.getDatasetsForScenario(m,i)})}const c={key:e,kind:"comparison-data-coordinator",process:d=>__async(this,null,function*(){const m=t==="left"?d.L:d.R,T=n==="left"?d.L:d.R;let $,C;if(m===T)$=yield u(m,r),C=yield u(T,s);else{const D=yield Promise.all([u(m,r),u(T,s)]);$=D[0],C=D[1]}o($?.datasetMap,C?.datasetMap)})};this.taskQueue.addTask(c)}requestGraphData(e,t,r,n,s,i,o){function u(d,m){return __async(this,null,function*(){if(m)return d.getGraphDataForScenario(m,i)})}const c={key:e,kind:"comparison-data-coordinator",process:d=>__async(this,null,function*(){const m=t==="left"?d.L:d.R,T=n==="left"?d.L:d.R;let $,C;if(m===T)$=yield u(m,r),C=yield u(T,s);else{const D=yield Promise.all([u(m,r),u(T,s)]);$=D[0],C=D[1]}o($,C)})};this.taskQueue.addTask(c)}cancelRequest(e){this.taskQueue.cancelTask(e)}};function createComparisonDataCoordinator(){return new ComparisonDataCoordinator(TaskQueue.getInstance())}function diffDatasets(e,t){let r=Number.MAX_VALUE,n=Number.MIN_VALUE,s=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MAX_VALUE,u=Number.MIN_VALUE,c=Number.MAX_VALUE,d=-1,m,T=0,$=0;if(e&&t){const x=new Set([...e.keys(),...t.keys()]);for(const P of x){const K=e.get(P);K!==void 0&&(K<r&&(r=K),K>n&&(n=K),K<o&&(o=K),K>u&&(u=K));const L=t.get(P);if(L!==void 0&&(L<s&&(s=L),L>i&&(i=L),L<o&&(o=L),L>u&&(u=L)),K===void 0||L===void 0)continue;const B=Math.abs(L-K);B<c&&(c=B),B>d&&(d=B,m={time:P,valueL:K,valueR:L}),T++,$+=B}}function C(x){return x*100}let D,F,g;if(r===n&&s===i){const x=C(n!==0?Math.abs((i-n)/n):1);D=x,F=x,g=x}else{const x=u-o;D=C(x>0?c/x:0),F=C(x>0?d/x:0);const P=$/T;g=C(x>0?P/x:0)}let q;return e&&t?q="both":e?q="left-only":t?q="right-only":q="neither",{validity:q,minValue:o,maxValue:u,avgDiff:g,minDiff:D,maxDiff:F,maxDiffPoint:m}}function diffGraphs(e,t,r,n){let s;e&&t?s="both":e?s="left-only":t?s="right-only":s="neither";const i=[];if(e?.metadata&&t?.metadata){const u=new Set;for(const c of e.metadata.keys())u.add(c);for(const c of t.metadata.keys())u.add(c);for(const c of u){const d=e.metadata.get(c),m=t.metadata.get(c);d!==m&&i.push({key:c,valueL:d,valueR:m})}}const o=[];if(e&&t){const u=new Set;for(const c of e.datasets)u.add(c.datasetKey);for(const c of t.datasets)u.add(c.datasetKey);for(const c of u){const d=n.find(T=>T.d===c&&T.s===r),m=d?.md;o.push({datasetKey:c,maxDiff:m})}}return{inclusion:s,metadataReports:i,datasetReports:o}}function comparisonSummaryFromReport(e){var t,r;const n=[];for(const s of e.testReports){const i=(t=s.baselineDiffReport)==null?void 0:t.maxDiff,o=(r=s.baselineDiffReport)==null?void 0:r.avgDiff,u=testSummaryFromReport(s,i,o);u&&n.push(u)}return{testSummaries:n,perfReportL:e.perfReportL,perfReportR:e.perfReportR}}function testSummaryFromReport(e,t,r){var n;function s(i,o){return o!==void 0?(o===0&&(o=1e-6),i/o):i===0?0:1}if(e.diffReport===void 0)return{s:e.scenarioKey,d:e.datasetKey};if(((n=e.diffReport)==null?void 0:n.validity)==="both"&&e.diffReport.maxDiff>0){const i=s(e.diffReport.maxDiff,t),o=s(e.diffReport.avgDiff,r);return{s:e.scenarioKey,d:e.datasetKey,md:e.diffReport.maxDiff,ad:e.diffReport.avgDiff,mdb:i,adb:o}}else return}function restoreFromTerseSummaries(e,t){const r=new Map;for(const s of t){const i=`${s.s}::${s.d}`;r.set(i,s)}const n=[];for(const s of e.scenarios.getAllScenarios()){const i=e.datasets.getDatasetKeysForScenario(s);for(const o of i){const u=`${s.key}::${o}`,c=r.get(u);c?n.push(c):n.push({s:s.key,d:o,md:0,ad:0,mdb:0,adb:0})}}return n}function getBucketIndex(e,t){if(e===void 0)return t.length+2;if(e===0)return 0;for(let r=0;r<t.length;r++)if(e<t[r])return r+1;return t.length+1}function getScoresForTestSummaries(e,t,r){const n=Array(t.length+3).fill(0),s=Array(t.length+3).fill(0);let i=0,o;switch(r){case"max-diff":o="md";break;case"avg-diff":o="ad";break;case"max-diff-relative":o="mdb";break;case"avg-diff-relative":o="adb";break}for(const c of e){const d=c[o],m=getBucketIndex(d,t);n[m]++,d!==void 0&&(s[m]+=d),i++}let u;return i>0?u=n.map(c=>c/i*100):u=[],{totalDiffCount:i,totalDiffByBucket:s,diffCountByBucket:n,diffPercentByBucket:u}}function categorizeComparisonTestSummaries(e,t,r){const n=restoreFromTerseSummaries(e,t),s=groupComparisonTestSummaries(n,"by-scenario"),i=categorizeComparisonGroups(e,[...s.values()],r),o=groupComparisonTestSummaries(n,"by-dataset"),u=categorizeComparisonGroups(e,[...o.values()],r);return{allTestSummaries:n,byScenario:i,byDataset:u}}function groupComparisonTestSummaries(e,t){const r=new Map;for(const n of e){let s;switch(t){case"by-dataset":s=n.d;break;case"by-scenario":s=n.s;break;default:assertNeverExports$2.assertNever(t)}const i=r.get(s);i?i.testSummaries.push(n):r.set(s,{kind:t,key:s,testSummaries:[n]})}return r}function categorizeComparisonGroups(e,t,r){const n=new Map,s=[],i=[],o=[];let u=[];const c=[];function d(m,T,$,C){let D;if($&&C){const q=r==="max-diff-relative"||r==="avg-diff-relative"?e.ratioThresholds:e.thresholds;D=getScoresForTestSummaries(m.testSummaries,q,r)}const F={root:T,group:m,scores:D};if(n.set(m.key,F),$&&C){const g=D.diffCountByBucket[0],q=D.diffCountByBucket[5];D.totalDiffCount!==g+q?u.push(F):c.push(F)}else $?i.push(F):C?o.push(F):s.push(F)}for(const m of t.values())switch(m.kind){case"by-dataset":{const T=e.datasets.getDataset(m.key),$=T?.outputVarL!==void 0,C=T?.outputVarR!==void 0;d(m,T,$,C);break}case"by-scenario":{const T=e.scenarios.getScenario(m.key),$=T?.specL!==void 0,C=T?.specR!==void 0;d(m,T,$,C);break}default:assertNeverExports$2.assertNever(m.kind)}return u.length>1&&(u[0].group.kind==="by-dataset"?u=sortDatasetGroupSummaries(u):u[0].group.kind==="by-scenario"&&(u=sortScenarioGroupSummaries(u))),{allGroupSummaries:n,withErrors:s,onlyInLeft:i,onlyInRight:o,withDiffs:u,withoutDiffs:c}}function sortDatasetGroupSummaries(e){return e.sort((t,r)=>{var n,s;const i=compareScores(t.scores,r.scores);if(i!==0)return-i;{const o=t.root.outputVarL,u=r.root.outputVarR,c=((n=o.sourceName)==null?void 0:n.toLowerCase())||"",d=((s=u.sourceName)==null?void 0:s.toLowerCase())||"";if(c!==d)return c.localeCompare(d);{const m=o.varName.toLowerCase(),T=u.varName.toLowerCase();return m.localeCompare(T)}}})}function sortScenarioGroupSummaries(e){return e.sort((t,r)=>{var n,s;const i=compareScores(t.scores,r.scores);if(i!==0)return-i;{const o=t.root,u=r.root,c=o.title.toLowerCase(),d=u.title.toLowerCase();if(c!==d)return c.localeCompare(d);{const m=((n=o.subtitle)==null?void 0:n.toLowerCase())||"",T=((s=u.subtitle)==null?void 0:s.toLowerCase())||"";return m.localeCompare(T)}}})}function compareScores(e,t){if(e.totalDiffByBucket.length!==t.totalDiffByBucket.length)return 0;const r=e.totalDiffByBucket.length;for(let n=r-1;n>=0;n--){const s=e.totalDiffByBucket[n],i=t.totalDiffByBucket[n];if(s>i)return 1;if(s<i)return-1}return 0}var comparison_schema_default={$schema:"http://json-schema.org/draft-07/schema#",title:"Model Comparison Test",type:"array",description:"A group of model comparison scenarios and views.",items:{$ref:"#/$defs/top_level_array_item"},$defs:{top_level_array_item:{oneOf:[{$ref:"#/$defs/scenario_array_item"},{$ref:"#/$defs/scenario_group_array_item"},{$ref:"#/$defs/graph_group_array_item"},{$ref:"#/$defs/view_group_array_item"}]},dataset:{type:"object",additionalProperties:!1,properties:{name:{type:"string"},source:{type:"string"}},required:["name"]},scenario_array_item:{type:"object",additionalProperties:!1,properties:{scenario:{$ref:"#/$defs/scenario"}},required:["scenario"]},scenario:{oneOf:[{$ref:"#/$defs/scenario_with_input_at_position"},{$ref:"#/$defs/scenario_with_input_at_value"},{$ref:"#/$defs/scenario_with_multiple_input_settings"},{$ref:"#/$defs/scenario_with_inputs_in_preset_at_position"},{$ref:"#/$defs/scenario_preset"}]},scenario_position:{type:"string",enum:["min","max","default"]},scenario_with_input_at_position:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["with","at"]},scenario_with_input_at_value:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{type:"string"},at:{type:"number"}},required:["with","at"]},scenario_input_at_position:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{$ref:"#/$defs/scenario_position"}},required:["input","at"]},scenario_input_at_value:{type:"object",additionalProperties:!1,properties:{input:{type:"string"},at:{type:"number"}},required:["input","at"]},scenario_input_setting:{oneOf:[{$ref:"#/$defs/scenario_input_at_position"},{$ref:"#/$defs/scenario_input_at_value"}]},scenario_input_setting_array:{type:"array",items:{$ref:"#/$defs/scenario_input_setting"},minItems:1},scenario_with_multiple_input_settings:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with:{$ref:"#/$defs/scenario_input_setting_array"}},required:["with"]},scenario_with_inputs_in_preset_at_position:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"},with_inputs:{type:"string",enum:["all"]},at:{$ref:"#/$defs/scenario_position"}},required:["with_inputs","at"]},scenario_preset:{type:"object",additionalProperties:!1,properties:{preset:{type:"string",enum:["matrix"]}},required:["preset"]},scenario_group_array_item:{type:"object",additionalProperties:!1,properties:{scenario_group:{$ref:"#/$defs/scenario_group"}},required:["scenario_group"]},scenario_group:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/scenario_group_scenarios_array_item"},minItems:1}},required:["title","scenarios"]},scenario_group_scenarios_array_item:{oneOf:[{$ref:"#/$defs/scenario_array_item"},{$ref:"#/$defs/scenario_ref_array_item"}]},scenario_ref_id:{type:"string"},scenario_ref_object:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},title:{type:"string"},subtitle:{type:"string"}},required:["id"]},scenario_ref:{oneOf:[{$ref:"#/$defs/scenario_ref_id"},{$ref:"#/$defs/scenario_ref_object"}]},scenario_ref_array_item:{type:"object",additionalProperties:!1,properties:{scenario_ref:{$ref:"#/$defs/scenario_ref"}},required:["scenario_ref"]},scenario_group_ref:{type:"object",additionalProperties:!1,properties:{scenario_group_ref:{type:"string"}},required:["scenario_group_ref"]},graphs_preset:{type:"string",enum:["all"]},graphs_array:{type:"array",items:{type:"string"},minItems:1},graph_group_ref:{type:"object",additionalProperties:!1,properties:{graph_group_ref:{type:"string"}},required:["graph_group_ref"]},graph_group_array_item:{type:"object",additionalProperties:!1,properties:{graph_group:{$ref:"#/$defs/graph_group"}},required:["graph_group"]},graph_group:{type:"object",additionalProperties:!1,properties:{id:{type:"string"},graphs:{$ref:"#/$defs/graphs_array"}},required:["id","graphs"]},view:{oneOf:[{$ref:"#/$defs/view_with_scenario"},{$ref:"#/$defs/view_with_rows"}]},view_with_scenario:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},scenario_ref:{type:"string"},graphs:{$ref:"#/$defs/view_graphs"},graph_order:{$ref:"#/$defs/view_graph_order"}},required:["scenario_ref"]},view_with_rows:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},rows:{$ref:"#/$defs/view_rows_array"}},required:["title","rows"]},view_rows_array:{type:"array",items:{$ref:"#/$defs/view_rows_array_item"},minItems:1},view_rows_array_item:{type:"object",additionalProperties:!1,properties:{row:{$ref:"#/$defs/view_row"}}},view_row:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},boxes:{$ref:"#/$defs/view_boxes_array"}},required:["title","boxes"]},view_boxes_array:{type:"array",items:{$ref:"#/$defs/view_boxes_array_item"},minItems:1},view_boxes_array_item:{type:"object",additionalProperties:!1,properties:{box:{$ref:"#/$defs/view_box"}}},view_box:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},subtitle:{type:"string"},dataset:{$ref:"#/$defs/dataset"},scenario_ref:{$ref:"#/$defs/scenario_ref_id"}},required:["title","dataset","scenario_ref"]},view_graphs:{oneOf:[{$ref:"#/$defs/graphs_preset"},{$ref:"#/$defs/graphs_array"},{$ref:"#/$defs/graph_group_ref"}]},view_graph_order:{type:"string",enum:["default","grouped-by-diffs"]},view_group_array_item:{type:"object",additionalProperties:!1,properties:{view_group:{$ref:"#/$defs/view_group"}},required:["view_group"]},view_group:{oneOf:[{$ref:"#/$defs/view_group_with_views_array"},{$ref:"#/$defs/view_group_shorthand_with_scenarios_array"}]},view_group_with_views_array:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},views:{type:"array",items:{$ref:"#/$defs/view_group_views_array_item"},minItems:1}},required:["title","views"]},view_group_views_array_item:{type:"object",additionalProperties:!1,properties:{view:{$ref:"#/$defs/view"}}},view_group_shorthand_with_scenarios_array:{type:"object",additionalProperties:!1,properties:{title:{type:"string"},scenarios:{type:"array",items:{$ref:"#/$defs/view_group_scenarios_array_item"},minItems:1},graphs:{$ref:"#/$defs/view_graphs"}},required:["title","scenarios","graphs"]},view_group_scenarios_array_item:{oneOf:[{$ref:"#/$defs/scenario_ref_array_item"},{$ref:"#/$defs/scenario_group_ref"}]}}};function parseComparisonSpecs(e){const t=[],r=[],n=[],s=[],o=new Ajv2().compile(comparison_schema_default);let u;switch(e.kind){case"json":u=JSON.parse(e.content);break;case"yaml":u=YAML.parse(e.content);break;default:Tr(e.kind)}if(o(u))for(const c of u)"scenario"in c?t.push(scenarioSpecFromParsed(c.scenario)):"scenario_group"in c?r.push(scenarioGroupSpecFromParsed(c.scenario_group)):"graph_group"in c?n.push(graphGroupSpecFromParsed(c.graph_group)):"view_group"in c&&s.push(viewGroupSpecFromParsed(c.view_group));else{let c="Failed to parse YAML comparison definitions";for(const d of o.errors||[])d.message&&(c+=`
${d.message}`);return err$3(new Error(c))}return ok$3({scenarios:t,scenarioGroups:r,graphGroups:n,viewGroups:s})}function datasetSpecFromParsed(e){return{kind:"dataset",name:e.name,source:e.source}}function scenarioSpecFromParsed(e){if(e.preset==="matrix")return{kind:"scenario-matrix"};if(e.with!==void 0){let t;return Array.isArray(e.with)?t=e.with.map(inputSpecFromParsed):t=[inputSpecFromParsed({input:e.with,at:e.at})],{kind:"scenario-with-inputs",id:e.id,title:e.title,subtitle:e.subtitle,inputs:t}}if(e.with_inputs==="all")return{kind:"scenario-with-all-inputs",id:e.id,title:e.title,subtitle:e.subtitle,position:e.at};throw new Error(`Unable to convert parsed scenario: ${JSON.stringify(e)}`)}function inputSpecFromParsed(e){if(typeof e.at=="number"){const t=e.at;return{kind:"input-at-value",inputName:e.input,value:t}}else return{kind:"input-at-position",inputName:e.input,position:e.at}}function scenarioGroupSpecFromParsed(e){const t=e.scenarios.map(r=>"scenario_ref"in r?scenarioRefSpecFromParsed(r):scenarioSpecFromParsed(r.scenario));return{kind:"scenario-group",id:e.id,title:e.title,scenarios:t}}function scenarioRefSpecFromParsed(e){return typeof e.scenario_ref=="string"?{kind:"scenario-ref",scenarioId:e.scenario_ref}:{kind:"scenario-ref",scenarioId:e.scenario_ref.id,title:e.scenario_ref.title,subtitle:e.scenario_ref.subtitle}}function scenarioGroupRefSpecFromParsed(e){return{kind:"scenario-group-ref",groupId:e.scenario_group_ref}}function graphGroupSpecFromParsed(e){return{kind:"graph-group",id:e.id,graphIds:e.graphs}}function viewSpecFromParsed(e){let t,r;e.scenario_ref!==void 0?t=e.scenario_ref:e.rows!==void 0&&(r=e.rows.map(s=>viewRowSpecFromParsed(s.row)));let n;return e.graphs!==void 0&&(n=viewGraphsSpecFromParsed(e.graphs)),{kind:"view",title:e.title,subtitle:e.subtitle,scenarioId:t,rows:r,graphs:n,graphOrder:e.graph_order}}function viewRowSpecFromParsed(e){return{kind:"view-row",title:e.title,subtitle:e.subtitle,boxes:e.boxes.map(t=>viewBoxSpecFromParsed(t.box))}}function viewBoxSpecFromParsed(e){return{kind:"view-box",title:e.title,subtitle:e.subtitle,dataset:datasetSpecFromParsed(e.dataset),scenarioId:e.scenario_ref}}function viewGraphsSpecFromParsed(e){if(e==="all")return{kind:"graphs-preset",preset:"all"};if(Array.isArray(e))return{kind:"graphs-array",graphIds:e};if("graph_group_ref"in e)return{kind:"graph-group-ref",groupId:e.graph_group_ref};throw new Error("Invalid graphs spec in comparison view")}function viewGroupSpecFromParsed(e){if(e.views!==void 0)return{kind:"view-group-with-views",title:e.title,views:e.views.map(t=>viewSpecFromParsed(t.view))};if(e.scenarios!==void 0){const t=e.scenarios.map(r=>{if("scenario_ref"in r)return scenarioRefSpecFromParsed(r);if("scenario_group_ref"in r)return scenarioGroupRefSpecFromParsed(r);throw new Error("Invalid view group")});return{kind:"view-group-with-scenarios",title:e.title,scenarios:t,graphs:viewGraphsSpecFromParsed(e.graphs)}}else throw new Error("Invalid view group")}var ModelInputs=class{constructor(e){this.modelSpec=e,this.inputsByLookupName=new Map,this.inputIdAliases=new Set;for(const t of e.inputVars.values()){const r=t.varName.toLowerCase();if(this.inputsByLookupName.set(r,t),t.inputId){const n=`id ${t.inputId}`;this.inputIdAliases.add(n);const s=n.toLowerCase();this.inputsByLookupName.set(s,t)}}if(e.inputAliases)for(const[t,r]of e.inputAliases.entries()){const n=t.toLowerCase();if(this.inputsByLookupName.has(n)){console.warn(`WARNING: Input variable already defined with a name that collides with alias '${t}', skipping`);continue}const s=e.inputVars.get(r);if(s===void 0){console.warn(`WARNING: No input variable found for '${r}' associated with alias '${t}', skipping`);continue}this.inputsByLookupName.set(n,s)}}getAllInputIdAliases(){return[...this.inputIdAliases]}getInputVarForName(e){return this.inputsByLookupName.get(e.toLowerCase())}getInputVarForVarId(e){return this.modelSpec.inputVars.get(e)}};function scenarioSpecsFromSettings(e){switch(e.kind){case"all-inputs-settings":{const t=allInputsAtPositionSpec(e.position);return[t,t]}case"input-settings":{const t=scenarioSpecFromInputs(e.inputs,"left"),r=scenarioSpecFromInputs(e.inputs,"right");return[t,r]}default:assertNeverExports$2.assertNever(e)}}function scenarioSpecFromInputs(e,t){const r=[];for(const n of e){const s=t==="left"?n.stateL:n.stateR;if(s.inputVar===void 0)return;r.push(inputSettingFromResolvedInputState(s))}return inputSettingsSpec(r)}function inputSettingFromResolvedInputState(e){const t=e.inputVar.varId;return e.position?positionSetting(t,e.position):valueSetting(t,e.value)}function resolveComparisonSpecs(e,t,r){let n=1;const s=()=>`${n++}`,i=new ModelInputs(e),o=new ModelInputs(t),u=new ModelOutputs(e,t),c=new ResolvedScenarios;for(const C of r.scenarios||[])c.add(resolveScenariosFromSpec(i,o,C,s));const d=[];for(const C of r.scenarioGroups||[]){const D=[];for(const F of C.scenarios)if(F.kind==="scenario-ref")D.push(F);else{const g=resolveScenariosFromSpec(i,o,F,s);c.add(g),D.push(...g)}d.push({spec:C,scenarios:D})}const m=new ResolvedScenarioGroups;for(const C of d){const D=[];for(const F of C.scenarios)if(F.kind==="scenario-ref"){const g=c.getScenarioForId(F.scenarioId);if(g){const q=__spreadValues$2({},g);F.title&&(q.title=F.title),F.subtitle&&(q.subtitle=F.subtitle),D.push(q)}else D.push({kind:"unresolved-scenario-ref",scenarioId:F.scenarioId})}else D.push(F);m.add({kind:"scenario-group",id:C.spec.id,title:C.spec.title,scenarios:D})}const T=new ResolvedGraphGroups;for(const C of r.graphGroups||[])T.add(C);const $=[];for(const C of r.viewGroups||[]){const D=resolveViewGroupFromSpec(e,t,u,c,m,T,C);$.push(D)}return{scenarios:c.getAll(),scenarioGroups:m.getAll(),viewGroups:$}}var ModelOutputs=class{constructor(e,t){this.modelSpecL=e,this.modelSpecR=t}getDatasetForName(e,t){function r(s){for(const i of s.outputVars.values())if(i.varName===e&&i.sourceName===t)return i}const n=r(this.modelSpecR);if(n){const s=n.datasetKey,i=this.modelSpecL.outputVars.get(s);return{kind:"dataset",key:s,outputVarL:i,outputVarR:n}}else return}},ResolvedScenarios=class{constructor(){this.resolvedScenarios=[],this.resolvedScenariosById=new Map}add(e){for(const t of e)if(this.resolvedScenarios.push(t),t.id!==void 0){if(this.resolvedScenariosById.has(t.id))throw new Error(`Multiple scenarios defined with the same id (${t.id})`);this.resolvedScenariosById.set(t.id,t)}}getAll(){return this.resolvedScenarios}getScenarioForId(e){return this.resolvedScenariosById.get(e)}};function resolveScenariosFromSpec(e,t,r,n){switch(r.kind){case"scenario-matrix":return resolveScenarioMatrix(e,t,n);case"scenario-with-all-inputs":{const s=inputPosition2(r.position);return[resolveScenarioWithAllInputsAtPosition(n(),r.id,r.title,r.subtitle,s)]}case"scenario-with-inputs":return[resolveScenarioForInputSpecs(e,t,n(),r.id,r.title,r.subtitle,r.inputs)];case"scenario-with-distinct-inputs":return[resolveScenarioForDistinctInputSpecs(e,t,n(),r.id,r.title,r.subtitle,r.inputsL,r.inputsR)];case"scenario-with-setting-group":return[resolveScenarioForSettingGroup(e,t,n(),r.id,r.title,r.subtitle,r.settingGroupId)];default:assertNeverExports$2.assertNever(r)}}function resolveScenarioMatrix(e,t,r){const n=[];n.push(resolveScenarioWithAllInputsAtPosition(r(),void 0,void 0,void 0,"at-default"));const s=new Set;e.getAllInputIdAliases().forEach(i=>s.add(i)),t.getAllInputIdAliases().forEach(i=>s.add(i));for(const i of s){const o={kind:"input-at-position",inputName:i,position:"min"},u={kind:"input-at-position",inputName:i,position:"max"};n.push(resolveScenarioForInputSpecs(e,t,r(),void 0,void 0,void 0,[o])),n.push(resolveScenarioForInputSpecs(e,t,r(),void 0,void 0,void 0,[u]))}return n}function resolveScenarioWithAllInputsAtPosition(e,t,r,n,s){const i={kind:"all-inputs-settings",position:s},[o,u]=scenarioSpecsFromSettings(i);return{kind:"scenario",key:e,id:t,title:r,subtitle:n,settings:i,specL:o,specR:u}}function resolveScenarioForInputSpecs(e,t,r,n,s,i,o){const c={kind:"input-settings",inputs:o.map(T=>{switch(T.kind){case"input-at-position":return resolveInputForName(e,t,T.inputName,T.position);case"input-at-value":return resolveInputForName(e,t,T.inputName,T.value);default:assertNeverExports$2.assertNever(T)}})},[d,m]=scenarioSpecsFromSettings(c);return{kind:"scenario",key:r,id:n,title:s,subtitle:i,settings:c,specL:d,specR:m}}function resolveScenarioForDistinctInputSpecs(e,t,r,n,s,i,o,u){const c=[],d=[],m=[];function T(D,F,g){let q;switch(g.kind){case"input-at-position":q=resolveInputForNameInModel(F,g.inputName,g.position);break;case"input-at-value":q=resolveInputForNameInModel(F,g.inputName,g.value);break;default:assertNeverExports$2.assertNever(g)}if(q.error!==void 0)c.push({requestedName:g.inputName,stateL:D==="left"?q:{},stateR:D==="right"?q:{}});else{const x=inputSettingFromResolvedInputState(q);D==="left"?d.push(x):m.push(x)}}o.forEach(D=>T("left",e,D)),u.forEach(D=>T("right",t,D));let $,C;return c.length===0&&($=inputSettingsSpec(d),C=inputSettingsSpec(m)),{kind:"scenario",key:r,id:n,title:s,subtitle:i,settings:{kind:"input-settings",inputs:c},specL:$,specR:C}}function resolveScenarioForSettingGroup(e,t,r,n,s,i,o){var u,c;function d(L,B){const J=L.getInputVarForVarId(B);return J!==void 0?J.varName:B}function m(L){switch(L){case"at-minimum":return"min";case"at-maximum":return"max";case"at-default":return"default";default:throw new Error(`Unknown input position: ${L}`)}}function T(L,B){switch(B.kind){case"position":return{kind:"input-at-position",inputName:d(L,B.inputVarId),position:m(B.position)};case"value":return{kind:"input-at-value",inputName:d(L,B.inputVarId),value:B.value};default:throw new Error(`Unknown input setting kind: ${B}`)}}function $(L,B){return B.map(J=>T(L,J))}const C=((u=e.modelSpec.inputSettingGroups)==null?void 0:u.get(o))||[],D=((c=t.modelSpec.inputSettingGroups)==null?void 0:c.get(o))||[],F=$(e,C),g=$(t,D),q=resolveScenarioForDistinctInputSpecs(e,t,r,n,s,i,F,g);function x(L){if(L.kind==="input-settings")return L.settings.map(J=>{switch(J.kind){case"position":return`${J.inputVarId}=${J.position}`;case"value":return`${J.inputVarId}=${J.value}`;default:throw new Error(`Unexpected input setting kind: ${J}`)}}).sort().join("__");throw new Error(`Unexpected scenario spec kind: ${L.kind}`)}function P(L,B){return x(L)===x(B)}function K(L){return L.length===0?{error:{kind:"unknown-input-setting-group"}}:{}}if(C.length===0||D.length===0){if(q.settings.kind==="input-settings"){const L={requestedName:o,stateL:K(C),stateR:K(D)};q.settings.inputs.unshift(L)}C.length===0&&(q.specL=void 0),D.length===0&&(q.specR=void 0)}return q.settings.kind==="input-settings"&&q.specL&&q.specR&&!P(q.specL,q.specR)&&(q.settings.settingsDiffer=!0),q}function resolveInputForName(e,t,r,n){return{requestedName:r,stateL:resolveInputForNameInModel(e,r,n),stateR:resolveInputForNameInModel(t,r,n)}}function resolveInputForNameInModel(e,t,r){const n=e.getInputVarForName(t);return n?resolveInputVar(n,r):{error:{kind:"unknown-input"}}}function resolveInputVar(e,t){if(typeof t=="number")return resolveInputVarAtValue(e,t);{const r=inputPosition2(t);return resolveInputVarAtPosition(e,r)}}function resolveInputVarAtPosition(e,t){return{inputVar:e,position:t,value:inputValueAtPosition2(e,t)}}function resolveInputVarAtValue(e,t){return t>=e.minValue&&t<=e.maxValue?{inputVar:e,value:t}:{error:{kind:"invalid-value"}}}function inputPosition2(e){switch(e){case"default":return"at-default";case"min":return"at-minimum";case"max":return"at-maximum";default:return}}function inputValueAtPosition2(e,t){switch(t){case"at-default":return e.defaultValue;case"at-minimum":return e.minValue;case"at-maximum":return e.maxValue;default:assertNeverExports$2.assertNever(t)}}var ResolvedScenarioGroups=class{constructor(){this.resolvedGroups=[],this.resolvedGroupsById=new Map}add(e){if(this.resolvedGroups.push(e),e.id!==void 0){if(this.resolvedGroupsById.has(e.id))throw new Error(`Multiple scenario groups defined with the same id (${e.id})`);this.resolvedGroupsById.set(e.id,e)}}getAll(){return this.resolvedGroups}getGroupForId(e){return this.resolvedGroupsById.get(e)}},ResolvedGraphGroups=class{constructor(){this.resolvedGroupsById=new Map}add(e){if(this.resolvedGroupsById.has(e.id))throw new Error(`Multiple graph groups defined with the same id (${e.id})`);this.resolvedGroupsById.set(e.id,e)}getGroupForId(e){return this.resolvedGroupsById.get(e)}};function resolveGraphsFromSpec(e,t,r,n){switch(n.kind){case"graphs-preset":switch(n.preset){case"all":{const s=new Set,i=o=>{if(o.graphSpecs)for(const u of o.graphSpecs)s.add(u.id)};return i(e),i(t),[...s]}default:assertNeverExports$2.assertNever(n.preset)}case"graphs-array":return n.graphIds;case"graph-group-ref":{const s=r.getGroupForId(n.groupId);if(s===void 0)throw new Error(`No graph group found for id ${n.groupId}`);return s.graphIds}default:assertNeverExports$2.assertNever(n)}}function resolveViewForScenarioId(e,t,r,n,s,i){const o=e.getScenarioForId(n);return o?resolveViewForScenario(t,r,o,s,i):unresolvedViewForScenarioId(t,r,n)}function resolveViewForScenarioRefSpec(e,t,r,n){const s=e.getScenarioForId(t.scenarioId);return s?resolveViewForScenario(t.title,t.subtitle,s,r,n):unresolvedViewForScenarioId(void 0,void 0,t.scenarioId)}function resolveViewForScenario(e,t,r,n,s){return e===void 0&&(e=r.title,e===void 0&&(e="Untitled view"),t===void 0&&(t=r.subtitle)),{kind:"view",title:e,subtitle:t,scenario:r,graphIds:n,graphOrder:s}}function resolveViewBoxForSpec(e,t,r){const n=e.getDatasetForName(r.dataset.name,r.dataset.source);if(n===void 0)return{kind:"unresolved-view-box",datasetName:r.dataset.name,datasetSource:r.dataset.source};const s=t.getScenarioForId(r.scenarioId);return s===void 0?{kind:"unresolved-view-box",scenarioId:r.scenarioId}:{kind:"view-box",title:r.title,subtitle:r.subtitle,dataset:n,scenario:s}}function resolveViewRowForSpec(e,t,r){const n=[];for(const s of r.boxes){const i=resolveViewBoxForSpec(e,t,s);if(i.kind==="view-box")n.push(i);else return i}return{kind:"view-row",title:r.title,subtitle:r.subtitle,boxes:n}}function resolveViewWithRowSpecs(e,t,r,n,s){const i=[];for(const o of s){const u=resolveViewRowForSpec(e,t,o);if(u.kind==="view-row")i.push(u);else return unresolvedViewForScenarioId(r,n,u.scenarioId,u.datasetName,u.datasetSource)}return r===void 0&&(r="Untitled view"),{kind:"view",title:r,subtitle:n,rows:i,graphIds:[],graphOrder:"default"}}function unresolvedViewForScenarioId(e,t,r,n,s){return{kind:"unresolved-view",title:e,subtitle:t,scenarioId:r,datasetName:n,datasetSource:s}}function unresolvedViewForScenarioGroupId(e,t,r){return{kind:"unresolved-view",title:e,subtitle:t,scenarioGroupId:r}}function resolveViewGroupFromSpec(e,t,r,n,s,i,o){let u;switch(o.kind){case"view-group-with-views":{u=o.views.map(c=>{if(c.scenarioId){let d;return c.graphs?d=resolveGraphsFromSpec(e,t,i,c.graphs):d=[],resolveViewForScenarioId(n,c.title,c.subtitle,c.scenarioId,d,c.graphOrder||"default")}else return resolveViewWithRowSpecs(r,n,c.title,c.subtitle,c.rows)});break}case"view-group-with-scenarios":{const c=resolveGraphsFromSpec(e,t,i,o.graphs),d=o.graphOrder||"default";u=[];for(const m of o.scenarios)switch(m.kind){case"scenario-ref":u.push(resolveViewForScenarioRefSpec(n,m,c,d));break;case"scenario-group-ref":{const T=s.getGroupForId(m.groupId);if(T)for(const $ of T.scenarios)switch($.kind){case"unresolved-scenario-ref":u.push(unresolvedViewForScenarioId(void 0,void 0,$.scenarioId));break;case"scenario":u.push(resolveViewForScenario(void 0,void 0,$,c,d));break;default:assertNeverExports$2.assertNever($)}else u.push(unresolvedViewForScenarioGroupId(void 0,void 0,m.groupId));break}default:assertNeverExports$2.assertNever(m)}break}default:assertNeverExports$2.assertNever(o)}return{kind:"view-group",title:o.title,views:u}}function resolveComparisonSpecsFromSources(e,t,r){const n={scenarios:[],scenarioGroups:[],graphGroups:[],viewGroups:[]};for(const s of r){let i;if("kind"in s){const o=parseComparisonSpecs(s);if(o.isOk())i=o.value;else{const u=s.filename?` in ${s.filename}`:"";console.error(`ERROR: Failed to parse comparison spec${u}, skipping`);continue}}else i=s;n.scenarios.push(...i.scenarios||[]),n.scenarioGroups.push(...i.scenarioGroups||[]),n.graphGroups.push(...i.graphGroups||[]),n.viewGroups.push(...i.viewGroups||[])}return resolveComparisonSpecs(e,t,n)}function getComparisonDatasets(e,t,r){return new ComparisonDatasetsImpl(e,t,r)}var ComparisonDatasetsImpl=class{constructor(e,t,r){this.modelSpecL=e,this.modelSpecR=t,this.datasetOptions=r;const n=r?.renamedDatasetKeys,s=new Map;n?.forEach((d,m)=>{s.set(d,m)});function i(d){return s.get(d)||d}const o=new Set,u=new Set;function c(d,m){d.forEach((T,$)=>{const C=m?i($):$;o.add(C),T.sourceName===void 0&&u.add(C)})}c(e.outputVars,!1),c(t.outputVars,!0),this.allOutputVarKeys=Array.from(o),this.modelOutputVarKeys=Array.from(u),this.allDatasets=new Map;for(const d of this.allOutputVarKeys){const m=n?.get(d)||d,T=e.outputVars.get(d),$=t.outputVars.get(m);this.allDatasets.set(d,{kind:"dataset",key:d,outputVarL:T,outputVarR:$})}}getAllDatasets(){return this.allDatasets.values()}getDataset(e){return this.allDatasets.get(e)}getDatasetKeysForScenario(e){var t;return((t=this.datasetOptions)==null?void 0:t.datasetKeysForScenario)!==void 0?this.datasetOptions.datasetKeysForScenario(this.allOutputVarKeys,e):e.settings.kind==="all-inputs-settings"&&e.settings.position==="at-default"?this.allOutputVarKeys:this.modelOutputVarKeys}getReferencePlotsForDataset(e,t){var r;if(((r=this.datasetOptions)==null?void 0:r.referencePlotsForDataset)!==void 0){const n=this.getDataset(e);if(n!==void 0)return this.datasetOptions.referencePlotsForDataset(n,t)}return[]}getContextGraphIdsForDataset(e,t){var r;const n=this.getDataset(e);return n===void 0?[]:((r=this.datasetOptions)==null?void 0:r.contextGraphIdsForDataset)!==void 0?this.datasetOptions.contextGraphIdsForDataset(n,t):getContextGraphIdsForDataset(this.modelSpecL,this.modelSpecR,n)}};function getContextGraphIdsForDataset(e,t,r){const n=new Set;function s(i,o){for(const u of i.graphSpecs||[])for(const c of u.datasets)if(c.datasetKey===o?.datasetKey){n.add(u.id);break}}return s(e,r.outputVarL),s(t,r.outputVarR),[...n]}function getComparisonScenarios(e){return new ComparisonScenariosImpl(e)}var ComparisonScenariosImpl=class{constructor(e){this.scenarioDefs=new Map;for(const t of e)this.scenarioDefs.set(t.key,t)}getAllScenarios(){return this.scenarioDefs.values()}getScenario(e){return this.scenarioDefs.get(e)}};function createConfig(e){return __async(this,null,function*(){var t,r,n,s,i;let o;if(e.concurrency===void 0)o=1;else if(e.concurrency===0){let $;typeof navigator<"u"&&($=navigator.hardwareConcurrency),($===void 0||$<1)&&($=1),o=Math.max(1,Math.floor($/2))}else o=Math.max(1,e.concurrency);const u=yield loadBundle(e.current,o);let c,d;if(e.comparison===void 0)c=u;else{const $=yield loadBundle(e.comparison.baseline,o);c=handleRenames(u,(t=e.comparison.datasets)==null?void 0:t.renamedDatasetKeys);const C=$.modelSpec,D=c.modelSpec,F=resolveComparisonSpecsFromSources(C,D,e.comparison.specs);d={bundleL:$,bundleR:c,thresholds:(r=e.comparison.thresholds)!=null?r:[1,5,10],ratioThresholds:(n=e.comparison.ratioThresholds)!=null?n:[1,2,3],scenarios:getComparisonScenarios(F.scenarios),datasets:getComparisonDatasets(C,D,e.comparison.datasets),viewGroups:F.viewGroups,reportOptions:e.comparison.report}}const m={bundle:c,tests:e.check.tests},T=new Map;for(let $=0;$<m.bundle.models.length;$++){const C=(s=d?.bundleL.models)==null?void 0:s[$],D=((i=d?.bundleR.models)==null?void 0:i[$])||m.bundle.models[$],F=createExecutor(C,D);T.set(`executor-${$}`,F)}return TaskQueue.initialize(T),{check:m,comparison:d}})}function loadBundle(e,t){return __async(this,null,function*(){const r=Array.from({length:t},()=>e.bundle.initModel()),n=yield Promise.all(r);return{name:e.name,version:e.bundle.version,modelSpec:e.bundle.modelSpec,models:n}})}function handleRenames(e,t){if(t===void 0||t.size===0)return e;const r=new Map;t.forEach((u,c)=>{r.set(u,c)});const n=u=>t?.get(u)||u,s=u=>r.get(u)||u;function i(u){return{modelSpec:u.modelSpec,getDatasetsForScenario:(c,d)=>__async(this,null,function*(){const m=d.map(n),T=yield u.getDatasetsForScenario(c,m),$=T.datasetMap,C=new Map;for(const[D,F]of $.entries()){const g=s(D);C.set(g,F)}return{datasetMap:C,modelRunTime:T.modelRunTime}}),getGraphDataForScenario:u.getGraphDataForScenario.bind(u),getGraphLinksForScenario:u.getGraphLinksForScenario.bind(u)}}const o=e.models.map(i);return __spreadProps(__spreadValues$2({},e),{models:o})}var PerfStats=class{constructor(){this.times=[]}addRun(e){this.times.push(e)}toReport(){if(this.times.length===0)return{minTime:0,maxTime:0,avgTime:0,allTimes:[]};const e=Math.min(...this.times),t=Math.max(...this.times),r=this.times.sort(),n=Math.floor(r.length/4),s=n+Math.ceil(r.length/2),i=r.slice(n,s),u=i.reduce((c,d)=>c+d,0)/i.length;return{minTime:e,maxTime:t,avgTime:u,allTimes:r}}};function runPerfWithTaskQueue(e,t,r){const n=new PerfRunner(e,t,r);return n.start(),()=>{n.cancel()}}function runPerf(e,t){const r=TaskQueue.getInstance();return runPerfWithTaskQueue(r,e,t)}var PerfRunner=class{constructor(e,t,r){this.taskQueue=e,this.callbacks=t,this.options=r,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(){var e,t,r,n,s,i;const o=new PerfStats,u=new PerfStats,c=allInputsAtPositionSpec("at-default"),d=(t=(e=this.options)==null?void 0:e.warmupCount)!=null?t:5,m=(n=(r=this.options)==null?void 0:r.runCount)!=null?n:100;let T=0;((s=this.options)==null?void 0:s.mode)==="parallel"?T=d+m:T=(d+m)*2;let $=0,C=1;const D=(g,q)=>{const x={key:`perf-runner-${C++}`,kind:"perf-runner",process:P=>__async(this,null,function*(){var K,L,B,J;this.pendingTaskKeys.delete(x.key);try{let re,ve;switch(q){case"left":{re=(yield P.L.getDatasetsForScenario(c,[])).modelRunTime;break}case"right":{ve=(yield P.R.getDatasetsForScenario(c,[])).modelRunTime;break}case"both":{const[ye,Se]=yield Promise.all([P.L.getDatasetsForScenario(c,[]),P.R.getDatasetsForScenario(c,[])]);re=ye.modelRunTime,ve=Se.modelRunTime;break}default:assertNeverExports$2.assertNever(q)}g||(re!==void 0&&o.addRun(re),ve!==void 0&&u.addRun(ve)),$++,$===T&&((L=(K=this.callbacks).onComplete)==null||L.call(K,o.toReport(),u.toReport()))}catch(re){(J=(B=this.callbacks).onError)==null||J.call(B,re)}})};this.taskQueue.addTask(x),this.pendingTaskKeys.add(x.key)};function F(g){for(let q=0;q<d;q++)D(!0,g);for(let q=0;q<m;q++)D(!1,g)}((i=this.options)==null?void 0:i.mode)==="parallel"?F("both"):(F("left"),F("right"))}};function runTraceWithTaskQueue(e,t,r,n){const s=new TraceRunner(t,r);return s.start(e,n),()=>{s.cancel()}}function runTrace(e,t,r){const n=TaskQueue.getInstance();return runTraceWithTaskQueue(e,n,t,r)}var TraceRunner=class{constructor(e,t){this.taskQueue=e,this.callbacks=t,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(e,t){const r=[...e.implVars.keys()],n=[],s=2e3;for(let d=0;d<r.length;d+=s){const m=r.slice(d,d+s);switch(t.kind){case"compare-to-bundle":n.push({kind:"compare-to-bundle",datasetKeys:m,bundleSide0:t.bundleSide0,scenarioSpec0:t.scenarioSpec0,bundleSide1:t.bundleSide1,scenarioSpec1:t.scenarioSpec1});break;case"compare-to-ext-data":n.push({kind:"compare-to-ext-data",datasetKeys:m,extData:t.extData,bundleSide:t.bundleSide,scenarioSpec:t.scenarioSpec});break;default:assertNeverExports$2.assertNever(t)}}const i=new Map,o=n.length;let u=0,c=1;for(const d of n){const m={key:`trace-runner-${c++}`,kind:"trace-runner",process:T=>__async(this,null,function*(){var $,C;this.pendingTaskKeys.delete(m.key);let D;switch(d.kind){case"compare-to-bundle":D=yield processCompareToBundleRequest(d,T);break;case"compare-to-ext-data":D=yield processCompareToExtDataRequest(d,T);break;default:assertNeverExports$2.assertNever(d)}for(const F of D)i.set(F.datasetKey,F);if(u++,u===o){const F={datasetReports:i};(C=($=this.callbacks).onComplete)==null||C.call($,F)}})};this.taskQueue.addTask(m),this.pendingTaskKeys.add(m.key)}}};function processCompareToBundleRequest(e,t){return __async(this,null,function*(){const r=e.bundleSide0==="left"?t.L:t.R,n=e.bundleSide1==="left"?t.L:t.R;let s,i;n===r?(s=yield r.getDatasetsForScenario(e.scenarioSpec0,e.datasetKeys),i=yield n.getDatasetsForScenario(e.scenarioSpec1,e.datasetKeys)):[s,i]=yield Promise.all([r.getDatasetsForScenario(e.scenarioSpec0,e.datasetKeys),n.getDatasetsForScenario(e.scenarioSpec1,e.datasetKeys)]);const o=[];for(const u of e.datasetKeys){const c=s.datasetMap.get(u),d=i.datasetMap.get(u),m=diffDatasets2(u,c,d,!1);o.push(m)}return o})}function processCompareToExtDataRequest(e,t){return __async(this,null,function*(){const n=yield(e.bundleSide==="left"?t.L:t.R).getDatasetsForScenario(e.scenarioSpec,e.datasetKeys),s=[];for(const i of e.datasetKeys){let o=e.extData.get(i);if(o===void 0){const d=i.split("[");if(d.length===2){const m=d[0],$=d[1].replace("]","").split(","),C=permutationsOf($);for(const D of C){const F=`${m}[${D.join(",")}]`;if(o=e.extData.get(F),o!==void 0)break}}o===void 0&&console.warn(`WARNING: Failed to find data in dat file for key=${i}`)}const u=n.datasetMap.get(i),c=diffDatasets2(i,o,u,!0);s.push(c)}return s})}function diffDatasets2(e,t,r,n){const s=new Map;let i=Number.MAX_VALUE,o=Number.MIN_VALUE,u=Number.MAX_VALUE,c=Number.MIN_VALUE,d=Number.MAX_VALUE,m=Number.MIN_VALUE,T=Number.MAX_VALUE,$=-1,C,D=0,F=0;if(t&&r){const L=new Set([...t.keys(),...r.keys()]);for(const B of L){const J=t.get(B);J!==void 0&&(J<i&&(i=J),J>o&&(o=J),J<d&&(d=J),J>m&&(m=J));let re;const ve=r.get(B);if(ve!==void 0&&(n&&J!==void 0?re=matchPrecision(ve,J):re=ve,re<u&&(u=re),re>c&&(c=re),re<d&&(d=re),re>m&&(m=re)),J===void 0||re===void 0)continue;const ye={time:B,valueL:J,valueR:re};s.set(B,ye);const Se=Math.abs(re-J);Se<T&&(T=Se),Se>$&&($=Se,C=ye),D++,F+=Se}}function g(L){return L*100}let q,x,P;if(i===o&&u===c){const L=g(o!==0?Math.abs((c-o)/o):1);q=L,x=L,P=L}else{const L=m-d;q=g(L>0?T/L:0),x=g(L>0?$/L:0);const B=F/D;P=g(L>0?B/L:0)}let K;return t&&r?K="both":t?K="left-only":r?K="right-only":K="neither",{datasetKey:e,validity:K,points:s,minValue:d,maxValue:m,avgDiff:P,minDiff:q,maxDiff:x,maxDiffPoint:C}}function matchPrecision(e,t){const r=t.toString();if(r.includes("e"))return e;const n=r.split(".");if(n.length<2)return e;const s=n[1].replace(/0+$/,"").length;return s>21?e:parseFloat(e.toFixed(s))}function permutationsOf(e){const t=[],r=(n,s=[])=>{if(n.length===0)t.push(s);else for(let i=0;i<n.length;i++){const o=n.slice(),u=o.splice(i,1);r(o.slice(),s.concat(u))}};return r(e),t}var DataPlanner=class{constructor(e){this.batchSize=e,this.taskSetsLR=new Map,this.taskSetsL=new Map,this.taskSetsR=new Map,this.complete=!1}addRequest(e,t,r,n){if(e===void 0&&t===void 0){console.warn("WARNING: Both scenario specs are undefined for DataPlanner request, skipping");return}let s,i;e&&t?(s=this.taskSetsLR,i=scenarioPairUid(e,t)):t?(s=this.taskSetsR,i=t.uid):(s=this.taskSetsL,i=e.uid);let o=s.get(i);o||(o=new DataTaskSet(e,t),s.set(i,o)),o.addTask({datasetKey:r,dataAction:n})}buildPlan(){if(this.complete)throw new Error("DataPlanner.buildPlan() can only be called once");this.complete=!0;const e=new Map,t=new Map;for(const o of this.taskSetsLR.keys()){const[u,c]=o.split("::");e.has(u)||e.set(u,o),t.has(c)||t.set(c,o)}function r(o,u,c){for(const[d,m]of u.entries()){const T=c.get(d);T&&(o.get(T).merge(m),u.delete(d))}}r(this.taskSetsLR,this.taskSetsL,e),r(this.taskSetsLR,this.taskSetsR,t);const n=[],s=this.batchSize;function i(o){for(const u of o)n.push(...u.buildRequests(s))}return i(this.taskSetsLR.values()),i(this.taskSetsL.values()),i(this.taskSetsR.values()),{requests:n}}},DataTaskSet=class{constructor(e,t){this.scenarioSpecL=e,this.scenarioSpecR=t,this.modelTasks=new Map,this.modelImplTasks=new Map}addTask(e){let t;e.datasetKey.startsWith("ModelImpl")?t=this.modelImplTasks:t=this.modelTasks;let r=t.get(e.datasetKey);r||(r=[],t.set(e.datasetKey,r)),r.push(e)}merge(e){for(const t of e.modelTasks.values())for(const r of t)this.addTask(r);for(const t of e.modelImplTasks.values())for(const r of t)this.addTask(r)}buildRequests(e){const t=[];if(this.modelTasks.size>0){const r=[];this.modelTasks.forEach(n=>r.push(...n)),t.push({scenarioSpecL:this.scenarioSpecL,scenarioSpecR:this.scenarioSpecR,dataTasks:r})}if(this.modelImplTasks.size>0){const r=[...this.modelImplTasks.keys()];for(let n=0;n<r.length;n+=e){const s=r.slice(n,n+e),i=[];for(const o of s)i.push(...this.modelImplTasks.get(o));t.push({scenarioSpecL:this.scenarioSpecL,scenarioSpecR:this.scenarioSpecR,dataTasks:i})}}return t}};function scenarioPairUid(e,t){const r=e?.uid||"",n=t?.uid||"";return`${r}::${n}`}function runChecks(e,t,r,n,s){const i=e.bundle.modelSpec,o=new CheckPlanner(i);o.addAllChecks(t,s);const u=o.buildPlan(),c=new Map;for(const[m,T]of u.dataRefs.entries())n.addRequest(void 0,T.scenario.spec,T.dataset.datasetKey,$=>{const C=$.datasetR;C&&c.set(m,C)});const d=new Map;for(const[m,T]of u.tasks.entries())T.skip===!0?d.set(m,{status:"skipped"}):r.addRequest(void 0,T.scenario.spec,T.dataset.datasetKey,$=>{const C=$.datasetR,D=runCheck(T,C,c);d.set(m,D)});return()=>buildCheckReport(u,d)}function runCheck(e,t,r){if(t===void 0)return{status:"error",message:"no data available"};let n;if(e.dataRefs){n=new Map;for(const[s,i]of e.dataRefs.entries()){const o=r?.get(i.key);if(o===void 0){if(i.dataset.datasetKey===void 0)return{status:"error",errorInfo:{kind:"unknown-dataset",name:i.dataset.name}};if(i.scenario.spec===void 0){if(i.scenario.error)return{status:"error",errorInfo:{kind:i.scenario.error.kind,name:i.scenario.error.name}};{let u;return i.scenario.inputDescs.length>0?u=i.scenario.inputDescs[0].name:u="unknown",{status:"error",errorInfo:{kind:"unknown-input",name:u}}}}else return{status:"error",message:"unresolved data reference"}}n.set(s,o)}}return e.action.run(t,n)}function runComparisons(e,t,r){function n(T,$){let C=T.toLowerCase();return $&&(C+=` :: ${$.toLowerCase()}`),C}const s=new Set(r.map(T=>n(T.title,T.subtitle))),i=[...e.scenarios.getAllScenarios()];let o;const u=i.findIndex(T=>{const $=T.settings;return $.kind==="all-inputs-settings"&&$.position==="at-default"});u!==-1&&(o=i.splice(u,1)[0]);const c=[],d=new Map;function m(T,$){const C=e.datasets.getDatasetKeysForScenario(T);if(s.has(n(T.title,T.subtitle))){for(const F of C)c.push({scenarioKey:T.key,datasetKey:F,diffReport:void 0});return}for(const F of C)t.addRequest(T.specL,T.specR,F,g=>{const q=diffDatasets(g.datasetL,g.datasetR);if($)d.set(F,q),c.push({scenarioKey:T.key,datasetKey:F,diffReport:q});else{const x=d.get(F);c.push({scenarioKey:T.key,datasetKey:F,diffReport:q,baselineDiffReport:x})}})}m(o,!0);for(const T of i)m(T,!1);return()=>c}var SuiteRunner=class{constructor(e,t,r){this.config=e,this.taskQueue=t,this.callbacks=r,this.perfStatsL=new PerfStats,this.perfStatsR=new PerfStats,this.pendingTaskKeys=new Set,this.stopped=!1}cancel(){if(!this.stopped){for(const e of this.pendingTaskKeys)this.taskQueue.cancelTask(e);this.stopped=!0}}start(e){var t,r,n,s,i,o,u,c;(r=(t=this.callbacks).onProgress)==null||r.call(t,0);const d=this.config.check.bundle.modelSpec,m=new DataPlanner(d.outputVars.size),T=new DataPlanner(d.outputVars.size),$=parseTestYaml(this.config.check.tests);if($.isErr()){(s=(n=this.callbacks).onError)==null||s.call(n,$.error);return}const C=$.value,D=e?.skipChecks||[],F=runChecks(this.config.check,C,m,T,D);let g;if(this.config.comparison){const re=e?.skipComparisonScenarios||[];g=runComparisons(this.config.comparison,m,re)}const q=T.buildPlan(),x=m.buildPlan(),P=[...q.requests,...x.requests],K=P.length;if(K===0){const re=F();let ve;this.config.comparison&&(ve={testReports:g(),perfReportL:this.perfStatsL.toReport(),perfReportR:this.perfStatsR.toReport()}),this.cancel(),(o=(i=this.callbacks).onProgress)==null||o.call(i,1),(c=(u=this.callbacks).onComplete)==null||c.call(u,{checkReport:re,comparisonReport:ve});return}const L=re=>{var ve,ye;{const Se=F();let Ne;this.config.comparison&&(Ne={testReports:g(),perfReportL:this.perfStatsL.toReport(),perfReportR:this.perfStatsR.toReport()}),(ye=(ve=this.callbacks).onComplete)==null||ye.call(ve,{checkReport:Se,comparisonReport:Ne})}};let B=0,J=1;for(const re of P){const ve={key:`suite-runner-${J++}`,kind:"suite-runner",process:ye=>__async(this,null,function*(){var Se,Ne;this.pendingTaskKeys.delete(ve.key),yield this.processRequest(re,ye),B++,(Ne=(Se=this.callbacks).onProgress)==null||Ne.call(Se,B/K),B===K&&L()})};this.taskQueue.addTask(ve),this.pendingTaskKeys.add(ve.key)}}processRequest(e,t){return __async(this,null,function*(){const r=new Set;for(const T of e.dataTasks)r.add(T.datasetKey);const n=[...r];function s(T,$){return __async(this,null,function*(){if(T&&$)return T.getDatasetsForScenario($,n)})}const i=t.L,o=t.R,[u,c]=yield Promise.all([s(i,e.scenarioSpecL),s(o,e.scenarioSpecR)]);u?.modelRunTime&&this.perfStatsL.addRun(u?.modelRunTime),c?.modelRunTime&&this.perfStatsR.addRun(c?.modelRunTime);const d=u?.datasetMap,m=c?.datasetMap;for(const T of e.dataTasks){const $=d?.get(T.datasetKey),C=m?.get(T.datasetKey);T.dataAction({datasetL:$,datasetR:C})}})}};function runSuiteWithTaskQueue(e,t,r,n){const s=new SuiteRunner(e,t,r);return s.start(n),()=>{s.cancel()}}function runSuite(e,t,r){const n=TaskQueue.getInstance();return runSuiteWithTaskQueue(e,n,t,r)}var fontfaceobserver_standalone={exports:{}},hasRequiredFontfaceobserver_standalone;function requireFontfaceobserver_standalone(){return hasRequiredFontfaceobserver_standalone||(hasRequiredFontfaceobserver_standalone=1,(function(e){(function(){function t(F,g){document.addEventListener?F.addEventListener("scroll",g,!1):F.attachEvent("scroll",g)}function r(F){document.body?F():document.addEventListener?document.addEventListener("DOMContentLoaded",function g(){document.removeEventListener("DOMContentLoaded",g),F()}):document.attachEvent("onreadystatechange",function g(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",g),F())})}function n(F){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(F)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function s(F,g){F.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+g+";"}function i(F){var g=F.g.offsetWidth,q=g+100;return F.j.style.width=q+"px",F.i.scrollLeft=q,F.h.scrollLeft=F.h.scrollWidth+100,F.l!==g?(F.l=g,!0):!1}function o(F,g){function q(){var P=x;i(P)&&P.g.parentNode!==null&&g(P.l)}var x=F;t(F.h,q),t(F.i,q),i(F)}function u(F,g,q){g=g||{},q=q||window,this.family=F,this.style=g.style||"normal",this.weight=g.weight||"normal",this.stretch=g.stretch||"normal",this.context=q}var c=null,d=null,m=null,T=null;function $(F){return d===null&&(C(F)&&/Apple/.test(window.navigator.vendor)?(F=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!F&&603>parseInt(F[1],10)):d=!1),d}function C(F){return T===null&&(T=!!F.document.fonts),T}function D(F,g){var q=F.style,x=F.weight;if(m===null){var P=document.createElement("div");try{P.style.font="condensed 100px sans-serif"}catch{}m=P.style.font!==""}return[q,x,m?F.stretch:"","100px",g].join(" ")}u.prototype.load=function(F,g){var q=this,x=F||"BESbswy",P=0,K=g||3e3,L=new Date().getTime();return new Promise(function(B,J){if(C(q.context)&&!$(q.context)){var re=new Promise(function(ye,Se){function Ne(){new Date().getTime()-L>=K?Se(Error(""+K+"ms timeout exceeded")):q.context.document.fonts.load(D(q,'"'+q.family+'"'),x).then(function(Ke){1<=Ke.length?ye():setTimeout(Ne,25)},Se)}Ne()}),ve=new Promise(function(ye,Se){P=setTimeout(function(){Se(Error(""+K+"ms timeout exceeded"))},K)});Promise.race([ve,re]).then(function(){clearTimeout(P),B(q)},J)}else r(function(){function ye(){var ke;(ke=hi!=-1&&gi!=-1||hi!=-1&&Gi!=-1||gi!=-1&&Gi!=-1)&&((ke=hi!=gi&&hi!=Gi&&gi!=Gi)||(c===null&&(ke=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!ke&&(536>parseInt(ke[1],10)||parseInt(ke[1],10)===536&&11>=parseInt(ke[2],10))),ke=c&&(hi==bs&&gi==bs&&Gi==bs||hi==ua&&gi==ua&&Gi==ua||hi==Re&&gi==Re&&Gi==Re)),ke=!ke),ke&&(ie.parentNode!==null&&ie.parentNode.removeChild(ie),clearTimeout(P),B(q))}function Se(){if(new Date().getTime()-L>=K)ie.parentNode!==null&&ie.parentNode.removeChild(ie),J(Error(""+K+"ms timeout exceeded"));else{var ke=q.context.document.hidden;(ke===!0||ke===void 0)&&(hi=Ne.g.offsetWidth,gi=Ke.g.offsetWidth,Gi=Ar.g.offsetWidth,ye()),P=setTimeout(Se,50)}}var Ne=new n(x),Ke=new n(x),Ar=new n(x),hi=-1,gi=-1,Gi=-1,bs=-1,ua=-1,Re=-1,ie=document.createElement("div");ie.dir="ltr",s(Ne,D(q,"sans-serif")),s(Ke,D(q,"serif")),s(Ar,D(q,"monospace")),ie.appendChild(Ne.g),ie.appendChild(Ke.g),ie.appendChild(Ar.g),q.context.document.body.appendChild(ie),bs=Ne.g.offsetWidth,ua=Ke.g.offsetWidth,Re=Ar.g.offsetWidth,Se(),o(Ne,function(ke){hi=ke,ye()}),s(Ne,D(q,'"'+q.family+'",sans-serif')),o(Ke,function(ke){gi=ke,ye()}),s(Ke,D(q,'"'+q.family+'",serif')),o(Ar,function(ke){Gi=ke,ye()}),s(Ar,D(q,'"'+q.family+'",monospace'))})})},e.exports=u})()})(fontfaceobserver_standalone)),fontfaceobserver_standalone.exports}var fontfaceobserver_standaloneExports=requireFontfaceobserver_standalone();const Ia=getDefaultExportFromCjs$2(fontfaceobserver_standaloneExports);var faFilter={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M32 64C19.1 64 7.4 71.8 2.4 83.8S.2 109.5 9.4 118.6L192 301.3 192 416c0 8.5 3.4 16.6 9.4 22.6l64 64c9.2 9.2 22.9 11.9 34.9 6.9S320 492.9 320 480l0-178.7 182.6-182.6c9.2-9.2 11.9-22.9 6.9-34.9S492.9 64 480 64L32 64z"]},faLaptop={prefix:"fas",iconName:"laptop",icon:[640,512,[128187],"f109","M128 32C92.7 32 64 60.7 64 96l0 240 64 0 0-240 384 0 0 240 64 0 0-240c0-35.3-28.7-64-64-64L128 32zM19.2 384C8.6 384 0 392.6 0 403.2 0 445.6 34.4 480 76.8 480l486.4 0c42.4 0 76.8-34.4 76.8-76.8 0-10.6-8.6-19.2-19.2-19.2L19.2 384z"]},faGear={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},faCog=faGear,faHouse={prefix:"fas",iconName:"house",icon:[512,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"]},faHome=faHouse,faXmark={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M55.1 73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L147.2 256 9.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192.5 301.3 329.9 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.8 256 375.1 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192.5 210.7 55.1 73.4z"]},faRotateRight={prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M488 192l-144 0c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l46.7-46.7c-75.3-58.6-184.3-53.3-253.5 15.9-75 75-75 196.5 0 271.5s196.5 75 271.5 0c8.2-8.2 15.5-16.9 21.9-26.1 10.1-14.5 30.1-18 44.6-7.9s18 30.1 7.9 44.6c-8.5 12.2-18.2 23.8-29.1 34.7-100 100-262.1 100-362 0S-25 175 75 75c94.3-94.3 243.7-99.6 344.3-16.2L471 7c6.9-6.9 17.2-8.9 26.2-5.2S512 14.3 512 24l0 144c0 13.3-10.7 24-24 24z"]},fuzzysort$1={exports:{}},fuzzysort=fuzzysort$1.exports,hasRequiredFuzzysort;function requireFuzzysort(){return hasRequiredFuzzysort||(hasRequiredFuzzysort=1,(function(e){((t,r)=>{e.exports?e.exports=r():t.fuzzysort=r()})(fuzzysort,t=>{var r=(G,X)=>{if(!G||!X)return Re;var ce=D(G);gi(X)||(X=C(X));var De=ce.bitflags;return(De&X._bitflags)!==De?Re:g(ce,X)},n=(G,X,ce)=>{if(!G)return ce?.all?F(X,ce):ua;var De=D(G),qe=De.bitflags,bt=De.containsSpace,vr=T(ce?.threshold||0),te=ce?.limit||Gi,se=0,$e=0,Ie=X.length;function Ye(be){se<te?(ue.add(be),++se):(++$e,be._score>ue.peek()._score&&ue.replaceTop(be))}if(ce?.key)for(var Je=ce.key,pi=0;pi<Ie;++pi){var Os=X[pi],vi=hi(Os,Je);if(vi&&(gi(vi)||(vi=C(vi)),(qe&vi._bitflags)===qe)){var Ui=g(De,vi);Ui!==Re&&(Ui._score<vr||(Ui.obj=Os,Ye(Ui)))}}else if(ce?.keys){var ca=ce.keys,va=ca.length;e:for(var pi=0;pi<Ie;++pi){var Os=X[pi];{for(var da=0,ha=0;ha<va;++ha){var Je=ca[ha],vi=hi(Os,Je);if(!vi){Ke[ha]=ie;continue}gi(vi)||(vi=C(vi)),Ke[ha]=vi,da|=vi._bitflags}if((qe&da)!==qe)continue}if(bt)for(let ka=0;ka<De.spaceSearches.length;ka++)Se[ka]=bs;for(var ha=0;ha<va;++ha){if(vi=Ke[ha],vi===ie){Ar[ha]=ie;continue}if(Ar[ha]=g(De,vi,!1,bt),Ar[ha]===Re){Ar[ha]=ie;continue}if(bt)for(let xa=0;xa<De.spaceSearches.length;xa++){if(Ne[xa]>-1e3&&Se[xa]>bs){var ya=(Se[xa]+Ne[xa])/4;ya>Se[xa]&&(Se[xa]=ya)}Ne[xa]>Se[xa]&&(Se[xa]=Ne[xa])}}if(bt){for(let ka=0;ka<De.spaceSearches.length;ka++)if(Se[ka]===bs)continue e}else{var mi=!1;for(let ka=0;ka<va;ka++)if(Ar[ka]._score!==bs){mi=!0;break}if(!mi)continue}var fa=new c(va);for(let ka=0;ka<va;ka++)fa[ka]=Ar[ka];if(bt){var pa=0;for(let ka=0;ka<De.spaceSearches.length;ka++)pa+=Se[ka]}else{var pa=bs;for(let xa=0;xa<va;xa++){var Ui=fa[xa];if(Ui._score>-1e3&&pa>bs){var ya=(pa+Ui._score)/4;ya>pa&&(pa=ya)}Ui._score>pa&&(pa=Ui._score)}}if(fa.obj=Os,fa._score=pa,ce?.scoreFn){if(pa=ce.scoreFn(fa),!pa)continue;pa=T(pa),fa._score=pa}pa<vr||Ye(fa)}}else for(var pi=0;pi<Ie;++pi){var vi=X[pi];if(vi&&(gi(vi)||(vi=C(vi)),(qe&vi._bitflags)===qe)){var Ui=g(De,vi);Ui!==Re&&(Ui._score<vr||Ye(Ui))}}if(se===0)return ua;for(var _a=new Array(se),pi=se-1;pi>=0;--pi)_a[pi]=ue.poll();return _a.total=se+$e,_a},s=(G,X="<b>",ce="</b>")=>{for(var De=typeof X=="function"?X:void 0,qe=G.target,bt=qe.length,vr=G.indexes,te="",se=0,$e=0,Ie=!1,Ye=[],Je=0;Je<bt;++Je){var pi=qe[Je];if(vr[$e]===Je){if(++$e,Ie||(Ie=!0,De?(Ye.push(te),te=""):te+=X),$e===vr.length){De?(te+=pi,Ye.push(De(te,se++)),te="",Ye.push(qe.substr(Je+1))):te+=pi+ce+qe.substr(Je+1);break}}else Ie&&(Ie=!1,De?(Ye.push(De(te,se++)),te=""):te+=ce);te+=pi}return De?Ye:te},i=G=>{typeof G=="number"?G=""+G:typeof G!="string"&&(G="");var X=P(G);return d(G,{_targetLower:X._lower,_targetLowerCodes:X.lowerCodes,_bitflags:X.bitflags})},o=()=>{B.clear(),J.clear()};class u{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((X,ce)=>X-ce)}set indexes(X){return this._indexes=X}highlight(X,ce){return s(this,X,ce)}get score(){return m(this._score)}set score(X){this._score=T(X)}}class c extends Array{get score(){return m(this._score)}set score(X){this._score=T(X)}}var d=(G,X)=>{const ce=new u;return ce.target=G,ce.obj=X.obj??Re,ce._score=X._score??bs,ce._indexes=X._indexes??[],ce._targetLower=X._targetLower??"",ce._targetLowerCodes=X._targetLowerCodes??Re,ce._nextBeginningIndexes=X._nextBeginningIndexes??Re,ce._bitflags=X._bitflags??0,ce},m=G=>G===bs?0:G>1?G:Math.E**(((-G+1)**.04307-1)*-2),T=G=>G===0?bs:G>1?G:1-Math.pow(Math.log(G)/-2+1,1/.04307),$=G=>{typeof G=="number"?G=""+G:typeof G!="string"&&(G=""),G=G.trim();var X=P(G),ce=[];if(X.containsSpace){var De=G.split(/\s+/);De=[...new Set(De)];for(var qe=0;qe<De.length;qe++)if(De[qe]!==""){var bt=P(De[qe]);ce.push({lowerCodes:bt.lowerCodes,_lower:De[qe].toLowerCase(),containsSpace:!1})}}return{lowerCodes:X.lowerCodes,_lower:X._lower,containsSpace:X.containsSpace,bitflags:X.bitflags,spaceSearches:ce}},C=G=>{if(G.length>999)return i(G);var X=B.get(G);return X!==void 0||(X=i(G),B.set(G,X)),X},D=G=>{if(G.length>999)return $(G);var X=J.get(G);return X!==void 0||(X=$(G),J.set(G,X)),X},F=(G,X)=>{var ce=[];ce.total=G.length;var De=X?.limit||Gi;if(X?.key)for(var qe=0;qe<G.length;qe++){var bt=G[qe],vr=hi(bt,X.key);if(vr!=Re){gi(vr)||(vr=C(vr));var te=d(vr.target,{_score:vr._score,obj:bt});if(ce.push(te),ce.length>=De)return ce}}else if(X?.keys)for(var qe=0;qe<G.length;qe++){for(var bt=G[qe],se=new c(X.keys.length),$e=X.keys.length-1;$e>=0;--$e){var vr=hi(bt,X.keys[$e]);if(!vr){se[$e]=ie;continue}gi(vr)||(vr=C(vr)),vr._score=bs,vr._indexes.len=0,se[$e]=vr}if(se.obj=bt,se._score=bs,ce.push(se),ce.length>=De)return ce}else for(var qe=0;qe<G.length;qe++){var vr=G[qe];if(vr!=Re&&(gi(vr)||(vr=C(vr)),vr._score=bs,vr._indexes.len=0,ce.push(vr),ce.length>=De))return ce}return ce},g=(G,X,ce=!1,De=!1)=>{if(ce===!1&&G.containsSpace)return q(G,X,De);for(var qe=G._lower,bt=G.lowerCodes,vr=bt[0],te=X._targetLowerCodes,se=bt.length,$e=te.length,pi=0,Ie=0,Ye=0;;){var Je=vr===te[Ie];if(Je){if(re[Ye++]=Ie,++pi,pi===se)break;vr=bt[pi]}if(++Ie,Ie>=$e)return Re}var pi=0,Os=!1,vi=0,Ui=X._nextBeginningIndexes;Ui===Re&&(Ui=X._nextBeginningIndexes=L(X.target)),Ie=re[0]===0?0:Ui[re[0]-1];var ca=0;if(Ie!==$e)for(;;)if(Ie>=$e){if(pi<=0||(++ca,ca>200))break;--pi;var va=ve[--vi];Ie=Ui[va]}else{var Je=bt[pi]===te[Ie];if(Je){if(ve[vi++]=Ie,++pi,pi===se){Os=!0;break}++Ie}else Ie=Ui[Ie]}var da=se<=1?-1:X._targetLower.indexOf(qe,re[0]),ha=!!~da,ya=ha?da===0||X._nextBeginningIndexes[da-1]===da:!1;if(ha&&!ya){for(var mi=0;mi<Ui.length;mi=Ui[mi])if(!(mi<=da)){for(var fa=0;fa<se&&bt[fa]===X._targetLowerCodes[mi+fa];fa++);if(fa===se){da=mi,ya=!0;break}}}var pa=ka=>{for(var xa=0,Th=0,eh=1;eh<se;++eh)ka[eh]-ka[eh-1]!==1&&(xa-=ka[eh],++Th);var Oh=ka[se-1]-ka[0]-(se-1);if(xa-=(12+Oh)*Th,ka[0]!==0&&(xa-=ka[0]*ka[0]*.2),!Os)xa*=1e3;else{for(var uh=1,eh=Ui[0];eh<$e;eh=Ui[eh])++uh;uh>24&&(xa*=(uh-24)*10)}return xa-=($e-se)/2,ha&&(xa/=1+se*se*1),ya&&(xa/=1+se*se*1),xa-=($e-se)/2,xa};if(Os)if(ya){for(var mi=0;mi<se;++mi)re[mi]=da+mi;var _a=re,be=pa(re)}else var _a=ve,be=pa(ve);else{if(ha)for(var mi=0;mi<se;++mi)re[mi]=da+mi;var _a=re,be=pa(_a)}X._score=be;for(var mi=0;mi<se;++mi)X._indexes[mi]=_a[mi];X._indexes.len=se;const Ca=new u;return Ca.target=X.target,Ca._score=X._score,Ca._indexes=X._indexes,Ca},q=(G,X,ce)=>{for(var De=new Set,qe=0,bt=Re,vr=0,te=G.spaceSearches,se=te.length,$e=0,Ie=()=>{for(let ya=$e-1;ya>=0;ya--)X._nextBeginningIndexes[ye[ya*2+0]]=ye[ya*2+1]},Ye=!1,ha=0;ha<se;++ha){Ne[ha]=bs;var Je=te[ha];if(bt=g(Je,X),ce){if(bt===Re)continue;Ye=!0}else if(bt===Re)return Ie(),Re;var pi=ha===se-1;if(!pi){var Os=bt._indexes,vi=!0;for(let mi=0;mi<Os.len-1;mi++)if(Os[mi+1]-Os[mi]!==1){vi=!1;break}if(vi){var Ui=Os[Os.len-1]+1,ca=X._nextBeginningIndexes[Ui-1];for(let mi=Ui-1;mi>=0&&ca===X._nextBeginningIndexes[mi];mi--)X._nextBeginningIndexes[mi]=Ui,ye[$e*2+0]=mi,ye[$e*2+1]=ca,$e++}}qe+=bt._score/se,Ne[ha]=bt._score/se,bt._indexes[0]<vr&&(qe-=(vr-bt._indexes[0])*2),vr=bt._indexes[0];for(var va=0;va<bt._indexes.len;++va)De.add(bt._indexes[va])}if(ce&&!Ye)return Re;Ie();var da=g(G,X,!0);if(da!==Re&&da._score>qe){if(ce)for(var ha=0;ha<se;++ha)Ne[ha]=da._score/se;return da}ce&&(bt=X),bt._score=qe;var ha=0;for(let ya of De)bt._indexes[ha++]=ya;return bt._indexes.len=ha,bt},x=G=>G.replace(new RegExp("\\p{Script=Latin}+","gu"),X=>X.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),P=G=>{G=x(G);for(var X=G.length,ce=G.toLowerCase(),De=[],qe=0,bt=!1,vr=0;vr<X;++vr){var te=De[vr]=ce.charCodeAt(vr);if(te===32){bt=!0;continue}var se=te>=97&&te<=122?te-97:te>=48&&te<=57?26:te<=127?30:31;qe|=1<<se}return{lowerCodes:De,bitflags:qe,containsSpace:bt,_lower:ce}},K=G=>{for(var X=G.length,ce=[],De=0,qe=!1,bt=!1,vr=0;vr<X;++vr){var te=G.charCodeAt(vr),se=te>=65&&te<=90,$e=se||te>=97&&te<=122||te>=48&&te<=57,Ie=se&&!qe||!bt||!$e;qe=se,bt=$e,Ie&&(ce[De++]=vr)}return ce},L=G=>{G=x(G);for(var X=G.length,ce=K(G),De=[],qe=ce[0],bt=0,vr=0;vr<X;++vr)qe>vr?De[vr]=qe:(qe=ce[++bt],De[vr]=qe===void 0?X:qe);return De},B=new Map,J=new Map,re=[],ve=[],ye=[],Se=[],Ne=[],Ke=[],Ar=[],hi=(G,X)=>{var ce=G[X];if(ce!==void 0)return ce;if(typeof X=="function")return X(G);var De=X;Array.isArray(X)||(De=X.split("."));for(var qe=De.length,bt=-1;G&&++bt<qe;)G=G[De[bt]];return G},gi=G=>typeof G=="object"&&typeof G._bitflags=="number",Gi=1/0,bs=-Gi,ua=[];ua.total=0;var Re=null,ie=i(""),ke=G=>{var X=[],ce=0,De={},qe=bt=>{for(var vr=0,te=X[vr],se=1;se<ce;){var $e=se+1;vr=se,$e<ce&&X[$e]._score<X[se]._score&&(vr=$e),X[vr-1>>1]=X[vr],se=1+(vr<<1)}for(var Ie=vr-1>>1;vr>0&&te._score<X[Ie]._score;Ie=(vr=Ie)-1>>1)X[vr]=X[Ie];X[vr]=te};return De.add=(bt=>{var vr=ce;X[ce++]=bt;for(var te=vr-1>>1;vr>0&&bt._score<X[te]._score;te=(vr=te)-1>>1)X[vr]=X[te];X[vr]=bt}),De.poll=(bt=>{if(ce!==0){var vr=X[0];return X[0]=X[--ce],qe(),vr}}),De.peek=(bt=>{if(ce!==0)return X[0]}),De.replaceTop=(bt=>{X[0]=bt,qe()}),De},ue=ke();return{single:r,go:n,prepare:i,cleanup:o}})})(fuzzysort$1)),fuzzysort$1.exports}var fuzzysortExports=requireFuzzysort();const Ea=getDefaultExportFromCjs$2(fuzzysortExports);var faCloud={prefix:"far",iconName:"cloud",icon:[576,512,[9729],"f0c2","M80 192c0-88.4 71.6-160 160-160 47.1 0 89.4 20.4 118.7 52.7 10.6-3.1 21.8-4.7 33.3-4.7 66.3 0 120 53.7 120 120 0 13.2-2.1 25.9-6.1 37.8 41.6 21.1 70.1 64.3 70.1 114.2 0 70.7-57.3 128-128 128l-304 0c-79.5 0-144-64.5-144-144 0-56.8 32.9-105.9 80.7-129.4-.4-4.8-.7-9.7-.7-14.6zM240 80c-61.9 0-112 50.1-112 112 0 8.4 .9 16.6 2.7 24.5 2.7 12.1-4.3 24.3-16.1 28.1-38.7 12.4-66.6 48.7-66.6 91.4 0 53 43 96 96 96l304 0c44.2 0 80-35.8 80-80 0-37.4-25.7-68.9-60.5-77.6-7.5-1.9-13.6-7.2-16.5-14.3s-2.1-15.2 2-21.7c7-11.1 11-24.2 11-38.3 0-39.8-32.2-72-72-72-11.1 0-21.5 2.5-30.8 6.9-10.5 5-23.1 1.7-29.8-7.8-20.3-28.6-53.7-47.1-91.3-47.1z"]};function copyTextToClipboard(e,{target:t=document.body}={}){if(typeof e!="string")throw new TypeError(`Expected parameter \`text\` to be a \`string\`, got \`${typeof e}\`.`);const r=document.createElement("textarea"),n=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.all="unset",r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.width="2em",r.style.height="2em",r.style.padding="0",r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.style.fontSize="12pt",r.style.whiteSpace="pre";const s=document.getSelection(),i=s.rangeCount>0&&s.getRangeAt(0);t.append(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length;let o=!1;try{o=document.execCommand("copy")}catch{}return r.remove(),i&&(s.removeAllRanges(),s.addRange(i)),n&&n.focus(),o}var Chart$1={exports:{}};var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(e){hookCallback=e}function isArray(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function isObject(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function isObjectEmpty(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(hasOwnProp(e,t))return!1;return!0}function isUndefined(e){return e===void 0}function isNumber(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function isDate(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function map(e,t){var r=[],n,s=e.length;for(n=0;n<s;++n)r.push(t(e[n],n));return r}function extend(e,t){for(var r in t)hasOwnProp(t,r)&&(e[r]=t[r]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function createUTC(e,t,r,n){return createLocalOrUTC(e,t,r,n,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(e){return e._pf==null&&(e._pf=defaultParsingFlags()),e._pf}var some;Array.prototype.some?some=Array.prototype.some:some=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function isValid(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=getParsingFlags(e),r=some.call(t.parsedDateParts,function(s){return s!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function createInvalid(e){var t=createUTC(NaN);return e!=null?extend(getParsingFlags(t),e):getParsingFlags(t).userInvalidated=!0,t}var momentProperties=hooks.momentProperties=[],updateInProgress=!1;function copyConfig(e,t){var r,n,s,i=momentProperties.length;if(isUndefined(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),isUndefined(t._i)||(e._i=t._i),isUndefined(t._f)||(e._f=t._f),isUndefined(t._l)||(e._l=t._l),isUndefined(t._strict)||(e._strict=t._strict),isUndefined(t._tzm)||(e._tzm=t._tzm),isUndefined(t._isUTC)||(e._isUTC=t._isUTC),isUndefined(t._offset)||(e._offset=t._offset),isUndefined(t._pf)||(e._pf=getParsingFlags(t)),isUndefined(t._locale)||(e._locale=t._locale),i>0)for(r=0;r<i;r++)n=momentProperties[r],s=t[n],isUndefined(s)||(e[n]=s);return e}function Moment(e){copyConfig(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(e){return e instanceof Moment||e!=null&&e._isAMomentObject!=null}function warn(e){hooks.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var r=!0;return extend(function(){if(hooks.deprecationHandler!=null&&hooks.deprecationHandler(null,e),r){var n=[],s,i,o,u=arguments.length;for(i=0;i<u;i++){if(s="",typeof arguments[i]=="object"){s+=`
[`+i+"] ";for(o in arguments[0])hasOwnProp(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[i];n.push(s)}warn(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var deprecations={};function deprecateSimple(e,t){hooks.deprecationHandler!=null&&hooks.deprecationHandler(e,t),deprecations[e]||(warn(t),deprecations[e]=!0)}hooks.suppressDeprecationWarnings=!1;hooks.deprecationHandler=null;function isFunction(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function set(e){var t,r;for(r in e)hasOwnProp(e,r)&&(t=e[r],isFunction(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(e,t){var r=extend({},e),n;for(n in t)hasOwnProp(t,n)&&(isObject(e[n])&&isObject(t[n])?(r[n]={},extend(r[n],e[n]),extend(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)hasOwnProp(e,n)&&!hasOwnProp(t,n)&&isObject(e[n])&&(r[n]=extend({},r[n]));return r}function Locale(e){e!=null&&this.set(e)}var keys;Object.keys?keys=Object.keys:keys=function(e){var t,r=[];for(t in e)hasOwnProp(e,t)&&r.push(t);return r};var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return isFunction(n)?n.call(t,r):n}function zeroFill(e,t,r){var n=""+Math.abs(e),s=t-n.length,i=e>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(e,t,r,n){var s=n;typeof n=="string"&&(s=function(){return this[n]()}),e&&(formatTokenFunctions[e]=s),t&&(formatTokenFunctions[t[0]]=function(){return zeroFill(s.apply(this,arguments),t[1],t[2])}),r&&(formatTokenFunctions[r]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function removeFormattingTokens(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function makeFormatFunction(e){var t=e.match(formattingTokens),r,n;for(r=0,n=t.length;r<n;r++)formatTokenFunctions[t[r]]?t[r]=formatTokenFunctions[t[r]]:t[r]=removeFormattingTokens(t[r]);return function(s){var i="",o;for(o=0;o<n;o++)i+=isFunction(t[o])?t[o].call(s,e):t[o];return i}}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),formatFunctions[t]=formatFunctions[t]||makeFormatFunction(t),formatFunctions[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){var r=5;function n(s){return t.longDateFormat(s)||s}for(localFormattingTokens.lastIndex=0;r>=0&&localFormattingTokens.test(e);)e=e.replace(localFormattingTokens,n),localFormattingTokens.lastIndex=0,r-=1;return e}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(formattingTokens).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(e){return this._ordinal.replace("%d",e)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(e,t,r,n){var s=this._relativeTime[r];return isFunction(s)?s(e,t,r,n):s.replace(/%d/i,e)}function pastFuture(e,t){var r=this._relativeTime[e>0?"future":"past"];return isFunction(r)?r(t):r.replace(/%s/i,t)}var aliases={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function normalizeUnits(e){return typeof e=="string"?aliases[e]||aliases[e.toLowerCase()]:void 0}function normalizeObjectUnits(e){var t={},r,n;for(n in e)hasOwnProp(e,n)&&(r=normalizeUnits(n),r&&(t[r]=e[n]));return t}var priorities={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function getPrioritizedUnits(e){var t=[],r;for(r in e)hasOwnProp(e,r)&&t.push({unit:r,priority:priorities[r]});return t.sort(function(n,s){return n.priority-s.priority}),t}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,match1to2NoLeadingZero=/^[1-9]\d?/,match1to2HasZero=/^([1-9]\d|\d)/,regexes;regexes={};function addRegexToken(e,t,r){regexes[e]=isFunction(t)?t:function(n,s){return n&&r?r:t}}function getParseRegexForToken(e,t){return hasOwnProp(regexes,e)?regexes[e](t._strict,t._locale):new RegExp(unescapeFormat(e))}function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,s,i){return r||n||s||i}))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function absFloor(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function toInt(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=absFloor(t)),r}var tokens={};function addParseToken(e,t){var r,n=t,s;for(typeof e=="string"&&(e=[e]),isNumber(t)&&(n=function(i,o){o[t]=toInt(i)}),s=e.length,r=0;r<s;r++)tokens[e[r]]=n}function addWeekParseToken(e,t){addParseToken(e,function(r,n,s,i){s._w=s._w||{},t(r,s._w,s,i)})}function addTimeToArrayFromToken(e,t,r){t!=null&&hasOwnProp(tokens,e)&&tokens[e](t,r._a,r,e)}function isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;addFormatToken("Y",0,0,function(){var e=this.year();return e<=9999?zeroFill(e,4):"+"+e});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,!0],0,"year");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(e,t){t[YEAR]=e.length===2?hooks.parseTwoDigitYear(e):toInt(e)});addParseToken("YY",function(e,t){t[YEAR]=hooks.parseTwoDigitYear(e)});addParseToken("Y",function(e,t){t[YEAR]=parseInt(e,10)});function daysInYear(e){return isLeapYear(e)?366:365}hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function makeGetSet(e,t){return function(r){return r!=null?(set$1(this,e,r),hooks.updateOffset(this,t),this):get(this,e)}}function get(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function set$1(e,t,r){var n,s,i,o,u;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(s?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(s?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(s?n.setUTCHours(r):n.setHours(r));case"Date":return void(s?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}i=r,o=e.month(),u=e.date(),u=u===29&&o===1&&!isLeapYear(i)?28:u,s?n.setUTCFullYear(i,o,u):n.setFullYear(i,o,u)}}function stringGet(e){return e=normalizeUnits(e),isFunction(this[e])?this[e]():this}function stringSet(e,t){if(typeof e=="object"){e=normalizeObjectUnits(e);var r=getPrioritizedUnits(e),n,s=r.length;for(n=0;n<s;n++)this[r[n].unit](e[r[n].unit])}else if(e=normalizeUnits(e),isFunction(this[e]))return this[e](t);return this}function mod(e,t){return(e%t+t)%t}var indexOf;Array.prototype.indexOf?indexOf=Array.prototype.indexOf:indexOf=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function daysInMonth(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=mod(t,12);return e+=(t-r)/12,r===1?isLeapYear(e)?29:28:31-r%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});addFormatToken("MMMM",0,0,function(e){return this.localeData().months(this,e)});addRegexToken("M",match1to2,match1to2NoLeadingZero);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(e,t){return t.monthsShortRegex(e)});addRegexToken("MMMM",function(e,t){return t.monthsRegex(e)});addParseToken(["M","MM"],function(e,t){t[MONTH]=toInt(e)-1});addParseToken(["MMM","MMMM"],function(e,t,r,n){var s=r._locale.monthsParse(e,n,r._strict);s!=null?t[MONTH]=s:getParsingFlags(r).invalidMonth=e});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;function localeMonths(e,t){return e?isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(t)?"format":"standalone"][e.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(e,t){return e?isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(t)?"format":"standalone"][e.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(e,t,r){var n,s,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=createUTC([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?t==="MMM"?(s=indexOf.call(this._shortMonthsParse,o),s!==-1?s:null):(s=indexOf.call(this._longMonthsParse,o),s!==-1?s:null):t==="MMM"?(s=indexOf.call(this._shortMonthsParse,o),s!==-1?s:(s=indexOf.call(this._longMonthsParse,o),s!==-1?s:null)):(s=indexOf.call(this._longMonthsParse,o),s!==-1?s:(s=indexOf.call(this._shortMonthsParse,o),s!==-1?s:null))}function localeMonthsParse(e,t,r){var n,s,i;if(this._monthsParseExact)return handleStrictParse.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=createUTC([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function setMonth(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=toInt(t);else if(t=e.localeData().monthsParse(t),!isNumber(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,daysInMonth(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function getSetMonth(e){return e!=null?(setMonth(this,e),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function e(c,d){return d.length-c.length}var t=[],r=[],n=[],s,i,o,u;for(s=0;s<12;s++)i=createUTC([2e3,s]),o=regexEscape(this.monthsShort(i,"")),u=regexEscape(this.months(i,"")),t.push(o),r.push(u),n.push(u),n.push(o);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function createDate(e,t,r,n,s,i,o){var u;return e<100&&e>=0?(u=new Date(e+400,t,r,n,s,i,o),isFinite(u.getFullYear())&&u.setFullYear(e)):u=new Date(e,t,r,n,s,i,o),u}function createUTCDate(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function firstWeekOffset(e,t,r){var n=7+t-r,s=(7+createUTCDate(e,0,n).getUTCDay()-t)%7;return-s+n-1}function dayOfYearFromWeeks(e,t,r,n,s){var i=(7+r-n)%7,o=firstWeekOffset(e,n,s),u=1+7*(t-1)+i+o,c,d;return u<=0?(c=e-1,d=daysInYear(c)+u):u>daysInYear(e)?(c=e+1,d=u-daysInYear(e)):(c=e,d=u),{year:c,dayOfYear:d}}function weekOfYear(e,t,r){var n=firstWeekOffset(e.year(),t,r),s=Math.floor((e.dayOfYear()-n-1)/7)+1,i,o;return s<1?(o=e.year()-1,i=s+weeksInYear(o,t,r)):s>weeksInYear(e.year(),t,r)?(i=s-weeksInYear(e.year(),t,r),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function weeksInYear(e,t,r){var n=firstWeekOffset(e,t,r),s=firstWeekOffset(e+1,t,r);return(daysInYear(e)-n+s)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addRegexToken("w",match1to2,match1to2NoLeadingZero);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2,match1to2NoLeadingZero);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=toInt(e)});function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});addFormatToken("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});addFormatToken("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(e,t){return t.weekdaysMinRegex(e)});addRegexToken("ddd",function(e,t){return t.weekdaysShortRegex(e)});addRegexToken("dddd",function(e,t){return t.weekdaysRegex(e)});addWeekParseToken(["dd","ddd","dddd"],function(e,t,r,n){var s=r._locale.weekdaysParse(e,n,r._strict);s!=null?t.d=s:getParsingFlags(r).invalidWeekday=e});addWeekParseToken(["d","e","E"],function(e,t,r,n){t[n]=toInt(e)});function parseWeekday(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function parseIsoWeekday(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function shiftWeekdays(e,t){return e.slice(t,7).concat(e.slice(0,t))}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;function localeWeekdays(e,t){var r=isArray(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?shiftWeekdays(r,this._week.dow):e?r[e.day()]:r}function localeWeekdaysShort(e){return e===!0?shiftWeekdays(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function localeWeekdaysMin(e){return e===!0?shiftWeekdays(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function handleStrictParse$1(e,t,r){var n,s,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=createUTC([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?t==="dddd"?(s=indexOf.call(this._weekdaysParse,o),s!==-1?s:null):t==="ddd"?(s=indexOf.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=indexOf.call(this._minWeekdaysParse,o),s!==-1?s:null):t==="dddd"?(s=indexOf.call(this._weekdaysParse,o),s!==-1||(s=indexOf.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=indexOf.call(this._minWeekdaysParse,o),s!==-1?s:null)):t==="ddd"?(s=indexOf.call(this._shortWeekdaysParse,o),s!==-1||(s=indexOf.call(this._weekdaysParse,o),s!==-1)?s:(s=indexOf.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=indexOf.call(this._minWeekdaysParse,o),s!==-1||(s=indexOf.call(this._weekdaysParse,o),s!==-1)?s:(s=indexOf.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function localeWeekdaysParse(e,t,r){var n,s,i;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=createUTC([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function getSetDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=get(this,"Day");return e!=null?(e=parseWeekday(e,this.localeData()),this.add(e-t,"d")):t}function getSetLocaleDayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function getSetISODayOfWeek(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=parseIsoWeekday(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function weekdaysRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function e(m,T){return T.length-m.length}var t=[],r=[],n=[],s=[],i,o,u,c,d;for(i=0;i<7;i++)o=createUTC([2e3,1]).day(i),u=regexEscape(this.weekdaysMin(o,"")),c=regexEscape(this.weekdaysShort(o,"")),d=regexEscape(this.weekdays(o,"")),t.push(u),r.push(c),n.push(d),s.push(u),s.push(c),s.push(d);t.sort(e),r.sort(e),n.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(e,t){addFormatToken(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}meridiem("a",!0);meridiem("A",!1);function matchMeridiem(e,t){return t._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2,match1to2HasZero);addRegexToken("h",match1to2,match1to2NoLeadingZero);addRegexToken("k",match1to2,match1to2NoLeadingZero);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(e,t,r){var n=toInt(e);t[HOUR]=n===24?0:n});addParseToken(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});addParseToken(["h","hh"],function(e,t,r){t[HOUR]=toInt(e),getParsingFlags(r).bigHour=!0});addParseToken("hmm",function(e,t,r){var n=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n)),getParsingFlags(r).bigHour=!0});addParseToken("hmmss",function(e,t,r){var n=e.length-4,s=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n,2)),t[SECOND]=toInt(e.substr(s)),getParsingFlags(r).bigHour=!0});addParseToken("Hmm",function(e,t,r){var n=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n))});addParseToken("Hmmss",function(e,t,r){var n=e.length-4,s=e.length-2;t[HOUR]=toInt(e.substr(0,n)),t[MINUTE]=toInt(e.substr(n,2)),t[SECOND]=toInt(e.substr(s))});function localeIsPM(e){return(e+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);function localeMeridiem(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function commonPrefix(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function normalizeLocale(e){return e&&e.toLowerCase().replace("_","-")}function chooseLocale(e){for(var t=0,r,n,s,i;t<e.length;){for(i=normalizeLocale(e[t]).split("-"),r=i.length,n=normalizeLocale(e[t+1]),n=n?n.split("-"):null;r>0;){if(s=loadLocale(i.slice(0,r).join("-")),s)return s;if(n&&n.length>=r&&commonPrefix(i,n)>=r-1)break;r--}t++}return globalLocale}function isLocaleNameSane(e){return!!(e&&e.match("^[^/\\\\]*$"))}function loadLocale(e){var t=null,r;if(locales[e]===void 0&&typeof module<"u"&&module&&module.exports&&isLocaleNameSane(e))try{t=globalLocale._abbr,r=require,r("./locale/"+e),getSetGlobalLocale(t)}catch{locales[e]=null}return locales[e]}function getSetGlobalLocale(e,t){var r;return e&&(isUndefined(t)?r=getLocale(e):r=defineLocale(e,t),r?globalLocale=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),globalLocale._abbr}function defineLocale(e,t){if(t!==null){var r,n=baseConfig;if(t.abbr=e,locales[e]!=null)deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=locales[e]._config;else if(t.parentLocale!=null)if(locales[t.parentLocale]!=null)n=locales[t.parentLocale]._config;else if(r=loadLocale(t.parentLocale),r!=null)n=r._config;else return localeFamilies[t.parentLocale]||(localeFamilies[t.parentLocale]=[]),localeFamilies[t.parentLocale].push({name:e,config:t}),null;return locales[e]=new Locale(mergeConfigs(n,t)),localeFamilies[e]&&localeFamilies[e].forEach(function(s){defineLocale(s.name,s.config)}),getSetGlobalLocale(e),locales[e]}else return delete locales[e],null}function updateLocale(e,t){if(t!=null){var r,n,s=baseConfig;locales[e]!=null&&locales[e].parentLocale!=null?locales[e].set(mergeConfigs(locales[e]._config,t)):(n=loadLocale(e),n!=null&&(s=n._config),t=mergeConfigs(s,t),n==null&&(t.abbr=e),r=new Locale(t),r.parentLocale=locales[e],locales[e]=r),getSetGlobalLocale(e)}else locales[e]!=null&&(locales[e].parentLocale!=null?(locales[e]=locales[e].parentLocale,e===getSetGlobalLocale()&&getSetGlobalLocale(e)):locales[e]!=null&&delete locales[e]);return locales[e]}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return globalLocale;if(!isArray(e)){if(t=loadLocale(e),t)return t;e=[e]}return chooseLocale(e)}function listLocales(){return keys(locales)}function checkOverflow(e){var t,r=e._a;return r&&getParsingFlags(e).overflow===-2&&(t=r[MONTH]<0||r[MONTH]>11?MONTH:r[DATE]<1||r[DATE]>daysInMonth(r[YEAR],r[MONTH])?DATE:r[HOUR]<0||r[HOUR]>24||r[HOUR]===24&&(r[MINUTE]!==0||r[SECOND]!==0||r[MILLISECOND]!==0)?HOUR:r[MINUTE]<0||r[MINUTE]>59?MINUTE:r[SECOND]<0||r[SECOND]>59?SECOND:r[MILLISECOND]<0||r[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(e)._overflowDayOfYear&&(t<YEAR||t>DATE)&&(t=DATE),getParsingFlags(e)._overflowWeeks&&t===-1&&(t=WEEK),getParsingFlags(e)._overflowWeekday&&t===-1&&(t=WEEKDAY),getParsingFlags(e).overflow=t),e}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function configFromISO(e){var t,r,n=e._i,s=extendedIsoRegex.exec(n)||basicIsoRegex.exec(n),i,o,u,c,d=isoDates.length,m=isoTimes.length;if(s){for(getParsingFlags(e).iso=!0,t=0,r=d;t<r;t++)if(isoDates[t][1].exec(s[1])){o=isoDates[t][0],i=isoDates[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(s[3]){for(t=0,r=m;t<r;t++)if(isoTimes[t][1].exec(s[3])){u=(s[2]||" ")+isoTimes[t][0];break}if(u==null){e._isValid=!1;return}}if(!i&&u!=null){e._isValid=!1;return}if(s[4])if(tzRegex.exec(s[4]))c="Z";else{e._isValid=!1;return}e._f=o+(u||"")+(c||""),configFromStringAndFormat(e)}else e._isValid=!1}function extractFromRFC2822Strings(e,t,r,n,s,i){var o=[untruncateYear(e),defaultLocaleMonthsShort.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(s,10)];return i&&o.push(parseInt(i,10)),o}function untruncateYear(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function preprocessRFC2822(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(e,t,r){if(e){var n=defaultLocaleWeekdaysShort.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(n!==s)return getParsingFlags(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function calculateOffset(e,t,r){if(e)return obsOffsets[e];if(t)return 0;var n=parseInt(r,10),s=n%100,i=(n-s)/100;return i*60+s}function configFromRFC2822(e){var t=rfc2822.exec(preprocessRFC2822(e._i)),r;if(t){if(r=extractFromRFC2822Strings(t[4],t[3],t[2],t[5],t[6],t[7]),!checkWeekday(t[1],r,e))return;e._a=r,e._tzm=calculateOffset(t[8],t[9],t[10]),e._d=createUTCDate.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),getParsingFlags(e).rfc2822=!0}else e._isValid=!1}function configFromString(e){var t=aspNetJsonRegex.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(configFromISO(e),e._isValid===!1)delete e._isValid;else return;if(configFromRFC2822(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:hooks.createFromInputFallback(e)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function defaults$2(e,t,r){return e??t??r}function currentDateArray(e){var t=new Date(hooks.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function configFromArray(e){var t,r,n=[],s,i,o;if(!e._d){for(s=currentDateArray(e),e._w&&e._a[DATE]==null&&e._a[MONTH]==null&&dayOfYearFromWeekInfo(e),e._dayOfYear!=null&&(o=defaults$2(e._a[YEAR],s[YEAR]),(e._dayOfYear>daysInYear(o)||e._dayOfYear===0)&&(getParsingFlags(e)._overflowDayOfYear=!0),r=createUTCDate(o,0,e._dayOfYear),e._a[MONTH]=r.getUTCMonth(),e._a[DATE]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=s[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[HOUR]===24&&e._a[MINUTE]===0&&e._a[SECOND]===0&&e._a[MILLISECOND]===0&&(e._nextDay=!0,e._a[HOUR]=0),e._d=(e._useUTC?createUTCDate:createDate).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[HOUR]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(getParsingFlags(e).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(e){var t,r,n,s,i,o,u,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,r=defaults$2(t.GG,e._a[YEAR],weekOfYear(createLocal(),1,4).year),n=defaults$2(t.W,1),s=defaults$2(t.E,1),(s<1||s>7)&&(c=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,d=weekOfYear(createLocal(),i,o),r=defaults$2(t.gg,e._a[YEAR],d.year),n=defaults$2(t.w,d.week),t.d!=null?(s=t.d,(s<0||s>6)&&(c=!0)):t.e!=null?(s=t.e+i,(t.e<0||t.e>6)&&(c=!0)):s=i),n<1||n>weeksInYear(r,i,o)?getParsingFlags(e)._overflowWeeks=!0:c!=null?getParsingFlags(e)._overflowWeekday=!0:(u=dayOfYearFromWeeks(r,n,s,i,o),e._a[YEAR]=u.year,e._dayOfYear=u.dayOfYear)}hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(e){if(e._f===hooks.ISO_8601){configFromISO(e);return}if(e._f===hooks.RFC_2822){configFromRFC2822(e);return}e._a=[],getParsingFlags(e).empty=!0;var t=""+e._i,r,n,s,i,o,u=t.length,c=0,d,m;for(s=expandFormat(e._f,e._locale).match(formattingTokens)||[],m=s.length,r=0;r<m;r++)i=s[r],n=(t.match(getParseRegexForToken(i,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&getParsingFlags(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),c+=n.length),formatTokenFunctions[i]?(n?getParsingFlags(e).empty=!1:getParsingFlags(e).unusedTokens.push(i),addTimeToArrayFromToken(i,n,e)):e._strict&&!n&&getParsingFlags(e).unusedTokens.push(i);getParsingFlags(e).charsLeftOver=u-c,t.length>0&&getParsingFlags(e).unusedInput.push(t),e._a[HOUR]<=12&&getParsingFlags(e).bigHour===!0&&e._a[HOUR]>0&&(getParsingFlags(e).bigHour=void 0),getParsingFlags(e).parsedDateParts=e._a.slice(0),getParsingFlags(e).meridiem=e._meridiem,e._a[HOUR]=meridiemFixWrap(e._locale,e._a[HOUR],e._meridiem),d=getParsingFlags(e).era,d!==null&&(e._a[YEAR]=e._locale.erasConvertYear(d,e._a[YEAR])),configFromArray(e),checkOverflow(e)}function meridiemFixWrap(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function configFromStringAndArray(e){var t,r,n,s,i,o,u=!1,c=e._f.length;if(c===0){getParsingFlags(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<c;s++)i=0,o=!1,t=copyConfig({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],configFromStringAndFormat(t),isValid(t)&&(o=!0),i+=getParsingFlags(t).charsLeftOver,i+=getParsingFlags(t).unusedTokens.length*10,getParsingFlags(t).score=i,u?i<n&&(n=i,r=t):(n==null||i<n||o)&&(n=i,r=t,o&&(u=!0));extend(e,r||t)}function configFromObject(e){if(!e._d){var t=normalizeObjectUnits(e._i),r=t.day===void 0?t.date:t.day;e._a=map([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),configFromArray(e)}}function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function prepareConfig(e){var t=e._i,r=e._f;return e._locale=e._locale||getLocale(e._l),t===null||r===void 0&&t===""?createInvalid({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),isMoment(t)?new Moment(checkOverflow(t)):(isDate(t)?e._d=t:isArray(r)?configFromStringAndArray(e):r?configFromStringAndFormat(e):configFromInput(e),isValid(e)||(e._d=null),e))}function configFromInput(e){var t=e._i;isUndefined(t)?e._d=new Date(hooks.now()):isDate(t)?e._d=new Date(t.valueOf()):typeof t=="string"?configFromString(e):isArray(t)?(e._a=map(t.slice(0),function(r){return parseInt(r,10)}),configFromArray(e)):isObject(t)?configFromObject(e):isNumber(t)?e._d=new Date(t):hooks.createFromInputFallback(e)}function createLocalOrUTC(e,t,r,n,s){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(isObject(e)&&isObjectEmpty(e)||isArray(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=s,i._l=r,i._i=e,i._f=t,i._strict=n,createFromConfig(i)}function createLocal(e,t,r,n){return createLocalOrUTC(e,t,r,n,!1)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:createInvalid()});function pickBy(e,t){var r,n;if(t.length===1&&isArray(t[0])&&(t=t[0]),!t.length)return createLocal();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function min(){var e=[].slice.call(arguments,0);return pickBy("isBefore",e)}function max(){var e=[].slice.call(arguments,0);return pickBy("isAfter",e)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(e){var t,r=!1,n,s=ordering.length;for(t in e)if(hasOwnProp(e,t)&&!(indexOf.call(ordering,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<s;++n)if(e[ordering[n]]){if(r)return!1;parseFloat(e[ordering[n]])!==toInt(e[ordering[n]])&&(r=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(e){var t=normalizeObjectUnits(e),r=t.year||0,n=t.quarter||0,s=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,u=t.hour||0,c=t.minute||0,d=t.second||0,m=t.millisecond||0;this._isValid=isDurationValid(t),this._milliseconds=+m+d*1e3+c*6e4+u*1e3*60*60,this._days=+o+i*7,this._months=+s+n*3+r*12,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function compareArrays(e,t,r){var n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),i=0,o;for(o=0;o<n;o++)toInt(e[o])!==toInt(t[o])&&i++;return i+s}function offset(e,t){addFormatToken(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+zeroFill(~~(r/60),2)+t+zeroFill(~~r%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=offsetFromString(matchShortOffset,e)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var r=(t||"").match(e),n,s,i;return r===null?null:(n=r[r.length-1]||[],s=(n+"").match(chunkOffset)||["-",0,0],i=+(s[1]*60)+toInt(s[2]),i===0?0:s[0]==="+"?i:-i)}function cloneWithOffset(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),hooks.updateOffset(r,!1),r):createLocal(e).local()}function getDateOffset(e){return-Math.round(e._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(e,t,r){var n=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=offsetFromString(matchShortOffset,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(s=getDateOffset(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),n!==e&&(!t||this._changeInProgress?addSubtract(this,createDuration(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:getDateOffset(this)}function getSetZone(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function setOffsetToUTC(e){return this.utcOffset(0,e)}function setOffsetToLocal(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=offsetFromString(matchOffset,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(e){return this.isValid()?(e=e?createLocal(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var e={},t;return copyConfig(e,this),e=prepareConfig(e),e._a?(t=e._isUTC?createUTC(e._a):createLocal(e._a),this._isDSTShifted=this.isValid()&&compareArrays(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var aspNetRegex=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var r=e,n=null,s,i,o;return isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:isNumber(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=aspNetRegex.exec(e))?(s=n[1]==="-"?-1:1,r={y:0,d:toInt(n[DATE])*s,h:toInt(n[HOUR])*s,m:toInt(n[MINUTE])*s,s:toInt(n[SECOND])*s,ms:toInt(absRound(n[MILLISECOND]*1e3))*s}):(n=isoRegex.exec(e))?(s=n[1]==="-"?-1:1,r={y:parseIso(n[2],s),M:parseIso(n[3],s),w:parseIso(n[4],s),d:parseIso(n[5],s),h:parseIso(n[6],s),m:parseIso(n[7],s),s:parseIso(n[8],s)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=momentsDifference(createLocal(r.from),createLocal(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new Duration(r),isDuration(e)&&hasOwnProp(e,"_locale")&&(i._locale=e._locale),isDuration(e)&&hasOwnProp(e,"_isValid")&&(i._isValid=e._isValid),i}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function positiveMomentsDifference(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function momentsDifference(e,t){var r;return e.isValid()&&t.isValid()?(t=cloneWithOffset(t,e),e.isBefore(t)?r=positiveMomentsDifference(e,t):(r=positiveMomentsDifference(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function createAdder(e,t){return function(r,n){var s,i;return n!==null&&!isNaN(+n)&&(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),s=createDuration(r,n),addSubtract(this,s,e),this}}function addSubtract(e,t,r,n){var s=t._milliseconds,i=absRound(t._days),o=absRound(t._months);e.isValid()&&(n=n??!0,o&&setMonth(e,get(e,"Month")+o*r),i&&set$1(e,"Date",get(e,"Date")+i*r),s&&e._d.setTime(e._d.valueOf()+s*r),n&&hooks.updateOffset(e,i||o))}var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function isString(e){return typeof e=="string"||e instanceof String}function isMomentInput(e){return isMoment(e)||isDate(e)||isString(e)||isNumber(e)||isNumberOrStringArray(e)||isMomentInputObject(e)||e===null||e===void 0}function isMomentInputObject(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,i,o=n.length;for(s=0;s<o;s+=1)i=n[s],r=r||hasOwnProp(e,i);return t&&r}function isNumberOrStringArray(e){var t=isArray(e),r=!1;return t&&(r=e.filter(function(n){return!isNumber(n)&&isString(e)}).length===0),t&&r}function isCalendarSpec(e){var t=isObject(e)&&!isObjectEmpty(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,i;for(s=0;s<n.length;s+=1)i=n[s],r=r||hasOwnProp(e,i);return t&&r}function getCalendarFormat(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function calendar$1(e,t){arguments.length===1&&(arguments[0]?isMomentInput(arguments[0])?(e=arguments[0],t=void 0):isCalendarSpec(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||createLocal(),n=cloneWithOffset(r,this).startOf("day"),s=hooks.calendarFormat(this,n)||"sameElse",i=t&&(isFunction(t[s])?t[s].call(this,r):t[s]);return this.format(i||this.localeData().calendar(s,this,createLocal(r)))}function clone(){return new Moment(this)}function isAfter(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function isBefore(e,t){var r=isMoment(e)?e:createLocal(e);return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function isBetween(e,t,r,n){var s=isMoment(e)?e:createLocal(e),i=isMoment(t)?t:createLocal(t);return this.isValid()&&s.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(s,r):!this.isBefore(s,r))&&(n[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function isSame(e,t){var r=isMoment(e)?e:createLocal(e),n;return this.isValid()&&r.isValid()?(t=normalizeUnits(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function diff(e,t,r){var n,s,i;if(!this.isValid())return NaN;if(n=cloneWithOffset(e,this),!n.isValid())return NaN;switch(s=(n.utcOffset()-this.utcOffset())*6e4,t=normalizeUnits(t),t){case"year":i=monthDiff(this,n)/12;break;case"month":i=monthDiff(this,n);break;case"quarter":i=monthDiff(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-s)/864e5;break;case"week":i=(this-n-s)/6048e5;break;default:i=this-n}return r?i:absFloor(i)}function monthDiff(e,t){if(e.date()<t.date())return-monthDiff(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),s,i;return t-n<0?(s=e.clone().add(r-1,"months"),i=(t-n)/(n-s)):(s=e.clone().add(r+1,"months"),i=(t-n)/(s-n)),-(r+i)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?formatMoment(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(r,"Z")):formatMoment(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,s,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(r+n+s+i)}function format$3(e){e||(e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var t=formatMoment(this,e);return this.localeData().postformat(t)}function from(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fromNow(e){return this.from(createLocal(),e)}function to$1(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function toNow(e){return this.to(createLocal(),e)}function locale(e){var t;return e===void 0?this._locale._abbr:(t=getLocale(e),t!=null&&(this._locale=t),this)}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function localeData(){return this._locale}var MS_PER_SECOND=1e3,MS_PER_MINUTE=60*MS_PER_SECOND,MS_PER_HOUR=60*MS_PER_MINUTE,MS_PER_400_YEARS=(365*400+97)*24*MS_PER_HOUR;function mod$1(e,t){return(e%t+t)%t}function localStartOfDate(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-MS_PER_400_YEARS:new Date(e,t,r).valueOf()}function utcStartOfDate(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-MS_PER_400_YEARS:Date.UTC(e,t,r)}function startOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR);break;case"minute":t=this._d.valueOf(),t-=mod$1(t,MS_PER_MINUTE);break;case"second":t=this._d.valueOf(),t-=mod$1(t,MS_PER_SECOND);break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function endOf(e){var t,r;if(e=normalizeUnits(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?utcStartOfDate:localStartOfDate,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=MS_PER_HOUR-mod$1(t+(this._isUTC?0:this.utcOffset()*MS_PER_MINUTE),MS_PER_HOUR)-1;break;case"minute":t=this._d.valueOf(),t+=MS_PER_MINUTE-mod$1(t,MS_PER_MINUTE)-1;break;case"second":t=this._d.valueOf(),t+=MS_PER_SECOND-mod$1(t,MS_PER_SECOND)-1;break}return this._d.setTime(t),hooks.updateOffset(this,!0),this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var s=r._locale.erasParse(e,n,r._strict);s?getParsingFlags(r).era=s:getParsingFlags(r).invalidEra=e});addRegexToken("y",matchUnsigned);addRegexToken("yy",matchUnsigned);addRegexToken("yyy",matchUnsigned);addRegexToken("yyyy",matchUnsigned);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],YEAR);addParseToken(["yo"],function(e,t,r,n){var s;r._locale._eraYearOrdinalRegex&&(s=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[YEAR]=r._locale.eraYearOrdinalParse(e,s):t[YEAR]=parseInt(e,10)});function localeEras(e,t){var r,n,s,i=this._eras||getLocale("en")._eras;for(r=0,n=i.length;r<n;++r){switch(typeof i[r].since){case"string":s=hooks(i[r].since).startOf("day"),i[r].since=s.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":s=hooks(i[r].until).startOf("day").valueOf(),i[r].until=s.valueOf();break}}return i}function localeErasParse(e,t,r){var n,s,i=this.eras(),o,u,c;for(e=e.toUpperCase(),n=0,s=i.length;n<s;++n)if(o=i[n].name.toUpperCase(),u=i[n].abbr.toUpperCase(),c=i[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(u===e)return i[n];break;case"NNNN":if(o===e)return i[n];break;case"NNNNN":if(c===e)return i[n];break}else if([o,u,c].indexOf(e)>=0)return i[n]}function localeErasConvertYear(e,t){var r=e.since<=e.until?1:-1;return t===void 0?hooks(e.since).year():hooks(e.since).year()+(t-e.offset)*r}function getEraName(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function getEraNarrow(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function getEraAbbr(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function getEraYear(){var e,t,r,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=s[e].since<=s[e].until?1:-1,n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return(this.year()-hooks(s[e].since).year())*r+s[e].offset;return this.year()}function erasNameRegex(e){return hasOwnProp(this,"_erasNameRegex")||computeErasParse.call(this),e?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(e){return hasOwnProp(this,"_erasAbbrRegex")||computeErasParse.call(this),e?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(e){return hasOwnProp(this,"_erasNarrowRegex")||computeErasParse.call(this),e?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(e,t){return t.erasAbbrRegex(e)}function matchEraName(e,t){return t.erasNameRegex(e)}function matchEraNarrow(e,t){return t.erasNarrowRegex(e)}function matchEraYearOrdinal(e,t){return t._eraYearOrdinalRegex||matchUnsigned}function computeErasParse(){var e=[],t=[],r=[],n=[],s,i,o,u,c,d=this.eras();for(s=0,i=d.length;s<i;++s)o=regexEscape(d[s].name),u=regexEscape(d[s].abbr),c=regexEscape(d[s].narrow),t.push(o),e.push(u),r.push(c),n.push(o),n.push(u),n.push(c);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=toInt(e)});addWeekParseToken(["gg","GG"],function(e,t,r,n){t[n]=hooks.parseTwoDigitYear(e)});function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)}function getWeeksInWeekYear(){var e=this.localeData()._week;return weeksInYear(this.weekYear(),e.dow,e.doy)}function getSetWeekYearHelper(e,t,r,n,s){var i;return e==null?weekOfYear(this,n,s).year:(i=weeksInYear(e,n,s),t>i&&(t=i),setWeekAll.call(this,e,t,r,n,s))}function setWeekAll(e,t,r,n,s){var i=dayOfYearFromWeeks(e,t,r,n,s),o=createUTCDate(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}addFormatToken("Q",0,"Qo","quarter");addRegexToken("Q",match1);addParseToken("Q",function(e,t){t[MONTH]=(toInt(e)-1)*3});function getSetQuarter(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addRegexToken("D",match1to2,match1to2NoLeadingZero);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(e,t){t[DATE]=toInt(e.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(e,t,r){r._dayOfYear=toInt(e)});function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}addFormatToken("m",["mm",2],0,"minute");addRegexToken("m",match1to2,match1to2HasZero);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second");addRegexToken("s",match1to2,match1to2HasZero);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token,getSetMillisecond;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(e,t){t[MILLISECOND]=toInt(("0."+e)*1e3)}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format$3;proto.from=from;proto.fromNow=fromNow;proto.to=to$1;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;typeof Symbol<"u"&&Symbol.for!=null&&(proto[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.eraName=getEraName;proto.eraNarrow=getEraNarrow;proto.eraAbbr=getEraAbbr;proto.eraYear=getEraYear;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.weeksInWeekYear=getWeeksInWeekYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(e){return createLocal(e*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(e){return e}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.eras=localeEras;proto$1.erasParse=localeErasParse;proto$1.erasConvertYear=localeErasConvertYear;proto$1.erasAbbrRegex=erasAbbrRegex;proto$1.erasNameRegex=erasNameRegex;proto$1.erasNarrowRegex=erasNarrowRegex;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(e,t,r,n){var s=getLocale(),i=createUTC().set(n,t);return s[r](i,e)}function listMonthsImpl(e,t,r){if(isNumber(e)&&(t=e,e=void 0),e=e||"",t!=null)return get$1(e,t,r,"month");var n,s=[];for(n=0;n<12;n++)s[n]=get$1(e,n,r,"month");return s}function listWeekdaysImpl(e,t,r,n){typeof e=="boolean"?(isNumber(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,isNumber(t)&&(r=t,t=void 0),t=t||"");var s=getLocale(),i=e?s._week.dow:0,o,u=[];if(r!=null)return get$1(t,(r+i)%7,n,"day");for(o=0;o<7;o++)u[o]=get$1(t,(o+i)%7,n,"day");return u}function listMonths(e,t){return listMonthsImpl(e,t,"months")}function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")}function listWeekdays(e,t,r){return listWeekdaysImpl(e,t,r,"weekdays")}function listWeekdaysShort(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysShort")}function listWeekdaysMin(e,t,r){return listWeekdaysImpl(e,t,r,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=toInt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var e=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),e.milliseconds=mathAbs(e.milliseconds),e.seconds=mathAbs(e.seconds),e.minutes=mathAbs(e.minutes),e.hours=mathAbs(e.hours),e.months=mathAbs(e.months),e.years=mathAbs(e.years),this}function addSubtract$1(e,t,r,n){var s=createDuration(t,r);return e._milliseconds+=n*s._milliseconds,e._days+=n*s._days,e._months+=n*s._months,e._bubble()}function add$1(e,t){return addSubtract$1(this,e,t,1)}function subtract$1(e,t){return addSubtract$1(this,e,t,-1)}function absCeil(e){return e<0?Math.floor(e):Math.ceil(e)}function bubble(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,s,i,o,u,c;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=absCeil(monthsToDays(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,s=absFloor(e/1e3),n.seconds=s%60,i=absFloor(s/60),n.minutes=i%60,o=absFloor(i/60),n.hours=o%24,t+=absFloor(o/24),c=absFloor(daysToMonths(t)),r+=c,t-=absCeil(monthsToDays(c)),u=absFloor(r/12),r%=12,n.days=t,n.months=r,n.years=u,this}function daysToMonths(e){return e*4800/146097}function monthsToDays(e){return e*146097/4800}function as$1(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=normalizeUnits(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+daysToMonths(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(monthsToDays(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function makeAs(e){return function(){return this.as(e)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asQuarters=makeAs("Q"),asYears=makeAs("y"),valueOf$1=asMilliseconds;function clone$1(){return createDuration(this)}function get$2(e){return e=normalizeUnits(e),this.isValid()?this[e+"s"]():NaN}function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(e,t,r,n,s){return s.relativeTime(t||1,!!r,e,n)}function relativeTime$1(e,t,r,n){var s=createDuration(e).abs(),i=round(s.as("s")),o=round(s.as("m")),u=round(s.as("h")),c=round(s.as("d")),d=round(s.as("M")),m=round(s.as("w")),T=round(s.as("y")),$=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||u<=1&&["h"]||u<r.h&&["hh",u]||c<=1&&["d"]||c<r.d&&["dd",c];return r.w!=null&&($=$||m<=1&&["w"]||m<r.w&&["ww",m]),$=$||d<=1&&["M"]||d<r.M&&["MM",d]||T<=1&&["y"]||["yy",T],$[2]=t,$[3]=+e>0,$[4]=n,substituteTimeAgo.apply(null,$)}function getSetRelativeTimeRounding(e){return e===void 0?round:typeof e=="function"?(round=e,!0):!1}function getSetRelativeTimeThreshold(e,t){return thresholds[e]===void 0?!1:t===void 0?thresholds[e]:(thresholds[e]=t,e==="s"&&(thresholds.ss=t-1),!0)}function humanize(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=thresholds,s,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},thresholds,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),s=this.localeData(),i=relativeTime$1(this,!r,n,s),r&&(i=s.pastFuture(+this,i)),s.postformat(i)}var abs$1=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var e=abs$1(this._milliseconds)/1e3,t=abs$1(this._days),r=abs$1(this._months),n,s,i,o,u=this.asSeconds(),c,d,m,T;return u?(n=absFloor(e/60),s=absFloor(n/60),e%=60,n%=60,i=absFloor(r/12),r%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=u<0?"-":"",d=sign(this._months)!==sign(u)?"-":"",m=sign(this._days)!==sign(u)?"-":"",T=sign(this._milliseconds)!==sign(u)?"-":"",c+"P"+(i?d+i+"Y":"")+(r?d+r+"M":"")+(t?m+t+"D":"")+(s||n||e?"T":"")+(s?T+s+"H":"")+(n?T+n+"M":"")+(e?T+o+"S":"")):"P0D"}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as$1;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asQuarters=asQuarters;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});addParseToken("x",function(e,t,r){r._d=new Date(toInt(e))});hooks.version="2.30.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const moment=Object.freeze(Object.defineProperty({__proto__:null,default:hooks},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(moment);var Chart=Chart$1.exports,hasRequiredChart;function requireChart(){return hasRequiredChart||(hasRequiredChart=1,(function(e,t){(function(r,n){e.exports=n((function(){try{return require$$0}catch{}})())})(Chart,(function(r){r=r&&r.hasOwnProperty("default")?r.default:r;function n(a,l){return l={exports:{}},a(l,l.exports),l.exports}function s(a){return a&&a.default||a}var i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},o=n(function(a){var l={};for(var p in i)i.hasOwnProperty(p)&&(l[i[p]]=p);var v=a.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var A in v)if(v.hasOwnProperty(A)){if(!("channels"in v[A]))throw new Error("missing channels property: "+A);if(!("labels"in v[A]))throw new Error("missing channel labels property: "+A);if(v[A].labels.length!==v[A].channels)throw new Error("channel and label counts mismatch: "+A);var H=v[A].channels,Q=v[A].labels;delete v[A].channels,delete v[A].labels,Object.defineProperty(v[A],"channels",{value:H}),Object.defineProperty(v[A],"labels",{value:Q})}v.rgb.hsl=function(Z){var ne=Z[0]/255,ae=Z[1]/255,pe=Z[2]/255,Ee=Math.min(ne,ae,pe),Ve=Math.max(ne,ae,pe),We=Ve-Ee,at,ws,ji;return Ve===Ee?at=0:ne===Ve?at=(ae-pe)/We:ae===Ve?at=2+(pe-ne)/We:pe===Ve&&(at=4+(ne-ae)/We),at=Math.min(at*60,360),at<0&&(at+=360),ji=(Ee+Ve)/2,Ve===Ee?ws=0:ji<=.5?ws=We/(Ve+Ee):ws=We/(2-Ve-Ee),[at,ws*100,ji*100]},v.rgb.hsv=function(Z){var ne,ae,pe,Ee,Ve,We=Z[0]/255,at=Z[1]/255,ws=Z[2]/255,ji=Math.max(We,at,ws),ma=ji-Math.min(We,at,ws),ga=function($a){return(ji-$a)/6/ma+1/2};return ma===0?Ee=Ve=0:(Ve=ma/ji,ne=ga(We),ae=ga(at),pe=ga(ws),We===ji?Ee=pe-ae:at===ji?Ee=1/3+ne-pe:ws===ji&&(Ee=2/3+ae-ne),Ee<0?Ee+=1:Ee>1&&(Ee-=1)),[Ee*360,Ve*100,ji*100]},v.rgb.hwb=function(Z){var ne=Z[0],ae=Z[1],pe=Z[2],Ee=v.rgb.hsl(Z)[0],Ve=1/255*Math.min(ne,Math.min(ae,pe));return pe=1-1/255*Math.max(ne,Math.max(ae,pe)),[Ee,Ve*100,pe*100]},v.rgb.cmyk=function(Z){var ne=Z[0]/255,ae=Z[1]/255,pe=Z[2]/255,Ee,Ve,We,at;return at=Math.min(1-ne,1-ae,1-pe),Ee=(1-ne-at)/(1-at)||0,Ve=(1-ae-at)/(1-at)||0,We=(1-pe-at)/(1-at)||0,[Ee*100,Ve*100,We*100,at*100]};function ee(Z,ne){return Math.pow(Z[0]-ne[0],2)+Math.pow(Z[1]-ne[1],2)+Math.pow(Z[2]-ne[2],2)}v.rgb.keyword=function(Z){var ne=l[Z];if(ne)return ne;var ae=1/0,pe;for(var Ee in i)if(i.hasOwnProperty(Ee)){var Ve=i[Ee],We=ee(Z,Ve);We<ae&&(ae=We,pe=Ee)}return pe},v.keyword.rgb=function(Z){return i[Z]},v.rgb.xyz=function(Z){var ne=Z[0]/255,ae=Z[1]/255,pe=Z[2]/255;ne=ne>.04045?Math.pow((ne+.055)/1.055,2.4):ne/12.92,ae=ae>.04045?Math.pow((ae+.055)/1.055,2.4):ae/12.92,pe=pe>.04045?Math.pow((pe+.055)/1.055,2.4):pe/12.92;var Ee=ne*.4124+ae*.3576+pe*.1805,Ve=ne*.2126+ae*.7152+pe*.0722,We=ne*.0193+ae*.1192+pe*.9505;return[Ee*100,Ve*100,We*100]},v.rgb.lab=function(Z){var ne=v.rgb.xyz(Z),ae=ne[0],pe=ne[1],Ee=ne[2],Ve,We,at;return ae/=95.047,pe/=100,Ee/=108.883,ae=ae>.008856?Math.pow(ae,1/3):7.787*ae+16/116,pe=pe>.008856?Math.pow(pe,1/3):7.787*pe+16/116,Ee=Ee>.008856?Math.pow(Ee,1/3):7.787*Ee+16/116,Ve=116*pe-16,We=500*(ae-pe),at=200*(pe-Ee),[Ve,We,at]},v.hsl.rgb=function(Z){var ne=Z[0]/360,ae=Z[1]/100,pe=Z[2]/100,Ee,Ve,We,at,ws;if(ae===0)return ws=pe*255,[ws,ws,ws];pe<.5?Ve=pe*(1+ae):Ve=pe+ae-pe*ae,Ee=2*pe-Ve,at=[0,0,0];for(var ji=0;ji<3;ji++)We=ne+1/3*-(ji-1),We<0&&We++,We>1&&We--,6*We<1?ws=Ee+(Ve-Ee)*6*We:2*We<1?ws=Ve:3*We<2?ws=Ee+(Ve-Ee)*(2/3-We)*6:ws=Ee,at[ji]=ws*255;return at},v.hsl.hsv=function(Z){var ne=Z[0],ae=Z[1]/100,pe=Z[2]/100,Ee=ae,Ve=Math.max(pe,.01),We,at;return pe*=2,ae*=pe<=1?pe:2-pe,Ee*=Ve<=1?Ve:2-Ve,at=(pe+ae)/2,We=pe===0?2*Ee/(Ve+Ee):2*ae/(pe+ae),[ne,We*100,at*100]},v.hsv.rgb=function(Z){var ne=Z[0]/60,ae=Z[1]/100,pe=Z[2]/100,Ee=Math.floor(ne)%6,Ve=ne-Math.floor(ne),We=255*pe*(1-ae),at=255*pe*(1-ae*Ve),ws=255*pe*(1-ae*(1-Ve));switch(pe*=255,Ee){case 0:return[pe,ws,We];case 1:return[at,pe,We];case 2:return[We,pe,ws];case 3:return[We,at,pe];case 4:return[ws,We,pe];case 5:return[pe,We,at]}},v.hsv.hsl=function(Z){var ne=Z[0],ae=Z[1]/100,pe=Z[2]/100,Ee=Math.max(pe,.01),Ve,We,at;return at=(2-ae)*pe,Ve=(2-ae)*Ee,We=ae*Ee,We/=Ve<=1?Ve:2-Ve,We=We||0,at/=2,[ne,We*100,at*100]},v.hwb.rgb=function(Z){var ne=Z[0]/360,ae=Z[1]/100,pe=Z[2]/100,Ee=ae+pe,Ve,We,at,ws;Ee>1&&(ae/=Ee,pe/=Ee),Ve=Math.floor(6*ne),We=1-pe,at=6*ne-Ve,(Ve&1)!==0&&(at=1-at),ws=ae+at*(We-ae);var ji,ma,ga;switch(Ve){default:case 6:case 0:ji=We,ma=ws,ga=ae;break;case 1:ji=ws,ma=We,ga=ae;break;case 2:ji=ae,ma=We,ga=ws;break;case 3:ji=ae,ma=ws,ga=We;break;case 4:ji=ws,ma=ae,ga=We;break;case 5:ji=We,ma=ae,ga=ws;break}return[ji*255,ma*255,ga*255]},v.cmyk.rgb=function(Z){var ne=Z[0]/100,ae=Z[1]/100,pe=Z[2]/100,Ee=Z[3]/100,Ve,We,at;return Ve=1-Math.min(1,ne*(1-Ee)+Ee),We=1-Math.min(1,ae*(1-Ee)+Ee),at=1-Math.min(1,pe*(1-Ee)+Ee),[Ve*255,We*255,at*255]},v.xyz.rgb=function(Z){var ne=Z[0]/100,ae=Z[1]/100,pe=Z[2]/100,Ee,Ve,We;return Ee=ne*3.2406+ae*-1.5372+pe*-.4986,Ve=ne*-.9689+ae*1.8758+pe*.0415,We=ne*.0557+ae*-.204+pe*1.057,Ee=Ee>.0031308?1.055*Math.pow(Ee,1/2.4)-.055:Ee*12.92,Ve=Ve>.0031308?1.055*Math.pow(Ve,1/2.4)-.055:Ve*12.92,We=We>.0031308?1.055*Math.pow(We,1/2.4)-.055:We*12.92,Ee=Math.min(Math.max(0,Ee),1),Ve=Math.min(Math.max(0,Ve),1),We=Math.min(Math.max(0,We),1),[Ee*255,Ve*255,We*255]},v.xyz.lab=function(Z){var ne=Z[0],ae=Z[1],pe=Z[2],Ee,Ve,We;return ne/=95.047,ae/=100,pe/=108.883,ne=ne>.008856?Math.pow(ne,1/3):7.787*ne+16/116,ae=ae>.008856?Math.pow(ae,1/3):7.787*ae+16/116,pe=pe>.008856?Math.pow(pe,1/3):7.787*pe+16/116,Ee=116*ae-16,Ve=500*(ne-ae),We=200*(ae-pe),[Ee,Ve,We]},v.lab.xyz=function(Z){var ne=Z[0],ae=Z[1],pe=Z[2],Ee,Ve,We;Ve=(ne+16)/116,Ee=ae/500+Ve,We=Ve-pe/200;var at=Math.pow(Ve,3),ws=Math.pow(Ee,3),ji=Math.pow(We,3);return Ve=at>.008856?at:(Ve-16/116)/7.787,Ee=ws>.008856?ws:(Ee-16/116)/7.787,We=ji>.008856?ji:(We-16/116)/7.787,Ee*=95.047,Ve*=100,We*=108.883,[Ee,Ve,We]},v.lab.lch=function(Z){var ne=Z[0],ae=Z[1],pe=Z[2],Ee,Ve,We;return Ee=Math.atan2(pe,ae),Ve=Ee*360/2/Math.PI,Ve<0&&(Ve+=360),We=Math.sqrt(ae*ae+pe*pe),[ne,We,Ve]},v.lch.lab=function(Z){var ne=Z[0],ae=Z[1],pe=Z[2],Ee,Ve,We;return We=pe/360*2*Math.PI,Ee=ae*Math.cos(We),Ve=ae*Math.sin(We),[ne,Ee,Ve]},v.rgb.ansi16=function(Z){var ne=Z[0],ae=Z[1],pe=Z[2],Ee=1 in arguments?arguments[1]:v.rgb.hsv(Z)[2];if(Ee=Math.round(Ee/50),Ee===0)return 30;var Ve=30+(Math.round(pe/255)<<2|Math.round(ae/255)<<1|Math.round(ne/255));return Ee===2&&(Ve+=60),Ve},v.hsv.ansi16=function(Z){return v.rgb.ansi16(v.hsv.rgb(Z),Z[2])},v.rgb.ansi256=function(Z){var ne=Z[0],ae=Z[1],pe=Z[2];if(ne===ae&&ae===pe)return ne<8?16:ne>248?231:Math.round((ne-8)/247*24)+232;var Ee=16+36*Math.round(ne/255*5)+6*Math.round(ae/255*5)+Math.round(pe/255*5);return Ee},v.ansi16.rgb=function(Z){var ne=Z%10;if(ne===0||ne===7)return Z>50&&(ne+=3.5),ne=ne/10.5*255,[ne,ne,ne];var ae=(~~(Z>50)+1)*.5,pe=(ne&1)*ae*255,Ee=(ne>>1&1)*ae*255,Ve=(ne>>2&1)*ae*255;return[pe,Ee,Ve]},v.ansi256.rgb=function(Z){if(Z>=232){var ne=(Z-232)*10+8;return[ne,ne,ne]}Z-=16;var ae,pe=Math.floor(Z/36)/5*255,Ee=Math.floor((ae=Z%36)/6)/5*255,Ve=ae%6/5*255;return[pe,Ee,Ve]},v.rgb.hex=function(Z){var ne=((Math.round(Z[0])&255)<<16)+((Math.round(Z[1])&255)<<8)+(Math.round(Z[2])&255),ae=ne.toString(16).toUpperCase();return"000000".substring(ae.length)+ae},v.hex.rgb=function(Z){var ne=Z.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!ne)return[0,0,0];var ae=ne[0];ne[0].length===3&&(ae=ae.split("").map(function(at){return at+at}).join(""));var pe=parseInt(ae,16),Ee=pe>>16&255,Ve=pe>>8&255,We=pe&255;return[Ee,Ve,We]},v.rgb.hcg=function(Z){var ne=Z[0]/255,ae=Z[1]/255,pe=Z[2]/255,Ee=Math.max(Math.max(ne,ae),pe),Ve=Math.min(Math.min(ne,ae),pe),We=Ee-Ve,at,ws;return We<1?at=Ve/(1-We):at=0,We<=0?ws=0:Ee===ne?ws=(ae-pe)/We%6:Ee===ae?ws=2+(pe-ne)/We:ws=4+(ne-ae)/We+4,ws/=6,ws%=1,[ws*360,We*100,at*100]},v.hsl.hcg=function(Z){var ne=Z[1]/100,ae=Z[2]/100,pe=1,Ee=0;return ae<.5?pe=2*ne*ae:pe=2*ne*(1-ae),pe<1&&(Ee=(ae-.5*pe)/(1-pe)),[Z[0],pe*100,Ee*100]},v.hsv.hcg=function(Z){var ne=Z[1]/100,ae=Z[2]/100,pe=ne*ae,Ee=0;return pe<1&&(Ee=(ae-pe)/(1-pe)),[Z[0],pe*100,Ee*100]},v.hcg.rgb=function(Z){var ne=Z[0]/360,ae=Z[1]/100,pe=Z[2]/100;if(ae===0)return[pe*255,pe*255,pe*255];var Ee=[0,0,0],Ve=ne%1*6,We=Ve%1,at=1-We,ws=0;switch(Math.floor(Ve)){case 0:Ee[0]=1,Ee[1]=We,Ee[2]=0;break;case 1:Ee[0]=at,Ee[1]=1,Ee[2]=0;break;case 2:Ee[0]=0,Ee[1]=1,Ee[2]=We;break;case 3:Ee[0]=0,Ee[1]=at,Ee[2]=1;break;case 4:Ee[0]=We,Ee[1]=0,Ee[2]=1;break;default:Ee[0]=1,Ee[1]=0,Ee[2]=at}return ws=(1-ae)*pe,[(ae*Ee[0]+ws)*255,(ae*Ee[1]+ws)*255,(ae*Ee[2]+ws)*255]},v.hcg.hsv=function(Z){var ne=Z[1]/100,ae=Z[2]/100,pe=ne+ae*(1-ne),Ee=0;return pe>0&&(Ee=ne/pe),[Z[0],Ee*100,pe*100]},v.hcg.hsl=function(Z){var ne=Z[1]/100,ae=Z[2]/100,pe=ae*(1-ne)+.5*ne,Ee=0;return pe>0&&pe<.5?Ee=ne/(2*pe):pe>=.5&&pe<1&&(Ee=ne/(2*(1-pe))),[Z[0],Ee*100,pe*100]},v.hcg.hwb=function(Z){var ne=Z[1]/100,ae=Z[2]/100,pe=ne+ae*(1-ne);return[Z[0],(pe-ne)*100,(1-pe)*100]},v.hwb.hcg=function(Z){var ne=Z[1]/100,ae=Z[2]/100,pe=1-ae,Ee=pe-ne,Ve=0;return Ee<1&&(Ve=(pe-Ee)/(1-Ee)),[Z[0],Ee*100,Ve*100]},v.apple.rgb=function(Z){return[Z[0]/65535*255,Z[1]/65535*255,Z[2]/65535*255]},v.rgb.apple=function(Z){return[Z[0]/255*65535,Z[1]/255*65535,Z[2]/255*65535]},v.gray.rgb=function(Z){return[Z[0]/100*255,Z[0]/100*255,Z[0]/100*255]},v.gray.hsl=v.gray.hsv=function(Z){return[0,0,Z[0]]},v.gray.hwb=function(Z){return[0,100,Z[0]]},v.gray.cmyk=function(Z){return[0,0,0,Z[0]]},v.gray.lab=function(Z){return[Z[0],0,0]},v.gray.hex=function(Z){var ne=Math.round(Z[0]/100*255)&255,ae=(ne<<16)+(ne<<8)+ne,pe=ae.toString(16).toUpperCase();return"000000".substring(pe.length)+pe},v.rgb.gray=function(Z){var ne=(Z[0]+Z[1]+Z[2])/3;return[ne/255*100]}});o.rgb,o.hsl,o.hsv,o.hwb,o.cmyk,o.xyz,o.lab,o.lch,o.hex,o.keyword,o.ansi16,o.ansi256,o.hcg,o.apple,o.gray;function u(){for(var a={},l=Object.keys(o),p=l.length,v=0;v<p;v++)a[l[v]]={distance:-1,parent:null};return a}function c(a){var l=u(),p=[a];for(l[a].distance=0;p.length;)for(var v=p.pop(),A=Object.keys(o[v]),H=A.length,Q=0;Q<H;Q++){var ee=A[Q],Z=l[ee];Z.distance===-1&&(Z.distance=l[v].distance+1,Z.parent=v,p.unshift(ee))}return l}function d(a,l){return function(p){return l(a(p))}}function m(a,l){for(var p=[l[a].parent,a],v=o[l[a].parent][a],A=l[a].parent;l[A].parent;)p.unshift(l[A].parent),v=d(o[l[A].parent][A],v),A=l[A].parent;return v.conversion=p,v}var T=function(a){for(var l=c(a),p={},v=Object.keys(l),A=v.length,H=0;H<A;H++){var Q=v[H],ee=l[Q];ee.parent!==null&&(p[Q]=m(Q,l))}return p},$={},C=Object.keys(o);function D(a){var l=function(p){return p==null?p:(arguments.length>1&&(p=Array.prototype.slice.call(arguments)),a(p))};return"conversion"in a&&(l.conversion=a.conversion),l}function F(a){var l=function(p){if(p==null)return p;arguments.length>1&&(p=Array.prototype.slice.call(arguments));var v=a(p);if(typeof v=="object")for(var A=v.length,H=0;H<A;H++)v[H]=Math.round(v[H]);return v};return"conversion"in a&&(l.conversion=a.conversion),l}C.forEach(function(a){$[a]={},Object.defineProperty($[a],"channels",{value:o[a].channels}),Object.defineProperty($[a],"labels",{value:o[a].labels});var l=T(a),p=Object.keys(l);p.forEach(function(v){var A=l[v];$[a][v]=F(A),$[a][v].raw=D(A)})});var g=$,q={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},x={getRgba:P,getHsla:K,getRgb:B,getHsl:J,getHwb:L,getAlpha:re,hexString:ve,rgbString:ye,rgbaString:Se,percentString:Ne,percentaString:Ke,hslString:Ar,hslaString:hi,hwbString:gi,keyword:Gi};function P(a){if(a){var l=/^#([a-fA-F0-9]{3,4})$/i,p=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,v=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,A=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,H=/(\w+)/,Q=[0,0,0],ee=1,Z=a.match(l),ne="";if(Z){Z=Z[1],ne=Z[3];for(var ae=0;ae<Q.length;ae++)Q[ae]=parseInt(Z[ae]+Z[ae],16);ne&&(ee=Math.round(parseInt(ne+ne,16)/255*100)/100)}else if(Z=a.match(p)){ne=Z[2],Z=Z[1];for(var ae=0;ae<Q.length;ae++)Q[ae]=parseInt(Z.slice(ae*2,ae*2+2),16);ne&&(ee=Math.round(parseInt(ne,16)/255*100)/100)}else if(Z=a.match(v)){for(var ae=0;ae<Q.length;ae++)Q[ae]=parseInt(Z[ae+1]);ee=parseFloat(Z[4])}else if(Z=a.match(A)){for(var ae=0;ae<Q.length;ae++)Q[ae]=Math.round(parseFloat(Z[ae+1])*2.55);ee=parseFloat(Z[4])}else if(Z=a.match(H)){if(Z[1]=="transparent")return[0,0,0,0];if(Q=q[Z[1]],!Q)return}for(var ae=0;ae<Q.length;ae++)Q[ae]=bs(Q[ae],0,255);return!ee&&ee!=0?ee=1:ee=bs(ee,0,1),Q[3]=ee,Q}}function K(a){if(a){var l=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,p=a.match(l);if(p){var v=parseFloat(p[4]),A=bs(parseInt(p[1]),0,360),H=bs(parseFloat(p[2]),0,100),Q=bs(parseFloat(p[3]),0,100),ee=bs(isNaN(v)?1:v,0,1);return[A,H,Q,ee]}}}function L(a){if(a){var l=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,p=a.match(l);if(p){var v=parseFloat(p[4]),A=bs(parseInt(p[1]),0,360),H=bs(parseFloat(p[2]),0,100),Q=bs(parseFloat(p[3]),0,100),ee=bs(isNaN(v)?1:v,0,1);return[A,H,Q,ee]}}}function B(a){var l=P(a);return l&&l.slice(0,3)}function J(a){var l=K(a);return l&&l.slice(0,3)}function re(a){var l=P(a);if(l)return l[3];if(l=K(a))return l[3];if(l=L(a))return l[3]}function ve(a,p){var p=p!==void 0&&a.length===3?p:a[3];return"#"+ua(a[0])+ua(a[1])+ua(a[2])+(p>=0&&p<1?ua(Math.round(p*255)):"")}function ye(a,l){return l<1||a[3]&&a[3]<1?Se(a,l):"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function Se(a,l){return l===void 0&&(l=a[3]!==void 0?a[3]:1),"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+l+")"}function Ne(a,l){if(l<1||a[3]&&a[3]<1)return Ke(a,l);var p=Math.round(a[0]/255*100),v=Math.round(a[1]/255*100),A=Math.round(a[2]/255*100);return"rgb("+p+"%, "+v+"%, "+A+"%)"}function Ke(a,l){var p=Math.round(a[0]/255*100),v=Math.round(a[1]/255*100),A=Math.round(a[2]/255*100);return"rgba("+p+"%, "+v+"%, "+A+"%, "+(l||a[3]||1)+")"}function Ar(a,l){return l<1||a[3]&&a[3]<1?hi(a,l):"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)"}function hi(a,l){return l===void 0&&(l=a[3]!==void 0?a[3]:1),"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+l+")"}function gi(a,l){return l===void 0&&(l=a[3]!==void 0?a[3]:1),"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+(l!==void 0&&l!==1?", "+l:"")+")"}function Gi(a){return Re[a.slice(0,3)]}function bs(a,l,p){return Math.min(Math.max(l,a),p)}function ua(a){var l=a.toString(16).toUpperCase();return l.length<2?"0"+l:l}var Re={};for(var ie in q)Re[q[ie]]=ie;var ke=function(a){if(a instanceof ke)return a;if(!(this instanceof ke))return new ke(a);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var l;typeof a=="string"?(l=x.getRgba(a),l?this.setValues("rgb",l):(l=x.getHsla(a))?this.setValues("hsl",l):(l=x.getHwb(a))&&this.setValues("hwb",l)):typeof a=="object"&&(l=a,l.r!==void 0||l.red!==void 0?this.setValues("rgb",l):l.l!==void 0||l.lightness!==void 0?this.setValues("hsl",l):l.v!==void 0||l.value!==void 0?this.setValues("hsv",l):l.w!==void 0||l.whiteness!==void 0?this.setValues("hwb",l):(l.c!==void 0||l.cyan!==void 0)&&this.setValues("cmyk",l))};ke.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var a=this.values;return a.alpha!==1?a.hwb.concat([a.alpha]):a.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var a=this.values;return a.rgb.concat([a.alpha])},hslaArray:function(){var a=this.values;return a.hsl.concat([a.alpha])},alpha:function(a){return a===void 0?this.values.alpha:(this.setValues("alpha",a),this)},red:function(a){return this.setChannel("rgb",0,a)},green:function(a){return this.setChannel("rgb",1,a)},blue:function(a){return this.setChannel("rgb",2,a)},hue:function(a){return a&&(a%=360,a=a<0?360+a:a),this.setChannel("hsl",0,a)},saturation:function(a){return this.setChannel("hsl",1,a)},lightness:function(a){return this.setChannel("hsl",2,a)},saturationv:function(a){return this.setChannel("hsv",1,a)},whiteness:function(a){return this.setChannel("hwb",1,a)},blackness:function(a){return this.setChannel("hwb",2,a)},value:function(a){return this.setChannel("hsv",2,a)},cyan:function(a){return this.setChannel("cmyk",0,a)},magenta:function(a){return this.setChannel("cmyk",1,a)},yellow:function(a){return this.setChannel("cmyk",2,a)},black:function(a){return this.setChannel("cmyk",3,a)},hexString:function(){return x.hexString(this.values.rgb)},rgbString:function(){return x.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return x.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return x.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return x.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return x.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return x.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return x.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var a=this.values.rgb;return a[0]<<16|a[1]<<8|a[2]},luminosity:function(){for(var a=this.values.rgb,l=[],p=0;p<a.length;p++){var v=a[p]/255;l[p]=v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4)}return .2126*l[0]+.7152*l[1]+.0722*l[2]},contrast:function(a){var l=this.luminosity(),p=a.luminosity();return l>p?(l+.05)/(p+.05):(p+.05)/(l+.05)},level:function(a){var l=this.contrast(a);return l>=7.1?"AAA":l>=4.5?"AA":""},dark:function(){var a=this.values.rgb,l=(a[0]*299+a[1]*587+a[2]*114)/1e3;return l<128},light:function(){return!this.dark()},negate:function(){for(var a=[],l=0;l<3;l++)a[l]=255-this.values.rgb[l];return this.setValues("rgb",a),this},lighten:function(a){var l=this.values.hsl;return l[2]+=l[2]*a,this.setValues("hsl",l),this},darken:function(a){var l=this.values.hsl;return l[2]-=l[2]*a,this.setValues("hsl",l),this},saturate:function(a){var l=this.values.hsl;return l[1]+=l[1]*a,this.setValues("hsl",l),this},desaturate:function(a){var l=this.values.hsl;return l[1]-=l[1]*a,this.setValues("hsl",l),this},whiten:function(a){var l=this.values.hwb;return l[1]+=l[1]*a,this.setValues("hwb",l),this},blacken:function(a){var l=this.values.hwb;return l[2]+=l[2]*a,this.setValues("hwb",l),this},greyscale:function(){var a=this.values.rgb,l=a[0]*.3+a[1]*.59+a[2]*.11;return this.setValues("rgb",[l,l,l]),this},clearer:function(a){var l=this.values.alpha;return this.setValues("alpha",l-l*a),this},opaquer:function(a){var l=this.values.alpha;return this.setValues("alpha",l+l*a),this},rotate:function(a){var l=this.values.hsl,p=(l[0]+a)%360;return l[0]=p<0?360+p:p,this.setValues("hsl",l),this},mix:function(a,l){var p=this,v=a,A=l===void 0?.5:l,H=2*A-1,Q=p.alpha()-v.alpha(),ee=((H*Q===-1?H:(H+Q)/(1+H*Q))+1)/2,Z=1-ee;return this.rgb(ee*p.red()+Z*v.red(),ee*p.green()+Z*v.green(),ee*p.blue()+Z*v.blue()).alpha(p.alpha()*A+v.alpha()*(1-A))},toJSON:function(){return this.rgb()},clone:function(){var a=new ke,l=this.values,p=a.values,v,A;for(var H in l)l.hasOwnProperty(H)&&(v=l[H],A={}.toString.call(v),A==="[object Array]"?p[H]=v.slice(0):A==="[object Number]"?p[H]=v:console.error("unexpected color value:",v));return a}},ke.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},ke.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},ke.prototype.getValues=function(a){for(var l=this.values,p={},v=0;v<a.length;v++)p[a.charAt(v)]=l[a][v];return l.alpha!==1&&(p.a=l.alpha),p},ke.prototype.setValues=function(a,l){var p=this.values,v=this.spaces,A=this.maxes,H=1,Q;if(this.valid=!0,a==="alpha")H=l;else if(l.length)p[a]=l.slice(0,a.length),H=l[a.length];else if(l[a.charAt(0)]!==void 0){for(Q=0;Q<a.length;Q++)p[a][Q]=l[a.charAt(Q)];H=l.a}else if(l[v[a][0]]!==void 0){var ee=v[a];for(Q=0;Q<a.length;Q++)p[a][Q]=l[ee[Q]];H=l.alpha}if(p.alpha=Math.max(0,Math.min(1,H===void 0?p.alpha:H)),a==="alpha")return!1;var Z;for(Q=0;Q<a.length;Q++)Z=Math.max(0,Math.min(A[a][Q],p[a][Q])),p[a][Q]=Math.round(Z);for(var ne in v)ne!==a&&(p[ne]=g[a][ne](p[a]));return!0},ke.prototype.setSpace=function(a,l){var p=l[0];return p===void 0?this.getValues(a):(typeof p=="number"&&(p=Array.prototype.slice.call(l)),this.setValues(a,p),this)},ke.prototype.setChannel=function(a,l,p){var v=this.values[a];return p===void 0?v[l]:p===v[l]?this:(v[l]=p,this.setValues(a,v),this)},typeof window<"u"&&(window.Color=ke);var ue=ke;function G(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}var X={noop:function(){},uid:(function(){var a=0;return function(){return a++}})(),isNullOrUndef:function(a){return a===null||typeof a>"u"},isArray:function(a){if(Array.isArray&&Array.isArray(a))return!0;var l=Object.prototype.toString.call(a);return l.substr(0,7)==="[object"&&l.substr(-6)==="Array]"},isObject:function(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"},isFinite:function(a){return(typeof a=="number"||a instanceof Number)&&isFinite(a)},valueOrDefault:function(a,l){return typeof a>"u"?l:a},valueAtIndexOrDefault:function(a,l,p){return X.valueOrDefault(X.isArray(a)?a[l]:a,p)},callback:function(a,l,p){if(a&&typeof a.call=="function")return a.apply(p,l)},each:function(a,l,p,v){var A,H,Q;if(X.isArray(a))if(H=a.length,v)for(A=H-1;A>=0;A--)l.call(p,a[A],A);else for(A=0;A<H;A++)l.call(p,a[A],A);else if(X.isObject(a))for(Q=Object.keys(a),H=Q.length,A=0;A<H;A++)l.call(p,a[Q[A]],Q[A])},arrayEquals:function(a,l){var p,v,A,H;if(!a||!l||a.length!==l.length)return!1;for(p=0,v=a.length;p<v;++p)if(A=a[p],H=l[p],A instanceof Array&&H instanceof Array){if(!X.arrayEquals(A,H))return!1}else if(A!==H)return!1;return!0},clone:function(a){if(X.isArray(a))return a.map(X.clone);if(X.isObject(a)){for(var l=Object.create(a),p=Object.keys(a),v=p.length,A=0;A<v;++A)l[p[A]]=X.clone(a[p[A]]);return l}return a},_merger:function(a,l,p,v){if(G(a)){var A=l[a],H=p[a];X.isObject(A)&&X.isObject(H)?X.merge(A,H,v):l[a]=X.clone(H)}},_mergerIf:function(a,l,p){if(G(a)){var v=l[a],A=p[a];X.isObject(v)&&X.isObject(A)?X.mergeIf(v,A):l.hasOwnProperty(a)||(l[a]=X.clone(A))}},merge:function(a,l,p){var v=X.isArray(l)?l:[l],A=v.length,H,Q,ee,Z,ne;if(!X.isObject(a))return a;for(p=p||{},H=p.merger||X._merger,Q=0;Q<A;++Q)if(l=v[Q],!!X.isObject(l))for(ee=Object.keys(l),ne=0,Z=ee.length;ne<Z;++ne)H(ee[ne],a,l,p);return a},mergeIf:function(a,l){return X.merge(a,l,{merger:X._mergerIf})},extend:Object.assign||function(a){return X.merge(a,[].slice.call(arguments,1),{merger:function(l,p,v){p[l]=v[l]}})},inherits:function(a){var l=this,p=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return l.apply(this,arguments)},v=function(){this.constructor=p};return v.prototype=l.prototype,p.prototype=new v,p.extend=X.inherits,a&&X.extend(p.prototype,a),p.__super__=l.prototype,p},_deprecated:function(a,l,p,v){l!==void 0&&console.warn(a+': "'+p+'" is deprecated. Please use "'+v+'" instead')}},ce=X;X.callCallback=X.callback,X.indexOf=function(a,l,p){return Array.prototype.indexOf.call(a,l,p)},X.getValueOrDefault=X.valueOrDefault,X.getValueAtIndexOrDefault=X.valueAtIndexOrDefault;var De={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return(a=a-1)*a*a+1},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-((a=a-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return(a=a-1)*a*a*a*a+1},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return a===0?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return a===1?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return a===0?0:a===1?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-(a=a-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var l=1.70158,p=0,v=1;return a===0?0:a===1?1:(p||(p=.3),l=p/(2*Math.PI)*Math.asin(1/v),-(v*Math.pow(2,10*(a-=1))*Math.sin((a-l)*(2*Math.PI)/p)))},easeOutElastic:function(a){var l=1.70158,p=0,v=1;return a===0?0:a===1?1:(p||(p=.3),l=p/(2*Math.PI)*Math.asin(1/v),v*Math.pow(2,-10*a)*Math.sin((a-l)*(2*Math.PI)/p)+1)},easeInOutElastic:function(a){var l=1.70158,p=0,v=1;return a===0?0:(a/=.5)===2?1:(p||(p=.45),l=p/(2*Math.PI)*Math.asin(1/v),a<1?-.5*(v*Math.pow(2,10*(a-=1))*Math.sin((a-l)*(2*Math.PI)/p)):v*Math.pow(2,-10*(a-=1))*Math.sin((a-l)*(2*Math.PI)/p)*.5+1)},easeInBack:function(a){var l=1.70158;return a*a*((l+1)*a-l)},easeOutBack:function(a){var l=1.70158;return(a=a-1)*a*((l+1)*a+l)+1},easeInOutBack:function(a){var l=1.70158;return(a/=.5)<1?.5*(a*a*(((l*=1.525)+1)*a-l)):.5*((a-=2)*a*(((l*=1.525)+1)*a+l)+2)},easeInBounce:function(a){return 1-De.easeOutBounce(1-a)},easeOutBounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:function(a){return a<.5?De.easeInBounce(a*2)*.5:De.easeOutBounce(a*2-1)*.5+.5}},qe={effects:De};ce.easingEffects=De;var bt=Math.PI,vr=bt/180,te=bt*2,se=bt/2,$e=bt/4,Ie=bt*2/3,Ye={clear:function(a){a.ctx.clearRect(0,0,a.width,a.height)},roundedRect:function(a,l,p,v,A,H){if(H){var Q=Math.min(H,A/2,v/2),ee=l+Q,Z=p+Q,ne=l+v-Q,ae=p+A-Q;a.moveTo(l,Z),ee<ne&&Z<ae?(a.arc(ee,Z,Q,-bt,-se),a.arc(ne,Z,Q,-se,0),a.arc(ne,ae,Q,0,se),a.arc(ee,ae,Q,se,bt)):ee<ne?(a.moveTo(ee,p),a.arc(ne,Z,Q,-se,se),a.arc(ee,Z,Q,se,bt+se)):Z<ae?(a.arc(ee,Z,Q,-bt,0),a.arc(ee,ae,Q,0,bt)):a.arc(ee,Z,Q,-bt,bt),a.closePath(),a.moveTo(l,p)}else a.rect(l,p,v,A)},drawPoint:function(a,l,p,v,A,H){var Q,ee,Z,ne,ae,pe=(H||0)*vr;if(l&&typeof l=="object"&&(Q=l.toString(),Q==="[object HTMLImageElement]"||Q==="[object HTMLCanvasElement]")){a.save(),a.translate(v,A),a.rotate(pe),a.drawImage(l,-l.width/2,-l.height/2,l.width,l.height),a.restore();return}if(!(isNaN(p)||p<=0)){switch(a.beginPath(),l){default:a.arc(v,A,p,0,te),a.closePath();break;case"triangle":a.moveTo(v+Math.sin(pe)*p,A-Math.cos(pe)*p),pe+=Ie,a.lineTo(v+Math.sin(pe)*p,A-Math.cos(pe)*p),pe+=Ie,a.lineTo(v+Math.sin(pe)*p,A-Math.cos(pe)*p),a.closePath();break;case"rectRounded":ae=p*.516,ne=p-ae,ee=Math.cos(pe+$e)*ne,Z=Math.sin(pe+$e)*ne,a.arc(v-ee,A-Z,ae,pe-bt,pe-se),a.arc(v+Z,A-ee,ae,pe-se,pe),a.arc(v+ee,A+Z,ae,pe,pe+se),a.arc(v-Z,A+ee,ae,pe+se,pe+bt),a.closePath();break;case"rect":if(!H){ne=Math.SQRT1_2*p,a.rect(v-ne,A-ne,2*ne,2*ne);break}pe+=$e;case"rectRot":ee=Math.cos(pe)*p,Z=Math.sin(pe)*p,a.moveTo(v-ee,A-Z),a.lineTo(v+Z,A-ee),a.lineTo(v+ee,A+Z),a.lineTo(v-Z,A+ee),a.closePath();break;case"crossRot":pe+=$e;case"cross":ee=Math.cos(pe)*p,Z=Math.sin(pe)*p,a.moveTo(v-ee,A-Z),a.lineTo(v+ee,A+Z),a.moveTo(v+Z,A-ee),a.lineTo(v-Z,A+ee);break;case"star":ee=Math.cos(pe)*p,Z=Math.sin(pe)*p,a.moveTo(v-ee,A-Z),a.lineTo(v+ee,A+Z),a.moveTo(v+Z,A-ee),a.lineTo(v-Z,A+ee),pe+=$e,ee=Math.cos(pe)*p,Z=Math.sin(pe)*p,a.moveTo(v-ee,A-Z),a.lineTo(v+ee,A+Z),a.moveTo(v+Z,A-ee),a.lineTo(v-Z,A+ee);break;case"line":ee=Math.cos(pe)*p,Z=Math.sin(pe)*p,a.moveTo(v-ee,A-Z),a.lineTo(v+ee,A+Z);break;case"dash":a.moveTo(v,A),a.lineTo(v+Math.cos(pe)*p,A+Math.sin(pe)*p);break}a.fill(),a.stroke()}},_isPointInArea:function(a,l){var p=1e-6;return a.x>l.left-p&&a.x<l.right+p&&a.y>l.top-p&&a.y<l.bottom+p},clipArea:function(a,l){a.save(),a.beginPath(),a.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),a.clip()},unclipArea:function(a){a.restore()},lineTo:function(a,l,p,v){var A=p.steppedLine;if(A){if(A==="middle"){var H=(l.x+p.x)/2;a.lineTo(H,v?p.y:l.y),a.lineTo(H,v?l.y:p.y)}else A==="after"&&!v||A!=="after"&&v?a.lineTo(l.x,p.y):a.lineTo(p.x,l.y);a.lineTo(p.x,p.y);return}if(!p.tension){a.lineTo(p.x,p.y);return}a.bezierCurveTo(v?l.controlPointPreviousX:l.controlPointNextX,v?l.controlPointPreviousY:l.controlPointNextY,v?p.controlPointNextX:p.controlPointPreviousX,v?p.controlPointNextY:p.controlPointPreviousY,p.x,p.y)}},Je=Ye;ce.clear=Ye.clear,ce.drawRoundedRectangle=function(a){a.beginPath(),Ye.roundedRect.apply(Ye,arguments)};var pi={_set:function(a,l){return ce.merge(this[a]||(this[a]={}),l)}};pi._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var Os=pi,vi=ce.valueOrDefault;function Ui(a){return!a||ce.isNullOrUndef(a.size)||ce.isNullOrUndef(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}var ca={toLineHeight:function(a,l){var p=(""+a).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!p||p[1]==="normal")return l*1.2;switch(a=+p[2],p[3]){case"px":return a;case"%":a/=100;break}return l*a},toPadding:function(a){var l,p,v,A;return ce.isObject(a)?(l=+a.top||0,p=+a.right||0,v=+a.bottom||0,A=+a.left||0):l=p=v=A=+a||0,{top:l,right:p,bottom:v,left:A,height:l+v,width:A+p}},_parseFont:function(a){var l=Os.global,p=vi(a.fontSize,l.defaultFontSize),v={family:vi(a.fontFamily,l.defaultFontFamily),lineHeight:ce.options.toLineHeight(vi(a.lineHeight,l.defaultLineHeight),p),size:p,style:vi(a.fontStyle,l.defaultFontStyle),weight:null,string:""};return v.string=Ui(v),v},resolve:function(a,l,p,v){var A=!0,H,Q,ee;for(H=0,Q=a.length;H<Q;++H)if(ee=a[H],ee!==void 0&&(l!==void 0&&typeof ee=="function"&&(ee=ee(l),A=!1),p!==void 0&&ce.isArray(ee)&&(ee=ee[p],A=!1),ee!==void 0))return v&&!A&&(v.cacheable=!1),ee}},va={_factorize:function(a){var l=[],p=Math.sqrt(a),v;for(v=1;v<p;v++)a%v===0&&(l.push(v),l.push(a/v));return p===(p|0)&&l.push(p),l.sort(function(A,H){return A-H}).pop(),l},log10:Math.log10||function(a){var l=Math.log(a)*Math.LOG10E,p=Math.round(l),v=a===Math.pow(10,p);return v?p:l}},da=va;ce.log10=va.log10;var ha=function(a,l){return{x:function(p){return a+a+l-p},setWidth:function(p){l=p},textAlign:function(p){return p==="center"?p:p==="right"?"left":"right"},xPlus:function(p,v){return p-v},leftForLtr:function(p,v){return p-v}}},ya=function(){return{x:function(a){return a},setWidth:function(a){},textAlign:function(a){return a},xPlus:function(a,l){return a+l},leftForLtr:function(a,l){return a}}},mi=function(a,l,p){return a?ha(l,p):ya()},fa=function(a,l){var p,v;(l==="ltr"||l==="rtl")&&(p=a.canvas.style,v=[p.getPropertyValue("direction"),p.getPropertyPriority("direction")],p.setProperty("direction",l,"important"),a.prevTextDirection=v)},pa=function(a){var l=a.prevTextDirection;l!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",l[0],l[1]))},_a={getRtlAdapter:mi,overrideTextDirection:fa,restoreTextDirection:pa},be=ce,Ca=qe,ka=Je,xa=ca,Th=da,eh=_a;be.easing=Ca,be.canvas=ka,be.options=xa,be.math=Th,be.rtl=eh;function Oh(a,l,p,v){var A=Object.keys(p),H,Q,ee,Z,ne,ae,pe,Ee,Ve;for(H=0,Q=A.length;H<Q;++H)if(ee=A[H],ae=p[ee],l.hasOwnProperty(ee)||(l[ee]=ae),Z=l[ee],!(Z===ae||ee[0]==="_")){if(a.hasOwnProperty(ee)||(a[ee]=Z),ne=a[ee],pe=typeof ae,pe===typeof ne){if(pe==="string"){if(Ee=ue(ne),Ee.valid&&(Ve=ue(ae),Ve.valid)){l[ee]=Ve.mix(Ee,v).rgbString();continue}}else if(be.isFinite(ne)&&be.isFinite(ae)){l[ee]=ne+(ae-ne)*v;continue}}l[ee]=ae}}var uh=function(a){be.extend(this,a),this.initialize.apply(this,arguments)};be.extend(uh.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var a=this;return a._view||(a._view=be.extend({},a._model)),a._start={},a},transition:function(a){var l=this,p=l._model,v=l._start,A=l._view;return!p||a===1?(l._view=be.extend({},p),l._start=null,l):(A||(A=l._view={}),v||(v=l._start={}),Oh(v,A,p,a),l)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return be.isNumber(this._model.x)&&be.isNumber(this._model.y)}}),uh.extend=be.inherits;var ah=uh,jh=ah.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Vh=jh;Object.defineProperty(jh.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(jh.prototype,"chartInstance",{get:function(){return this.chart},set:function(a){this.chart=a}}),Os._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:be.noop,onComplete:be.noop}});var zh={animations:[],request:null,addAnimation:function(a,l,p,v){var A=this.animations,H,Q;for(l.chart=a,l.startTime=Date.now(),l.duration=p,v||(a.animating=!0),H=0,Q=A.length;H<Q;++H)if(A[H].chart===a){A[H]=l;return}A.push(l),A.length===1&&this.requestAnimationFrame()},cancelAnimation:function(a){var l=be.findIndex(this.animations,function(p){return p.chart===a});l!==-1&&(this.animations.splice(l,1),a.animating=!1)},requestAnimationFrame:function(){var a=this;a.request===null&&(a.request=be.requestAnimFrame.call(window,function(){a.request=null,a.startDigest()}))},startDigest:function(){var a=this;a.advance(),a.animations.length>0&&a.requestAnimationFrame()},advance:function(){for(var a=this.animations,l,p,v,A,H=0;H<a.length;)l=a[H],p=l.chart,v=l.numSteps,A=Math.floor((Date.now()-l.startTime)/l.duration*v)+1,l.currentStep=Math.min(A,v),be.callback(l.render,[p,l],p),be.callback(l.onAnimationProgress,[l],p),l.currentStep>=v?(be.callback(l.onAnimationComplete,[l],p),p.animating=!1,a.splice(H,1)):++H}},gh=be.options.resolve,Uh=["push","pop","shift","splice","unshift"];function mp(a,l){if(a._chartjs){a._chartjs.listeners.push(l);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[l]}}),Uh.forEach(function(p){var v="onData"+p.charAt(0).toUpperCase()+p.slice(1),A=a[p];Object.defineProperty(a,p,{configurable:!0,enumerable:!1,value:function(){var H=Array.prototype.slice.call(arguments),Q=A.apply(this,H);return be.each(a._chartjs.listeners,function(ee){typeof ee[v]=="function"&&ee[v].apply(ee,H)}),Q}})})}function tp(a,l){var p=a._chartjs;if(p){var v=p.listeners,A=v.indexOf(l);A!==-1&&v.splice(A,1),!(v.length>0)&&(Uh.forEach(function(H){delete a[H]}),delete a._chartjs)}}var vp=function(a,l){this.initialize(a,l)};be.extend(vp.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(a,l){var p=this;p.chart=a,p.index=l,p.linkScales(),p.addElements(),p._type=p.getMeta().type},updateIndex:function(a){this.index=a},linkScales:function(){var a=this,l=a.getMeta(),p=a.chart,v=p.scales,A=a.getDataset(),H=p.options.scales;(l.xAxisID===null||!(l.xAxisID in v)||A.xAxisID)&&(l.xAxisID=A.xAxisID||H.xAxes[0].id),(l.yAxisID===null||!(l.yAxisID in v)||A.yAxisID)&&(l.yAxisID=A.yAxisID||H.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(a){return this.chart.scales[a]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&tp(this._data,this)},createMetaDataset:function(){var a=this,l=a.datasetElementType;return l&&new l({_chart:a.chart,_datasetIndex:a.index})},createMetaData:function(a){var l=this,p=l.dataElementType;return p&&new p({_chart:l.chart,_datasetIndex:l.index,_index:a})},addElements:function(){var a=this,l=a.getMeta(),p=a.getDataset().data||[],v=l.data,A,H;for(A=0,H=p.length;A<H;++A)v[A]=v[A]||a.createMetaData(A);l.dataset=l.dataset||a.createMetaDataset()},addElementAndReset:function(a){var l=this.createMetaData(a);this.getMeta().data.splice(a,0,l),this.updateElement(l,a,!0)},buildOrUpdateElements:function(){var a=this,l=a.getDataset(),p=l.data||(l.data=[]);a._data!==p&&(a._data&&tp(a._data,a),p&&Object.isExtensible(p)&&mp(p,a),a._data=p),a.resyncElements()},_configure:function(){var a=this;a._config=be.merge(Object.create(null),[a.chart.options.datasets[a._type],a.getDataset()],{merger:function(l,p,v){l!=="_meta"&&l!=="data"&&be._merger(l,p,v)}})},_update:function(a){var l=this;l._configure(),l._cachedDataOpts=null,l.update(a)},update:be.noop,transition:function(a){for(var l=this.getMeta(),p=l.data||[],v=p.length,A=0;A<v;++A)p[A].transition(a);l.dataset&&l.dataset.transition(a)},draw:function(){var a=this.getMeta(),l=a.data||[],p=l.length,v=0;for(a.dataset&&a.dataset.draw();v<p;++v)l[v].draw()},getStyle:function(a){var l=this,p=l.getMeta(),v=p.dataset,A;return l._configure(),v&&a===void 0?A=l._resolveDatasetElementOptions(v||{}):(a=a||0,A=l._resolveDataElementOptions(p.data[a]||{},a)),(A.fill===!1||A.fill===null)&&(A.backgroundColor=A.borderColor),A},_resolveDatasetElementOptions:function(a,l){var p=this,v=p.chart,A=p._config,H=a.custom||{},Q=v.options.elements[p.datasetElementType.prototype._type]||{},ee=p._datasetElementOptions,Z={},ne,ae,pe,Ee,Ve={chart:v,dataset:p.getDataset(),datasetIndex:p.index,hover:l};for(ne=0,ae=ee.length;ne<ae;++ne)pe=ee[ne],Ee=l?"hover"+pe.charAt(0).toUpperCase()+pe.slice(1):pe,Z[pe]=gh([H[Ee],A[Ee],Q[Ee]],Ve);return Z},_resolveDataElementOptions:function(a,l){var p=this,v=a&&a.custom,A=p._cachedDataOpts;if(A&&!v)return A;var H=p.chart,Q=p._config,ee=H.options.elements[p.dataElementType.prototype._type]||{},Z=p._dataElementOptions,ne={},ae={chart:H,dataIndex:l,dataset:p.getDataset(),datasetIndex:p.index},pe={cacheable:!v},Ee,Ve,We,at;if(v=v||{},be.isArray(Z))for(Ve=0,We=Z.length;Ve<We;++Ve)at=Z[Ve],ne[at]=gh([v[at],Q[at],ee[at]],ae,l,pe);else for(Ee=Object.keys(Z),Ve=0,We=Ee.length;Ve<We;++Ve)at=Ee[Ve],ne[at]=gh([v[at],Q[Z[at]],Q[at],ee[at]],ae,l,pe);return pe.cacheable&&(p._cachedDataOpts=Object.freeze(ne)),ne},removeHoverStyle:function(a){be.merge(a._model,a.$previousStyle||{}),delete a.$previousStyle},setHoverStyle:function(a){var l=this.chart.data.datasets[a._datasetIndex],p=a._index,v=a.custom||{},A=a._model,H=be.getHoverColor;a.$previousStyle={backgroundColor:A.backgroundColor,borderColor:A.borderColor,borderWidth:A.borderWidth},A.backgroundColor=gh([v.hoverBackgroundColor,l.hoverBackgroundColor,H(A.backgroundColor)],void 0,p),A.borderColor=gh([v.hoverBorderColor,l.hoverBorderColor,H(A.borderColor)],void 0,p),A.borderWidth=gh([v.hoverBorderWidth,l.hoverBorderWidth,A.borderWidth],void 0,p)},_removeDatasetHoverStyle:function(){var a=this.getMeta().dataset;a&&this.removeHoverStyle(a)},_setDatasetHoverStyle:function(){var a=this.getMeta().dataset,l={},p,v,A,H,Q,ee;if(a){for(ee=a._model,Q=this._resolveDatasetElementOptions(a,!0),H=Object.keys(Q),p=0,v=H.length;p<v;++p)A=H[p],l[A]=ee[A],ee[A]=Q[A];a.$previousStyle=l}},resyncElements:function(){var a=this,l=a.getMeta(),p=a.getDataset().data,v=l.data.length,A=p.length;A<v?l.data.splice(A,v-A):A>v&&a.insertElements(v,A-v)},insertElements:function(a,l){for(var p=0;p<l;++p)this.addElementAndReset(a+p)},onDataPush:function(){var a=arguments.length;this.insertElements(this.getDataset().data.length-a,a)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(a,l){this.getMeta().data.splice(a,l),this.insertElements(a,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),vp.extend=be.inherits;var oh=vp,ch=Math.PI*2;Os._set("global",{elements:{arc:{backgroundColor:Os.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function Kp(a,l){var p=l.startAngle,v=l.endAngle,A=l.pixelMargin,H=A/l.outerRadius,Q=l.x,ee=l.y;a.beginPath(),a.arc(Q,ee,l.outerRadius,p-H,v+H),l.innerRadius>A?(H=A/l.innerRadius,a.arc(Q,ee,l.innerRadius-A,v+H,p-H,!0)):a.arc(Q,ee,A,v+Math.PI/2,p-Math.PI/2),a.closePath(),a.clip()}function Bm(a,l,p,v){var A=p.endAngle,H;for(v&&(p.endAngle=p.startAngle+ch,Kp(a,p),p.endAngle=A,p.endAngle===p.startAngle&&p.fullCircles&&(p.endAngle+=ch,p.fullCircles--)),a.beginPath(),a.arc(p.x,p.y,p.innerRadius,p.startAngle+ch,p.startAngle,!0),H=0;H<p.fullCircles;++H)a.stroke();for(a.beginPath(),a.arc(p.x,p.y,l.outerRadius,p.startAngle,p.startAngle+ch),H=0;H<p.fullCircles;++H)a.stroke()}function Km(a,l,p){var v=l.borderAlign==="inner";v?(a.lineWidth=l.borderWidth*2,a.lineJoin="round"):(a.lineWidth=l.borderWidth,a.lineJoin="bevel"),p.fullCircles&&Bm(a,l,p,v),v&&Kp(a,p),a.beginPath(),a.arc(p.x,p.y,l.outerRadius,p.startAngle,p.endAngle),a.arc(p.x,p.y,p.innerRadius,p.endAngle,p.startAngle,!0),a.closePath(),a.stroke()}var Ym=ah.extend({_type:"arc",inLabelRange:function(a){var l=this._view;return l?Math.pow(a-l.x,2)<Math.pow(l.radius+l.hoverRadius,2):!1},inRange:function(a,l){var p=this._view;if(p){for(var v=be.getAngleFromPoint(p,{x:a,y:l}),A=v.angle,H=v.distance,Q=p.startAngle,ee=p.endAngle;ee<Q;)ee+=ch;for(;A>ee;)A-=ch;for(;A<Q;)A+=ch;var Z=A>=Q&&A<=ee,ne=H>=p.innerRadius&&H<=p.outerRadius;return Z&&ne}return!1},getCenterPoint:function(){var a=this._view,l=(a.startAngle+a.endAngle)/2,p=(a.innerRadius+a.outerRadius)/2;return{x:a.x+Math.cos(l)*p,y:a.y+Math.sin(l)*p}},getArea:function(){var a=this._view;return Math.PI*((a.endAngle-a.startAngle)/(2*Math.PI))*(Math.pow(a.outerRadius,2)-Math.pow(a.innerRadius,2))},tooltipPosition:function(){var a=this._view,l=a.startAngle+(a.endAngle-a.startAngle)/2,p=(a.outerRadius-a.innerRadius)/2+a.innerRadius;return{x:a.x+Math.cos(l)*p,y:a.y+Math.sin(l)*p}},draw:function(){var a=this._chart.ctx,l=this._view,p=l.borderAlign==="inner"?.33:0,v={x:l.x,y:l.y,innerRadius:l.innerRadius,outerRadius:Math.max(l.outerRadius-p,0),pixelMargin:p,startAngle:l.startAngle,endAngle:l.endAngle,fullCircles:Math.floor(l.circumference/ch)},A;if(a.save(),a.fillStyle=l.backgroundColor,a.strokeStyle=l.borderColor,v.fullCircles){for(v.endAngle=v.startAngle+ch,a.beginPath(),a.arc(v.x,v.y,v.outerRadius,v.startAngle,v.endAngle),a.arc(v.x,v.y,v.innerRadius,v.endAngle,v.startAngle,!0),a.closePath(),A=0;A<v.fullCircles;++A)a.fill();v.endAngle=v.startAngle+l.circumference%ch}a.beginPath(),a.arc(v.x,v.y,v.outerRadius,v.startAngle,v.endAngle),a.arc(v.x,v.y,v.innerRadius,v.endAngle,v.startAngle,!0),a.closePath(),a.fill(),l.borderWidth&&Km(a,l,v),a.restore()}}),Yp=be.valueOrDefault,Gp=Os.global.defaultColor;Os._set("global",{elements:{line:{tension:.4,backgroundColor:Gp,borderWidth:3,borderColor:Gp,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Gm=ah.extend({_type:"line",draw:function(){var a=this,l=a._view,p=a._chart.ctx,v=l.spanGaps,A=a._children.slice(),H=Os.global,Q=H.elements.line,ee=-1,Z=a._loop,ne,ae,pe;if(A.length){if(a._loop){for(ne=0;ne<A.length;++ne)if(ae=be.previousItem(A,ne),!A[ne]._view.skip&&ae._view.skip){A=A.slice(ne).concat(A.slice(0,ne)),Z=v;break}Z&&A.push(A[0])}for(p.save(),p.lineCap=l.borderCapStyle||Q.borderCapStyle,p.setLineDash&&p.setLineDash(l.borderDash||Q.borderDash),p.lineDashOffset=Yp(l.borderDashOffset,Q.borderDashOffset),p.lineJoin=l.borderJoinStyle||Q.borderJoinStyle,p.lineWidth=Yp(l.borderWidth,Q.borderWidth),p.strokeStyle=l.borderColor||H.defaultColor,p.beginPath(),pe=A[0]._view,pe.skip||(p.moveTo(pe.x,pe.y),ee=0),ne=1;ne<A.length;++ne)pe=A[ne]._view,ae=ee===-1?be.previousItem(A,ne):A[ee],pe.skip||(ee!==ne-1&&!v||ee===-1?p.moveTo(pe.x,pe.y):be.canvas.lineTo(p,ae._view,pe),ee=ne);Z&&p.closePath(),p.stroke(),p.restore()}}}),Hm=be.valueOrDefault,Hp=Os.global.defaultColor;Os._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Hp,borderColor:Hp,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function Jp(a){var l=this._view;return l?Math.abs(a-l.x)<l.radius+l.hitRadius:!1}function Jm(a){var l=this._view;return l?Math.abs(a-l.y)<l.radius+l.hitRadius:!1}var Qm=ah.extend({_type:"point",inRange:function(a,l){var p=this._view;return p?Math.pow(a-p.x,2)+Math.pow(l-p.y,2)<Math.pow(p.hitRadius+p.radius,2):!1},inLabelRange:Jp,inXRange:Jp,inYRange:Jm,getCenterPoint:function(){var a=this._view;return{x:a.x,y:a.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var a=this._view;return{x:a.x,y:a.y,padding:a.radius+a.borderWidth}},draw:function(a){var l=this._view,p=this._chart.ctx,v=l.pointStyle,A=l.rotation,H=l.radius,Q=l.x,ee=l.y,Z=Os.global,ne=Z.defaultColor;l.skip||(a===void 0||be.canvas._isPointInArea(l,a))&&(p.strokeStyle=l.borderColor||ne,p.lineWidth=Hm(l.borderWidth,Z.elements.point.borderWidth),p.fillStyle=l.backgroundColor||ne,be.canvas.drawPoint(p,v,H,Q,ee,A))}}),Qp=Os.global.defaultColor;Os._set("global",{elements:{rectangle:{backgroundColor:Qp,borderColor:Qp,borderSkipped:"bottom",borderWidth:0}}});function rp(a){return a&&a.width!==void 0}function Xp(a){var l,p,v,A,H;return rp(a)?(H=a.width/2,l=a.x-H,p=a.x+H,v=Math.min(a.y,a.base),A=Math.max(a.y,a.base)):(H=a.height/2,l=Math.min(a.x,a.base),p=Math.max(a.x,a.base),v=a.y-H,A=a.y+H),{left:l,top:v,right:p,bottom:A}}function Zp(a,l,p){return a===l?p:a===p?l:a}function Xm(a){var l=a.borderSkipped,p={};return l&&(a.horizontal?a.base>a.x&&(l=Zp(l,"left","right")):a.base<a.y&&(l=Zp(l,"bottom","top")),p[l]=!0),p}function Zm(a,l,p){var v=a.borderWidth,A=Xm(a),H,Q,ee,Z;return be.isObject(v)?(H=+v.top||0,Q=+v.right||0,ee=+v.bottom||0,Z=+v.left||0):H=Q=ee=Z=+v||0,{t:A.top||H<0?0:H>p?p:H,r:A.right||Q<0?0:Q>l?l:Q,b:A.bottom||ee<0?0:ee>p?p:ee,l:A.left||Z<0?0:Z>l?l:Z}}function Jv(a){var l=Xp(a),p=l.right-l.left,v=l.bottom-l.top,A=Zm(a,p/2,v/2);return{outer:{x:l.left,y:l.top,w:p,h:v},inner:{x:l.left+A.l,y:l.top+A.t,w:p-A.l-A.r,h:v-A.t-A.b}}}function Wh(a,l,p){var v=l===null,A=p===null,H=!a||v&&A?!1:Xp(a);return H&&(v||l>=H.left&&l<=H.right)&&(A||p>=H.top&&p<=H.bottom)}var Qv=ah.extend({_type:"rectangle",draw:function(){var a=this._chart.ctx,l=this._view,p=Jv(l),v=p.outer,A=p.inner;a.fillStyle=l.backgroundColor,a.fillRect(v.x,v.y,v.w,v.h),!(v.w===A.w&&v.h===A.h)&&(a.save(),a.beginPath(),a.rect(v.x,v.y,v.w,v.h),a.clip(),a.fillStyle=l.borderColor,a.rect(A.x,A.y,A.w,A.h),a.fill("evenodd"),a.restore())},height:function(){var a=this._view;return a.base-a.y},inRange:function(a,l){return Wh(this._view,a,l)},inLabelRange:function(a,l){var p=this._view;return rp(p)?Wh(p,a,null):Wh(p,null,l)},inXRange:function(a){return Wh(this._view,a,null)},inYRange:function(a){return Wh(this._view,null,a)},getCenterPoint:function(){var a=this._view,l,p;return rp(a)?(l=a.x,p=(a.y+a.base)/2):(l=(a.x+a.base)/2,p=a.y),{x:l,y:p}},getArea:function(){var a=this._view;return rp(a)?a.width*Math.abs(a.y-a.base):a.height*Math.abs(a.x-a.base)},tooltipPosition:function(){var a=this._view;return{x:a.x,y:a.y}}}),rh={},Zv=Ym,eg=Gm,tg=Qm,rg=Qv;rh.Arc=Zv,rh.Line=eg,rh.Point=tg,rh.Rectangle=rg;var Bh=be._deprecated,Ch=be.valueOrDefault;Os._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),Os._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function ng(a,l){var p=a._length,v,A,H,Q;for(H=1,Q=l.length;H<Q;++H)p=Math.min(p,Math.abs(l[H]-l[H-1]));for(H=0,Q=a.getTicks().length;H<Q;++H)A=a.getPixelForTick(H),p=H>0?Math.min(p,Math.abs(A-v)):p,v=A;return p}function sg(a,l,p){var v=p.barThickness,A=l.stackCount,H=l.pixels[a],Q=be.isNullOrUndef(v)?ng(l.scale,l.pixels):-1,ee,Z;return be.isNullOrUndef(v)?(ee=Q*p.categoryPercentage,Z=p.barPercentage):(ee=v*A,Z=1),{chunk:ee/A,ratio:Z,start:H-ee/2}}function ig(a,l,p){var v=l.pixels,A=v[a],H=a>0?v[a-1]:null,Q=a<v.length-1?v[a+1]:null,ee=p.categoryPercentage,Z,ne;return H===null&&(H=A-(Q===null?l.end-l.start:Q-A)),Q===null&&(Q=A+A-H),Z=A-(A-Math.min(H,Q))/2*ee,ne=Math.abs(Q-H)/2*ee,{chunk:ne/l.stackCount,ratio:p.barPercentage,start:Z}}var em=oh.extend({dataElementType:rh.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var a=this,l,p;oh.prototype.initialize.apply(a,arguments),l=a.getMeta(),l.stack=a.getDataset().stack,l.bar=!0,p=a._getIndexScale().options,Bh("bar chart",p.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Bh("bar chart",p.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Bh("bar chart",p.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Bh("bar chart",a._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Bh("bar chart",p.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(a){var l=this,p=l.getMeta().data,v,A;for(l._ruler=l.getRuler(),v=0,A=p.length;v<A;++v)l.updateElement(p[v],v,a)},updateElement:function(a,l,p){var v=this,A=v.getMeta(),H=v.getDataset(),Q=v._resolveDataElementOptions(a,l);a._xScale=v.getScaleForId(A.xAxisID),a._yScale=v.getScaleForId(A.yAxisID),a._datasetIndex=v.index,a._index=l,a._model={backgroundColor:Q.backgroundColor,borderColor:Q.borderColor,borderSkipped:Q.borderSkipped,borderWidth:Q.borderWidth,datasetLabel:H.label,label:v.chart.data.labels[l]},be.isArray(H.data[l])&&(a._model.borderSkipped=null),v._updateElementGeometry(a,l,p,Q),a.pivot()},_updateElementGeometry:function(a,l,p,v){var A=this,H=a._model,Q=A._getValueScale(),ee=Q.getBasePixel(),Z=Q.isHorizontal(),ne=A._ruler||A.getRuler(),ae=A.calculateBarValuePixels(A.index,l,v),pe=A.calculateBarIndexPixels(A.index,l,ne,v);H.horizontal=Z,H.base=p?ee:ae.base,H.x=Z?p?ee:ae.head:pe.center,H.y=Z?pe.center:p?ee:ae.head,H.height=Z?pe.size:void 0,H.width=Z?void 0:pe.size},_getStacks:function(a){var l=this,p=l._getIndexScale(),v=p._getMatchingVisibleMetas(l._type),A=p.options.stacked,H=v.length,Q=[],ee,Z;for(ee=0;ee<H&&(Z=v[ee],(A===!1||Q.indexOf(Z.stack)===-1||A===void 0&&Z.stack===void 0)&&Q.push(Z.stack),Z.index!==a);++ee);return Q},getStackCount:function(){return this._getStacks().length},getStackIndex:function(a,l){var p=this._getStacks(a),v=l!==void 0?p.indexOf(l):-1;return v===-1?p.length-1:v},getRuler:function(){var a=this,l=a._getIndexScale(),p=[],v,A;for(v=0,A=a.getMeta().data.length;v<A;++v)p.push(l.getPixelForValue(null,v,a.index));return{pixels:p,start:l._startPixel,end:l._endPixel,stackCount:a.getStackCount(),scale:l}},calculateBarValuePixels:function(a,l,p){var v=this,A=v.chart,H=v._getValueScale(),Q=H.isHorizontal(),ee=A.data.datasets,Z=H._getMatchingVisibleMetas(v._type),ne=H._parseValue(ee[a].data[l]),ae=p.minBarLength,pe=H.options.stacked,Ee=v.getMeta().stack,Ve=ne.start===void 0?0:ne.max>=0&&ne.min>=0?ne.min:ne.max,We=ne.start===void 0?ne.end:ne.max>=0&&ne.min>=0?ne.max-ne.min:ne.min-ne.max,at=Z.length,ws,ji,ma,ga,$a,ba,Ma;if(pe||pe===void 0&&Ee!==void 0)for(ws=0;ws<at&&(ji=Z[ws],ji.index!==a);++ws)ji.stack===Ee&&(Ma=H._parseValue(ee[ji.index].data[l]),ma=Ma.start===void 0?Ma.end:Ma.min>=0&&Ma.max>=0?Ma.max:Ma.min,(ne.min<0&&ma<0||ne.max>=0&&ma>0)&&(Ve+=ma));return ga=H.getPixelForValue(Ve),$a=H.getPixelForValue(Ve+We),ba=$a-ga,ae!==void 0&&Math.abs(ba)<ae&&(ba=ae,We>=0&&!Q||We<0&&Q?$a=ga-ae:$a=ga+ae),{size:ba,base:ga,head:$a,center:$a+ba/2}},calculateBarIndexPixels:function(a,l,p,v){var A=this,H=v.barThickness==="flex"?ig(l,p,v):sg(l,p,v),Q=A.getStackIndex(a,A.getMeta().stack),ee=H.start+H.chunk*Q+H.chunk/2,Z=Math.min(Ch(v.maxBarThickness,1/0),H.chunk*H.ratio);return{base:ee-Z/2,head:ee+Z/2,center:ee,size:Z}},draw:function(){var a=this,l=a.chart,p=a._getValueScale(),v=a.getMeta().data,A=a.getDataset(),H=v.length,Q=0;for(be.canvas.clipArea(l.ctx,l.chartArea);Q<H;++Q){var ee=p._parseValue(A.data[Q]);!isNaN(ee.min)&&!isNaN(ee.max)&&v[Q].draw()}be.canvas.unclipArea(l.ctx)},_resolveDataElementOptions:function(){var a=this,l=be.extend({},oh.prototype._resolveDataElementOptions.apply(a,arguments)),p=a._getIndexScale().options,v=a._getValueScale().options;return l.barPercentage=Ch(p.barPercentage,l.barPercentage),l.barThickness=Ch(p.barThickness,l.barThickness),l.categoryPercentage=Ch(p.categoryPercentage,l.categoryPercentage),l.maxBarThickness=Ch(p.maxBarThickness,l.maxBarThickness),l.minBarLength=Ch(v.minBarLength,l.minBarLength),l}}),gp=be.valueOrDefault,ag=be.options.resolve;Os._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(a,l){var p=l.datasets[a.datasetIndex].label||"",v=l.datasets[a.datasetIndex].data[a.index];return p+": ("+a.xLabel+", "+a.yLabel+", "+v.r+")"}}}});var og=oh.extend({dataElementType:rh.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(a){var l=this,p=l.getMeta(),v=p.data;be.each(v,function(A,H){l.updateElement(A,H,a)})},updateElement:function(a,l,p){var v=this,A=v.getMeta(),H=a.custom||{},Q=v.getScaleForId(A.xAxisID),ee=v.getScaleForId(A.yAxisID),Z=v._resolveDataElementOptions(a,l),ne=v.getDataset().data[l],ae=v.index,pe=p?Q.getPixelForDecimal(.5):Q.getPixelForValue(typeof ne=="object"?ne:NaN,l,ae),Ee=p?ee.getBasePixel():ee.getPixelForValue(ne,l,ae);a._xScale=Q,a._yScale=ee,a._options=Z,a._datasetIndex=ae,a._index=l,a._model={backgroundColor:Z.backgroundColor,borderColor:Z.borderColor,borderWidth:Z.borderWidth,hitRadius:Z.hitRadius,pointStyle:Z.pointStyle,rotation:Z.rotation,radius:p?0:Z.radius,skip:H.skip||isNaN(pe)||isNaN(Ee),x:pe,y:Ee},a.pivot()},setHoverStyle:function(a){var l=a._model,p=a._options,v=be.getHoverColor;a.$previousStyle={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,radius:l.radius},l.backgroundColor=gp(p.hoverBackgroundColor,v(p.backgroundColor)),l.borderColor=gp(p.hoverBorderColor,v(p.borderColor)),l.borderWidth=gp(p.hoverBorderWidth,p.borderWidth),l.radius=p.radius+p.hoverRadius},_resolveDataElementOptions:function(a,l){var p=this,v=p.chart,A=p.getDataset(),H=a.custom||{},Q=A.data[l]||{},ee=oh.prototype._resolveDataElementOptions.apply(p,arguments),Z={chart:v,dataIndex:l,dataset:A,datasetIndex:p.index};return p._cachedDataOpts===ee&&(ee=be.extend({},ee)),ee.radius=ag([H.radius,Q.r,p._config.radius,v.options.elements.point.radius],Z,l),ee}}),np=be.valueOrDefault,wh=Math.PI,fh=wh*2,kh=wh/2;Os._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(a){var l=document.createElement("ul"),p=a.data,v=p.datasets,A=p.labels,H,Q,ee,Z;if(l.setAttribute("class",a.id+"-legend"),v.length)for(H=0,Q=v[0].data.length;H<Q;++H)ee=l.appendChild(document.createElement("li")),Z=ee.appendChild(document.createElement("span")),Z.style.backgroundColor=v[0].backgroundColor[H],A[H]&&ee.appendChild(document.createTextNode(A[H]));return l.outerHTML},legend:{labels:{generateLabels:function(a){var l=a.data;return l.labels.length&&l.datasets.length?l.labels.map(function(p,v){var A=a.getDatasetMeta(0),H=A.controller.getStyle(v);return{text:p,fillStyle:H.backgroundColor,strokeStyle:H.borderColor,lineWidth:H.borderWidth,hidden:isNaN(l.datasets[0].data[v])||A.data[v].hidden,index:v}}):[]}},onClick:function(a,l){var p=l.index,v=this.chart,A,H,Q;for(A=0,H=(v.data.datasets||[]).length;A<H;++A)Q=v.getDatasetMeta(A),Q.data[p]&&(Q.data[p].hidden=!Q.data[p].hidden);v.update()}},cutoutPercentage:50,rotation:-kh,circumference:fh,tooltips:{callbacks:{title:function(){return""},label:function(a,l){var p=l.labels[a.index],v=": "+l.datasets[a.datasetIndex].data[a.index];return be.isArray(p)?(p=p.slice(),p[0]+=v):p+=v,p}}}});var tm=oh.extend({dataElementType:rh.Arc,linkScales:be.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(a){for(var l=0,p=0;p<a;++p)this.chart.isDatasetVisible(p)&&++l;return l},update:function(a){var l=this,p=l.chart,v=p.chartArea,A=p.options,H=1,Q=1,ee=0,Z=0,ne=l.getMeta(),ae=ne.data,pe=A.cutoutPercentage/100||0,Ee=A.circumference,Ve=l._getRingWeight(l.index),We,at,ws,ji;if(Ee<fh){var ma=A.rotation%fh;ma+=ma>=wh?-fh:ma<-wh?fh:0;var ga=ma+Ee,$a=Math.cos(ma),ba=Math.sin(ma),Ma=Math.cos(ga),Sa=Math.sin(ga),Ra=ma<=0&&ga>=0||ga>=fh,Ta=ma<=kh&&ga>=kh||ga>=fh+kh,Va=ma===-wh||ga>=wh,La=ma<=-kh&&ga>=-kh||ga>=wh+kh,Da=Va?-1:Math.min($a,$a*pe,Ma,Ma*pe),za=La?-1:Math.min(ba,ba*pe,Sa,Sa*pe),Lh=Ra?1:Math.max($a,$a*pe,Ma,Ma*pe),Fh=Ta?1:Math.max(ba,ba*pe,Sa,Sa*pe);H=(Lh-Da)/2,Q=(Fh-za)/2,ee=-(Lh+Da)/2,Z=-(Fh+za)/2}for(ws=0,ji=ae.length;ws<ji;++ws)ae[ws]._options=l._resolveDataElementOptions(ae[ws],ws);for(p.borderWidth=l.getMaxBorderWidth(),We=(v.right-v.left-p.borderWidth)/H,at=(v.bottom-v.top-p.borderWidth)/Q,p.outerRadius=Math.max(Math.min(We,at)/2,0),p.innerRadius=Math.max(p.outerRadius*pe,0),p.radiusLength=(p.outerRadius-p.innerRadius)/(l._getVisibleDatasetWeightTotal()||1),p.offsetX=ee*p.outerRadius,p.offsetY=Z*p.outerRadius,ne.total=l.calculateTotal(),l.outerRadius=p.outerRadius-p.radiusLength*l._getRingWeightOffset(l.index),l.innerRadius=Math.max(l.outerRadius-p.radiusLength*Ve,0),ws=0,ji=ae.length;ws<ji;++ws)l.updateElement(ae[ws],ws,a)},updateElement:function(a,l,p){var v=this,A=v.chart,H=A.chartArea,Q=A.options,ee=Q.animation,Z=(H.left+H.right)/2,ne=(H.top+H.bottom)/2,ae=Q.rotation,pe=Q.rotation,Ee=v.getDataset(),Ve=p&&ee.animateRotate||a.hidden?0:v.calculateCircumference(Ee.data[l])*(Q.circumference/fh),We=p&&ee.animateScale?0:v.innerRadius,at=p&&ee.animateScale?0:v.outerRadius,ws=a._options||{};be.extend(a,{_datasetIndex:v.index,_index:l,_model:{backgroundColor:ws.backgroundColor,borderColor:ws.borderColor,borderWidth:ws.borderWidth,borderAlign:ws.borderAlign,x:Z+A.offsetX,y:ne+A.offsetY,startAngle:ae,endAngle:pe,circumference:Ve,outerRadius:at,innerRadius:We,label:be.valueAtIndexOrDefault(Ee.label,l,A.data.labels[l])}});var ji=a._model;(!p||!ee.animateRotate)&&(l===0?ji.startAngle=Q.rotation:ji.startAngle=v.getMeta().data[l-1]._model.endAngle,ji.endAngle=ji.startAngle+ji.circumference),a.pivot()},calculateTotal:function(){var a=this.getDataset(),l=this.getMeta(),p=0,v;return be.each(l.data,function(A,H){v=a.data[H],!isNaN(v)&&!A.hidden&&(p+=Math.abs(v))}),p},calculateCircumference:function(a){var l=this.getMeta().total;return l>0&&!isNaN(a)?fh*(Math.abs(a)/l):0},getMaxBorderWidth:function(a){var l=this,p=0,v=l.chart,A,H,Q,ee,Z,ne,ae,pe;if(!a){for(A=0,H=v.data.datasets.length;A<H;++A)if(v.isDatasetVisible(A)){Q=v.getDatasetMeta(A),a=Q.data,A!==l.index&&(Z=Q.controller);break}}if(!a)return 0;for(A=0,H=a.length;A<H;++A)ee=a[A],Z?(Z._configure(),ne=Z._resolveDataElementOptions(ee,A)):ne=ee._options,ne.borderAlign!=="inner"&&(ae=ne.borderWidth,pe=ne.hoverBorderWidth,p=ae>p?ae:p,p=pe>p?pe:p);return p},setHoverStyle:function(a){var l=a._model,p=a._options,v=be.getHoverColor;a.$previousStyle={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth},l.backgroundColor=np(p.hoverBackgroundColor,v(p.backgroundColor)),l.borderColor=np(p.hoverBorderColor,v(p.borderColor)),l.borderWidth=np(p.hoverBorderWidth,p.borderWidth)},_getRingWeightOffset:function(a){for(var l=0,p=0;p<a;++p)this.chart.isDatasetVisible(p)&&(l+=this._getRingWeight(p));return l},_getRingWeight:function(a){return Math.max(np(this.chart.data.datasets[a].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});Os._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),Os._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var lg=em.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),hh=be.valueOrDefault,ug=be.options.resolve,yp=be.canvas._isPointInArea;Os._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function rm(a,l){var p=a&&a.options.ticks||{},v=p.reverse,A=p.min===void 0?l:0,H=p.max===void 0?l:0;return{start:v?H:A,end:v?A:H}}function cg(a,l,p){var v=p/2,A=rm(a,v),H=rm(l,v);return{top:H.end,right:A.end,bottom:H.start,left:A.start}}function dg(a){var l,p,v,A;return be.isObject(a)?(l=a.top,p=a.right,v=a.bottom,A=a.left):l=p=v=A=a,{top:l,right:p,bottom:v,left:A}}var nm=oh.extend({datasetElementType:rh.Line,dataElementType:rh.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(a){var l=this,p=l.getMeta(),v=p.dataset,A=p.data||[],H=l.chart.options,Q=l._config,ee=l._showLine=hh(Q.showLine,H.showLines),Z,ne;for(l._xScale=l.getScaleForId(p.xAxisID),l._yScale=l.getScaleForId(p.yAxisID),ee&&(Q.tension!==void 0&&Q.lineTension===void 0&&(Q.lineTension=Q.tension),v._scale=l._yScale,v._datasetIndex=l.index,v._children=A,v._model=l._resolveDatasetElementOptions(v),v.pivot()),Z=0,ne=A.length;Z<ne;++Z)l.updateElement(A[Z],Z,a);for(ee&&v._model.tension!==0&&l.updateBezierControlPoints(),Z=0,ne=A.length;Z<ne;++Z)A[Z].pivot()},updateElement:function(a,l,p){var v=this,A=v.getMeta(),H=a.custom||{},Q=v.getDataset(),ee=v.index,Z=Q.data[l],ne=v._xScale,ae=v._yScale,pe=A.dataset._model,Ee,Ve,We=v._resolveDataElementOptions(a,l);Ee=ne.getPixelForValue(typeof Z=="object"?Z:NaN,l,ee),Ve=p?ae.getBasePixel():v.calculatePointY(Z,l,ee),a._xScale=ne,a._yScale=ae,a._options=We,a._datasetIndex=ee,a._index=l,a._model={x:Ee,y:Ve,skip:H.skip||isNaN(Ee)||isNaN(Ve),radius:We.radius,pointStyle:We.pointStyle,rotation:We.rotation,backgroundColor:We.backgroundColor,borderColor:We.borderColor,borderWidth:We.borderWidth,tension:hh(H.tension,pe?pe.tension:0),steppedLine:pe?pe.steppedLine:!1,hitRadius:We.hitRadius}},_resolveDatasetElementOptions:function(a){var l=this,p=l._config,v=a.custom||{},A=l.chart.options,H=A.elements.line,Q=oh.prototype._resolveDatasetElementOptions.apply(l,arguments);return Q.spanGaps=hh(p.spanGaps,A.spanGaps),Q.tension=hh(p.lineTension,H.tension),Q.steppedLine=ug([v.steppedLine,p.steppedLine,H.stepped]),Q.clip=dg(hh(p.clip,cg(l._xScale,l._yScale,Q.borderWidth))),Q},calculatePointY:function(a,l,p){var v=this,A=v.chart,H=v._yScale,Q=0,ee=0,Z,ne,ae,pe,Ee,Ve,We;if(H.options.stacked){for(Ee=+H.getRightValue(a),Ve=A._getSortedVisibleDatasetMetas(),We=Ve.length,Z=0;Z<We&&(ae=Ve[Z],ae.index!==p);++Z)ne=A.data.datasets[ae.index],ae.type==="line"&&ae.yAxisID===H.id&&(pe=+H.getRightValue(ne.data[l]),pe<0?ee+=pe||0:Q+=pe||0);return Ee<0?H.getPixelForValue(ee+Ee):H.getPixelForValue(Q+Ee)}return H.getPixelForValue(a)},updateBezierControlPoints:function(){var a=this,l=a.chart,p=a.getMeta(),v=p.dataset._model,A=l.chartArea,H=p.data||[],Q,ee,Z,ne;v.spanGaps&&(H=H.filter(function(pe){return!pe._model.skip}));function ae(pe,Ee,Ve){return Math.max(Math.min(pe,Ve),Ee)}if(v.cubicInterpolationMode==="monotone")be.splineCurveMonotone(H);else for(Q=0,ee=H.length;Q<ee;++Q)Z=H[Q]._model,ne=be.splineCurve(be.previousItem(H,Q)._model,Z,be.nextItem(H,Q)._model,v.tension),Z.controlPointPreviousX=ne.previous.x,Z.controlPointPreviousY=ne.previous.y,Z.controlPointNextX=ne.next.x,Z.controlPointNextY=ne.next.y;if(l.options.elements.line.capBezierPoints)for(Q=0,ee=H.length;Q<ee;++Q)Z=H[Q]._model,yp(Z,A)&&(Q>0&&yp(H[Q-1]._model,A)&&(Z.controlPointPreviousX=ae(Z.controlPointPreviousX,A.left,A.right),Z.controlPointPreviousY=ae(Z.controlPointPreviousY,A.top,A.bottom)),Q<H.length-1&&yp(H[Q+1]._model,A)&&(Z.controlPointNextX=ae(Z.controlPointNextX,A.left,A.right),Z.controlPointNextY=ae(Z.controlPointNextY,A.top,A.bottom)))},draw:function(){var a=this,l=a.chart,p=a.getMeta(),v=p.data||[],A=l.chartArea,H=l.canvas,Q=0,ee=v.length,Z;for(a._showLine&&(Z=p.dataset._model.clip,be.canvas.clipArea(l.ctx,{left:Z.left===!1?0:A.left-Z.left,right:Z.right===!1?H.width:A.right+Z.right,top:Z.top===!1?0:A.top-Z.top,bottom:Z.bottom===!1?H.height:A.bottom+Z.bottom}),p.dataset.draw(),be.canvas.unclipArea(l.ctx));Q<ee;++Q)v[Q].draw(A)},setHoverStyle:function(a){var l=a._model,p=a._options,v=be.getHoverColor;a.$previousStyle={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,radius:l.radius},l.backgroundColor=hh(p.hoverBackgroundColor,v(p.backgroundColor)),l.borderColor=hh(p.hoverBorderColor,v(p.borderColor)),l.borderWidth=hh(p.hoverBorderWidth,p.borderWidth),l.radius=hh(p.hoverRadius,p.radius)}}),fg=be.options.resolve;Os._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(a){var l=document.createElement("ul"),p=a.data,v=p.datasets,A=p.labels,H,Q,ee,Z;if(l.setAttribute("class",a.id+"-legend"),v.length)for(H=0,Q=v[0].data.length;H<Q;++H)ee=l.appendChild(document.createElement("li")),Z=ee.appendChild(document.createElement("span")),Z.style.backgroundColor=v[0].backgroundColor[H],A[H]&&ee.appendChild(document.createTextNode(A[H]));return l.outerHTML},legend:{labels:{generateLabels:function(a){var l=a.data;return l.labels.length&&l.datasets.length?l.labels.map(function(p,v){var A=a.getDatasetMeta(0),H=A.controller.getStyle(v);return{text:p,fillStyle:H.backgroundColor,strokeStyle:H.borderColor,lineWidth:H.borderWidth,hidden:isNaN(l.datasets[0].data[v])||A.data[v].hidden,index:v}}):[]}},onClick:function(a,l){var p=l.index,v=this.chart,A,H,Q;for(A=0,H=(v.data.datasets||[]).length;A<H;++A)Q=v.getDatasetMeta(A),Q.data[p].hidden=!Q.data[p].hidden;v.update()}},tooltips:{callbacks:{title:function(){return""},label:function(a,l){return l.labels[a.index]+": "+a.yLabel}}}});var hg=oh.extend({dataElementType:rh.Arc,linkScales:be.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(a){var l=this,p=l.getDataset(),v=l.getMeta(),A=l.chart.options.startAngle||0,H=l._starts=[],Q=l._angles=[],ee=v.data,Z,ne,ae;for(l._updateRadius(),v.count=l.countVisibleElements(),Z=0,ne=p.data.length;Z<ne;Z++)H[Z]=A,ae=l._computeAngle(Z),Q[Z]=ae,A+=ae;for(Z=0,ne=ee.length;Z<ne;++Z)ee[Z]._options=l._resolveDataElementOptions(ee[Z],Z),l.updateElement(ee[Z],Z,a)},_updateRadius:function(){var a=this,l=a.chart,p=l.chartArea,v=l.options,A=Math.min(p.right-p.left,p.bottom-p.top);l.outerRadius=Math.max(A/2,0),l.innerRadius=Math.max(v.cutoutPercentage?l.outerRadius/100*v.cutoutPercentage:1,0),l.radiusLength=(l.outerRadius-l.innerRadius)/l.getVisibleDatasetCount(),a.outerRadius=l.outerRadius-l.radiusLength*a.index,a.innerRadius=a.outerRadius-l.radiusLength},updateElement:function(a,l,p){var v=this,A=v.chart,H=v.getDataset(),Q=A.options,ee=Q.animation,Z=A.scale,ne=A.data.labels,ae=Z.xCenter,pe=Z.yCenter,Ee=Q.startAngle,Ve=a.hidden?0:Z.getDistanceFromCenterForValue(H.data[l]),We=v._starts[l],at=We+(a.hidden?0:v._angles[l]),ws=ee.animateScale?0:Z.getDistanceFromCenterForValue(H.data[l]),ji=a._options||{};be.extend(a,{_datasetIndex:v.index,_index:l,_scale:Z,_model:{backgroundColor:ji.backgroundColor,borderColor:ji.borderColor,borderWidth:ji.borderWidth,borderAlign:ji.borderAlign,x:ae,y:pe,innerRadius:0,outerRadius:p?ws:Ve,startAngle:p&&ee.animateRotate?Ee:We,endAngle:p&&ee.animateRotate?Ee:at,label:be.valueAtIndexOrDefault(ne,l,ne[l])}}),a.pivot()},countVisibleElements:function(){var a=this.getDataset(),l=this.getMeta(),p=0;return be.each(l.data,function(v,A){!isNaN(a.data[A])&&!v.hidden&&p++}),p},setHoverStyle:function(a){var l=a._model,p=a._options,v=be.getHoverColor,A=be.valueOrDefault;a.$previousStyle={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth},l.backgroundColor=A(p.hoverBackgroundColor,v(p.backgroundColor)),l.borderColor=A(p.hoverBorderColor,v(p.borderColor)),l.borderWidth=A(p.hoverBorderWidth,p.borderWidth)},_computeAngle:function(a){var l=this,p=this.getMeta().count,v=l.getDataset(),A=l.getMeta();if(isNaN(v.data[a])||A.data[a].hidden)return 0;var H={chart:l.chart,dataIndex:a,dataset:v,datasetIndex:l.index};return fg([l.chart.options.elements.arc.angle,2*Math.PI/p],H,a)}});Os._set("pie",be.clone(Os.doughnut)),Os._set("pie",{cutoutPercentage:0});var pg=tm,Sh=be.valueOrDefault;Os._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var mg=oh.extend({datasetElementType:rh.Line,dataElementType:rh.Point,linkScales:be.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(a){var l=this,p=l.getMeta(),v=p.dataset,A=p.data||[],H=l.chart.scale,Q=l._config,ee,Z;for(Q.tension!==void 0&&Q.lineTension===void 0&&(Q.lineTension=Q.tension),v._scale=H,v._datasetIndex=l.index,v._children=A,v._loop=!0,v._model=l._resolveDatasetElementOptions(v),v.pivot(),ee=0,Z=A.length;ee<Z;++ee)l.updateElement(A[ee],ee,a);for(l.updateBezierControlPoints(),ee=0,Z=A.length;ee<Z;++ee)A[ee].pivot()},updateElement:function(a,l,p){var v=this,A=a.custom||{},H=v.getDataset(),Q=v.chart.scale,ee=Q.getPointPositionForValue(l,H.data[l]),Z=v._resolveDataElementOptions(a,l),ne=v.getMeta().dataset._model,ae=p?Q.xCenter:ee.x,pe=p?Q.yCenter:ee.y;a._scale=Q,a._options=Z,a._datasetIndex=v.index,a._index=l,a._model={x:ae,y:pe,skip:A.skip||isNaN(ae)||isNaN(pe),radius:Z.radius,pointStyle:Z.pointStyle,rotation:Z.rotation,backgroundColor:Z.backgroundColor,borderColor:Z.borderColor,borderWidth:Z.borderWidth,tension:Sh(A.tension,ne?ne.tension:0),hitRadius:Z.hitRadius}},_resolveDatasetElementOptions:function(){var a=this,l=a._config,p=a.chart.options,v=oh.prototype._resolveDatasetElementOptions.apply(a,arguments);return v.spanGaps=Sh(l.spanGaps,p.spanGaps),v.tension=Sh(l.lineTension,p.elements.line.tension),v},updateBezierControlPoints:function(){var a=this,l=a.getMeta(),p=a.chart.chartArea,v=l.data||[],A,H,Q,ee;l.dataset._model.spanGaps&&(v=v.filter(function(ne){return!ne._model.skip}));function Z(ne,ae,pe){return Math.max(Math.min(ne,pe),ae)}for(A=0,H=v.length;A<H;++A)Q=v[A]._model,ee=be.splineCurve(be.previousItem(v,A,!0)._model,Q,be.nextItem(v,A,!0)._model,Q.tension),Q.controlPointPreviousX=Z(ee.previous.x,p.left,p.right),Q.controlPointPreviousY=Z(ee.previous.y,p.top,p.bottom),Q.controlPointNextX=Z(ee.next.x,p.left,p.right),Q.controlPointNextY=Z(ee.next.y,p.top,p.bottom)},setHoverStyle:function(a){var l=a._model,p=a._options,v=be.getHoverColor;a.$previousStyle={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,radius:l.radius},l.backgroundColor=Sh(p.hoverBackgroundColor,v(p.backgroundColor)),l.borderColor=Sh(p.hoverBorderColor,v(p.borderColor)),l.borderWidth=Sh(p.hoverBorderWidth,p.borderWidth),l.radius=Sh(p.hoverRadius,p.radius)}});Os._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(a){return"("+a.xLabel+", "+a.yLabel+")"}}}}),Os._set("global",{datasets:{scatter:{showLine:!1}}});var vg=nm,sm={bar:em,bubble:og,doughnut:tm,horizontalBar:lg,line:nm,polarArea:hg,pie:pg,radar:mg,scatter:vg};function xh(a,l){return a.native?{x:a.x,y:a.y}:be.getRelativePosition(a,l)}function Kh(a,l){var p=a._getSortedVisibleDatasetMetas(),v,A,H,Q,ee,Z;for(A=0,Q=p.length;A<Q;++A)for(v=p[A].data,H=0,ee=v.length;H<ee;++H)Z=v[H],Z._view.skip||l(Z)}function bp(a,l){var p=[];return Kh(a,function(v){v.inRange(l.x,l.y)&&p.push(v)}),p}function $p(a,l,p,v){var A=Number.POSITIVE_INFINITY,H=[];return Kh(a,function(Q){if(!(p&&!Q.inRange(l.x,l.y))){var ee=Q.getCenterPoint(),Z=v(l,ee);Z<A?(H=[Q],A=Z):Z===A&&H.push(Q)}}),H}function _p(a){var l=a.indexOf("x")!==-1,p=a.indexOf("y")!==-1;return function(v,A){var H=l?Math.abs(v.x-A.x):0,Q=p?Math.abs(v.y-A.y):0;return Math.sqrt(Math.pow(H,2)+Math.pow(Q,2))}}function wp(a,l,p){var v=xh(l,a);p.axis=p.axis||"x";var A=_p(p.axis),H=p.intersect?bp(a,v):$p(a,v,!1,A),Q=[];return H.length?(a._getSortedVisibleDatasetMetas().forEach(function(ee){var Z=ee.data[H[0]._index];Z&&!Z._view.skip&&Q.push(Z)}),Q):[]}var Nh={modes:{single:function(a,l){var p=xh(l,a),v=[];return Kh(a,function(A){if(A.inRange(p.x,p.y))return v.push(A),v}),v.slice(0,1)},label:wp,index:wp,dataset:function(a,l,p){var v=xh(l,a);p.axis=p.axis||"xy";var A=_p(p.axis),H=p.intersect?bp(a,v):$p(a,v,!1,A);return H.length>0&&(H=a.getDatasetMeta(H[0]._datasetIndex).data),H},"x-axis":function(a,l){return wp(a,l,{intersect:!1})},point:function(a,l){var p=xh(l,a);return bp(a,p)},nearest:function(a,l,p){var v=xh(l,a);p.axis=p.axis||"xy";var A=_p(p.axis);return $p(a,v,p.intersect,A)},x:function(a,l,p){var v=xh(l,a),A=[],H=!1;return Kh(a,function(Q){Q.inXRange(v.x)&&A.push(Q),Q.inRange(v.x,v.y)&&(H=!0)}),p.intersect&&!H&&(A=[]),A},y:function(a,l,p){var v=xh(l,a),A=[],H=!1;return Kh(a,function(Q){Q.inYRange(v.y)&&A.push(Q),Q.inRange(v.x,v.y)&&(H=!0)}),p.intersect&&!H&&(A=[]),A}}},kp=be.extend;function Yh(a,l){return be.where(a,function(p){return p.pos===l})}function sp(a,l){return a.sort(function(p,v){var A=l?v:p,H=l?p:v;return A.weight===H.weight?A.index-H.index:A.weight-H.weight})}function gg(a){var l=[],p,v,A;for(p=0,v=(a||[]).length;p<v;++p)A=a[p],l.push({index:p,box:A,pos:A.position,horizontal:A.isHorizontal(),weight:A.weight});return l}function yg(a,l){var p,v,A;for(p=0,v=a.length;p<v;++p)A=a[p],A.width=A.horizontal?A.box.fullWidth&&l.availableWidth:l.vBoxMaxWidth,A.height=A.horizontal&&l.hBoxMaxHeight}function bg(a){var l=gg(a),p=sp(Yh(l,"left"),!0),v=sp(Yh(l,"right")),A=sp(Yh(l,"top"),!0),H=sp(Yh(l,"bottom"));return{leftAndTop:p.concat(A),rightAndBottom:v.concat(H),chartArea:Yh(l,"chartArea"),vertical:p.concat(v),horizontal:A.concat(H)}}function im(a,l,p,v){return Math.max(a[p],l[p])+Math.max(a[v],l[v])}function $g(a,l,p){var v=p.box,A=a.maxPadding,H,Q;if(p.size&&(a[p.pos]-=p.size),p.size=p.horizontal?v.height:v.width,a[p.pos]+=p.size,v.getPadding){var ee=v.getPadding();A.top=Math.max(A.top,ee.top),A.left=Math.max(A.left,ee.left),A.bottom=Math.max(A.bottom,ee.bottom),A.right=Math.max(A.right,ee.right)}if(H=l.outerWidth-im(A,a,"left","right"),Q=l.outerHeight-im(A,a,"top","bottom"),H!==a.w||Q!==a.h){a.w=H,a.h=Q;var Z=p.horizontal?[H,a.w]:[Q,a.h];return Z[0]!==Z[1]&&(!isNaN(Z[0])||!isNaN(Z[1]))}}function _g(a){var l=a.maxPadding;function p(v){var A=Math.max(l[v]-a[v],0);return a[v]+=A,A}a.y+=p("top"),a.x+=p("left"),p("right"),p("bottom")}function wg(a,l){var p=l.maxPadding;function v(A){var H={left:0,top:0,right:0,bottom:0};return A.forEach(function(Q){H[Q]=Math.max(l[Q],p[Q])}),H}return v(a?["left","right"]:["top","bottom"])}function ip(a,l,p){var v=[],A,H,Q,ee,Z,ne;for(A=0,H=a.length;A<H;++A)Q=a[A],ee=Q.box,ee.update(Q.width||l.w,Q.height||l.h,wg(Q.horizontal,l)),$g(l,p,Q)&&(ne=!0,v.length&&(Z=!0)),ee.fullWidth||v.push(Q);return Z&&ip(v,l,p)||ne}function am(a,l,p){var v=p.padding,A=l.x,H=l.y,Q,ee,Z,ne;for(Q=0,ee=a.length;Q<ee;++Q)Z=a[Q],ne=Z.box,Z.horizontal?(ne.left=ne.fullWidth?v.left:l.left,ne.right=ne.fullWidth?p.outerWidth-v.right:l.left+l.w,ne.top=H,ne.bottom=H+ne.height,ne.width=ne.right-ne.left,H=ne.bottom):(ne.left=A,ne.right=A+ne.width,ne.top=l.top,ne.bottom=l.top+l.h,ne.height=ne.bottom-ne.top,A=ne.right);l.x=A,l.y=H}Os._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var lh={defaults:{},addBox:function(a,l){a.boxes||(a.boxes=[]),l.fullWidth=l.fullWidth||!1,l.position=l.position||"top",l.weight=l.weight||0,l._layers=l._layers||function(){return[{z:0,draw:function(){l.draw.apply(l,arguments)}}]},a.boxes.push(l)},removeBox:function(a,l){var p=a.boxes?a.boxes.indexOf(l):-1;p!==-1&&a.boxes.splice(p,1)},configure:function(a,l,p){for(var v=["fullWidth","position","weight"],A=v.length,H=0,Q;H<A;++H)Q=v[H],p.hasOwnProperty(Q)&&(l[Q]=p[Q])},update:function(a,l,p){if(a){var v=a.options.layout||{},A=be.options.toPadding(v.padding),H=l-A.width,Q=p-A.height,ee=bg(a.boxes),Z=ee.vertical,ne=ee.horizontal,ae=Object.freeze({outerWidth:l,outerHeight:p,padding:A,availableWidth:H,vBoxMaxWidth:H/2/Z.length,hBoxMaxHeight:Q/2}),pe=kp({maxPadding:kp({},A),w:H,h:Q,x:A.left,y:A.top},A);yg(Z.concat(ne),ae),ip(Z,pe,ae),ip(ne,pe,ae)&&ip(Z,pe,ae),_g(pe),am(ee.leftAndTop,pe,ae),pe.x+=pe.w,pe.y+=pe.h,am(ee.rightAndBottom,pe,ae),a.chartArea={left:pe.left,top:pe.top,right:pe.left+pe.w,bottom:pe.top+pe.h},be.each(ee.chartArea,function(Ee){var Ve=Ee.box;kp(Ve,a.chartArea),Ve.update(pe.w,pe.h)})}}},kg={acquireContext:function(a){return a&&a.canvas&&(a=a.canvas),a&&a.getContext("2d")||null}},Sg=`/*\r
 * DOM element rendering detection\r
 * https://davidwalsh.name/detect-node-insertion\r
 */\r
@keyframes chartjs-render-animation {\r
	from { opacity: 0.99; }\r
	to { opacity: 1; }\r
}\r
\r
.chartjs-render-monitor {\r
	animation: chartjs-render-animation 0.001s;\r
}\r
\r
/*\r
 * DOM element resizing detection\r
 * https://github.com/marcj/css-element-queries\r
 */\r
.chartjs-size-monitor,\r
.chartjs-size-monitor-expand,\r
.chartjs-size-monitor-shrink {\r
	position: absolute;\r
	direction: ltr;\r
	left: 0;\r
	top: 0;\r
	right: 0;\r
	bottom: 0;\r
	overflow: hidden;\r
	pointer-events: none;\r
	visibility: hidden;\r
	z-index: -1;\r
}\r
\r
.chartjs-size-monitor-expand > div {\r
	position: absolute;\r
	width: 1000000px;\r
	height: 1000000px;\r
	left: 0;\r
	top: 0;\r
}\r
\r
.chartjs-size-monitor-shrink > div {\r
	position: absolute;\r
	width: 200%;\r
	height: 200%;\r
	left: 0;\r
	top: 0;\r
}\r
`,xg=Object.freeze({__proto__:null,default:Sg}),Eg=s(xg),th="$chartjs",Sp="chartjs-",xp=Sp+"size-monitor",om=Sp+"render-monitor",Mg=Sp+"render-animation",lm=["animationstart","webkitAnimationStart"],Rg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function um(a,l){var p=be.getStyle(a,l),v=p&&p.match(/^(\d+)(\.\d+)?px$/);return v?Number(v[1]):void 0}function Ig(a,l){var p=a.style,v=a.getAttribute("height"),A=a.getAttribute("width");if(a[th]={initial:{height:v,width:A,style:{display:p.display,height:p.height,width:p.width}}},p.display=p.display||"block",A===null||A===""){var H=um(a,"width");H!==void 0&&(a.width=H)}if(v===null||v==="")if(a.style.height==="")a.height=a.width/(l.options.aspectRatio||2);else{var Q=um(a,"height");H!==void 0&&(a.height=Q)}return a}var Pg=(function(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("e",null,l)}catch{}return a})(),cm=Pg?{passive:!0}:!1;function Gh(a,l,p){a.addEventListener(l,p,cm)}function Ep(a,l,p){a.removeEventListener(l,p,cm)}function Mp(a,l,p,v,A){return{type:a,chart:l,native:A||null,x:p!==void 0?p:null,y:v!==void 0?v:null}}function Tg(a,l){var p=Rg[a.type]||a.type,v=be.getRelativePosition(a,l);return Mp(p,l,v.x,v.y,a)}function Og(a,l){var p=!1,v=[];return function(){v=Array.prototype.slice.call(arguments),l=l||this,p||(p=!0,be.requestAnimFrame.call(window,function(){p=!1,a.apply(l,v)}))}}function Hh(a){var l=document.createElement("div");return l.className=a||"",l}function Cg(a){var l=1e6,p=Hh(xp),v=Hh(xp+"-expand"),A=Hh(xp+"-shrink");v.appendChild(Hh()),A.appendChild(Hh()),p.appendChild(v),p.appendChild(A),p._reset=function(){v.scrollLeft=l,v.scrollTop=l,A.scrollLeft=l,A.scrollTop=l};var H=function(){p._reset(),a()};return Gh(v,"scroll",H.bind(v,"expand")),Gh(A,"scroll",H.bind(A,"shrink")),p}function Ng(a,l){var p=a[th]||(a[th]={}),v=p.renderProxy=function(A){A.animationName===Mg&&l()};be.each(lm,function(A){Gh(a,A,v)}),p.reflow=!!a.offsetParent,a.classList.add(om)}function qg(a){var l=a[th]||{},p=l.renderProxy;p&&(be.each(lm,function(v){Ep(a,v,p)}),delete l.renderProxy),a.classList.remove(om)}function Dg(a,l,p){var v=a[th]||(a[th]={}),A=v.resizer=Cg(Og(function(){if(v.resizer){var H=p.options.maintainAspectRatio&&a.parentNode,Q=H?H.clientWidth:0;l(Mp("resize",p)),H&&H.clientWidth<Q&&p.canvas&&l(Mp("resize",p))}}));Ng(a,function(){if(v.resizer){var H=a.parentNode;H&&H!==A.parentNode&&H.insertBefore(A,H.firstChild),A._reset()}})}function Ag(a){var l=a[th]||{},p=l.resizer;delete l.resizer,qg(a),p&&p.parentNode&&p.parentNode.removeChild(p)}function Lg(a,l){var p=a[th]||(a[th]={});if(!p.containsStyles){p.containsStyles=!0,l=`/* Chart.js */
`+l;var v=document.createElement("style");v.setAttribute("type","text/css"),v.appendChild(document.createTextNode(l)),a.appendChild(v)}}var dm={disableCSSInjection:!1,_enabled:typeof window<"u"&&typeof document<"u",_ensureLoaded:function(a){if(!this.disableCSSInjection){var l=a.getRootNode?a.getRootNode():document,p=l.host?l:document.head;Lg(p,Eg)}},acquireContext:function(a,l){typeof a=="string"?a=document.getElementById(a):a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas);var p=a&&a.getContext&&a.getContext("2d");return p&&p.canvas===a?(this._ensureLoaded(a),Ig(a,l),p):null},releaseContext:function(a){var l=a.canvas;if(l[th]){var p=l[th].initial;["height","width"].forEach(function(v){var A=p[v];be.isNullOrUndef(A)?l.removeAttribute(v):l.setAttribute(v,A)}),be.each(p.style||{},function(v,A){l.style[A]=v}),l.width=l.width,delete l[th]}},addEventListener:function(a,l,p){var v=a.canvas;if(l==="resize"){Dg(v,p,a);return}var A=p[th]||(p[th]={}),H=A.proxies||(A.proxies={}),Q=H[a.id+"_"+l]=function(ee){p(Tg(ee,a))};Gh(v,l,Q)},removeEventListener:function(a,l,p){var v=a.canvas;if(l==="resize"){Ag(v);return}var A=p[th]||{},H=A.proxies||{},Q=H[a.id+"_"+l];Q&&Ep(v,l,Q)}};be.addEvent=Gh,be.removeEvent=Ep;var Fg=dm._enabled?dm:kg,qh=be.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Fg);Os._set("global",{plugins:{}});var Pa={_plugins:[],_cacheId:0,register:function(a){var l=this._plugins;[].concat(a).forEach(function(p){l.indexOf(p)===-1&&l.push(p)}),this._cacheId++},unregister:function(a){var l=this._plugins;[].concat(a).forEach(function(p){var v=l.indexOf(p);v!==-1&&l.splice(v,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(a,l,p){var v=this.descriptors(a),A=v.length,H,Q,ee,Z,ne;for(H=0;H<A;++H)if(Q=v[H],ee=Q.plugin,ne=ee[l],typeof ne=="function"&&(Z=[a].concat(p||[]),Z.push(Q.options),ne.apply(ee,Z)===!1))return!1;return!0},descriptors:function(a){var l=a.$plugins||(a.$plugins={});if(l.id===this._cacheId)return l.descriptors;var p=[],v=[],A=a&&a.config||{},H=A.options&&A.options.plugins||{};return this._plugins.concat(A.plugins||[]).forEach(function(Q){var ee=p.indexOf(Q);if(ee===-1){var Z=Q.id,ne=H[Z];ne!==!1&&(ne===!0&&(ne=be.clone(Os.global.plugins[Z])),p.push(Q),v.push({plugin:Q,options:ne||{}}))}}),l.descriptors=v,l.id=this._cacheId,v},_invalidate:function(a){delete a.$plugins}},Jh={constructors:{},defaults:{},registerScaleType:function(a,l,p){this.constructors[a]=l,this.defaults[a]=be.clone(p)},getScaleConstructor:function(a){return this.constructors.hasOwnProperty(a)?this.constructors[a]:void 0},getScaleDefaults:function(a){return this.defaults.hasOwnProperty(a)?be.merge(Object.create(null),[Os.scale,this.defaults[a]]):{}},updateScaleDefaults:function(a,l){var p=this;p.defaults.hasOwnProperty(a)&&(p.defaults[a]=be.extend(p.defaults[a],l))},addScalesToLayout:function(a){be.each(a.scales,function(l){l.fullWidth=l.options.fullWidth,l.position=l.options.position,l.weight=l.options.weight,lh.addBox(a,l)})}},ph=be.valueOrDefault,Rp=be.rtl.getRtlAdapter;Os._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:be.noop,title:function(a,l){var p="",v=l.labels,A=v?v.length:0;if(a.length>0){var H=a[0];H.label?p=H.label:H.xLabel?p=H.xLabel:A>0&&H.index<A&&(p=v[H.index])}return p},afterTitle:be.noop,beforeBody:be.noop,beforeLabel:be.noop,label:function(a,l){var p=l.datasets[a.datasetIndex].label||"";return p&&(p+=": "),be.isNullOrUndef(a.value)?p+=a.yLabel:p+=a.value,p},labelColor:function(a,l){var p=l.getDatasetMeta(a.datasetIndex),v=p.data[a.index],A=v._view;return{borderColor:A.borderColor,backgroundColor:A.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:be.noop,afterBody:be.noop,beforeFooter:be.noop,footer:be.noop,afterFooter:be.noop}}});var fm={average:function(a){if(!a.length)return!1;var l,p,v=0,A=0,H=0;for(l=0,p=a.length;l<p;++l){var Q=a[l];if(Q&&Q.hasValue()){var ee=Q.tooltipPosition();v+=ee.x,A+=ee.y,++H}}return{x:v/H,y:A/H}},nearest:function(a,l){var p=l.x,v=l.y,A=Number.POSITIVE_INFINITY,H,Q,ee;for(H=0,Q=a.length;H<Q;++H){var Z=a[H];if(Z&&Z.hasValue()){var ne=Z.getCenterPoint(),ae=be.distanceBetweenPoints(l,ne);ae<A&&(A=ae,ee=Z)}}if(ee){var pe=ee.tooltipPosition();p=pe.x,v=pe.y}return{x:p,y:v}}};function dh(a,l){return l&&(be.isArray(l)?Array.prototype.push.apply(a,l):a.push(l)),a}function mh(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function jg(a){var l=a._xScale,p=a._yScale||a._scale,v=a._index,A=a._datasetIndex,H=a._chart.getDatasetMeta(A).controller,Q=H._getIndexScale(),ee=H._getValueScale();return{xLabel:l?l.getLabelForIndex(v,A):"",yLabel:p?p.getLabelForIndex(v,A):"",label:Q?""+Q.getLabelForIndex(v,A):"",value:ee?""+ee.getLabelForIndex(v,A):"",index:v,datasetIndex:A,x:a._model.x,y:a._model.y}}function hm(a){var l=Os.global;return{xPadding:a.xPadding,yPadding:a.yPadding,xAlign:a.xAlign,yAlign:a.yAlign,rtl:a.rtl,textDirection:a.textDirection,bodyFontColor:a.bodyFontColor,_bodyFontFamily:ph(a.bodyFontFamily,l.defaultFontFamily),_bodyFontStyle:ph(a.bodyFontStyle,l.defaultFontStyle),_bodyAlign:a.bodyAlign,bodyFontSize:ph(a.bodyFontSize,l.defaultFontSize),bodySpacing:a.bodySpacing,titleFontColor:a.titleFontColor,_titleFontFamily:ph(a.titleFontFamily,l.defaultFontFamily),_titleFontStyle:ph(a.titleFontStyle,l.defaultFontStyle),titleFontSize:ph(a.titleFontSize,l.defaultFontSize),_titleAlign:a.titleAlign,titleSpacing:a.titleSpacing,titleMarginBottom:a.titleMarginBottom,footerFontColor:a.footerFontColor,_footerFontFamily:ph(a.footerFontFamily,l.defaultFontFamily),_footerFontStyle:ph(a.footerFontStyle,l.defaultFontStyle),footerFontSize:ph(a.footerFontSize,l.defaultFontSize),_footerAlign:a.footerAlign,footerSpacing:a.footerSpacing,footerMarginTop:a.footerMarginTop,caretSize:a.caretSize,cornerRadius:a.cornerRadius,backgroundColor:a.backgroundColor,opacity:0,legendColorBackground:a.multiKeyBackground,displayColors:a.displayColors,borderColor:a.borderColor,borderWidth:a.borderWidth}}function Vg(a,l){var p=a._chart.ctx,v=l.yPadding*2,A=0,H=l.body,Q=H.reduce(function(We,at){return We+at.before.length+at.lines.length+at.after.length},0);Q+=l.beforeBody.length+l.afterBody.length;var ee=l.title.length,Z=l.footer.length,ne=l.titleFontSize,ae=l.bodyFontSize,pe=l.footerFontSize;v+=ee*ne,v+=ee?(ee-1)*l.titleSpacing:0,v+=ee?l.titleMarginBottom:0,v+=Q*ae,v+=Q?(Q-1)*l.bodySpacing:0,v+=Z?l.footerMarginTop:0,v+=Z*pe,v+=Z?(Z-1)*l.footerSpacing:0;var Ee=0,Ve=function(We){A=Math.max(A,p.measureText(We).width+Ee)};return p.font=be.fontString(ne,l._titleFontStyle,l._titleFontFamily),be.each(l.title,Ve),p.font=be.fontString(ae,l._bodyFontStyle,l._bodyFontFamily),be.each(l.beforeBody.concat(l.afterBody),Ve),Ee=l.displayColors?ae+2:0,be.each(H,function(We){be.each(We.before,Ve),be.each(We.lines,Ve),be.each(We.after,Ve)}),Ee=0,p.font=be.fontString(pe,l._footerFontStyle,l._footerFontFamily),be.each(l.footer,Ve),A+=2*l.xPadding,{width:A,height:v}}function zg(a,l){var p=a._model,v=a._chart,A=a._chart.chartArea,H="center",Q="center";p.y<l.height?Q="top":p.y>v.height-l.height&&(Q="bottom");var ee,Z,ne,ae,pe,Ee=(A.left+A.right)/2,Ve=(A.top+A.bottom)/2;Q==="center"?(ee=function(at){return at<=Ee},Z=function(at){return at>Ee}):(ee=function(at){return at<=l.width/2},Z=function(at){return at>=v.width-l.width/2}),ne=function(at){return at+l.width+p.caretSize+p.caretPadding>v.width},ae=function(at){return at-l.width-p.caretSize-p.caretPadding<0},pe=function(at){return at<=Ve?"top":"bottom"},ee(p.x)?(H="left",ne(p.x)&&(H="center",Q=pe(p.y))):Z(p.x)&&(H="right",ae(p.x)&&(H="center",Q=pe(p.y)));var We=a._options;return{xAlign:We.xAlign?We.xAlign:H,yAlign:We.yAlign?We.yAlign:Q}}function Ug(a,l,p,v){var A=a.x,H=a.y,Q=a.caretSize,ee=a.caretPadding,Z=a.cornerRadius,ne=p.xAlign,ae=p.yAlign,pe=Q+ee,Ee=Z+ee;return ne==="right"?A-=l.width:ne==="center"&&(A-=l.width/2,A+l.width>v.width&&(A=v.width-l.width),A<0&&(A=0)),ae==="top"?H+=pe:ae==="bottom"?H-=l.height+pe:H-=l.height/2,ae==="center"?ne==="left"?A+=pe:ne==="right"&&(A-=pe):ne==="left"?A-=Ee:ne==="right"&&(A+=Ee),{x:A,y:H}}function op(a,l){return l==="center"?a.x+a.width/2:l==="right"?a.x+a.width-a.xPadding:a.x+a.xPadding}function pm(a){return dh([],mh(a))}var Wg=ah.extend({initialize:function(){this._model=hm(this._options),this._lastActive=[]},getTitle:function(){var a=this,l=a._options,p=l.callbacks,v=p.beforeTitle.apply(a,arguments),A=p.title.apply(a,arguments),H=p.afterTitle.apply(a,arguments),Q=[];return Q=dh(Q,mh(v)),Q=dh(Q,mh(A)),Q=dh(Q,mh(H)),Q},getBeforeBody:function(){return pm(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(a,l){var p=this,v=p._options.callbacks,A=[];return be.each(a,function(H){var Q={before:[],lines:[],after:[]};dh(Q.before,mh(v.beforeLabel.call(p,H,l))),dh(Q.lines,v.label.call(p,H,l)),dh(Q.after,mh(v.afterLabel.call(p,H,l))),A.push(Q)}),A},getAfterBody:function(){return pm(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var a=this,l=a._options.callbacks,p=l.beforeFooter.apply(a,arguments),v=l.footer.apply(a,arguments),A=l.afterFooter.apply(a,arguments),H=[];return H=dh(H,mh(p)),H=dh(H,mh(v)),H=dh(H,mh(A)),H},update:function(a){var l=this,p=l._options,v=l._model,A=l._model=hm(p),H=l._active,Q=l._data,ee={xAlign:v.xAlign,yAlign:v.yAlign},Z={x:v.x,y:v.y},ne={width:v.width,height:v.height},ae={x:v.caretX,y:v.caretY},pe,Ee;if(H.length){A.opacity=1;var Ve=[],We=[];ae=fm[p.position].call(l,H,l._eventPosition);var at=[];for(pe=0,Ee=H.length;pe<Ee;++pe)at.push(jg(H[pe]));p.filter&&(at=at.filter(function(ws){return p.filter(ws,Q)})),p.itemSort&&(at=at.sort(function(ws,ji){return p.itemSort(ws,ji,Q)})),be.each(at,function(ws){Ve.push(p.callbacks.labelColor.call(l,ws,l._chart)),We.push(p.callbacks.labelTextColor.call(l,ws,l._chart))}),A.title=l.getTitle(at,Q),A.beforeBody=l.getBeforeBody(at,Q),A.body=l.getBody(at,Q),A.afterBody=l.getAfterBody(at,Q),A.footer=l.getFooter(at,Q),A.x=ae.x,A.y=ae.y,A.caretPadding=p.caretPadding,A.labelColors=Ve,A.labelTextColors=We,A.dataPoints=at,ne=Vg(this,A),ee=zg(this,ne),Z=Ug(A,ne,ee,l._chart)}else A.opacity=0;return A.xAlign=ee.xAlign,A.yAlign=ee.yAlign,A.x=Z.x,A.y=Z.y,A.width=ne.width,A.height=ne.height,A.caretX=ae.x,A.caretY=ae.y,l._model=A,a&&p.custom&&p.custom.call(l,A),l},drawCaret:function(a,l){var p=this._chart.ctx,v=this._view,A=this.getCaretPosition(a,l,v);p.lineTo(A.x1,A.y1),p.lineTo(A.x2,A.y2),p.lineTo(A.x3,A.y3)},getCaretPosition:function(a,l,p){var v,A,H,Q,ee,Z,ne=p.caretSize,ae=p.cornerRadius,pe=p.xAlign,Ee=p.yAlign,Ve=a.x,We=a.y,at=l.width,ws=l.height;if(Ee==="center")ee=We+ws/2,pe==="left"?(v=Ve,A=v-ne,H=v,Q=ee+ne,Z=ee-ne):(v=Ve+at,A=v+ne,H=v,Q=ee-ne,Z=ee+ne);else if(pe==="left"?(A=Ve+ae+ne,v=A-ne,H=A+ne):pe==="right"?(A=Ve+at-ae-ne,v=A-ne,H=A+ne):(A=p.caretX,v=A-ne,H=A+ne),Ee==="top")Q=We,ee=Q-ne,Z=Q;else{Q=We+ws,ee=Q+ne,Z=Q;var ji=H;H=v,v=ji}return{x1:v,x2:A,x3:H,y1:Q,y2:ee,y3:Z}},drawTitle:function(a,l,p){var v=l.title,A=v.length,H,Q,ee;if(A){var Z=Rp(l.rtl,l.x,l.width);for(a.x=op(l,l._titleAlign),p.textAlign=Z.textAlign(l._titleAlign),p.textBaseline="middle",H=l.titleFontSize,Q=l.titleSpacing,p.fillStyle=l.titleFontColor,p.font=be.fontString(H,l._titleFontStyle,l._titleFontFamily),ee=0;ee<A;++ee)p.fillText(v[ee],Z.x(a.x),a.y+H/2),a.y+=H+Q,ee+1===A&&(a.y+=l.titleMarginBottom-Q)}},drawBody:function(a,l,p){var v=l.bodyFontSize,A=l.bodySpacing,H=l._bodyAlign,Q=l.body,ee=l.displayColors,Z=0,ne=ee?op(l,"left"):0,ae=Rp(l.rtl,l.x,l.width),pe=function(Ma){p.fillText(Ma,ae.x(a.x+Z),a.y+v/2),a.y+=v+A},Ee,Ve,We,at,ws,ji,ma,ga,$a=ae.textAlign(H);for(p.textAlign=H,p.textBaseline="middle",p.font=be.fontString(v,l._bodyFontStyle,l._bodyFontFamily),a.x=op(l,$a),p.fillStyle=l.bodyFontColor,be.each(l.beforeBody,pe),Z=ee&&$a!=="right"?H==="center"?v/2+1:v+2:0,ws=0,ma=Q.length;ws<ma;++ws){for(Ee=Q[ws],Ve=l.labelTextColors[ws],We=l.labelColors[ws],p.fillStyle=Ve,be.each(Ee.before,pe),at=Ee.lines,ji=0,ga=at.length;ji<ga;++ji){if(ee){var ba=ae.x(ne);p.fillStyle=l.legendColorBackground,p.fillRect(ae.leftForLtr(ba,v),a.y,v,v),p.lineWidth=1,p.strokeStyle=We.borderColor,p.strokeRect(ae.leftForLtr(ba,v),a.y,v,v),p.fillStyle=We.backgroundColor,p.fillRect(ae.leftForLtr(ae.xPlus(ba,1),v-2),a.y+1,v-2,v-2),p.fillStyle=Ve}pe(at[ji])}be.each(Ee.after,pe)}Z=0,be.each(l.afterBody,pe),a.y-=A},drawFooter:function(a,l,p){var v=l.footer,A=v.length,H,Q;if(A){var ee=Rp(l.rtl,l.x,l.width);for(a.x=op(l,l._footerAlign),a.y+=l.footerMarginTop,p.textAlign=ee.textAlign(l._footerAlign),p.textBaseline="middle",H=l.footerFontSize,p.fillStyle=l.footerFontColor,p.font=be.fontString(H,l._footerFontStyle,l._footerFontFamily),Q=0;Q<A;++Q)p.fillText(v[Q],ee.x(a.x),a.y+H/2),a.y+=H+l.footerSpacing}},drawBackground:function(a,l,p,v){p.fillStyle=l.backgroundColor,p.strokeStyle=l.borderColor,p.lineWidth=l.borderWidth;var A=l.xAlign,H=l.yAlign,Q=a.x,ee=a.y,Z=v.width,ne=v.height,ae=l.cornerRadius;p.beginPath(),p.moveTo(Q+ae,ee),H==="top"&&this.drawCaret(a,v),p.lineTo(Q+Z-ae,ee),p.quadraticCurveTo(Q+Z,ee,Q+Z,ee+ae),H==="center"&&A==="right"&&this.drawCaret(a,v),p.lineTo(Q+Z,ee+ne-ae),p.quadraticCurveTo(Q+Z,ee+ne,Q+Z-ae,ee+ne),H==="bottom"&&this.drawCaret(a,v),p.lineTo(Q+ae,ee+ne),p.quadraticCurveTo(Q,ee+ne,Q,ee+ne-ae),H==="center"&&A==="left"&&this.drawCaret(a,v),p.lineTo(Q,ee+ae),p.quadraticCurveTo(Q,ee,Q+ae,ee),p.closePath(),p.fill(),l.borderWidth>0&&p.stroke()},draw:function(){var a=this._chart.ctx,l=this._view;if(l.opacity!==0){var p={width:l.width,height:l.height},v={x:l.x,y:l.y},A=Math.abs(l.opacity<.001)?0:l.opacity,H=l.title.length||l.beforeBody.length||l.body.length||l.afterBody.length||l.footer.length;this._options.enabled&&H&&(a.save(),a.globalAlpha=A,this.drawBackground(v,l,a,p),v.y+=l.yPadding,be.rtl.overrideTextDirection(a,l.textDirection),this.drawTitle(v,l,a),this.drawBody(v,l,a),this.drawFooter(v,l,a),be.rtl.restoreTextDirection(a,l.textDirection),a.restore())}},handleEvent:function(a){var l=this,p=l._options,v=!1;return l._lastActive=l._lastActive||[],a.type==="mouseout"?l._active=[]:(l._active=l._chart.getElementsAtEventForMode(a,p.mode,p),p.reverse&&l._active.reverse()),v=!be.arrayEquals(l._active,l._lastActive),v&&(l._lastActive=l._active,(p.enabled||p.custom)&&(l._eventPosition={x:a.x,y:a.y},l.update(!0),l.pivot())),v}}),Bg=fm,Ip=Wg;Ip.positioners=Bg;var Pp=be.valueOrDefault;Os._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function mm(){return be.merge(Object.create(null),[].slice.call(arguments),{merger:function(a,l,p,v){if(a==="xAxes"||a==="yAxes"){var A=p[a].length,H,Q,ee;for(l[a]||(l[a]=[]),H=0;H<A;++H)ee=p[a][H],Q=Pp(ee.type,a==="xAxes"?"category":"linear"),H>=l[a].length&&l[a].push({}),!l[a][H].type||ee.type&&ee.type!==l[a][H].type?be.merge(l[a][H],[Jh.getScaleDefaults(Q),ee]):be.merge(l[a][H],ee)}else be._merger(a,l,p,v)}})}function Tp(){return be.merge(Object.create(null),[].slice.call(arguments),{merger:function(a,l,p,v){var A=l[a]||Object.create(null),H=p[a];a==="scales"?l[a]=mm(A,H):a==="scale"?l[a]=be.merge(A,[Jh.getScaleDefaults(H.type),H]):be._merger(a,l,p,v)}})}function Kg(a){a=a||Object.create(null);var l=a.data=a.data||{};return l.datasets=l.datasets||[],l.labels=l.labels||[],a.options=Tp(Os.global,Os[a.type],a.options||{}),a}function Yg(a){var l=a.options;be.each(a.scales,function(p){lh.removeBox(a,p)}),l=Tp(Os.global,Os[a.config.type],l),a.options=a.config.options=l,a.ensureScalesHaveIDs(),a.buildOrUpdateScales(),a.tooltip._options=l.tooltips,a.tooltip.initialize()}function vm(a,l,p){var v,A=function(H){return H.id===v};do v=l+p++;while(be.findIndex(a,A)>=0);return v}function gm(a){return a==="top"||a==="bottom"}function ym(a,l){return function(p,v){return p[a]===v[a]?p[l]-v[l]:p[a]-v[a]}}var yh=function(a,l){return this.construct(a,l),this};be.extend(yh.prototype,{construct:function(a,l){var p=this;l=Kg(l);var v=qh.acquireContext(a,l),A=v&&v.canvas,H=A&&A.height,Q=A&&A.width;if(p.id=be.uid(),p.ctx=v,p.canvas=A,p.config=l,p.width=Q,p.height=H,p.aspectRatio=H?Q/H:null,p.options=l.options,p._bufferedRender=!1,p._layers=[],p.chart=p,p.controller=p,yh.instances[p.id]=p,Object.defineProperty(p,"data",{get:function(){return p.config.data},set:function(ee){p.config.data=ee}}),!v||!A){console.error("Failed to create chart: can't acquire context from the given item");return}p.initialize(),p.update()},initialize:function(){var a=this;return Pa.notify(a,"beforeInit"),be.retinaScale(a,a.options.devicePixelRatio),a.bindEvents(),a.options.responsive&&a.resize(!0),a.initToolTip(),Pa.notify(a,"afterInit"),a},clear:function(){return be.canvas.clear(this),this},stop:function(){return zh.cancelAnimation(this),this},resize:function(a){var l=this,p=l.options,v=l.canvas,A=p.maintainAspectRatio&&l.aspectRatio||null,H=Math.max(0,Math.floor(be.getMaximumWidth(v))),Q=Math.max(0,Math.floor(A?H/A:be.getMaximumHeight(v)));if(!(l.width===H&&l.height===Q)&&(v.width=l.width=H,v.height=l.height=Q,v.style.width=H+"px",v.style.height=Q+"px",be.retinaScale(l,p.devicePixelRatio),!a)){var ee={width:H,height:Q};Pa.notify(l,"resize",[ee]),p.onResize&&p.onResize(l,ee),l.stop(),l.update({duration:p.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var a=this.options,l=a.scales||{},p=a.scale;be.each(l.xAxes,function(v,A){v.id||(v.id=vm(l.xAxes,"x-axis-",A))}),be.each(l.yAxes,function(v,A){v.id||(v.id=vm(l.yAxes,"y-axis-",A))}),p&&(p.id=p.id||"scale")},buildOrUpdateScales:function(){var a=this,l=a.options,p=a.scales||{},v=[],A=Object.keys(p).reduce(function(H,Q){return H[Q]=!1,H},{});l.scales&&(v=v.concat((l.scales.xAxes||[]).map(function(H){return{options:H,dtype:"category",dposition:"bottom"}}),(l.scales.yAxes||[]).map(function(H){return{options:H,dtype:"linear",dposition:"left"}}))),l.scale&&v.push({options:l.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),be.each(v,function(H){var Q=H.options,ee=Q.id,Z=Pp(Q.type,H.dtype);gm(Q.position)!==gm(H.dposition)&&(Q.position=H.dposition),A[ee]=!0;var ne=null;if(ee in p&&p[ee].type===Z)ne=p[ee],ne.options=Q,ne.ctx=a.ctx,ne.chart=a;else{var ae=Jh.getScaleConstructor(Z);if(!ae)return;ne=new ae({id:ee,type:Z,options:Q,ctx:a.ctx,chart:a}),p[ne.id]=ne}ne.mergeTicksOptions(),H.isDefault&&(a.scale=ne)}),be.each(A,function(H,Q){H||delete p[Q]}),a.scales=p,Jh.addScalesToLayout(this)},buildOrUpdateControllers:function(){var a=this,l=[],p=a.data.datasets,v,A;for(v=0,A=p.length;v<A;v++){var H=p[v],Q=a.getDatasetMeta(v),ee=H.type||a.config.type;if(Q.type&&Q.type!==ee&&(a.destroyDatasetMeta(v),Q=a.getDatasetMeta(v)),Q.type=ee,Q.order=H.order||0,Q.index=v,Q.controller)Q.controller.updateIndex(v),Q.controller.linkScales();else{var Z=sm[Q.type];if(Z===void 0)throw new Error('"'+Q.type+'" is not a chart type.');Q.controller=new Z(a,v),l.push(Q.controller)}}return l},resetElements:function(){var a=this;be.each(a.data.datasets,function(l,p){a.getDatasetMeta(p).controller.reset()},a)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(a){var l=this,p,v;if((!a||typeof a!="object")&&(a={duration:a,lazy:arguments[1]}),Yg(l),Pa._invalidate(l),Pa.notify(l,"beforeUpdate")!==!1){l.tooltip._data=l.data;var A=l.buildOrUpdateControllers();for(p=0,v=l.data.datasets.length;p<v;p++)l.getDatasetMeta(p).controller.buildOrUpdateElements();l.updateLayout(),l.options.animation&&l.options.animation.duration&&be.each(A,function(H){H.reset()}),l.updateDatasets(),l.tooltip.initialize(),l.lastActive=[],Pa.notify(l,"afterUpdate"),l._layers.sort(ym("z","_idx")),l._bufferedRender?l._bufferedRequest={duration:a.duration,easing:a.easing,lazy:a.lazy}:l.render(a)}},updateLayout:function(){var a=this;Pa.notify(a,"beforeLayout")!==!1&&(lh.update(this,this.width,this.height),a._layers=[],be.each(a.boxes,function(l){l._configure&&l._configure(),a._layers.push.apply(a._layers,l._layers())},a),a._layers.forEach(function(l,p){l._idx=p}),Pa.notify(a,"afterScaleUpdate"),Pa.notify(a,"afterLayout"))},updateDatasets:function(){var a=this;if(Pa.notify(a,"beforeDatasetsUpdate")!==!1){for(var l=0,p=a.data.datasets.length;l<p;++l)a.updateDataset(l);Pa.notify(a,"afterDatasetsUpdate")}},updateDataset:function(a){var l=this,p=l.getDatasetMeta(a),v={meta:p,index:a};Pa.notify(l,"beforeDatasetUpdate",[v])!==!1&&(p.controller._update(),Pa.notify(l,"afterDatasetUpdate",[v]))},render:function(a){var l=this;(!a||typeof a!="object")&&(a={duration:a,lazy:arguments[1]});var p=l.options.animation,v=Pp(a.duration,p&&p.duration),A=a.lazy;if(Pa.notify(l,"beforeRender")!==!1){var H=function(ee){Pa.notify(l,"afterRender"),be.callback(p&&p.onComplete,[ee],l)};if(p&&v){var Q=new Vh({numSteps:v/16.66,easing:a.easing||p.easing,render:function(ee,Z){var ne=be.easing.effects[Z.easing],ae=Z.currentStep,pe=ae/Z.numSteps;ee.draw(ne(pe),pe,ae)},onAnimationProgress:p.onProgress,onAnimationComplete:H});zh.addAnimation(l,Q,v,A)}else l.draw(),H(new Vh({numSteps:0,chart:l}));return l}},draw:function(a){var l=this,p,v;if(l.clear(),be.isNullOrUndef(a)&&(a=1),l.transition(a),!(l.width<=0||l.height<=0)&&Pa.notify(l,"beforeDraw",[a])!==!1){for(v=l._layers,p=0;p<v.length&&v[p].z<=0;++p)v[p].draw(l.chartArea);for(l.drawDatasets(a);p<v.length;++p)v[p].draw(l.chartArea);l._drawTooltip(a),Pa.notify(l,"afterDraw",[a])}},transition:function(a){for(var l=this,p=0,v=(l.data.datasets||[]).length;p<v;++p)l.isDatasetVisible(p)&&l.getDatasetMeta(p).controller.transition(a);l.tooltip.transition(a)},_getSortedDatasetMetas:function(a){var l=this,p=l.data.datasets||[],v=[],A,H;for(A=0,H=p.length;A<H;++A)(!a||l.isDatasetVisible(A))&&v.push(l.getDatasetMeta(A));return v.sort(ym("order","index")),v},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(a){var l=this,p,v;if(Pa.notify(l,"beforeDatasetsDraw",[a])!==!1){for(p=l._getSortedVisibleDatasetMetas(),v=p.length-1;v>=0;--v)l.drawDataset(p[v],a);Pa.notify(l,"afterDatasetsDraw",[a])}},drawDataset:function(a,l){var p=this,v={meta:a,index:a.index,easingValue:l};Pa.notify(p,"beforeDatasetDraw",[v])!==!1&&(a.controller.draw(l),Pa.notify(p,"afterDatasetDraw",[v]))},_drawTooltip:function(a){var l=this,p=l.tooltip,v={tooltip:p,easingValue:a};Pa.notify(l,"beforeTooltipDraw",[v])!==!1&&(p.draw(),Pa.notify(l,"afterTooltipDraw",[v]))},getElementAtEvent:function(a){return Nh.modes.single(this,a)},getElementsAtEvent:function(a){return Nh.modes.label(this,a,{intersect:!0})},getElementsAtXAxis:function(a){return Nh.modes["x-axis"](this,a,{intersect:!0})},getElementsAtEventForMode:function(a,l,p){var v=Nh.modes[l];return typeof v=="function"?v(this,a,p):[]},getDatasetAtEvent:function(a){return Nh.modes.dataset(this,a,{intersect:!0})},getDatasetMeta:function(a){var l=this,p=l.data.datasets[a];p._meta||(p._meta={});var v=p._meta[l.id];return v||(v=p._meta[l.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:p.order||0,index:a}),v},getVisibleDatasetCount:function(){for(var a=0,l=0,p=this.data.datasets.length;l<p;++l)this.isDatasetVisible(l)&&a++;return a},isDatasetVisible:function(a){var l=this.getDatasetMeta(a);return typeof l.hidden=="boolean"?!l.hidden:!this.data.datasets[a].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(a){var l=this.id,p=this.data.datasets[a],v=p._meta&&p._meta[l];v&&(v.controller.destroy(),delete p._meta[l])},destroy:function(){var a=this,l=a.canvas,p,v;for(a.stop(),p=0,v=a.data.datasets.length;p<v;++p)a.destroyDatasetMeta(p);l&&(a.unbindEvents(),be.canvas.clear(a),qh.releaseContext(a.ctx),a.canvas=null,a.ctx=null),Pa.notify(a,"destroy"),delete yh.instances[a.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var a=this;a.tooltip=new Ip({_chart:a,_chartInstance:a,_data:a.data,_options:a.options.tooltips},a)},bindEvents:function(){var a=this,l=a._listeners={},p=function(){a.eventHandler.apply(a,arguments)};be.each(a.options.events,function(v){qh.addEventListener(a,v,p),l[v]=p}),a.options.responsive&&(p=function(){a.resize()},qh.addEventListener(a,"resize",p),l.resize=p)},unbindEvents:function(){var a=this,l=a._listeners;l&&(delete a._listeners,be.each(l,function(p,v){qh.removeEventListener(a,v,p)}))},updateHoverStyle:function(a,l,p){var v=p?"set":"remove",A,H,Q;for(H=0,Q=a.length;H<Q;++H)A=a[H],A&&this.getDatasetMeta(A._datasetIndex).controller[v+"HoverStyle"](A);l==="dataset"&&this.getDatasetMeta(a[0]._datasetIndex).controller["_"+v+"DatasetHoverStyle"]()},eventHandler:function(a){var l=this,p=l.tooltip;if(Pa.notify(l,"beforeEvent",[a])!==!1){l._bufferedRender=!0,l._bufferedRequest=null;var v=l.handleEvent(a);p&&(v=p._start?p.handleEvent(a):v|p.handleEvent(a)),Pa.notify(l,"afterEvent",[a]);var A=l._bufferedRequest;return A?l.render(A):v&&!l.animating&&(l.stop(),l.render({duration:l.options.hover.animationDuration,lazy:!0})),l._bufferedRender=!1,l._bufferedRequest=null,l}},handleEvent:function(a){var l=this,p=l.options||{},v=p.hover,A=!1;return l.lastActive=l.lastActive||[],a.type==="mouseout"?l.active=[]:l.active=l.getElementsAtEventForMode(a,v.mode,v),be.callback(p.onHover||p.hover.onHover,[a.native,l.active],l),(a.type==="mouseup"||a.type==="click")&&p.onClick&&p.onClick.call(l,a.native,l.active),l.lastActive.length&&l.updateHoverStyle(l.lastActive,v.mode,!1),l.active.length&&v.mode&&l.updateHoverStyle(l.active,v.mode,!0),A=!be.arrayEquals(l.active,l.lastActive),l.lastActive=l.active,A}}),yh.instances={};var wa=yh;yh.Controller=yh,yh.types={},be.configMerge=Tp,be.scaleMerge=mm;var Gg=function(){be.where=function(v,A){if(be.isArray(v)&&Array.prototype.filter)return v.filter(A);var H=[];return be.each(v,function(Q){A(Q)&&H.push(Q)}),H},be.findIndex=Array.prototype.findIndex?function(v,A,H){return v.findIndex(A,H)}:function(v,A,H){H=H===void 0?v:H;for(var Q=0,ee=v.length;Q<ee;++Q)if(A.call(H,v[Q],Q,v))return Q;return-1},be.findNextWhere=function(v,A,H){be.isNullOrUndef(H)&&(H=-1);for(var Q=H+1;Q<v.length;Q++){var ee=v[Q];if(A(ee))return ee}},be.findPreviousWhere=function(v,A,H){be.isNullOrUndef(H)&&(H=v.length);for(var Q=H-1;Q>=0;Q--){var ee=v[Q];if(A(ee))return ee}},be.isNumber=function(v){return!isNaN(parseFloat(v))&&isFinite(v)},be.almostEquals=function(v,A,H){return Math.abs(v-A)<H},be.almostWhole=function(v,A){var H=Math.round(v);return H-A<=v&&H+A>=v},be.max=function(v){return v.reduce(function(A,H){return isNaN(H)?A:Math.max(A,H)},Number.NEGATIVE_INFINITY)},be.min=function(v){return v.reduce(function(A,H){return isNaN(H)?A:Math.min(A,H)},Number.POSITIVE_INFINITY)},be.sign=Math.sign?function(v){return Math.sign(v)}:function(v){return v=+v,v===0||isNaN(v)?v:v>0?1:-1},be.toRadians=function(v){return v*(Math.PI/180)},be.toDegrees=function(v){return v*(180/Math.PI)},be._decimalPlaces=function(v){if(be.isFinite(v)){for(var A=1,H=0;Math.round(v*A)/A!==v;)A*=10,H++;return H}},be.getAngleFromPoint=function(v,A){var H=A.x-v.x,Q=A.y-v.y,ee=Math.sqrt(H*H+Q*Q),Z=Math.atan2(Q,H);return Z<-.5*Math.PI&&(Z+=2*Math.PI),{angle:Z,distance:ee}},be.distanceBetweenPoints=function(v,A){return Math.sqrt(Math.pow(A.x-v.x,2)+Math.pow(A.y-v.y,2))},be.aliasPixel=function(v){return v%2===0?0:.5},be._alignPixel=function(v,A,H){var Q=v.currentDevicePixelRatio,ee=H/2;return Math.round((A-ee)*Q)/Q+ee},be.splineCurve=function(v,A,H,Q){var ee=v.skip?A:v,Z=A,ne=H.skip?A:H,ae=Math.sqrt(Math.pow(Z.x-ee.x,2)+Math.pow(Z.y-ee.y,2)),pe=Math.sqrt(Math.pow(ne.x-Z.x,2)+Math.pow(ne.y-Z.y,2)),Ee=ae/(ae+pe),Ve=pe/(ae+pe);Ee=isNaN(Ee)?0:Ee,Ve=isNaN(Ve)?0:Ve;var We=Q*Ee,at=Q*Ve;return{previous:{x:Z.x-We*(ne.x-ee.x),y:Z.y-We*(ne.y-ee.y)},next:{x:Z.x+at*(ne.x-ee.x),y:Z.y+at*(ne.y-ee.y)}}},be.EPSILON=Number.EPSILON||1e-14,be.splineCurveMonotone=function(v){var A=(v||[]).map(function(ws){return{model:ws._model,deltaK:0,mK:0}}),H=A.length,Q,ee,Z,ne;for(Q=0;Q<H;++Q)if(Z=A[Q],!Z.model.skip){if(ee=Q>0?A[Q-1]:null,ne=Q<H-1?A[Q+1]:null,ne&&!ne.model.skip){var ae=ne.model.x-Z.model.x;Z.deltaK=ae!==0?(ne.model.y-Z.model.y)/ae:0}!ee||ee.model.skip?Z.mK=Z.deltaK:!ne||ne.model.skip?Z.mK=ee.deltaK:this.sign(ee.deltaK)!==this.sign(Z.deltaK)?Z.mK=0:Z.mK=(ee.deltaK+Z.deltaK)/2}var pe,Ee,Ve,We;for(Q=0;Q<H-1;++Q)if(Z=A[Q],ne=A[Q+1],!(Z.model.skip||ne.model.skip)){if(be.almostEquals(Z.deltaK,0,this.EPSILON)){Z.mK=ne.mK=0;continue}pe=Z.mK/Z.deltaK,Ee=ne.mK/Z.deltaK,We=Math.pow(pe,2)+Math.pow(Ee,2),!(We<=9)&&(Ve=3/Math.sqrt(We),Z.mK=pe*Ve*Z.deltaK,ne.mK=Ee*Ve*Z.deltaK)}var at;for(Q=0;Q<H;++Q)Z=A[Q],!Z.model.skip&&(ee=Q>0?A[Q-1]:null,ne=Q<H-1?A[Q+1]:null,ee&&!ee.model.skip&&(at=(Z.model.x-ee.model.x)/3,Z.model.controlPointPreviousX=Z.model.x-at,Z.model.controlPointPreviousY=Z.model.y-at*Z.mK),ne&&!ne.model.skip&&(at=(ne.model.x-Z.model.x)/3,Z.model.controlPointNextX=Z.model.x+at,Z.model.controlPointNextY=Z.model.y+at*Z.mK))},be.nextItem=function(v,A,H){return H?A>=v.length-1?v[0]:v[A+1]:A>=v.length-1?v[v.length-1]:v[A+1]},be.previousItem=function(v,A,H){return H?A<=0?v[v.length-1]:v[A-1]:A<=0?v[0]:v[A-1]},be.niceNum=function(v,A){var H=Math.floor(be.log10(v)),Q=v/Math.pow(10,H),ee;return A?Q<1.5?ee=1:Q<3?ee=2:Q<7?ee=5:ee=10:Q<=1?ee=1:Q<=2?ee=2:Q<=5?ee=5:ee=10,ee*Math.pow(10,H)},be.requestAnimFrame=(function(){return typeof window>"u"?function(v){v()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(v){return window.setTimeout(v,1e3/60)}})(),be.getRelativePosition=function(v,A){var H,Q,ee=v.originalEvent||v,Z=v.target||v.srcElement,ne=Z.getBoundingClientRect(),ae=ee.touches;ae&&ae.length>0?(H=ae[0].clientX,Q=ae[0].clientY):(H=ee.clientX,Q=ee.clientY);var pe=parseFloat(be.getStyle(Z,"padding-left")),Ee=parseFloat(be.getStyle(Z,"padding-top")),Ve=parseFloat(be.getStyle(Z,"padding-right")),We=parseFloat(be.getStyle(Z,"padding-bottom")),at=ne.right-ne.left-pe-Ve,ws=ne.bottom-ne.top-Ee-We;return H=Math.round((H-ne.left-pe)/at*Z.width/A.currentDevicePixelRatio),Q=Math.round((Q-ne.top-Ee)/ws*Z.height/A.currentDevicePixelRatio),{x:H,y:Q}};function a(v,A,H){var Q;return typeof v=="string"?(Q=parseInt(v,10),v.indexOf("%")!==-1&&(Q=Q/100*A.parentNode[H])):Q=v,Q}function l(v){return v!=null&&v!=="none"}function p(v,A,H){var Q=document.defaultView,ee=be._getParentNode(v),Z=Q.getComputedStyle(v)[A],ne=Q.getComputedStyle(ee)[A],ae=l(Z),pe=l(ne),Ee=Number.POSITIVE_INFINITY;return ae||pe?Math.min(ae?a(Z,v,H):Ee,pe?a(ne,ee,H):Ee):"none"}be.getConstraintWidth=function(v){return p(v,"max-width","clientWidth")},be.getConstraintHeight=function(v){return p(v,"max-height","clientHeight")},be._calculatePadding=function(v,A,H){return A=be.getStyle(v,A),A.indexOf("%")>-1?H*parseInt(A,10)/100:parseInt(A,10)},be._getParentNode=function(v){var A=v.parentNode;return A&&A.toString()==="[object ShadowRoot]"&&(A=A.host),A},be.getMaximumWidth=function(v){var A=be._getParentNode(v);if(!A)return v.clientWidth;var H=A.clientWidth,Q=be._calculatePadding(A,"padding-left",H),ee=be._calculatePadding(A,"padding-right",H),Z=H-Q-ee,ne=be.getConstraintWidth(v);return isNaN(ne)?Z:Math.min(Z,ne)},be.getMaximumHeight=function(v){var A=be._getParentNode(v);if(!A)return v.clientHeight;var H=A.clientHeight,Q=be._calculatePadding(A,"padding-top",H),ee=be._calculatePadding(A,"padding-bottom",H),Z=H-Q-ee,ne=be.getConstraintHeight(v);return isNaN(ne)?Z:Math.min(Z,ne)},be.getStyle=function(v,A){return v.currentStyle?v.currentStyle[A]:document.defaultView.getComputedStyle(v,null).getPropertyValue(A)},be.retinaScale=function(v,A){var H=v.currentDevicePixelRatio=A||typeof window<"u"&&window.devicePixelRatio||1;if(H!==1){var Q=v.canvas,ee=v.height,Z=v.width;Q.height=ee*H,Q.width=Z*H,v.ctx.scale(H,H),!Q.style.height&&!Q.style.width&&(Q.style.height=ee+"px",Q.style.width=Z+"px")}},be.fontString=function(v,A,H){return A+" "+v+"px "+H},be.longestText=function(v,A,H,Q){Q=Q||{};var ee=Q.data=Q.data||{},Z=Q.garbageCollect=Q.garbageCollect||[];Q.font!==A&&(ee=Q.data={},Z=Q.garbageCollect=[],Q.font=A),v.font=A;var ne=0,ae=H.length,pe,Ee,Ve,We,at;for(pe=0;pe<ae;pe++)if(We=H[pe],We!=null&&be.isArray(We)!==!0)ne=be.measureText(v,ee,Z,ne,We);else if(be.isArray(We))for(Ee=0,Ve=We.length;Ee<Ve;Ee++)at=We[Ee],at!=null&&!be.isArray(at)&&(ne=be.measureText(v,ee,Z,ne,at));var ws=Z.length/2;if(ws>H.length){for(pe=0;pe<ws;pe++)delete ee[Z[pe]];Z.splice(0,ws)}return ne},be.measureText=function(v,A,H,Q,ee){var Z=A[ee];return Z||(Z=A[ee]=v.measureText(ee).width,H.push(ee)),Z>Q&&(Q=Z),Q},be.numberOfLabelLines=function(v){var A=1;return be.each(v,function(H){be.isArray(H)&&H.length>A&&(A=H.length)}),A},be.color=ue?function(v){return v instanceof CanvasGradient&&(v=Os.global.defaultColor),ue(v)}:function(v){return console.error("Color.js not found!"),v},be.getHoverColor=function(v){return v instanceof CanvasPattern||v instanceof CanvasGradient?v:be.color(v).saturate(.5).darken(.1).rgbString()}};function Eh(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function lp(a){this.options=a||{}}be.extend(lp.prototype,{formats:Eh,parse:Eh,format:Eh,add:Eh,diff:Eh,startOf:Eh,endOf:Eh,_create:function(a){return a}}),lp.override=function(a){be.extend(lp.prototype,a)};var Hg=lp,Op={_date:Hg},Qh={formatters:{values:function(a){return be.isArray(a)?a:""+a},linear:function(a,l,p){var v=p.length>3?p[2]-p[1]:p[1]-p[0];Math.abs(v)>1&&a!==Math.floor(a)&&(v=a-Math.floor(a));var A=be.log10(Math.abs(v)),H="";if(a!==0){var Q=Math.max(Math.abs(p[0]),Math.abs(p[p.length-1]));if(Q<1e-4){var ee=be.log10(Math.abs(a)),Z=Math.floor(ee)-Math.floor(A);Z=Math.max(Math.min(Z,20),0),H=a.toExponential(Z)}else{var ne=-1*Math.floor(A);ne=Math.max(Math.min(ne,20),0),H=a.toFixed(ne)}}else H="0";return H},logarithmic:function(a,l,p){var v=a/Math.pow(10,Math.floor(be.log10(a)));return a===0?"0":v===1||v===2||v===5||l===0||l===p.length-1?a.toExponential():""}}},Mh=be.isArray,Xh=be.isNullOrUndef,Rh=be.valueOrDefault,Dh=be.valueAtIndexOrDefault;Os._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Qh.formatters.values,minor:{},major:{}}});function Jg(a,l){for(var p=[],v=a.length/l,A=0,H=a.length;A<H;A+=v)p.push(a[Math.floor(A)]);return p}function Qg(a,l,p){var v=a.getTicks().length,A=Math.min(l,v-1),H=a.getPixelForTick(A),Q=a._startPixel,ee=a._endPixel,Z=1e-6,ne;if(!(p&&(v===1?ne=Math.max(H-Q,ee-H):l===0?ne=(a.getPixelForTick(1)-H)/2:ne=(H-a.getPixelForTick(A-1))/2,H+=A<l?ne:-ne,H<Q-Z||H>ee+Z)))return H}function Xg(a,l){be.each(a,function(p){var v=p.gc,A=v.length/2,H;if(A>l){for(H=0;H<A;++H)delete p.data[v[H]];v.splice(0,A)}})}function Zg(a,l,p,v){var A=p.length,H=[],Q=[],ee=[],Z=0,ne=0,ae,pe,Ee,Ve,We,at,ws,ji,ma,ga,$a,ba,Ma;for(ae=0;ae<A;++ae){if(Ve=p[ae].label,We=p[ae].major?l.major:l.minor,a.font=at=We.string,ws=v[at]=v[at]||{data:{},gc:[]},ji=We.lineHeight,ma=ga=0,!Xh(Ve)&&!Mh(Ve))ma=be.measureText(a,ws.data,ws.gc,ma,Ve),ga=ji;else if(Mh(Ve))for(pe=0,Ee=Ve.length;pe<Ee;++pe)$a=Ve[pe],!Xh($a)&&!Mh($a)&&(ma=be.measureText(a,ws.data,ws.gc,ma,$a),ga+=ji);H.push(ma),Q.push(ga),ee.push(ji/2),Z=Math.max(ma,Z),ne=Math.max(ga,ne)}Xg(v,A),ba=H.indexOf(Z),Ma=Q.indexOf(ne);function Sa(Ra){return{width:H[Ra]||0,height:Q[Ra]||0,offset:ee[Ra]||0}}return{first:Sa(0),last:Sa(A-1),widest:Sa(ba),highest:Sa(Ma)}}function Zh(a){return a.drawTicks?a.tickMarkLength:0}function Cp(a){var l,p;return a.display?(l=be.options._parseFont(a),p=be.options.toPadding(a.padding),l.lineHeight+p.height):0}function bm(a,l){return be.extend(be.options._parseFont({fontFamily:Rh(l.fontFamily,a.fontFamily),fontSize:Rh(l.fontSize,a.fontSize),fontStyle:Rh(l.fontStyle,a.fontStyle),lineHeight:Rh(l.lineHeight,a.lineHeight)}),{color:be.options.resolve([l.fontColor,a.fontColor,Os.global.defaultFontColor])})}function Np(a){var l=bm(a,a.minor),p=a.major.enabled?bm(a,a.major):l;return{minor:l,major:p}}function qp(a){var l=[],p,v,A;for(v=0,A=a.length;v<A;++v)p=a[v],typeof p._index<"u"&&l.push(p);return l}function ey(a){var l=a.length,p,v;if(l<2)return!1;for(v=a[0],p=1;p<l;++p)if(a[p]-a[p-1]!==v)return!1;return v}function ty(a,l,p,v){var A=ey(a),H=(l.length-1)/v,Q,ee,Z,ne;if(!A)return Math.max(H,1);for(Q=be.math._factorize(A),Z=0,ne=Q.length-1;Z<ne;Z++)if(ee=Q[Z],ee>H)return ee;return Math.max(H,1)}function ry(a){var l=[],p,v;for(p=0,v=a.length;p<v;p++)a[p].major&&l.push(p);return l}function ny(a,l,p){var v=0,A=l[0],H,Q;for(p=Math.ceil(p),H=0;H<a.length;H++)Q=a[H],H===A?(Q._index=H,v++,A=l[v*p]):delete Q.label}function up(a,l,p,v){var A=Rh(p,0),H=Math.min(Rh(v,a.length),a.length),Q=0,ee,Z,ne,ae;for(l=Math.ceil(l),v&&(ee=v-p,l=ee/Math.floor(ee/l)),ae=A;ae<0;)Q++,ae=Math.round(A+Q*l);for(Z=Math.max(A,0);Z<H;Z++)ne=a[Z],Z===ae?(ne._index=Z,Q++,ae=Math.round(A+Q*l)):delete ne.label}var Dp=ah.extend({zeroLineIndex:0,getPadding:function(){var a=this;return{left:a.paddingLeft||0,top:a.paddingTop||0,right:a.paddingRight||0,bottom:a.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var a=this.chart.data;return this.options.labels||(this.isHorizontal()?a.xLabels:a.yLabels)||a.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){be.callback(this.options.beforeUpdate,[this])},update:function(a,l,p){var v=this,A=v.options.ticks,H=A.sampleSize,Q,ee,Z,ne,ae;if(v.beforeUpdate(),v.maxWidth=a,v.maxHeight=l,v.margins=be.extend({left:0,right:0,top:0,bottom:0},p),v._ticks=null,v.ticks=null,v._labelSizes=null,v._maxLabelLines=0,v.longestLabelWidth=0,v.longestTextCache=v.longestTextCache||{},v._gridLineItems=null,v._labelItems=null,v.beforeSetDimensions(),v.setDimensions(),v.afterSetDimensions(),v.beforeDataLimits(),v.determineDataLimits(),v.afterDataLimits(),v.beforeBuildTicks(),ne=v.buildTicks()||[],ne=v.afterBuildTicks(ne)||ne,(!ne||!ne.length)&&v.ticks)for(ne=[],Q=0,ee=v.ticks.length;Q<ee;++Q)ne.push({value:v.ticks[Q],major:!1});return v._ticks=ne,ae=H<ne.length,Z=v._convertTicksToLabels(ae?Jg(ne,H):ne),v._configure(),v.beforeCalculateTickRotation(),v.calculateTickRotation(),v.afterCalculateTickRotation(),v.beforeFit(),v.fit(),v.afterFit(),v._ticksToDraw=A.display&&(A.autoSkip||A.source==="auto")?v._autoSkip(ne):ne,ae&&(Z=v._convertTicksToLabels(v._ticksToDraw)),v.ticks=Z,v.afterUpdate(),v.minSize},_configure:function(){var a=this,l=a.options.ticks.reverse,p,v;a.isHorizontal()?(p=a.left,v=a.right):(p=a.top,v=a.bottom,l=!l),a._startPixel=p,a._endPixel=v,a._reversePixels=l,a._length=v-p},afterUpdate:function(){be.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){be.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0},afterSetDimensions:function(){be.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){be.callback(this.options.beforeDataLimits,[this])},determineDataLimits:be.noop,afterDataLimits:function(){be.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){be.callback(this.options.beforeBuildTicks,[this])},buildTicks:be.noop,afterBuildTicks:function(a){var l=this;return Mh(a)&&a.length?be.callback(l.options.afterBuildTicks,[l,a]):(l.ticks=be.callback(l.options.afterBuildTicks,[l,l.ticks])||l.ticks,a)},beforeTickToLabelConversion:function(){be.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var a=this,l=a.options.ticks;a.ticks=a.ticks.map(l.userCallback||l.callback,this)},afterTickToLabelConversion:function(){be.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){be.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var a=this,l=a.options,p=l.ticks,v=a.getTicks().length,A=p.minRotation||0,H=p.maxRotation,Q=A,ee,Z,ne,ae,pe,Ee,Ve;if(!a._isVisible()||!p.display||A>=H||v<=1||!a.isHorizontal()){a.labelRotation=A;return}ee=a._getLabelSizes(),Z=ee.widest.width,ne=ee.highest.height-ee.highest.offset,ae=Math.min(a.maxWidth,a.chart.width-Z),pe=l.offset?a.maxWidth/v:ae/(v-1),Z+6>pe&&(pe=ae/(v-(l.offset?.5:1)),Ee=a.maxHeight-Zh(l.gridLines)-p.padding-Cp(l.scaleLabel),Ve=Math.sqrt(Z*Z+ne*ne),Q=be.toDegrees(Math.min(Math.asin(Math.min((ee.highest.height+6)/pe,1)),Math.asin(Math.min(Ee/Ve,1))-Math.asin(ne/Ve))),Q=Math.max(A,Math.min(H,Q))),a.labelRotation=Q},afterCalculateTickRotation:function(){be.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){be.callback(this.options.beforeFit,[this])},fit:function(){var a=this,l=a.minSize={width:0,height:0},p=a.chart,v=a.options,A=v.ticks,H=v.scaleLabel,Q=v.gridLines,ee=a._isVisible(),Z=v.position==="bottom",ne=a.isHorizontal();if(ne?l.width=a.maxWidth:ee&&(l.width=Zh(Q)+Cp(H)),ne?ee&&(l.height=Zh(Q)+Cp(H)):l.height=a.maxHeight,A.display&&ee){var ae=Np(A),pe=a._getLabelSizes(),Ee=pe.first,Ve=pe.last,We=pe.widest,at=pe.highest,ws=ae.minor.lineHeight*.4,ji=A.padding;if(ne){var ma=a.labelRotation!==0,ga=be.toRadians(a.labelRotation),$a=Math.cos(ga),ba=Math.sin(ga),Ma=ba*We.width+$a*(at.height-(ma?at.offset:0))+(ma?0:ws);l.height=Math.min(a.maxHeight,l.height+Ma+ji);var Sa=a.getPixelForTick(0)-a.left,Ra=a.right-a.getPixelForTick(a.getTicks().length-1),Ta,Va;ma?(Ta=Z?$a*Ee.width+ba*Ee.offset:ba*(Ee.height-Ee.offset),Va=Z?ba*(Ve.height-Ve.offset):$a*Ve.width+ba*Ve.offset):(Ta=Ee.width/2,Va=Ve.width/2),a.paddingLeft=Math.max((Ta-Sa)*a.width/(a.width-Sa),0)+3,a.paddingRight=Math.max((Va-Ra)*a.width/(a.width-Ra),0)+3}else{var La=A.mirror?0:We.width+ji+ws;l.width=Math.min(a.maxWidth,l.width+La),a.paddingTop=Ee.height/2,a.paddingBottom=Ve.height/2}}a.handleMargins(),ne?(a.width=a._length=p.width-a.margins.left-a.margins.right,a.height=l.height):(a.width=l.width,a.height=a._length=p.height-a.margins.top-a.margins.bottom)},handleMargins:function(){var a=this;a.margins&&(a.margins.left=Math.max(a.paddingLeft,a.margins.left),a.margins.top=Math.max(a.paddingTop,a.margins.top),a.margins.right=Math.max(a.paddingRight,a.margins.right),a.margins.bottom=Math.max(a.paddingBottom,a.margins.bottom))},afterFit:function(){be.callback(this.options.afterFit,[this])},isHorizontal:function(){var a=this.options.position;return a==="top"||a==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(a){if(Xh(a))return NaN;if((typeof a=="number"||a instanceof Number)&&!isFinite(a))return NaN;if(a){if(this.isHorizontal()){if(a.x!==void 0)return this.getRightValue(a.x)}else if(a.y!==void 0)return this.getRightValue(a.y)}return a},_convertTicksToLabels:function(a){var l=this,p,v,A;for(l.ticks=a.map(function(H){return H.value}),l.beforeTickToLabelConversion(),p=l.convertTicksToLabels(a)||l.ticks,l.afterTickToLabelConversion(),v=0,A=a.length;v<A;++v)a[v].label=p[v];return p},_getLabelSizes:function(){var a=this,l=a._labelSizes;return l||(a._labelSizes=l=Zg(a.ctx,Np(a.options.ticks),a.getTicks(),a.longestTextCache),a.longestLabelWidth=l.widest.width),l},_parseValue:function(a){var l,p,v,A;return Mh(a)?(l=+this.getRightValue(a[0]),p=+this.getRightValue(a[1]),v=Math.min(l,p),A=Math.max(l,p)):(a=+this.getRightValue(a),l=void 0,p=a,v=a,A=a),{min:v,max:A,start:l,end:p}},_getScaleLabel:function(a){var l=this._parseValue(a);return l.start!==void 0?"["+l.start+", "+l.end+"]":+this.getRightValue(a)},getLabelForIndex:be.noop,getPixelForValue:be.noop,getValueForPixel:be.noop,getPixelForTick:function(a){var l=this,p=l.options.offset,v=l._ticks.length,A=1/Math.max(v-(p?0:1),1);return a<0||a>v-1?null:l.getPixelForDecimal(a*A+(p?A/2:0))},getPixelForDecimal:function(a){var l=this;return l._reversePixels&&(a=1-a),l._startPixel+a*l._length},getDecimalForPixel:function(a){var l=(a-this._startPixel)/this._length;return this._reversePixels?1-l:l},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var a=this,l=a.min,p=a.max;return a.beginAtZero?0:l<0&&p<0?p:l>0&&p>0?l:0},_autoSkip:function(a){var l=this,p=l.options.ticks,v=l._length,A=p.maxTicksLimit||v/l._tickSize()+1,H=p.major.enabled?ry(a):[],Q=H.length,ee=H[0],Z=H[Q-1],ne,ae,pe,Ee;if(Q>A)return ny(a,H,Q/A),qp(a);if(pe=ty(H,a,v,A),Q>0){for(ne=0,ae=Q-1;ne<ae;ne++)up(a,pe,H[ne],H[ne+1]);return Ee=Q>1?(Z-ee)/(Q-1):null,up(a,pe,be.isNullOrUndef(Ee)?0:ee-Ee,ee),up(a,pe,Z,be.isNullOrUndef(Ee)?a.length:Z+Ee),qp(a)}return up(a,pe),qp(a)},_tickSize:function(){var a=this,l=a.options.ticks,p=be.toRadians(a.labelRotation),v=Math.abs(Math.cos(p)),A=Math.abs(Math.sin(p)),H=a._getLabelSizes(),Q=l.autoSkipPadding||0,ee=H?H.widest.width+Q:0,Z=H?H.highest.height+Q:0;return a.isHorizontal()?Z*v>ee*A?ee/v:Z/A:Z*A<ee*v?Z/v:ee/A},_isVisible:function(){var a=this,l=a.chart,p=a.options.display,v,A,H;if(p!=="auto")return!!p;for(v=0,A=l.data.datasets.length;v<A;++v)if(l.isDatasetVisible(v)&&(H=l.getDatasetMeta(v),H.xAxisID===a.id||H.yAxisID===a.id))return!0;return!1},_computeGridLineItems:function(a){var l=this,p=l.chart,v=l.options,A=v.gridLines,H=v.position,Q=A.offsetGridLines,ee=l.isHorizontal(),Z=l._ticksToDraw,ne=Z.length+(Q?1:0),ae=Zh(A),pe=[],Ee=A.drawBorder?Dh(A.lineWidth,0,0):0,Ve=Ee/2,We=be._alignPixel,at=function(r0){return We(p,r0,Ee)},ws,ji,ma,ga,$a,ba,Ma,Sa,Ra,Ta,Va,La,Da,za,Lh,Fh,Bp;for(H==="top"?(ws=at(l.bottom),Ma=l.bottom-ae,Ra=ws-Ve,Va=at(a.top)+Ve,Da=a.bottom):H==="bottom"?(ws=at(l.top),Va=a.top,Da=at(a.bottom)-Ve,Ma=ws+Ve,Ra=l.top+ae):H==="left"?(ws=at(l.right),ba=l.right-ae,Sa=ws-Ve,Ta=at(a.left)+Ve,La=a.right):(ws=at(l.left),Ta=a.left,La=at(a.right)-Ve,ba=ws+Ve,Sa=l.left+ae),ji=0;ji<ne;++ji)ma=Z[ji]||{},!(Xh(ma.label)&&ji<Z.length)&&(ji===l.zeroLineIndex&&v.offset===Q?(za=A.zeroLineWidth,Lh=A.zeroLineColor,Fh=A.zeroLineBorderDash||[],Bp=A.zeroLineBorderDashOffset||0):(za=Dh(A.lineWidth,ji,1),Lh=Dh(A.color,ji,"rgba(0,0,0,0.1)"),Fh=A.borderDash||[],Bp=A.borderDashOffset||0),ga=Qg(l,ma._index||ji,Q),ga!==void 0&&($a=We(p,ga,za),ee?ba=Sa=Ta=La=$a:Ma=Ra=Va=Da=$a,pe.push({tx1:ba,ty1:Ma,tx2:Sa,ty2:Ra,x1:Ta,y1:Va,x2:La,y2:Da,width:za,color:Lh,borderDash:Fh,borderDashOffset:Bp})));return pe.ticksLength=ne,pe.borderValue=ws,pe},_computeLabelItems:function(){var a=this,l=a.options,p=l.ticks,v=l.position,A=p.mirror,H=a.isHorizontal(),Q=a._ticksToDraw,ee=Np(p),Z=p.padding,ne=Zh(l.gridLines),ae=-be.toRadians(a.labelRotation),pe=[],Ee,Ve,We,at,ws,ji,ma,ga,$a,ba,Ma,Sa;for(v==="top"?(ji=a.bottom-ne-Z,ma=ae?"left":"center"):v==="bottom"?(ji=a.top+ne+Z,ma=ae?"right":"center"):v==="left"?(ws=a.right-(A?0:ne)-Z,ma=A?"left":"right"):(ws=a.left+(A?0:ne)+Z,ma=A?"right":"left"),Ee=0,Ve=Q.length;Ee<Ve;++Ee)We=Q[Ee],at=We.label,!Xh(at)&&(ga=a.getPixelForTick(We._index||Ee)+p.labelOffset,$a=We.major?ee.major:ee.minor,ba=$a.lineHeight,Ma=Mh(at)?at.length:1,H?(ws=ga,Sa=v==="top"?((ae?1:.5)-Ma)*ba:(ae?0:.5)*ba):(ji=ga,Sa=(1-Ma)*ba/2),pe.push({x:ws,y:ji,rotation:ae,label:at,font:$a,textOffset:Sa,textAlign:ma}));return pe},_drawGrid:function(a){var l=this,p=l.options.gridLines;if(p.display){var v=l.ctx,A=l.chart,H=be._alignPixel,Q=p.drawBorder?Dh(p.lineWidth,0,0):0,ee=l._gridLineItems||(l._gridLineItems=l._computeGridLineItems(a)),Z,ne,ae,pe,Ee;for(ae=0,pe=ee.length;ae<pe;++ae)Ee=ee[ae],Z=Ee.width,ne=Ee.color,Z&&ne&&(v.save(),v.lineWidth=Z,v.strokeStyle=ne,v.setLineDash&&(v.setLineDash(Ee.borderDash),v.lineDashOffset=Ee.borderDashOffset),v.beginPath(),p.drawTicks&&(v.moveTo(Ee.tx1,Ee.ty1),v.lineTo(Ee.tx2,Ee.ty2)),p.drawOnChartArea&&(v.moveTo(Ee.x1,Ee.y1),v.lineTo(Ee.x2,Ee.y2)),v.stroke(),v.restore());if(Q){var Ve=Q,We=Dh(p.lineWidth,ee.ticksLength-1,1),at=ee.borderValue,ws,ji,ma,ga;l.isHorizontal()?(ws=H(A,l.left,Ve)-Ve/2,ji=H(A,l.right,We)+We/2,ma=ga=at):(ma=H(A,l.top,Ve)-Ve/2,ga=H(A,l.bottom,We)+We/2,ws=ji=at),v.lineWidth=Q,v.strokeStyle=Dh(p.color,0),v.beginPath(),v.moveTo(ws,ma),v.lineTo(ji,ga),v.stroke()}}},_drawLabels:function(){var a=this,l=a.options.ticks;if(l.display){var p=a.ctx,v=a._labelItems||(a._labelItems=a._computeLabelItems()),A,H,Q,ee,Z,ne,ae,pe;for(A=0,Q=v.length;A<Q;++A){if(Z=v[A],ne=Z.font,p.save(),p.translate(Z.x,Z.y),p.rotate(Z.rotation),p.font=ne.string,p.fillStyle=ne.color,p.textBaseline="middle",p.textAlign=Z.textAlign,ae=Z.label,pe=Z.textOffset,Mh(ae))for(H=0,ee=ae.length;H<ee;++H)p.fillText(""+ae[H],0,pe),pe+=ne.lineHeight;else p.fillText(ae,0,pe);p.restore()}}},_drawTitle:function(){var a=this,l=a.ctx,p=a.options,v=p.scaleLabel;if(v.display){var A=Rh(v.fontColor,Os.global.defaultFontColor),H=be.options._parseFont(v),Q=be.options.toPadding(v.padding),ee=H.lineHeight/2,Z=p.position,ne=0,ae,pe;if(a.isHorizontal())ae=a.left+a.width/2,pe=Z==="bottom"?a.bottom-ee-Q.bottom:a.top+ee+Q.top;else{var Ee=Z==="left";ae=Ee?a.left+ee+Q.top:a.right-ee-Q.top,pe=a.top+a.height/2,ne=Ee?-.5*Math.PI:.5*Math.PI}l.save(),l.translate(ae,pe),l.rotate(ne),l.textAlign="center",l.textBaseline="middle",l.fillStyle=A,l.font=H.string,l.fillText(v.labelString,0,0),l.restore()}},draw:function(a){var l=this;l._isVisible()&&(l._drawGrid(a),l._drawTitle(),l._drawLabels())},_layers:function(){var a=this,l=a.options,p=l.ticks&&l.ticks.z||0,v=l.gridLines&&l.gridLines.z||0;return!a._isVisible()||p===v||a.draw!==a._draw?[{z:p,draw:function(){a.draw.apply(a,arguments)}}]:[{z:v,draw:function(){a._drawGrid.apply(a,arguments),a._drawTitle.apply(a,arguments)}},{z:p,draw:function(){a._drawLabels.apply(a,arguments)}}]},_getMatchingVisibleMetas:function(a){var l=this,p=l.isHorizontal();return l.chart._getSortedVisibleDatasetMetas().filter(function(v){return(!a||v.type===a)&&(p?v.xAxisID===l.id:v.yAxisID===l.id)})}});Dp.prototype._draw=Dp.prototype.draw;var nh=Dp,Ap=be.isNullOrUndef,sy={position:"bottom"},$m=nh.extend({determineDataLimits:function(){var a=this,l=a._getLabels(),p=a.options.ticks,v=p.min,A=p.max,H=0,Q=l.length-1,ee;v!==void 0&&(ee=l.indexOf(v),ee>=0&&(H=ee)),A!==void 0&&(ee=l.indexOf(A),ee>=0&&(Q=ee)),a.minIndex=H,a.maxIndex=Q,a.min=l[H],a.max=l[Q]},buildTicks:function(){var a=this,l=a._getLabels(),p=a.minIndex,v=a.maxIndex;a.ticks=p===0&&v===l.length-1?l:l.slice(p,v+1)},getLabelForIndex:function(a,l){var p=this,v=p.chart;return v.getDatasetMeta(l).controller._getValueScaleId()===p.id?p.getRightValue(v.data.datasets[l].data[a]):p._getLabels()[a]},_configure:function(){var a=this,l=a.options.offset,p=a.ticks;nh.prototype._configure.call(a),a.isHorizontal()||(a._reversePixels=!a._reversePixels),p&&(a._startValue=a.minIndex-(l?.5:0),a._valueRange=Math.max(p.length-(l?0:1),1))},getPixelForValue:function(a,l,p){var v=this,A,H,Q;return!Ap(l)&&!Ap(p)&&(a=v.chart.data.datasets[p].data[l]),Ap(a)||(A=v.isHorizontal()?a.x:a.y),(A!==void 0||a!==void 0&&isNaN(l))&&(H=v._getLabels(),a=be.valueOrDefault(A,a),Q=H.indexOf(a),l=Q!==-1?Q:l,isNaN(l)&&(l=a)),v.getPixelForDecimal((l-v._startValue)/v._valueRange)},getPixelForTick:function(a){var l=this.ticks;return a<0||a>l.length-1?null:this.getPixelForValue(l[a],a+this.minIndex)},getValueForPixel:function(a){var l=this,p=Math.round(l._startValue+l.getDecimalForPixel(a)*l._valueRange);return Math.min(Math.max(p,0),l.ticks.length-1)},getBasePixel:function(){return this.bottom}}),iy=sy;$m._defaults=iy;var ay=be.noop,Ih=be.isNullOrUndef;function oy(a,l){var p=[],v=1e-14,A=a.stepSize,H=A||1,Q=a.maxTicks-1,ee=a.min,Z=a.max,ne=a.precision,ae=l.min,pe=l.max,Ee=be.niceNum((pe-ae)/Q/H)*H,Ve,We,at,ws;if(Ee<v&&Ih(ee)&&Ih(Z))return[ae,pe];ws=Math.ceil(pe/Ee)-Math.floor(ae/Ee),ws>Q&&(Ee=be.niceNum(ws*Ee/Q/H)*H),A||Ih(ne)?Ve=Math.pow(10,be._decimalPlaces(Ee)):(Ve=Math.pow(10,ne),Ee=Math.ceil(Ee*Ve)/Ve),We=Math.floor(ae/Ee)*Ee,at=Math.ceil(pe/Ee)*Ee,A&&(!Ih(ee)&&be.almostWhole(ee/Ee,Ee/1e3)&&(We=ee),!Ih(Z)&&be.almostWhole(Z/Ee,Ee/1e3)&&(at=Z)),ws=(at-We)/Ee,be.almostEquals(ws,Math.round(ws),Ee/1e3)?ws=Math.round(ws):ws=Math.ceil(ws),We=Math.round(We*Ve)/Ve,at=Math.round(at*Ve)/Ve,p.push(Ih(ee)?We:ee);for(var ji=1;ji<ws;++ji)p.push(Math.round((We+ji*Ee)*Ve)/Ve);return p.push(Ih(Z)?at:Z),p}var cp=nh.extend({getRightValue:function(a){return typeof a=="string"?+a:nh.prototype.getRightValue.call(this,a)},handleTickRangeOptions:function(){var a=this,l=a.options,p=l.ticks;if(p.beginAtZero){var v=be.sign(a.min),A=be.sign(a.max);v<0&&A<0?a.max=0:v>0&&A>0&&(a.min=0)}var H=p.min!==void 0||p.suggestedMin!==void 0,Q=p.max!==void 0||p.suggestedMax!==void 0;p.min!==void 0?a.min=p.min:p.suggestedMin!==void 0&&(a.min===null?a.min=p.suggestedMin:a.min=Math.min(a.min,p.suggestedMin)),p.max!==void 0?a.max=p.max:p.suggestedMax!==void 0&&(a.max===null?a.max=p.suggestedMax:a.max=Math.max(a.max,p.suggestedMax)),H!==Q&&a.min>=a.max&&(H?a.max=a.min+1:a.min=a.max-1),a.min===a.max&&(a.max++,p.beginAtZero||a.min--)},getTickLimit:function(){var a=this,l=a.options.ticks,p=l.stepSize,v=l.maxTicksLimit,A;return p?A=Math.ceil(a.max/p)-Math.floor(a.min/p)+1:(A=a._computeTickLimit(),v=v||11),v&&(A=Math.min(v,A)),A},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ay,buildTicks:function(){var a=this,l=a.options,p=l.ticks,v=a.getTickLimit();v=Math.max(2,v);var A={maxTicks:v,min:p.min,max:p.max,precision:p.precision,stepSize:be.valueOrDefault(p.fixedStepSize,p.stepSize)},H=a.ticks=oy(A,a);a.handleDirectionalChanges(),a.max=be.max(H),a.min=be.min(H),p.reverse?(H.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){var a=this;a.ticksAsNumbers=a.ticks.slice(),a.zeroLineIndex=a.ticks.indexOf(0),nh.prototype.convertTicksToLabels.call(a)},_configure:function(){var a=this,l=a.getTicks(),p=a.min,v=a.max,A;nh.prototype._configure.call(a),a.options.offset&&l.length&&(A=(v-p)/Math.max(l.length-1,1)/2,p-=A,v+=A),a._startValue=p,a._endValue=v,a._valueRange=v-p}}),ly={position:"left",ticks:{callback:Qh.formatters.linear}},uy=0,cy=1;function dy(a,l,p){var v=[p.type,l===void 0&&p.stack===void 0?p.index:"",p.stack].join(".");return a[v]===void 0&&(a[v]={pos:[],neg:[]}),a[v]}function fy(a,l,p,v){var A=a.options,H=A.stacked,Q=dy(l,H,p),ee=Q.pos,Z=Q.neg,ne=v.length,ae,pe;for(ae=0;ae<ne;++ae)pe=a._parseValue(v[ae]),!(isNaN(pe.min)||isNaN(pe.max)||p.data[ae].hidden)&&(ee[ae]=ee[ae]||0,Z[ae]=Z[ae]||0,A.relativePoints?ee[ae]=100:pe.min<0||pe.max<0?Z[ae]+=pe.min:ee[ae]+=pe.max)}function hy(a,l,p){var v=p.length,A,H;for(A=0;A<v;++A)H=a._parseValue(p[A]),!(isNaN(H.min)||isNaN(H.max)||l.data[A].hidden)&&(a.min=Math.min(a.min,H.min),a.max=Math.max(a.max,H.max))}var _m=cp.extend({determineDataLimits:function(){var a=this,l=a.options,p=a.chart,v=p.data.datasets,A=a._getMatchingVisibleMetas(),H=l.stacked,Q={},ee=A.length,Z,ne,ae,pe;if(a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,H===void 0)for(Z=0;!H&&Z<ee;++Z)ne=A[Z],H=ne.stack!==void 0;for(Z=0;Z<ee;++Z)ne=A[Z],ae=v[ne.index].data,H?fy(a,Q,ne,ae):hy(a,ne,ae);be.each(Q,function(Ee){pe=Ee.pos.concat(Ee.neg),a.min=Math.min(a.min,be.min(pe)),a.max=Math.max(a.max,be.max(pe))}),a.min=be.isFinite(a.min)&&!isNaN(a.min)?a.min:uy,a.max=be.isFinite(a.max)&&!isNaN(a.max)?a.max:cy,a.handleTickRangeOptions()},_computeTickLimit:function(){var a=this,l;return a.isHorizontal()?Math.ceil(a.width/40):(l=be.options._parseFont(a.options.ticks),Math.ceil(a.height/l.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(a,l){return this._getScaleLabel(this.chart.data.datasets[l].data[a])},getPixelForValue:function(a){var l=this;return l.getPixelForDecimal((+l.getRightValue(a)-l._startValue)/l._valueRange)},getValueForPixel:function(a){return this._startValue+this.getDecimalForPixel(a)*this._valueRange},getPixelForTick:function(a){var l=this.ticksAsNumbers;return a<0||a>l.length-1?null:this.getPixelForValue(l[a])}}),py=ly;_m._defaults=py;var Lp=be.valueOrDefault,sh=be.math.log10;function my(a,l){var p=[],v=Lp(a.min,Math.pow(10,Math.floor(sh(l.min)))),A=Math.floor(sh(l.max)),H=Math.ceil(l.max/Math.pow(10,A)),Q,ee;v===0?(Q=Math.floor(sh(l.minNotZero)),ee=Math.floor(l.minNotZero/Math.pow(10,Q)),p.push(v),v=ee*Math.pow(10,Q)):(Q=Math.floor(sh(v)),ee=Math.floor(v/Math.pow(10,Q)));var Z=Q<0?Math.pow(10,Math.abs(Q)):1;do p.push(v),++ee,ee===10&&(ee=1,++Q,Z=Q>=0?1:Z),v=Math.round(ee*Math.pow(10,Q)*Z)/Z;while(Q<A||Q===A&&ee<H);var ne=Lp(a.max,v);return p.push(ne),p}var vy={position:"left",ticks:{callback:Qh.formatters.logarithmic}};function dp(a,l){return be.isFinite(a)&&a>=0?a:l}var wm=nh.extend({determineDataLimits:function(){var a=this,l=a.options,p=a.chart,v=p.data.datasets,A=a.isHorizontal();function H(ws){return A?ws.xAxisID===a.id:ws.yAxisID===a.id}var Q,ee,Z,ne,ae,pe;a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,a.minNotZero=Number.POSITIVE_INFINITY;var Ee=l.stacked;if(Ee===void 0){for(Q=0;Q<v.length;Q++)if(ee=p.getDatasetMeta(Q),p.isDatasetVisible(Q)&&H(ee)&&ee.stack!==void 0){Ee=!0;break}}if(l.stacked||Ee){var Ve={};for(Q=0;Q<v.length;Q++){ee=p.getDatasetMeta(Q);var We=[ee.type,l.stacked===void 0&&ee.stack===void 0?Q:"",ee.stack].join(".");if(p.isDatasetVisible(Q)&&H(ee))for(Ve[We]===void 0&&(Ve[We]=[]),ne=v[Q].data,ae=0,pe=ne.length;ae<pe;ae++){var at=Ve[We];Z=a._parseValue(ne[ae]),!(isNaN(Z.min)||isNaN(Z.max)||ee.data[ae].hidden||Z.min<0||Z.max<0)&&(at[ae]=at[ae]||0,at[ae]+=Z.max)}}be.each(Ve,function(ws){if(ws.length>0){var ji=be.min(ws),ma=be.max(ws);a.min=Math.min(a.min,ji),a.max=Math.max(a.max,ma)}})}else for(Q=0;Q<v.length;Q++)if(ee=p.getDatasetMeta(Q),p.isDatasetVisible(Q)&&H(ee))for(ne=v[Q].data,ae=0,pe=ne.length;ae<pe;ae++)Z=a._parseValue(ne[ae]),!(isNaN(Z.min)||isNaN(Z.max)||ee.data[ae].hidden||Z.min<0||Z.max<0)&&(a.min=Math.min(Z.min,a.min),a.max=Math.max(Z.max,a.max),Z.min!==0&&(a.minNotZero=Math.min(Z.min,a.minNotZero)));a.min=be.isFinite(a.min)?a.min:null,a.max=be.isFinite(a.max)?a.max:null,a.minNotZero=be.isFinite(a.minNotZero)?a.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var a=this,l=a.options.ticks,p=1,v=10;a.min=dp(l.min,a.min),a.max=dp(l.max,a.max),a.min===a.max&&(a.min!==0&&a.min!==null?(a.min=Math.pow(10,Math.floor(sh(a.min))-1),a.max=Math.pow(10,Math.floor(sh(a.max))+1)):(a.min=p,a.max=v)),a.min===null&&(a.min=Math.pow(10,Math.floor(sh(a.max))-1)),a.max===null&&(a.max=a.min!==0?Math.pow(10,Math.floor(sh(a.min))+1):v),a.minNotZero===null&&(a.min>0?a.minNotZero=a.min:a.max<1?a.minNotZero=Math.pow(10,Math.floor(sh(a.max))):a.minNotZero=p)},buildTicks:function(){var a=this,l=a.options.ticks,p=!a.isHorizontal(),v={min:dp(l.min),max:dp(l.max)},A=a.ticks=my(v,a);a.max=be.max(A),a.min=be.min(A),l.reverse?(p=!p,a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max),p&&A.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),nh.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(a,l){return this._getScaleLabel(this.chart.data.datasets[l].data[a])},getPixelForTick:function(a){var l=this.tickValues;return a<0||a>l.length-1?null:this.getPixelForValue(l[a])},_getFirstTickValue:function(a){var l=Math.floor(sh(a)),p=Math.floor(a/Math.pow(10,l));return p*Math.pow(10,l)},_configure:function(){var a=this,l=a.min,p=0;nh.prototype._configure.call(a),l===0&&(l=a._getFirstTickValue(a.minNotZero),p=Lp(a.options.ticks.fontSize,Os.global.defaultFontSize)/a._length),a._startValue=sh(l),a._valueOffset=p,a._valueRange=(sh(a.max)-sh(l))/(1-p)},getPixelForValue:function(a){var l=this,p=0;return a=+l.getRightValue(a),a>l.min&&a>0&&(p=(sh(a)-l._startValue)/l._valueRange+l._valueOffset),l.getPixelForDecimal(p)},getValueForPixel:function(a){var l=this,p=l.getDecimalForPixel(a);return p===0&&l.min===0?0:Math.pow(10,l._startValue+(p-l._valueOffset)*l._valueRange)}}),gy=vy;wm._defaults=gy;var fp=be.valueOrDefault,Fp=be.valueAtIndexOrDefault,km=be.options.resolve,yy={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Qh.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(a){return a}}};function jp(a){var l=a.ticks;return l.display&&a.display?fp(l.fontSize,Os.global.defaultFontSize)+l.backdropPaddingY*2:0}function by(a,l,p){return be.isArray(p)?{w:be.longestText(a,a.font,p),h:p.length*l}:{w:a.measureText(p).width,h:l}}function Sm(a,l,p,v,A){return a===v||a===A?{start:l-p/2,end:l+p/2}:a<v||a>A?{start:l-p,end:l}:{start:l,end:l+p}}function $y(a){var l=be.options._parseFont(a.options.pointLabels),p={l:0,r:a.width,t:0,b:a.height-a.paddingTop},v={},A,H,Q;a.ctx.font=l.string,a._pointLabelSizes=[];var ee=a.chart.data.labels.length;for(A=0;A<ee;A++){Q=a.getPointPosition(A,a.drawingArea+5),H=by(a.ctx,l.lineHeight,a.pointLabels[A]),a._pointLabelSizes[A]=H;var Z=a.getIndexAngle(A),ne=be.toDegrees(Z)%360,ae=Sm(ne,Q.x,H.w,0,180),pe=Sm(ne,Q.y,H.h,90,270);ae.start<p.l&&(p.l=ae.start,v.l=Z),ae.end>p.r&&(p.r=ae.end,v.r=Z),pe.start<p.t&&(p.t=pe.start,v.t=Z),pe.end>p.b&&(p.b=pe.end,v.b=Z)}a.setReductions(a.drawingArea,p,v)}function _y(a){return a===0||a===180?"center":a<180?"left":"right"}function wy(a,l,p,v){var A=p.y+v/2,H,Q;if(be.isArray(l))for(H=0,Q=l.length;H<Q;++H)a.fillText(l[H],p.x,A),A+=v;else a.fillText(l,p.x,A)}function ky(a,l,p){a===90||a===270?p.y-=l.h/2:(a>270||a<90)&&(p.y-=l.h)}function Sy(a){var l=a.ctx,p=a.options,v=p.pointLabels,A=jp(p),H=a.getDistanceFromCenterForValue(p.ticks.reverse?a.min:a.max),Q=be.options._parseFont(v);l.save(),l.font=Q.string,l.textBaseline="middle";for(var ee=a.chart.data.labels.length-1;ee>=0;ee--){var Z=ee===0?A/2:0,ne=a.getPointPosition(ee,H+Z+5),ae=Fp(v.fontColor,ee,Os.global.defaultFontColor);l.fillStyle=ae;var pe=a.getIndexAngle(ee),Ee=be.toDegrees(pe);l.textAlign=_y(Ee),ky(Ee,a._pointLabelSizes[ee],ne),wy(l,a.pointLabels[ee],ne,Q.lineHeight)}l.restore()}function xy(a,l,p,v){var A=a.ctx,H=l.circular,Q=a.chart.data.labels.length,ee=Fp(l.color,v-1),Z=Fp(l.lineWidth,v-1),ne;if(!(!H&&!Q||!ee||!Z)){if(A.save(),A.strokeStyle=ee,A.lineWidth=Z,A.setLineDash&&(A.setLineDash(l.borderDash||[]),A.lineDashOffset=l.borderDashOffset||0),A.beginPath(),H)A.arc(a.xCenter,a.yCenter,p,0,Math.PI*2);else{ne=a.getPointPosition(0,p),A.moveTo(ne.x,ne.y);for(var ae=1;ae<Q;ae++)ne=a.getPointPosition(ae,p),A.lineTo(ne.x,ne.y)}A.closePath(),A.stroke(),A.restore()}}function hp(a){return be.isNumber(a)?a:0}var xm=cp.extend({setDimensions:function(){var a=this;a.width=a.maxWidth,a.height=a.maxHeight,a.paddingTop=jp(a.options)/2,a.xCenter=Math.floor(a.width/2),a.yCenter=Math.floor((a.height-a.paddingTop)/2),a.drawingArea=Math.min(a.height-a.paddingTop,a.width)/2},determineDataLimits:function(){var a=this,l=a.chart,p=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY;be.each(l.data.datasets,function(A,H){if(l.isDatasetVisible(H)){var Q=l.getDatasetMeta(H);be.each(A.data,function(ee,Z){var ne=+a.getRightValue(ee);isNaN(ne)||Q.data[Z].hidden||(p=Math.min(ne,p),v=Math.max(ne,v))})}}),a.min=p===Number.POSITIVE_INFINITY?0:p,a.max=v===Number.NEGATIVE_INFINITY?0:v,a.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/jp(this.options))},convertTicksToLabels:function(){var a=this;cp.prototype.convertTicksToLabels.call(a),a.pointLabels=a.chart.data.labels.map(function(){var l=be.callback(a.options.pointLabels.callback,arguments,a);return l||l===0?l:""})},getLabelForIndex:function(a,l){return+this.getRightValue(this.chart.data.datasets[l].data[a])},fit:function(){var a=this,l=a.options;l.display&&l.pointLabels.display?$y(a):a.setCenterPoint(0,0,0,0)},setReductions:function(a,l,p){var v=this,A=l.l/Math.sin(p.l),H=Math.max(l.r-v.width,0)/Math.sin(p.r),Q=-l.t/Math.cos(p.t),ee=-Math.max(l.b-(v.height-v.paddingTop),0)/Math.cos(p.b);A=hp(A),H=hp(H),Q=hp(Q),ee=hp(ee),v.drawingArea=Math.min(Math.floor(a-(A+H)/2),Math.floor(a-(Q+ee)/2)),v.setCenterPoint(A,H,Q,ee)},setCenterPoint:function(a,l,p,v){var A=this,H=A.width-l-A.drawingArea,Q=a+A.drawingArea,ee=p+A.drawingArea,Z=A.height-A.paddingTop-v-A.drawingArea;A.xCenter=Math.floor((Q+H)/2+A.left),A.yCenter=Math.floor((ee+Z)/2+A.top+A.paddingTop)},getIndexAngle:function(a){var l=this.chart,p=360/l.data.labels.length,v=l.options||{},A=v.startAngle||0,H=(a*p+A)%360;return(H<0?H+360:H)*Math.PI*2/360},getDistanceFromCenterForValue:function(a){var l=this;if(be.isNullOrUndef(a))return NaN;var p=l.drawingArea/(l.max-l.min);return l.options.ticks.reverse?(l.max-a)*p:(a-l.min)*p},getPointPosition:function(a,l){var p=this,v=p.getIndexAngle(a)-Math.PI/2;return{x:Math.cos(v)*l+p.xCenter,y:Math.sin(v)*l+p.yCenter}},getPointPositionForValue:function(a,l){return this.getPointPosition(a,this.getDistanceFromCenterForValue(l))},getBasePosition:function(a){var l=this,p=l.min,v=l.max;return l.getPointPositionForValue(a||0,l.beginAtZero?0:p<0&&v<0?v:p>0&&v>0?p:0)},_drawGrid:function(){var a=this,l=a.ctx,p=a.options,v=p.gridLines,A=p.angleLines,H=fp(A.lineWidth,v.lineWidth),Q=fp(A.color,v.color),ee,Z,ne;if(p.pointLabels.display&&Sy(a),v.display&&be.each(a.ticks,function(ae,pe){pe!==0&&(Z=a.getDistanceFromCenterForValue(a.ticksAsNumbers[pe]),xy(a,v,Z,pe))}),A.display&&H&&Q){for(l.save(),l.lineWidth=H,l.strokeStyle=Q,l.setLineDash&&(l.setLineDash(km([A.borderDash,v.borderDash,[]])),l.lineDashOffset=km([A.borderDashOffset,v.borderDashOffset,0])),ee=a.chart.data.labels.length-1;ee>=0;ee--)Z=a.getDistanceFromCenterForValue(p.ticks.reverse?a.min:a.max),ne=a.getPointPosition(ee,Z),l.beginPath(),l.moveTo(a.xCenter,a.yCenter),l.lineTo(ne.x,ne.y),l.stroke();l.restore()}},_drawLabels:function(){var a=this,l=a.ctx,p=a.options,v=p.ticks;if(v.display){var A=a.getIndexAngle(0),H=be.options._parseFont(v),Q=fp(v.fontColor,Os.global.defaultFontColor),ee,Z;l.save(),l.font=H.string,l.translate(a.xCenter,a.yCenter),l.rotate(A),l.textAlign="center",l.textBaseline="middle",be.each(a.ticks,function(ne,ae){ae===0&&!v.reverse||(ee=a.getDistanceFromCenterForValue(a.ticksAsNumbers[ae]),v.showLabelBackdrop&&(Z=l.measureText(ne).width,l.fillStyle=v.backdropColor,l.fillRect(-Z/2-v.backdropPaddingX,-ee-H.size/2-v.backdropPaddingY,Z+v.backdropPaddingX*2,H.size+v.backdropPaddingY*2)),l.fillStyle=Q,l.fillText(ne,0,-ee))}),l.restore()}},_drawTitle:be.noop}),Ey=yy;xm._defaults=Ey;var Vp=be._deprecated,Em=be.options.resolve,My=be.valueOrDefault,Mm=Number.MIN_SAFE_INTEGER||-9007199254740991,zp=Number.MAX_SAFE_INTEGER||9007199254740991,pp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ih=Object.keys(pp);function Rm(a,l){return a-l}function Ry(a){var l={},p=[],v,A,H;for(v=0,A=a.length;v<A;++v)H=a[v],l[H]||(l[H]=!0,p.push(H));return p}function Im(a){return be.valueOrDefault(a.time.min,a.ticks.min)}function Pm(a){return be.valueOrDefault(a.time.max,a.ticks.max)}function Iy(a,l,p,v){if(v==="linear"||!a.length)return[{time:l,pos:0},{time:p,pos:1}];var A=[],H=[l],Q,ee,Z,ne,ae;for(Q=0,ee=a.length;Q<ee;++Q)ne=a[Q],ne>l&&ne<p&&H.push(ne);for(H.push(p),Q=0,ee=H.length;Q<ee;++Q)ae=H[Q+1],Z=H[Q-1],ne=H[Q],(Z===void 0||ae===void 0||Math.round((ae+Z)/2)!==ne)&&A.push({time:ne,pos:Q/(ee-1)});return A}function Py(a,l,p){for(var v=0,A=a.length-1,H,Q,ee;v>=0&&v<=A;)if(H=v+A>>1,Q=a[H-1]||null,ee=a[H],Q)if(ee[l]<p)v=H+1;else if(Q[l]>p)A=H-1;else return{lo:Q,hi:ee};else return{lo:null,hi:ee};return{lo:ee,hi:null}}function Ah(a,l,p,v){var A=Py(a,l,p),H=A.lo?A.hi?A.lo:a[a.length-2]:a[0],Q=A.lo?A.hi?A.hi:a[a.length-1]:a[1],ee=Q[l]-H[l],Z=ee?(p-H[l])/ee:0,ne=(Q[v]-H[v])*Z;return H[v]+ne}function Up(a,l){var p=a._adapter,v=a.options.time,A=v.parser,H=A||v.format,Q=l;return typeof A=="function"&&(Q=A(Q)),be.isFinite(Q)||(Q=typeof H=="string"?p.parse(Q,H):p.parse(Q)),Q!==null?+Q:(!A&&typeof H=="function"&&(Q=H(l),be.isFinite(Q)||(Q=p.parse(Q))),Q)}function Ph(a,l){if(be.isNullOrUndef(l))return null;var p=a.options.time,v=Up(a,a.getRightValue(l));return v===null||p.round&&(v=+a._adapter.startOf(v,p.round)),v}function Tm(a,l,p,v){var A=ih.length,H,Q,ee;for(H=ih.indexOf(a);H<A-1;++H)if(Q=pp[ih[H]],ee=Q.steps?Q.steps:zp,Q.common&&Math.ceil((p-l)/(ee*Q.size))<=v)return ih[H];return ih[A-1]}function Ty(a,l,p,v,A){var H,Q;for(H=ih.length-1;H>=ih.indexOf(p);H--)if(Q=ih[H],pp[Q].common&&a._adapter.diff(A,v,Q)>=l-1)return Q;return ih[p?ih.indexOf(p):0]}function Oy(a){for(var l=ih.indexOf(a)+1,p=ih.length;l<p;++l)if(pp[ih[l]].common)return ih[l]}function Cy(a,l,p,v){var A=a._adapter,H=a.options,Q=H.time,ee=Q.unit||Tm(Q.minUnit,l,p,v),Z=Em([Q.stepSize,Q.unitStepSize,1]),ne=ee==="week"?Q.isoWeekday:!1,ae=l,pe=[],Ee;if(ne&&(ae=+A.startOf(ae,"isoWeek",ne)),ae=+A.startOf(ae,ne?"day":ee),A.diff(p,l,ee)>1e5*Z)throw l+" and "+p+" are too far apart with stepSize of "+Z+" "+ee;for(Ee=ae;Ee<p;Ee=+A.add(Ee,Z,ee))pe.push(Ee);return(Ee===p||H.bounds==="ticks")&&pe.push(Ee),pe}function Ny(a,l,p,v,A){var H=0,Q=0,ee,Z;return A.offset&&l.length&&(ee=Ah(a,"time",l[0],"pos"),l.length===1?H=1-ee:H=(Ah(a,"time",l[1],"pos")-ee)/2,Z=Ah(a,"time",l[l.length-1],"pos"),l.length===1?Q=Z:Q=(Z-Ah(a,"time",l[l.length-2],"pos"))/2),{start:H,end:Q,factor:1/(H+1+Q)}}function qy(a,l,p,v){var A=a._adapter,H=+A.startOf(l[0].value,v),Q=l[l.length-1].value,ee,Z;for(ee=H;ee<=Q;ee=+A.add(ee,1,v))Z=p[ee],Z>=0&&(l[Z].major=!0);return l}function Om(a,l,p){var v=[],A={},H=l.length,Q,ee;for(Q=0;Q<H;++Q)ee=l[Q],A[ee]=Q,v.push({value:ee,major:!1});return H===0||!p?v:qy(a,v,A,p)}var Dy={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Cm=nh.extend({initialize:function(){this.mergeTicksOptions(),nh.prototype.initialize.call(this)},update:function(){var a=this,l=a.options,p=l.time||(l.time={}),v=a._adapter=new Op._date(l.adapters.date);return Vp("time scale",p.format,"time.format","time.parser"),Vp("time scale",p.min,"time.min","ticks.min"),Vp("time scale",p.max,"time.max","ticks.max"),be.mergeIf(p.displayFormats,v.formats()),nh.prototype.update.apply(a,arguments)},getRightValue:function(a){return a&&a.t!==void 0&&(a=a.t),nh.prototype.getRightValue.call(this,a)},determineDataLimits:function(){var a=this,l=a.chart,p=a._adapter,v=a.options,A=v.time.unit||"day",H=zp,Q=Mm,ee=[],Z=[],ne=[],ae,pe,Ee,Ve,We,at,ws,ji=a._getLabels();for(ae=0,Ee=ji.length;ae<Ee;++ae)ne.push(Ph(a,ji[ae]));for(ae=0,Ee=(l.data.datasets||[]).length;ae<Ee;++ae)if(l.isDatasetVisible(ae))if(We=l.data.datasets[ae].data,be.isObject(We[0]))for(Z[ae]=[],pe=0,Ve=We.length;pe<Ve;++pe)at=Ph(a,We[pe]),ee.push(at),Z[ae][pe]=at;else Z[ae]=ne.slice(0),ws||(ee=ee.concat(ne),ws=!0);else Z[ae]=[];ne.length&&(H=Math.min(H,ne[0]),Q=Math.max(Q,ne[ne.length-1])),ee.length&&(ee=Ee>1?Ry(ee).sort(Rm):ee.sort(Rm),H=Math.min(H,ee[0]),Q=Math.max(Q,ee[ee.length-1])),H=Ph(a,Im(v))||H,Q=Ph(a,Pm(v))||Q,H=H===zp?+p.startOf(Date.now(),A):H,Q=Q===Mm?+p.endOf(Date.now(),A)+1:Q,a.min=Math.min(H,Q),a.max=Math.max(H+1,Q),a._table=[],a._timestamps={data:ee,datasets:Z,labels:ne}},buildTicks:function(){var a=this,l=a.min,p=a.max,v=a.options,A=v.ticks,H=v.time,Q=a._timestamps,ee=[],Z=a.getLabelCapacity(l),ne=A.source,ae=v.distribution,pe,Ee,Ve;for(ne==="data"||ne==="auto"&&ae==="series"?Q=Q.data:ne==="labels"?Q=Q.labels:Q=Cy(a,l,p,Z),v.bounds==="ticks"&&Q.length&&(l=Q[0],p=Q[Q.length-1]),l=Ph(a,Im(v))||l,p=Ph(a,Pm(v))||p,pe=0,Ee=Q.length;pe<Ee;++pe)Ve=Q[pe],Ve>=l&&Ve<=p&&ee.push(Ve);return a.min=l,a.max=p,a._unit=H.unit||(A.autoSkip?Tm(H.minUnit,a.min,a.max,Z):Ty(a,ee.length,H.minUnit,a.min,a.max)),a._majorUnit=!A.major.enabled||a._unit==="year"?void 0:Oy(a._unit),a._table=Iy(a._timestamps.data,l,p,ae),a._offsets=Ny(a._table,ee,l,p,v),A.reverse&&ee.reverse(),Om(a,ee,a._majorUnit)},getLabelForIndex:function(a,l){var p=this,v=p._adapter,A=p.chart.data,H=p.options.time,Q=A.labels&&a<A.labels.length?A.labels[a]:"",ee=A.datasets[l].data[a];return be.isObject(ee)&&(Q=p.getRightValue(ee)),H.tooltipFormat?v.format(Up(p,Q),H.tooltipFormat):typeof Q=="string"?Q:v.format(Up(p,Q),H.displayFormats.datetime)},tickFormatFunction:function(a,l,p,v){var A=this,H=A._adapter,Q=A.options,ee=Q.time.displayFormats,Z=ee[A._unit],ne=A._majorUnit,ae=ee[ne],pe=p[l],Ee=Q.ticks,Ve=ne&&ae&&pe&&pe.major,We=H.format(a,v||(Ve?ae:Z)),at=Ve?Ee.major:Ee.minor,ws=Em([at.callback,at.userCallback,Ee.callback,Ee.userCallback]);return ws?ws(We,l,p):We},convertTicksToLabels:function(a){var l=[],p,v;for(p=0,v=a.length;p<v;++p)l.push(this.tickFormatFunction(a[p].value,p,a));return l},getPixelForOffset:function(a){var l=this,p=l._offsets,v=Ah(l._table,"time",a,"pos");return l.getPixelForDecimal((p.start+v)*p.factor)},getPixelForValue:function(a,l,p){var v=this,A=null;if(l!==void 0&&p!==void 0&&(A=v._timestamps.datasets[p][l]),A===null&&(A=Ph(v,a)),A!==null)return v.getPixelForOffset(A)},getPixelForTick:function(a){var l=this.getTicks();return a>=0&&a<l.length?this.getPixelForOffset(l[a].value):null},getValueForPixel:function(a){var l=this,p=l._offsets,v=l.getDecimalForPixel(a)/p.factor-p.end,A=Ah(l._table,"pos",v,"time");return l._adapter._create(A)},_getLabelSize:function(a){var l=this,p=l.options.ticks,v=l.ctx.measureText(a).width,A=be.toRadians(l.isHorizontal()?p.maxRotation:p.minRotation),H=Math.cos(A),Q=Math.sin(A),ee=My(p.fontSize,Os.global.defaultFontSize);return{w:v*H+ee*Q,h:v*Q+ee*H}},getLabelWidth:function(a){return this._getLabelSize(a).w},getLabelCapacity:function(a){var l=this,p=l.options.time,v=p.displayFormats,A=v[p.unit]||v.millisecond,H=l.tickFormatFunction(a,0,Om(l,[a],l._majorUnit),A),Q=l._getLabelSize(H),ee=Math.floor(l.isHorizontal()?l.width/Q.w:l.height/Q.h);return l.options.offset&&ee--,ee>0?ee:1}}),Ay=Dy;Cm._defaults=Ay;var Ly={category:$m,linear:_m,logarithmic:wm,radialLinear:xm,time:Cm},Fy={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Op._date.override(typeof r=="function"?{_id:"moment",formats:function(){return Fy},parse:function(a,l){return typeof a=="string"&&typeof l=="string"?a=r(a,l):a instanceof r||(a=r(a)),a.isValid()?a.valueOf():null},format:function(a,l){return r(a).format(l)},add:function(a,l,p){return r(a).add(l,p).valueOf()},diff:function(a,l,p){return r(a).diff(r(l),p)},startOf:function(a,l,p){return a=r(a),l==="isoWeek"?a.isoWeekday(p).valueOf():a.startOf(l).valueOf()},endOf:function(a,l){return r(a).endOf(l).valueOf()},_create:function(a){return r(a)}}:{}),Os._set("global",{plugins:{filler:{propagate:!0}}});var jy={dataset:function(a){var l=a.fill,p=a.chart,v=p.getDatasetMeta(l),A=v&&p.isDatasetVisible(l),H=A&&v.dataset._children||[],Q=H.length||0;return Q?function(ee,Z){return Z<Q&&H[Z]._view||null}:null},boundary:function(a){var l=a.boundary,p=l?l.x:null,v=l?l.y:null;return be.isArray(l)?function(A,H){return l[H]}:function(A){return{x:p===null?A.x:p,y:v===null?A.y:v}}}};function Vy(a,l,p){var v=a._model||{},A=v.fill,H;if(A===void 0&&(A=!!v.backgroundColor),A===!1||A===null)return!1;if(A===!0)return"origin";if(H=parseFloat(A,10),isFinite(H)&&Math.floor(H)===H)return(A[0]==="-"||A[0]==="+")&&(H=l+H),H===l||H<0||H>=p?!1:H;switch(A){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return A;default:return!1}}function zy(a){var l=a.el._model||{},p=a.el._scale||{},v=a.fill,A=null,H;if(isFinite(v))return null;if(v==="start"?A=l.scaleBottom===void 0?p.bottom:l.scaleBottom:v==="end"?A=l.scaleTop===void 0?p.top:l.scaleTop:l.scaleZero!==void 0?A=l.scaleZero:p.getBasePixel&&(A=p.getBasePixel()),A!=null){if(A.x!==void 0&&A.y!==void 0)return A;if(be.isFinite(A))return H=p.isHorizontal(),{x:H?A:null,y:H?null:A}}return null}function Uy(a){var l=a.el._scale,p=l.options,v=l.chart.data.labels.length,A=a.fill,H=[],Q,ee,Z,ne,ae;if(!v)return null;for(Q=p.ticks.reverse?l.max:l.min,ee=p.ticks.reverse?l.min:l.max,Z=l.getPointPositionForValue(0,Q),ne=0;ne<v;++ne)ae=A==="start"||A==="end"?l.getPointPositionForValue(ne,A==="start"?Q:ee):l.getBasePosition(ne),p.gridLines.circular&&(ae.cx=Z.x,ae.cy=Z.y,ae.angle=l.getIndexAngle(ne)-Math.PI/2),H.push(ae);return H}function Wy(a){var l=a.el._scale||{};return l.getPointPositionForValue?Uy(a):zy(a)}function By(a,l,p){var v=a[l],A=v.fill,H=[l],Q;if(!p)return A;for(;A!==!1&&H.indexOf(A)===-1;){if(!isFinite(A))return A;if(Q=a[A],!Q)return!1;if(Q.visible)return A;H.push(A),A=Q.fill}return!1}function Ky(a){var l=a.fill,p="dataset";return l===!1?null:(isFinite(l)||(p="boundary"),jy[p](a))}function Nm(a){return a&&!a.skip}function qm(a,l,p,v,A){var H,Q,ee,Z;if(!(!v||!A)){for(a.moveTo(l[0].x,l[0].y),H=1;H<v;++H)be.canvas.lineTo(a,l[H-1],l[H]);if(p[0].angle!==void 0){for(Q=p[0].cx,ee=p[0].cy,Z=Math.sqrt(Math.pow(p[0].x-Q,2)+Math.pow(p[0].y-ee,2)),H=A-1;H>0;--H)a.arc(Q,ee,Z,p[H].angle,p[H-1].angle,!0);return}for(a.lineTo(p[A-1].x,p[A-1].y),H=A-1;H>0;--H)be.canvas.lineTo(a,p[H],p[H-1],!0)}}function Yy(a,l,p,v,A,H){var Q=l.length,ee=v.spanGaps,Z=[],ne=[],ae=0,pe=0,Ee,Ve,We,at,ws,ji,ma,ga;for(a.beginPath(),Ee=0,Ve=Q;Ee<Ve;++Ee)We=Ee%Q,at=l[We]._view,ws=p(at,We,v),ji=Nm(at),ma=Nm(ws),H&&ga===void 0&&ji&&(ga=Ee+1,Ve=Q+ga),ji&&ma?(ae=Z.push(at),pe=ne.push(ws)):ae&&pe&&(ee?(ji&&Z.push(at),ma&&ne.push(ws)):(qm(a,Z,ne,ae,pe),ae=pe=0,Z=[],ne=[]));qm(a,Z,ne,ae,pe),a.closePath(),a.fillStyle=A,a.fill()}var Gy={id:"filler",afterDatasetsUpdate:function(a,l){var p=(a.data.datasets||[]).length,v=l.propagate,A=[],H,Q,ee,Z;for(Q=0;Q<p;++Q)H=a.getDatasetMeta(Q),ee=H.dataset,Z=null,ee&&ee._model&&ee instanceof rh.Line&&(Z={visible:a.isDatasetVisible(Q),fill:Vy(ee,Q,p),chart:a,el:ee}),H.$filler=Z,A.push(Z);for(Q=0;Q<p;++Q)Z=A[Q],Z&&(Z.fill=By(A,Q,v),Z.boundary=Wy(Z),Z.mapper=Ky(Z))},beforeDatasetsDraw:function(a){var l=a._getSortedVisibleDatasetMetas(),p=a.ctx,v,A,H,Q,ee,Z,ne;for(A=l.length-1;A>=0;--A)v=l[A].$filler,!(!v||!v.visible)&&(H=v.el,Q=H._view,ee=H._children||[],Z=v.mapper,ne=Q.backgroundColor||Os.global.defaultColor,Z&&ne&&ee.length&&(be.canvas.clipArea(p,a.chartArea),Yy(p,ee,Z,Q,ne,H._loop),be.canvas.unclipArea(p)))}},Hy=be.rtl.getRtlAdapter,bh=be.noop,$h=be.valueOrDefault;Os._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(a,l){var p=l.datasetIndex,v=this.chart,A=v.getDatasetMeta(p);A.hidden=A.hidden===null?!v.data.datasets[p].hidden:null,v.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(a){var l=a.data.datasets,p=a.options.legend||{},v=p.labels&&p.labels.usePointStyle;return a._getSortedDatasetMetas().map(function(A){var H=A.controller.getStyle(v?0:void 0);return{text:l[A.index].label,fillStyle:H.backgroundColor,hidden:!a.isDatasetVisible(A.index),lineCap:H.borderCapStyle,lineDash:H.borderDash,lineDashOffset:H.borderDashOffset,lineJoin:H.borderJoinStyle,lineWidth:H.borderWidth,strokeStyle:H.borderColor,pointStyle:H.pointStyle,rotation:H.rotation,datasetIndex:A.index}},this)}}},legendCallback:function(a){var l=document.createElement("ul"),p=a.data.datasets,v,A,H,Q;for(l.setAttribute("class",a.id+"-legend"),v=0,A=p.length;v<A;v++)H=l.appendChild(document.createElement("li")),Q=H.appendChild(document.createElement("span")),Q.style.backgroundColor=p[v].backgroundColor,p[v].label&&H.appendChild(document.createTextNode(p[v].label));return l.outerHTML}});function Wp(a,l){return a.usePointStyle&&a.boxWidth>l?l:a.boxWidth}var Dm=ah.extend({initialize:function(a){var l=this;be.extend(l,a),l.legendHitBoxes=[],l._hoveredItem=null,l.doughnutMode=!1},beforeUpdate:bh,update:function(a,l,p){var v=this;return v.beforeUpdate(),v.maxWidth=a,v.maxHeight=l,v.margins=p,v.beforeSetDimensions(),v.setDimensions(),v.afterSetDimensions(),v.beforeBuildLabels(),v.buildLabels(),v.afterBuildLabels(),v.beforeFit(),v.fit(),v.afterFit(),v.afterUpdate(),v.minSize},afterUpdate:bh,beforeSetDimensions:bh,setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0,a.minSize={width:0,height:0}},afterSetDimensions:bh,beforeBuildLabels:bh,buildLabels:function(){var a=this,l=a.options.labels||{},p=be.callback(l.generateLabels,[a.chart],a)||[];l.filter&&(p=p.filter(function(v){return l.filter(v,a.chart.data)})),a.options.reverse&&p.reverse(),a.legendItems=p},afterBuildLabels:bh,beforeFit:bh,fit:function(){var a=this,l=a.options,p=l.labels,v=l.display,A=a.ctx,H=be.options._parseFont(p),Q=H.size,ee=a.legendHitBoxes=[],Z=a.minSize,ne=a.isHorizontal();if(ne?(Z.width=a.maxWidth,Z.height=v?10:0):(Z.width=v?10:0,Z.height=a.maxHeight),!v){a.width=Z.width=a.height=Z.height=0;return}if(A.font=H.string,ne){var ae=a.lineWidths=[0],pe=0;A.textAlign="left",A.textBaseline="middle",be.each(a.legendItems,function(ma,ga){var $a=Wp(p,Q),ba=$a+Q/2+A.measureText(ma.text).width;(ga===0||ae[ae.length-1]+ba+2*p.padding>Z.width)&&(pe+=Q+p.padding,ae[ae.length-(ga>0?0:1)]=0),ee[ga]={left:0,top:0,width:ba,height:Q},ae[ae.length-1]+=ba+p.padding}),Z.height+=pe}else{var Ee=p.padding,Ve=a.columnWidths=[],We=a.columnHeights=[],at=p.padding,ws=0,ji=0;be.each(a.legendItems,function(ma,ga){var $a=Wp(p,Q),ba=$a+Q/2+A.measureText(ma.text).width;ga>0&&ji+Q+2*Ee>Z.height&&(at+=ws+p.padding,Ve.push(ws),We.push(ji),ws=0,ji=0),ws=Math.max(ws,ba),ji+=Q+Ee,ee[ga]={left:0,top:0,width:ba,height:Q}}),at+=ws,Ve.push(ws),We.push(ji),Z.width+=at}a.width=Z.width,a.height=Z.height},afterFit:bh,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var a=this,l=a.options,p=l.labels,v=Os.global,A=v.defaultColor,H=v.elements.line,Q=a.height,ee=a.columnHeights,Z=a.width,ne=a.lineWidths;if(l.display){var ae=Hy(l.rtl,a.left,a.minSize.width),pe=a.ctx,Ee=$h(p.fontColor,v.defaultFontColor),Ve=be.options._parseFont(p),We=Ve.size,at;pe.textAlign=ae.textAlign("left"),pe.textBaseline="middle",pe.lineWidth=.5,pe.strokeStyle=Ee,pe.fillStyle=Ee,pe.font=Ve.string;var ws=Wp(p,We),ji=a.legendHitBoxes,ma=function(Sa,Ra,Ta){if(!(isNaN(ws)||ws<=0)){pe.save();var Va=$h(Ta.lineWidth,H.borderWidth);if(pe.fillStyle=$h(Ta.fillStyle,A),pe.lineCap=$h(Ta.lineCap,H.borderCapStyle),pe.lineDashOffset=$h(Ta.lineDashOffset,H.borderDashOffset),pe.lineJoin=$h(Ta.lineJoin,H.borderJoinStyle),pe.lineWidth=Va,pe.strokeStyle=$h(Ta.strokeStyle,A),pe.setLineDash&&pe.setLineDash($h(Ta.lineDash,H.borderDash)),p&&p.usePointStyle){var La=ws*Math.SQRT2/2,Da=ae.xPlus(Sa,ws/2),za=Ra+We/2;be.canvas.drawPoint(pe,Ta.pointStyle,La,Da,za,Ta.rotation)}else pe.fillRect(ae.leftForLtr(Sa,ws),Ra,ws,We),Va!==0&&pe.strokeRect(ae.leftForLtr(Sa,ws),Ra,ws,We);pe.restore()}},ga=function(Sa,Ra,Ta,Va){var La=We/2,Da=ae.xPlus(Sa,ws+La),za=Ra+La;pe.fillText(Ta.text,Da,za),Ta.hidden&&(pe.beginPath(),pe.lineWidth=2,pe.moveTo(Da,za),pe.lineTo(ae.xPlus(Da,Va),za),pe.stroke())},$a=function(Sa,Ra){switch(l.align){case"start":return p.padding;case"end":return Sa-Ra;default:return(Sa-Ra+p.padding)/2}},ba=a.isHorizontal();ba?at={x:a.left+$a(Z,ne[0]),y:a.top+p.padding,line:0}:at={x:a.left+p.padding,y:a.top+$a(Q,ee[0]),line:0},be.rtl.overrideTextDirection(a.ctx,l.textDirection);var Ma=We+p.padding;be.each(a.legendItems,function(Sa,Ra){var Ta=pe.measureText(Sa.text).width,Va=ws+We/2+Ta,La=at.x,Da=at.y;ae.setWidth(a.minSize.width),ba?Ra>0&&La+Va+p.padding>a.left+a.minSize.width&&(Da=at.y+=Ma,at.line++,La=at.x=a.left+$a(Z,ne[at.line])):Ra>0&&Da+Ma>a.top+a.minSize.height&&(La=at.x=La+a.columnWidths[at.line]+p.padding,at.line++,Da=at.y=a.top+$a(Q,ee[at.line]));var za=ae.x(La);ma(za,Da,Sa),ji[Ra].left=ae.leftForLtr(za,ji[Ra].width),ji[Ra].top=Da,ga(za,Da,Sa,Ta),ba?at.x+=Va+p.padding:at.y+=Ma}),be.rtl.restoreTextDirection(a.ctx,l.textDirection)}},_getLegendItemAt:function(a,l){var p=this,v,A,H;if(a>=p.left&&a<=p.right&&l>=p.top&&l<=p.bottom){for(H=p.legendHitBoxes,v=0;v<H.length;++v)if(A=H[v],a>=A.left&&a<=A.left+A.width&&l>=A.top&&l<=A.top+A.height)return p.legendItems[v]}return null},handleEvent:function(a){var l=this,p=l.options,v=a.type==="mouseup"?"click":a.type,A;if(v==="mousemove"){if(!p.onHover&&!p.onLeave)return}else if(v==="click"){if(!p.onClick)return}else return;A=l._getLegendItemAt(a.x,a.y),v==="click"?A&&p.onClick&&p.onClick.call(l,a.native,A):(p.onLeave&&A!==l._hoveredItem&&(l._hoveredItem&&p.onLeave.call(l,a.native,l._hoveredItem),l._hoveredItem=A),p.onHover&&A&&p.onHover.call(l,a.native,A))}});function Am(a,l){var p=new Dm({ctx:a.ctx,options:l,chart:a});lh.configure(a,p,l),lh.addBox(a,p),a.legend=p}var Jy={id:"legend",_element:Dm,beforeInit:function(a){var l=a.options.legend;l&&Am(a,l)},beforeUpdate:function(a){var l=a.options.legend,p=a.legend;l?(be.mergeIf(l,Os.global.legend),p?(lh.configure(a,p,l),p.options=l):Am(a,l)):p&&(lh.removeBox(a,p),delete a.legend)},afterEvent:function(a,l){var p=a.legend;p&&p.handleEvent(l)}},vh=be.noop;Os._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Lm=ah.extend({initialize:function(a){var l=this;be.extend(l,a),l.legendHitBoxes=[]},beforeUpdate:vh,update:function(a,l,p){var v=this;return v.beforeUpdate(),v.maxWidth=a,v.maxHeight=l,v.margins=p,v.beforeSetDimensions(),v.setDimensions(),v.afterSetDimensions(),v.beforeBuildLabels(),v.buildLabels(),v.afterBuildLabels(),v.beforeFit(),v.fit(),v.afterFit(),v.afterUpdate(),v.minSize},afterUpdate:vh,beforeSetDimensions:vh,setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0,a.minSize={width:0,height:0}},afterSetDimensions:vh,beforeBuildLabels:vh,buildLabels:vh,afterBuildLabels:vh,beforeFit:vh,fit:function(){var a=this,l=a.options,p=a.minSize={},v=a.isHorizontal(),A,H;if(!l.display){a.width=p.width=a.height=p.height=0;return}A=be.isArray(l.text)?l.text.length:1,H=A*be.options._parseFont(l).lineHeight+l.padding*2,a.width=p.width=v?a.maxWidth:H,a.height=p.height=v?H:a.maxHeight},afterFit:vh,isHorizontal:function(){var a=this.options.position;return a==="top"||a==="bottom"},draw:function(){var a=this,l=a.ctx,p=a.options;if(p.display){var v=be.options._parseFont(p),A=v.lineHeight,H=A/2+p.padding,Q=0,ee=a.top,Z=a.left,ne=a.bottom,ae=a.right,pe,Ee,Ve;l.fillStyle=be.valueOrDefault(p.fontColor,Os.global.defaultFontColor),l.font=v.string,a.isHorizontal()?(Ee=Z+(ae-Z)/2,Ve=ee+H,pe=ae-Z):(Ee=p.position==="left"?Z+H:ae-H,Ve=ee+(ne-ee)/2,pe=ne-ee,Q=Math.PI*(p.position==="left"?-.5:.5)),l.save(),l.translate(Ee,Ve),l.rotate(Q),l.textAlign="center",l.textBaseline="middle";var We=p.text;if(be.isArray(We))for(var at=0,ws=0;ws<We.length;++ws)l.fillText(We[ws],0,at,pe),at+=A;else l.fillText(We,0,0,pe);l.restore()}}});function Fm(a,l){var p=new Lm({ctx:a.ctx,options:l,chart:a});lh.configure(a,p,l),lh.addBox(a,p),a.titleBlock=p}var Qy={id:"title",_element:Lm,beforeInit:function(a){var l=a.options.title;l&&Fm(a,l)},beforeUpdate:function(a){var l=a.options.title,p=a.titleBlock;l?(be.mergeIf(l,Os.global.title),p?(lh.configure(a,p,l),p.options=l):Fm(a,l)):p&&(lh.removeBox(a,p),delete a.titleBlock)}},_h={},Xy=Gy,Zy=Jy,e0=Qy;_h.filler=Xy,_h.legend=Zy,_h.title=e0,wa.helpers=be,Gg(),wa._adapters=Op,wa.Animation=Vh,wa.animationService=zh,wa.controllers=sm,wa.DatasetController=oh,wa.defaults=Os,wa.Element=ah,wa.elements=rh,wa.Interaction=Nh,wa.layouts=lh,wa.platform=qh,wa.plugins=Pa,wa.Scale=nh,wa.scaleService=Jh,wa.Ticks=Qh,wa.Tooltip=Ip,wa.helpers.each(Ly,function(a,l){wa.scaleService.registerScaleType(l,a,a._defaults)});for(var jm in _h)_h.hasOwnProperty(jm)&&wa.plugins.register(_h[jm]);wa.platform.initialize();var t0=wa;return typeof window<"u"&&(window.Chart=wa),wa.Chart=wa,wa.Legend=_h.legend._element,wa.Title=_h.title._element,wa.pluginService=wa.plugins,wa.PluginBase=wa.Element.extend({}),wa.canvasHelpers=wa.helpers.canvas,wa.layoutService=wa.layouts,wa.LinearScaleBase=cp,wa.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(a){wa[a]=function(l,p){return new wa(l,wa.helpers.merge(p||{},{type:a.charAt(0).toLowerCase()+a.slice(1)}))}}),t0}))})(Chart$1)),Chart$1.exports}var ChartExports=requireChart();const Wi=!1;var pr=Array.isArray,Na=Array.prototype.indexOf,js=Array.from,Wr=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,Yi=Object.getOwnPropertyDescriptors,qa=Object.prototype,Fa=Array.prototype,Gs=Object.getPrototypeOf,bi=Object.isExtensible;function br(e){return typeof e=="function"}const tt=()=>{};function Ka(e){return e()}function Yr(e){for(var t=0;t<e.length;t++)e[t]()}function Hi(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const nt=2,Us=4,as=8,Wt=16,It=32,Yt=64,Ws=128,ft=256,Hr=512,He=1024,ct=2048,$t=4096,gt=8192,Ht=16384,Ys=32768,zr=65536,wi=1<<17,Aa=1<<18,hr=1<<19,Xi=1<<20,$s=1<<21,os=1<<22,Kt=1<<23,xt=Symbol("$state"),Zi=Symbol("legacy props"),Ba=Symbol(""),yr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ji(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Oa(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ja(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ga(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ua(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Wa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ya(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ha(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Za(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ja(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ls=1,cs=2,Qi=4,Qa=8,eo=16,to=1,ro=2,en=4,so=8,io=16,tn=1,no=2,je=Symbol(),ao="http://www.w3.org/1999/xhtml",oo="@attach";function lo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function co(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let uo=!1;function rn(e){return e===this.v}function Hs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function fo(e,t){return e!==t}function sn(e){return!Hs(e,this.v)}let mr=!1,vo=!1;function po(){mr=!0}let Be=null;function cr(e){Be=e}function oe(e,t=!1,r){Be={p:Be,c:null,e:null,s:e,x:null,l:mr&&!t?{s:null,u:null,$:[]}:null}}function le(e){var t=Be,r=t.e;if(r!==null){t.e=null;for(var n of r)wn(n)}return Be=t.p,{}}function gr(){return!mr||Be!==null&&Be.l===null}let Nt=[];function nn(){var e=Nt;Nt=[],Yr(e)}function Vt(e){if(Nt.length===0&&!kr){var t=Nt;queueMicrotask(()=>{t===Nt&&nn()})}Nt.push(e)}function ho(){for(;Nt.length>0;)nn()}const mo=new WeakMap;function an(e){var t=he;if(t===null)return we.f|=Kt,e;if((t.f&Ys)===0){if((t.f&Ws)===0)throw!t.parent&&e instanceof Error&&on(e),e;t.b.error(e)}else dr(e,t)}function dr(e,t){for(;t!==null;){if((t.f&Ws)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&on(e),e}function on(e){const t=mo.get(e);t&&(Wr(e,"message",{value:t.message}),Wr(e,"stack",{value:t.stack}))}const Br=new Set;let Fe=null,Ur=null,Ds=new Set,_t=[],ds=null,Ts=!1,kr=!1;class ut{current=new Map;#t=new Map;#e=new Set;#i=0;#a=null;#u=[];#s=[];#n=[];#r=[];#o=[];#c=[];skipped_effects=new Set;process(t){_t=[],Ur=null;for(const s of t)this.#d(s);if(this.#i===0){this.#f();var r=this.#s,n=this.#n;this.#s=[],this.#n=[],this.#r=[],Ur=this,Fe=null,_i(r),_i(n),this.#a?.resolve()}else this.#l(this.#s),this.#l(this.#n),this.#l(this.#r);for(const s of this.#u)ur(s);this.#u=[]}#d(t){t.f^=He;for(var r=t.first;r!==null;){var n=r.f,s=(n&(It|Yt))!==0,i=s&&(n&He)!==0,o=i||(n&gt)!==0||this.skipped_effects.has(r);if(!o&&r.fn!==null){s?r.f^=He:(n&Us)!==0?this.#n.push(r):(n&He)===0&&((n&os)!==0&&r.b?.is_pending()?this.#u.push(r):Lr(r)&&((r.f&Wt)!==0&&this.#r.push(r),ur(r)));var u=r.first;if(u!==null){r=u;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)r=c.next,c=c.parent}}#l(t){for(const r of t)((r.f&ct)!==0?this.#o:this.#c).push(r),Ze(r,He);t.length=0}capture(t,r){this.#t.has(t)||this.#t.set(t,r),this.current.set(t,t.v)}activate(){Fe=this}deactivate(){Fe=null,Ur=null;for(const t of Ds)if(Ds.delete(t),t(),Fe!==null)break}flush(){if(_t.length>0){if(this.activate(),ln(),Fe!==null&&Fe!==this)return}else this.#i===0&&this.#f();this.deactivate()}#f(){for(const t of this.#e)t();if(this.#e.clear(),Br.size>1){this.#t.clear();let t=!0;for(const r of Br){if(r===this){t=!1;continue}for(const[n,s]of this.current){if(r.current.has(n))if(t)r.current.set(n,s);else continue;cn(n)}if(_t.length>0){Fe=r;for(const n of _t)r.#d(n);_t=[]}}Fe=null}Br.delete(this)}increment(){this.#i+=1}decrement(){if(this.#i-=1,this.#i===0){for(const t of this.#o)Ze(t,ct),Ot(t);for(const t of this.#c)Ze(t,$t),Ot(t);this.flush()}else this.deactivate()}add_callback(t){this.#e.add(t)}settled(){return(this.#a??=Hi()).promise}static ensure(){if(Fe===null){const t=Fe=new ut;Br.add(Fe),kr||ut.enqueue(()=>{Fe===t&&t.flush()})}return Fe}static enqueue(t){Vt(t)}static apply(t){return tt}}function go(e){var t=kr;kr=!0;try{for(var r;;){if(ho(),_t.length===0&&(Fe?.flush(),_t.length===0))return ds=null,r;ln()}}finally{kr=t}}function ln(){var e=ar;Ts=!0;try{var t=0;for(ki(!0);_t.length>0;){var r=ut.ensure();if(t++>1e3){var n,s;bo()}r.process(_t),zt.clear()}}finally{Ts=!1,ki(e),ds=null}}function bo(){try{Wa()}catch(e){dr(e,ds)}}let Lt=null;function _i(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ht|gt))===0&&Lr(n)&&(Lt=[],ur(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?kn(n):n.fn=null),Lt?.length>0)){zt.clear();for(const s of Lt)ur(s);Lt=[]}}Lt=null}}function cn(e){if(e.reactions!==null)for(const t of e.reactions){const r=t.f;(r&nt)!==0?cn(t):(r&(os|Wt))!==0&&(Ze(t,ct),Ot(t))}}function Ot(e){for(var t=ds=e;t.parent!==null;){t=t.parent;var r=t.f;if(Ts&&t===he&&(r&Wt)!==0)return;if((r&(Yt|It))!==0){if((r&He)===0)return;t.f^=He}}_t.push(t)}function wo(e){let t=0,r=Et(0),n;return()=>{Eo()&&(f$1(r),Zt(()=>(t===0&&(n=_$1(()=>e(()=>Sr(r)))),t+=1,()=>{Vt(()=>{t-=1,t===0&&(n?.(),n=void 0,Sr(r))})})))}}var _o=zr|hr|Ws;function xo(e,t,r){new yo(e,t,r)}class yo{parent;#t=!1;#e;#i=null;#a;#u;#s;#n=null;#r=null;#o=null;#c=null;#d=0;#l=0;#f=!1;#h=null;#g=()=>{this.#h&&jt(this.#h,this.#d)};#y=wo(()=>(this.#h=Et(this.#d),()=>{this.#h=null}));constructor(t,r,n){this.#e=t,this.#a=r,this.#u=n,this.parent=he.b,this.#t=!!this.#a.pending,this.#s=Jt(()=>{he.b=this;{try{this.#n=et(()=>n(this.#e))}catch(s){this.error(s)}this.#l>0?this.#m():this.#t=!1}},_o)}#b(){try{this.#n=et(()=>this.#u(this.#e))}catch(t){this.error(t)}this.#t=!1}#$(){const t=this.#a.pending;t&&(this.#r=et(()=>t(this.#e)),ut.enqueue(()=>{this.#n=this.#p(()=>(ut.ensure(),et(()=>this.#u(this.#e)))),this.#l>0?this.#m():(At(this.#r,()=>{this.#r=null}),this.#t=!1)}))}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#p(t){var r=he,n=we,s=Be;vt(this.#s),it(this.#s),cr(this.#s.ctx);try{return t()}catch(i){return an(i),null}finally{vt(r),it(n),cr(s)}}#m(){const t=this.#a.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),ko(this.#n,this.#c)),this.#r===null&&(this.#r=et(()=>t(this.#e)))}#v(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#v(t);return}this.#l+=t,this.#l===0&&(this.#t=!1,this.#r&&At(this.#r,()=>{this.#r=null}),this.#c&&(this.#e.before(this.#c),this.#c=null),Vt(()=>{ut.ensure().flush()}))}update_pending_count(t){this.#v(t),this.#d+=t,Ds.add(this.#g)}get_effect_pending(){return this.#y(),f$1(this.#h)}error(t){var r=this.#a.onerror;let n=this.#a.failed;if(this.#f||!r&&!n)throw t;this.#n&&(Xe(this.#n),this.#n=null),this.#r&&(Xe(this.#r),this.#r=null),this.#o&&(Xe(this.#o),this.#o=null);var s=!1,i=!1;const o=()=>{if(s){co();return}s=!0,i&&Ja(),ut.ensure(),this.#d=0,this.#o!==null&&At(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#n=this.#p(()=>(this.#f=!1,et(()=>this.#u(this.#e)))),this.#l>0?this.#m():this.#t=!1};var u=we;try{it(null),i=!0,r?.(t,o),i=!1}catch(c){dr(c,this.#s&&this.#s.parent)}finally{it(u)}n&&Vt(()=>{this.#o=this.#p(()=>{this.#f=!0;try{return et(()=>{n(this.#e,()=>t,()=>o)})}catch(c){return dr(c,this.#s.parent),null}finally{this.#f=!1}})})}}function ko(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var s=r===n?null:Pr(r);t.append(r),r=s}}function dn(e,t,r){const n=gr()?Vr:Er;if(t.length===0){r(e.map(n));return}var s=Fe,i=he,o=So();Promise.all(t.map(u=>Mo(u))).then(u=>{s?.activate(),o();try{r([...e.map(n),...u])}catch(c){(i.f&Ht)===0&&dr(c,i)}s?.deactivate(),un()}).catch(u=>{dr(u,i)})}function So(){var e=he,t=we,r=Be,n=Fe;return function(){vt(e),it(t),cr(r),n?.activate()}}function un(){vt(null),it(null),cr(null)}function Vr(e){var t=nt|ct,r=we!==null&&(we.f&nt)!==0?we:null;return he===null||r!==null&&(r.f&ft)!==0?t|=ft:he.f|=hr,{ctx:Be,deps:null,effects:null,equals:rn,f:t,fn:e,reactions:null,rv:0,v:je,wv:0,parent:r??he,ac:null}}function Mo(e,t){let r=he;r===null&&Oa();var n=r.b,s=void 0,i=Et(je),o=!we,u=new Map;return No(()=>{var c=Hi();s=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject)}catch($){c.reject($)}var d=Fe,m=n.is_pending();o&&(n.update_pending_count(1),m||(d.increment(),u.get(d)?.reject(yr),u.set(d,c)));const T=($,C=void 0)=>{m||d.activate(),C?C!==yr&&(i.f|=Kt,jt(i,C)):((i.f&Kt)!==0&&(i.f^=Kt),jt(i,$)),o&&(n.update_pending_count(-1),m||d.decrement()),un()};c.promise.then(T,$=>T(null,$||"unknown"))}),vs(()=>{for(const c of u.values())c.reject(yr)}),new Promise(c=>{function d(m){function T(){m===s?c(i):d(s)}m.then(T,T)}d(s)})}function ht(e){const t=Vr(e);return Cn(t),t}function Er(e){const t=Vr(e);return t.equals=sn,t}function fn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Xe(t[r])}}function Ro(e){for(var t=e.parent;t!==null;){if((t.f&nt)===0)return t;t=t.parent}return null}function Xs(e){var t,r=he;vt(Ro(e));try{fn(e),t=Tn(e)}finally{vt(r)}return t}function vn(e){var t=Xs(e);if(e.equals(t)||(e.v=t,e.wv=$n()),!Qt){var r=(Dt||(e.f&ft)!==0)&&e.deps!==null?$t:He;Ze(e,r)}}const zt=new Map;function Et(e,t){var r={f:0,v:e,reactions:null,equals:rn,rv:0,wv:0};return r}function Oe(e,t){const r=Et(e);return Cn(r),r}function Y(e,t=!1,r=!0){const n=Et(e);return t||(n.equals=sn),mr&&r&&Be!==null&&Be.l!==null&&(Be.l.s??=[]).push(n),n}function Co(e,t){return E(e,_$1(()=>f$1(e))),t}function E(e,t,r=!1){we!==null&&(!mt||(we.f&wi)!==0)&&gr()&&(we.f&(nt|Wt|os|wi))!==0&&!Rt?.includes(e)&&Za();let n=r?Mt(t):t;return jt(e,n)}function jt(e,t){if(!e.equals(t)){var r=e.v;Qt?zt.set(e,t):zt.set(e,r),e.v=t;var n=ut.ensure();n.capture(e,r),(e.f&nt)!==0&&((e.f&ct)!==0&&Xs(e),Ze(e,(e.f&ft)===0?He:$t)),e.wv=$n(),pn(e,ct),gr()&&he!==null&&(he.f&He)!==0&&(he.f&(It|Yt))===0&&(dt===null?Ko([e]):dt.push(e))}return t}function zs(e,t=1){var r=f$1(e),n=t===1?r++:r--;return E(e,r),n}function Sr(e){E(e,e.v+1)}function pn(e,t){var r=e.reactions;if(r!==null)for(var n=gr(),s=r.length,i=0;i<s;i++){var o=r[i],u=o.f;if(!(!n&&o===he)){var c=(u&ct)===0;c&&Ze(o,t),(u&nt)!==0?pn(o,$t):c&&((u&Wt)!==0&&Lt!==null&&Lt.push(o),Ot(o))}}}function Mt(e){if(typeof e!="object"||e===null||xt in e)return e;const t=Gs(e);if(t!==qa&&t!==Fa)return e;var r=new Map,n=pr(e),s=Oe(0),i=Bt,o=u=>{if(Bt===i)return u();var c=we,d=Bt;it(null),Mi(i);var m=u();return it(c),Mi(d),m};return n&&r.set("length",Oe(e.length)),new Proxy(e,{defineProperty(u,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ha();var m=r.get(c);return m===void 0?m=o(()=>{var T=Oe(d.value);return r.set(c,T),T}):E(m,d.value,!0),!0},deleteProperty(u,c){var d=r.get(c);if(d===void 0){if(c in u){const m=o(()=>Oe(je));r.set(c,m),Sr(s)}}else E(d,je),Sr(s);return!0},get(u,c,d){if(c===xt)return e;var m=r.get(c),T=c in u;if(m===void 0&&(!T||Tt(u,c)?.writable)&&(m=o(()=>{var C=Mt(T?u[c]:je),D=Oe(C);return D}),r.set(c,m)),m!==void 0){var $=f$1(m);return $===je?void 0:$}return Reflect.get(u,c,d)},getOwnPropertyDescriptor(u,c){var d=Reflect.getOwnPropertyDescriptor(u,c);if(d&&"value"in d){var m=r.get(c);m&&(d.value=f$1(m))}else if(d===void 0){var T=r.get(c),$=T?.v;if(T!==void 0&&$!==je)return{enumerable:!0,configurable:!0,value:$,writable:!0}}return d},has(u,c){if(c===xt)return!0;var d=r.get(c),m=d!==void 0&&d.v!==je||Reflect.has(u,c);if(d!==void 0||he!==null&&(!m||Tt(u,c)?.writable)){d===void 0&&(d=o(()=>{var $=m?Mt(u[c]):je,C=Oe($);return C}),r.set(c,d));var T=f$1(d);if(T===je)return!1}return m},set(u,c,d,m){var T=r.get(c),$=c in u;if(n&&c==="length")for(var C=d;C<T.v;C+=1){var D=r.get(C+"");D!==void 0?E(D,je):C in u&&(D=o(()=>Oe(je)),r.set(C+"",D))}if(T===void 0)(!$||Tt(u,c)?.writable)&&(T=o(()=>Oe(void 0)),E(T,Mt(d)),r.set(c,T));else{$=T.v!==je;var F=o(()=>Mt(d));E(T,F)}var g=Reflect.getOwnPropertyDescriptor(u,c);if(g?.set&&g.set.call(m,d),!$){if(n&&typeof c=="string"){var q=r.get("length"),x=Number(c);Number.isInteger(x)&&x>=q.v&&E(q,x+1)}Sr(s)}return!0},ownKeys(u){f$1(s);var c=Reflect.ownKeys(u).filter(T=>{var $=r.get(T);return $===void 0||$.v!==je});for(var[d,m]of r)m.v!==je&&!(d in u)&&c.push(d);return c},setPrototypeOf(){Xa()}})}function xi(e){try{if(e!==null&&typeof e=="object"&&xt in e)return e[xt]}catch{}return e}function Io(e,t){return Object.is(xi(e),xi(t))}var Ir,hn,mn,gn;function $o(){if(Ir===void 0){Ir=window,hn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;mn=Tt(t,"firstChild").get,gn=Tt(t,"nextSibling").get,bi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),bi(r)&&(r.__t=void 0)}}function Xt(e=""){return document.createTextNode(e)}function lt(e){return mn.call(e)}function Pr(e){return gn.call(e)}function b$1(e,t){return lt(e)}function W(e,t=!1){{var r=lt(e);return r instanceof Comment&&r.data===""?Pr(r):r}}function R(e,t=1,r=!1){let n=e;for(;t--;)n=Pr(n);return n}function Do(e){e.textContent=""}function Zs(){return!1}function To(e,t){if(t){const r=document.body;e.autofocus=!0,Vt(()=>{document.activeElement===r&&e.focus()})}}let yi=!1;function zo(){yi||(yi=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function us(e){var t=we,r=he;it(null),vt(null);try{return e()}finally{it(t),vt(r)}}function fs(e,t,r,n=r){e.addEventListener(t,()=>us(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),zo()}function bn(e){he===null&&we===null&&Ua(),we!==null&&(we.f&ft)!==0&&he===null&&Ga(),Qt&&ja()}function Vo(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function St(e,t,r,n=!0){var s=he;s!==null&&(s.f&gt)!==0&&(e|=gt);var i={ctx:Be,deps:null,nodes_start:null,nodes_end:null,f:e|ct,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{ur(i),i.f|=Ys}catch(c){throw Xe(i),c}else t!==null&&Ot(i);if(n){var o=i;if(r&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&hr)===0&&(o=o.first),o!==null&&(o.parent=s,s!==null&&Vo(o,s),we!==null&&(we.f&nt)!==0&&(e&Yt)===0)){var u=we;(u.effects??=[]).push(o)}}return i}function Eo(){return we!==null&&!mt}function vs(e){const t=St(as,null,!1);return Ze(t,He),t.teardown=e,t}function Xr(e){bn();var t=he.f,r=!we&&(t&It)!==0&&(t&Ys)===0;if(r){var n=Be;(n.e??=[]).push(e)}else return wn(e)}function wn(e){return St(Us|Xi,e,!1)}function Po(e){return bn(),St(as|Xi,e,!0)}function Lo(e){ut.ensure();const t=St(Yt|hr,e,!0);return(r={})=>new Promise(n=>{r.outro?At(t,()=>{Xe(t),n(void 0)}):(Xe(t),n(void 0))})}function Ct(e){return St(Us,e,!1)}function Ge(e,t){var r=Be,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=Zt(()=>{e(),!n.ran&&(n.ran=!0,_$1(t))})}function rt(){var e=Be;Zt(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&He)!==0&&Ze(r,$t),Lr(r)&&ur(r),t.ran=!1}})}function No(e){return St(os|hr,e,!0)}function Zt(e,t=0){return St(as|t,e,!0)}function O(e,t=[],r=[]){dn(t,r,n=>{St(as,()=>e(...n.map(f$1)),!0)})}function Jt(e,t=0){var r=St(Wt|t,e,!0);return r}function et(e,t=!0){return St(It|hr,e,!0,t)}function _n(e){var t=e.teardown;if(t!==null){const r=Qt,n=we;Si(!0),it(null);try{t.call(null)}finally{Si(r),it(n)}}}function xn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&us(()=>{s.abort(yr)});var n=r.next;(r.f&Yt)!==0?r.parent=null:Xe(r,t),r=n}}function qo(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&It)===0&&Xe(t),t=r}}function Xe(e,t=!0){var r=!1;(t||(e.f&Aa)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(yn(e.nodes_start,e.nodes_end),r=!0),xn(e,t&&!r),Zr(e,0),Ze(e,Ht);var n=e.transitions;if(n!==null)for(const i of n)i.stop();_n(e);var s=e.parent;s!==null&&s.first!==null&&kn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function yn(e,t){for(;e!==null;){var r=e===t?null:Pr(e);e.remove(),e=r}}function kn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function At(e,t){var r=[];Js(e,r,!0),Sn(r,()=>{Xe(e),t&&t()})}function Sn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function Js(e,t,r){if((e.f&gt)===0){if(e.f^=gt,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var n=e.first;n!==null;){var s=n.next,i=(n.f&zr)!==0||(n.f&It)!==0;Js(n,t,i?r:!1),n=s}}}function Qs(e){Mn(e,!0)}function Mn(e,t){if((e.f&gt)!==0){e.f^=gt,(e.f&He)===0&&(Ze(e,ct),Ot(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&zr)!==0||(r.f&It)!==0;Mn(r,s?t:!1),r=n}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}let rr=null;function Fo(e){var t=rr;try{if(rr=new Set,_$1(e),t!==null)for(var r of rr)t.add(r);return rr}finally{rr=t}}function Rn(e){for(var t of Fo(e))jt(t,t.v)}let ar=!1;function ki(e){ar=e}let Qt=!1;function Si(e){Qt=e}let we=null,mt=!1;function it(e){we=e}let he=null;function vt(e){he=e}let Rt=null;function Cn(e){we!==null&&(Rt===null?Rt=[e]:Rt.push(e))}let Qe=null,ot=0,dt=null;function Ko(e){dt=e}let In=1,$r=0,Bt=$r;function Mi(e){Bt=e}let Dt=!1;function $n(){return++In}function Lr(e){var t=e.f;if((t&ct)!==0)return!0;if((t&$t)!==0){var r=e.deps,n=(t&ft)!==0;if(r!==null){var s,i,o=(t&Hr)!==0,u=n&&he!==null&&!Dt,c=r.length;if((o||u)&&(he===null||(he.f&Ht)===0)){var d=e,m=d.parent;for(s=0;s<c;s++)i=r[s],(o||!i?.reactions?.includes(d))&&(i.reactions??=[]).push(d);o&&(d.f^=Hr),u&&m!==null&&(m.f&ft)===0&&(d.f^=ft)}for(s=0;s<c;s++)if(i=r[s],Lr(i)&&vn(i),i.wv>e.wv)return!0}(!n||he!==null&&!Dt)&&Ze(e,He)}return!1}function Dn(e,t,r=!0){var n=e.reactions;if(n!==null&&!Rt?.includes(e))for(var s=0;s<n.length;s++){var i=n[s];(i.f&nt)!==0?Dn(i,t,!1):t===i&&(r?Ze(i,ct):(i.f&He)!==0&&Ze(i,$t),Ot(i))}}function Tn(e){var t=Qe,r=ot,n=dt,s=we,i=Dt,o=Rt,u=Be,c=mt,d=Bt,m=e.f;Qe=null,ot=0,dt=null,Dt=(m&ft)!==0&&(mt||!ar||we===null),we=(m&(It|Yt))===0?e:null,Rt=null,cr(e.ctx),mt=!1,Bt=++$r,e.ac!==null&&(us(()=>{e.ac.abort(yr)}),e.ac=null);try{e.f|=$s;var T=e.fn,$=T(),C=e.deps;if(Qe!==null){var D;if(Zr(e,ot),C!==null&&ot>0)for(C.length=ot+Qe.length,D=0;D<Qe.length;D++)C[ot+D]=Qe[D];else e.deps=C=Qe;if(!Dt||(m&nt)!==0&&e.reactions!==null)for(D=ot;D<C.length;D++)(C[D].reactions??=[]).push(e)}else C!==null&&ot<C.length&&(Zr(e,ot),C.length=ot);if(gr()&&dt!==null&&!mt&&C!==null&&(e.f&(nt|$t|ct))===0)for(D=0;D<dt.length;D++)Dn(dt[D],e);return s!==null&&s!==e&&($r++,dt!==null&&(n===null?n=dt:n.push(...dt))),(e.f&Kt)!==0&&(e.f^=Kt),$}catch(F){return an(F)}finally{e.f^=$s,Qe=t,ot=r,dt=n,we=s,Dt=i,Rt=o,cr(u),mt=c,Bt=d}}function Ao(e,t){let r=t.reactions;if(r!==null){var n=Na.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&nt)!==0&&(Qe===null||!Qe.includes(t))&&(Ze(t,$t),(t.f&(ft|Hr))===0&&(t.f^=Hr),fn(t),Zr(t,0))}function Zr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Ao(e,r[n])}function ur(e){var t=e.f;if((t&Ht)===0){Ze(e,He);var r=he,n=ar;he=e,ar=!0;try{(t&Wt)!==0?qo(e):xn(e),_n(e);var s=Tn(e);e.teardown=typeof s=="function"?s:null,e.wv=In;var i;Wi&&vo&&(e.f&ct)!==0&&e.deps}finally{ar=n,he=r}}}async function Bo(){await Promise.resolve(),go()}function f$1(e){var t=e.f,r=(t&nt)!==0;if(rr?.add(e),we!==null&&!mt){var n=he!==null&&(he.f&Ht)!==0;if(!n&&!Rt?.includes(e)){var s=we.deps;if((we.f&$s)!==0)e.rv<$r&&(e.rv=$r,Qe===null&&s!==null&&s[ot]===e?ot++:Qe===null?Qe=[e]:(!Dt||!Qe.includes(e))&&Qe.push(e));else{(we.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[we]:i.includes(we)||i.push(we)}}}else if(r&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&ft)===0&&(o.f^=ft)}if(Qt){if(zt.has(e))return zt.get(e);if(r){o=e;var c=o.v;return((o.f&He)===0&&o.reactions!==null||zn(o))&&(c=Xs(o)),zt.set(o,c),c}}else r&&(o=e,Lr(o)&&vn(o));if((e.f&Kt)!==0)throw e.v;return e.v}function zn(e){if(e.v===je)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(zt.has(t)||(t.f&nt)!==0&&zn(t))return!0;return!1}function _$1(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const Oo=-7169;function Ze(e,t){e.f=e.f&Oo|t}function z(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(xt in e)Vs(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&xt in r&&Vs(r)}}}function Vs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Vs(e[n],t)}catch{}const r=Gs(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Yi(r);for(let s in n){const i=n[s].get;if(i)try{i.call(e)}catch{}}}}}function jo(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Go=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Uo(e){return Go.includes(e)}const Wo={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Yo(e){return e=e.toLowerCase(),Wo[e]??e}const Ho=["touchstart","touchmove"];function Xo(e){return Ho.includes(e)}const Vn=new Set,Es=new Set;function En(e,t,r,n={}){function s(i){if(n.capture||xr.call(t,i),!i.cancelBubble)return us(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Vt(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function me(e,t,r,n,s){var i={capture:n,passive:s},o=En(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&vs(()=>{t.removeEventListener(e,o,i)})}function Pt(e){for(var t=0;t<e.length;t++)Vn.add(e[t]);for(var r of Es)r(e)}let Ri=null;function xr(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;Ri=e;var o=0,u=Ri===e&&e.__root;if(u){var c=s.indexOf(u);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var d=s.indexOf(t);if(d===-1)return;c<=d&&(o=c)}if(i=s[o]||e.target,i!==t){Wr(e,"currentTarget",{configurable:!0,get(){return i||r}});var m=we,T=he;it(null),vt(null);try{for(var $,C=[];i!==null;){var D=i.assignedSlot||i.parentNode||i.host||null;try{var F=i["__"+n];if(F!=null&&(!i.disabled||e.target===i))if(pr(F)){var[g,...q]=F;g.apply(i,[e,...q])}else F.call(i,e)}catch(x){$?C.push(x):$=x}if(e.cancelBubble||D===t||D===null)break;i=D}if($){for(let x of C)queueMicrotask(()=>{throw x});throw $}}finally{e.__root=t,delete e.currentTarget,it(m),vt(T)}}}function ei(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Gt(e,t){var r=he;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function V(e,t){var r=(t&tn)!==0,n=(t&no)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=ei(i?e:"<!>"+e),r||(s=lt(s)));var o=n||hn?document.importNode(s,!0):s.cloneNode(!0);if(r){var u=lt(o),c=o.lastChild;Gt(u,c)}else Gt(o,o);return o}}function Zo(e,t,r="svg"){var n=!e.startsWith("<!>"),s=(t&tn)!==0,i=`<${r}>${n?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var u=ei(i),c=lt(u);if(s)for(o=document.createDocumentFragment();lt(c);)o.appendChild(lt(c));else o=lt(c)}var d=o.cloneNode(!0);if(s){var m=lt(d),T=d.lastChild;Gt(m,T)}else Gt(d,d);return d}}function Nr(e,t){return Zo(e,t,"svg")}function or(e=""){{var t=Xt(e+"");return Gt(t,t),t}}function ge(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Xt();return e.append(t,r),Gt(t,r),e}function M(e,t){e!==null&&e.before(t)}function j(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Jo(e,t){return Qo(e,t)}const er=new Map;function Qo(e,{target:t,anchor:r,props:n={},events:s,context:i,intro:o=!0}){$o();var u=new Set,c=T=>{for(var $=0;$<T.length;$++){var C=T[$];if(!u.has(C)){u.add(C);var D=Xo(C);t.addEventListener(C,xr,{passive:D});var F=er.get(C);F===void 0?(document.addEventListener(C,xr,{passive:D}),er.set(C,1)):er.set(C,F+1)}}};c(js(Vn)),Es.add(c);var d=void 0,m=Lo(()=>{var T=r??t.appendChild(Xt());return xo(T,{pending:()=>{}},$=>{if(i){oe({});var C=Be;C.c=i}s&&(n.$$events=s),d=e($,n)||{},i&&le()}),()=>{for(var $ of u){t.removeEventListener($,xr);var C=er.get($);--C===0?(document.removeEventListener($,xr),er.delete($)):er.set($,C)}Es.delete(c),T!==r&&T.parentNode?.removeChild(T)}});return el.set(d,m),d}let el=new WeakMap;function N(e,t,r=!1){var n=e,s=null,i=null,o=je,u=r?zr:0,c=!1;const d=(C,D=!0)=>{c=!0,$(D,C)};var m=null;function T(){m!==null&&(m.lastChild.remove(),n.before(m),m=null);var C=o?s:i,D=o?i:s;C&&Qs(C),D&&At(D,()=>{o?i=null:s=null})}const $=(C,D)=>{if(o!==(o=C)){var F=Zs(),g=n;if(F&&(m=document.createDocumentFragment(),m.append(g=Xt())),o?s??=D&&et(()=>D(g)):i??=D&&et(()=>D(g)),F){var q=Fe,x=o?s:i,P=o?i:s;x&&q.skipped_effects.delete(x),P&&q.skipped_effects.add(P),q.add_callback(T)}else T()}};Jt(()=>{c=!1,t(d),c||$(null,null)},u)}function tl(e,t,r){var n=e,s=je,i,o,u=null,c=gr()?fo:Hs;function d(){i&&At(i),u!==null&&(u.lastChild.remove(),n.before(u),u=null),i=o}Jt(()=>{if(c(s,s=t())){var m=n,T=Zs();T&&(u=document.createDocumentFragment(),u.append(m=Xt())),o=et(()=>r(m)),T?Fe.add_callback(d):d()}})}function Te(e,t){return t}function rl(e,t,r){for(var n=e.items,s=[],i=t.length,o=0;o<i;o++)Js(t[o].e,s,!0);var u=i>0&&s.length===0&&r!==null;if(u){var c=r.parentNode;Do(c),c.append(r),n.clear(),wt(e,t[0].prev,t[i-1].next)}Sn(s,()=>{for(var d=0;d<i;d++){var m=t[d];u||(n.delete(m.k),wt(e,m.prev,m.next)),Xe(m.e,!u)}})}function Ce(e,t,r,n,s,i=null){var o=e,u={flags:t,items:new Map,first:null},c=(t&Qi)!==0;if(c){var d=e;o=d.appendChild(Xt())}var m=null,T=!1,$=new Map,C=Er(()=>{var q=r();return pr(q)?q:q==null?[]:js(q)}),D,F;function g(){sl(F,D,u,$,o,s,t,n,r),i!==null&&(D.length===0?m?Qs(m):m=et(()=>i(o)):m!==null&&At(m,()=>{m=null}))}Jt(()=>{F??=he,D=f$1(C);var q=D.length;T&&q===0||(T=q===0,g(),f$1(C))})}function sl(e,t,r,n,s,i,o,u,c){var d=(o&Qa)!==0,m=(o&(ls|cs))!==0,T=t.length,$=r.items,C=r.first,D=C,F,g=null,q,x=[],P=[],K,L,B,J;if(d)for(J=0;J<T;J+=1)K=t[J],L=u(K,J),B=$.get(L),B!==void 0&&(B.a?.measure(),(q??=new Set).add(B));for(J=0;J<T;J+=1){if(K=t[J],L=u(K,J),B=$.get(L),B===void 0){var re=n.get(L);if(re!==void 0){n.delete(L),$.set(L,re);var ve=g?g.next:D;wt(r,g,re),wt(r,re,ve),_s(re,ve,s),g=re}else{var ye=D?D.e.nodes_start:s;g=Ln(ye,r,g,g===null?r.first:g.next,K,L,J,i,o,c)}$.set(L,g),x=[],P=[],D=g.next;continue}if(m&&Pn(B,K,J,o),(B.e.f&gt)!==0&&(Qs(B.e),d&&(B.a?.unfix(),(q??=new Set).delete(B))),B!==D){if(F!==void 0&&F.has(B)){if(x.length<P.length){var Se=P[0],Ne;g=Se.prev;var Ke=x[0],Ar=x[x.length-1];for(Ne=0;Ne<x.length;Ne+=1)_s(x[Ne],Se,s);for(Ne=0;Ne<P.length;Ne+=1)F.delete(P[Ne]);wt(r,Ke.prev,Ar.next),wt(r,g,Ke),wt(r,Ar,Se),D=Se,g=Ar,J-=1,x=[],P=[]}else F.delete(B),_s(B,D,s),wt(r,B.prev,B.next),wt(r,B,g===null?r.first:g.next),wt(r,g,B),g=B;continue}for(x=[],P=[];D!==null&&D.k!==L;)(D.e.f&gt)===0&&(F??=new Set).add(D),P.push(D),D=D.next;if(D===null)continue;B=D}x.push(B),g=B,D=B.next}if(D!==null||F!==void 0){for(var hi=F===void 0?[]:js(F);D!==null;)(D.e.f&gt)===0&&hi.push(D),D=D.next;var gi=hi.length;if(gi>0){var Gi=(o&Qi)!==0&&T===0?s:null;if(d){for(J=0;J<gi;J+=1)hi[J].a?.measure();for(J=0;J<gi;J+=1)hi[J].a?.fix()}rl(r,hi,Gi)}}d&&Vt(()=>{if(q!==void 0)for(B of q)B.a?.apply()}),e.first=r.first&&r.first.e,e.last=g&&g.e;for(var bs of n.values())Xe(bs.e);n.clear()}function Pn(e,t,r,n){(n&ls)!==0&&jt(e.v,t),(n&cs)!==0?jt(e.i,r):e.i=r}function Ln(e,t,r,n,s,i,o,u,c,d,m){var T=(c&ls)!==0,$=(c&eo)===0,C=T?$?Y(s,!1,!1):Et(s):s,D=(c&cs)===0?o:Et(o),F={i:D,v:C,k:i,a:null,e:null,prev:r,next:n};try{if(e===null){var g=document.createDocumentFragment();g.append(e=Xt())}return F.e=et(()=>u(e,C,D,d),uo),F.e.prev=r&&r.e,F.e.next=n&&n.e,r===null?m||(t.first=F):(r.next=F,r.e.next=F.e),n!==null&&(n.prev=F,n.e.prev=F.e),F}finally{}}function _s(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,i=e.e.nodes_start;i!==null&&i!==n;){var o=Pr(i);s.before(i),i=o}}function wt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function ze(e,t,r=!1,n=!1,s=!1){var i=e,o="";O(()=>{var u=he;if(o!==(o=t()??"")&&(u.nodes_start!==null&&(yn(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),o!=="")){var c=o+"";r?c=`<svg>${c}</svg>`:n&&(c=`<math>${c}</math>`);var d=ei(c);if((r||n)&&(d=lt(d)),Gt(lt(d),d.lastChild),r||n)for(;lt(d);)i.before(lt(d));else i.before(d)}})}function ti(e,t,r,n,s){var i=t.$$slots?.[r],o=!1;i===!0&&(i=t.children,o=!0),i===void 0?s!==null&&s(e):i(e,o?()=>n:n)}function Nn(e,t,...r){var n=e,s=tt,i;Jt(()=>{s!==(s=t())&&(i&&(Xe(i),i=null),i=et(()=>s(n,...r)))},zr)}function de(e,t){Ct(()=>{var r=e.getRootNode(),n=r.host?r:r.head??r.ownerDocument.head;if(!n.querySelector("#"+t.hash)){const s=document.createElement("style");s.id=t.hash,s.textContent=t.code,n.appendChild(s)}})}function Ps(e,t,r){Ct(()=>{var n=_$1(()=>t(e,r?.())||{});if(n?.destroy)return()=>n.destroy()})}function il(e,t){var r=void 0,n;Jt(()=>{r!==(r=t())&&(n&&(Xe(n),n=null),r&&(n=et(()=>{Ct(()=>r(e))})))})}function qn(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=qn(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nl(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=qn(e))&&(n&&(n+=" "),n+=t);return n}function Jr(e){return typeof e=="object"?nl(e):e??""}const Ci=[...` 	
\r\f\v\uFEFF`];function al(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var i=s.length,o=0;(o=n.indexOf(s,o))>=0;){var u=o+i;(o===0||Ci.includes(n[o-1]))&&(u===n.length||Ci.includes(n[u]))?n=(o===0?"":n.substring(0,o))+n.substring(u+1):o=u}}return n===""?null:n}function Ii(e,t=!1){var r=t?" !important;":";",n="";for(var s in e){var i=e[s];i!=null&&i!==""&&(n+=" "+s+": "+i+r)}return n}function xs(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ol(e,t){if(t){var r="",n,s;if(Array.isArray(t)?(n=t[0],s=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,o=0,u=!1,c=[];n&&c.push(...Object.keys(n).map(xs)),s&&c.push(...Object.keys(s).map(xs));var d=0,m=-1;const F=e.length;for(var T=0;T<F;T++){var $=e[T];if(u?$==="/"&&e[T-1]==="*"&&(u=!1):i?i===$&&(i=!1):$==="/"&&e[T+1]==="*"?u=!0:$==='"'||$==="'"?i=$:$==="("?o++:$===")"&&o--,!u&&i===!1&&o===0){if($===":"&&m===-1)m=T;else if($===";"||T===F-1){if(m!==-1){var C=xs(e.substring(d,m).trim());if(!c.includes(C)){$!==";"&&T++;var D=e.substring(d,T).trim();r+=" "+D+";"}}d=T+1,m=-1}}}}return n&&(r+=Ii(n)),s&&(r+=Ii(s,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Le(e,t,r,n,s,i){var o=e.__className;if(o!==r||o===void 0){var u=al(r,n,i);u==null?e.removeAttribute("class"):t?e.className=u:e.setAttribute("class",u),e.__className=r}else if(i&&s!==i)for(var c in i){var d=!!i[c];(s==null||d!==!!s[c])&&e.classList.toggle(c,d)}return i}function ys(e,t={},r,n){for(var s in r){var i=r[s];t[s]!==i&&(r[s]==null?e.style.removeProperty(s):e.style.setProperty(s,i,n))}}function Ae(e,t,r,n){var s=e.__style;if(s!==t){var i=ol(t,n);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else n&&(Array.isArray(n)?(ys(e,r?.[0],n[0]),ys(e,r?.[1],n[1],"important")):ys(e,r,n));return n}function Qr(e,t,r=!1){if(e.multiple){if(t==null)return;if(!pr(t))return lo();for(var n of e.options)n.selected=t.includes(Mr(n));return}for(n of e.options){var s=Mr(n);if(Io(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Fn(e){var t=new MutationObserver(()=>{Qr(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),vs(()=>{t.disconnect()})}function Kn(e,t,r=t){var n=!0;fs(e,"change",s=>{var i=s?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(i),Mr);else{var u=e.querySelector(i)??e.querySelector("option:not([disabled])");o=u&&Mr(u)}r(o)}),Ct(()=>{var s=t();if(Qr(e,s,n),n&&s===void 0){var i=e.querySelector(":checked");i!==null&&(s=Mr(i),r(s))}e.__value=s,n=!1}),Fn(e)}function Mr(e){return"__value"in e?e.__value:e.value}const sr=Symbol("class"),wr=Symbol("style"),An=Symbol("is custom element"),Bn=Symbol("is html");function ll(e,t){var r=si(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function ri(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function yt(e,t,r,n){var s=si(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Ba]=r),r==null?e.removeAttribute(t):typeof r!="string"&&On(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function cl(e,t,r,n,s=!1,i=!1){var o=si(e),u=o[An],c=!o[Bn],d=t||{},m=e.tagName==="OPTION";for(var T in t)T in r||(r[T]=null);r.class?r.class=Jr(r.class):(n||r[sr])&&(r.class=null),r[wr]&&(r.style??=null);var $=On(e);for(const P in r){let K=r[P];if(m&&P==="value"&&K==null){e.value=e.__value="",d[P]=K;continue}if(P==="class"){var C=e.namespaceURI==="http://www.w3.org/1999/xhtml";Le(e,C,K,n,t?.[sr],r[sr]),d[P]=K,d[sr]=r[sr];continue}if(P==="style"){Ae(e,K,t?.[wr],r[wr]),d[P]=K,d[wr]=r[wr];continue}var D=d[P];if(!(K===D&&!(K===void 0&&e.hasAttribute(P)))){d[P]=K;var F=P[0]+P[1];if(F!=="$$")if(F==="on"){const L={},B="$$"+P;let J=P.slice(2);var g=Uo(J);if(jo(J)&&(J=J.slice(0,-7),L.capture=!0),!g&&D){if(K!=null)continue;e.removeEventListener(J,d[B],L),d[B]=null}if(K!=null)if(g)e[`__${J}`]=K,Pt([J]);else{let re=function(ve){d[P].call(this,ve)};d[B]=En(J,e,re,L)}else g&&(e[`__${J}`]=void 0)}else if(P==="style")yt(e,P,K);else if(P==="autofocus")To(e,!!K);else if(!u&&(P==="__value"||P==="value"&&K!=null))e.value=e.__value=K;else if(P==="selected"&&m)ri(e,K);else{var q=P;c||(q=Yo(q));var x=q==="defaultValue"||q==="defaultChecked";if(K==null&&!u&&!x)if(o[P]=null,q==="value"||q==="checked"){let L=e;const B=t===void 0;if(q==="value"){let J=L.defaultValue;L.removeAttribute(q),L.defaultValue=J,L.value=L.__value=B?J:null}else{let J=L.defaultChecked;L.removeAttribute(q),L.defaultChecked=J,L.checked=B?J:!1}}else e.removeAttribute(P);else x||$.includes(q)&&(u||typeof K!="string")?(e[q]=K,q in o&&(o[q]=je)):typeof K!="function"&&yt(e,q,K)}}}return d}function Ls(e,t,r=[],n=[],s,i=!1,o=!1){dn(r,n,u=>{var c=void 0,d={},m=e.nodeName==="SELECT",T=!1;if(Jt(()=>{var C=t(...u.map(f$1)),D=cl(e,c,C,s,i,o);T&&m&&"value"in C&&Qr(e,C.value);for(let g of Object.getOwnPropertySymbols(d))C[g]||Xe(d[g]);for(let g of Object.getOwnPropertySymbols(C)){var F=C[g];g.description===oo&&(!c||F!==c[g])&&(d[g]&&Xe(d[g]),d[g]=et(()=>il(e,()=>F))),D[g]=F}c=D}),m){var $=e;Ct(()=>{Qr($,c.value,!0),Fn($)})}T=!0})}function si(e){return e.__attributes??={[An]:e.nodeName.includes("-"),[Bn]:e.namespaceURI===ao}}var $i=new Map;function On(e){var t=e.getAttribute("is")||e.nodeName,r=$i.get(t);if(r)return r;$i.set(t,r=[]);for(var n,s=e,i=Element.prototype;i!==s;){n=Yi(s);for(var o in n)n[o].set&&r.push(o);s=Gs(s)}return r}function ii(e,t,r=t){var n=new WeakSet;fs(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=ks(e)?Ss(i):i,r(i),Fe!==null&&n.add(Fe),await Bo(),i!==(i=t())){var o=e.selectionStart,u=e.selectionEnd;e.value=i??"",u!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(u,e.value.length))}}),_$1(t)==null&&e.value&&(r(ks(e)?Ss(e.value):e.value),Fe!==null&&n.add(Fe)),Zt(()=>{var s=t();if(e===document.activeElement){var i=Ur??Fe;if(n.has(i))return}ks(e)&&s===Ss(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function jn(e,t,r=t){fs(e,"change",n=>{var s=n?e.defaultChecked:e.checked;r(s)}),_$1(t)==null&&r(e.checked),Zt(()=>{var n=t();e.checked=!!n})}function ks(e){var t=e.type;return t==="number"||t==="range"}function Ss(e){return e===""?null:+e}function dl(e,t,r=t){fs(e,"change",()=>{r(e.files)}),Zt(()=>{e.files=t()})}function Di(e,t){return e===t||e?.[xt]===t}function ps(e={},t,r,n){return Ct(()=>{var s,i;return Zt(()=>{s=i,i=[],_$1(()=>{e!==r(...i)&&(t(e,...i),s&&Di(r(...s),e)&&t(null,...s))})}),()=>{Vt(()=>{i&&Di(r(...i),e)&&t(null,...i)})}}),e}function ni(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}function Me(e=!1){const t=Be,r=t.l.u;if(!r)return;let n=()=>z(t.s);if(e){let s=0,i={};const o=Vr(()=>{let u=!1;const c=t.s;for(const d in c)c[d]!==i[d]&&(i[d]=c[d],u=!0);return u&&s++,s});n=()=>f$1(o)}r.b.length&&Po(()=>{Ti(t,n),Yr(r.b)}),Xr(()=>{const s=_$1(()=>r.m.map(Ka));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&Xr(()=>{Ti(t,n),Yr(r.a)})}function Ti(e,t){if(e.l.s)for(const r of e.l.s)f$1(r);t()}function st(e,t){var r=e.$$events?.[t.type],n=pr(r)?r.slice():r==null?[]:[r];for(var s of n)s.call(this,t)}function ai(e,t,r){if(e==null)return t(void 0),r&&r(void 0),tt;const n=_$1(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const tr=[];function ul(e,t){return{subscribe:xe(e,t).subscribe}}function xe(e,t=tt){let r=null;const n=new Set;function s(u){if(Hs(e,u)&&(e=u,r)){const c=!tr.length;for(const d of n)d[1](),tr.push(d,e);if(c){for(let d=0;d<tr.length;d+=2)tr[d][0](tr[d+1]);tr.length=0}}}function i(u){s(u(e))}function o(u,c=tt){const d=[u,c];return n.add(d),n.size===1&&(r=t(s,i)||tt),u(e),()=>{n.delete(d),n.size===0&&r&&(r(),r=null)}}return{set:s,update:i,subscribe:o}}function _e(e,t,r){const n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return ul(r,(o,u)=>{let c=!1;const d=[];let m=0,T=tt;const $=()=>{if(m)return;T();const D=t(n?d[0]:d,o,u);i?o(D):T=typeof D=="function"?D:tt},C=s.map((D,F)=>ai(D,g=>{d[F]=g,m&=~(1<<F),c&&$()},()=>{m|=1<<F}));return c=!0,$(),function(){Yr(C),T(),c=!1}})}function Pe(e){let t;return ai(e,r=>t=r)(),t}let Or=!1,Ns=Symbol();function fe(e,t,r){const n=r[t]??={store:null,source:Y(void 0),unsubscribe:tt};if(n.store!==e&&!(Ns in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=tt;else{var s=!0;n.unsubscribe=ai(e,i=>{s?n.source.v=i:E(n.source,i)}),s=!1}return e&&Ns in r?Pe(e):f$1(n.source)}function kt(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=tt),e}function ir(e,t){return e.set(t),t}function Ue(){const e={};function t(){vs(()=>{for(var r in e)e[r].unsubscribe();Wr(e,Ns,{enumerable:!1,value:!0})})}return[e,t]}function fl(e){var t=Or;try{return Or=!1,[e(),Or]}finally{Or=t}}const vl={get(e,t){if(!e.exclude.includes(t))return f$1(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){if(!(t in e.special)){var n=he;try{vt(e.parent_effect),e.special[t]=U({get[t](){return e.props[t]}},t,en)}finally{vt(n)}}return e.special[t](r),zs(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),zs(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function es(e,t){return new Proxy({props:e,exclude:t,special:{},version:Et(0),parent_effect:he},vl)}const pl={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(br(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let s=e.props[n];br(s)&&(s=s());const i=Tt(s,t);if(i&&i.set)return i.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(br(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const s=Tt(n,t);return s&&!s.configurable&&(s.configurable=!0),s}}},has(e,t){if(t===xt||t===Zi)return!1;for(let r of e.props)if(br(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props)if(br(r)&&(r=r()),!!r){for(const n in r)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n)}return t}};function hl(...e){return new Proxy({props:e},pl)}function U(e,t,r,n){var s=!mr||(r&ro)!==0,i=(r&so)!==0,o=(r&io)!==0,u=n,c=!0,d=()=>(c&&(c=!1,u=o?_$1(n):n),u),m;if(i){var T=xt in e||Zi in e;m=Tt(e,t)?.set??(T&&t in e?P=>e[t]=P:void 0)}var $,C=!1;i?[$,C]=fl(()=>e[t]):$=e[t],$===void 0&&n!==void 0&&($=d(),m&&(s&&Ya(),m($)));var D;if(s?D=()=>{var P=e[t];return P===void 0?d():(c=!0,P)}:D=()=>{var P=e[t];return P!==void 0&&(u=void 0),P===void 0?u:P},s&&(r&en)===0)return D;if(m){var F=e.$$legacy;return(function(P,K){return arguments.length>0?((!s||!K||F||C)&&m(K?D():P),P):D()})}var g=!1,q=((r&to)!==0?Vr:Er)(()=>(g=!1,D()));i&&f$1(q);var x=he;return(function(P,K){if(arguments.length>0){const L=K?f$1(q):s&&i?Mt(P):P;return E(q,L),g=!0,u!==void 0&&(u=L),P}return Qt&&g||(x.f&Ht)!==0?q.v:f$1(q)})}function qr(e){Be===null&&Ji(),mr&&Be.l!==null?gl(Be).m.push(e):Xr(()=>{const t=_$1(e);if(typeof t=="function")return t})}function ml(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function pt(){const e=Be;return e===null&&Ji(),(t,r,n)=>{const s=e.s.$$events?.[t];if(s){const i=pr(s)?s.slice():[s],o=ml(t,r,n);for(const u of i)u.call(e.x,o);return!o.defaultPrevented}return!0}}function gl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}class bl{constructor(t){this.config=t,this.checkDataCoordinator=createCheckDataCoordinator(),t.comparison&&(this.comparisonDataCoordinator=createComparisonDataCoordinator())}}async function wl(e){const t=await createConfig(e);return new bl(t)}const _l="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(_l);po();function qs(e){const t=r=>{e&&!e.contains(r.target)&&!r.defaultPrevented&&(r.stopPropagation(),e.dispatchEvent(new CustomEvent("clickout")))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function oi(e){const t=e.target;return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||t.isContentEditable}var xl=Nr("<g><!></g>");function yl(e,t){oe(t,!1);let r=870711;function n(){return r+=1,`fa-${r.toString(16)}`}let s=Y(""),i=U(t,"data",8);function o(d){if(!d||!d.raw)return"";let m=d.raw;const T={};return m=m.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,($,C)=>{const D=n();return T[C]=D,` id="${D}"`}),m=m.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,($,C,D,F)=>{const g=C||F;return!g||!T[g]?$:`#${T[g]}`}),m}Ge(()=>z(i()),()=>{E(s,o(i()))}),rt();var u=xl(),c=b$1(u);ze(c,()=>f$1(s),!0),M(e,u),le()}var kl=Nr("<svg><!></svg>");const Sl={hash:"svelte-4tj8j2",code:`.fa-icon.svelte-4tj8j2 {display:inline-block;fill:currentColor;}.fa-flip-horizontal.svelte-4tj8j2 {transform:scale(-1, 1);}.fa-flip-vertical.svelte-4tj8j2 {transform:scale(1, -1);}.fa-spin.svelte-4tj8j2 {
    animation: svelte-4tj8j2-fa-spin 1s 0s infinite linear;}.fa-inverse.svelte-4tj8j2 {color:#fff;}.fa-pulse.svelte-4tj8j2 {
    animation: svelte-4tj8j2-fa-spin 1s infinite steps(8);}
  @keyframes svelte-4tj8j2-fa-spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }`};function Ml(e,t){const r=es(t,["children","$$slots","$$events","$$legacy"]),n=es(r,["class","width","height","box","spin","inverse","pulse","flip","style","label"]);de(e,Sl);let s=U(t,"class",8,""),i=U(t,"width",8),o=U(t,"height",8),u=U(t,"box",8,"0 0 0 0"),c=U(t,"spin",8,!1),d=U(t,"inverse",8,!1),m=U(t,"pulse",8,!1),T=U(t,"flip",8,"none"),$=U(t,"style",8,""),C=U(t,"label",8,"");var D=kl();Ls(D,g=>({version:"1.1",class:`fa-icon ${s()??""}`,width:i(),height:o(),"aria-label":C(),role:C()?"img":"presentation",viewBox:u(),style:$(),...n,[sr]:g}),[()=>({"fa-spin":c(),"fa-pulse":m(),"fa-inverse":d(),"fa-flip-horizontal":T()==="horizontal","fa-flip-vertical":T()==="vertical"})],void 0,"svelte-4tj8j2");var F=b$1(D);ti(F,t,"default",{},null),M(e,D)}var Rl=Nr("<path></path>"),Cl=Nr("<polygon></polygon>"),Il=Nr("<!><!><!>",1);function nr(e,t){const r=es(t,["children","$$slots","$$events","$$legacy"]),n=es(r,["class","data","scale","spin","inverse","pulse","flip","label","style"]);oe(t,!1);let s=U(t,"class",8,""),i=U(t,"data",8),o=Y(),u=U(t,"scale",8,1),c=U(t,"spin",8,!1),d=U(t,"inverse",8,!1),m=U(t,"pulse",8,!1),T=U(t,"flip",8,void 0),$=U(t,"label",8,""),C=U(t,"style",8,""),D=1,F=Y(10),g=Y(10),q=Y(),x=Y();function P(ye){let Se,Ne;if(ye)if("definition"in ye){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in ye&&"icon"in ye){Se=ye.iconName;const[Ke,Ar,,,hi]=ye.icon,gi=Array.isArray(hi)?hi:[hi];Ne={width:Ke,height:Ar,paths:gi.map(Gi=>({d:Gi}))}}else Se=Object.keys(ye)[0],Ne=ye[Se];else return;return Ne}function K(){let ye=1;return typeof u()<"u"&&(ye=Number(u())),isNaN(ye)||ye<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),D):ye*D}function L(){return f$1(o)?`0 0 ${f$1(o).width} ${f$1(o).height}`:`0 0 ${f$1(F)} ${f$1(g)}`}function B(){return f$1(o)?Math.max(f$1(o).width,f$1(o).height)/16:1}function J(){return f$1(o)?f$1(o).width/B()*K():0}function re(){return f$1(o)?f$1(o).height/B()*K():0}function ve(){let ye="";C()!==null&&(ye+=C());let Se=K();return Se===1?ye.length===0?"":ye:(ye!==""&&!ye.endsWith(";")&&(ye+="; "),`${ye}font-size: ${Se}em`)}Ge(()=>(z(i()),z(C()),z(u())),()=>{E(o,P(i())),C(),u(),E(F,J()),E(g,re()),E(q,ve()),E(x,L())}),rt(),Me(),Ml(e,hl({get label(){return $()},get width(){return f$1(F)},get height(){return f$1(g)},get box(){return f$1(x)},get style(){return f$1(q)},get spin(){return c()},get flip(){return T()},get inverse(){return d()},get pulse(){return m()},get class(){return s()}},()=>n,{children:(ye,Se)=>{var Ne=ge(),Ke=W(Ne);ti(Ke,t,"default",{},Ar=>{var hi=Il(),gi=W(hi);Ce(gi,1,()=>(f$1(o),_$1(()=>f$1(o)?.paths||[])),Te,(Re,ie)=>{var ke=Rl();Ls(ke,()=>({...f$1(ie)})),M(Re,ke)});var Gi=R(gi);Ce(Gi,1,()=>(f$1(o),_$1(()=>f$1(o)?.polygons||[])),Te,(Re,ie)=>{var ke=Cl();Ls(ke,()=>({...f$1(ie)})),M(Re,ke)});var bs=R(Gi);{var ua=Re=>{yl(Re,{get data(){return f$1(o)},set data(ie){E(o,ie)},$$legacy:!0})};N(bs,Re=>{f$1(o),_$1(()=>f$1(o)?.raw)&&Re(ua)})}M(Ar,hi)}),M(ye,Ne)},$$slots:{default:!0}})),le()}var $l=(e,t)=>t.onClick?.(),Dl=V("<button><!></button>");const Tl={hash:"svelte-1tubfyr",code:".button.svelte-1tubfyr {display:flex;align-items:center;justify-content:center;padding:4px 8px;background:var(--button-bg-normal);border:1px solid var(--border-color-normal);border-radius:var(--button-border-radius);color:var(--text-color-primary);font-family:inherit;font-size:1.25rem;cursor:pointer;}.button.svelte-1tubfyr:hover:not(:disabled) {background-color:var(--button-bg-hover);border-color:var(--button-border-hover);}.button.primary.svelte-1tubfyr {background-color:var(--button-bg-primary-normal);border-color:var(--button-bg-primary-normal);}.button.primary.svelte-1tubfyr:hover:not(:disabled) {background-color:var(--button-bg-primary-hover);border-color:var(--button-border-hover);}.button.svelte-1tubfyr:disabled {opacity:0.5;cursor:not-allowed;}"};function ts(e,t){oe(t,!0),de(e,Tl);let r=U(t,"class",3,""),n=U(t,"disabled",3,!1),s=U(t,"primary",3,!1);var i=Dl();i.__click=[$l,t];var o=b$1(i);Nn(o,()=>t.children??tt),O(()=>{Le(i,1,`button ${r()??""} ${s()?"primary":""}`,"svelte-1tubfyr"),i.disabled=n(),yt(i,"aria-label",t.ariaLabel)}),M(e,i),le()}Pt(["click"]);const zl={hash:"svelte-16mzbar",code:".button.icon-button {width:24px;min-width:24px;height:24px;min-height:24px;padding:0 !important;}.icon-button .icon {width:16px;height:16px;}"};function Gn(e,t){de(e,zl);let r=U(t,"class",3,"");ts(e,{get class(){return`icon-button ${r()??""}`},get disabled(){return t.disabled},get ariaLabel(){return t.ariaLabel},get onClick(){return t.onClick},children:(n,s)=>{nr(n,{class:"icon",get data(){return t.icon}})},$$slots:{default:!0}})}function li(e,t){Gn(e,{get icon(){return faXmark},ariaLabel:"Close",get onClick(){return t.onClick}})}var Vl=V('<hr class="svelte-1qkoku4"/>'),El=V('<li class="svelte-1qkoku4"><button role="menuitem"><i></i> </button></li>'),Pl=V('<nav class="svelte-1qkoku4"><div class="navbar svelte-1qkoku4" id="navbar"><ul class="svelte-1qkoku4"></ul></div></nav>');const Ll={hash:"svelte-1qkoku4",code:".svelte-1qkoku4 {padding:0;margin:0;}nav.svelte-1qkoku4 {z-index:200;}.navbar.svelte-1qkoku4 {display:inline-flex;flex-direction:column;width:200px;background-color:#fff;border-radius:0.4rem;box-shadow:0 0.2rem 0.4rem rgba(0, 0, 0, 0.8);overflow:hidden;}.navbar.svelte-1qkoku4 ul:where(.svelte-1qkoku4) {margin:6px;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) {display:block;list-style-type:none;width:1fr;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4) {font-family:Roboto, sans-serif;font-weight:700;font-size:1rem;color:#222;width:100%;height:30px;text-align:left;border:0px;background-color:#fff;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button.disabled:where(.svelte-1qkoku4) {color:#888;pointer-events:none;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4):not(.disabled):hover {color:#000;text-align:left;border-radius:0.3rem;background-color:#eee;}ul.svelte-1qkoku4 li:where(.svelte-1qkoku4) button:where(.svelte-1qkoku4) i:where(.svelte-1qkoku4) {padding:0px 15px 0px 10px;}hr.svelte-1qkoku4 {border:none;border-bottom:1px solid #ccc;margin:5px 0px;}"};function hs(e,t){oe(t,!1),de(e,Ll);let r=U(t,"items",8),n=U(t,"initialEvent",8);const s=pt();let i=Y({x:0,y:0}),o=Y(!1);function u(T){s("item-selected",T)}Ge(()=>z(n()),()=>{n()?(E(i,{x:n().clientX,y:n().clientY+6}),E(o,!0)):E(o,!1)}),rt(),Me();var c=ge(),d=W(c);{var m=T=>{var $=Pl(),C=b$1($),D=b$1(C);Ce(D,5,r,Te,(F,g)=>{var q=ge(),x=W(q);{var P=L=>{var B=Vl();M(L,B)},K=L=>{var B=El(),J=b$1(B);let re;var ve=b$1(J),ye=R(ve,1,!0);O(Se=>{re=Le(J,1,"svelte-1qkoku4",null,re,Se),Le(ve,1,Jr((f$1(g),_$1(()=>f$1(g).iconClass))),"svelte-1qkoku4"),j(ye,(f$1(g),_$1(()=>f$1(g).displayText)))},[()=>({disabled:f$1(g).disabled===!0})]),me("click",J,()=>u(f$1(g).key)),M(L,B)};N(x,L=>{f$1(g),_$1(()=>f$1(g).key=="hr")?L(P):L(K,!1)})}M(F,q)}),Ps($,F=>qs?.(F)),Ct(()=>me("clickout",$,function(F){st.call(this,t,F)})),O(()=>Ae($,`position: fixed; top:${f$1(i),_$1(()=>f$1(i).y)??""}px; left:${f$1(i),_$1(()=>f$1(i).x)??""}px`)),M(T,$)};N(d,T=>{f$1(o)&&T(m)})}M(e,c),le()}const Nl={hash:"svelte-j0hnxf",code:".button.icon-button.reload-button .icon {width:10px;height:10px;}"};function ql(e,t){de(e,Nl),Gn(e,{get icon(){return faRotateRight},class:"reload-button",get disabled(){return t.disabled},ariaLabel:"Reload",get onClick(){return t.onClick}})}function Fl(e,t){e.target===e.currentTarget&&t()}function Kl(e,t){e.key==="Escape"&&t()}var Al=V('<div class="dialog-backdrop svelte-u4vwrf" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="dialog-content svelte-u4vwrf"><div class="dialog-header svelte-u4vwrf"><h2 id="dialog-title" class="dialog-title svelte-u4vwrf"> </h2> <!></div> <div class="dialog-body svelte-u4vwrf"><!></div></div></div>');const Bl={hash:"svelte-u4vwrf",code:".dialog-backdrop.svelte-u4vwrf {position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5);display:flex;justify-content:center;align-items:center;z-index:1000;}.dialog-content.svelte-u4vwrf {background-color:var(--panel-bg);border:1px solid var(--panel-border);border-radius:var(--panel-border-radius);box-shadow:0 4px 6px rgba(0, 0, 0, 0.3);width:90%;max-width:500px;max-height:90vh;overflow:auto;}.dialog-header.svelte-u4vwrf {display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--panel-border);}.dialog-title.svelte-u4vwrf {margin-right:1rem;font-size:1.25rem;font-weight:700;color:var(--text-color-primary);}.dialog-body.svelte-u4vwrf {padding:1.5rem;}"};function Ol(e,t){oe(t,!0),de(e,Bl);let r=U(t,"open",15,!1);function n(){r(!1)}var s=ge(),i=W(s);{var o=u=>{var c=Al();c.__click=[Fl,n],c.__keydown=[Kl,n];var d=b$1(c),m=b$1(d),T=b$1(m),$=b$1(T),C=R(T,2);li(C,{onClick:n});var D=R(m,2),F=b$1(D);Nn(F,()=>t.children??tt),O(()=>j($,t.title)),M(u,c)};N(i,u=>{r()&&u(o)})}M(e,s),le()}Pt(["click","keydown"]);function jl(e,t){e.key==="Enter"&&(e.preventDefault(),t())}var Gl=V('<div class="bundle-copy-dialog-form svelte-sgftfs"><label for="bundle-name-input" class="bundle-copy-dialog-label svelte-sgftfs">Bundle name</label> <input id="bundle-name-input" type="text" class="bundle-copy-dialog-input svelte-sgftfs" aria-label="Bundle name"/> <div class="bundle-copy-dialog-actions svelte-sgftfs"><!> <!></div></div>');const Ul={hash:"svelte-sgftfs",code:".bundle-copy-dialog-form.svelte-sgftfs {display:flex;flex-direction:column;gap:1rem;}.bundle-copy-dialog-label.svelte-sgftfs {font-weight:700;color:var(--text-color-primary);}.bundle-copy-dialog-input.svelte-sgftfs {flex:1;padding:0.5rem;background-color:var(--input-bg);border:1px solid var(--border-color-normal);border-radius:var(--input-border-radius);color:var(--text-color-primary);font-family:inherit;font-size:inherit;}.bundle-copy-dialog-input.svelte-sgftfs:focus {outline:none;border-color:var(--border-color-focused);box-shadow:0 0 0 1px var(--border-color-focused);}.bundle-copy-dialog-actions.svelte-sgftfs {display:flex;justify-content:flex-end;gap:1rem;margin-top:0.5rem;}"};function Wl(e,t){oe(t,!0),de(e,Ul);let r=U(t,"open",15,!1),n=Oe(Mt(t.initialName));function s(){t.onSave?.(t.srcBundle,f$1(n)),r(!1)}function i(){r(!1)}Xr(()=>{r()&&E(n,t.initialName,!0)}),Ol(e,{title:"Save Bundle Copy",get open(){return r()},set open(o){r(o)},children:(o,u)=>{var c=Gl(),d=R(b$1(c),2);d.__keydown=[jl,s];var m=R(d,2),T=b$1(m);ts(T,{onClick:i,children:(C,D)=>{var F=or("Cancel");M(C,F)},$$slots:{default:!0}});var $=R(T,2);ts($,{primary:!0,onClick:s,children:(C,D)=>{var F=or("Save");M(C,F)},$$slots:{default:!0}}),ii(d,()=>f$1(n),C=>E(n,C)),M(o,c)},$$slots:{default:!0}}),le()}Pt(["keydown"]);var Yl=(e,t)=>t("name"),Hl=V('<span class="bundle-selector-sort-indicator svelte-zzpifv"> </span>'),Xl=(e,t)=>t("date"),Zl=V('<span class="bundle-selector-sort-indicator svelte-zzpifv"> </span>'),Jl=V('<div class="bundle-selector-empty svelte-zzpifv"></div>'),Ql=V('<div class="bundle-selector-empty svelte-zzpifv">No bundles found</div>'),ec=(e,t,r)=>t.onSelect?.(f$1(r)),tc=(e,t,r)=>t(e,f$1(r)),rc=(e,t,r)=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.onSelect?.(f$1(r)))},sc=V('<div role="option" aria-selected="false" tabindex="0"><!> <span class="bundle-selector-item-bundle-name svelte-zzpifv"> </span> <span class="bundle-selector-item-bundle-date svelte-zzpifv"> </span></div>'),ic=V('<div><div class="bundle-selector-header svelte-zzpifv"><div class="bundle-selector-search-bar svelte-zzpifv"><input type="text" placeholder="Search bundles..." class="bundle-selector-search-input svelte-zzpifv" role="searchbox" aria-label="Search bundles"/></div></div> <div class="bundle-selector-item-container svelte-zzpifv"><div class="bundle-selector-item-header svelte-zzpifv"><div class="bundle-selector-header-download svelte-zzpifv"></div> <button class="bundle-selector-sort-button svelte-zzpifv">Name <!></button> <button class="bundle-selector-sort-button svelte-zzpifv">Last Modified <!></button></div> <div class="bundle-selector-item-content svelte-zzpifv" role="listbox"><!></div></div> <div class="bundle-selector-status-bar svelte-zzpifv"><div class="bundle-selector-status-message svelte-zzpifv"><!></div> <!></div></div> <!> <!>',1);const nc={hash:"svelte-zzpifv",code:".bundle-selector.svelte-zzpifv {display:flex;flex-direction:column;width:100%;height:100%;background-color:var(--panel-bg);overflow:hidden;}.bundle-selector-header.svelte-zzpifv {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);border-radius:var(--panel-border-radius) var(--panel-border-radius) 0 0;}.bundle-selector-search-bar.svelte-zzpifv {display:flex;flex:1;}.bundle-selector-search-input.svelte-zzpifv {width:100%;height:2rem;padding:0.5rem;background-color:var(--input-bg);border:1px solid var(--border-color-normal);border-radius:var(--input-border-radius);color:var(--text-color-primary);font-family:inherit;}.bundle-selector-search-input.svelte-zzpifv:focus {outline:none;border-color:var(--border-color-focused);box-shadow:0 0 0 1px var(--border-color-focused);}.bundle-selector-empty.svelte-zzpifv {display:flex;align-items:center;justify-content:center;height:100%;min-height:4rem;color:var(--text-color-secondary);font-style:italic;}.bundle-selector-item-container.svelte-zzpifv {display:flex;flex-direction:column;flex:1;overflow:hidden;}.bundle-selector-item-header.svelte-zzpifv {display:grid;grid-template-columns:18px 1fr auto;gap:1rem;padding:0.5rem 1.5rem;background-color:#333;border-bottom:1px solid var(--panel-border);font-weight:700;}.bundle-selector-header-download.svelte-zzpifv {width:18px;}.bundle-selector-sort-button.svelte-zzpifv {display:flex;align-items:flex-start;gap:0.5rem;background:none;border:none;padding:0;color:var(--text-color-primary);font:inherit;cursor:pointer;}.bundle-selector-sort-button.svelte-zzpifv:hover {color:var(--link-color-hover);}.bundle-selector-sort-indicator.svelte-zzpifv {margin-top:-0.1rem;}.bundle-selector-item-content.svelte-zzpifv {flex:1;overflow-y:auto;}.bundle-selector-item-row.svelte-zzpifv {display:grid;grid-template-columns:18px 1fr auto;gap:1rem;align-items:center;padding:0.5rem 1.5rem;user-select:none;cursor:pointer;}.bundle-selector-item-row.svelte-zzpifv:hover {background-color:#444;}.bundle-selector-item-row.svelte-zzpifv:last-child {border-bottom:none;}.bundle-selector-item-bundle-name.svelte-zzpifv {overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.bundle-selector.left.svelte-zzpifv .bundle-selector-item-row.active:where(.svelte-zzpifv) .bundle-selector-item-bundle-name:where(.svelte-zzpifv) {color:var(--dataset-0);}.bundle-selector.right.svelte-zzpifv .bundle-selector-item-row.active:where(.svelte-zzpifv) .bundle-selector-item-bundle-name:where(.svelte-zzpifv) {color:var(--dataset-1);}.bundle-selector-item-bundle-date.svelte-zzpifv {color:var(--text-color-secondary);white-space:nowrap;}.bundle-selector-status-bar.svelte-zzpifv {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-footer-bg);border-top:1px solid var(--panel-border);}.bundle-selector-status-message.svelte-zzpifv {color:var(--text-color-secondary);}"};function ac(e,t){oe(t,!0),de(e,nc);let r=ht(()=>t.side==="left"?t.bundleManager.activeBundleUrlL:t.bundleManager.activeBundleUrlR),n=ht(()=>t.bundleManager.bundles),s=ht(()=>t.bundleManager.loading),i=ht(()=>t.bundleManager.error),o=Oe(""),u=Oe("date"),c=Oe("desc"),d=Oe(void 0),m=Oe(Mt([])),T=Oe(void 0),$=Oe(!1),C=Oe("");const D=ht(()=>{let te=[...f$1(n)];if(f$1(o)){const se=f$1(n).map($e=>({bundle:$e,name:$e.remote?.name||$e.local?.name||""}));te=Ea.go(f$1(o),se,{keys:["name"],threshold:-1e4}).map($e=>$e.obj.bundle)}return te.sort((se,$e)=>{const Ie=f$1(c)==="asc"?1:-1;if(f$1(u)==="date"){const Ye=se.remote?.lastModified||se.local?.lastModified||"",Je=$e.remote?.lastModified||$e.local?.lastModified||"";return Ie*(new Date(Ye).getTime()-new Date(Je).getTime())}else{const Ye=se.remote?.name||se.local?.name||"",Je=$e.remote?.name||$e.local?.name||"";return Ie*Ye.localeCompare(Je)}})});qr(()=>{t.bundleManager.load()});function F(te){f$1(u)===te?E(c,f$1(c)==="asc"?"desc":"asc",!0):(E(u,te,!0),E(c,"desc"))}function g(te){const se=new Date(te),$e=se.toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"}),Ie=se.toLocaleTimeString(void 0,{hour12:!0,hour:"numeric",minute:"2-digit"});return`${$e} at ${Ie}`}function q(){t.bundleManager.load()}function x(te,se){te.preventDefault(),E(d,te,!0),E(T,se,!0),se.remote?E(m,[{key:"save-to-local",displayText:"Save to Local"}],!0):se.local&&E(m,[{key:"save-copy",displayText:"Save Copy..."}],!0)}function P(te){const se=te.detail;if(se==="save-to-local"&&f$1(T))t.bundleManager.downloadBundle(f$1(T));else if(se==="save-copy"&&f$1(T)){const $e=f$1(T).local?.name||"";E(C,`${$e} copy`),E($,!0)}E(d,void 0)}function K(te,se){t.bundleManager.copyBundle(te,se)}var L=ic(),B=W(L),J=b$1(B),re=b$1(J),ve=b$1(re),ye=R(J,2),Se=b$1(ye),Ne=R(b$1(Se),2);Ne.__click=[Yl,F];var Ke=R(b$1(Ne));{var Ar=te=>{var se=Hl(),$e=b$1(se);O(()=>j($e,f$1(c)==="asc"?"":"")),M(te,se)};N(Ke,te=>{f$1(u)==="name"&&te(Ar)})}var hi=R(Ne,2);hi.__click=[Xl,F];var gi=R(b$1(hi));{var Gi=te=>{var se=Zl(),$e=b$1(se);O(()=>j($e,f$1(c)==="asc"?"":"")),M(te,se)};N(gi,te=>{f$1(u)==="date"&&te(Gi)})}var bs=R(Se,2),ua=b$1(bs);{var Re=te=>{var se=Jl();M(te,se)},ie=te=>{var se=ge(),$e=W(se);{var Ie=Je=>{var pi=Ql();M(Je,pi)},Ye=Je=>{var pi=ge(),Os=W(pi);Ce(Os,17,()=>f$1(D),Te,(vi,Ui)=>{const ca=ht(()=>f$1(Ui).remote?.url===f$1(r)||f$1(Ui).local?.url===f$1(r));var va=sc();let da;va.__click=[ec,t,Ui],va.__contextmenu=[tc,x,Ui],va.__keydown=[rc,t,Ui];var ha=b$1(va);{let _a=ht(()=>f$1(Ui).remote?faCloud:faLaptop);nr(ha,{class:"bundle-selector-item-location",get data(){return f$1(_a)}})}var ya=R(ha,2),mi=b$1(ya),fa=R(ya,2),pa=b$1(fa);O((_a,be)=>{da=Le(va,1,"bundle-selector-item-row svelte-zzpifv",null,da,_a),yt(va,"aria-label",f$1(Ui).remote?.name||f$1(Ui).local?.name||""),j(mi,f$1(Ui).remote?.name||f$1(Ui).local?.name||""),j(pa,be)},[()=>({active:f$1(ca)}),()=>g(f$1(Ui).remote?.lastModified||f$1(Ui).local?.lastModified||"")]),M(vi,va)}),M(Je,pi)};N($e,Je=>{f$1(n).length===0?Je(Ie):Je(Ye,!1)},!0)}M(te,se)};N(ua,te=>{f$1(i)||f$1(s)?te(Re):te(ie,!1)})}var ke=R(ye,2),ue=b$1(ke),G=b$1(ue);{var X=te=>{var se=or("Loading...");M(te,se)},ce=te=>{var se=ge(),$e=W(se);{var Ie=Je=>{var pi=or();O(()=>j(pi,f$1(i))),M(Je,pi)},Ye=Je=>{var pi=or();O(()=>j(pi,`${f$1(n).length??""} ${f$1(n).length===1?"bundle":"bundles"}`)),M(Je,pi)};N($e,Je=>{f$1(i)?Je(Ie):Je(Ye,!1)},!0)}M(te,se)};N(G,te=>{f$1(s)?te(X):te(ce,!1)})}var De=R(ue,2);ql(De,{get disabled(){return f$1(s)},onClick:()=>q()});var qe=R(B,2);{var bt=te=>{hs(te,{get items(){return f$1(m)},get initialEvent(){return f$1(d)},$$events:{"item-selected":P}})};N(qe,te=>{f$1(d)&&te(bt)})}var vr=R(qe,2);Wl(vr,{get srcBundle(){return f$1(T)},get initialName(){return f$1(C)},onSave:K,get open(){return f$1($)},set open(te){E($,te,!0)}}),O(()=>Le(B,1,`bundle-selector ${t.side??""}`,"svelte-zzpifv")),ii(ve,()=>f$1(o),te=>E(o,te)),M(e,L),le()}Pt(["click","contextmenu","keydown"]);var oc=V('<div class="bundle-selector-popover svelte-1sz9kyj"><div class="bundle-selector-popover-header svelte-1sz9kyj"><div class="bundle-selector-popover-header-title svelte-1sz9kyj">Select Bundle</div> <!></div> <!></div>');const lc={hash:"svelte-1sz9kyj",code:".bundle-selector-popover.svelte-1sz9kyj {display:flex;flex-direction:column;flex:1;height:100%;background-color:var(--panel-bg);color:var(--text-color-primary);}.bundle-selector-popover-header.svelte-1sz9kyj {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);}.bundle-selector-popover-header-title.svelte-1sz9kyj {font-size:1.2rem;font-weight:700;}"};function cc(e,t){oe(t,!0),de(e,lc);var r=oc(),n=b$1(r),s=R(b$1(n),2);li(s,{onClick:()=>t.onClose?.()});var i=R(n,2);ac(i,{get side(){return t.side},get bundleManager(){return t.bundleManager},get onSelect(){return t.onSelect}}),M(e,r),le()}var dc=V('<div class="lazy-container svelte-tqw4wl"><!></div>');const uc={hash:"svelte-tqw4wl",code:".lazy-container.svelte-tqw4wl {position:relative;display:flex;height:100%;}"};function Fr(e,t){oe(t,!1),de(e,uc);let r=U(t,"visible",12,!1),n=U(t,"syncInit",8,!1),s=Y();qr(()=>{const c=f$1(s).closest(".scroll-container");if(c===void 0)throw new Error("Lazy component requires an ancestor marked with the 'scroll-container' class");function d(){const T=c.getBoundingClientRect(),$=f$1(s).getBoundingClientRect();return $.bottom>T.top&&$.top<T.bottom&&$.right>T.left&&$.left<T.right}let m=new IntersectionObserver(T=>{const $=T[0].isIntersecting;$&&!r()?r(!0):!$&&r()&&r(!1)},{root:c,rootMargin:"100% 200% 200% 100%"});return m.observe(f$1(s)),n()&&d()&&r(!0),()=>{r(!1),m.disconnect()}}),Me();var i=dc(),o=b$1(i);{var u=c=>{var d=ge(),m=W(d);ti(m,t,"default",{},null),M(c,d)};N(o,c=>{r()&&c(u)})}ps(i,c=>E(s,c),()=>f$1(s)),M(e,i),le()}var fc=V('<div class="graph-inner-container svelte-1nn7ai2"><canvas></canvas></div>');const vc={hash:"svelte-1nn7ai2",code:".graph-inner-container.svelte-1nn7ai2 {position:absolute;top:0;left:0;bottom:0;right:0;}"};function pc(e,t){oe(t,!1),de(e,vc);let r=U(t,"config",8),n=U(t,"viewModel",8),s=`width: ${r().width}rem; height: 20rem;`,i=Y(),o;qr(()=>(o=n().createGraphView(f$1(i)),()=>{o?.destroy(),o=void 0})),Me();var u=fc(),c=b$1(u);ps(c,d=>E(i,d),()=>f$1(i)),O(()=>Ae(u,s)),M(e,u),le()}var hc=V('<div class="legend-item svelte-19bjhkv"> </div>'),mc=V('<div class="legend-container svelte-19bjhkv"></div>');const gc={hash:"svelte-19bjhkv",code:'.legend-container.svelte-19bjhkv {display:flex;flex-direction:row;flex-wrap:wrap;flex:0 0 3.5rem;justify-content:center;align-items:center;width:100%;margin-top:-0.45rem;font-family:"Roboto Condensed";font-weight:700;font-size:1rem;line-height:1.2;}.legend-item.svelte-19bjhkv {margin:0 0.2rem 0.1rem 0.2rem;padding:0.25rem 0.6rem 0.2rem 0.6rem;color:#fff;text-align:center;}'};function bc(e,t){oe(t,!1),de(e,gc);let r=U(t,"graphSpec",8);Me();var n=mc();Ce(n,5,()=>(z(r()),_$1(()=>r().legendItems)),Te,(s,i)=>{var o=hc(),u=b$1(o);O(c=>{Ae(o,`background-color: ${f$1(i),_$1(()=>f$1(i).color)??""};`),j(u,c)},[()=>(f$1(i),_$1(()=>f$1(i).label.toUpperCase()))]),M(s,o)}),M(e,n),le()}var wc=V('<div class="link-row svelte-tkhsbk"> </div>'),_c=V('<div class="link-container svelte-tkhsbk"></div>'),xc=V('<div class="graph-container svelte-tkhsbk"><!></div> <!> <!>',1),yc=V('<div class="message not-shown svelte-tkhsbk"><span>Graph not shown: scenario is invalid in&nbsp;</span> <span> </span></div>'),kc=V('<div class="graph-and-info svelte-tkhsbk"><div><!></div> <!></div>'),Sc=V('<div class="message not-included svelte-tkhsbk"><span>Graph not included in&nbsp;</span> <span> </span></div>'),Mc=V('<div class="context-graph-container svelte-tkhsbk"><!></div>');const Rc={hash:"svelte-tkhsbk",code:'.context-graph-container.svelte-tkhsbk {display:inline-flex;flex-direction:column;flex:0 0 38rem;background-color:#fff;}.graph-and-info.svelte-tkhsbk {display:flex;flex-direction:column;}.graph-title.svelte-tkhsbk {margin:0.5rem 0;padding:0 0.8rem;font-family:"Roboto Condensed";font-size:1.55rem;}.graph-container.svelte-tkhsbk {display:block;position:relative;width:38rem;height:20rem;}.message.svelte-tkhsbk {display:flex;flex:1;min-height:20rem;align-items:center;justify-content:center;color:#aaa;border:solid 1px #fff;}.message.not-included.svelte-tkhsbk {background-color:#555;}.link-container.svelte-tkhsbk {display:flex;flex-direction:column;align-items:flex-start;margin-bottom:0.4rem;}.link-row.svelte-tkhsbk {height:1.2rem;margin:0 0.8rem;color:#999;cursor:pointer;}.link-row.svelte-tkhsbk:hover {color:#000;}'};function rs(e,t){oe(t,!1),de(e,Rc);const r=()=>fe(f$1(o),"$content",n),[n,s]=Ue();let i=U(t,"viewModel",8),o=Y(i().content),u=Y(!1);const c={width:38};let d=Y(f$1(u)),m=Y();function T(g){switch(g.kind){case"url":window.open(g.content,"_blank");break;case"copy":copyTextToClipboard(g.content);break;default:Tr(g.kind)}}Ge(()=>(f$1(u),f$1(d),z(i()),f$1(m)),()=>{(f$1(u)!==f$1(d)||i().requestKey!==f$1(m)?.requestKey)&&(f$1(m)?.clearData(),E(d,f$1(u)),E(m,i()),kt(E(o,i().content),"$content",n),f$1(u)&&i().requestData())}),rt(),Me();var $=Mc(),C=b$1($);{var D=g=>{var q=kc(),x=b$1(q),P=b$1(x);ze(P,()=>(z(i()),_$1(()=>i().graphSpec.title)));var K=R(x,2);{var L=J=>{var re=xc(),ve=W(re),ye=b$1(ve);Fr(ye,{get visible(){return f$1(u)},set visible(Ar){E(u,Ar)},children:(Ar,hi)=>{var gi=ge(),Gi=W(gi);{var bs=ua=>{pc(ua,{get viewModel(){return r(),_$1(()=>r().graphData)},get config(){return c}})};N(Gi,ua=>{r(),_$1(()=>r()&&r().graphData)&&ua(bs)})}M(Ar,gi)},$$slots:{default:!0},$$legacy:!0});var Se=R(ve,2);bc(Se,{get graphSpec(){return z(i()),_$1(()=>i().graphSpec)}});var Ne=R(Se,2);{var Ke=Ar=>{var hi=_c();Ce(hi,5,()=>(z(i()),_$1(()=>i().linkItems)),Te,(gi,Gi)=>{var bs=wc(),ua=b$1(bs);O(()=>j(ua,(f$1(Gi),_$1(()=>f$1(Gi).text)))),me("click",bs,()=>T(f$1(Gi))),M(gi,bs)}),M(Ar,hi)};N(Ne,Ar=>{z(i()),_$1(()=>i().linkItems)&&Ar(Ke)})}M(J,re)},B=J=>{var re=yc(),ve=R(b$1(re),2),ye=b$1(ve);O(()=>{Le(ve,1,Jr((z(i()),_$1(()=>i().datasetClass))),"svelte-tkhsbk"),j(ye,(z(i()),_$1(()=>i().bundleName)))}),M(J,re)};N(K,J=>{z(i()),_$1(()=>i().requestKey)?J(L):J(B,!1)})}O(()=>Le(x,1,(z(i()),_$1(()=>`graph-title ${i().datasetClass}`)),"svelte-tkhsbk")),M(g,q)},F=g=>{var q=Sc(),x=R(b$1(q),2),P=b$1(x);O(()=>{Le(x,1,Jr((z(i()),_$1(()=>i().datasetClass))),"svelte-tkhsbk"),j(P,(z(i()),_$1(()=>i().bundleName)))}),M(g,q)};N(C,g=>{z(i()),_$1(()=>i().graphSpec)?g(D):g(F,!1)})}M(e,$),le(),s()}let Cc=1;class Un{constructor(t,r,n,s,i){this.dataCoordinator=r,this.bundle=n,this.scenario=s,this.graphSpec=i,this.dataRequested=!1,this.dataLoaded=!1;const o=n==="right"?t.bundleR:t.bundleL;if(this.bundleName=o.name,this.datasetClass=`dataset-color-${n==="right"?"1":"0"}`,i){const u=n==="right"?s.specR:s.specL;if(u!==void 0){const c=o.models[0];this.linkItems=c.getGraphLinksForScenario(u,i.id),this.requestKey=`context-graph::${Cc++}::${n}::${i.id}::${s.key}`}else this.linkItems=[];this.writableContent=xe(void 0),this.content=this.writableContent}}requestData(){if(this.requestKey===void 0){this.dataRequested=!0,this.dataLoaded=!0;return}if(this.dataRequested)return;this.dataRequested=!0;const t=this.bundle==="left"?this.scenario.specL:void 0,r=this.bundle==="right"?this.scenario.specR:void 0;this.dataCoordinator.requestGraphData(this.requestKey,"left",t,"right",r,this.graphSpec.id,(n,s)=>{if(!this.dataRequested)return;const i=r?s:n;this.writableContent.set({graphData:i}),this.dataLoaded=!0})}clearData(){this.dataRequested&&(this.writableContent.set(void 0),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}function ci(e,t){if(e===void 0)return t.length+2;if(e===0)return 0;for(let r=0;r<t.length;r++)if(e<t[r])return r+1;return t.length+1}function Wn(e){return e===void 0?!0:e.some((t,r)=>r>0&&r<e.length-1&&t>0)}function Ut(e,t){return`<span class="dataset-color-${t==="left"?0:1}">${e}</span>`}function lr(e){if(!e)return[];const t=-Number.MAX_VALUE/2,r=Number.MAX_VALUE/2,n=[];for(const[s,i]of e.entries())i<t||i>r||n.push({x:s,y:i});return n}let Ic=1;class Yn{constructor(t,r,n,s,i,o,u,c,d,m){this.comparisonConfig=t,this.dataCoordinator=r,this.baselineTestSummary=n,this.sortMode=s,this.kind=i,this.title=o,this.subtitle=u,this.scenario=c,this.datasetKey=d,this.pinnedItemKey=m,this.dataRequested=!1,this.dataLoaded=!1,this.requestKey=`detail-box::${Ic++}::${c.key}::${d}`,this.writableContent=xe(void 0),this.content=this.writableContent,this.writableYRange=xe(void 0),this.yRange=this.writableYRange}requestData(){if(this.dataRequested)return;this.dataRequested=!0;const t=[this.datasetKey],r=this.comparisonConfig.datasets.getReferencePlotsForDataset(this.datasetKey,this.scenario);t.push(...r.map(n=>n.datasetKey)),this.dataCoordinator.requestDatasetMaps(this.requestKey,"left",this.scenario.specL,"right",this.scenario.specR,t,(n,s)=>{if(!this.dataRequested)return;const i=this.scenario.settings.kind==="all-inputs-settings"&&this.scenario.settings.position==="at-default",o=this.baselineTestSummary?.md??0,u=this.baselineTestSummary?.ad??0,c=$c(this.scenario.key,this.datasetKey,n,s),d=testSummaryFromReport(c,o,u),m=Ar=>{const hi=this.comparisonConfig,gi=Ar==="left"?hi.bundleL.name:hi.bundleR.name;return`Data only defined in ${Ut(gi,Ar)}`},T=c.diffReport;let $,C,D,F;switch(T.validity){case"both":{if(T.maxDiff===0)D=0,$=0,C=0,F="No differences";else{const Ar=this.sortMode==="max-diff-relative"||this.sortMode==="avg-diff-relative"?this.comparisonConfig.ratioThresholds:this.comparisonConfig.thresholds;let hi;switch(this.sortMode){case"max-diff":hi=d?.md??0;break;case"avg-diff":hi=d?.ad??0;break;case"max-diff-relative":hi=d?.mdb??0;break;case"avg-diff-relative":hi=d?.adb??0;break;default:assertNeverExports$2.assertNever(this.sortMode)}D=ci(hi,Ar),$=d?.mdb??0,C=d?.adb??0,F=void 0}break}case"left-only":D=void 0,F=m("left");break;case"right-only":D=void 0,F=m("right");break;default:D=void 0,F="Dataset not defined for this scenario";break}const g=this.comparisonConfig.bundleL.modelSpec,q=this.comparisonConfig.bundleR.modelSpec,x=g.outputVars.get(this.datasetKey),P=q.outputVars.get(this.datasetKey)||x;let K,L;P.sourceName===void 0&&(g.startTime!==void 0&&q.startTime!==void 0&&(K=Math.min(g.startTime,q.startTime)),g.endTime!==void 0&&q.endTime!==void 0&&(L=Math.max(g.endTime,q.endTime)));const B=lr(n?.get(this.datasetKey)),J=lr(s?.get(this.datasetKey)),re=[];function ve(Ar,hi,gi,Gi){re.push({points:Ar,color:hi,style:gi||"normal",lineWidth:Gi})}ve(J,"deepskyblue"),ve(B,"crimson");for(const Ar of r){const hi=lr(s?.get(Ar.datasetKey));ve(hi,Ar.color,Ar.style,Ar.lineWidth)}let ye=Number.POSITIVE_INFINITY,Se=Number.NEGATIVE_INFINITY;function Ne(Ar){for(const hi of Ar)hi.y<ye&&(ye=hi.y),hi.y>Se&&(Se=hi.y)}for(const Ar of re)Ne(Ar.points);this.writableYRange.set({min:ye,max:Se});const Ke={key:this.requestKey,plots:re,xMin:K,xMax:L,yMin:this.activeYMin,yMax:this.activeYMax};this.localContent={bucketClass:`bucket-border-${D!==void 0?D:"undefined"}`,message:F,diffReport:T,baselineMaxDiff:i?void 0:o,maxDiffRelativeToBaseline:$,avgDiffRelativeToBaseline:C,comparisonGraphViewModel:Ke},this.writableContent.set(this.localContent),this.dataLoaded=!0})}updateYAxisRange(t){if(this.activeYMin=t?.min,this.activeYMax=t?.max,this.localContent){const r=this.localContent.comparisonGraphViewModel;r.yMin=this.activeYMin,r.yMax=this.activeYMax,r.onUpdated?.()}}clearData(){this.dataRequested&&(this.localContent=void 0,this.writableContent.set(void 0),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}function $c(e,t,r,n){const s=r?.get(t),i=n?.get(t),o=diffDatasets(s,i);return{scenarioKey:e,datasetKey:t,diffReport:o}}function Dr(e,t,r,n,s,i,o,u,c){const d=[];for(const $ of c){if($===void 0){d.push(void 0);continue}let C,D;switch(i){case"scenarios":C="scenario",D=$.scenario.key;break;case"datasets":C="dataset",D=$.testSummary.d;break;case"freeform":C="freeform",D=`${$.scenario.key}::${$.testSummary.d}`;break;default:Tr(i)}d.push(new Yn(e,t,r.get($.testSummary.d),s,C,$.title,$.subtitle,$.scenario,$.testSummary.d,D))}const m=_e(d.map($=>$.yRange),$=>{let C=Number.POSITIVE_INFINITY,D=Number.NEGATIVE_INFINITY;for(const F of $)F?.min<C&&(C=F.min),F?.max>D&&(D=F.max);return{min:C,max:D}});_e([n.consistentYRange,m],([$,C])=>$?C:void 0).subscribe($=>{for(const C of d)C.updateYAxisRange($)});const T=`row_${d.map($=>$.pinnedItemKey).join("_")}`;return{kind:i,title:o,subtitle:u,items:c,boxes:d,pinnedItemKey:T}}function Dc(e){const t=e.comparisonConfig,r=e.dataCoordinator,n=t.bundleL.modelSpec,s=t.bundleR.modelSpec;function i(c,d,m){return new Un(t,r,m,c,d)}const o=t.datasets.getContextGraphIdsForDataset(e.datasetKey,e.scenario),u=[];for(const c of o){const d=n.graphSpecs?.find(T=>T.id===c),m=s.graphSpecs?.find(T=>T.id===c);u.push({graphL:i(e.scenario,d,"left"),graphR:i(e.scenario,m,"right")})}return u}const zi="#444",jr="Roboto Condensed",Vi=14,Ei="#777",Pi="rgba(0, 0, 0, 0)",Tc={beforeDatasetsDraw:e=>{const t=e.ctx;t.save();const r=e.data.datasets;for(let n=0;n<r.length;n++){const s=r[n];if(s.data.length!==1)continue;const i=e.getDatasetMeta(n).data[0];let o;if(s.fill==="+1"){if(n+1>=r.length)break;const u=e.getDatasetMeta(n+1).data[0];o={x:u._view.x,y:u._view.y}}else if(s.fill==="start")o={x:i._view.x,y:e.chartArea.bottom};else if(s.fill==="end")o={x:i._view.x,y:e.chartArea.top};else return;t.beginPath(),t.moveTo(i._view.x,i._view.y),t.lineTo(o.x,o.y),t.closePath(),t.strokeStyle=s.backgroundColor,t.lineWidth=4,t.stroke()}t.restore()}};ChartExports.Chart.pluginService.register(Tc);class zc{constructor(t,r){this.canvas=t,this.viewModel=r,this.chart=Vc(t,r)}update(){const t=this.chart;function r(n,s){const i=t.data.datasets.find(o=>o.label===n);if(i){const o=i.data[0];o.y=s}}t&&(r("hidden-y-min",this.viewModel.yMin),r("hidden-y-max",this.viewModel.yMax),t.update())}destroy(){this.chart?.destroy(),this.chart=void 0}}function Vc(e,t){const r=[],n=(m,T,$)=>{r.push({label:m,type:"scatter",fill:!1,borderColor:Pi,backgroundColor:Pi,pointHitRadius:0,pointHoverRadius:0,pointRadius:0,data:[{x:T,y:$}]})};let s=Number.NEGATIVE_INFINITY;function i(m){let T,$=!1;switch(m.style){case"dashed":T=[8,2];break;case"fill-to-next":$="+1";break;case"fill-above":$="end";break;case"fill-below":$="start";break}let C;$!==!1&&(C=`rgba(0, 128, 0, ${m.points.length>1?.1:.3})`);let D=0,F;m.points.length===1&&m.style!=="dashed"&&(D=5,F=m.color);for(const g of m.points)g.x>s&&(s=g.x);r.push({data:m.points,borderColor:m.color,borderWidth:m.lineWidth!==void 0?m.lineWidth:3,borderDash:T,backgroundColor:C,fill:$,pointRadius:D,pointBackgroundColor:F,pointBorderWidth:0,pointBorderColor:"transparent",lineTension:0})}for(const m of t.plots)i(m);const o=t.xMin,u=t.xMax,c=o===1990,d=u!==void 0?u:s;return n("hidden-y-min",d,t.yMin),n("hidden-y-max",d,t.yMax),new ChartExports.Chart(e,{type:"line",data:{datasets:r},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,title:{display:!1},legend:{display:!1},elements:{point:{radius:0}},tooltips:{titleFontFamily:jr,bodyFontFamily:jr},scales:{xAxes:[{type:"linear",position:"bottom",gridLines:{color:zi},ticks:{maxTicksLimit:6,maxRotation:0,min:o,max:u,fontFamily:jr,fontSize:Vi,fontColor:Ei,callback:(m,T)=>c&&T===0?"":m}}],yAxes:[{gridLines:{color:zi},ticks:{fontFamily:jr,fontSize:Vi,fontColor:Ei}}]}}})}var Ec=V('<div class="graph-inner-container svelte-1ez5fe6"></div>');const Pc={hash:"svelte-1ez5fe6",code:".graph-inner-container.svelte-1ez5fe6 {position:absolute;top:0;left:0;bottom:0;right:0;}"};function ms$2(e,t){oe(t,!1),de(e,Pc);let r=U(t,"viewModel",12),n=Y(),s=Y(),i=Y();function o(){f$1(s)?.destroy();const c=document.createElement("canvas");for(;f$1(n).firstChild;)f$1(n).firstChild.remove();f$1(n).appendChild(c),E(i,r().key),E(s,new zc(c,r())),r(r().onUpdated=()=>{f$1(s)?.update()},!0)}qr(()=>(o(),()=>{f$1(s)?.destroy(),E(s,void 0)})),Ge(()=>(f$1(s),z(r()),f$1(i)),()=>{f$1(s)&&r().key!==f$1(i)&&o()}),rt(),Me();var u=Ec();ps(u,c=>E(n,c),()=>f$1(n)),M(e,u),le()}var Lc=V('<span class="subtitle svelte-15isgd1"><!></span>'),Nc=V('<div class="title-row no-selection svelte-15isgd1"><div class="title-content svelte-15isgd1"><span class="title svelte-15isgd1"><!></span> <!></div></div>'),qc=V('<div class="message svelte-15isgd1"><!></div>'),Fc=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">rel</div> <div class="data-value svelte-15isgd1"> </div></div>'),Kc=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">rel</div> <div class="data-value svelte-15isgd1"> </div></div>'),Ac=V('<div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">avg</div> <div class="data-value svelte-15isgd1"> </div></div> <div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">min</div> <div class="data-value svelte-15isgd1"> </div></div> <div class="data-row svelte-15isgd1"><div class="data-label svelte-15isgd1">max</div> <div class="data-value svelte-15isgd1"><!></div></div> <!> <!>',1),Bc=V('<div><div class="graph-container svelte-15isgd1"><!></div> <div class="message-container svelte-15isgd1"><!></div></div>'),Oc=V('<div class="detail-box svelte-15isgd1"><!> <div class="content-container svelte-15isgd1"><!></div></div>');const jc={hash:"svelte-15isgd1",code:".detail-box.svelte-15isgd1 {display:flex;flex-direction:column;--box-graph-w: calc(30rem * var(--graph-zoom));--box-graph-h: calc(22rem * var(--graph-zoom));}.title-row.svelte-15isgd1 {position:relative;max-width:calc(var(--box-graph-w) + 1rem);height:1.4rem;cursor:pointer;}.title-content.svelte-15isgd1 {position:absolute;max-width:calc(var(--box-graph-w) + 1rem);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.title-content.svelte-15isgd1:hover {width:max-content;max-width:unset;overflow:unset;z-index:100;background-color:#3c3c3c;}.title.svelte-15isgd1 {margin-left:0.7rem;font-size:1.1em;font-weight:700;}.subtitle.svelte-15isgd1 {color:#aaa;margin-left:0.4rem;margin-right:0.7rem;}.content-container.svelte-15isgd1 {display:flex;flex-direction:column;width:calc(var(--box-graph-w) + 1rem + 0.6rem);max-width:calc(var(--box-graph-w) + 1rem + 0.6rem);height:calc(var(--box-graph-h) + 4rem + 1rem + 0.6rem);max-height:calc(var(--box-graph-h) + 4rem + 1rem + 0.6rem);}.content.svelte-15isgd1 {display:flex;flex-direction:column;height:calc(var(--box-graph-h) + 4rem);padding:0.5rem;border-width:0.3rem;border-style:solid;border-radius:0.8rem;}.content.no-baseline-diff.svelte-15isgd1 {border-style:dashed;}.graph-container.svelte-15isgd1 {position:relative;display:flex;width:var(--box-graph-w);height:var(--box-graph-h);}.message-container.svelte-15isgd1 {display:flex;flex-direction:column;max-width:var(--box-graph-w);height:4rem;justify-content:flex-end;}.message.svelte-15isgd1 {white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.data-row.svelte-15isgd1 {display:flex;flex-direction:row;align-items:baseline;}.data-label.svelte-15isgd1 {font-size:0.9em;color:#aaa;min-width:2rem;margin-right:0.4rem;text-align:right;}.data-value.svelte-15isgd1 {white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"};function Hn(e,t){oe(t,!1),de(e,jc);const r=()=>fe(f$1(o),"$content",n),[n,s]=Ue();let i=U(t,"viewModel",8),o=Y(i().content),u=Y(!1),c=Y(f$1(u)),d=Y();const m=pt();function T(){m("toggle-context-graphs")}function $(B){i().kind!=="freeform"&&m("show-context-menu",{kind:"box",itemKey:i().pinnedItemKey,scenario:i().scenario,clickEvent:B})}function C(B){return B!=null?`${B.toFixed(2)}%`:"n/a"}function D(B){return B!=null?B.toFixed(4):"undefined"}function F(B){const J=B.diffReport.maxDiffPoint;let re="";return re+=C(B.diffReport.maxDiff),J&&(re+="&nbsp;(",re+=`<span class="dataset-color-0">${D(J.valueL)}</span>`,re+=`&nbsp;${J.valueL<J.valueR?"&lt;":"&gt;"}&nbsp;`,re+=`<span class="dataset-color-1">${D(J.valueR)}</span>`,re+=`) at ${J.time}`),re}function g(B){return B!=null?`${B.toFixed(2)}`:"n/a"}Ge(()=>(f$1(u),f$1(c),z(i()),f$1(d)),()=>{(f$1(u)!==f$1(c)||i().requestKey!==f$1(d)?.requestKey)&&(f$1(d)?.clearData(),E(c,f$1(u)),E(d,i()),kt(E(o,i().content),"$content",n),f$1(u)&&i().requestData())}),rt(),Me();var q=Oc(),x=b$1(q);{var P=B=>{var J=Nc(),re=b$1(J),ve=b$1(re),ye=b$1(ve);ze(ye,()=>(z(i()),_$1(()=>i().title)));var Se=R(ve,2);{var Ne=Ke=>{var Ar=Lc(),hi=b$1(Ar);ze(hi,()=>(z(i()),_$1(()=>i().subtitle))),M(Ke,Ar)};N(Se,Ke=>{z(i()),_$1(()=>i().subtitle)&&Ke(Ne)})}me("click",J,T),me("contextmenu",J,ni($)),M(B,J)};N(x,B=>{z(i()),_$1(()=>i().title)&&B(P)})}var K=R(x,2),L=b$1(K);Fr(L,{get visible(){return f$1(u)},set visible(B){E(u,B)},children:(B,J)=>{var re=ge(),ve=W(re);{var ye=Se=>{var Ne=Bc();let Ke;var Ar=b$1(Ne),hi=b$1(Ar);ms$2(hi,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}});var gi=R(Ar,2),Gi=b$1(gi);{var bs=Re=>{var ie=qc(),ke=b$1(ie);ze(ke,()=>(r(),_$1(()=>r().message))),M(Re,ie)},ua=Re=>{var ie=Ac(),ke=W(ie),ue=R(b$1(ke),2),G=b$1(ue),X=R(ke,2),ce=R(b$1(X),2),De=b$1(ce),qe=R(X,2),bt=R(b$1(qe),2),vr=b$1(bt);ze(vr,()=>(r(),_$1(()=>F(r()))));var te=R(qe,2);{var se=Ye=>{var Je=Fc(),pi=R(b$1(Je),2),Os=b$1(pi);O(vi=>j(Os,vi),[()=>(r(),_$1(()=>g(r().maxDiffRelativeToBaseline)))]),M(Ye,Je)};N(te,Ye=>{z(i()),_$1(()=>i().sortMode==="max-diff-relative")&&Ye(se)})}var $e=R(te,2);{var Ie=Ye=>{var Je=Kc(),pi=R(b$1(Je),2),Os=b$1(pi);O(vi=>j(Os,vi),[()=>(r(),_$1(()=>g(r().avgDiffRelativeToBaseline)))]),M(Ye,Je)};N($e,Ye=>{z(i()),_$1(()=>i().sortMode==="avg-diff-relative")&&Ye(Ie)})}O((Ye,Je)=>{j(G,Ye),j(De,Je)},[()=>(r(),_$1(()=>C(r().diffReport.avgDiff))),()=>(r(),_$1(()=>C(r().diffReport.minDiff)))]),M(Re,ie)};N(Gi,Re=>{r(),_$1(()=>r().message)?Re(bs):Re(ua,!1)})}O(Re=>Ke=Le(Ne,1,(r(),_$1(()=>`content ${r().bucketClass}`)),"svelte-15isgd1",Ke,Re),[()=>({"no-baseline-diff":(i().sortMode==="max-diff-relative"||i().sortMode==="avg-diff-relative")&&r().baselineMaxDiff===0&&r().diffReport.maxDiff!==0})]),M(Se,Ne)};N(ve,Se=>{r()&&Se(ye)})}M(B,re)},$$slots:{default:!0},$$legacy:!0}),M(e,q),le(),s()}var Gc=V('<div class="subtitle svelte-p46ums"><!></div>'),Uc=V('<div class="title-row svelte-p46ums"><div class="title svelte-p46ums"><!></div> <!></div>'),Wc=V('<div class="spacer-fixed svelte-p46ums"></div>'),Yc=V("<!> <div><!></div>",1),Hc=V('<div class="context-graph-row svelte-p46ums"><!> <div class="context-graph-spacer svelte-p46ums"></div> <!></div>'),Xc=V('<div class="context-graphs-container svelte-p46ums"><div></div> <div class="context-graphs-column svelte-p46ums"><!></div></div>'),Zc=V('<div class="detail-row svelte-p46ums"><!> <div class="boxes svelte-p46ums"></div> <!></div>');const Jc={hash:"svelte-p46ums",code:".detail-row.svelte-p46ums {display:flex;flex-direction:column;}.title-row.svelte-p46ums {align-items:baseline;margin-bottom:0.5rem;}.title.svelte-p46ums {margin-right:0.8rem;font-size:1.5em;font-weight:700;}.subtitle.svelte-p46ums {font-size:1.3em;color:#aaa;}.subtitle.svelte-p46ums .subtitle-sep {color:#666;}.boxes.svelte-p46ums {display:flex;flex-direction:row;}.box-container.dimmed.svelte-p46ums {opacity:0.2;}.spacer-fixed.svelte-p46ums {min-width:1.5rem;}.context-graphs-container.svelte-p46ums {display:inline-flex;flex-direction:row;margin-top:1rem;padding:0 1rem;background-color:#555;}.context-graphs-column.svelte-p46ums {display:inline-flex;flex-direction:column;}.context-graph-row.svelte-p46ums {display:flex;flex-direction:row;width:77.5rem;margin:1rem 0;}.context-graph-spacer.svelte-p46ums {min-width:1.5rem;}"};function Li(e,t){oe(t,!1),de(e,Jc);let r=U(t,"viewModel",8),n=Y(),s=Y();const i=pt();function o(g){i("show-context-menu",{kind:"row",itemKey:r().pinnedItemKey,clickEvent:g})}function u(g,q){return q!==void 0&&g!==q}function c(g){g===f$1(n)?(E(n,void 0),E(s,void 0)):(E(n,g),E(s,Dc(r().boxes[g])))}function d(g){return g===void 0?0:r().boxes.length>0?(g+.5)/r().boxes.length*100:0}Ge(()=>z(r()),()=>{r()&&(E(n,void 0),E(s,void 0))}),rt(),Me();var m=Zc(),T=b$1(m);{var $=g=>{var q=Uc(),x=b$1(q),P=b$1(x);ze(P,()=>(z(r()),_$1(()=>r().title)));var K=R(x,2);{var L=B=>{var J=Gc(),re=b$1(J);ze(re,()=>(z(r()),_$1(()=>r().subtitle))),M(B,J)};N(K,B=>{z(r()),_$1(()=>r().subtitle)&&B(L)})}me("contextmenu",q,ni(o)),M(g,q)};N(T,g=>{z(r()),_$1(()=>r().title)&&g($)})}var C=R(T,2);Ce(C,5,()=>(z(r()),_$1(()=>r().boxes)),Te,(g,q,x)=>{var P=Yc(),K=W(P);{var L=ve=>{var ye=Wc();M(ve,ye)};N(K,ve=>{x>0&&ve(L)})}var B=R(K,2);let J;var re=b$1(B);Hn(re,{get viewModel(){return f$1(q)},$$events:{"toggle-context-graphs":()=>c(x),"show-context-menu"(ve){st.call(this,t,ve)}}}),O(ve=>J=Le(B,1,"box-container svelte-p46ums",null,J,ve),[()=>({dimmed:u(x,f$1(n))})]),M(g,P)});var D=R(C,2);{var F=g=>{var q=Xc(),x=b$1(q),P=R(x,2),K=b$1(P);{var L=B=>{var J=ge(),re=W(J);Ce(re,1,()=>f$1(s),Te,(ve,ye)=>{var Se=Hc(),Ne=b$1(Se);rs(Ne,{get viewModel(){return f$1(ye),_$1(()=>f$1(ye).graphL)}});var Ke=R(Ne,4);rs(Ke,{get viewModel(){return f$1(ye),_$1(()=>f$1(ye).graphR)}}),M(ve,Se)}),M(B,J)};N(K,B=>{f$1(s)&&B(L)})}O(B=>Ae(x,`min-width: max(0%, min(calc(${B??""}% - 38.75rem), calc(100% - 77.5rem)))`),[()=>(f$1(n),_$1(()=>d(f$1(n))))]),M(g,q)};N(D,g=>{f$1(n)!==void 0&&g(F)})}M(e,m),le()}var Qc=V('<div class="legend-item svelte-ili0m8"><!></div>'),ed=V('<div class="legend-item svelte-ili0m8"><!></div>'),td=V('<div> </div> <span class="dataset-arrow svelte-ili0m8">&nbsp;-&gt;&nbsp;</span> <div> </div>',1),rd=V("<div> </div>"),sd=V("<div> </div>"),id$2=V('<div class="detail-box-container svelte-ili0m8"><!></div>'),nd=V('<div class="dataset-container svelte-ili0m8"><div class="dataset-row svelte-ili0m8"><!> <!></div> <!></div>');const ad={hash:"svelte-ili0m8",code:'.dataset-container.svelte-ili0m8 {display:flex;flex:1;flex-direction:column;}.dataset-row.svelte-ili0m8 {display:flex;flex:1;align-items:baseline;margin-left:0.6rem;cursor:pointer;}.dataset-row.svelte-ili0m8:hover {background-color:rgba(255, 255, 255, 0.05);}.dataset-arrow.svelte-ili0m8 {color:#777;}.legend-item.svelte-ili0m8 {font-family:"Roboto Condensed";font-weight:700;font-size:1rem;margin:0.2rem 0.4rem;padding:0.25rem 0.6rem 0.2rem 0.6rem;color:#fff;text-align:center;}.detail-box-container.svelte-ili0m8 {display:flex;flex:1;margin-top:0.2rem;margin-bottom:0.8rem;margin-left:0.4rem;}'};function od(e,t){oe(t,!1),de(e,ad);const r=()=>fe(C,"$detailBoxVisible",n),[n,s]=Ue();let i=U(t,"viewModel",8);const o=i().nameL,u=i().nameR,c=i().legendColorL,d=i().legendColorR,m=i().legendLabelL,T=i().legendLabelR,$=i().bucketClass,C=i().detailBoxVisible;function D(){C.update(ve=>!ve)}Me();var F=nd(),g=b$1(F),q=b$1(g);{var x=ve=>{var ye=Qc(),Se=b$1(ye);ze(Se,()=>_$1(()=>m.toUpperCase())),O(()=>Ae(ye,`background-color: ${c??""};`)),M(ve,ye)},P=ve=>{var ye=ge(),Se=W(ye);{var Ne=Ke=>{var Ar=ed(),hi=b$1(Ar);ze(hi,()=>_$1(()=>T.toUpperCase())),O(()=>Ae(Ar,`background-color: ${d??""};`)),M(Ke,Ar)};N(Se,Ke=>{T&&Ke(Ne)},!0)}M(ve,ye)};N(q,ve=>{m&&!T?ve(x):ve(P,!1)})}var K=R(q,2);{var L=ve=>{var ye=td(),Se=W(ye),Ne=b$1(Se),Ke=R(Se,4),Ar=b$1(Ke);O(()=>{Le(Se,1,`dataset-name ${$}`,"svelte-ili0m8"),j(Ne,o),Le(Ke,1,`dataset-name ${$}`,"svelte-ili0m8"),j(Ar,u)}),M(ve,ye)},B=ve=>{var ye=ge(),Se=W(ye);{var Ne=Ar=>{var hi=rd(),gi=b$1(hi);O(()=>{Le(hi,1,`dataset-name ${$}`,"svelte-ili0m8"),j(gi,o)}),M(Ar,hi)},Ke=Ar=>{var hi=ge(),gi=W(hi);{var Gi=bs=>{var ua=sd(),Re=b$1(ua);O(()=>{Le(ua,1,`dataset-name ${$}`,"svelte-ili0m8"),j(Re,u)}),M(bs,ua)};N(gi,bs=>{u&&bs(Gi)},!0)}M(Ar,hi)};N(Se,Ar=>{o&&!u?Ar(Ne):Ar(Ke,!1)},!0)}M(ve,ye)};N(K,ve=>{o&&u&&o!==u?ve(L):ve(B,!1)})}var J=R(g,2);{var re=ve=>{var ye=id$2(),Se=b$1(ye);Hn(Se,{get viewModel(){return z(i()),_$1(()=>i().detailBoxViewModel)}}),M(ve,ye)};N(J,ve=>{r()&&ve(re)})}me("click",g,D),M(e,F),le(),s()}var ld=V('<div class="spacer-flex svelte-1sxfmis"></div>'),cd=V('<div class="metadata-row svelte-1sxfmis"><div class="metadata-col svelte-1sxfmis"><div class="metadata-key svelte-1sxfmis"> </div> <span>&nbsp;</span> <div class="metadata-value"> </div></div> <div class="spacer-fixed svelte-1sxfmis"></div> <div class="metadata-col svelte-1sxfmis"><div class="metadata-key svelte-1sxfmis"> </div> <span>&nbsp;</span> <div class="metadata-value"> </div></div></div>'),dd=V('<div class="metadata-header svelte-1sxfmis">Metadata differences:</div> <!>',1),ud=V('<div class="metadata-header svelte-1sxfmis">Dataset differences:</div> <!>',1),fd=V('<div class="spacer-flex svelte-1sxfmis"></div>'),vd=V('<div class="graphs-row svelte-1sxfmis"><!> <div class="content svelte-1sxfmis"><div class="graphs-container svelte-1sxfmis"><!> <div class="spacer-fixed svelte-1sxfmis"></div> <!></div> <div class="metadata-container svelte-1sxfmis"><div class="metadata-header svelte-1sxfmis"> </div> <!> <!></div></div> <!></div>');const pd={hash:"svelte-1sxfmis",code:".graphs-row.svelte-1sxfmis {display:flex;flex-direction:row;flex:1;}.spacer-flex.svelte-1sxfmis {flex:1;}.spacer-fixed.svelte-1sxfmis {flex:0 0 2rem;}.content.svelte-1sxfmis {display:flex;flex-direction:column;flex:1;}.graphs-container.svelte-1sxfmis {display:flex;flex-direction:row;}.metadata-container.svelte-1sxfmis {display:flex;flex-direction:column;}.metadata-header.svelte-1sxfmis {margin-top:0.6rem;}.metadata-row.svelte-1sxfmis {display:flex;flex-direction:row;}.metadata-row.svelte-1sxfmis:hover {background-color:rgba(255, 255, 255, 0.05);}.metadata-col.svelte-1sxfmis {display:flex;width:38rem;align-items:baseline;}.metadata-key.svelte-1sxfmis {color:#aaa;font-size:0.8em;margin-left:1rem;}"};function hd(e,t){oe(t,!1),de(e,pd);let r=U(t,"viewModel",8),n=U(t,"align",8,"center");Me();var s=vd(),i=b$1(s);{var o=K=>{var L=ld();M(K,L)};N(i,K=>{n()==="center"&&K(o)})}var u=R(i,2),c=b$1(u),d=b$1(c);rs(d,{get viewModel(){return z(r()),_$1(()=>r().graphL)}});var m=R(d,4);rs(m,{get viewModel(){return z(r()),_$1(()=>r().graphR)}});var T=R(c,2),$=b$1(T),C=b$1($),D=R($,2);{var F=K=>{var L=dd(),B=R(W(L),2);Ce(B,1,()=>(z(r()),_$1(()=>r().metadataRows)),Te,(J,re)=>{var ve=cd(),ye=b$1(ve),Se=b$1(ye),Ne=b$1(Se),Ke=R(Se,4),Ar=b$1(Ke),hi=R(ye,4),gi=b$1(hi),Gi=b$1(gi),bs=R(gi,4),ua=b$1(bs);O(()=>{j(Ne,(f$1(re),_$1(()=>f$1(re).key))),j(Ar,(f$1(re),_$1(()=>f$1(re).valueL||"n/a"))),j(Gi,(f$1(re),_$1(()=>f$1(re).key))),j(ua,(f$1(re),_$1(()=>f$1(re).valueR||"n/a")))}),M(J,ve)}),M(K,L)};N(D,K=>{z(r()),_$1(()=>r().metadataRows.length>0)&&K(F)})}var g=R(D,2);{var q=K=>{var L=ud(),B=R(W(L),2);Ce(B,1,()=>(z(r()),_$1(()=>r().datasetRows)),Te,(J,re)=>{od(J,{get viewModel(){return f$1(re)}})}),M(K,L)};N(g,K=>{z(r()),_$1(()=>r().datasetRows.length>0)&&K(q)})}var x=R(u,2);{var P=K=>{var L=fd();M(K,L)};N(x,K=>{n()==="center"&&K(P)})}O(()=>j(C,`id ${z(r()),_$1(()=>r().graphId)??""}`)),M(e,s),le()}var md=V('<div class="pretitle svelte-4i7ul9"><!></div>'),gd=V('<div class="subtitle svelte-4i7ul9"><!></div>'),bd=V('<div class="annotations svelte-4i7ul9"><!></div>'),wd=V('<li class="related-item"><!></li>'),_d=V('<div class="related svelte-4i7ul9"><span> </span> <ul class="svelte-4i7ul9"></ul></div>'),xd=V('<div class="row-container svelte-4i7ul9"><!></div>'),yd=V('<div class="section-title svelte-4i7ul9"> </div> <!>',1),kd=V('<div class="section-title svelte-4i7ul9"> </div>'),Sd=V("<!> <!>",1),Md=V('<div class="row-container svelte-4i7ul9"><!></div>'),Rd=V('<div class="section-title svelte-4i7ul9"> </div> <!>',1),Cd=V('<div class="section-title svelte-4i7ul9"> </div>'),Id=V('<div class="row-container svelte-4i7ul9"><!></div>'),$d=V('<div class="compare-detail-container svelte-4i7ul9"><div class="header-container svelte-4i7ul9"><div class="title-and-links svelte-4i7ul9"><div class="title-container svelte-4i7ul9"><!> <div class="title-and-subtitle svelte-4i7ul9"><div class="title svelte-4i7ul9"><!></div> <!> <!></div></div> <div class="spacer-flex svelte-4i7ul9"></div> <div class="nav-links no-selection svelte-4i7ul9"><div class="nav-link svelte-4i7ul9">previous</div> <div class="nav-link-sep svelte-4i7ul9">&nbsp;|&nbsp;</div> <div class="nav-link svelte-4i7ul9">next</div></div></div> <!></div> <div class="scroll-container svelte-4i7ul9" tabindex="0"><div class="scroll-content svelte-4i7ul9"><!> <!> <!> <!> <div class="footer svelte-4i7ul9"></div> <!></div></div></div>');const Dd={hash:"svelte-4i7ul9",code:".compare-detail-container.svelte-4i7ul9 {display:flex;flex-direction:column;flex:1;}.header-container.svelte-4i7ul9 {display:flex;flex-direction:column;width:calc(min(100%, 100vw) - 2rem);margin:0 -1rem;padding:0 2rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.5);z-index:1;}.title-and-links.svelte-4i7ul9 {display:flex;flex-direction:row;align-items:center;height:4.5rem;}.spacer-flex.svelte-4i7ul9 {flex:1;}.nav-links.svelte-4i7ul9 {display:flex;flex-direction:row;font-size:0.8em;}.nav-link-sep.svelte-4i7ul9 {color:#444;}.nav-link.svelte-4i7ul9 {cursor:pointer;color:#777;}.title-container.svelte-4i7ul9 {display:flex;flex-direction:column;}.pretitle.svelte-4i7ul9 {margin-bottom:0.2rem;font-size:0.9em;font-weight:700;color:#aaa;}.title-and-subtitle.svelte-4i7ul9 {display:flex;flex-direction:row;align-items:baseline;}.title.svelte-4i7ul9 {margin-bottom:0.4rem;font-size:2em;font-weight:700;cursor:pointer;}.subtitle.svelte-4i7ul9 {font-size:1.2em;font-weight:700;margin-left:1.2rem;color:#aaa;}.annotations.svelte-4i7ul9 {margin-left:0.3rem;color:#aaa;}.annotations.svelte-4i7ul9 .annotation {margin:0 0.3rem;padding:0.1rem 0.3rem;background-color:#222;border:0.5px solid #555;border-radius:0.4rem;}.related.svelte-4i7ul9 {font-size:1em;color:#aaa;margin-bottom:0.6rem;}.related.svelte-4i7ul9 .related-sep {color:#666;}ul.svelte-4i7ul9 {margin:0.1rem 0;padding-left:2rem;}.scroll-container.svelte-4i7ul9 {display:flex;flex-direction:row;max-width:min(100vw, 100%);flex:1 0 1px;overflow:auto;outline:none;background-color:#3c3c3c;}.scroll-content.svelte-4i7ul9 {position:relative;}.section-title.svelte-4i7ul9 {width:calc(min(100%, 100vw) - 2rem);margin:1.5rem 1rem 2rem 1rem;padding:0.2rem 0;border-bottom:solid 1px #555;color:#ccc;font-size:1.4em;font-weight:700;}.section-title.svelte-4i7ul9:not(:first-child) {margin-top:5rem;}.row-container.svelte-4i7ul9 {display:flex;flex-direction:row;margin-top:0.5rem;margin-bottom:3rem;margin-left:1rem;margin-right:1rem;}.row-container.svelte-4i7ul9:first-child {margin-top:3rem;}.footer.svelte-4i7ul9 {height:1rem;}"};function Td(e,t){oe(t,!1),de(e,Dd);const r=()=>fe(f$1(d),"$pinnedDetailRows",s),n=()=>fe(f$1(m),"$regularDetailRows",s),[s,i]=Ue();let o=U(t,"viewModel",8),u=Y(),c=Y(),d=Y(),m=Y(),T=Y(),$,C,D=Y([]),F=Y(),g=Y(!1);const q=pt();function x(Je){switch(Je){case"detail-previous":case"detail-next":{let pi;switch(o().kind){case"freeform-view":case"scenario-view":pi="views";break;case"scenario":pi="by-scenario";break;case"dataset":pi="by-dataset";break;default:Tr(o().kind)}q("command",{cmd:Je==="detail-previous"?"show-comparison-detail-for-previous":"show-comparison-detail-for-next",kind:pi,summaryRowKey:o().summaryRowKey});break}default:q("command",{cmd:Je});break}}function P(Je){const pi=Je.detail?.kind;switch(pi){case"box":case"row":{const Os=Je.detail.itemKey,vi=Pe(o().pinnedItemState.getPinned(Os)),Ui=vi?"Unpin":"Pin",ca=pi==="row"?"Row":f$1(u);if($=Os,C=Je.detail.scenario,E(D,[{key:"toggle-item-pinned",displayText:`${Ui} ${ca}`}]),vi){const va=Pe(o().pinnedItemState.orderedKeys);va.length>1&&va[0]!==Os&&f$1(D).push({key:"move-item-to-top",displayText:`Move ${ca} to Top`})}ca==="Scenario"&&f$1(D).push({key:"show-trace-view",displayText:"Open Scenario in Trace View"}),E(F,Je.detail.clickEvent);break}default:$=void 0,C=void 0,E(D,[]),E(F,void 0);break}}function K(){E(F,void 0)}function L(Je){E(F,void 0);const pi=$,Os=Je.detail;switch(Os){case"toggle-item-pinned":o().pinnedItemState.toggleItemPinned(pi);break;case"move-item-to-top":o().pinnedItemState.moveItemToTop(pi);break;case"show-trace-view":q("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:C?.specR,scenarioKind:"comparison"});break;default:console.error(`ERROR: Unhandled context menu command '${Os}'`);break}}function B(Je){oi(Je)||(Je.key==="ArrowLeft"?(x("detail-previous"),Je.preventDefault()):Je.key==="ArrowRight"?(x("detail-next"),Je.preventDefault()):Je.key==="ArrowUp"&&f$1(T).scrollTop===0&&(x("show-summary"),Je.preventDefault()))}function J(){E(g,!f$1(g))}qr(()=>{f$1(T).focus()}),Ge(()=>(z(o()),f$1(u),f$1(T)),()=>{if(o()){switch(o().kind){case"freeform-view":E(u,"Row");break;case"scenario":case"scenario-view":E(u,"Dataset");break;case"dataset":E(u,"Scenario");break;default:E(u,"Item");break}E(c,`${f$1(u)}s`),kt(E(d,o().pinnedDetailRows),"$pinnedDetailRows",s),kt(E(m,o().regularDetailRows),"$regularDetailRows",s),f$1(T)&&Co(T,f$1(T).scrollTop=0),E(g,!1)}}),rt(),Me();var re=$d();me("keydown",Ir,B);var ve=b$1(re),ye=b$1(ve),Se=b$1(ye),Ne=b$1(Se);{var Ke=Je=>{var pi=md(),Os=b$1(pi);ze(Os,()=>(z(o()),_$1(()=>o().pretitle))),M(Je,pi)};N(Ne,Je=>{z(o()),_$1(()=>o().pretitle)&&Je(Ke)})}var Ar=R(Ne,2),hi=b$1(Ar),gi=b$1(hi);ze(gi,()=>(z(o()),_$1(()=>o().title)));var Gi=R(hi,2);{var bs=Je=>{var pi=gd(),Os=b$1(pi);ze(Os,()=>(z(o()),_$1(()=>o().subtitle))),M(Je,pi)};N(Gi,Je=>{z(o()),_$1(()=>o().subtitle)&&Je(bs)})}var ua=R(Gi,2);{var Re=Je=>{var pi=bd(),Os=b$1(pi);ze(Os,()=>(z(o()),_$1(()=>o().annotations))),M(Je,pi)};N(ua,Je=>{z(o()),_$1(()=>o().annotations)&&Je(Re)})}var ie=R(Se,4),ke=b$1(ie),ue=R(ke,4),G=R(ye,2);{var X=Je=>{var pi=_d(),Os=b$1(pi),vi=b$1(Os),Ui=R(Os,2);Ce(Ui,5,()=>(z(o()),_$1(()=>o().relatedItems)),Te,(ca,va)=>{var da=wd(),ha=b$1(da);ze(ha,()=>f$1(va)),M(ca,da)}),O(()=>j(vi,(z(o()),_$1(()=>o().relatedListHeader)))),M(Je,pi)};N(G,Je=>{f$1(g),z(o()),_$1(()=>f$1(g)&&o().relatedItems.length>0)&&Je(X)})}var ce=R(ve,2),De=b$1(ce),qe=b$1(De);{var bt=Je=>{var pi=Sd(),Os=W(pi);Ce(Os,1,()=>(z(o()),_$1(()=>o().graphSections)),Te,(ca,va)=>{var da=yd(),ha=W(da),ya=b$1(ha),mi=R(ha,2);Ce(mi,1,()=>(f$1(va),_$1(()=>f$1(va).rows)),Te,(fa,pa)=>{var _a=xd(),be=b$1(_a);tl(be,()=>f$1(pa),Ca=>{hd(Ca,{get viewModel(){return f$1(pa)},align:"left"})}),M(fa,_a)}),O(()=>j(ya,(f$1(va),_$1(()=>f$1(va).title)))),M(ca,da)});var vi=R(Os,2);{var Ui=ca=>{var va=kd(),da=b$1(va);O(()=>j(da,`All ${f$1(c)??""}`)),M(ca,va)};N(vi,ca=>{r(),_$1(()=>r().length===0)&&ca(Ui)})}M(Je,pi)};N(qe,Je=>{z(o()),_$1(()=>o().graphSections.length>0)&&Je(bt)})}var vr=R(qe,2);{var te=Je=>{var pi=Rd(),Os=W(pi),vi=b$1(Os),Ui=R(Os,2);Ce(Ui,1,r,Te,(ca,va)=>{var da=Md(),ha=b$1(da);Li(ha,{get viewModel(){return f$1(va)},$$events:{"show-context-menu":P}}),M(ca,da)}),O(()=>j(vi,`Pinned ${f$1(c)??""}`)),M(Je,pi)};N(vr,Je=>{r(),_$1(()=>r().length>0)&&Je(te)})}var se=R(vr,2);{var $e=Je=>{var pi=Cd(),Os=b$1(pi);O(()=>j(Os,`All ${f$1(c)??""}`)),M(Je,pi)};N(se,Je=>{r(),_$1(()=>r().length>0)&&Je($e)})}var Ie=R(se,2);Ce(Ie,1,n,Te,(Je,pi)=>{var Os=Id(),vi=b$1(Os);Li(vi,{get viewModel(){return f$1(pi)},$$events:{"show-context-menu":P}}),M(Je,Os)});var Ye=R(Ie,4);hs(Ye,{get items(){return f$1(D)},get initialEvent(){return f$1(F)},$$events:{"item-selected":L,clickout:K}}),ps(ce,Je=>E(T,Je),()=>f$1(T)),me("click",hi,J),me("click",ke,()=>x("detail-previous")),me("click",ue,()=>x("detail-next")),M(e,re),le(),i()}var zd=(e,t,r,n)=>{const s=e.altKey;t.viewModel.toggleExpanded(r(),s),n()},Vd=V('<button class="filter-expand-button svelte-44fxm2"><span></span></button>'),Ed=V('<span class="filter-expand-spacer svelte-44fxm2"></span>'),Pd=(e,t,r,n)=>{t.viewModel.toggleChecked(r()),n()},Ld=V('<div class="filter-children"></div>'),Nd=V('<div class="filter-item svelte-44fxm2"><!> <label class="filter-label svelte-44fxm2"><input type="checkbox" class="filter-checkbox svelte-44fxm2"/> <span class="filter-text svelte-44fxm2"><!></span></label></div> <!>',1),qd=V('<div class="filter-panel svelte-44fxm2"></div>');const Fd={hash:"svelte-44fxm2",code:".filter-panel.svelte-44fxm2 {display:flex;flex-direction:column;flex:1;padding:1rem;background-color:var(--panel-bg);color:var(--text-color-primary);font-family:Roboto, sans-serif;font-size:1rem;line-height:1.3;}.filter-item.svelte-44fxm2 {display:flex;align-items:center;margin:0.2rem 0;}.filter-label.svelte-44fxm2 {display:flex;align-items:center;user-select:none;cursor:pointer;}.filter-label.svelte-44fxm2:hover {background-color:rgba(255, 255, 255, 0.1);border-radius:2px;padding:0.125rem 0.25rem;margin:-0.125rem -0.25rem;}.filter-checkbox.svelte-44fxm2 {margin-right:0.5rem;cursor:pointer;}.filter-text.svelte-44fxm2 {flex:1;}.filter-expand-button.svelte-44fxm2 {background:none;border:none;padding:0;margin-right:0.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;width:1.3rem;height:1.3rem;}.filter-expand-button.svelte-44fxm2:hover {background-color:rgba(255, 255, 255, 0.1);border-radius:2px;}.filter-triangle.svelte-44fxm2 {font-size:1rem;color:var(--text-color-secondary);user-select:none;}.filter-triangle.expanded.svelte-44fxm2 {transform:rotate(90deg);}.filter-expand-spacer.svelte-44fxm2 {width:1.3rem;height:1.3rem;margin-right:0.25rem;}"};function Ni(e,t){oe(t,!0),de(e,Fd);const r=(u,c=tt,d=tt)=>{const m=ht(()=>t.viewModel.getCheckboxState(d(),f$1(s))),T=ht(()=>n(c())),$=ht(()=>t.viewModel.isExpanded(d(),f$1(s))),C=ht(()=>d().children&&d().children.length>0);var D=Nd(),F=W(D),g=b$1(F);{var q=ve=>{var ye=Vd();ye.__click=[zd,t,d,i];var Se=b$1(ye);let Ne;O(Ke=>{yt(ye,"data-testid",`${d().key??""}-triangle`),Ne=Le(Se,1,"filter-triangle svelte-44fxm2",null,Ne,Ke)},[()=>({expanded:f$1($)})]),M(ve,ye)},x=ve=>{var ye=Ed();M(ve,ye)};N(g,ve=>{f$1(C)?ve(q):ve(x,!1)})}var P=R(g,2),K=b$1(P);K.__change=[Pd,t,d,i];var L=R(K,2),B=b$1(L);ze(B,()=>d().label);var J=R(F,2);{var re=ve=>{var ye=Ld();Ce(ye,21,()=>d().children,Se=>Se.key,(Se,Ne)=>{r(Se,()=>c()+1,()=>f$1(Ne))}),O(()=>{yt(ye,"data-testid",`${d().key??""}-children`),Ae(ye,`display: ${f$1($)?"block":"none"}`)}),M(ve,ye)};N(J,ve=>{f$1(C)&&ve(re)})}O(()=>{Ae(F,f$1(T)),ll(K,f$1(m)==="checked"),K.indeterminate=f$1(m)==="indeterminate"}),M(u,D)};function n(u){return`padding-left: ${u*20}px;`}let s=Oe(0);function i(){zs(s)}var o=qd();Ce(o,21,()=>t.viewModel.items,u=>u.key,(u,c)=>{r(u,()=>0,()=>f$1(c))}),M(e,o),le()}Pt(["click","change"]);var Kd=(e,t)=>t("checks"),Ad=(e,t)=>t("scenarios"),Bd=V('<div class="filter-popover-content-empty svelte-1i7odm5"><p>No checks configured</p></div>'),Od=V('<div class="filter-popover-content-empty svelte-1i7odm5"><p>No comparisons configured</p></div>'),jd=V('<div class="filter-popover svelte-1i7odm5"><div class="filter-popover-header svelte-1i7odm5"><div class="filter-popover-header-title svelte-1i7odm5">Filters</div> <!></div> <div class="filter-popover-tab-bar svelte-1i7odm5"><button>Checks</button> <button>Comparison Scenarios</button></div> <div class="filter-popover-content svelte-1i7odm5"><!></div> <div class="filter-popover-footer svelte-1i7odm5"><!></div></div>');const Gd={hash:"svelte-1i7odm5",code:".filter-popover.svelte-1i7odm5 {display:flex;flex-direction:column;flex:1;height:100%;background-color:var(--panel-bg);color:var(--text-color-primary);}.filter-popover-header.svelte-1i7odm5 {display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:var(--panel-header-bg);border-bottom:1px solid var(--panel-border);}.filter-popover-header-title.svelte-1i7odm5 {font-size:1.2rem;font-weight:700;}.filter-popover-tab-bar.svelte-1i7odm5 {display:flex;background-color:#333;}.filter-popover-tab-button.svelte-1i7odm5 {flex:1;padding:0.75rem 1rem;background-color:var(--panel-bg);border:none;border-bottom:1px solid var(--panel-border);font-family:Roboto, sans-serif;font-size:1rem;color:var(--text-color-secondary);cursor:pointer;}.filter-popover-tab-button.svelte-1i7odm5:hover {background-color:var(--input-bg);color:var(--text-color-primary);}.filter-popover-tab-button.active.svelte-1i7odm5 {background-color:#333;color:var(--text-color-primary);border-bottom-color:var(--border-color-focused);}.filter-popover-content.svelte-1i7odm5 {flex:1;overflow:auto;}.filter-popover-content.svelte-1i7odm5 .filter-panel {border-top:none;}.filter-popover-content-empty.svelte-1i7odm5 {display:flex;height:100%;justify-content:center;align-items:center;padding:1rem;}.filter-popover-footer.svelte-1i7odm5 {display:flex;justify-content:flex-end;padding:1rem;background-color:var(--panel-footer-bg);border-top:1px solid var(--panel-border);}"};function Ud(e,t){oe(t,!0),de(e,Gd);let r=Oe("checks");function n(x){E(r,x,!0)}var s=jd(),i=b$1(s),o=R(b$1(i),2);li(o,{onClick:()=>t.onClose()});var u=R(i,2),c=b$1(u);let d;c.__click=[Kd,n];var m=R(c,2);let T;m.__click=[Ad,n];var $=R(u,2),C=b$1($);{var D=x=>{var P=ge(),K=W(P);{var L=J=>{Ni(J,{get viewModel(){return t.viewModel.checksPanel}})},B=J=>{var re=Bd();M(J,re)};N(K,J=>{t.viewModel.checksPanel?J(L):J(B,!1)})}M(x,P)},F=x=>{var P=ge(),K=W(P);{var L=B=>{var J=ge(),re=W(J);{var ve=Se=>{Ni(Se,{get viewModel(){return t.viewModel.comparisonScenariosPanel}})},ye=Se=>{var Ne=Od();M(Se,Ne)};N(re,Se=>{t.viewModel.comparisonScenariosPanel?Se(ve):Se(ye,!1)})}M(B,J)};N(K,B=>{f$1(r)==="scenarios"&&B(L)},!0)}M(x,P)};N(C,x=>{f$1(r)==="checks"?x(D):x(F,!1)})}var g=R($,2),q=b$1(g);ts(q,{onClick:()=>t.onApplyAndRun?.(),children:(x,P)=>{var K=or("Apply and Run");M(x,K)},$$slots:{default:!0}}),O((x,P)=>{d=Le(c,1,"filter-popover-tab-button svelte-1i7odm5",null,d,x),T=Le(m,1,"filter-popover-tab-button svelte-1i7odm5",null,T,P)},[()=>({active:f$1(r)==="checks"}),()=>({active:f$1(r)==="scenarios"})]),M(e,s),le()}Pt(["click"]);var Wd=V('<div class="freeform-item-subtitle"><!></div>'),Yd=V('<div class="freeform-item-title-row no-selection"><div class="freeform-item-title svelte-gipzah"><!></div> <!></div>'),Hd=V('<div class="freeform-item-content"><div class="freeform-item-graph-container"><!></div></div>'),Xd=V('<div class="freeform-item svelte-gipzah"><!> <div class="freeform-item-content-container"><!></div></div>');const Zd={hash:"svelte-gipzah",code:".freeform-item.svelte-gipzah {display:flex;flex-direction:column;width:240px;height:200px;min-height:200px;border:solid 0.5px red;}.freeform-item-title.svelte-gipzah {font-size:10px;color:#fff;}"};function Jd(e,t){oe(t,!1),de(e,Zd);const r=()=>fe(f$1(o),"$content",n),[n,s]=Ue();let i=U(t,"viewModel",8),o=Y(i().content),u=Y(!1),c=Y(f$1(u)),d=Y();const m=pt();function T(){m("toggle")}Ge(()=>(f$1(u),f$1(c),z(i()),f$1(d)),()=>{(f$1(u)!==f$1(c)||i().requestKey!==f$1(d)?.requestKey)&&(f$1(d)?.clearData(),E(c,f$1(u)),E(d,i()),kt(E(o,i().content),"$content",n),f$1(u)&&i().requestData())}),rt(),Me();var $=Xd(),C=b$1($);{var D=q=>{var x=Yd(),P=b$1(x),K=b$1(P);ze(K,()=>(z(i()),_$1(()=>i().title)));var L=R(P,2);{var B=J=>{var re=Wd(),ve=b$1(re);ze(ve,()=>(z(i()),_$1(()=>i().subtitle))),M(J,re)};N(L,J=>{z(i()),_$1(()=>i().subtitle)&&J(B)})}me("click",P,T),M(q,x)};N(C,q=>{z(i()),_$1(()=>i().title)&&q(D)})}var F=R(C,2),g=b$1(F);Fr(g,{get visible(){return f$1(u)},set visible(q){E(u,q)},children:(q,x)=>{var P=ge(),K=W(P);{var L=B=>{var J=Hd(),re=b$1(J),ve=b$1(re);ms$2(ve,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}}),M(B,J)};N(K,B=>{r()&&B(L)})}M(q,P)},$$slots:{default:!0},$$legacy:!0}),M(e,$),le(),s()}var Qd=V('<div class="freeform-container svelte-1cqoei9"><div class="freeform-scroll-container svelte-1cqoei9"></div></div>');const eu={hash:"svelte-1cqoei9",code:".freeform-container.svelte-1cqoei9 {display:flex;flex-direction:column;flex:1;}.freeform-scroll-container.svelte-1cqoei9 {display:flex;flex:1 1 1px;flex-direction:column;gap:20px;overflow:auto;padding:1rem;align-items:flex-start;outline:none;background-color:#3c3c3c;}"};function tu(e,t){oe(t,!1),de(e,eu);const r=()=>fe(i,"$items",n),[n,s]=Ue(),i=U(t,"viewModel",8)().items;Me();var o=Qd(),u=b$1(o);Ce(u,5,r,Te,(c,d)=>{Jd(c,{get viewModel(){return f$1(d)}})}),M(e,o),le(),s()}var ru=V('<div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Generated:</div> <div class="label generated-date svelte-1u5zf43"> </div></div>'),su=V('<button class="bundle-button dataset-color-0 svelte-1u5zf43" data-testid="bundle-selector-left"> </button> <button class="bundle-button dataset-color-1 svelte-1u5zf43" data-testid="bundle-selector-right"> </button>',1),iu=V('<div class="label dataset-color-0 svelte-1u5zf43"> </div> <div class="label dataset-color-1 svelte-1u5zf43"> </div>',1),nu=V('<button class="icon-button filter svelte-1u5zf43" aria-label="Filters"><!></button>'),au=V('<div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Comparing:</div> <!></div> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><div class="label svelte-1u5zf43">Thresholds:</div> <div class="label bucket-color-0 svelte-1u5zf43"><!></div> <div class="label bucket-color-1 svelte-1u5zf43"><!></div> <div class="label bucket-color-2 svelte-1u5zf43"><!></div> <div class="label bucket-color-3 svelte-1u5zf43"><!></div> <div class="label bucket-color-4 svelte-1u5zf43"><!></div></div> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><!> <button class="icon-button controls svelte-1u5zf43" aria-label="Controls"><!></button></div>',1),ou=V('<div class="spacer-fixed svelte-1u5zf43"></div> <div class="header-group svelte-1u5zf43"><button class="icon-button filter svelte-1u5zf43" aria-label="Filters"><!></button></div>',1),lu=V("<option> </option>"),cu=V('<div class="control-label concurrency svelte-1u5zf43">Concurrency:</div> <select class="selector concurrency"></select> <div class="spacer-fixed svelte-1u5zf43"></div>',1),du=V('<div class="header-controls svelte-1u5zf43"><div class="spacer-flex svelte-1u5zf43"></div> <!> <div class="control-label sort-by svelte-1u5zf43">Sort by:</div> <select class="selector" data-testid="sort-mode-selector"><option>max diff</option><option>avg diff</option><option>max diff / max baseline diff</option><option>avg diff / avg baseline diff</option></select> <div class="spacer-fixed svelte-1u5zf43"></div> <input class="checkbox" type="checkbox" name="toggle-consistent-y-range"/> <label for="toggle-consistent-y-range">Consistent Y-Axis Ranges</label> <div class="spacer-fixed svelte-1u5zf43"></div> <div class="control-label">Graph Zoom:</div> <input type="range" min="0.3" max="2.5" step="0.1" class="svelte-1u5zf43"/> <div class="control-label"> </div></div>'),uu=V('<div class="header-container svelte-1u5zf43"><div class="header-content svelte-1u5zf43"><div class="header-group svelte-1u5zf43"><button class="icon-button home svelte-1u5zf43" aria-label="Home"><!></button></div> <div class="spacer-flex svelte-1u5zf43"></div> <!> <!></div> <!> <div class="line svelte-1u5zf43"></div></div>');const fu={hash:"svelte-1u5zf43",code:`.header-container.svelte-1u5zf43 {display:flex;flex-direction:column;box-sizing:border-box;width:100%;max-width:min(100%, 100vw);padding:0 1rem;color:#aaa;}.header-content.svelte-1u5zf43 {display:flex;flex-direction:row;margin:0.4rem 0;}.header-group.svelte-1u5zf43 {display:flex;flex-direction:row;align-items:center;}.spacer-flex.svelte-1u5zf43 {flex:1;min-width:20px;}.spacer-fixed.svelte-1u5zf43 {width:2rem;}.icon-button.svelte-1u5zf43 {background:none;border:none;padding:0;color:#bbb;cursor:pointer;}.icon-button.svelte-1u5zf43:hover {color:#fff;}.icon-button.controls.svelte-1u5zf43 {margin-left:1rem;}.label.svelte-1u5zf43:not(:last-child) {margin-right:1rem;}.generated-date.svelte-1u5zf43 {color:#ddd;}.bundle-button.svelte-1u5zf43 {background:none;padding:0.25rem 0.5rem;font:inherit;border:1px solid #333;border-radius:4px;cursor:pointer;}.bundle-button.svelte-1u5zf43:hover {background-color:rgba(255, 255, 255, 0.1);border-color:#888;}.bundle-button.svelte-1u5zf43:not(:last-child) {margin-right:1rem;}.header-controls.svelte-1u5zf43 {display:flex;flex-direction:row;margin:0.4rem 0;align-items:center;}.control-label.concurrency.svelte-1u5zf43,
.control-label.sort-by.svelte-1u5zf43 {margin-right:0.4rem;}input[type=range].svelte-1u5zf43 {width:10rem;margin:0 0.4rem;}.line.svelte-1u5zf43 {min-height:1px;margin-bottom:1rem;background-color:#555;}`};function vu(e,t){oe(t,!1),de(e,fu);const r=()=>fe(x,"$concurrency",d),n=()=>fe(C,"$generatedDateString",d),s=()=>fe($,"$thresholds",d),i=()=>fe(D,"$controlsVisible",d),o=()=>fe(q,"$sortMode",d),u=()=>fe(g,"$consistentYRange",d),c=()=>fe(F,"$zoom",d),[d,m]=Ue();let T=U(t,"viewModel",8);const $=T().thresholds,C=T().generatedDateString,D=T().controlsVisible,F=T().zoom,g=T().consistentYRange,q=T().sortMode,x=T().concurrency,P=pt();function K(){P("command",{cmd:"show-summary"})}function L(ie){P("command",{cmd:"toggle-bundle-selector",side:ie})}function B(){P("command",{cmd:"toggle-filters"})}function J(){T().controlsVisible.update(ie=>!ie)}function re(ie){const ke=parseInt(ie.target.value);ir(x,ke),document.dispatchEvent(new CustomEvent("sde-check-config-changed"))}Me();var ve=uu(),ye=b$1(ve),Se=b$1(ye),Ne=b$1(Se),Ke=b$1(Ne);nr(Ke,{class:"icon",get data(){return faHome}});var Ar=R(Se,4);{var hi=ie=>{var ke=ru(),ue=R(b$1(ke),2),G=b$1(ue);O(()=>j(G,n())),M(ie,ke)};N(Ar,ie=>{n()&&ie(hi)})}var gi=R(Ar,2);{var Gi=ie=>{var ke=au(),ue=R(W(ke),2),G=R(b$1(ue),2);{var X=da=>{var ha=su(),ya=W(ha),mi=b$1(ya),fa=R(ya,2),pa=b$1(fa);O(()=>{j(mi,(z(T()),_$1(()=>T().nameL))),j(pa,(z(T()),_$1(()=>T().nameR)))}),me("click",ya,()=>L("left")),me("click",fa,()=>L("right")),M(da,ha)},ce=da=>{var ha=iu(),ya=W(ha),mi=b$1(ya),fa=R(ya,2),pa=b$1(fa);O(()=>{j(mi,(z(T()),_$1(()=>T().nameL))),j(pa,(z(T()),_$1(()=>T().nameR)))}),M(da,ha)};N(G,da=>{z(T()),_$1(()=>T().bundleManager)?da(X):da(ce,!1)})}var De=R(ue,4),qe=R(b$1(De),2),bt=b$1(qe);ze(bt,()=>(s(),_$1(()=>s()[0])));var vr=R(qe,2),te=b$1(vr);ze(te,()=>(s(),_$1(()=>s()[1])));var se=R(vr,2),$e=b$1(se);ze($e,()=>(s(),_$1(()=>s()[2])));var Ie=R(se,2),Ye=b$1(Ie);ze(Ye,()=>(s(),_$1(()=>s()[3])));var Je=R(Ie,2),pi=b$1(Je);ze(pi,()=>(s(),_$1(()=>s()[4])));var Os=R(De,4),vi=b$1(Os);{var Ui=da=>{var ha=nu(),ya=b$1(ha);nr(ya,{class:"icon",get data(){return faFilter}}),me("click",ha,B),M(da,ha)};N(vi,da=>{z(T()),_$1(()=>T().devMode)&&da(Ui)})}var ca=R(vi,2),va=b$1(ca);nr(va,{class:"icon",get data(){return faCog}}),me("click",ca,J),M(ie,ke)},bs=ie=>{var ke=ge(),ue=W(ke);{var G=X=>{var ce=ou(),De=R(W(ce),2),qe=b$1(De),bt=b$1(qe);nr(bt,{class:"icon",get data(){return faFilter}}),me("click",qe,B),M(X,ce)};N(ue,X=>{z(T()),_$1(()=>T().devMode)&&X(G)},!0)}M(ie,ke)};N(gi,ie=>{z(T()),_$1(()=>T().nameL)?ie(Gi):ie(bs,!1)})}var ua=R(ye,2);{var Re=ie=>{var ke=du(),ue=R(b$1(ke),2);{var G=Ie=>{var Ye=cu(),Je=R(W(Ye),2);Ce(Je,4,()=>_$1(()=>Array.from({length:Math.floor(navigator.hardwareConcurrency/2)},(pi,Os)=>Os+1)),Te,(pi,Os)=>{var vi=lu(),Ui=b$1(vi),ca={};O(()=>{ri(vi,Os===r()),j(Ui,Os),ca!==(ca=Os)&&(vi.value=(vi.__value=Os)??"")}),M(pi,vi)}),me("change",Je,re),M(Ie,Ye)};N(ue,Ie=>{z(T()),_$1(()=>T().devMode)&&Ie(G)})}var X=R(ue,4);O(()=>{o(),Rn(()=>{})});var ce=b$1(X);ce.value=ce.__value="max-diff";var De=R(ce);De.value=De.__value="avg-diff";var qe=R(De);qe.value=qe.__value="max-diff-relative";var bt=R(qe);bt.value=bt.__value="avg-diff-relative";var vr=R(X,4),te=R(vr,8),se=R(te,2),$e=b$1(se);O(Ie=>j($e,Ie),[()=>(c(),_$1(()=>`${c().toFixed(1)}x`))]),Kn(X,o,Ie=>ir(q,Ie)),jn(vr,u,Ie=>ir(g,Ie)),ii(te,c,Ie=>ir(F,Ie)),M(ie,ke)};N(ua,ie=>{i()&&ie(Re)})}me("click",Ne,K),M(e,ve),le(),m()}var pu=V("<div></div>"),hu=V('<div class="dot-plot-container svelte-yxhckp"><div class="hline svelte-yxhckp"></div> <div class="vline end-line svelte-yxhckp" style="left: 0;"></div> <div class="vline end-line svelte-yxhckp" style="left: 100%;"></div> <!> <div></div></div>');const mu={hash:"svelte-yxhckp",code:".dot-plot-container.svelte-yxhckp {position:relative;width:100%;height:1.6rem;}.hline.svelte-yxhckp {position:absolute;left:0;top:0.7rem;width:100%;height:1px;background-color:#555;}.vline.svelte-yxhckp {position:absolute;left:0;height:1.4rem;width:1px;}.vline.end-line.svelte-yxhckp {background-color:#555;}.vline.avg-line.svelte-yxhckp {width:2px;margin-left:-1px;}.dot.svelte-yxhckp {position:absolute;top:0.3rem;width:0.8rem;height:0.8rem;margin-left:-0.4rem;border-radius:0.4rem;opacity:0.2;}"};function Fs(e,t){oe(t,!1),de(e,mu);let r=U(t,"viewModel",8),n=U(t,"colorClass",8);Me();var s=hu(),i=R(b$1(s),6);Ce(i,1,()=>(z(r()),_$1(()=>r().points)),Te,(u,c)=>{var d=pu();O(()=>{Le(d,1,`dot ${n()}`,"svelte-yxhckp"),Ae(d,`left: ${f$1(c)??""}%;`)}),M(u,d)});var o=R(i,2);O(()=>{Le(o,1,`vline avg-line ${n()}`,"svelte-yxhckp"),Ae(o,`left: ${z(r()),_$1(()=>r().avgPoint)??""}%;`)}),M(e,s),le()}var gu=V('<button class="run">Run</button>'),bu=V("<div>Running performance tests, please wait</div>"),wu=V('<tr><td class="rownum svelte-180kq73" rowspan="2"> </td><td class="dim svelte-180kq73"> </td><td class="value dataset-color-0 svelte-180kq73"> </td><td class="dim svelte-180kq73"> </td><td class="plot svelte-180kq73"><!></td></tr> <tr><td class="dim svelte-180kq73"> </td><td class="value dataset-color-1 svelte-180kq73"> </td><td class="dim svelte-180kq73"> </td><td class="plot svelte-180kq73"><!></td></tr>',1),_u=V('<table class="svelte-180kq73"><thead><tr><th class="svelte-180kq73">run</th><th class="svelte-180kq73">min</th><th class="svelte-180kq73">avg</th><th class="svelte-180kq73">max</th></tr></thead><tbody></tbody></table>'),xu=V('<div class="perf-container svelte-180kq73"><div class="controls-container svelte-180kq73"><!></div> <div class="table-container svelte-180kq73"><!></div></div>');const yu={hash:"svelte-180kq73",code:`.perf-container.svelte-180kq73 {display:flex;flex-direction:column;padding:0 1rem;}.controls-container.svelte-180kq73 {display:flex;flex-direction:column;align-items:flex-start;height:3rem;}.table-container.svelte-180kq73 {display:flex;flex:1;}table.svelte-180kq73 {border-collapse:collapse;}td.svelte-180kq73,
th.svelte-180kq73 {padding-top:0.2rem;padding-bottom:0.2rem;}th.svelte-180kq73 {color:#aaa;text-align:right;font-weight:500;}td.svelte-180kq73 {width:4.5rem;text-align:right;font-family:monospace;}td.rownum.svelte-180kq73 {width:2rem;}td.dim.svelte-180kq73 {color:#777;}td.plot.svelte-180kq73 {width:30rem;padding-left:2rem;padding-right:2rem;}`};function ku(e,t){oe(t,!1),de(e,yu);const r=()=>fe(o,"$rows",n),[n,s]=Ue();let i=U(t,"viewModel",8);const o=i().rows;let u=Y(!1);function c(){f$1(u)||(E(u,!0),runPerf({onComplete:(q,x)=>{i().addRow(q,x),E(u,!1)},onError:q=>{console.error(q),E(u,!1)}}))}Me();var d=xu(),m=b$1(d),T=b$1(m);{var $=q=>{var x=gu();O(()=>x.disabled=f$1(u)),me("click",x,c),M(q,x)},C=q=>{var x=bu();M(q,x)};N(T,q=>{f$1(u)?q(C,!1):q($)})}var D=R(m,2),F=b$1(D);{var g=q=>{var x=_u(),P=R(b$1(x));Ce(P,5,r,Te,(K,L)=>{var B=wu(),J=W(B),re=b$1(J),ve=b$1(re),ye=R(re),Se=b$1(ye),Ne=R(ye),Ke=b$1(Ne),Ar=R(Ne),hi=b$1(Ar),gi=R(Ar),Gi=b$1(gi);Fs(Gi,{get viewModel(){return f$1(L),_$1(()=>f$1(L).dotPlotL)},colorClass:"dataset-bg-0"});var bs=R(J,2),ua=b$1(bs),Re=b$1(ua),ie=R(ua),ke=b$1(ie),ue=R(ie),G=b$1(ue),X=R(ue),ce=b$1(X);Fs(ce,{get viewModel(){return f$1(L),_$1(()=>f$1(L).dotPlotR)},colorClass:"dataset-bg-1"}),O(()=>{j(ve,(f$1(L),_$1(()=>f$1(L).num))),j(Se,(f$1(L),_$1(()=>f$1(L).minTimeL))),j(Ke,(f$1(L),_$1(()=>f$1(L).avgTimeL))),j(hi,(f$1(L),_$1(()=>f$1(L).maxTimeL))),j(Re,(f$1(L),_$1(()=>f$1(L).minTimeR))),j(ke,(f$1(L),_$1(()=>f$1(L).avgTimeR))),j(G,(f$1(L),_$1(()=>f$1(L).maxTimeR)))}),M(K,B)}),M(q,x)};N(F,q=>{r(),_$1(()=>r().length>0)&&q(g)})}M(e,d),le(),s()}var Su=V('<div class="graph-container svelte-hxzd9c"><!></div>');const Mu={hash:"svelte-hxzd9c",code:".graph-container.svelte-hxzd9c {position:relative;display:flex;width:36rem;height:22rem;margin-left:1rem;margin-top:0.5rem;margin-bottom:1rem;}"};function Ru(e,t){oe(t,!1),de(e,Mu);const r=()=>fe(f$1(o),"$content",n),[n,s]=Ue();let i=U(t,"viewModel",8),o=Y(i().content),u=Y(!1),c=Y(f$1(u)),d=Y();Ge(()=>(f$1(u),f$1(c),z(i()),f$1(d)),()=>{(f$1(u)!==f$1(c)||i().baseRequestKey!==f$1(d)?.baseRequestKey)&&(f$1(d)?.clearData(),E(c,f$1(u)),E(d,i()),kt(E(o,i().content),"$content",n),f$1(u)&&i().requestData())}),rt(),Me(),Fr(e,{get visible(){return f$1(u)},set visible(m){E(u,m)},children:(m,T)=>{var $=ge(),C=W($);{var D=F=>{var g=Su(),q=b$1(g);ms$2(q,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}}),M(F,g)};N(C,F=>{r()&&F(D)})}M(m,$)},$$slots:{default:!0},$$legacy:!0}),le(),s()}var Cu=V('<div class="row check-graph svelte-hx6uys"><!></div>'),Iu=V('<div class="child-rows"></div>'),$u=V('<div><span class="label"><!></span></div> <!>',1);const Du={hash:"svelte-hx6uys",code:".check-graph.svelte-hx6uys {height:23rem;margin-left:8.5rem;}"};function Xn(e,t){oe(t,!1),de(e,Du);const r=()=>fe(f$1(u),"$expanded",s),n=()=>fe(f$1(o),"$childRows",s),[s,i]=Ue(),o=Y(),u=Y();let c=U(t,"viewModel",8),d=U(t,"onShowContextMenu",8);function m(){c().onClicked()}function T(x){c().scenarioReport?.checkScenario?.spec&&(x.preventDefault(),d()?.(x,c()))}Ge(()=>z(c()),()=>{kt(E(o,c().childRows),"$childRows",s)}),Ge(()=>z(c()),()=>{kt(E(u,c().expanded),"$expanded",s)}),rt(),Me();var $=$u(),C=W($),D=b$1(C),F=b$1(D);ze(F,()=>(z(c()),_$1(()=>c().span)));var g=R(C,2);{var q=x=>{var P=ge(),K=W(P);{var L=J=>{var re=Cu(),ve=b$1(re);Ru(ve,{get viewModel(){return z(c()),_$1(()=>c().graphBoxViewModel)}}),M(J,re)},B=J=>{var re=Iu();Ce(re,5,n,Te,(ve,ye)=>{var Se=ge(),Ne=W(Se);Xn(Ne,{get viewModel(){return f$1(ye)},get onShowContextMenu(){return d()}}),M(ve,Se)}),M(J,re)};N(K,J=>{z(c()),_$1(()=>c().graphBoxViewModel)?J(L):J(B,!1)})}M(x,P)};N(g,x=>{r()&&x(q)})}O(()=>Le(C,1,(z(c()),_$1(()=>`row ${c().rowClasses}`)),"svelte-hx6uys")),me("click",D,m),me("contextmenu",C,T),M(e,$),le(),i()}var Tu=V('<div class="bar bucket-bg-0 svelte-148uwot"></div> <div class="bar status-bg-failed svelte-148uwot"></div> <div class="bar status-bg-error svelte-148uwot"></div> <div class="bar status-bg-skipped svelte-148uwot"></div>',1),zu=V('<div class="bar gray svelte-148uwot" style="width: 100%"></div>'),Vu=V("<span>No checks</span>"),Eu=V("<span> </span>"),Pu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-passed"> </span>',1),Lu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-failed"> </span>',1),Nu=V('<span class="status-color-error"> </span>'),qu=V('<span class="status-color-error"> </span>'),Fu=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <!>',1),Ku=V('<span class="sep svelte-148uwot">&nbsp;|&nbsp;</span> <span class="status-color-skipped"> </span>',1),Au=V("<span> </span> <!> <!> <!> <!>",1),Bu=V('<div class="group-container svelte-148uwot"><div class="row group"><div class="label"> </div></div> <!></div>'),Ou=V('<div class="check-summary-container svelte-148uwot"><div class="summary-bar-row svelte-148uwot"><div class="bar-container svelte-148uwot"><!></div> <span class="summary-label svelte-148uwot"><!></span></div> <div class="check-detail svelte-148uwot"></div> <!></div>');const ju={hash:"svelte-148uwot",code:`.check-summary-container.svelte-148uwot {display:flex;flex-direction:column;}.check-detail.svelte-148uwot {display:flex;flex-direction:column;}.group-container.svelte-148uwot {margin-bottom:1.2rem;}.group-container.svelte-148uwot .test-rows {display:flex;flex-direction:column;}.group-container.svelte-148uwot .test-rows:not(.children-visible) {display:none;}.group-container.svelte-148uwot .test-rows.children-visible {display:flex;}.group-container.svelte-148uwot .row {display:flex;flex-direction:row;}.group-container.svelte-148uwot .row.group {position:sticky;top:50px;height:32px;z-index:6;background-color:#272727;font-size:1.2em;}.group-container.svelte-148uwot .row.group > .label {margin-top:8px;}.group-container.svelte-148uwot .row.test {position:sticky;display:flex;align-items:center;top:82px;height:20px;z-index:5;background-color:#272727;}.group-container.svelte-148uwot .row.scenario {position:sticky;top:102px;height:18px;z-index:4;background-color:#272727;}.group-container.svelte-148uwot .row.dataset {position:sticky;top:120px;height:18px;z-index:3;background-color:#272727;}.group-container.svelte-148uwot .row.predicate {position:sticky;top:138px;height:18px;z-index:2;background-color:#272727;}.group-container.svelte-148uwot .row.placeholder {height:18px;}.group-container.svelte-148uwot .row > .label {cursor:pointer;}.group-container.svelte-148uwot .row.scenario,
.group-container.svelte-148uwot .row.dataset,
.group-container.svelte-148uwot .row.predicate {color:#777;}.group-container.svelte-148uwot .bold {font-weight:700;color:#bbb;}.summary-bar-row.svelte-148uwot {display:flex;flex-direction:row;align-items:baseline;align-self:flex-start;margin:2.6rem 0;opacity:1;}.bar-container.svelte-148uwot {display:flex;flex-direction:row;width:15rem;height:0.8rem;}.bar.svelte-148uwot {height:0.8rem;}.bar.gray.svelte-148uwot {background-color:#777;}.summary-label.svelte-148uwot {margin-left:0.8rem;color:#fff;}.sep.svelte-148uwot {color:#777;}`};function Gu(e,t){oe(t,!1),de(e,ju);let r=U(t,"viewModel",8),n,s=Y([]),i=Y();const o=pt();function u(B,J){J.scenarioReport?.checkScenario?.spec?(n=J.scenarioReport,E(s,[{key:"show-trace-view",displayText:"Open Scenario in Trace View"}]),E(i,B)):(n=void 0,E(s,[]),E(i,void 0))}function c(){E(i,void 0)}function d(B){E(i,void 0);const J=B.detail;switch(J){case"show-trace-view":o("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:n?.checkScenario?.spec,scenarioKind:"check"});break;default:console.error(`ERROR: Unhandled context menu command '${J}'`);break}}Me();var m=Ou(),T=b$1(m),$=b$1(T),C=b$1($);{var D=B=>{var J=Tu(),re=W(J),ve=R(re,2),ye=R(ve,2),Se=R(ye,2);O(()=>{Ae(re,`width: ${z(r()),_$1(()=>r().percents[0])??""}%;`),Ae(ve,`width: ${z(r()),_$1(()=>r().percents[1])??""}%;`),Ae(ye,`width: ${z(r()),_$1(()=>r().percents[2])??""}%;`),Ae(Se,`width: ${z(r()),_$1(()=>r().percents[3])??""}%;`)}),M(B,J)},F=B=>{var J=zu();M(B,J)};N(C,B=>{z(r()),_$1(()=>r().total>0)?B(D):B(F,!1)})}var g=R($,2),q=b$1(g);{var x=B=>{var J=Vu();M(B,J)},P=B=>{var J=ge(),re=W(J);{var ve=Se=>{var Ne=Eu(),Ke=b$1(Ne);O(()=>j(Ke,`${z(r()),_$1(()=>r().total)??""} total passed`)),M(Se,Ne)},ye=Se=>{var Ne=Au(),Ke=W(Ne),Ar=b$1(Ke),hi=R(Ke,2);{var gi=ue=>{var G=Pu(),X=R(W(G),2),ce=b$1(X);O(()=>j(ce,`${z(r()),_$1(()=>r().passed)??""} passed`)),M(ue,G)};N(hi,ue=>{z(r()),_$1(()=>r().passed)&&ue(gi)})}var Gi=R(hi,2);{var bs=ue=>{var G=Lu(),X=R(W(G),2),ce=b$1(X);O(()=>j(ce,`${z(r()),_$1(()=>r().failed)??""} failed`)),M(ue,G)};N(Gi,ue=>{z(r()),_$1(()=>r().failed)&&ue(bs)})}var ua=R(Gi,2);{var Re=ue=>{var G=Fu(),X=R(W(G),2);{var ce=qe=>{var bt=Nu(),vr=b$1(bt);O(()=>j(vr,`${z(r()),_$1(()=>r().errors)??""} errors`)),M(qe,bt)},De=qe=>{var bt=qu(),vr=b$1(bt);O(()=>j(vr,`${z(r()),_$1(()=>r().errors)??""} error`)),M(qe,bt)};N(X,qe=>{z(r()),_$1(()=>r().errors>1)?qe(ce):qe(De,!1)})}M(ue,G)};N(ua,ue=>{z(r()),_$1(()=>r().errors)&&ue(Re)})}var ie=R(ua,2);{var ke=ue=>{var G=Ku(),X=R(W(G),2),ce=b$1(X);O(()=>j(ce,`${z(r()),_$1(()=>r().skipped)??""} skipped`)),M(ue,G)};N(ie,ue=>{z(r()),_$1(()=>r().skipped)&&ue(ke)})}O(()=>j(Ar,`${z(r()),_$1(()=>r().total)??""} total`)),M(Se,Ne)};N(re,Se=>{z(r()),_$1(()=>r().total===r().passed)?Se(ve):Se(ye,!1)},!0)}M(B,J)};N(q,B=>{z(r()),_$1(()=>r().total===0)?B(x):B(P,!1)})}var K=R(T,2);Ce(K,5,()=>(z(r()),_$1(()=>r().groups)),Te,(B,J)=>{var re=Bu(),ve=b$1(re),ye=b$1(ve),Se=b$1(ye),Ne=R(ve,2);Ce(Ne,1,()=>(f$1(J),_$1(()=>f$1(J).tests)),Te,(Ke,Ar)=>{Xn(Ke,{get viewModel(){return f$1(Ar)},onShowContextMenu:u})}),O(()=>j(Se,(f$1(J),_$1(()=>f$1(J).name)))),M(B,re)});var L=R(K,2);hs(L,{get items(){return f$1(s)},get initialEvent(){return f$1(i)},$$events:{"item-selected":d,clickout:c}}),M(e,m),le()}var Uu=V('<div class="bar striped svelte-st0o1s"></div>'),Wu=V('<div class="bar bucket-bg-0 svelte-st0o1s"></div> <div class="bar bucket-bg-1 svelte-st0o1s"></div> <div class="bar bucket-bg-2 svelte-st0o1s"></div> <div class="bar bucket-bg-3 svelte-st0o1s"></div> <div class="bar bucket-bg-4 svelte-st0o1s"></div> <div class="bar bucket-bg-5 svelte-st0o1s"></div>',1),Yu=V('<div class="subtitle svelte-st0o1s"><!></div>'),Hu=V('<div class="annotations svelte-st0o1s"><!></div>'),Xu=V('<div class="summary-row svelte-st0o1s"><div class="bar-container svelte-st0o1s"><!></div> <div class="title-container svelte-st0o1s"><div class="title-part svelte-st0o1s"><div class="title svelte-st0o1s"><!></div> <!> <!></div></div></div>');const Zu={hash:"svelte-st0o1s",code:".summary-row.svelte-st0o1s {display:flex;flex-direction:row;flex:0 0 auto;align-items:flex-end;margin:0.2rem 0;opacity:0.8;}.summary-row.svelte-st0o1s:hover {opacity:1;}.bar-container.svelte-st0o1s {display:flex;flex-direction:row;width:15rem;height:0.8rem;margin-bottom:0.25rem;cursor:pointer;}.bar.svelte-st0o1s {height:0.8rem;}.bar.striped.svelte-st0o1s {width:100%;background:repeating-linear-gradient(-45deg, goldenrod, goldenrod 0.4rem, darkgoldenrod 0.4rem, darkgoldenrod 1rem);}.title-container.svelte-st0o1s {display:flex;flex-direction:column;margin-left:0.8rem;}.title-part.svelte-st0o1s {display:flex;flex-direction:row;align-items:baseline;}.title.svelte-st0o1s {color:#fff;cursor:pointer;}.subtitle.svelte-st0o1s {font-size:0.8em;margin-left:0.6rem;color:#aaa;cursor:pointer;}.annotations.svelte-st0o1s {font-size:0.8em;margin-left:0.3rem;color:#aaa;}.annotations.svelte-st0o1s .annotation {margin:0 0.3rem;padding:0.1rem 0.3rem;background-color:#1c1c1c;border:0.5px solid #555;border-radius:0.4rem;}"};function Ju(e,t){oe(t,!1),de(e,Zu);let r=U(t,"viewModel",8);const n=r().diffPercentByBucket,s=pt();function i(){r().itemKey&&s("command",{cmd:"show-comparison-detail",summaryRow:r()})}function o(K){r().groupSummary?.root.kind==="scenario"&&s("show-context-menu",{kind:"scenario",scenario:r().groupSummary?.root,clickEvent:K})}Me();var u=Xu(),c=b$1(u),d=b$1(c);{var m=K=>{var L=Uu();M(K,L)},T=K=>{var L=Wu(),B=W(L),J=R(B,2),re=R(J,2),ve=R(re,2),ye=R(ve,2),Se=R(ye,2);O(()=>{Ae(B,`width: ${_$1(()=>n[0])??""}%;`),Ae(J,`width: ${_$1(()=>n[1])??""}%;`),Ae(re,`width: ${_$1(()=>n[2])??""}%;`),Ae(ve,`width: ${_$1(()=>n[3])??""}%;`),Ae(ye,`width: ${_$1(()=>n[4])??""}%;`),Ae(Se,`width: ${_$1(()=>n[5])??""}%;`)}),M(K,L)};N(d,K=>{z(r()),_$1(()=>r().diffPercentByBucket===void 0)?K(m):K(T,!1)})}var $=R(c,2),C=b$1($),D=b$1(C),F=b$1(D);ze(F,()=>(z(r()),_$1(()=>r().title)));var g=R(D,2);{var q=K=>{var L=Yu(),B=b$1(L);ze(B,()=>(z(r()),_$1(()=>r().subtitle))),me("click",L,i),M(K,L)};N(g,K=>{z(r()),_$1(()=>r().subtitle)&&K(q)})}var x=R(g,2);{var P=K=>{var L=Hu(),B=b$1(L);ze(B,()=>(z(r()),_$1(()=>r().annotations))),M(K,L)};N(x,K=>{z(r()),_$1(()=>r().annotations)&&K(P)})}me("click",c,i),me("click",D,i),me("contextmenu",C,ni(o)),M(e,u),le()}var Qu=V('<div class="header-count svelte-lq58a5"> </div>'),ef=V('<div class="section-container svelte-lq58a5"><div><div class="header-bar svelte-lq58a5"></div> <div class="header-title svelte-lq58a5"><!></div> <!></div> <!></div>');const tf={hash:"svelte-lq58a5",code:".section-container.svelte-lq58a5 {display:flex;flex-direction:column;}.section-container.svelte-lq58a5:not(:last-child) {margin-bottom:1.5rem;}.header-row.svelte-lq58a5 {display:flex;flex-direction:row;align-items:center;margin:0.4rem 0;cursor:pointer;}.header-row.collapsed.svelte-lq58a5 {opacity:0.5;}.header-row.svelte-lq58a5:hover {opacity:0.8;}.header-bar.svelte-lq58a5 {display:flex;width:15rem;height:1px;background-color:#555;}.header-title.svelte-lq58a5 {margin-left:0.8rem;color:#fff;font-size:1.2em;}.header-count.svelte-lq58a5 {margin-left:0.5rem;padding:0.1rem 0.5rem;border-radius:1rem;background-color:rgba(255, 165, 0, 0.7);color:#eee;font-size:0.85em;}"};function rf(e,t){oe(t,!1),de(e,tf);const r=()=>fe(o,"$expanded",n),[n,s]=Ue();let i=U(t,"viewModel",8);const o=i().expanded;function u(){o.update(g=>!g)}Me();var c=ef(),d=b$1(c),m=R(b$1(d),2),T=b$1(m);ze(T,()=>(z(i()),_$1(()=>i().header.title)));var $=R(m,2);{var C=g=>{var q=Qu(),x=b$1(q);O(()=>j(x,(z(i()),_$1(()=>i().rowsWithDiffs)))),M(g,q)};N($,g=>{z(i()),_$1(()=>i().rowsWithDiffs>0)&&g(C)})}var D=R(d,2);{var F=g=>{var q=ge(),x=W(q);Ce(x,1,()=>(z(i()),_$1(()=>i().rows)),Te,(P,K)=>{Ju(P,{get viewModel(){return f$1(K)},$$events:{command(L){st.call(this,t,L)},"show-context-menu"(L){st.call(this,t,L)}}})}),M(g,q)};N(D,g=>{r()&&g(F)})}O(()=>Le(d,1,`header-row ${r()?"expanded":"collapsed"}`,"svelte-lq58a5")),me("click",d,u),M(e,c),le(),s()}var sf=V('<div class="section-container svelte-1ewsx3b"><!></div>'),nf=V('<div class="comparison-summary-container svelte-1ewsx3b"><!> <div class="footer svelte-1ewsx3b"></div> <!></div>');const af={hash:"svelte-1ewsx3b",code:".comparison-summary-container.svelte-1ewsx3b {display:flex;flex-direction:column;padding-top:2rem;}.section-container.svelte-1ewsx3b {display:flex;flex-direction:column;scroll-margin-top:5rem;}.section-container.svelte-1ewsx3b:not(:last-child) {margin-bottom:1.5rem;}.footer.svelte-1ewsx3b {flex:0 0 1rem;}"};function Ms(e,t){oe(t,!1),de(e,af);const r=()=>fe(f$1(i),"$sections",n),[n,s]=Ue(),i=Y();let o=U(t,"viewModel",8),u,c=Y([]),d=Y();const m=pt();function T(q){switch(q.detail?.kind){case"scenario":{u=q.detail.scenario,E(c,[{key:"show-trace-view",displayText:"Open Scenario in Trace View"}]),E(d,q.detail.clickEvent);break}default:u=void 0,E(c,[]),E(d,void 0);break}}function $(){E(d,void 0)}function C(q){E(d,void 0);const x=q.detail;switch(x){case"show-trace-view":{m("command",{cmd:"show-trace-view-with-scenario",scenarioSpec:u?.specR,scenarioKind:"comparison"});break}default:console.error(`ERROR: Unhandled context menu command '${x}'`);break}}Ge(()=>z(o()),()=>{kt(E(i,o().sections),"$sections",n)}),rt(),Me();var D=nf(),F=b$1(D);Ce(F,1,r,Te,(q,x)=>{var P=sf(),K=b$1(P);rf(K,{get viewModel(){return f$1(x)},$$events:{command(L){st.call(this,t,L)},"show-context-menu":T}}),O(()=>yt(P,"id",(f$1(x),_$1(()=>f$1(x).header.rowKey)))),M(q,P)});var g=R(F,4);hs(g,{get items(){return f$1(c)},get initialEvent(){return f$1(d)},$$events:{"item-selected":C,clickout:$}}),M(e,D),le(),s()}var of=V('<td class="plot svelte-t7dc3f"><!></td>'),lf=V('<td> </td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"> </div></div></td> <td class="svelte-t7dc3f"><div class="cell dim svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <td class="svelte-t7dc3f"><div class="cell dim svelte-t7dc3f"><div class="value svelte-t7dc3f"> </div> <div class="change svelte-t7dc3f"></div></div></td> <!>',1);const cf={hash:"svelte-t7dc3f",code:"td.svelte-t7dc3f {padding:0;height:1.8rem;}.name.svelte-t7dc3f {padding-right:3rem;max-width:20rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.row-header {color:#aaa;}.cell.svelte-t7dc3f {display:flex;width:100%;flex-direction:row;align-items:baseline;font-family:monospace;}.cell.dim.svelte-t7dc3f {color:#777;}.value.svelte-t7dc3f {flex:1;padding-right:0.4rem;text-align:right;}.change.svelte-t7dc3f {flex:1;padding-left:0.4rem;text-align:left;font-size:0.8em;}.plot.svelte-t7dc3f {width:12rem;padding-left:2rem;padding-right:2rem;cursor:pointer;}"};function Rs(e,t){oe(t,!1),de(e,cf);let r=U(t,"viewModel",8);const n=r().datasetClassIndex,s=n!==void 0?`dataset-color-${n}`:"row-header",i=n!==void 0?`dataset-bg-${n}`:"",o=pt();function u(){o("command",{cmd:"show-perf"})}Me();var c=lf(),d=W(c),m=b$1(d),T=R(d,2),$=b$1(T),C=b$1($),D=b$1(C),F=R(T,2),g=b$1(F),q=b$1(g),x=b$1(q),P=R(F,2),K=b$1(P),L=b$1(K),B=b$1(L),J=R(L,2),re=b$1(J),ve=R(P,2),ye=b$1(ve),Se=b$1(ye),Ne=b$1(Se),Ke=R(Se,2),Ar=b$1(Ke),hi=R(ve,2),gi=b$1(hi),Gi=b$1(gi),bs=b$1(Gi),ua=R(Gi,2),Re=b$1(ua),ie=R(hi,2),ke=b$1(ie),ue=b$1(ke),G=b$1(ue),X=R(ie,2),ce=b$1(X),De=b$1(ce),qe=b$1(De),bt=R(X,2);{var vr=te=>{var se=of(),$e=b$1(se);Fs($e,{get viewModel(){return z(r()),_$1(()=>r().dotPlot)},get colorClass(){return i}}),me("click",se,u),M(te,se)};N(bt,te=>{z(r()),_$1(()=>r().dotPlot)&&te(vr)})}O(()=>{Le(d,1,`name ${s}`,"svelte-t7dc3f"),j(m,(z(r()),_$1(()=>r().modelName))),j(D,(z(r()),_$1(()=>r().inputs))),j(x,(z(r()),_$1(()=>r().outputs))),j(B,(z(r()),_$1(()=>r().modelSize))),j(re,(z(r()),_$1(()=>r().modelSizePctChange))),j(Ne,(z(r()),_$1(()=>r().dataSize))),j(Ar,(z(r()),_$1(()=>r().dataSizePctChange))),j(bs,(z(r()),_$1(()=>r().avgTime))),j(Re,(z(r()),_$1(()=>r().avgTimePctChange))),j(G,(z(r()),_$1(()=>r().minTime))),j(qe,(z(r()),_$1(()=>r().maxTime)))}),M(e,c),le()}var df=V('<table class="header svelte-183yv7e"><thead><tr><th class="svelte-183yv7e"></th><th class="svelte-183yv7e">inputs</th><th class="svelte-183yv7e">outputs</th><th class="svelte-183yv7e">model size (bytes)</th><th class="svelte-183yv7e">data size (bytes)</th><th class="svelte-183yv7e">avg time (ms)</th><th class="dim svelte-183yv7e">min time (ms)</th><th class="dim svelte-183yv7e">max time (ms)</th><th class="svelte-183yv7e"></th></tr></thead><tbody><tr><!></tr><tr><!></tr><tr><!></tr></tbody></table>');const uf={hash:"svelte-183yv7e",code:"table.svelte-183yv7e {border-collapse:collapse;}th.svelte-183yv7e {color:#aaa;text-align:left;font-family:Roboto;font-weight:500;}th.dim.svelte-183yv7e {color:#555;}th.svelte-183yv7e:nth-child(2), th.svelte-183yv7e:nth-child(3) {width:6rem;}th.svelte-183yv7e:nth-child(4), th.svelte-183yv7e:nth-child(5) {width:10rem;}th.svelte-183yv7e:nth-child(6) {width:8rem;}th.svelte-183yv7e:nth-child(7), th.svelte-183yv7e:nth-child(8) {width:8rem;}"};function ff(e,t){oe(t,!1),de(e,uf);let r=U(t,"viewModel",8);Me();var n=df(),s=R(b$1(n)),i=b$1(s),o=b$1(i);Rs(o,{get viewModel(){return z(r()),_$1(()=>r().row1)},$$events:{command(T){st.call(this,t,T)}}});var u=R(i),c=b$1(u);Rs(c,{get viewModel(){return z(r()),_$1(()=>r().row2)},$$events:{command(T){st.call(this,t,T)}}});var d=R(u),m=b$1(d);Rs(m,{get viewModel(){return z(r()),_$1(()=>r().row3)},$$events:{command(T){st.call(this,t,T)}}}),M(e,n),le()}var vf=(e,t)=>t.onClick(),pf=V('<div><div class="tab-title svelte-1dgb6r4"> </div> <div> </div></div>');const hf={hash:"svelte-1dgb6r4",code:".tab-item.svelte-1dgb6r4 {display:flex;flex-direction:column;padding:0.5rem 3rem 0.3rem 0;cursor:pointer;opacity:0.7;border-bottom:solid 1px transparent;}.tab-item.svelte-1dgb6r4:hover {opacity:1;}.tab-item.selected.svelte-1dgb6r4 {opacity:1;border-bottom:solid 1px #555;}.tab-title.svelte-1dgb6r4 {font-size:1.6rem;font-weight:700;color:#fff;margin-bottom:0.2rem;cursor:pointer;}.tab-subtitle.svelte-1dgb6r4 {font-size:1rem;font-weight:400;}"};function mf(e,t){oe(t,!0),de(e,hf);const r=()=>fe(t.subtitleClass,"$subtitleClass",s),n=()=>fe(t.subtitle,"$subtitle",s),[s,i]=Ue();var o=pf();let u;o.__click=[vf,t];var c=b$1(o),d=b$1(c),m=R(c,2),T=b$1(m);O($=>{u=Le(o,1,"tab-item svelte-1dgb6r4",null,u,$),j(d,t.title),Le(m,1,`tab-subtitle ${r()}`,"svelte-1dgb6r4"),j(T,n())},[()=>({selected:t.selected})]),M(e,o),le(),i()}Pt(["click"]);var gf=V('<div class="tab-bar svelte-6ugrco"></div>');const bf={hash:"svelte-6ugrco",code:".tab-bar.svelte-6ugrco {position:sticky;top:0;display:flex;flex-direction:row;gap:3rem;background-color:#272727;z-index:1000;margin:0 -1rem;padding:0 1rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.8);}"};function wf(e,t){oe(t,!1),de(e,bf);const r=()=>fe(o,"$selectedItemId",n),[n,s]=Ue();let i=U(t,"viewModel",8);const o=i().selectedItemId,u=pt();function c(T){i().selectedIndex.set(T)}function d(T){oi(T)||(T.key==="ArrowLeft"?(i().selectedIndex.update($=>$>0?$-1:$),T.preventDefault()):T.key==="ArrowRight"?(i().selectedIndex.update($=>$<i().items.length-1?$+1:$),T.preventDefault()):T.key==="ArrowDown"&&(u("command",{cmd:"enter-tab",itemId:r()}),T.preventDefault()))}Me();var m=gf();me("keydown",Ir,d),Ce(m,5,()=>(z(i()),_$1(()=>i().items)),Te,(T,$,C)=>{{let D=Er(()=>(f$1($),r(),_$1(()=>f$1($).id===r())));mf(T,{get title(){return f$1($),_$1(()=>f$1($).title)},get subtitle(){return f$1($),_$1(()=>f$1($).subtitle)},get subtitleClass(){return f$1($),_$1(()=>f$1($).subtitleClass)},get selected(){return f$1(D)},onClick:()=>c(C)})}}),M(e,m),le(),s()}var _f=V('<div class="header-container svelte-3dzbgn"><!></div> <div class="line svelte-3dzbgn"></div>',1),xf=V('<div class="summary-container svelte-3dzbgn"><div class="scroll-container svelte-3dzbgn"><!> <!> <!></div></div>');const yf={hash:"svelte-3dzbgn",code:".summary-container.svelte-3dzbgn {display:flex;flex-direction:column;flex:1;}.scroll-container.svelte-3dzbgn {position:relative;display:flex;flex:1 1 1px;flex-direction:column;padding:0 1rem;overflow:auto;}.header-container.svelte-3dzbgn {margin-bottom:1rem;}.line.svelte-3dzbgn {min-height:1px;margin-bottom:0.5rem;background-color:#555;}"};function kf(e,t){oe(t,!1),de(e,yf);const r=()=>fe(o,"$selectedTabId",n),[n,s]=Ue();let i=U(t,"viewModel",8);const o=i().tabBarViewModel.selectedItemId;Me();var u=xf(),c=b$1(u),d=b$1(c);{var m=F=>{var g=_f(),q=W(g),x=b$1(q);ff(x,{get viewModel(){return z(i()),_$1(()=>i().statsTableViewModel)},$$events:{command(P){st.call(this,t,P)}}}),M(F,g)};N(d,F=>{z(i()),_$1(()=>i().statsTableViewModel)&&F(m)})}var T=R(d,2);wf(T,{get viewModel(){return z(i()),_$1(()=>i().tabBarViewModel)},$$events:{command(F){st.call(this,t,F)}}});var $=R(T,2);{var C=F=>{Gu(F,{get viewModel(){return z(i()),_$1(()=>i().checkSummaryViewModel)},$$events:{command(g){st.call(this,t,g)}}})},D=F=>{var g=ge(),q=W(g);{var x=K=>{Ms(K,{get viewModel(){return z(i()),_$1(()=>i().comparisonViewsSummaryViewModel)},$$events:{command(L){st.call(this,t,L)}}})},P=K=>{var L=ge(),B=W(L);{var J=ve=>{Ms(ve,{get viewModel(){return z(i()),_$1(()=>i().comparisonsByScenarioSummaryViewModel)},$$events:{command(ye){st.call(this,t,ye)}}})},re=ve=>{var ye=ge(),Se=W(ye);{var Ne=Ke=>{Ms(Ke,{get viewModel(){return z(i()),_$1(()=>i().comparisonsByDatasetSummaryViewModel)},$$events:{command(Ar){st.call(this,t,Ar)}}})};N(Se,Ke=>{r()==="comps-by-dataset"&&Ke(Ne)},!0)}M(ve,ye)};N(B,ve=>{r()==="comps-by-scenario"?ve(J):ve(re,!1)},!0)}M(K,L)};N(q,K=>{r()==="comp-views"?K(x):K(P,!1)},!0)}M(F,g)};N($,F=>{r()==="checks"?F(C):F(D,!1)})}M(e,u),le(),s()}var Sf=V("<option><!></option>"),Mf=V('<select role="combobox"></select>');function Gr(e,t){oe(t,!1);const r=()=>fe(u,"$selectedValue",n),[n,s]=Ue();let i=U(t,"viewModel",8),o=U(t,"ariaLabel",8,void 0);const u=i().selectedValue,c=Pe(u);function d(){i().onUserChange?.(Pe(u))}Me();var m=Mf();O(()=>{r(),Rn(()=>{o(),i()})}),Ce(m,5,()=>(z(i()),_$1(()=>i().options)),Te,(T,$)=>{var C=Sf(),D=b$1(C);ze(D,()=>(f$1($),_$1(()=>f$1($).label)));var F={};O(()=>{C.disabled=(f$1($),_$1(()=>f$1($).options.disabled===!0)),yt(C,"hidden",(f$1($),_$1(()=>f$1($).options.hidden===!0))),ri(C,(f$1($),_$1(()=>f$1($).value===c))),F!==(F=(f$1($),_$1(()=>f$1($).value)))&&(C.value=(C.__value=(f$1($),_$1(()=>f$1($).value)))??"")}),M(T,C)}),O(()=>yt(m,"aria-label",o())),Kn(m,r,T=>ir(u,T)),me("change",m,d),M(e,m),le(),s()}var Rf=V("<div></div>"),Cf=V('<div class="trace-points svelte-zv717u"></div>'),If=V('<div><div class="trace-var-name-container svelte-zv717u"><div class="trace-var-name svelte-zv717u"> </div></div> <!></div>');const $f={hash:"svelte-zv717u",code:".trace-row.svelte-zv717u {display:flex;flex-direction:row;}.trace-var-name-container.svelte-zv717u {display:flex;flex-wrap:nowrap;font-size:10px;color:#fff;width:250px;max-width:250px;margin-right:10px;}.trace-var-name.svelte-zv717u {display:flex;flex-wrap:nowrap;font-size:10px;color:#fff;white-space:nowrap;overflow:hidden;z-index:1000;}.trace-var-name.svelte-zv717u:hover {overflow:unset;background-color:#222;}.trace-points.svelte-zv717u {display:flex;flex-direction:row;align-items:center;gap:2px;}.trace-point.svelte-zv717u {width:6px;height:6px;}.trace-point.empty.svelte-zv717u {width:4px;height:4px;background-color:unset !important;border:solid 1px #aaa;}.trace-point.selected.svelte-zv717u {border:solid 2px #4a9eff;box-sizing:border-box;}"};function Df(e,t){oe(t,!1),de(e,$f);let r=U(t,"viewModel",8),n=U(t,"selectedPointIndex",8,void 0);const s=pt();function i(D,F){D.diffPoint&&s("show-tooltip",{eventX:F.clientX,eventY:F.clientY,datasetKey:r().datasetKey,varName:r().varName,diffPoint:D.diffPoint})}function o(){s("hide-tooltip")}function u(D){s("select",{pointIndex:D})}Me();var c=If();let d;var m=b$1(c),T=b$1(m),$=b$1(T),C=R(m,2);Fr(C,{children:(D,F)=>{var g=Cf();Ce(g,5,()=>(z(r()),_$1(()=>r().points)),Te,(q,x,P)=>{var K=Rf();let L;O(B=>{L=Le(K,1,"trace-point svelte-zv717u",null,L,B),Ae(K,`background-color: ${f$1(x),_$1(()=>f$1(x).color)??""}`)},[()=>({empty:f$1(x).hasDiff===void 0,selected:n()===P})]),me("mouseover",K,B=>i(f$1(x),B)),me("mouseleave",K,o),me("click",K,()=>u(P)),M(q,K)}),M(D,g)},$$slots:{default:!0}}),O(D=>{d=Le(c,1,"trace-row svelte-zv717u",null,d,D),yt(c,"data-var-name",(z(r()),_$1(()=>r().varName))),j($,(z(r()),_$1(()=>r().varName)))},[()=>({selected:n()!==void 0})]),M(e,c),le()}var Tf=V('<div class="loading svelte-17ybi2h"></div>'),zf=V('<div class="error svelte-17ybi2h"> </div>'),Vf=V('<div class="trace-tooltip svelte-17ybi2h"><div class="tooltip-header svelte-17ybi2h"><div class="tooltip-title svelte-17ybi2h"> </div></div> <div class="tooltip-data svelte-17ybi2h"><div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Time:</span> <span class="data-value svelte-17ybi2h"> </span></div> <div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Value 1:</span> <span class="data-value svelte-17ybi2h"> </span></div> <div class="data-point svelte-17ybi2h"><span class="data-label svelte-17ybi2h">Value 2:</span> <span class="data-value svelte-17ybi2h"> </span></div></div> <div class="tooltip-graph svelte-17ybi2h"><!></div></div>');const Ef={hash:"svelte-17ybi2h",code:`.trace-tooltip.svelte-17ybi2h {position:absolute;display:flex;flex-direction:column;width:400px;height:300px;padding:12px;background-color:#2a2a2a;border:1px solid #555;border-radius:8px;box-shadow:0 4px 12px rgba(0, 0, 0, 0.3);font-family:inherit;z-index:1000;}.tooltip-header.svelte-17ybi2h {margin-bottom:8px;}.tooltip-title.svelte-17ybi2h {margin-bottom:4px;font-size:14px;font-weight:bold;color:#fff;}.tooltip-data.svelte-17ybi2h {display:flex;flex-direction:column;gap:4px;margin-bottom:12px;}.data-point.svelte-17ybi2h {display:flex;justify-content:flex-start;font-size:12px;}.data-label.svelte-17ybi2h {width:50px;margin-right:6px;color:#ccc;text-align:right;}.data-value.svelte-17ybi2h {color:#fff;font-family:monospace;}.tooltip-graph.svelte-17ybi2h {flex:1;position:relative;min-height:200px;display:flex;align-items:center;justify-content:center;}.loading.svelte-17ybi2h,
.error.svelte-17ybi2h {color:#ccc;font-size:12px;text-align:center;}.error.svelte-17ybi2h {color:#ff6b6b;}`};function Pf(e,t){oe(t,!1),de(e,Ef);const r=()=>fe(f$1(c),"$content",n),[n,s]=Ue();let i=U(t,"viewModel",8,void 0),o=U(t,"x",8,0),u=U(t,"y",8,0),c=Y(i().content),d=Y();Ge(()=>(z(i()),f$1(d)),()=>{i()?.requestKey!==f$1(d)?.requestKey&&(f$1(d)?.clearData(),E(d,i()),kt(E(c,i().content),"$content",n),i().requestData())}),rt(),Me();var m=Vf(),T=b$1(m),$=b$1(T),C=b$1($),D=R(T,2),F=b$1(D),g=R(b$1(F),2),q=b$1(g),x=R(F,2),P=R(b$1(x),2),K=b$1(P),L=R(x,2),B=R(b$1(L),2),J=b$1(B),re=R(D,2),ve=b$1(re);{var ye=Ne=>{var Ke=Tf();M(Ne,Ke)},Se=Ne=>{var Ke=ge(),Ar=W(Ke);{var hi=Gi=>{var bs=zf(),ua=b$1(bs);O(()=>j(ua,`Error: ${r(),_$1(()=>r().error)??""}`)),M(Gi,bs)},gi=Gi=>{var bs=ge(),ua=W(bs);{var Re=ie=>{ms$2(ie,{get viewModel(){return r(),_$1(()=>r().comparisonGraphViewModel)}})};N(ua,ie=>{r(),_$1(()=>r()?.comparisonGraphViewModel)&&ie(Re)},!0)}M(Gi,bs)};N(Ar,Gi=>{r(),_$1(()=>r()?.error)?Gi(hi):Gi(gi,!1)},!0)}M(Ne,Ke)};N(ve,Ne=>{r(),_$1(()=>r()?.loading)?Ne(ye):Ne(Se,!1)})}O((Ne,Ke)=>{Ae(m,`left: ${o()??""}px; top: ${u()??""}px;`),j(C,(z(i()),_$1(()=>i().varName))),j(q,(z(i()),_$1(()=>i().diffPoint.time))),j(K,Ne),j(J,Ke)},[()=>(z(i()),_$1(()=>i().diffPoint.valueL.toFixed(6))),()=>(z(i()),_$1(()=>i().diffPoint.valueR.toFixed(6)))]),M(e,m),le(),s()}var Lf=V('<div class="trace-scenario-selector-label svelte-135ht03">File:</div> <input type="file" class="trace-dat-file-chooser svelte-135ht03" id="trace-dat-file" name="trace-dat-file" accept=".dat"/>',1),Nf=V('<div class="trace-scenario-selector-label svelte-135ht03">Scenario:</div> <!>',1),qf=V("<div> </div>"),Ff=V("<div>No differences detected</div>"),Kf=V('<div class="trace-group svelte-135ht03"><div class="trace-group-title svelte-135ht03"> </div> <!></div>'),Af=V('<div class="trace-container svelte-135ht03" tabindex="0"><div class="trace-header-container svelte-135ht03"><div class="trace-header-content svelte-135ht03"><div class="trace-source-selector-label svelte-135ht03">Source 1:</div> <!> <!> <div class="trace-source-selector-label svelte-135ht03">Source 2:</div> <!> <div class="trace-scenario-selector-label svelte-135ht03">Scenario:</div> <!></div> <div class="trace-options svelte-135ht03"><label class="trace-checkbox-label svelte-135ht03"><input type="checkbox" class="svelte-135ht03"/> Hide rows with no diffs</label></div></div> <div class="trace-scroll-container svelte-135ht03"><!> <!></div></div>');const Bf={hash:"svelte-135ht03",code:`.trace-container.svelte-135ht03 {display:flex;flex-direction:column;flex:1;}.trace-container.svelte-135ht03:focus-within {outline:none;}.trace-header-container.svelte-135ht03 {display:flex;margin:0 -1rem;padding:0 2rem 1rem 2rem;box-shadow:0 1rem 0.5rem -0.5rem rgba(0, 0, 0, 0.5);z-index:1;}.trace-header-content.svelte-135ht03 {display:grid;grid-template-columns:auto auto auto auto;grid-template-rows:24px 24px;align-items:center;gap:0.5rem 0.5rem;}.trace-header-content.svelte-135ht03 select {max-width:300px;}.trace-source-selector-label.svelte-135ht03,
.trace-scenario-selector-label.svelte-135ht03 {text-align:right;}.trace-scenario-selector-label.svelte-135ht03 {margin-left:0.7rem;}.trace-dat-file-chooser.svelte-135ht03 {width:auto;font-family:inherit;font-size:inherit;margin:0;}.trace-options.svelte-135ht03 {margin-top:6px;margin-left:32px;}.trace-checkbox-label.svelte-135ht03 {display:flex;align-items:center;gap:0.5rem;color:#fff;font-size:inherit;cursor:pointer;}.trace-checkbox-label.svelte-135ht03 input[type=checkbox]:where(.svelte-135ht03) {margin:0;}.trace-scroll-container.svelte-135ht03 {display:flex;flex:1 1 1px;flex-direction:column;overflow:auto;padding:2rem 1rem;align-items:flex-start;outline:none;background-color:#3c3c3c;}.trace-group.svelte-135ht03 {display:flex;flex-direction:column;}.trace-group.svelte-135ht03:not(:first-child) {margin-top:20px;}.trace-group-title.svelte-135ht03 {font-size:14px;font-weight:700;color:#fff;margin-bottom:4px;}`};function Of(e,t){oe(t,!1),de(e,Bf);const r=()=>fe(x,"$selectedSource0",C),n=()=>fe(B,"$selectedScenarioSpec0",C),s=()=>fe(re,"$selectedDatText",C),i=()=>fe(P,"$selectedSource1",C),o=()=>fe(J,"$selectedScenarioSpec1",C),u=()=>fe(Ne,"$selectedSquareData",C),c=()=>fe(K,"$scenarioSelector0",C),d=()=>fe(L,"$scenarioSelector1",C),m=()=>fe(ye,"$hideRowsWithNoDiffs",C),T=()=>fe(ve,"$statusMessage",C),$=()=>fe(Se,"$filteredGroups",C),[C,D]=Ue();let F=U(t,"viewModel",8);const g=F().sourceSelector0,q=F().sourceSelector1,x=F().sourceSelector0.selectedValue,P=F().sourceSelector1.selectedValue,K=F().scenarioSelector0,L=F().scenarioSelector1,B=F().selectedScenarioSpec0,J=F().selectedScenarioSpec1,re=F().datText,ve=F().statusMessage,ye=F().hideRowsWithNoDiffs,Se=F().filteredGroups,Ne=F().selectedSquareData;let Ke=Y(),Ar=Y(),hi=Y(void 0),gi=Y(0),Gi=Y(0);const bs=426,ua=326;function Re(mi,fa,pa){let _a=mi+2;_a+bs>window.innerWidth&&(pa!==void 0?_a=pa-bs-2:_a=mi-bs-2);const be=6;let Ca=fa+be;Ca+ua>window.innerHeight&&(Ca=fa-ua-be),E(gi,_a),E(Gi,Ca)}function ie(mi){if(mi){const fa=mi.getBoundingClientRect();Re(fa.right,fa.top,fa.left)}else E(gi,window.innerWidth/2-bs/2),E(Gi,window.innerHeight/2-ua/2)}function ke(mi){const fa=mi.detail.datasetKey,pa=mi.detail.varName,_a=mi.detail.diffPoint,be=mi.detail.eventX,Ca=mi.detail.eventY;Re(be,Ca),E(hi,F().createTooltipViewModel(fa,pa,_a))}function ue(){f$1(hi)?.clearData(),E(hi,void 0)}function G(mi){F().handleKeyDown(mi)}function X(mi,fa,pa){F().selectSquareByIndices(mi,fa,pa)}function ce(mi){const fa=document.querySelector(".trace-scroll-container");if(!fa)return;const pa=fa.getBoundingClientRect(),_a=mi.getBoundingClientRect();if(!(_a.top>=pa.top&&_a.bottom<=pa.bottom)){const be=mi.getBoundingClientRect().top-pa.top+fa.scrollTop,Ca=pa.height,ka=_a.height,xa=be-Ca/2+ka/2;fa.scrollTo({top:xa,behavior:"instant"})}}let De=Y(void 0);Ge(()=>(f$1(Ar),f$1(Ke),z(F())),()=>{if(f$1(Ar)&&f$1(Ar)[0]){const mi=f$1(Ar)[0],fa=new FileReader;fa.onload=()=>{E(Ke,fa.result),F().datText.set(f$1(Ke))},fa.readAsText(mi)}}),Ge(()=>(r(),n(),s(),i(),o(),z(F())),()=>{r()&&(n()||s())&&i()&&o()&&F().run()}),Ge(()=>(u(),z(F()),f$1(De)),()=>{if(u()){const mi=F().getSelectedSquareInfo();mi&&(E(hi,F().createTooltipViewModel(mi.datasetKey,mi.varName,mi.diffPoint)),clearTimeout(f$1(De)),E(De,void 0),setTimeout(()=>{const fa=document.querySelector(".trace-row.selected");fa&&ce(fa);let pa=document.querySelector(".trace-point.selected");pa?ie(pa):E(De,setTimeout(()=>{pa=document.querySelector(".trace-point.selected"),ie(pa)},300))},0))}}),rt(),Me();var qe=Af(),bt=b$1(qe),vr=b$1(bt),te=R(b$1(vr),2);Gr(te,{get viewModel(){return g},ariaLabel:"Source 1"});var se=R(te,2);{var $e=mi=>{var fa=Lf(),pa=R(W(fa),2);dl(pa,()=>f$1(Ar),_a=>E(Ar,_a)),M(mi,fa)},Ie=mi=>{var fa=Nf(),pa=R(W(fa),2);Gr(pa,{get viewModel(){return c()},ariaLabel:"Scenario 1"}),M(mi,fa)};N(se,mi=>{r()==="dat"?mi($e):mi(Ie,!1)})}var Ye=R(se,4);Gr(Ye,{get viewModel(){return q},ariaLabel:"Source 2"});var Je=R(Ye,4);Gr(Je,{get viewModel(){return d()},ariaLabel:"Scenario 2"});var pi=R(vr,2),Os=b$1(pi),vi=b$1(Os),Ui=R(bt,2),ca=b$1(Ui);{var va=mi=>{var fa=qf(),pa=b$1(fa);O(()=>j(pa,T())),M(mi,fa)},da=mi=>{var fa=ge(),pa=W(fa);{var _a=Ca=>{var ka=Ff();M(Ca,ka)},be=Ca=>{var ka=ge(),xa=W(ka);Ce(xa,1,$,Te,(Th,eh,Oh)=>{var uh=Kf(),ah=b$1(uh),jh=b$1(ah),Vh=R(ah,2);Ce(Vh,1,()=>(f$1(eh),_$1(()=>f$1(eh).rows)),Te,(zh,gh,Uh)=>{const mp=Er(()=>(u(),_$1(()=>u()?.groupIndex===Oh&&u()?.rowIndex===Uh?u().pointIndex:void 0)));Df(zh,{get viewModel(){return f$1(gh)},get selectedPointIndex(){return f$1(mp)},$$events:{"show-tooltip":ke,"hide-tooltip":ue,select:tp=>X(Oh,Uh,tp.detail.pointIndex)}})}),O(()=>j(jh,(f$1(eh),_$1(()=>f$1(eh).title)))),M(Th,uh)}),M(Ca,ka)};N(pa,Ca=>{$(),_$1(()=>$().length===0)?Ca(_a):Ca(be,!1)},!0)}M(mi,fa)};N(ca,mi=>{T()?mi(va):mi(da,!1)})}var ha=R(ca,2);{var ya=mi=>{Pf(mi,{get viewModel(){return f$1(hi)},get x(){return f$1(gi)},get y(){return f$1(Gi)}})};N(ha,mi=>{f$1(hi)&&mi(ya)})}jn(vi,m,mi=>ir(ye,mi)),me("keydown",qe,G),M(e,qe),le(),D()}var jf=V('<div class="loading-container svelte-1nkjba2"></div>'),Gf=V('<div class="progress-container svelte-1nkjba2"><div class="progress"> </div></div>'),Uf=V('<div class="popover-overlay svelte-1nkjba2"><div class="popover-container bundle-selector-popover-container svelte-1nkjba2"><!></div></div>'),Wf=V('<div class="popover-overlay svelte-1nkjba2"><div class="popover-container filter-popover-container svelte-1nkjba2"><!></div></div>'),Yf=V('<div class="app-container svelte-1nkjba2"><!> <!> <!> <!></div>');const Hf={hash:"svelte-1nkjba2",code:".app-container.svelte-1nkjba2 {position:relative;display:flex;flex-direction:column;flex:1;}.loading-container.svelte-1nkjba2 {display:flex;flex-direction:column;flex:1 1 auto;align-items:center;justify-content:center;}.progress-container.svelte-1nkjba2 {display:flex;height:100vh;align-items:center;justify-content:center;font-size:2em;}.popover-overlay.svelte-1nkjba2 {position:absolute;top:0;left:0;width:100%;max-width:min(100%, 100vw);bottom:0;background-color:rgba(0, 0, 0, 0.4);z-index:1000;pointer-events:none;}.popover-container.svelte-1nkjba2 {position:absolute;top:26px;width:500px;height:min(100% - 60px, 600px);background-color:var(--panel-bg);border:1px solid var(--panel-border);border-radius:12px;box-shadow:0 4px 8px rgba(0, 0, 0, 0.5);pointer-events:auto;overflow:hidden;}.bundle-selector-popover-container.svelte-1nkjba2 {left:calc(50% - 250px);width:500px;height:min(100% - 60px, 500px);}.filter-popover-container.svelte-1nkjba2 {right:24px;width:500px;height:min(100% - 60px, 600px);}"};function Xf(e,t){oe(t,!1),de(e,Hf);const r=()=>fe(T,"$zoom",i),n=()=>fe(d,"$checksInProgress",i),s=()=>fe(m,"$progress",i),[i,o]=Ue(),u=Y();let c=U(t,"viewModel",8);const d=c().checksInProgress,m=c().progress,T=c().headerViewModel.zoom;let $=Y(),C=Y(),D=Y(),F,g=Y("summary"),q=Y(void 0),x=Y(!1);const P=new Ia("Roboto Condensed",{weight:400});let K=Y(!1);P.load().then(()=>{E(K,!0)});let L=Y(!1);function B(){E($,void 0),E(g,"summary")}function J(bs){bs===f$1(q)?E(q,void 0):E(q,bs)}function re(){E(q,void 0)}function ve(bs){const ua=f$1(q),Re=new CustomEvent("sde-check-bundle",{detail:{side:ua,name:bs.local?.name||bs.remote?.name,url:bs.local?.url||bs.remote?.url}});document.dispatchEvent(Re)}function ye(){E(x,!f$1(x))}function Se(){E(x,!1)}function Ne(bs){const ua=bs.detail,Re=ua.cmd;switch(Re){case"show-summary":B();break;case"toggle-bundle-selector":J(ua.side);break;case"toggle-filters":ye();break;case"enter-tab":if(ua.itemId!=="checks"){let ie;switch(ua.itemId){case"comp-views":ie="views";break;case"comps-by-scenario":ie="by-scenario";break;case"comps-by-dataset":ie="by-dataset";break;default:return}const ke=c().createCompareDetailViewModelForFirstSummaryRow(ie);ke&&(E($,ke),E(g,"comparison-detail"))}break;case"show-comparison-detail":E($,c().createCompareDetailViewModelForSummaryRow(ua.summaryRow)),E(g,"comparison-detail");break;case"show-comparison-detail-for-previous":case"show-comparison-detail-for-next":{const ie=Re==="show-comparison-detail-for-previous"?-1:1,ke=c().createCompareDetailViewModelForSummaryRowWithDelta(ua.kind,ua.summaryRowKey,ie);ke&&(E($,ke),E(g,"comparison-detail"));break}case"show-perf":f$1(C)||E(C,c().createPerfViewModel()),E(g,"perf");break;case"show-trace-view-with-scenario":E(D,c().createTraceViewModel(ua.scenarioSpec,ua.scenarioKind)),E(g,"trace");break;default:console.error(`ERROR: Unhandled command ${Re}`);break}}function Ke(bs){if(!oi(bs)&&!(bs.altKey||bs.ctrlKey||bs.metaKey||bs.shiftKey||bs.isComposing))switch(bs.key){case"c":c().headerViewModel.controlsVisible.update(ua=>!ua),bs.preventDefault();break;case"h":B(),bs.preventDefault();break;case"t":f$1(g)!=="trace"&&(E(D,c().createTraceViewModel()),E(g,"trace"),bs.preventDefault());break}}Ge(()=>r(),()=>{E(u,`--graph-zoom: ${r()}`)}),Ge(()=>(f$1(K),z(c())),()=>{f$1(K)&&(E(L,!0),c().runTestSuite())}),rt(),Me();var Ar=ge();me("keydown",Ir,Ke);var hi=W(Ar);{var gi=bs=>{var ua=jf();M(bs,ua)},Gi=bs=>{var ua=Yf(),Re=b$1(ua);vu(Re,{get viewModel(){return z(c()),_$1(()=>c().headerViewModel)},$$events:{command:Ne}});var ie=R(Re,2);{var ke=qe=>{var bt=Gf(),vr=b$1(bt),te=b$1(vr);O(()=>j(te,s())),M(qe,bt)},ue=qe=>{var bt=ge(),vr=W(bt);{var te=$e=>{Td($e,{get viewModel(){return f$1($)},$$events:{command:Ne}})},se=$e=>{var Ie=ge(),Ye=W(Ie);{var Je=Os=>{tu(Os,{get viewModel(){return F},$$events:{command:Ne}})},pi=Os=>{var vi=ge(),Ui=W(vi);{var ca=da=>{Of(da,{get viewModel(){return f$1(D)},$$events:{command:Ne}})},va=da=>{var ha=ge(),ya=W(ha);{var mi=pa=>{ku(pa,{get viewModel(){return f$1(C)},$$events:{command:Ne}})},fa=pa=>{kf(pa,{get viewModel(){return z(c()),_$1(()=>c().summaryViewModel)},$$events:{command:Ne}})};N(ya,pa=>{f$1(g)==="perf"?pa(mi):pa(fa,!1)},!0)}M(da,ha)};N(Ui,da=>{f$1(g)==="trace"?da(ca):da(va,!1)},!0)}M(Os,vi)};N(Ye,Os=>{f$1(g)==="freeform"?Os(Je):Os(pi,!1)},!0)}M($e,Ie)};N(vr,$e=>{f$1(g)==="comparison-detail"?$e(te):$e(se,!1)},!0)}M(qe,bt)};N(ie,qe=>{n()?qe(ke):qe(ue,!1)})}var G=R(ie,2);{var X=qe=>{var bt=Uf(),vr=b$1(bt),te=b$1(vr);cc(te,{get bundleManager(){return z(c()),_$1(()=>c().bundleManager)},get side(){return f$1(q)},onClose:re,onSelect:se=>{ve(se),re()}}),Ps(bt,se=>qs?.(se)),Ct(()=>me("clickout",bt,re)),M(qe,bt)};N(G,qe=>{f$1(q)!==void 0&&qe(X)})}var ce=R(G,2);{var De=qe=>{var bt=Wf(),vr=b$1(bt),te=b$1(vr);Ud(te,{get viewModel(){return z(c()),_$1(()=>c().filterPopoverViewModel)},onClose:Se,onApplyAndRun:()=>{c().applyFilters(),Se()}}),Ps(bt,se=>qs?.(se)),Ct(()=>me("clickout",bt,Se)),M(qe,bt)};N(ce,qe=>{f$1(x)&&qe(De)})}O(()=>Ae(ua,f$1(u))),M(bs,ua)};N(hi,bs=>{f$1(L)?bs(Gi,!1):bs(gi)})}M(e,Ar),le(),o()}function Zf(e,t){let r=U(t,"appViewModel",8);var n=ge(),s=W(n);{var i=o=>{Xf(o,{get viewModel(){return r()}})};N(s,o=>{r()&&o(i)})}M(e,n)}function qi(e,t){const r=localStorage.getItem(e);let n;if(r!==null){const c=parseFloat(r);n=isNaN(c)?t:c}else n=t;let s=n;const{subscribe:i,set:o}=xe(n),u=c=>{s=c,localStorage.setItem(e,c.toString()),o(c)};return{subscribe:i,set:u,update:c=>{u(c(s))}}}function Jf(e,t){const r=localStorage.getItem(e);let n;r!==null?n=r==="1":n=t;let s=n;const{subscribe:i,set:o}=xe(n),u=c=>{s=c,localStorage.setItem(e,c?"1":"0"),o(c)};return{subscribe:i,set:u,update:c=>{u(c(s))}}}function Qf(e,t){const r=localStorage.getItem(e);let n;r!==null?n=r:n=t;let s=n;const{subscribe:i,set:o}=xe(n),u=c=>{s=c,localStorage.setItem(e,c),o(c)};return{subscribe:i,set:u,update:c=>{u(c(s))}}}class Cs{constructor(){this.itemStates=new Map,this.writableOrderedKeys=xe([]),this.orderedKeys=this.writableOrderedKeys}getPinned(t){return _r(t),this.getWritableItemState(t)}getWritableItemState(t){_r(t);let r=this.itemStates.get(t);return r===void 0&&(r=xe(!1),this.itemStates.set(t,r)),r}toggleItemPinned(t){_r(t);const r=this.getWritableItemState(t);Pe(r)?(r.set(!1),this.removePinnedItem(t)):(r.set(!0),this.addPinnedItem(t))}addPinnedItem(t){this.writableOrderedKeys.update(r=>(r.push(t),r))}removePinnedItem(t){this.writableOrderedKeys.update(r=>{const n=r.findIndex(s=>s===t);return n>=0&&r.splice(n,1),r})}moveItemToTop(t){_r(t),this.writableOrderedKeys.update(r=>{const n=r.findIndex(s=>s===t);return n>=0&&(r.splice(n,1),r.unshift(t)),r})}setItemOrder(t){t.forEach(_r),this.writableOrderedKeys.set(t)}}function _r(e){if(e.startsWith("pinned_"))throw new Error(`PinnedItemState expects regular keys but got ${e}`)}function ev(){return{pinnedDatasets:new Cs,pinnedScenarios:new Cs,pinnedFreeformRows:new Cs}}function Zn(e,t,r){const n=[];return e.outputVarL&&e.outputVarR?e.outputVarR.varName!==e.outputVarL.varName&&n.push(qt("warn",`variable renamed, previously '${e.outputVarL.varName}'`)):e.outputVarL!==void 0?n.push(qt("warn",`variable only defined in ${Ut(t,"left")}`)):e.outputVarR!==void 0&&n.push(qt("warn",`variable only defined in ${Ut(r,"right")}`)),n}function Jn(e,t,r){const n=[];if(e.settings.kind==="all-inputs-settings")return[];const s=[],i=[],o=[];for(const d of e.settings.inputs){const m=d.stateL.error?.kind,T=d.stateR.error?.kind,$=m==="unknown-input-setting-group",C=T==="unknown-input-setting-group",D=m==="unknown-input",F=T==="unknown-input",g=m==="invalid-value",q=T==="invalid-value";if($||C){const x={requestedName:d.requestedName,kind:"unknown-input-setting-group"};$&&C?s.push(x):$?i.push(x):C&&o.push(x)}if(D||F){const x={requestedName:d.requestedName,kind:"unknown-input"};D&&F?s.push(x):D?i.push(x):F&&o.push(x)}if(g||q){const x={requestedName:d.requestedName,kind:"invalid-value"};g&&q?s.push(x):g?i.push(x):q&&o.push(x)}}function u(d,m){const T=d.filter($=>$.kind===m).map($=>`'${$.requestedName}'`);if(T.length!==0)return m==="unknown-input"?`unknown ${T.length===1?"input":"inputs"} ${T.join(", ")}`:m==="unknown-input-setting-group"?`unknown input setting group ${T[0]}`:`value out of range for ${T.join(", ")}`}function c(d){return[u(d,"unknown-input-setting-group"),u(d,"unknown-input"),u(d,"invalid-value")].filter(m=>m!==void 0).join("; ")}if(s.length>0&&n.push(qt("err",`invalid scenario: ${c(s)}`)),i.length>0){const d=`scenario not valid in ${Ut(t,"left")}`;n.push(qt("warn",`${d}: ${c(i)}`))}if(o.length>0){const d=`scenario not valid in ${Ut(r,"right")}`;n.push(qt("warn",`${d}: ${c(o)}`))}return e.settings.settingsDiffer===!0&&n.push(qt("warn","input settings differ between the two models")),n}function qt(e,t){return`<span class="annotation"><span class="${`status-color-${e==="err"?"failed":"warning"}`}">${e==="err"?"":""}</span>&ensp;${t}</span>`}function tv(e,t,r,n){const s=new Map;for(const i of t){const o=e.scenarios.getScenario(i.s);if(o===void 0)continue;let u,c;switch(r){case"dataset":{const $=e.datasets.getDataset(i.d);if($===void 0)continue;const C=$.outputVarR||$.outputVarL;u=C.varName,c=C.sourceName;break}case"scenario":{u=o.title,c=o.subtitle;break}default:assertNeverExports$2.assertNever(r)}let d=s.get(u);d===void 0&&(d={title:u,score:0,items:[]},s.set(u,d));const m={title:u,subtitle:c,scenario:o,testSummary:i};d.items.push(m);const T=Qn(m.testSummary,n);d.score+=T||0}return[...s.values()].sort((i,o)=>i.score>o.score?-1:i.score<o.score?1:0)}function Qn(e,t){switch(t){case"max-diff":return e.md;case"avg-diff":return e.ad;case"max-diff-relative":return e.mdb;case"avg-diff-relative":return e.adb;default:assertNeverExports$2.assertNever(t)}}function ea(e,t,r,n,s){const i="max-diff",o=(D,F)=>new Un(e,t,F,r,D),u=e.bundleL.modelSpec.graphSpecs?.find(D=>D.id===n),c=e.bundleR.modelSpec.graphSpecs?.find(D=>D.id===n),d=o(u,"left"),m=o(c,"right"),T=new Set;if(u)for(const D of u.datasets)T.add(D.datasetKey);if(c)for(const D of c.datasets)T.add(D.datasetKey);const $=[];let C=0;if(s.inclusion==="both")for(const D of T){const F=u?.datasets?.find(Se=>Se.datasetKey===D),g=c?.datasets?.find(Se=>Se.datasetKey===D),q=F?.varName,x=g?.varName,P=F?.color||"#777",K=g?.color||"#777",L=F?.label,B=g?.label,J=s.datasetReports.find(Se=>Se.datasetKey===D);let re=0;if(J){if(J.maxDiff===void 0||J.maxDiff===0)continue;re=J.maxDiff,re>C&&(C=re)}const ve=`bucket-color-${ci(re,e.thresholds)}`,ye=new Yn(e,t,void 0,i,"freeform","","",r,D,void 0);$.push({datasetKey:D,nameL:q,nameR:x,legendColorL:P,legendColorR:K,legendLabelL:L,legendLabelR:B,bucketClass:ve,maxDiff:re,detailBoxViewModel:ye,detailBoxVisible:xe(!1)})}return{graphId:n,graphL:d,graphR:m,metadataRows:s.metadataReports,datasetRows:$,maxDiffPct:C}}function rv(e,t,r){return{kind:"freeform-view",summaryRowKey:e,pretitle:t?.title,title:"Unresolved view",annotations:void 0,relatedListHeader:"",relatedItems:[],graphSections:[],regularDetailRows:xe([]),pinnedDetailRows:xe([]),pinnedItemState:void 0}}function sv(e,t,r,n,s,i,o,u){const c=Pe(s.sortMode),d=[];for(const $ of o.rows||[]){const C=[];for(const F of $.boxes){const g={title:F.title,subtitle:F.subtitle,scenario:F.scenario,testSummary:{d:F.dataset.key,s:F.scenario.key,md:0}};C.push(g)}const D=Dr(t,r,n,s,c,"freeform",$.title,$.subtitle,C);d.push(D)}const m=_e(u.orderedKeys,$=>{const C=[];for(const D of $)if(D.startsWith("row")){const F=d.find(g=>g.pinnedItemKey===D);F&&C.push(di(t,r,n,s,c,F))}return C}),T=xe(d);return{kind:"freeform-view",summaryRowKey:e,pretitle:i?.title,title:o.title,subtitle:o.subtitle,annotations:void 0,relatedListHeader:"",relatedItems:[],graphSections:[],regularDetailRows:T,pinnedDetailRows:m,pinnedItemState:u}}function iv(e,t,r,n,s,i,o){const u=t.bundleL.name,c=t.bundleR.name,d=i.root,m=d.outputVarR||d.outputVarL,T=m.varName,$=m.sourceName,C=Zn(d,u,c).join(" "),D=[];function F(K){const L=K.join('&nbsp;<span class="related-sep">&gt;</span>&nbsp;');D.push(L)}if(m.relatedItems)for(const K of m.relatedItems)F(K.locationPath);function g(K,L){for(const B of L)for(const J of B.items)if(J.scenario.key===K)return[B.title,J]}const q=_e(s.sortMode,K=>{let L=tv(t,i.group.testSummaries,"scenario",K);if(t.reportOptions?.detailRowsForDataset)L=t.reportOptions.detailRowsForDataset(L);else{let B;const J=L.findIndex(re=>re.title==="All inputs");if(J>=0){const re=L.splice(J,1)[0];B=re.items.find(ve=>{const ye=ve.scenario.settings;return ye.kind==="all-inputs-settings"&&ye.position==="at-default"}),L.unshift(re)}B&&(B.title="at default",B.subtitle=void 0);for(const re of L.slice(1)){for(const ve of re.items)ve.title=`${ve.subtitle}`,ve.subtitle=void 0;re.items[0]!==B&&re.items.unshift(B)}}return L}),x=_e(q,K=>{const L=Pe(s.sortMode),B=[];for(const J of K){const re=Dr(t,r,n,s,L,"scenarios",J.title,J.subtitle,J.items);B.push(re)}return B}),P=_e([q,x,o.orderedKeys],([K,L,B])=>{const J=Pe(s.sortMode),re=[];for(const ve of B)if(ve.startsWith("row")){const ye=L.find(Se=>Se.pinnedItemKey===ve);ye&&re.push(di(t,r,n,s,J,ye))}else{const ye=g(ve,K);if(ye){const Se=ye[0],Ne=ye[1];re.push(Dr(t,r,n,s,J,"scenarios",Se,void 0,[Ne]))}}return re});return{kind:"dataset",summaryRowKey:e,title:T,subtitle:$,annotations:C,relatedListHeader:"Appears in:",relatedItems:D,graphSections:[],regularDetailRows:x,pinnedDetailRows:P,pinnedItemState:o}}function nv(e,t,r,n,s,i,o,u,c){const d=t.bundleL.name,m=t.bundleR.name,T=i.root,$=Jn(T,d,m).join(" ");let C,D,F,g;u?(C="scenario-view",D=o?.title,F=u.title,g=u.subtitle):(C="scenario",F=T.title,g=T.subtitle);const q=[];function x(B){const J=B.join('&nbsp;<span class="related-sep">&gt;</span>&nbsp;');q.push(J)}if(T.settings.kind==="input-settings")for(const B of T.settings.inputs){const J=B.stateR.inputVar;J?.relatedItem&&x(J.relatedItem.locationPath)}const P=_e(s.sortMode,B=>{const J=i.group.testSummaries;let re=[];for(const Se of J){const Ne=t.scenarios.getScenario(Se.s);if(Ne===void 0)continue;const Ke=t.datasets.getDataset(Se.d);if(Ke===void 0)continue;const Ar=Ke.outputVarR||Ke.outputVarL,hi={title:Ar.varName,subtitle:Ar.sourceName,scenario:Ne,testSummary:Se};re.push({title:"",score:Qn(Se,B)||0,items:[hi]})}re=re.sort((Se,Ne)=>{const Ke=Se.items[0],Ar=Ne.items[0],hi=Se.score,gi=Ne.score;if(hi!==gi)return hi>gi?-1:1;{const Gi=Ke.title.toLowerCase(),bs=Ar.title.toLowerCase();return Gi.localeCompare(bs)}}),t.reportOptions?.detailRowsForScenario&&(re=t.reportOptions.detailRowsForScenario(re));const ve=Pe(s.sortMode),ye=[];for(const Se of re){const Ne=Dr(t,r,n,s,ve,"datasets",Se.title,Se.subtitle,Se.items);ye.push(Ne)}return ye}),K=_e([P,c.orderedKeys],([B,J])=>{const re=Pe(s.sortMode),ve=Se=>B.find(Ne=>Ne.items[0].testSummary.d===Se),ye=[];for(const Se of J){const Ne=ve(Se);Ne&&ye.push(di(t,r,n,s,re,Ne))}return ye});let L;if(u){const B=i.group.testSummaries;L=av(t,r,u,B)}else L=[];return{kind:C,summaryRowKey:e,pretitle:D,title:F,subtitle:g,annotations:$,relatedListHeader:"Related items:",relatedItems:q,graphSections:L,regularDetailRows:P,pinnedDetailRows:K,pinnedItemState:c}}function av(e,t,r,n){if(r.rows!==void 0)throw new Error("Graphs section is not yet supported in a freeform view");if(r.graphIds.length===0)return[];if(r.graphOrder==="grouped-by-diffs")return ta(e,t,r.scenario,n,r.graphIds).sections;{const s=e.bundleL.modelSpec.graphSpecs,i=e.bundleR.modelSpec.graphSpecs,o=r.scenario,u=[];for(const c of r.graphIds){const d=s?.find($=>$.id===c),m=i?.find($=>$.id===c),T=diffGraphs(d,m,o.key,n);u.push(ea(e,t,o,c,T))}return[{title:"Featured graphs",rows:u}]}}function ta(e,t,r,n,s){const i=[],o=[],u=[],c=[],d=[],m=[],T=e.bundleL.modelSpec.graphSpecs,$=e.bundleR.modelSpec.graphSpecs,C=Array(e.thresholds.length+3).fill(0);for(const P of s){const K=T?.find(ye=>ye.id===P),L=$?.find(ye=>ye.id===P),B=diffGraphs(K,L,r.key,n),J=ov(B),re=ea(e,t,r,P,B);let ve;switch(B.inclusion){case"right-only":ve=1,i.push(re);break;case"left-only":ve=1,o.push(re);break;case"both":J>0?(ve=ci(J,e.thresholds),B.metadataReports.length>0?u.push(re):d.push(re)):B.metadataReports.length>0?(ve=1,c.push(re)):(ve=0,m.push(re));break;case"neither":ve=0,m.push(re);break;default:Tr(B.inclusion)}C[ve]++}const D=s.length,F=D-C[0],g=C.map(P=>P/D*100),q=[];function x(P,K,L){if(P.length>0){const B=L?P.sort((J,re)=>J.maxDiffPct>re.maxDiffPct?-1:1):P;q.push({title:K,rows:B})}}return x(i,"Added graphs",!1),x(o,"Removed graphs",!1),x(u,"Graphs with metadata and dataset changes",!0),x(c,"Graphs with metadata changes only",!1),x(d,"Graphs with dataset changes only",!0),x(m,"Unchanged graphs",!1),{sections:q,nonZeroDiffCount:F,diffPercentByBucket:g}}function ov(e){let t=0;for(const r of e.datasetReports)r.maxDiff!==void 0&&r.maxDiff>t&&(t=r.maxDiff);return t}function di(e,t,r,n,s,i){return Dr(e,t,r,n,s,i.kind,i.title,i.subtitle,i.items)}class lv{constructor(t,r,n){this.items=t,this.onTreeChanged=n,this.itemStates={},this.expandStates={};const s=i=>{for(const o of i)if(o.children)s(o.children),this.expandStates[o.key]=!0;else{const u=r[o.key];this.itemStates[o.key]=u!==void 0?u:!0}};s(this.items)}getItemTree(){return{items:this.items,states:this.itemStates}}getCheckboxState(t,r){if(!t.children)return this.itemStates[t.key]===!0?"checked":"unchecked";const n=t.children.map(o=>this.getCheckboxState(o,r)),s=n.filter(o=>o==="checked").length,i=n.filter(o=>o==="unchecked").length;return s===n.length?"checked":i===n.length?"unchecked":"indeterminate"}toggleChecked(t){const r=this.getCheckboxState(t,0)!=="checked";if(t.children){const n=s=>{for(const i of s)i.children?n(i.children):this.itemStates[i.key]=r};n(t.children)}else this.itemStates[t.key]=r;this.onTreeChanged?.({items:this.items,states:this.itemStates})}isExpanded(t,r){return this.expandStates[t.key]??!1}toggleExpanded(t,r=!1){r?this.toggleExpandedIncludingSiblings(t):t.children&&(this.expandStates[t.key]=!this.expandStates[t.key])}toggleExpandedIncludingSiblings(t){const r=this.findParent(t);let n;if(!r)n=this.items;else if(r.children)n=r.children;else return;const s=!this.isExpanded(t,0);for(const i of n)i.children&&(this.expandStates[i.key]=s)}findParent(t){const r=(n,s=null)=>{for(const i of n){if(i===t)return s;if(i.children){const o=r(i.children,i);if(o!==null)return o}}return null};return r(this.items)}}function ss(e,t,r){return new lv(e,t,r)}function is(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):{items:[],states:{}}}catch(t){return console.warn(`Failed to load filter item tree from LocalStorage (${e}):`,t),{items:[],states:{}}}}function fr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn(`Failed to save filter item tree to LocalStorage (${e}):`,r)}}const Rr="sde-check-test-filters",Cr="sde-check-comparison-scenario-filters";function cv(e){if(!e)return{filterPopoverViewModel:void 0,skipChecks:[],skipComparisonScenarios:[]};const t=is(Rr),r=t.states||{},n=[],s=T=>{for(const $ of T)$.children?s($.children):r[$.key]===!1&&$.titleParts&&n.push({groupName:$.titleParts.groupName||"",testName:$.titleParts.testName||""})};s(t.items||[]);const i=is(Cr),o=i.states||{},u=[],c=T=>{for(const $ of T)$.children?c($.children):o[$.key]===!1&&$.titleParts&&u.push({title:$.titleParts.title||"",subtitle:$.titleParts.subtitle})};c(i.items||[]);let d;Object.keys(r).length>0&&(d=ss(t.items||[],r,T=>fr(Rr,T)));let m;return Object.keys(o).length>0&&(m=ss(i.items||[],o,T=>fr(Cr,T))),{filterPopoverViewModel:{checksPanel:d,comparisonScenariosPanel:m},skipChecks:n,skipComparisonScenarios:u}}function dv(e,t,r){const n=uv(t);let s;return r&&(s=fv(e,r)),{checksPanel:n,comparisonScenariosPanel:s}}function uv(e){const t=is(Rr).states||{},r=[],n={};for(const i of e.groups){const o=[];for(const u of i.tests){const c=`${i.name}__${u.name}`;o.push({key:c,titleParts:{groupName:i.name,testName:u.name},label:u.name}),t[c]!==void 0?n[c]=t[c]:n[c]=u.status!=="skipped"}o.length>0&&r.push({key:i.name,label:i.name,children:o})}if(r.length===0)return;const s=ss([{key:"__all_checks",label:"All checks",children:r}],n,i=>fr(Rr,i));return fr(Rr,s.getItemTree()),s}function fv(e,t){const r=is(Cr).states||{};function n(m,T){return T?`${m}__${T}`:m}function s(m){return{key:n(m.title,m.subtitle),titleParts:{title:m.title,subtitle:m.subtitle},label:m.subtitle?`${m.title} ${m.subtitle}`:m.title}}const i=new Map,o=e.comparison?.scenarios;for(const m of t.testReports){const T=o?.getScenario(m.scenarioKey);if(T){const $=n(T.title,T.subtitle);i.has($)||i.set($,{title:T.title,subtitle:T.subtitle,skipped:m.diffReport===void 0})}}const u={};let c=[];if(e.comparison?.reportOptions?.summarySectionsForComparisonsByScenario){const m=comparisonSummaryFromReport(t),T=categorizeComparisonTestSummaries(e.comparison,m.testSummaries,"max-diff").byScenario,$=e.comparison.reportOptions.summarySectionsForComparisonsByScenario(T),C=new Set,D=[],F=[];for(const g of $)if(g.stable===!0){const q=[];for(const x of g.rows)if(x.groupSummary?.root.kind==="scenario"){const P=x.groupSummary.root,K=n(P.title,P.subtitle);if(!C.has(K)){q.push(s(P));const L=i.get(K);r[K]!==void 0?u[K]=r[K]:u[K]=L?!L.skipped:!0,C.add(K)}}q.length>0&&D.push({key:g.headerText,label:g.headerText,children:q})}for(const[g,q]of i)C.has(g)||(F.push(s(q)),r[g]!==void 0?u[g]=r[g]:u[g]=!q.skipped,C.add(g));c=[{key:"__all_scenarios",label:"All scenarios",children:[...D,...F.length>0?[{key:"Other scenarios",label:"Other scenarios",children:F}]:[]]}]}else{const m=Array.from(o.getAllScenarios()),T=[];for(const $ of m){T.push(s($));const C=n($.title,$.subtitle);if(r[C]!==void 0)u[C]=r[C];else{const D=i.get(C),F=D?D.skipped:!0;u[C]=!F}}c=[{key:"__all_scenarios",label:"All scenarios",children:T}]}const d=ss(c,u,m=>fr(Cr,m));return fr(Cr,d.getItemTree()),d}function vv(e,t,r,n,s,i,o,u){const c=xe(!1);if(t){const d=_e(o,m=>{const T=[];if(m==="max-diff-relative"||m==="avg-diff-relative"){const $=t.ratioThresholds;T.push("no diff");for(let C=0;C<3;C++)T.push(`ratio &lt; ${$[C]}`);T.push(`ratio &gt;= ${$[2]}`)}else{const $=t.thresholds;T.push("no diff");for(let C=0;C<3;C++)T.push(`diff &lt; ${$[C]}%`);T.push(`diff &gt;= ${$[2]}%`)}return T});return{devMode:e,bundleManager:r,nameL:t.bundleL.name,nameR:t.bundleR.name,thresholds:d,generatedDateString:n,controlsVisible:c,zoom:s,consistentYRange:i,sortMode:o,concurrency:u}}else return{devMode:e,bundleManager:void 0,generatedDateString:n,controlsVisible:c,zoom:s,consistentYRange:i,sortMode:o,concurrency:u}}function Ks(e,t,r,n){const s=r-t;function i(o){return s!==0?(o-t)/(r-t)*100:0}return{values:e,avg:n,points:e.map(o=>i(o)),avgPoint:i(n)}}class pv{constructor(){this.minTime=Number.MAX_VALUE,this.maxTime=0,this.writableRows=xe([]),this.rows=this.writableRows}addRow(t,r){const n=Math.min(t.minTime,r.minTime),s=Math.max(t.maxTime,r.maxTime),i=Math.min(this.minTime,n),o=Math.max(this.maxTime,s);this.minTime=i,this.maxTime=o;function u(m){return Ks(m.values,i,o,m.avg)}const c=Pe(this.writableRows);for(const m of c)m.dotPlotL=u(m.dotPlotL),m.dotPlotR=u(m.dotPlotR);function d(m){return Ks(m.allTimes,i,o,m.avgTime)}c.push({num:c.length+1,minTimeL:t.minTime.toFixed(1),avgTimeL:t.avgTime.toFixed(1),maxTimeL:t.maxTime.toFixed(1),minTimeR:r.minTime.toFixed(1),avgTimeR:r.avgTime.toFixed(1),maxTimeR:r.maxTime.toFixed(1),dotPlotL:d(t),dotPlotR:d(r)}),this.writableRows.set(c)}}function hv(){return new pv}let mv=1;class gv{constructor(t,r,n,s){this.dataCoordinator=t,this.scenario=r,this.datasetKey=n,this.predicateReport=s,this.requestKeys=[],this.expectedDataKeys=[],this.resolvedDataKeys=[],this.opConstantRefs=new Map,this.resolvedData=new Map,this.dataRequested=!1,this.dataLoaded=!1,this.baseRequestKey=`check-graph-box::${mv++}`,this.writableContent=xe(void 0),this.content=this.writableContent}requestData(){if(this.dataRequested)return;this.dataRequested=!0,this.expectedDataKeys=[],this.resolvedDataKeys=[],this.requestKeys=[],this.resolvedData.clear(),this.expectedDataKeys.push("primary"),this.requestDataset("primary",this.scenario.spec,this.datasetKey);const t=r=>{const n=this.predicateReport.opRefs.get(r);if(n!==void 0)switch(this.expectedDataKeys.push(r),n.kind){case"constant":this.resolvedDataKeys.push(r),this.opConstantRefs.set(r,n.value);break;case"data":{const s=n.dataRef.scenario.spec,i=n.dataRef.dataset.datasetKey;this.requestDataset(r,s,i);break}default:assertNeverExports$2.assertNever(n)}};t("gt"),t("gte"),t("lt"),t("lte"),t("eq"),t("approx")}clearData(){if(this.dataRequested){if(this.writableContent.set(void 0),!this.dataLoaded){for(const t of this.requestKeys)this.dataCoordinator.cancelRequest(t);this.requestKeys=[],this.resolvedData.clear()}this.dataRequested=!1,this.dataLoaded=!1}}requestDataset(t,r,n){const s=`${this.baseRequestKey}::${t}`;this.requestKeys.push(s),this.dataCoordinator.requestDataset(s,r,n,i=>{this.dataRequested&&(this.resolvedDataKeys.push(t),this.resolvedData.set(t,lr(i)),this.processResponses())})}processResponses(){if(this.resolvedDataKeys.length!==this.expectedDataKeys.length)return;const t=this.resolvedData.get("primary"),r=t.reduce((F,g)=>g.x<F?g.x:F,t[0].x),n=t.reduce((F,g)=>g.x>F?g.x:F,t[0].x),s=this.predicateReport.time;let i,o,u;if(s===void 0)i=r,o=n,u=F=>F>=r&&F<=n;else if(typeof s=="number")i=s,o=s,u=F=>F===r;else if(Array.isArray(s))i=s[0],o=s[1],u=F=>F>=r&&F<=n;else{const F=s,g=[];F.after_excl!==void 0&&(g.push(q=>q>F.after_excl),i=F.after_excl),F.after_incl!==void 0&&(g.push(q=>q>=F.after_incl),i=F.after_incl),F.before_excl!==void 0&&(g.push(q=>q<s.before_excl),o=F.before_excl),F.before_incl!==void 0&&(g.push(q=>q<=s.before_incl),o=F.before_incl),i===void 0&&(i=r),o===void 0&&(o=n),u=q=>{for(const x of g)if(!x(q))return!1;return!0}}const c=[];c.push({points:t,color:"deepskyblue",style:"normal"});const d=(F,g,q=0,x)=>{const P="green";x===void 0&&(x=1);const K=this.opConstantRefs.get(F);if(K!==void 0){i===o?c.push({points:[{x:i,y:K+q}],color:P,style:g,lineWidth:x}):c.push({points:[{x:i,y:K+q},{x:o,y:K+q}],color:P,style:g,lineWidth:x});return}const L=this.resolvedData.get(F);if(L!==void 0){let B=L.filter(J=>u(J.x));q!==0&&(B=B.map(J=>({x:J.x,y:J.y+q}))),c.push({points:B,color:P,style:g,lineWidth:x})}},m=F=>this.opConstantRefs.has(F)||this.resolvedData.has(F),T=m("gt")||m("gte"),$=m("lt")||m("lte");d("gt",$?"fill-to-next":"fill-above"),d("gte",$?"fill-to-next":"fill-above"),d("lt",T?"normal":"fill-below"),d("lte",T?"normal":"fill-below"),d("eq","normal",0,5);const C=this.predicateReport.tolerance||.1;d("approx","fill-to-next",-C),d("approx","normal",C),d("approx","dashed",0);const D={key:this.baseRequestKey,plots:c,xMin:void 0,xMax:void 0};this.writableContent.set({comparisonGraphViewModel:D}),this.dataLoaded=!0}}function bv(e){switch(e){case"passed":return"";case"failed":return"";case"error":return"";case"skipped":return"";default:return""}}function Kr(e,t,r,n,s,i,o){const u="&ensp;".repeat(2+e*4),c=bv(r),d=`<span class="status-color-${r}">${c}</span>`,m=`${u}${d}&ensp;${n}`;return{rowClasses:`${t} ${r}`,status:r,span:m,childRows:xe([]),expanded:xe(s),graphBoxViewModel:o,onClicked:i}}function ui(e){return`<span class="bold">${e}</span>`}function ra(e,t,r,n,s){const i=r===1?`${r} ${n}`:`${r} ${n}s`;return Kr(e,"placeholder",t,i,!1,s)}function wv(e,t,r,n){const s=[];for(const i of t.predicates){let o;r.spec&&t.checkDataset.datasetKey&&(o=new gv(n,r,t.checkDataset.datasetKey,i));const u=Kr(3,"predicate",i.result.status,predicateMessage(i,ui),!1,()=>{u.expanded.update(c=>!c)},o);s.push(u)}e.childRows.update(()=>s)}function sa(e,t,r){const n=Kr(2,"dataset",e.status,datasetMessage(e,ui),!0,()=>{n.expanded.update(s=>!s)});return wv(n,e,t,r),n}function _v(e,t,r,n){const s=t.datasets.filter(o=>o.status===r),i=[];for(const o of s)i.push(sa(o,t.checkScenario,n));e.childRows.update(o=>{const u=o.findIndex(c=>c.rowClasses.includes("placeholder")&&c.status===r);if(u!==-1){const c=[...o];return c.splice(u,1,...i),c}else return o})}function xv(e,t,r){if(t.datasets.length<=10){const n=[];for(const i of t.datasets)n.push(sa(i,t.checkScenario,r));const s={error:0,failed:1,passed:2,skipped:3};n.sort((i,o)=>s[i.status]-s[o.status]),e.childRows.update(()=>n)}else{let n=function(o,u,c){i.push(ra(2,o,u,c,()=>{_v(e,t,o,r)}))};const s={passed:0,failed:0,error:0,skipped:0};for(const o of t.datasets)s[o.status]++;const i=[];s.error>0&&n("error",s.error,"errored dataset"),s.failed>0&&n("failed",s.failed,"failed dataset"),s.passed>0&&n("passed",s.passed,"passed dataset"),s.skipped>0&&n("skipped",s.skipped,"skipped dataset"),e.childRows.update(()=>i)}}function ia(e,t){let r=!1;const n=Kr(1,"scenario",e.status,scenarioMessage(e,ui),!1,()=>{r||(xv(n,e,t),r=!0),n.expanded.update(s=>!s)});return n.scenarioReport=e,n}function yv(e,t,r,n){const s=t.scenarios.filter(o=>o.status===r),i=[];for(const o of s)i.push(ia(o,n));e.childRows.update(o=>{const u=o.findIndex(c=>c.rowClasses.includes("placeholder")&&c.status===r);if(u!==-1){const c=[...o];return c.splice(u,1,...i),c}else return o})}function kv(e,t,r){if(t.scenarios.length<=10){const n=[];for(const i of t.scenarios)n.push(ia(i,r));const s={error:0,failed:1,passed:2,skipped:3};n.sort((i,o)=>s[i.status]-s[o.status]),e.childRows.update(()=>n)}else{let n=function(o,u,c){i.push(ra(1,o,u,c,()=>{yv(e,t,o,r)}))};const s={passed:0,failed:0,error:0,skipped:0};for(const o of t.scenarios)s[o.status]++;const i=[];s.error>0&&n("error",s.error,"errored scenario"),s.failed>0&&n("failed",s.failed,"failed scenario"),s.passed>0&&n("passed",s.passed,"passed scenario"),s.skipped>0&&n("skipped",s.passed,"skipped scenario"),e.childRows.update(()=>i)}}function Sv(e,t){let r=!1;const n=Kr(0,"test",t.status,t.name,!1,()=>{r||(kv(n,t,e),r=!0),n.expanded.update(s=>!s)});return n}function Mv(e,t){return{name:t.name,tests:t.tests.map(r=>Sv(e,r))}}function Rv(e,t){let r=0,n=0,s=0,i=0;for(const c of t.groups)for(const d of c.tests){if(d.scenarios.length===0){i++;continue}for(const m of d.scenarios){if(m.datasets.length===0){s++;continue}for(const T of m.datasets){if(T.predicates.length===0){s++;continue}for(const $ of T.predicates)switch($.result.status){case"passed":r++;break;case"failed":n++;break;case"error":s++;break;case"skipped":i++;break}}}}const o=r+n+s+i;let u;return o>0&&(u=[r/o*100,n/o*100,s/o*100,i/o*100]),{total:o,passed:r,failed:n,errors:s,skipped:i,percents:u,groups:t.groups.map(c=>Mv(e,c))}}class Cv{constructor(t,r){this.sections=t,this.rowsWithDiffs=r,this.kind="views",this.allRows=_e(t,n=>{const s=[];for(const i of n)s.push(...i.rows);return s}),this.allRows.subscribe(n=>{this.allRowsSnapshot=n})}getAllRowsSnapshot(){return this.allRowsSnapshot}}class na{constructor(t,r,n,s){this.itemKind=t,this.sections=r,this.rowsWithDiffs=n,this.pinnedItemState=s,this.readonlykind="by-item";const i=_e(r,o=>{const u=[];for(const c of o)u.push(...c.rows);return u});this.pinnedRows=_e([i,s.orderedKeys],([o,u])=>{const c=[];for(const d of u){if(d.startsWith("row"))continue;const m=o.find(T=>T.itemKey===d);if(m===void 0)throw new Error(`No regular row found for key=${d}`);c.push({...m,rowKey:`pinned_${m.itemKey}`})}return c}),_e([this.pinnedRows,i],([o,u])=>[...o,...u]).subscribe(o=>{this.allRowsSnapshot=o})}getAllRowsSnapshot(){return this.allRowsSnapshot}toggleItemPinned(t){this.pinnedItemState.toggleItemPinned(t.itemKey)}setReorderedPinnedItems(t){this.pinnedItemState.setItemOrder(t.map(r=>r.itemKey))}}function Iv(e,t,r,n,s=[]){function i(D,F){return s.some(g=>g.title===D&&g.subtitle===F)}function o(D){let F=0;for(const g of D.allGroupSummaries.values())g.root.kind==="scenario"&&i(g.root.title,g.root.subtitle)&&F++;return F}const u=_e(n,D=>categorizeComparisonTestSummaries(e,r,D));let c;e.viewGroups.length>0&&(c=zv(e,u));const d=_e(u,D=>D.byScenario),m=Vv(e,d,t),T=_e(u,D=>D.byDataset),$=Ev(e,T,t),C=_e(d,D=>o(D));return{views:c,byScenario:m,byDataset:$,skippedScenarioCount:C}}function $v(e,t,r,n){const s=t.scenario;let i,o;if(t.graphOrder==="grouped-by-diffs"){const c=n.group.testSummaries,d=ta(e,void 0,s,c,t.graphIds);i=d.diffPercentByBucket,o=d.nonZeroDiffCount}else i=n.scores?.diffPercentByBucket;const u=fi();return{kind:"views",rowKey:gs(u),itemKey:u,title:t.title,subtitle:t.subtitle,diffPercentByBucket:i,groupSummary:n,viewMetadata:{viewGroup:r,view:t,changedGraphCount:o}}}function Dv(e,t,r,n){const s=[];for(const u of t.rows)for(const c of u.boxes){const d=n.find(m=>m.d===c.dataset.key&&m.s===c.scenario.key);d&&s.push(d)}const i=getScoresForTestSummaries(s,e.thresholds,"max-diff").diffPercentByBucket,o=fi();return{kind:"views",rowKey:gs(o),itemKey:o,title:t.title,subtitle:t.subtitle,diffPercentByBucket:i,viewMetadata:{viewGroup:r,view:t}}}function Tv(e,t,r){let n,s,i,o;const u=e.groupSummary,c=u.root;switch(c.kind){case"dataset":{n="by-dataset";const T=c.outputVarR||c.outputVarL;s=e.title||T.varName,i=e.subtitle||T.sourceName,o=Zn(c,t,r).join(" ");break}case"scenario":n="by-scenario",s=e.title||c.title,i=e.subtitle||c.subtitle,o=Jn(c,t,r).join(" ");break;default:assertNeverExports$2.assertNever(c)}const d=u.group.key,m=gs(d);return{kind:n,rowKey:m,itemKey:d,title:s,subtitle:i,annotations:o,diffPercentByBucket:u.scores?.diffPercentByBucket,groupSummary:u}}function aa(e,t,r,n,s,i){if(t.length===0)return;const o=t.map(d=>Tv(d,r,n)),u=o.filter(d=>Wn(d.diffPercentByBucket)).length;let c;switch(i){case"collapsed":c=!1;break;case"expanded":c=!0;break;case"expanded-if-diffs":default:c=u>0;break}return{header:{kind:e,rowKey:la(),title:s,header:!0},rows:o,rowsWithDiffs:u,expanded:xe(c)}}function oa(e){return _e(e,t=>{const r=t.withoutDiffs?.length||0;return t.allGroupSummaries.size-r})}function zv(e,t){const r=_e(t,i=>{const o=i.byScenario,u=i.allTestSummaries;let c=0;const d=[];for(const m of e.viewGroups){const T={kind:"views",rowKey:la(),title:m.title,header:!0},$=m.views.map(C=>{switch(C.kind){case"view":{let D;if(C.scenario){const F=o.allGroupSummaries.get(C.scenario.key);D=$v(e,C,m,F)}else D=Dv(e,C,m,u);return Wn(D.diffPercentByBucket)&&c++,D}case"unresolved-view":{c++;const D=fi();return{kind:"views",rowKey:gs(D),itemKey:D,title:"Unresolved view",viewMetadata:{viewGroup:m,view:C}}}default:assertNeverExports$2.assertNever(C)}});d.push({header:T,rows:$,rowsWithDiffs:0,expanded:xe(!0)})}return{viewRowsWithDiffs:c,viewGroupSections:d}}),n=_e(r,i=>i.viewGroupSections),s=_e(r,i=>i.viewRowsWithDiffs);return new Cv(n,s)}function Vv(e,t,r){const n=e.bundleL.name,s=e.bundleR.name,i=Ut(n,"left"),o=Ut(s,"right");function u(m,T,$,C){const D=aa("by-scenario",T,n,s,$,C);D&&m.push(D)}function c(m,T,$){const C=T.map(D=>({groupSummary:D}));u(m,C,$,"expanded-if-diffs")}const d=_e(t,m=>{const T=[];if(e.reportOptions?.summarySectionsForComparisonsByScenario){const $=e.reportOptions.summarySectionsForComparisonsByScenario(m);for(const C of $)u(T,C.rows,C.headerText,C.initialState)}else c(T,m.withErrors,"Scenarios with errors"),c(T,m.onlyInLeft,`Scenarios only valid in ${i}`),c(T,m.onlyInRight,`Scenarios only valid in ${o}`),c(T,m.withDiffs,"Scenarios producing differences"),c(T,m.withoutDiffs,"No differences produced by the following scenarios");return T});return new na("scenario",d,oa(t),r.pinnedScenarios)}function Ev(e,t,r){const n=e.bundleL.name,s=e.bundleR.name;function i(c,d,m,T){const $=aa("by-dataset",d,n,s,m,T);$&&c.push($)}function o(c,d,m){const T=d.map($=>({groupSummary:$}));i(c,T,m,"expanded-if-diffs")}const u=_e(t,c=>{const d=[];if(e.reportOptions?.summarySectionsForComparisonsByDataset){const m=e.reportOptions.summarySectionsForComparisonsByDataset(c);for(const T of m)i(d,T.rows,T.headerText,T.initialState)}else o(d,c.withErrors,"Datasets with errors"),o(d,c.onlyInLeft,"Removed datasets"),o(d,c.onlyInRight,"Added datasets"),o(d,c.withDiffs,"Datasets with differences"),o(d,c.withoutDiffs,"No differences detected for the following datasets");return d});return new na("dataset",u,oa(t),r.pinnedDatasets)}let Pv=1;function fi(){return`view_${Pv++}`}let Lv=1;function la(){return`header_${Lv++}`}let Nv=1;function gs(e){return`row_${Nv++}_${e}`}function qv(e,t,r){function n(Re,ie=0){return Re===0?"-":`${Re<=0?"":"+"}${Re.toFixed(ie)}`}function s(Re){return Re===0?"":`${n(Re,1)}%`}function i(Re,ie){return Re!==0?(ie-Re)/Re*100:0}const o=e.bundleL.modelSpec,u=e.bundleR.modelSpec,c=o.inputVars.size,d=u.inputVars.size,m=d-c,T=o.outputVars.size,$=u.outputVars.size,C=$-T,D=o.modelSizeInBytes,F=u.modelSizeInBytes,g=F-D,q=i(D,F),x=o.dataSizeInBytes,P=u.dataSizeInBytes,K=P-x,L=i(x,P),B=t.avgTime||0,J=r.avgTime||0,re=J-B,ve=i(B,J),ye=t.minTime,Se=r.minTime,Ne=t.maxTime,Ke=r.maxTime,Ar=Math.min(ye,Se),hi=Math.max(Ne,Ke);function gi(Re){return Ks(Re.allTimes,Ar,hi,Re.avgTime)}const Gi={modelName:e.bundleL.name,datasetClassIndex:0,inputs:c.toString(),outputs:T.toString(),modelSize:D.toString(),modelSizePctChange:"",dataSize:x.toString(),dataSizePctChange:"",avgTime:B.toFixed(1),avgTimePctChange:"",minTime:ye.toFixed(1),maxTime:Ne.toFixed(1),dotPlot:gi(t)},bs={modelName:e.bundleR.name,datasetClassIndex:1,inputs:d.toString(),outputs:$.toString(),modelSize:F.toString(),modelSizePctChange:"",dataSize:P.toString(),dataSizePctChange:"",avgTime:J.toFixed(1),avgTimePctChange:"",minTime:Se.toFixed(1),maxTime:Ke.toFixed(1),dotPlot:gi(r)},ua={modelName:"Change",inputs:n(m),outputs:n(C),modelSize:n(g),modelSizePctChange:s(q),dataSize:n(K),dataSizePctChange:s(L),avgTime:n(re,1),avgTimePctChange:s(ve),minTime:"",maxTime:""};return{row1:Gi,row2:bs,row3:ua}}class Fv{constructor(t,r){this.items=t,this.selectedIndex=xe(r),this.selectedItem=_e(this.selectedIndex,n=>t[n]),this.selectedItemId=_e(this.selectedItem,n=>n.id)}}function Fi(e,t,r,n,s,i,o=[]){function u(K,L){return _e([K,L],([B,J])=>{if(B.count===0)return J===0?{subtitle:"all clear",status:"passed"}:{subtitle:`no diffs, but ${J} skipped ${J===1?"scenario":"scenarios"}`,status:"warning"};{const re=B.count===1?B.kind:`${B.kind}s`;return{subtitle:`${B.count} ${re} with diffs`,status:"warning"}}})}const c=[];function d(K,L,B){c.push({id:K,title:L,subtitle:_e(B,J=>J.subtitle),subtitleClass:_e(B,J=>`status-color-${J.status}`)})}const m=Rv(e,t);let T;if(m.total===0)T={subtitle:"no checks",status:"none"};else if(m.failed>0||m.errors>0){const K=[];m.failed>0&&K.push(`${m.failed} failed`),m.errors>0&&(m.errors===1?K.push(`${m.errors} error`):K.push(`${m.errors} errors`)),T={subtitle:K.join(", "),status:"failed"}}else{const K=[];let L="passed";m.passed>0&&K.push(`${m.passed} passed`),m.skipped>0&&(K.push(`${m.skipped} skipped`),L="warning"),T={subtitle:K.join(", "),status:L}}d("checks","Checks",xe(T));let $,C,D,F;if(r&&n){$=qv(r,n.perfReportL,n.perfReportR);const K=Iv(r,s,n.testSummaries,i,o),L=K.skippedScenarioCount;if(K.views){C=K.views;const ye=K.views.allRows,Se=C.rowsWithDiffs,Ne=_e([ye,Se],([Ar,hi])=>{let gi=0;for(const Gi of Ar){const bs=Gi.viewMetadata?.view;bs?.kind==="view"&&bs.graphOrder==="grouped-by-diffs"&&(gi+=Gi?.viewMetadata?.changedGraphCount||0)}return gi>0?{count:gi,kind:"graph"}:{count:hi,kind:"view"}}),Ke=u(Ne,L);d("comp-views","Comparison views",Ke)}const B=_e(K.byScenario.rowsWithDiffs,ye=>({count:ye,kind:"scenario"}));D=K.byScenario;const J=u(B,L);d("comps-by-scenario","Comparisons by scenario",J),F=K.byDataset;const re=_e(K.byDataset.rowsWithDiffs,ye=>({count:ye,kind:"dataset"})),ve=u(re,L);d("comps-by-dataset","Comparisons by dataset",ve)}const g=c.findIndex(K=>Pe(K.subtitle)!=="all clear"),q=new Fv(c,g>=0?g:0),x=new Map,P=[...r?.scenarios.getAllScenarios()??[]].find(K=>K.settings.kind==="all-inputs-settings"&&K.settings.position==="at-default")?.key;if(P)for(const K of n?.testSummaries??[]){const L=K.s,B=K.d;L===P&&x.set(B,K)}return{statsTableViewModel:$,tabBarViewModel:q,checkSummaryViewModel:m,comparisonSummary:n,comparisonViewsSummaryViewModel:C,comparisonsByScenarioSummaryViewModel:D,comparisonsByDatasetSummaryViewModel:F,baselineTestSummaries:x}}class Ft{constructor(t,r,n={}){this.label=t,this.value=r,this.options=n}}class As{constructor(t,r,n){this.options=t,this.selectedValue=r,this.label=n}}function Kv(e,t){const r="DAT file",n=e.split(`
`),s=new Map;let i="",o=new Map,u=1,c=-1;const d=$=>{const C=$.split("	").map(D=>D.trim());return C.length<2||C[1]!==""?C:[C[0]]},m=()=>{if(i==="")return;const $=Av(i);s.set(`${t}${$}`,o)},T=$=>parseFloat($);for(const $ of n){const C=d($);if(C.length===1)m(),i=C[0],o=new Map,c=-1;else if(C.length>1){const D=Math.floor(parseFloat(C[0])),F=T(C[1]);if(Number.isNaN(D))throw new Error(`Time value is NaN at line ${u} in ${r}`);if(Number.isNaN(F))throw new Error(`Value is NaN at line ${u} in ${r} for variable '${i}' at time ${D}`);!Number.isFinite(F)||F<-1e32||D!==c&&(o.set(D,F),c=D)}u++}return m(),s}function Ki(e){return"_"+e.trim().replace(/"/g,"_").replace(/\s+!$/g,"!").replace(/\s/g,"_").replace(/,/g,"_").replace(/-/g,"_").replace(/\./g,"_").replace(/\$/g,"_").replace(/'/g,"_").replace(/&/g,"_").replace(/%/g,"_").replace(/\//g,"_").replace(/\|/g,"_").toLowerCase()}function Av(e){const t=e.match(/([^[]+)(?:\[([^\]]+)\])?/);if(!t)throw new Error(`Invalid Vensim name: ${e}`);let r=Ki(t[1]);if(t[2]){const n=t[2].split(",").map(s=>Ki(s));r+=`[${n.join(",")}]`}return r}function ns(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.rows.length;n++){const s=r.rows[n];for(let i=0;i<s.points.length;i++)if(s.points[i].hasDiff===!0)return{groupIndex:t,rowIndex:n,pointIndex:i}}}}function Bs(e){for(let t=e.length-1;t>=0;t--){const r=e[t];for(let n=r.rows.length-1;n>=0;n--){const s=r.rows[n];for(let i=s.points.length-1;i>=0;i--)if(s.points[i].hasDiff===!0)return{groupIndex:t,rowIndex:n,pointIndex:i}}}}function Ai(e,t,r){if(!t)return ns(e);const n=t.groupIndex,s=t.rowIndex,i=t.pointIndex;function o(c,d){return r?.matchOutputVarsOnly===!0?d.isOutputVar&&c.hasDiff===!0:c.hasDiff===!0}for(let c=n;c<e.length;c++){const d=e[c],m=c===n?s+1:0;for(let T=m;T<d.rows.length;T++){const $=d.rows[T],C=$.points[i];if(C&&o(C,$))return{groupIndex:c,rowIndex:T,pointIndex:i}}}const u=Math.max(...e.flatMap(c=>c.rows.map(d=>d.points.length)));for(let c=i+1;c<u;c++)for(let d=0;d<e.length;d++){const m=e[d];for(let T=0;T<m.rows.length;T++){const $=m.rows[T];if(c<$.points.length){const C=$.points[c];if(C&&o(C,$))return{groupIndex:d,rowIndex:T,pointIndex:c}}}}return ns(e)}function Bv(e,t){if(!t)return Bs(e);const r=t.groupIndex,n=t.rowIndex,s=t.pointIndex;for(let i=r;i>=0;i--){const o=e[i],u=i===r?n-1:o.rows.length-1;for(let c=u;c>=0;c--){const d=o.rows[c].points[s];if(d&&d.hasDiff===!0)return{groupIndex:i,rowIndex:c,pointIndex:s}}}for(let i=s-1;i>=0;i--)for(let o=e.length-1;o>=0;o--){const u=e[o];for(let c=u.rows.length-1;c>=0;c--){const d=u.rows[c];if(i<d.points.length){const m=d.points[i];if(m&&m.hasDiff===!0)return{groupIndex:o,rowIndex:c,pointIndex:i}}}}return Bs(e)}function Ov(e,t,r){let n;switch(e.key){case"ArrowLeft":e.preventDefault(),n=Bv(t,r);break;case"ArrowRight":e.preventDefault(),n=Ai(t,r);break;case"n":e.preventDefault(),n=Ai(t,r,{matchOutputVarsOnly:!0});break;case"Home":e.preventDefault(),n=ns(t);break;case"End":e.preventDefault(),n=Bs(t);break;default:return}return n}let jv=1;class Gv{constructor(t,r,n,s,i,o,u,c,d,m){this.comparisonConfig=t,this.dataCoordinator=r,this.datasetKey=n,this.varName=s,this.datDatasets=i,this.sourceL=o,this.scenarioSpecL=u,this.sourceR=c,this.scenarioSpecR=d,this.diffPoint=m,this.dataRequested=!1,this.dataLoaded=!1,this.requestKey=`trace-tooltip::${jv++}::${n}`,this.writableContent=xe(void 0),this.content=this.writableContent}requestData(){if(this.dataRequested)return;this.dataRequested=!0,this.writableContent.set({comparisonGraphViewModel:void 0,loading:!0,error:void 0});const t=this.sourceL==="dat"?void 0:this.sourceL,r=this.sourceR,n=[this.datasetKey];this.dataCoordinator.requestDatasetMaps(this.requestKey,t,this.scenarioSpecL,r,this.scenarioSpecR,n,(s,i)=>{if(!this.dataRequested)return;this.sourceL==="dat"&&(s=this.datDatasets);const o=lr(s?.get(this.datasetKey)),u=lr(i?.get(this.datasetKey)),c=[];function d(D,F){c.push({points:D,color:F,style:"normal"})}d(u,"deepskyblue"),d(o,"crimson");let m=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY;function $(D){for(const F of D)F.y<m&&(m=F.y),F.y>T&&(T=F.y)}for(const D of c)$(D.points);const C={key:this.requestKey,plots:c,yMin:m,yMax:T};this.writableContent.set({comparisonGraphViewModel:C,loading:!1,error:void 0}),this.dataLoaded=!0})}clearData(){this.dataRequested&&(this.writableContent.set({comparisonGraphViewModel:void 0,loading:!1,error:void 0}),this.dataLoaded||this.dataCoordinator.cancelRequest(this.requestKey),this.dataRequested=!1,this.dataLoaded=!1)}}class Uv{constructor(t,r,n,s,i){this.comparisonConfig=t,this.dataCoordinator=r,this.running=!1,this.bundleNameL=t.bundleL.name,this.bundleNameR=t.bundleR.name;const o=xe("left");this.sourceSelector0=new As([new Ft(this.bundleNameL,"left"),new Ft(this.bundleNameR,"right"),new Ft("DAT file","dat")],o);const u=xe("right");this.sourceSelector1=new As([new Ft(this.bundleNameR,"right")],u),this.selectedSource0=o,this.selectedSource1=u;const c=categorizeComparisonTestSummaries(t,n,"max-diff").byScenario,[d,m]=Bi("left",this.bundleNameL,c,s,i),[T,$]=Bi("right",this.bundleNameR,c,s,i);this.selectedScenarioSpecUid0=xe(void 0),this.selectedScenarioSpecUid1=xe(void 0),this.scenarioSelector0=_e(this.selectedSource0,C=>{switch(C){case"left":return Is(0,d,this.selectedScenarioSpecUid0);case"right":return Is(0,T,this.selectedScenarioSpecUid0);case"dat":return;default:throw new Error(`Unhandled source ${C}`)}}),this.scenarioSelector1=_e(this.selectedSource1,()=>Is(1,T,this.selectedScenarioSpecUid1)),this.selectedScenarioSpec0=_e([this.selectedSource0,this.selectedScenarioSpecUid0],([C,D])=>{switch(C){case"left":return m.find(F=>F.uid===D);case"right":return $.find(F=>F.uid===D);case"dat":return;default:throw new Error(`Unhandled source ${C}`)}}),this.selectedScenarioSpec1=_e(this.selectedScenarioSpecUid1,C=>$.find(D=>D.uid===C)),this.datText=xe(void 0),this.writableStatusMessage=xe("Loading"),this.statusMessage=this.writableStatusMessage,this.writableGroups=xe([]),this.groups=this.writableGroups,this.hideRowsWithNoDiffs=xe(!0),this.selectedSquare=xe(void 0),this.selectedSquareData=this.selectedSquare,this.filteredGroups=_e([this.groups,this.hideRowsWithNoDiffs],([C,D])=>D?C.map(F=>({...F,rows:F.rows.filter(g=>this.hasRowWithDiffs(g))})).filter(F=>F.rows.length>0):C)}run(){if(this.running)return;this.writableGroups.set([]),this.writableStatusMessage.set("Running comparisons, please wait"),this.running=!0;const t=Pe(this.selectedSource0),r=Pe(this.selectedSource1);let n;if(t==="dat"){const o=Pe(this.datText);if(o===void 0){this.writableStatusMessage.set("Select a DAT file for comparison"),this.running=!1;return}const u=Kv(o,"ModelImpl_");this.datDatasets=u;const c=Pe(this.selectedScenarioSpec1);n={kind:"compare-to-ext-data",extData:u,bundleSide:r,scenarioSpec:c}}else{this.datDatasets=void 0;const o=Pe(this.selectedScenarioSpec0),u=Pe(this.selectedScenarioSpec1);n={kind:"compare-to-bundle",bundleSide0:t,scenarioSpec0:o,bundleSide1:r,scenarioSpec1:u}}const s=0,i=this.comparisonConfig.bundleR.modelSpec;runTrace(i,{onComplete:o=>{const u=Yv(i,o,s);if(this.writableGroups.set(u),u.length===0){let c="No comparisons were performed.";t==="dat"?c+=" Check that the DAT file is valid.":c+=" Check that the bundle is configured correctly.",this.writableStatusMessage.set(c)}else this.writableStatusMessage.set(void 0),setTimeout(()=>{const c=Pe(this.filteredGroups),d=ns(c);this.selectedSquare.set(d)},0);this.running=!1},onError:o=>{console.error(o),this.writableStatusMessage.set(o.message),this.running=!1}},n)}createTooltipViewModel(t,r,n){const s=Pe(this.selectedSource0),i=Pe(this.selectedSource1),o=Pe(this.selectedScenarioSpec0),u=Pe(this.selectedScenarioSpec1);return new Gv(this.comparisonConfig,this.dataCoordinator,t,r,this.datDatasets,s,o,i,u,n)}hasRowWithDiffs(t){return t.points.some(r=>r.hasDiff===!0)}handleKeyDown(t){const r=Pe(this.filteredGroups),n=Pe(this.selectedSquare),s=Ov(t,r,n);s&&this.selectedSquare.set(s)}selectSquareByIndices(t,r,n){this.selectedSquare.set({groupIndex:t,rowIndex:r,pointIndex:n})}getSelectedSquareInfo(){const t=Pe(this.selectedSquare);if(!t)return;const r=Pe(this.filteredGroups),{groupIndex:n,rowIndex:s,pointIndex:i}=t,o=r[n]?.rows[s],u=o?.points[i];if(u?.diffPoint)return{datasetKey:o.datasetKey,varName:o.varName,diffPoint:u.diffPoint}}}function Wv(e,t,r,n,s){return new Uv(e,t,r,n,s)}function Yv(e,t,r){const n=e.implVars||new Map,s=e.implVarGroups||[];if(n.size===0||s.length===0)return console.error("ERROR: No impl vars or groups defined in model spec; trace report will be empty"),[];let i,o;for(const m of t.datasetReports.values())if(m.points.size>1){let T=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY;for(const C of m.points.keys())T=Math.min(C,T),$=Math.max(C,$);i=T,o=$;break}if(i===void 0||o===void 0)return console.error("ERROR: Failed to determine min/max times; trace report will be empty"),[];function u(m,T){const $=m.points.get(T);let C,D;if($){const F=Math.abs($.valueR-$.valueL);F===0?(C=!1,D="green"):(C=!0,($.valueL!==0?Math.abs(F/$.valueL):1)*100<r?D="orange":D="crimson")}else C=void 0,D="gray";return{hasDiff:C,color:D,diffPoint:$}}function c(m,T,$){const C=[];switch(m){case"initConstants":case"initLevels":C.push(u($,i));break;case"evalLevels":C.push({color:"gray"});for(let g=i+1;g<=o;g++)C.push(u($,g));break;default:for(let g=i;g<=o;g++)C.push(u($,g));break}const D=$.datasetKey.replace("ModelImpl","Model"),F=e.outputVars.has(D);return{datasetKey:$.datasetKey,varName:T.varName,isOutputVar:F,points:C}}const d=[];for(const m of s){const T=[];for(const $ of m.datasetKeys){const C=n.get($);if(C===void 0){console.warn(`WARNING: No impl var found for key=${$}, skipping trace row`);continue}const D=t.datasetReports.get($);if(D===void 0){console.warn(`WARNING: No dataset report found for key=${$}, skipping trace row`);continue}T.push(c(m.fn,C,D))}d.push({title:m.title,rows:T})}return d}function Bi(e,t,r,n,s){const i=[],o=[];function u(m){const T=m.root,$=e==="right"?T.specR:T.specL;if(!$)return;o.push($);let C=T.title;T.subtitle&&(C+=` ${T.subtitle}`),i.push(new Ft(C,$.uid))}function c(m,T,$){m.length!==0&&(i.push(new Ft(T,$,{disabled:!0})),m.forEach(u))}if(n&&s){o.push(n);const m=s==="check"?"check test":"comparison";i.push(new Ft(`Selected scenario from ${m}`,n.uid))}const d=e==="left"?r.onlyInLeft:r.onlyInRight;return c(d,`--- Scenarios only valid in ${t}`,"___only_in_side"),c(r.withDiffs,"--- Scenarios producing differences","___with_diffs"),c(r.withoutDiffs,"--- Scenarios NOT producing differences","___without_diffs"),[i,o]}function Is(e,t,r){let n;if(e===1&&t[0]?.label.startsWith("Selected scenario from"))n=t[0].value;else for(const i of t)if(i.label==="All inputs at default"){n=i.value;break}r.set(n);const s=e===0?"Scenario 1":"Scenario 2";return new As(t,r,s)}class Hv{constructor(t,r,n){this.appModel=t,this.bundleManager=r,this.suiteSummary=n,this.writableChecksInProgress=xe(!0),this.checksInProgress=this.writableChecksInProgress,this.writableProgress=xe("0%"),this.progress=this.writableProgress;const s=qi("sde-check-graph-zoom",1),i=Jf("sde-check-consistent-y-range",!1),o=Qf("sde-check-sort-mode","max-diff"),u=qi("sde-check-concurrency",1);this.userPrefs={zoom:s,consistentYRange:i,sortMode:o};const c=this.suiteSummary===void 0;this.writableGeneratedDateString=xe(void 0),this.headerViewModel=vv(c,t.config.comparison,r,this.writableGeneratedDateString,s,i,o,u),this.pinnedItemStates=ev();const d=cv(c);this.skipChecks=d.skipChecks,this.skipComparisonScenarios=d.skipComparisonScenarios,this.filterPopoverViewModel=d.filterPopoverViewModel}runTestSuite(){this.cancelRunSuite&&(this.cancelRunSuite(),this.cancelRunSuite=void 0),this.writableChecksInProgress.set(!0),this.writableProgress.set("0%");const t=this.appModel.config.comparison;if(this.suiteSummary){const r=this.appModel.config.check,n=checkReportFromSummary(r,this.suiteSummary.checkSummary),s=this.suiteSummary?.comparisonSummary;this.summaryViewModel=Fi(this.appModel.checkDataCoordinator,n,t,s,this.pinnedItemStates,this.userPrefs.sortMode,[]);const i=Oi(this.suiteSummary.date,this.suiteSummary.elapsed);this.writableGeneratedDateString.set(i),this.writableChecksInProgress.set(!1)}else{this.writableGeneratedDateString.set(void 0);const r=performance.now();this.cancelRunSuite=runSuite(this.appModel.config,{onProgress:n=>{this.writableProgress.set(`${Math.round(n*100)}%`)},onComplete:n=>{const s=n.checkReport;let i;n.comparisonReport&&(i=comparisonSummaryFromReport(n.comparisonReport)),this.summaryViewModel=Fi(this.appModel.checkDataCoordinator,s,t,i,this.pinnedItemStates,this.userPrefs.sortMode,this.skipComparisonScenarios),this.filterPopoverViewModel=this.createFilterPopoverViewModelFromReports(s,n.comparisonReport);const o=performance.now()-r,u=Oi(void 0,o);this.writableGeneratedDateString.set(u),this.writableChecksInProgress.set(!1)},onError:n=>{console.error(n)}},{skipChecks:this.skipChecks,skipComparisonScenarios:this.skipComparisonScenarios})}}createCompareDetailViewModelForSummaryRow(t){const r=t.groupSummary,n=t.viewMetadata?.viewGroup,s=t.viewMetadata?.view;return s?.kind==="unresolved-view"?rv(t.rowKey,n):r!==void 0?r.group.kind==="by-dataset"?iv(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,r,this.pinnedItemStates.pinnedScenarios):nv(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,r,n,s,this.pinnedItemStates.pinnedDatasets):sv(t.rowKey,this.appModel.config.comparison,this.appModel.comparisonDataCoordinator,this.summaryViewModel.baselineTestSummaries,this.userPrefs,n,s,this.pinnedItemStates.pinnedFreeformRows)}createCompareDetailViewModelForFirstSummaryRow(t){const r=this.getComparisonSummaryViewModel(t).getAllRowsSnapshot();if(r.length>0){const n=r[0];return this.createCompareDetailViewModelForSummaryRow(n)}else return}createCompareDetailViewModelForSummaryRowWithDelta(t,r,n){const s=this.getComparisonSummaryViewModel(t).getAllRowsSnapshot(),i=s.findIndex(o=>o.rowKey===r)+n;if(i>=0&&i<s.length){const o=s[i];return this.createCompareDetailViewModelForSummaryRow(o)}else return}getComparisonSummaryViewModel(t){switch(t){case"views":return this.summaryViewModel.comparisonViewsSummaryViewModel;case"by-scenario":return this.summaryViewModel.comparisonsByScenarioSummaryViewModel;case"by-dataset":return this.summaryViewModel.comparisonsByDatasetSummaryViewModel;default:Tr(t)}}createPerfViewModel(){return hv()}createTraceViewModel(t,r){const n=this.appModel.config.comparison,s=this.appModel.comparisonDataCoordinator,i=this.summaryViewModel.comparisonSummary?.testSummaries??[];return Wv(n,s,i,t,r)}createFilterPopoverViewModelFromReports(t,r){return dv(this.appModel.config,t,r)}applyFilters(){document.dispatchEvent(new CustomEvent("sde-check-config-changed"))}}function Oi(e,t){e===void 0&&(e=new Date().toISOString());const r=(t/1e3).toFixed(1),n=new Date(e),s=n.toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"}),i=n.toLocaleTimeString(void 0,{hour12:!1,hour:"2-digit",minute:"2-digit"});return`${s} ${i} (${r}s)`}class Xv{#t;get bundles(){return f$1(this.#t)}set bundles(t){E(this.#t,t,!0)}#e;get loading(){return f$1(this.#e)}set loading(t){E(this.#e,t,!0)}#i;get error(){return f$1(this.#i)}set error(t){E(this.#i,t,!0)}constructor(t){this.config=t,this.#t=Oe(Mt([])),this.#e=Oe(!1),this.#i=Oe(void 0),this.activeBundleUrlL=t.bundleUrlL||"",this.activeBundleUrlR=t.bundleUrlR||"",this.config.onBundlesChanged&&this.config.onBundlesChanged(()=>{this.load()})}async load(){this.loading=!0,this.error=void 0;const t=this.loadRemoteBundles(),r=this.loadLocalBundles(),[n,s]=await Promise.all([t,r]);if(!n&&!s){!this.config.remoteBundlesUrl&&!this.config.getLocalBundles?this.error="No bundles available":this.error||(this.error="Failed to load bundles"),this.bundles=[],this.loading=!1;return}this.bundles=this.mergeBundles(n||[],s||[]),this.loading=!1}downloadBundle(t){this.config.downloadBundle&&this.config.downloadBundle(t)}copyBundle(t,r){if(this.config.copyBundle){const n=r.replace(/\s/g,"-");this.config.copyBundle(t,n)}}async loadRemoteBundles(){if(this.config.remoteBundlesUrl)try{const t=await fetch(this.config.remoteBundlesUrl);if(!t.ok)throw new Error(`Failed to fetch remote bundles: ${t.statusText}`);return await t.json()}catch(t){const r=`Failed to load remote bundles: ${t instanceof Error?t.message:String(t)}`,n=this.error;n?this.error=`${n}; ${r}`:this.error=r;return}}async loadLocalBundles(){if(this.config.getLocalBundles)try{return await this.config.getLocalBundles()}catch(t){const r=`Failed to load local bundles: ${t instanceof Error?t.message:String(t)}`,n=this.error;n?this.error=`${n}; ${r}`:this.error=r;return}}mergeBundles(t,r){const n=[];for(const s of t)n.push({remote:s});for(const s of r)n.push({local:s});return n}}function ap(e,t){const r=t?.containerId||"app-shell-container",n=document.getElementById(r);wl(e).then(s=>{let i;t?.bundleSelectorConfig&&(i=new Xv(t.bundleSelectorConfig));const o=new Hv(s,i,t?.suiteSummary);Jo(Zf,{target:n,props:{appViewModel:o}})}).catch(s=>{console.error(`ERROR: Failed to initialize app model: ${s.message}`)})}const messagesHtml="",messages=messagesHtml;function initOverlay(){updateOverlay(messages)}function updateOverlay(e){const t=document.getElementById("overlay-content");t.style.display="none";const r=document.getElementById("overlay-text");r.innerHTML=e}class EventEmitter{}function cpus(){return 1}function dirname(){return""}function isAbsolute(){return!1}function join(){return""}function fileURLToPath(){return""}const worker_threads=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter,cpus,dirname,fileURLToPath,isAbsolute,join},Symbol.toStringTag,{value:"Module"}));var define_process_env_default$1={};let __non_webpack_require__$1=()=>worker_threads;const DefaultErrorSerializer$1={deserialize(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},isSerializedError$1=e=>e&&typeof e=="object"&&"__error_marker"in e&&e.__error_marker==="$$error",DefaultSerializer$1={deserialize(e){return isSerializedError$1(e)?DefaultErrorSerializer$1.deserialize(e):e},serialize(e){return e instanceof Error?DefaultErrorSerializer$1.serialize(e):e}};let registeredSerializer$1=DefaultSerializer$1;function deserialize$1(e){return registeredSerializer$1.deserialize(e)}function serialize$1(e){return registeredSerializer$1.serialize(e)}let bundleURL$1;function getBundleURLCached$1(){return bundleURL$1||(bundleURL$1=getBundleURL$1()),bundleURL$1}function getBundleURL$1(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return getBaseURL$1(t[0])}return"/"}function getBaseURL$1(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}const defaultPoolSize$1$1=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,isAbsoluteURL$1=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e);function createSourceBlobURL$1(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function selectWorkerImplementation$1$1(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(n,s){var i,o;typeof n=="string"&&s&&s._baseURL?n=new URL(n,s._baseURL):typeof n=="string"&&!isAbsoluteURL$1(n)&&getBundleURLCached$1().match(/^file:\/\//i)&&(n=new URL(n,getBundleURLCached$1().replace(/\/[^\/]+$/,"/")),(!((i=s?.CORSWorkaround)!==null&&i!==void 0)||i)&&(n=createSourceBlobURL$1(`importScripts(${JSON.stringify(n)});`))),typeof n=="string"&&isAbsoluteURL$1(n)&&(!((o=s?.CORSWorkaround)!==null&&o!==void 0)||o)&&(n=createSourceBlobURL$1(`importScripts(${JSON.stringify(n)});`)),super(n,s)}}class t extends e{constructor(n,s){const i=window.URL.createObjectURL(n);super(i,s)}static fromText(n,s){const i=new window.Blob([n],{type:"text/javascript"});return new t(i,s)}}return{blob:t,default:e}}let implementation$3$1;function getWorkerImplementation$2$1(){return implementation$3$1||(implementation$3$1=selectWorkerImplementation$1$1()),implementation$3$1}function isWorkerRuntime$4$1(){const e=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!e)}const BrowserImplementation$1=Object.freeze(Object.defineProperty({__proto__:null,defaultPoolSize:defaultPoolSize$1$1,getWorkerImplementation:getWorkerImplementation$2$1,isWorkerRuntime:isWorkerRuntime$4$1},Symbol.toStringTag,{value:"Module"})),getCallsites$1={};let tsNodeAvailable$1;const defaultPoolSize$2=cpus().length;function detectTsNode$1(){if(typeof __non_webpack_require__$1=="function")return!1;if(tsNodeAvailable$1)return tsNodeAvailable$1;try{eval("require").resolve("ts-node"),tsNodeAvailable$1=!0}catch(e){if(e&&e.code==="MODULE_NOT_FOUND")tsNodeAvailable$1=!1;else throw e}return tsNodeAvailable$1}function createTsNodeModule$1(e){return`
    require("ts-node/register/transpile-only");
    require(${JSON.stringify(e)});
  `}function rebaseScriptPath$1(e,t){const r=getCallsites$1().find(i=>{const o=i.getFileName();return!!(o&&!o.match(t)&&!o.match(/[\/\\]master[\/\\]implementation/)&&!o.match(/^internal\/process/))});let s=(r?r.getFileName():null)||null;return s&&s.startsWith("file:")&&(s=fileURLToPath()),s?join():e}function resolveScriptPath$1(scriptPath,baseURL){const makeRelative=filePath=>join(baseURL||eval("__dirname")),workerFilePath=typeof __non_webpack_require__$1=="function"?__non_webpack_require__$1.resolve(makeRelative()):eval("require").resolve(makeRelative(rebaseScriptPath$1(scriptPath,/[\/\\]worker_threads[\/\\]/)));return workerFilePath}function initWorkerThreadsWorker$1(){const NativeWorker=typeof __non_webpack_require__$1=="function"?__non_webpack_require__$1().Worker:eval("require")("worker_threads").Worker;let allWorkers=[];class Worker extends NativeWorker{constructor(t,r){const n=r&&r.fromSource?null:resolveScriptPath$1(t,(r||{})._baseURL);if(n)n.match(/\.tsx?$/i)&&detectTsNode$1()?super(createTsNodeModule$1(n),Object.assign(Object.assign({},r),{eval:!0})):n.match(/\.asar[\/\\]/)?super(n.replace(/\.asar([\/\\])/,".asar.unpacked$1"),r):super(n,r);else{const s=t;super(s,Object.assign(Object.assign({},r),{eval:!0}))}this.mappedEventListeners=new WeakMap,allWorkers.push(this)}addEventListener(t,r){const n=s=>{r({data:s})};this.mappedEventListeners.set(r,n),this.on(t,n)}removeEventListener(t,r){const n=this.mappedEventListeners.get(r)||r;this.off(t,n)}}const terminateWorkersAndMaster=()=>{Promise.all(allWorkers.map(e=>e.terminate())).then(()=>process.exit(0),()=>process.exit(1)),allWorkers=[]};process.on("SIGINT",()=>terminateWorkersAndMaster()),process.on("SIGTERM",()=>terminateWorkersAndMaster());class BlobWorker extends Worker{constructor(t,r){super(Buffer.from(t).toString("utf-8"),Object.assign(Object.assign({},r),{fromSource:!0}))}static fromText(t,r){return new Worker(t,Object.assign(Object.assign({},r),{fromSource:!0}))}}return{blob:BlobWorker,default:Worker}}function initTinyWorker$1(){const e=require("tiny-worker");let t=[];class r extends e{constructor(o,u){const c=u&&u.fromSource?null:process.platform==="win32"?`file:///${resolveScriptPath$1(o).replace(/\\/g,"/")}`:resolveScriptPath$1(o);if(c)c.match(/\.tsx?$/i)&&detectTsNode$1()?super(new Function(createTsNodeModule$1(resolveScriptPath$1(o))),[],{esm:!0}):c.match(/\.asar[\/\\]/)?super(c.replace(/\.asar([\/\\])/,".asar.unpacked$1"),[],{esm:!0}):super(c,[],{esm:!0});else{const d=o;super(new Function(d),[],{esm:!0})}t.push(this),this.emitter=new EventEmitter,this.onerror=d=>this.emitter.emit("error",d),this.onmessage=d=>this.emitter.emit("message",d)}addEventListener(o,u){this.emitter.addListener(o,u)}removeEventListener(o,u){this.emitter.removeListener(o,u)}terminate(){return t=t.filter(o=>o!==this),super.terminate()}}const n=()=>{Promise.all(t.map(i=>i.terminate())).then(()=>process.exit(0),()=>process.exit(1)),t=[]};process.on("SIGINT",()=>n()),process.on("SIGTERM",()=>n());class s extends r{constructor(o,u){super(Buffer.from(o).toString("utf-8"),Object.assign(Object.assign({},u),{fromSource:!0}))}static fromText(o,u){return new r(o,Object.assign(Object.assign({},u),{fromSource:!0}))}}return{blob:s,default:r}}let implementation$2$1,isTinyWorker$1;function selectWorkerImplementation$2(){try{return isTinyWorker$1=!1,initWorkerThreadsWorker$1()}catch{return console.debug("Node worker_threads not available. Trying to fall back to tiny-worker polyfill..."),isTinyWorker$1=!0,initTinyWorker$1()}}function getWorkerImplementation$1$1(){return implementation$2$1||(implementation$2$1=selectWorkerImplementation$2()),implementation$2$1}function isWorkerRuntime$3$1(){if(isTinyWorker$1)return!!(typeof self<"u"&&self.postMessage);{const isMainThread=typeof __non_webpack_require__$1=="function"?__non_webpack_require__$1().isMainThread:eval("require")("worker_threads").isMainThread;return!isMainThread}}const NodeImplementation$1=Object.freeze(Object.defineProperty({__proto__:null,defaultPoolSize:defaultPoolSize$2,getWorkerImplementation:getWorkerImplementation$1$1,isWorkerRuntime:isWorkerRuntime$3$1},Symbol.toStringTag,{value:"Module"})),runningInNode$1$1=typeof process<"u"&&process.arch!=="browser"&&"pid"in process,implementation$1$1=runningInNode$1$1?NodeImplementation$1:BrowserImplementation$1,getWorkerImplementation$3=implementation$1$1.getWorkerImplementation;function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var browser$1={exports:{}},ms$1,hasRequiredMs$1;function requireMs$1(){if(hasRequiredMs$1)return ms$1;hasRequiredMs$1=1;var e=1e3,t=e*60,r=t*60,n=r*24,s=n*7,i=n*365.25;ms$1=function(m,T){T=T||{};var $=typeof m;if($==="string"&&m.length>0)return o(m);if($==="number"&&isFinite(m))return T.long?c(m):u(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function o(m){if(m=String(m),!(m.length>100)){var T=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(T){var $=parseFloat(T[1]),C=(T[2]||"ms").toLowerCase();switch(C){case"years":case"year":case"yrs":case"yr":case"y":return $*i;case"weeks":case"week":case"w":return $*s;case"days":case"day":case"d":return $*n;case"hours":case"hour":case"hrs":case"hr":case"h":return $*r;case"minutes":case"minute":case"mins":case"min":case"m":return $*t;case"seconds":case"second":case"secs":case"sec":case"s":return $*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}}}function u(m){var T=Math.abs(m);return T>=n?Math.round(m/n)+"d":T>=r?Math.round(m/r)+"h":T>=t?Math.round(m/t)+"m":T>=e?Math.round(m/e)+"s":m+"ms"}function c(m){var T=Math.abs(m);return T>=n?d(m,T,n,"day"):T>=r?d(m,T,r,"hour"):T>=t?d(m,T,t,"minute"):T>=e?d(m,T,e,"second"):m+" ms"}function d(m,T,$,C){var D=T>=$*1.5;return Math.round(m/$)+" "+C+(D?"s":"")}return ms$1}var common$1,hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;function e(t){n.debug=n,n.default=n,n.coerce=d,n.disable=u,n.enable=i,n.enabled=c,n.humanize=requireMs$1(),n.destroy=m,Object.keys(t).forEach(T=>{n[T]=t[T]}),n.names=[],n.skips=[],n.formatters={};function r(T){let $=0;for(let C=0;C<T.length;C++)$=($<<5)-$+T.charCodeAt(C),$|=0;return n.colors[Math.abs($)%n.colors.length]}n.selectColor=r;function n(T){let $,C=null,D,F;function g(...q){if(!g.enabled)return;const x=g,P=Number(new Date),K=P-($||P);x.diff=K,x.prev=$,x.curr=P,$=P,q[0]=n.coerce(q[0]),typeof q[0]!="string"&&q.unshift("%O");let L=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(B,J)=>{if(B==="%%")return"%";L++;const re=n.formatters[J];if(typeof re=="function"){const ve=q[L];B=re.call(x,ve),q.splice(L,1),L--}return B}),n.formatArgs.call(x,q),(x.log||n.log).apply(x,q)}return g.namespace=T,g.useColors=n.useColors(),g.color=n.selectColor(T),g.extend=s,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>C!==null?C:(D!==n.namespaces&&(D=n.namespaces,F=n.enabled(T)),F),set:q=>{C=q}}),typeof n.init=="function"&&n.init(g),g}function s(T,$){const C=n(this.namespace+(typeof $>"u"?":":$)+T);return C.log=this.log,C}function i(T){n.save(T),n.namespaces=T,n.names=[],n.skips=[];const $=(typeof T=="string"?T:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const C of $)C[0]==="-"?n.skips.push(C.slice(1)):n.names.push(C)}function o(T,$){let C=0,D=0,F=-1,g=0;for(;C<T.length;)if(D<$.length&&($[D]===T[C]||$[D]==="*"))$[D]==="*"?(F=D,g=C,D++):(C++,D++);else if(F!==-1)D=F+1,g++,C=g;else return!1;for(;D<$.length&&$[D]==="*";)D++;return D===$.length}function u(){const T=[...n.names,...n.skips.map($=>"-"+$)].join(",");return n.enable(""),T}function c(T){for(const $ of n.skips)if(o(T,$))return!1;for(const $ of n.names)if(o(T,$))return!0;return!1}function d(T){return T instanceof Error?T.stack||T.message:T}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return common$1=e,common$1}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,(function(e,t){t.formatArgs=n,t.save=s,t.load=i,t.useColors=r,t.storage=o(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let m=0,T=0;c[0].replace(/%[a-zA-Z%]/g,$=>{$!=="%%"&&(m++,$==="%c"&&(T=m))}),c.splice(T,0,d)}t.log=console.debug||console.log||(()=>{});function s(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function i(){let c;try{c=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=define_process_env_default$1.DEBUG),c}function o(){try{return localStorage}catch{}}e.exports=requireCommon$1()(t);const{formatters:u}=e.exports;u.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(browser$1,browser$1.exports)),browser$1.exports}var browserExports$1=requireBrowser$1();const DebugLogger$1=getDefaultExportFromCjs$1(browserExports$1),hasSymbols$1=()=>typeof Symbol=="function",hasSymbol$1=e=>hasSymbols$1()&&!!Symbol[e],getSymbol$1=e=>hasSymbol$1(e)?Symbol[e]:"@@"+e;hasSymbol$1("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const SymbolIterator$1=getSymbol$1("iterator"),SymbolObservable$1=getSymbol$1("observable"),SymbolSpecies$1=getSymbol$1("species");function getMethod$1(e,t){const r=e[t];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function getSpecies$1(e){let t=e.constructor;return t!==void 0&&(t=t[SymbolSpecies$1],t===null&&(t=void 0)),t!==void 0?t:Observable$1}function isObservable$1(e){return e instanceof Observable$1}function hostReportError$1(e){hostReportError$1.log?hostReportError$1.log(e):setTimeout(()=>{throw e},0)}function enqueue$1(e){Promise.resolve().then(()=>{try{e()}catch(t){hostReportError$1(t)}})}function cleanupSubscription$1(e){const t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{const r=getMethod$1(t,"unsubscribe");r&&r.call(t)}}catch(r){hostReportError$1(r)}}function closeSubscription$1(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription$1(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const r of t)if(notifySubscription$1(e,r.type,r.value),e._state==="closed")break}}function notifySubscription$1(e,t,r){e._state="running";const n=e._observer;try{const s=n?getMethod$1(n,t):void 0;switch(t){case"next":s&&s.call(n,r);break;case"error":if(closeSubscription$1(e),s)s.call(n,r);else throw r;break;case"complete":closeSubscription$1(e),s&&s.call(n);break}}catch(s){hostReportError$1(s)}e._state==="closed"?cleanupSubscription$1(e):e._state==="running"&&(e._state="ready")}function onNotify$1(e,t,r){if(e._state!=="closed"){if(e._state==="buffering"){e._queue=e._queue||[],e._queue.push({type:t,value:r});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:r}],enqueue$1(()=>flushSubscription$1(e));return}notifySubscription$1(e,t,r)}}let Subscription$1=class{constructor(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";const n=new SubscriptionObserver$1(this);try{this._cleanup=r.call(void 0,n)}catch(s){n.error(s)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(closeSubscription$1(this),cleanupSubscription$1(this))}},SubscriptionObserver$1=class{constructor(t){this._subscription=t}get closed(){return this._subscription._state==="closed"}next(t){onNotify$1(this._subscription,"next",t)}error(t){onNotify$1(this._subscription,"error",t)}complete(){onNotify$1(this._subscription,"complete")}},Observable$1=class ep{constructor(t){if(!(this instanceof ep))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}subscribe(t,r,n){return(typeof t!="object"||t===null)&&(t={next:t,error:r,complete:n}),new Subscription$1(t,this._subscriber)}pipe(t,...r){let n=this;for(const s of[t,...r])n=s(n);return n}tap(t,r,n){const s=typeof t!="object"||t===null?{next:t,error:r,complete:n}:t;return new ep(i=>this.subscribe({next(o){s.next&&s.next(o),i.next(o)},error(o){s.error&&s.error(o),i.error(o)},complete(){s.complete&&s.complete(),i.complete()},start(o){s.start&&s.start(o)}}))}forEach(t){return new Promise((r,n)=>{if(typeof t!="function"){n(new TypeError(t+" is not a function"));return}function s(){i.unsubscribe(),r(void 0)}const i=this.subscribe({next(o){try{t(o,s)}catch(u){n(u),i.unsubscribe()}},error(o){n(o)},complete(){r(void 0)}})})}map(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies$1(this);return new r(n=>this.subscribe({next(s){let i=s;try{i=t(s)}catch(o){return n.error(o)}n.next(i)},error(s){n.error(s)},complete(){n.complete()}}))}filter(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies$1(this);return new r(n=>this.subscribe({next(s){try{if(!t(s))return}catch(i){return n.error(i)}n.next(s)},error(s){n.error(s)},complete(){n.complete()}}))}reduce(t,r){if(typeof t!="function")throw new TypeError(t+" is not a function");const n=getSpecies$1(this),s=arguments.length>1;let i=!1,o=r;return new n(u=>this.subscribe({next(c){const d=!i;if(i=!0,!d||s)try{o=t(o,c)}catch(m){return u.error(m)}else o=c},error(c){u.error(c)},complete(){if(!i&&!s)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(o),u.complete()}}))}concat(...t){const r=getSpecies$1(this);return new r(n=>{let s,i=0;function o(u){s=u.subscribe({next(c){n.next(c)},error(c){n.error(c)},complete(){i===t.length?(s=void 0,n.complete()):o(r.from(t[i++]))}})}return o(this),()=>{s&&(s.unsubscribe(),s=void 0)}})}flatMap(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies$1(this);return new r(n=>{const s=[],i=this.subscribe({next(u){let c;if(t)try{c=t(u)}catch(m){return n.error(m)}else c=u;const d=r.from(c).subscribe({next(m){n.next(m)},error(m){n.error(m)},complete(){const m=s.indexOf(d);m>=0&&s.splice(m,1),o()}});s.push(d)},error(u){n.error(u)},complete(){o()}});function o(){i.closed&&s.length===0&&n.complete()}return()=>{s.forEach(u=>u.unsubscribe()),i.unsubscribe()}})}[SymbolObservable$1](){return this}static from(t){const r=typeof this=="function"?this:ep;if(t==null)throw new TypeError(t+" is not an object");const n=getMethod$1(t,SymbolObservable$1);if(n){const s=n.call(t);if(Object(s)!==s)throw new TypeError(s+" is not an object");return isObservable$1(s)&&s.constructor===r?s:new r(i=>s.subscribe(i))}if(hasSymbol$1("iterator")){const s=getMethod$1(t,SymbolIterator$1);if(s)return new r(i=>{enqueue$1(()=>{if(!i.closed){for(const o of s.call(t))if(i.next(o),i.closed)return;i.complete()}})})}if(Array.isArray(t))return new r(s=>{enqueue$1(()=>{if(!s.closed){for(const i of t)if(s.next(i),s.closed)return;s.complete()}})});throw new TypeError(t+" is not observable")}static of(...t){const r=typeof this=="function"?this:ep;return new r(n=>{enqueue$1(()=>{if(!n.closed){for(const s of t)if(n.next(s),n.closed)return;n.complete()}})})}static get[SymbolSpecies$1](){return this}};hasSymbols$1()&&Object.defineProperty(Observable$1,Symbol("extensions"),{value:{symbol:SymbolObservable$1,hostReportError:hostReportError$1},configurable:!0});function unsubscribe$1(e){typeof e=="function"?e():e&&typeof e.unsubscribe=="function"&&e.unsubscribe()}let MulticastSubject$1=class extends Observable$1{constructor(){super(t=>(this._observers.add(t),()=>this._observers.delete(t))),this._observers=new Set}next(t){for(const r of this._observers)r.next(t)}error(t){for(const r of this._observers)r.error(t)}complete(){for(const t of this._observers)t.complete()}};function multicast$1(e){const t=new MulticastSubject$1;let r,n=0;return new Observable$1(s=>{r||(r=e.subscribe(t));const i=t.subscribe(s);return n++,()=>{n--,i.unsubscribe(),n===0&&(unsubscribe$1(r),r=void 0)}})}const $errors$1=Symbol("thread.errors"),$events$1=Symbol("thread.events"),$terminate$1=Symbol("thread.terminate"),$transferable$1=Symbol("thread.transferable"),$worker$1=Symbol("thread.worker");function fail$1$1(e){throw Error(e)}const Thread$1={errors(e){return e[$errors$1]||fail$1$1("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(e){return e[$events$1]||fail$1$1("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(e){return e[$terminate$1]()}},doNothing$1$1=()=>{};function createPromiseWithResolver$1(){let e=!1,t,r=doNothing$1$1;return[new Promise(n=>{e?n(t):r=n}),n=>{e=!0,t=n,r(t)}]}var WorkerEventType$1;(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(WorkerEventType$1||(WorkerEventType$1={}));const doNothing$2=()=>{},returnInput$1=e=>e,runDeferred$1=e=>Promise.resolve().then(e);function fail$2(e){throw e}function isThenable$1(e){return e&&typeof e.then=="function"}let ObservablePromise$1=class zm extends Observable$1{constructor(t){super(r=>{const n=this,s=Object.assign(Object.assign({},r),{complete(){r.complete(),n.onCompletion()},error(i){r.error(i),n.onError(i)},next(i){r.next(i),n.onNext(i)}});try{return this.initHasRun=!0,t(s)}catch(i){s.error(i)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const r of this.rejectionCallbacks)runDeferred$1(()=>r(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)runDeferred$1(()=>t(this.firstValue))}then(t,r){const n=t||returnInput$1,s=r||fail$2;let i=!1;return new Promise((o,u)=>{const c=m=>{if(!i){i=!0;try{o(s(m))}catch(T){u(T)}}},d=m=>{try{o(n(m))}catch(T){c(T)}};if(this.initHasRun||this.subscribe({error:c}),this.state==="fulfilled")return o(n(this.firstValue));if(this.state==="rejected")return i=!0,o(s(this.rejection));this.fulfillmentCallbacks.push(d),this.rejectionCallbacks.push(c)})}catch(t){return this.then(void 0,t)}finally(t){const r=t||doNothing$2;return this.then(n=>(r(),n),()=>r())}static from(t){return isThenable$1(t)?new zm(r=>{const n=i=>{r.next(i),r.complete()},s=i=>{r.error(i)};t.then(n,s)}):super.from(t)}};function isTransferable$1(e){return!(!e||typeof e!="object")}function isTransferDescriptor$1(e){return e&&typeof e=="object"&&e[$transferable$1]}function Transfer$1(e,t){if(!t){if(!isTransferable$1(e))throw Error();t=[e]}return{[$transferable$1]:!0,send:e,transferables:t}}var MasterMessageType$1;(function(e){e.cancel="cancel",e.run="run"})(MasterMessageType$1||(MasterMessageType$1={}));var WorkerMessageType$1;(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(WorkerMessageType$1||(WorkerMessageType$1={}));const debugMessages$1$1=DebugLogger$1("threads:master:messages");let nextJobUID$1=1;const dedupe$1=e=>Array.from(new Set(e)),isJobErrorMessage$1=e=>e&&e.type===WorkerMessageType$1.error,isJobResultMessage$1=e=>e&&e.type===WorkerMessageType$1.result,isJobStartMessage$1=e=>e&&e.type===WorkerMessageType$1.running;function createObservableForJob$1(e,t){return new Observable$1(r=>{let n;const s=(i=>{if(debugMessages$1$1("Message from worker:",i.data),!(!i.data||i.data.uid!==t)){if(isJobStartMessage$1(i.data))n=i.data.resultType;else if(isJobResultMessage$1(i.data))n==="promise"?(typeof i.data.payload<"u"&&r.next(deserialize$1(i.data.payload)),r.complete(),e.removeEventListener("message",s)):(i.data.payload&&r.next(deserialize$1(i.data.payload)),i.data.complete&&(r.complete(),e.removeEventListener("message",s)));else if(isJobErrorMessage$1(i.data)){const o=deserialize$1(i.data.error);r.error(o),e.removeEventListener("message",s)}}});return e.addEventListener("message",s),()=>{if(n==="observable"||!n){const i={type:MasterMessageType$1.cancel,uid:t};e.postMessage(i)}e.removeEventListener("message",s)}})}function prepareArguments$1(e){if(e.length===0)return{args:[],transferables:[]};const t=[],r=[];for(const n of e)isTransferDescriptor$1(n)?(t.push(serialize$1(n.send)),r.push(...n.transferables)):t.push(serialize$1(n));return{args:t,transferables:r.length===0?r:dedupe$1(r)}}function createProxyFunction$1(e,t){return((...r)=>{const n=nextJobUID$1++,{args:s,transferables:i}=prepareArguments$1(r),o={type:MasterMessageType$1.run,uid:n,method:t,args:s};debugMessages$1$1("Sending command to run function to worker:",o);try{e.postMessage(o,i)}catch(u){return ObservablePromise$1.from(Promise.reject(u))}return ObservablePromise$1.from(multicast$1(createObservableForJob$1(e,n)))})}function createProxyModule$1(e,t){const r={};for(const n of t)r[n]=createProxyFunction$1(e,n);return r}var __awaiter$2$1=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(m){try{d(n.next(m))}catch(T){o(T)}}function c(m){try{d(n.throw(m))}catch(T){o(T)}}function d(m){m.done?i(m.value):s(m.value).then(u,c)}d((n=n.apply(e,[])).next())})};const debugMessages$2=DebugLogger$1("threads:master:messages"),debugSpawn$1=DebugLogger$1("threads:master:spawn"),debugThreadUtils$1=DebugLogger$1("threads:master:thread-utils"),isInitMessage$1=e=>e&&e.type==="init",isUncaughtErrorMessage$1=e=>e&&e.type==="uncaughtError",initMessageTimeout$1=typeof process<"u"&&define_process_env_default$1.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(define_process_env_default$1.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function withTimeout$1(e,t,r){return __awaiter$2$1(this,void 0,void 0,function*(){let n;const s=new Promise((o,u)=>{n=setTimeout(()=>u(Error(r)),t)}),i=yield Promise.race([e,s]);return clearTimeout(n),i})}function receiveInitMessage$1(e){return new Promise((t,r)=>{const n=(s=>{debugMessages$2("Message from worker before finishing initialization:",s.data),isInitMessage$1(s.data)?(e.removeEventListener("message",n),t(s.data)):isUncaughtErrorMessage$1(s.data)&&(e.removeEventListener("message",n),r(deserialize$1(s.data.error)))});e.addEventListener("message",n)})}function createEventObservable$1(e,t){return new Observable$1(r=>{const n=(i=>{const o={type:WorkerEventType$1.message,data:i.data};r.next(o)}),s=(i=>{debugThreadUtils$1("Unhandled promise rejection event in thread:",i);const o={type:WorkerEventType$1.internalError,error:Error(i.reason)};r.next(o)});e.addEventListener("message",n),e.addEventListener("unhandledrejection",s),t.then(()=>{const i={type:WorkerEventType$1.termination};e.removeEventListener("message",n),e.removeEventListener("unhandledrejection",s),r.next(i),r.complete()})})}function createTerminator$1(e){const[t,r]=createPromiseWithResolver$1();return{terminate:()=>__awaiter$2$1(this,void 0,void 0,function*(){debugThreadUtils$1("Terminating worker"),yield e.terminate(),r()}),termination:t}}function setPrivateThreadProps$1(e,t,r,n){const s=r.filter(i=>i.type===WorkerEventType$1.internalError).map(i=>i.error);return Object.assign(e,{[$errors$1]:s,[$events$1]:r,[$terminate$1]:n,[$worker$1]:t})}function spawn$1(e,t){return __awaiter$2$1(this,void 0,void 0,function*(){debugSpawn$1("Initializing new thread");const r=initMessageTimeout$1,n=(yield withTimeout$1(receiveInitMessage$1(e),r,`Timeout: Did not receive an init message from worker after ${r}ms. Make sure the worker calls expose().`)).exposed,{termination:s,terminate:i}=createTerminator$1(e),o=createEventObservable$1(e,s);if(n.type==="function"){const u=createProxyFunction$1(e);return setPrivateThreadProps$1(u,e,o,i)}else if(n.type==="module"){const u=createProxyModule$1(e,n.methods);return setPrivateThreadProps$1(u,e,o,i)}else{const u=n.type;throw Error(`Worker init message states unexpected type of expose(): ${u}`)}})}const BlobWorker$1=getWorkerImplementation$3().blob,Worker$1$1=getWorkerImplementation$3().default,isWorkerRuntime$2$1=function e(){const t=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!t)},postMessageToMaster$2$1=function e(t,r){self.postMessage(t,r)},subscribeToMasterMessages$2$1=function e(t){const r=s=>{t(s.data)},n=()=>{self.removeEventListener("message",r)};return self.addEventListener("message",r),n},WebWorkerImplementation$1={isWorkerRuntime:isWorkerRuntime$2$1,postMessageToMaster:postMessageToMaster$2$1,subscribeToMasterMessages:subscribeToMasterMessages$2$1};typeof self>"u"&&(global.self=global);const isWorkerRuntime$1$1=function e(){return!!(typeof self<"u"&&self.postMessage)},postMessageToMaster$1$1=function e(t){self.postMessage(t)};let muxingHandlerSetUp$1=!1;const messageHandlers$1=new Set,subscribeToMasterMessages$1$1=function e(t){return muxingHandlerSetUp$1||(self.addEventListener("message",(r=>{messageHandlers$1.forEach(n=>n(r.data))})),muxingHandlerSetUp$1=!0),messageHandlers$1.add(t),()=>messageHandlers$1.delete(t)},TinyWorkerImplementation$1={isWorkerRuntime:isWorkerRuntime$1$1,postMessageToMaster:postMessageToMaster$1$1,subscribeToMasterMessages:subscribeToMasterMessages$1$1};let implementation$4;function selectImplementation$1(){return typeof __non_webpack_require__$1=="function"?__non_webpack_require__$1():eval("require")("worker_threads")}function getImplementation$1(){return implementation$4||(implementation$4=selectImplementation$1()),implementation$4}function assertMessagePort$1(e){if(!e)throw Error("Invariant violation: MessagePort to parent is not available.");return e}const isWorkerRuntime$5=function e(){return!getImplementation$1().isMainThread},postMessageToMaster$3=function e(t,r){assertMessagePort$1(getImplementation$1().parentPort).postMessage(t,r)},subscribeToMasterMessages$3=function e(t){const r=getImplementation$1().parentPort;if(!r)throw Error("Invariant violation: MessagePort to parent is not available.");const n=i=>{t(i)},s=()=>{assertMessagePort$1(r).off("message",n)};return assertMessagePort$1(r).on("message",n),s};function testImplementation$1(){getImplementation$1()}const WorkerThreadsImplementation$1={isWorkerRuntime:isWorkerRuntime$5,postMessageToMaster:postMessageToMaster$3,subscribeToMasterMessages:subscribeToMasterMessages$3,testImplementation:testImplementation$1},runningInNode$2=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function selectNodeImplementation$1(){try{return WorkerThreadsImplementation$1.testImplementation(),WorkerThreadsImplementation$1}catch{return TinyWorkerImplementation$1}}const Implementation$1=runningInNode$2?selectNodeImplementation$1():WebWorkerImplementation$1;Implementation$1.isWorkerRuntime;function postUncaughtErrorMessage$1(e){try{const t={type:WorkerMessageType$1.uncaughtError,error:serialize$1(e)};Implementation$1.postMessageToMaster(t)}catch(t){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,t,`
Original error:`,e)}}typeof self<"u"&&typeof self.addEventListener=="function"&&Implementation$1.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>postUncaughtErrorMessage$1(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&typeof t.message=="string"&&setTimeout(()=>postUncaughtErrorMessage$1(t),250)}));typeof process<"u"&&typeof process.on=="function"&&Implementation$1.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>postUncaughtErrorMessage$1(e),250)}),process.on("unhandledRejection",e=>{e&&typeof e.message=="string"&&setTimeout(()=>postUncaughtErrorMessage$1(e),250)}));var ok$1$1=function(e){return new Ok$1$1(e)},err$1$1=function(e){return new Err$1$1(e)},Ok$1$1=(function(){function e(t){var r=this;this.value=t,this.match=function(n,s){return n(r.value)}}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$1$1(t(this.value))},e.prototype.mapErr=function(t){return ok$1$1(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$1$1.fromPromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype._unsafeUnwrap=function(){return this.value},e.prototype._unsafeUnwrapErr=function(){throw new Error("Called `_unsafeUnwrapErr` on an Ok")},e})(),Err$1$1=(function(){function e(t){var r=this;this.error=t,this.match=function(n,s){return s(r.error)}}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$1$1(this.error)},e.prototype.mapErr=function(t){return err$1$1(t(this.error))},e.prototype.andThen=function(t){return err$1$1(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$1$1(this.error)},e.prototype.asyncMap=function(t){return errAsync$1$1(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype._unsafeUnwrap=function(){throw new Error("Called `_unsafeUnwrap` on an Err")},e.prototype._unsafeUnwrapErr=function(){return this.error},e})();function __awaiter$1$1(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(m){try{d(n.next(m))}catch(T){o(T)}}function c(m){try{d(n.throw(m))}catch(T){o(T)}}function d(m){m.done?i(m.value):s(m.value).then(u,c)}d((n=n.apply(e,[])).next())})}function __generator$1$1(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(m){return c([d,m])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var logWarning$1=function(e){if(typeof process!="object"){var t="\x1B[33m%s\x1B[0m",r=["[neverthrow]",e].join(" - ");console.warn(t,r)}},ResultAsync$1$1=(function(){function e(t){this._promise=t}return e.fromPromise=function(t,r){var n=t.then(function(i){return new Ok$1$1(i)});if(r)n=n.catch(function(i){return new Err$1$1(r(i))});else{var s=["`fromPromise` called without a promise rejection handler","Ensure that you are catching promise rejections yourself, or pass a second argument to `fromPromise` to convert a caught exception into an `Err` instance"].join(" - ");logWarning$1(s)}return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1$1(r,void 0,void 0,function(){var s;return __generator$1$1(this,function(i){switch(i.label){case 0:return n.isErr()?[2,new Err$1$1(n.error)]:(s=Ok$1$1.bind,[4,t(n.value)]);case 1:return[2,new(s.apply(Ok$1$1,[void 0,i.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1$1(r,void 0,void 0,function(){var s;return __generator$1$1(this,function(i){switch(i.label){case 0:return n.isOk()?[2,new Ok$1$1(n.value)]:(s=Err$1$1.bind,[4,t(n.error)]);case 1:return[2,new(s.apply(Err$1$1,[void 0,i.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$1$1(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t){return this._promise.then(t)},e})(),errAsync$1$1=function(e){return new ResultAsync$1$1(Promise.resolve(new Err$1$1(e)))},__defProp$1=Object.defineProperty,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(e,t,r)=>t in e?__defProp$1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues$1=(e,t)=>{for(var r in t||(t={}))__hasOwnProp$1.call(t,r)&&__defNormalProp$1(e,r,t[r]);if(__getOwnPropSymbols$1)for(var r of __getOwnPropSymbols$1(t))__propIsEnum$1.call(t,r)&&__defNormalProp$1(e,r,t[r]);return e};function createInputValue$1(e,t,r){let n=t;const s={},i=()=>n,o=u=>{var c;u!==n&&(n=u,(c=s.onSet)==null||c.call(s))};return{varId:e,get:i,set:o,reset:()=>{o(t)},callbacks:s}}var Series$1=class Um{constructor(t,r){this.varId=t,this.points=r}getValueAtTime(t){var r;return(r=this.points.find(n=>n.x===t))==null?void 0:r.y}copy(){const t=this.points.map(r=>__spreadValues$1({},r));return new Um(this.varId,t)}},Outputs$1=class{constructor(t,r,n,s=1){this.varIds=t,this.startTime=r,this.endTime=n,this.saveFreq=s,this.seriesLength=Math.round((n-r)/s)+1,this.varSeries=new Array(t.length);for(let i=0;i<t.length;i++){const o=new Array(this.seriesLength);for(let c=0;c<this.seriesLength;c++)o[c]={x:r+c*s,y:0};const u=t[i];this.varSeries[i]=new Series$1(u,o)}}setVarSpecs(t){if(t.length!==this.varIds.length)throw new Error("Length of output varSpecs must match that of varIds");this.varSpecs=t}updateFromBuffer(t,r){const n=parseOutputsBuffer$1(t,r,this);return n.isOk()?ok$1$1(void 0):err$1$1(n.error)}getSeriesForVar(t){const r=this.varIds.indexOf(t);if(r>=0)return this.varSeries[r]}};function parseOutputsBuffer$1(e,t,r){const n=r.varIds.length,s=r.seriesLength;if(t<s||e.length<n*s)return err$1$1("invalid-point-count");for(let i=0;i<n;i++){const o=r.varSeries[i];let u=t*i;for(let c=0;c<s;c++)o.points[c].y=validateNumber$1(e[u]),u++}return ok$1$1(r)}function validateNumber$1(e){if(!isNaN(e)&&e>-1e32)return e}function getEncodedVarIndicesLength$1(e){var t;let r=1;for(const n of e){r+=2;const s=((t=n.subscriptIndices)==null?void 0:t.length)||0;r+=s}return r}function encodeVarIndices$1(e,t){let r=0;t[r++]=e.length;for(const n of e){t[r++]=n.varIndex;const s=n.subscriptIndices,i=s?.length||0;t[r++]=i;for(let o=0;o<i;o++)t[r++]=s[o]}}function getEncodedLookupBufferLengths$1(e){var t,r;let n=1,s=0;for(const i of e){const o=i.varRef.varSpec;if(o===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");n+=2;const u=((t=o.subscriptIndices)==null?void 0:t.length)||0;n+=u,n+=2,s+=((r=i.points)==null?void 0:r.length)||0}return{lookupIndicesLength:n,lookupsLength:s}}function encodeLookups$1(e,t,r){let n=0;t[n++]=e.length;let s=0;for(const i of e){const o=i.varRef.varSpec;t[n++]=o.varIndex;const u=o.subscriptIndices,c=u?.length||0;t[n++]=c;for(let d=0;d<c;d++)t[n++]=u[d];i.points!==void 0?(t[n++]=s,t[n++]=i.points.length,r?.set(i.points,s),s+=i.points.length):(t[n++]=-1,t[n++]=0)}}function decodeLookups$1(e,t){const r=[];let n=0;const s=e[n++];for(let i=0;i<s;i++){const o=e[n++],u=e[n++],c=u>0?Array(u):void 0;for(let C=0;C<u;C++)c[C]=e[n++];const d=e[n++],m=e[n++],T={varIndex:o,subscriptIndices:c};let $;d>=0?t?$=t.slice(d,d+m):$=new Float64Array(0):$=void 0,r.push({varRef:{varSpec:T},points:$})}return r}var ModelListing$1=class{constructor(t){this.varSpecs=new Map;const r=new Map;for(const i of t.dimensions){const o=i.id,u=[];for(let c=0;c<i.subIds.length;c++)u.push({id:i.subIds[c],index:c});r.set(o,{id:o,subscripts:u})}function n(i){const o=r.get(i);if(o===void 0)throw new Error(`No dimension info found for id=${i}`);return o}const s=new Set;for(const i of t.variables){const o=varIdWithoutSubscripts$1(i.id);if(!s.has(o)){const u=(i.dimIds||[]).map(n);if(u.length>0){const c=[];for(const m of u)c.push(m.subscripts);const d=cartesianProductOf$1(c);for(const m of d){const T=m.map(D=>D.id).join(","),$=m.map(D=>D.index),C=`${o}[${T}]`;this.varSpecs.set(C,{varIndex:i.index,subscriptIndices:$})}}else this.varSpecs.set(o,{varIndex:i.index});s.add(o)}}}getSpecForVarId(t){return this.varSpecs.get(t)}getSpecForVarName(t){const r=sdeVarIdForVensimVarName$1(t);return this.varSpecs.get(r)}deriveOutputs(t,r){const n=[];for(const i of r){const o=this.varSpecs.get(i);o!==void 0?n.push(o):console.warn(`WARNING: No output var spec found for id=${i}`)}const s=new Outputs$1(r,t.startTime,t.endTime,t.saveFreq);return s.varSpecs=n,s}};function varIdWithoutSubscripts$1(e){const t=e.indexOf("[");return t>=0?e.substring(0,t):e}function cartesianProductOf$1(e){return e.reduce((t,r)=>t.map(n=>r.map(s=>n.concat([s]))).reduce((n,s)=>n.concat(s),[]),[[]])}function sdeVarIdForVensimName$1(e){return"_"+e.trim().replace(/"/g,"_").replace(/\s+!$/g,"!").replace(/\s/g,"_").replace(/,/g,"_").replace(/-/g,"_").replace(/\./g,"_").replace(/\$/g,"_").replace(/'/g,"_").replace(/&/g,"_").replace(/%/g,"_").replace(/\//g,"_").replace(/\|/g,"_").toLowerCase()}function sdeVarIdForVensimVarName$1(e){const t=e.match(/([^[]+)(?:\[([^\]]+)\])?/);if(!t)throw new Error(`Invalid Vensim name: ${e}`);let r=sdeVarIdForVensimName$1(t[1]);if(t[2]){const n=t[2].split(",").map(s=>sdeVarIdForVensimName$1(s));r+=`[${n.join(",")}]`}return r}function resolveVarRef$1(e,t,r){if(!t.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${r} variable references by name or identifier when model listing is unavailable`);if(t.varId){const n=e?.getSpecForVarId(t.varId);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varId=${t.varId}`)}else{const n=e?.getSpecForVarName(t.varName);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varName='${t.varId}'`)}}}var headerLengthInElements$1=16,extrasLengthInElements$1=1,Int32Section$1=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(t,r,n){this.view=n>0?new Int32Array(t,r,n):void 0,this.offsetInBytes=r,this.lengthInElements=n}},Float64Section$1=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(t,r,n){this.view=n>0?new Float64Array(t,r,n):void 0,this.offsetInBytes=r,this.lengthInElements=n}},BufferedRunModelParams$1=class{constructor(t){this.listing=t,this.header=new Int32Section$1,this.extras=new Float64Section$1,this.inputs=new Float64Section$1,this.outputs=new Float64Section$1,this.outputIndices=new Int32Section$1,this.lookups=new Float64Section$1,this.lookupIndices=new Int32Section$1}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(t,r){this.inputs.lengthInElements!==0&&((t===void 0||t.length<this.inputs.lengthInElements)&&(t=r(this.inputs.lengthInElements)),t.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(t,r){this.outputIndices.lengthInElements!==0&&((t===void 0||t.length<this.outputIndices.lengthInElements)&&(t=r(this.outputIndices.lengthInElements)),t.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(t){this.outputs.view!==void 0&&(t.length>this.outputs.view.length?this.outputs.view.set(t.subarray(0,this.outputs.view.length)):this.outputs.view.set(t))}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups$1(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(t){this.extras.view[0]=t}finalizeOutputs(t){this.outputs.view&&t.updateFromBuffer(this.outputs.view,t.seriesLength),t.runTimeInMillis=this.getElapsedTime()}updateFromParams(t,r,n){const s=t.length,i=r.varIds.length*r.seriesLength;let o;const u=r.varSpecs;u!==void 0&&u.length>0?o=getEncodedVarIndicesLength$1(u):o=0;let c,d;if(n?.lookups!==void 0&&n.lookups.length>0){for(const re of n.lookups)resolveVarRef$1(this.listing,re.varRef,"lookup");const J=getEncodedLookupBufferLengths$1(n.lookups);c=J.lookupsLength,d=J.lookupIndicesLength}else c=0,d=0;let m=0;function T(J,re){const ve=m,ye=J==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,Se=Math.round(re*ye),Ne=Math.ceil(Se/8)*8;return m+=Ne,ve}const $=T("int32",headerLengthInElements$1),C=T("float64",extrasLengthInElements$1),D=T("float64",s),F=T("float64",i),g=T("int32",o),q=T("float64",c),x=T("int32",d),P=m;if(this.encoded===void 0||this.encoded.byteLength<P){const J=Math.ceil(P*1.2);this.encoded=new ArrayBuffer(J),this.header.update(this.encoded,$,headerLengthInElements$1)}const K=this.header.view;let L=0;K[L++]=C,K[L++]=extrasLengthInElements$1,K[L++]=D,K[L++]=s,K[L++]=F,K[L++]=i,K[L++]=g,K[L++]=o,K[L++]=q,K[L++]=c,K[L++]=x,K[L++]=d,this.inputs.update(this.encoded,D,s),this.extras.update(this.encoded,C,extrasLengthInElements$1),this.outputs.update(this.encoded,F,i),this.outputIndices.update(this.encoded,g,o),this.lookups.update(this.encoded,q,c),this.lookupIndices.update(this.encoded,x,d);const B=this.inputs.view;for(let J=0;J<t.length;J++){const re=t[J];typeof re=="number"?B[J]=re:B[J]=re.get()}this.outputIndices.view&&encodeVarIndices$1(u,this.outputIndices.view),d>0&&encodeLookups$1(n.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(t){const r=headerLengthInElements$1*Int32Array.BYTES_PER_ELEMENT;if(t.byteLength<r)throw new Error("Buffer must be long enough to contain header section");this.encoded=t,this.header.update(this.encoded,0,headerLengthInElements$1);const n=this.header.view;let s=0;const i=n[s++],o=n[s++],u=n[s++],c=n[s++],d=n[s++],m=n[s++],T=n[s++],$=n[s++],C=n[s++],D=n[s++],F=n[s++],g=n[s++],q=o*Float64Array.BYTES_PER_ELEMENT,x=c*Float64Array.BYTES_PER_ELEMENT,P=m*Float64Array.BYTES_PER_ELEMENT,K=$*Int32Array.BYTES_PER_ELEMENT,L=D*Float64Array.BYTES_PER_ELEMENT,B=g*Int32Array.BYTES_PER_ELEMENT,J=r+q+x+P+K+L+B;if(t.byteLength<J)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,i,o),this.inputs.update(this.encoded,u,c),this.outputs.update(this.encoded,d,m),this.outputIndices.update(this.encoded,T,$),this.lookups.update(this.encoded,C,D),this.lookupIndices.update(this.encoded,F,g)}};async function spawnAsyncModelRunner$1(e){return e.path?spawnAsyncModelRunnerWithWorker$1(new Worker$1$1(e.path)):spawnAsyncModelRunnerWithWorker$1(BlobWorker$1.fromText(e.source))}async function spawnAsyncModelRunnerWithWorker$1(e){const t=await spawn$1(e),r=await t.initModel(),n=r.modelListing?new ModelListing$1(r.modelListing):void 0,s=new BufferedRunModelParams$1(n);let i=!1,o=!1;return{createOutputs:()=>new Outputs$1(r.outputVarIds,r.startTime,r.endTime,r.saveFreq),runModel:async(u,c,d)=>{if(o)throw new Error("Async model runner has already been terminated");if(i)throw new Error("Async model runner only supports one `runModel` call at a time");i=!0,s.updateFromParams(u,c,d);let m;try{m=await t.runModel(Transfer$1(s.getEncodedBuffer()))}finally{i=!1}return s.updateFromEncodedBuffer(m),s.finalizeOutputs(c),c},terminate:()=>o?Promise.resolve():(o=!0,Thread$1.terminate(t))}}var assertNever$1={},hasRequiredAssertNever$1;function requireAssertNever$1(){if(hasRequiredAssertNever$1)return assertNever$1;hasRequiredAssertNever$1=1,Object.defineProperty(assertNever$1,"__esModule",{value:!0}),assertNever$1.assertNever=e;function e(t,r){if(typeof r=="string")throw new Error(r);if(typeof r=="function")throw new Error(r(t));if(r)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}return assertNever$1.default=e,assertNever$1}var assertNeverExports$1=requireAssertNever$1(),ajv$1={exports:{}},core$1$1={},validate$1={},boolSchema$1={},errors$1={},codegen$1={},code$1$1={},hasRequiredCode$1$1;function requireCode$1$1(){return hasRequiredCode$1$1||(hasRequiredCode$1$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(x){if(super(),!e.IDENTIFIER.test(x))throw new Error("CodeGen: name must be a valid identifier");this.str=x}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(x){super(),this._items=typeof x=="string"?[x]:x}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const x=this._items[0];return x===""||x==='""'}get str(){var x;return(x=this._str)!==null&&x!==void 0?x:this._str=this._items.reduce((P,K)=>`${P}${K}`,"")}get names(){var x;return(x=this._names)!==null&&x!==void 0?x:this._names=this._items.reduce((P,K)=>(K instanceof r&&(P[K.str]=(P[K.str]||0)+1),P),{})}}e._Code=n,e.nil=new n("");function s(q,...x){const P=[q[0]];let K=0;for(;K<x.length;)u(P,x[K]),P.push(q[++K]);return new n(P)}e._=s;const i=new n("+");function o(q,...x){const P=[C(q[0])];let K=0;for(;K<x.length;)P.push(i),u(P,x[K]),P.push(i,C(q[++K]));return c(P),new n(P)}e.str=o;function u(q,x){x instanceof n?q.push(...x._items):x instanceof r?q.push(x):q.push(T(x))}e.addCodeArg=u;function c(q){let x=1;for(;x<q.length-1;){if(q[x]===i){const P=d(q[x-1],q[x+1]);if(P!==void 0){q.splice(x-1,3,P);continue}q[x++]="+"}x++}}function d(q,x){if(x==='""')return q;if(q==='""')return x;if(typeof q=="string")return x instanceof r||q[q.length-1]!=='"'?void 0:typeof x!="string"?`${q.slice(0,-1)}${x}"`:x[0]==='"'?q.slice(0,-1)+x.slice(1):void 0;if(typeof x=="string"&&x[0]==='"'&&!(q instanceof r))return`"${q}${x.slice(1)}`}function m(q,x){return x.emptyStr()?q:q.emptyStr()?x:o`${q}${x}`}e.strConcat=m;function T(q){return typeof q=="number"||typeof q=="boolean"||q===null?q:C(Array.isArray(q)?q.join(","):q)}function $(q){return new n(C(q))}e.stringify=$;function C(q){return JSON.stringify(q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=C;function D(q){return typeof q=="string"&&e.IDENTIFIER.test(q)?new n(`.${q}`):s`[${q}]`}e.getProperty=D;function F(q){if(typeof q=="string"&&e.IDENTIFIER.test(q))return new n(`${q}`);throw new Error(`CodeGen: invalid export name: ${q}, use explicit $id name mapping`)}e.getEsmExportName=F;function g(q){return new n(q.toString())}e.regexpCode=g})(code$1$1)),code$1$1}var scope$1={},hasRequiredScope$1;function requireScope$1(){return hasRequiredScope$1||(hasRequiredScope$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=requireCode$1$1();class r extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:d,parent:m}={}){this._names={},this._prefixes=d,this._parent=m}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const m=this._names[d]||this._nameGroup(d);return`${d}${m.index++}`}_nameGroup(d){var m,T;if(!((T=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||T===void 0)&&T.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=s;class i extends t.Name{constructor(d,m){super(m),this.prefix=d}setValue(d,{property:m,itemIndex:T}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(m)}[${T}]`}}e.ValueScopeName=i;const o=(0,t._)`\n`;class u extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:t.nil}}get(){return this._scope}name(d){return new i(d,this._newName(d))}value(d,m){var T;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(d),{prefix:C}=$,D=(T=m.key)!==null&&T!==void 0?T:m.ref;let F=this._values[C];if(F){const x=F.get(D);if(x)return x}else F=this._values[C]=new Map;F.set(D,$);const g=this._scope[C]||(this._scope[C]=[]),q=g.length;return g[q]=m.ref,$.setValue(m,{property:C,itemIndex:q}),$}getValue(d,m){const T=this._values[d];if(T)return T.get(m)}scopeRefs(d,m=this._values){return this._reduceValues(m,T=>{if(T.scopePath===void 0)throw new Error(`CodeGen: name "${T}" has no value`);return(0,t._)`${d}${T.scopePath}`})}scopeCode(d=this._values,m,T){return this._reduceValues(d,$=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},m,T)}_reduceValues(d,m,T={},$){let C=t.nil;for(const D in d){const F=d[D];if(!F)continue;const g=T[D]=T[D]||new Map;F.forEach(q=>{if(g.has(q))return;g.set(q,n.Started);let x=m(q);if(x){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;C=(0,t._)`${C}${P} ${q} = ${x};${this.opts._n}`}else if(x=$?.(q))C=(0,t._)`${C}${x}${this.opts._n}`;else throw new r(q);g.set(q,n.Completed)})}return C}}e.ValueScope=u})(scope$1)),scope$1}var hasRequiredCodegen$1;function requireCodegen$1(){return hasRequiredCodegen$1||(hasRequiredCodegen$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=requireCode$1$1(),r=requireScope$1();var n=requireCode$1$1();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=requireScope$1();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(G,X){return this}}class o extends i{constructor(G,X,ce){super(),this.varKind=G,this.name=X,this.rhs=ce}render({es5:G,_n:X}){const ce=G?r.varKinds.var:this.varKind,De=this.rhs===void 0?"":` = ${this.rhs}`;return`${ce} ${this.name}${De};`+X}optimizeNames(G,X){if(G[this.name.str])return this.rhs&&(this.rhs=Ar(this.rhs,G,X)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends i{constructor(G,X,ce){super(),this.lhs=G,this.rhs=X,this.sideEffects=ce}render({_n:G}){return`${this.lhs} = ${this.rhs};`+G}optimizeNames(G,X){if(!(this.lhs instanceof t.Name&&!G[this.lhs.str]&&!this.sideEffects))return this.rhs=Ar(this.rhs,G,X),this}get names(){const G=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Ke(G,this.rhs)}}class c extends u{constructor(G,X,ce,De){super(G,ce,De),this.op=X}render({_n:G}){return`${this.lhs} ${this.op}= ${this.rhs};`+G}}class d extends i{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`${this.label}:`+G}}class m extends i{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`break${this.label?` ${this.label}`:""};`+G}}class T extends i{constructor(G){super(),this.error=G}render({_n:G}){return`throw ${this.error};`+G}get names(){return this.error.names}}class $ extends i{constructor(G){super(),this.code=G}render({_n:G}){return`${this.code};`+G}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(G,X){return this.code=Ar(this.code,G,X),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class C extends i{constructor(G=[]){super(),this.nodes=G}render(G){return this.nodes.reduce((X,ce)=>X+ce.render(G),"")}optimizeNodes(){const{nodes:G}=this;let X=G.length;for(;X--;){const ce=G[X].optimizeNodes();Array.isArray(ce)?G.splice(X,1,...ce):ce?G[X]=ce:G.splice(X,1)}return G.length>0?this:void 0}optimizeNames(G,X){const{nodes:ce}=this;let De=ce.length;for(;De--;){const qe=ce[De];qe.optimizeNames(G,X)||(hi(G,qe.names),ce.splice(De,1))}return ce.length>0?this:void 0}get names(){return this.nodes.reduce((G,X)=>Ne(G,X.names),{})}}class D extends C{render(G){return"{"+G._n+super.render(G)+"}"+G._n}}class F extends C{}class g extends D{}g.kind="else";class q extends D{constructor(G,X){super(X),this.condition=G}render(G){let X=`if(${this.condition})`+super.render(G);return this.else&&(X+="else "+this.else.render(G)),X}optimizeNodes(){super.optimizeNodes();const G=this.condition;if(G===!0)return this.nodes;let X=this.else;if(X){const ce=X.optimizeNodes();X=this.else=Array.isArray(ce)?new g(ce):ce}if(X)return G===!1?X instanceof q?X:X.nodes:this.nodes.length?this:new q(gi(G),X instanceof q?[X]:X.nodes);if(!(G===!1||!this.nodes.length))return this}optimizeNames(G,X){var ce;if(this.else=(ce=this.else)===null||ce===void 0?void 0:ce.optimizeNames(G,X),!!(super.optimizeNames(G,X)||this.else))return this.condition=Ar(this.condition,G,X),this}get names(){const G=super.names;return Ke(G,this.condition),this.else&&Ne(G,this.else.names),G}}q.kind="if";class x extends D{}x.kind="for";class P extends x{constructor(G){super(),this.iteration=G}render(G){return`for(${this.iteration})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iteration=Ar(this.iteration,G,X),this}get names(){return Ne(super.names,this.iteration.names)}}class K extends x{constructor(G,X,ce,De){super(),this.varKind=G,this.name=X,this.from=ce,this.to=De}render(G){const X=G.es5?r.varKinds.var:this.varKind,{name:ce,from:De,to:qe}=this;return`for(${X} ${ce}=${De}; ${ce}<${qe}; ${ce}++)`+super.render(G)}get names(){const G=Ke(super.names,this.from);return Ke(G,this.to)}}class L extends x{constructor(G,X,ce,De){super(),this.loop=G,this.varKind=X,this.name=ce,this.iterable=De}render(G){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iterable=Ar(this.iterable,G,X),this}get names(){return Ne(super.names,this.iterable.names)}}class B extends D{constructor(G,X,ce){super(),this.name=G,this.args=X,this.async=ce}render(G){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(G)}}B.kind="func";class J extends C{render(G){return"return "+super.render(G)}}J.kind="return";class re extends D{render(G){let X="try"+super.render(G);return this.catch&&(X+=this.catch.render(G)),this.finally&&(X+=this.finally.render(G)),X}optimizeNodes(){var G,X;return super.optimizeNodes(),(G=this.catch)===null||G===void 0||G.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(G,X){var ce,De;return super.optimizeNames(G,X),(ce=this.catch)===null||ce===void 0||ce.optimizeNames(G,X),(De=this.finally)===null||De===void 0||De.optimizeNames(G,X),this}get names(){const G=super.names;return this.catch&&Ne(G,this.catch.names),this.finally&&Ne(G,this.finally.names),G}}class ve extends D{constructor(G){super(),this.error=G}render(G){return`catch(${this.error})`+super.render(G)}}ve.kind="catch";class ye extends D{render(G){return"finally"+super.render(G)}}ye.kind="finally";class Se{constructor(G,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=G,this._scope=new r.Scope({parent:G}),this._nodes=[new F]}toString(){return this._root.render(this.opts)}name(G){return this._scope.name(G)}scopeName(G){return this._extScope.name(G)}scopeValue(G,X){const ce=this._extScope.value(G,X);return(this._values[ce.prefix]||(this._values[ce.prefix]=new Set)).add(ce),ce}getScopeValue(G,X){return this._extScope.getValue(G,X)}scopeRefs(G){return this._extScope.scopeRefs(G,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(G,X,ce,De){const qe=this._scope.toName(X);return ce!==void 0&&De&&(this._constants[qe.str]=ce),this._leafNode(new o(G,qe,ce)),qe}const(G,X,ce){return this._def(r.varKinds.const,G,X,ce)}let(G,X,ce){return this._def(r.varKinds.let,G,X,ce)}var(G,X,ce){return this._def(r.varKinds.var,G,X,ce)}assign(G,X,ce){return this._leafNode(new u(G,X,ce))}add(G,X){return this._leafNode(new c(G,e.operators.ADD,X))}code(G){return typeof G=="function"?G():G!==t.nil&&this._leafNode(new $(G)),this}object(...G){const X=["{"];for(const[ce,De]of G)X.length>1&&X.push(","),X.push(ce),(ce!==De||this.opts.es5)&&(X.push(":"),(0,t.addCodeArg)(X,De));return X.push("}"),new t._Code(X)}if(G,X,ce){if(this._blockNode(new q(G)),X&&ce)this.code(X).else().code(ce).endIf();else if(X)this.code(X).endIf();else if(ce)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(G){return this._elseNode(new q(G))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(q,g)}_for(G,X){return this._blockNode(G),X&&this.code(X).endFor(),this}for(G,X){return this._for(new P(G),X)}forRange(G,X,ce,De,qe=this.opts.es5?r.varKinds.var:r.varKinds.let){const bt=this._scope.toName(G);return this._for(new K(qe,bt,X,ce),()=>De(bt))}forOf(G,X,ce,De=r.varKinds.const){const qe=this._scope.toName(G);if(this.opts.es5){const bt=X instanceof t.Name?X:this.var("_arr",X);return this.forRange("_i",0,(0,t._)`${bt}.length`,vr=>{this.var(qe,(0,t._)`${bt}[${vr}]`),ce(qe)})}return this._for(new L("of",De,qe,X),()=>ce(qe))}forIn(G,X,ce,De=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(G,(0,t._)`Object.keys(${X})`,ce);const qe=this._scope.toName(G);return this._for(new L("in",De,qe,X),()=>ce(qe))}endFor(){return this._endBlockNode(x)}label(G){return this._leafNode(new d(G))}break(G){return this._leafNode(new m(G))}return(G){const X=new J;if(this._blockNode(X),this.code(G),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(J)}try(G,X,ce){if(!X&&!ce)throw new Error('CodeGen: "try" without "catch" and "finally"');const De=new re;if(this._blockNode(De),this.code(G),X){const qe=this.name("e");this._currNode=De.catch=new ve(qe),X(qe)}return ce&&(this._currNode=De.finally=new ye,this.code(ce)),this._endBlockNode(ve,ye)}throw(G){return this._leafNode(new T(G))}block(G,X){return this._blockStarts.push(this._nodes.length),G&&this.code(G).endBlock(X),this}endBlock(G){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const ce=this._nodes.length-X;if(ce<0||G!==void 0&&ce!==G)throw new Error(`CodeGen: wrong number of nodes: ${ce} vs ${G} expected`);return this._nodes.length=X,this}func(G,X=t.nil,ce,De){return this._blockNode(new B(G,X,ce)),De&&this.code(De).endFunc(),this}endFunc(){return this._endBlockNode(B)}optimize(G=1){for(;G-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(G){return this._currNode.nodes.push(G),this}_blockNode(G){this._currNode.nodes.push(G),this._nodes.push(G)}_endBlockNode(G,X){const ce=this._currNode;if(ce instanceof G||X&&ce instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${G.kind}/${X.kind}`:G.kind}"`)}_elseNode(G){const X=this._currNode;if(!(X instanceof q))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=G,this}get _root(){return this._nodes[0]}get _currNode(){const G=this._nodes;return G[G.length-1]}set _currNode(G){const X=this._nodes;X[X.length-1]=G}}e.CodeGen=Se;function Ne(ue,G){for(const X in G)ue[X]=(ue[X]||0)+(G[X]||0);return ue}function Ke(ue,G){return G instanceof t._CodeOrName?Ne(ue,G.names):ue}function Ar(ue,G,X){if(ue instanceof t.Name)return ce(ue);if(!De(ue))return ue;return new t._Code(ue._items.reduce((qe,bt)=>(bt instanceof t.Name&&(bt=ce(bt)),bt instanceof t._Code?qe.push(...bt._items):qe.push(bt),qe),[]));function ce(qe){const bt=X[qe.str];return bt===void 0||G[qe.str]!==1?qe:(delete G[qe.str],bt)}function De(qe){return qe instanceof t._Code&&qe._items.some(bt=>bt instanceof t.Name&&G[bt.str]===1&&X[bt.str]!==void 0)}}function hi(ue,G){for(const X in G)ue[X]=(ue[X]||0)-(G[X]||0)}function gi(ue){return typeof ue=="boolean"||typeof ue=="number"||ue===null?!ue:(0,t._)`!${ke(ue)}`}e.not=gi;const Gi=ie(e.operators.AND);function bs(...ue){return ue.reduce(Gi)}e.and=bs;const ua=ie(e.operators.OR);function Re(...ue){return ue.reduce(ua)}e.or=Re;function ie(ue){return(G,X)=>G===t.nil?X:X===t.nil?G:(0,t._)`${ke(G)} ${ue} ${ke(X)}`}function ke(ue){return ue instanceof t.Name?ue:(0,t._)`(${ue})`}})(codegen$1)),codegen$1}var util$1={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1,Object.defineProperty(util$1,"__esModule",{value:!0}),util$1.checkStrictMode=util$1.getErrorPath=util$1.Type=util$1.useFunc=util$1.setEvaluated=util$1.evaluatedPropsToName=util$1.mergeEvaluated=util$1.eachItem=util$1.unescapeJsonPointer=util$1.escapeJsonPointer=util$1.escapeFragment=util$1.unescapeFragment=util$1.schemaRefOrVal=util$1.schemaHasRulesButRef=util$1.schemaHasRules=util$1.checkUnknownRules=util$1.alwaysValidSchema=util$1.toHash=void 0;const e=requireCodegen$1(),t=requireCode$1$1();function r(L){const B={};for(const J of L)B[J]=!0;return B}util$1.toHash=r;function n(L,B){return typeof B=="boolean"?B:Object.keys(B).length===0?!0:(s(L,B),!i(B,L.self.RULES.all))}util$1.alwaysValidSchema=n;function s(L,B=L.schema){const{opts:J,self:re}=L;if(!J.strictSchema||typeof B=="boolean")return;const ve=re.RULES.keywords;for(const ye in B)ve[ye]||K(L,`unknown keyword: "${ye}"`)}util$1.checkUnknownRules=s;function i(L,B){if(typeof L=="boolean")return!L;for(const J in L)if(B[J])return!0;return!1}util$1.schemaHasRules=i;function o(L,B){if(typeof L=="boolean")return!L;for(const J in L)if(J!=="$ref"&&B.all[J])return!0;return!1}util$1.schemaHasRulesButRef=o;function u({topSchemaRef:L,schemaPath:B},J,re,ve){if(!ve){if(typeof J=="number"||typeof J=="boolean")return J;if(typeof J=="string")return(0,e._)`${J}`}return(0,e._)`${L}${B}${(0,e.getProperty)(re)}`}util$1.schemaRefOrVal=u;function c(L){return T(decodeURIComponent(L))}util$1.unescapeFragment=c;function d(L){return encodeURIComponent(m(L))}util$1.escapeFragment=d;function m(L){return typeof L=="number"?`${L}`:L.replace(/~/g,"~0").replace(/\//g,"~1")}util$1.escapeJsonPointer=m;function T(L){return L.replace(/~1/g,"/").replace(/~0/g,"~")}util$1.unescapeJsonPointer=T;function $(L,B){if(Array.isArray(L))for(const J of L)B(J);else B(L)}util$1.eachItem=$;function C({mergeNames:L,mergeToName:B,mergeValues:J,resultToName:re}){return(ve,ye,Se,Ne)=>{const Ke=Se===void 0?ye:Se instanceof e.Name?(ye instanceof e.Name?L(ve,ye,Se):B(ve,ye,Se),Se):ye instanceof e.Name?(B(ve,Se,ye),ye):J(ye,Se);return Ne===e.Name&&!(Ke instanceof e.Name)?re(ve,Ke):Ke}}util$1.mergeEvaluated={props:C({mergeNames:(L,B,J)=>L.if((0,e._)`${J} !== true && ${B} !== undefined`,()=>{L.if((0,e._)`${B} === true`,()=>L.assign(J,!0),()=>L.assign(J,(0,e._)`${J} || {}`).code((0,e._)`Object.assign(${J}, ${B})`))}),mergeToName:(L,B,J)=>L.if((0,e._)`${J} !== true`,()=>{B===!0?L.assign(J,!0):(L.assign(J,(0,e._)`${J} || {}`),F(L,J,B))}),mergeValues:(L,B)=>L===!0?!0:{...L,...B},resultToName:D}),items:C({mergeNames:(L,B,J)=>L.if((0,e._)`${J} !== true && ${B} !== undefined`,()=>L.assign(J,(0,e._)`${B} === true ? true : ${J} > ${B} ? ${J} : ${B}`)),mergeToName:(L,B,J)=>L.if((0,e._)`${J} !== true`,()=>L.assign(J,B===!0?!0:(0,e._)`${J} > ${B} ? ${J} : ${B}`)),mergeValues:(L,B)=>L===!0?!0:Math.max(L,B),resultToName:(L,B)=>L.var("items",B)})};function D(L,B){if(B===!0)return L.var("props",!0);const J=L.var("props",(0,e._)`{}`);return B!==void 0&&F(L,J,B),J}util$1.evaluatedPropsToName=D;function F(L,B,J){Object.keys(J).forEach(re=>L.assign((0,e._)`${B}${(0,e.getProperty)(re)}`,!0))}util$1.setEvaluated=F;const g={};function q(L,B){return L.scopeValue("func",{ref:B,code:g[B.code]||(g[B.code]=new t._Code(B.code))})}util$1.useFunc=q;var x;(function(L){L[L.Num=0]="Num",L[L.Str=1]="Str"})(x||(util$1.Type=x={}));function P(L,B,J){if(L instanceof e.Name){const re=B===x.Num;return J?re?(0,e._)`"[" + ${L} + "]"`:(0,e._)`"['" + ${L} + "']"`:re?(0,e._)`"/" + ${L}`:(0,e._)`"/" + ${L}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return J?(0,e.getProperty)(L).toString():"/"+m(L)}util$1.getErrorPath=P;function K(L,B,J=L.opts.strictSchema){if(J){if(B=`strict mode: ${B}`,J===!0)throw new Error(B);L.self.logger.warn(B)}}return util$1.checkStrictMode=K,util$1}var names$1={},hasRequiredNames$1;function requireNames$1(){if(hasRequiredNames$1)return names$1;hasRequiredNames$1=1,Object.defineProperty(names$1,"__esModule",{value:!0});const e=requireCodegen$1(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return names$1.default=t,names$1}var hasRequiredErrors$1;function requireErrors$1(){return hasRequiredErrors$1||(hasRequiredErrors$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=requireCodegen$1(),r=requireUtil$1(),n=requireNames$1();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:q})=>q?(0,t.str)`"${g}" keyword must be ${q} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function s(g,q=e.keywordError,x,P){const{it:K}=g,{gen:L,compositeRule:B,allErrors:J}=K,re=T(g,q,x);P??(B||J)?c(L,re):d(K,(0,t._)`[${re}]`)}e.reportError=s;function i(g,q=e.keywordError,x){const{it:P}=g,{gen:K,compositeRule:L,allErrors:B}=P,J=T(g,q,x);c(K,J),L||B||d(P,n.default.vErrors)}e.reportExtraError=i;function o(g,q){g.assign(n.default.errors,q),g.if((0,t._)`${n.default.vErrors} !== null`,()=>g.if(q,()=>g.assign((0,t._)`${n.default.vErrors}.length`,q),()=>g.assign(n.default.vErrors,null)))}e.resetErrorsCount=o;function u({gen:g,keyword:q,schemaValue:x,data:P,errsCount:K,it:L}){if(K===void 0)throw new Error("ajv implementation error");const B=g.name("err");g.forRange("i",K,n.default.errors,J=>{g.const(B,(0,t._)`${n.default.vErrors}[${J}]`),g.if((0,t._)`${B}.instancePath === undefined`,()=>g.assign((0,t._)`${B}.instancePath`,(0,t.strConcat)(n.default.instancePath,L.errorPath))),g.assign((0,t._)`${B}.schemaPath`,(0,t.str)`${L.errSchemaPath}/${q}`),L.opts.verbose&&(g.assign((0,t._)`${B}.schema`,x),g.assign((0,t._)`${B}.data`,P))})}e.extendErrors=u;function c(g,q){const x=g.const("err",q);g.if((0,t._)`${n.default.vErrors} === null`,()=>g.assign(n.default.vErrors,(0,t._)`[${x}]`),(0,t._)`${n.default.vErrors}.push(${x})`),g.code((0,t._)`${n.default.errors}++`)}function d(g,q){const{gen:x,validateName:P,schemaEnv:K}=g;K.$async?x.throw((0,t._)`new ${g.ValidationError}(${q})`):(x.assign((0,t._)`${P}.errors`,q),x.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function T(g,q,x){const{createErrors:P}=g.it;return P===!1?(0,t._)`{}`:$(g,q,x)}function $(g,q,x={}){const{gen:P,it:K}=g,L=[C(K,x),D(g,x)];return F(g,q,L),P.object(...L)}function C({errorPath:g},{instancePath:q}){const x=q?(0,t.str)`${g}${(0,r.getErrorPath)(q,r.Type.Str)}`:g;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,x)]}function D({keyword:g,it:{errSchemaPath:q}},{schemaPath:x,parentSchema:P}){let K=P?q:(0,t.str)`${q}/${g}`;return x&&(K=(0,t.str)`${K}${(0,r.getErrorPath)(x,r.Type.Str)}`),[m.schemaPath,K]}function F(g,{params:q,message:x},P){const{keyword:K,data:L,schemaValue:B,it:J}=g,{opts:re,propertyName:ve,topSchemaRef:ye,schemaPath:Se}=J;P.push([m.keyword,K],[m.params,typeof q=="function"?q(g):q||(0,t._)`{}`]),re.messages&&P.push([m.message,typeof x=="function"?x(g):x]),re.verbose&&P.push([m.schema,B],[m.parentSchema,(0,t._)`${ye}${Se}`],[n.default.data,L]),ve&&P.push([m.propertyName,ve])}})(errors$1)),errors$1}var hasRequiredBoolSchema$1;function requireBoolSchema$1(){if(hasRequiredBoolSchema$1)return boolSchema$1;hasRequiredBoolSchema$1=1,Object.defineProperty(boolSchema$1,"__esModule",{value:!0}),boolSchema$1.boolOrEmptySchema=boolSchema$1.topBoolOrEmptySchema=void 0;const e=requireErrors$1(),t=requireCodegen$1(),r=requireNames$1(),n={message:"boolean schema is false"};function s(u){const{gen:c,schema:d,validateName:m}=u;d===!1?o(u,!1):typeof d=="object"&&d.$async===!0?c.return(r.default.data):(c.assign((0,t._)`${m}.errors`,null),c.return(!0))}boolSchema$1.topBoolOrEmptySchema=s;function i(u,c){const{gen:d,schema:m}=u;m===!1?(d.var(c,!1),o(u)):d.var(c,!0)}boolSchema$1.boolOrEmptySchema=i;function o(u,c){const{gen:d,data:m}=u,T={gen:d,keyword:"false schema",data:m,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,e.reportError)(T,n,void 0,c)}return boolSchema$1}var dataType$1={},rules$1={},hasRequiredRules$1;function requireRules$1(){if(hasRequiredRules$1)return rules$1;hasRequiredRules$1=1,Object.defineProperty(rules$1,"__esModule",{value:!0}),rules$1.getRules=rules$1.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(s){return typeof s=="string"&&t.has(s)}rules$1.isJSONType=r;function n(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}return rules$1.getRules=n,rules$1}var applicability$1={},hasRequiredApplicability$1;function requireApplicability$1(){if(hasRequiredApplicability$1)return applicability$1;hasRequiredApplicability$1=1,Object.defineProperty(applicability$1,"__esModule",{value:!0}),applicability$1.shouldUseRule=applicability$1.shouldUseGroup=applicability$1.schemaHasRulesForType=void 0;function e({schema:n,self:s},i){const o=s.RULES.types[i];return o&&o!==!0&&t(n,o)}applicability$1.schemaHasRulesForType=e;function t(n,s){return s.rules.some(i=>r(n,i))}applicability$1.shouldUseGroup=t;function r(n,s){var i;return n[s.keyword]!==void 0||((i=s.definition.implements)===null||i===void 0?void 0:i.some(o=>n[o]!==void 0))}return applicability$1.shouldUseRule=r,applicability$1}var hasRequiredDataType$1;function requireDataType$1(){if(hasRequiredDataType$1)return dataType$1;hasRequiredDataType$1=1,Object.defineProperty(dataType$1,"__esModule",{value:!0}),dataType$1.reportTypeError=dataType$1.checkDataTypes=dataType$1.checkDataType=dataType$1.coerceAndCheckDataType=dataType$1.getJSONTypes=dataType$1.getSchemaTypes=dataType$1.DataType=void 0;const e=requireRules$1(),t=requireApplicability$1(),r=requireErrors$1(),n=requireCodegen$1(),s=requireUtil$1();var i;(function(x){x[x.Correct=0]="Correct",x[x.Wrong=1]="Wrong"})(i||(dataType$1.DataType=i={}));function o(x){const P=u(x.type);if(P.includes("null")){if(x.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!P.length&&x.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');x.nullable===!0&&P.push("null")}return P}dataType$1.getSchemaTypes=o;function u(x){const P=Array.isArray(x)?x:x?[x]:[];if(P.every(e.isJSONType))return P;throw new Error("type must be JSONType or JSONType[]: "+P.join(","))}dataType$1.getJSONTypes=u;function c(x,P){const{gen:K,data:L,opts:B}=x,J=m(P,B.coerceTypes),re=P.length>0&&!(J.length===0&&P.length===1&&(0,t.schemaHasRulesForType)(x,P[0]));if(re){const ve=D(P,L,B.strictNumbers,i.Wrong);K.if(ve,()=>{J.length?T(x,P,J):g(x)})}return re}dataType$1.coerceAndCheckDataType=c;const d=new Set(["string","number","integer","boolean","null"]);function m(x,P){return P?x.filter(K=>d.has(K)||P==="array"&&K==="array"):[]}function T(x,P,K){const{gen:L,data:B,opts:J}=x,re=L.let("dataType",(0,n._)`typeof ${B}`),ve=L.let("coerced",(0,n._)`undefined`);J.coerceTypes==="array"&&L.if((0,n._)`${re} == 'object' && Array.isArray(${B}) && ${B}.length == 1`,()=>L.assign(B,(0,n._)`${B}[0]`).assign(re,(0,n._)`typeof ${B}`).if(D(P,B,J.strictNumbers),()=>L.assign(ve,B))),L.if((0,n._)`${ve} !== undefined`);for(const Se of K)(d.has(Se)||Se==="array"&&J.coerceTypes==="array")&&ye(Se);L.else(),g(x),L.endIf(),L.if((0,n._)`${ve} !== undefined`,()=>{L.assign(B,ve),$(x,ve)});function ye(Se){switch(Se){case"string":L.elseIf((0,n._)`${re} == "number" || ${re} == "boolean"`).assign(ve,(0,n._)`"" + ${B}`).elseIf((0,n._)`${B} === null`).assign(ve,(0,n._)`""`);return;case"number":L.elseIf((0,n._)`${re} == "boolean" || ${B} === null
              || (${re} == "string" && ${B} && ${B} == +${B})`).assign(ve,(0,n._)`+${B}`);return;case"integer":L.elseIf((0,n._)`${re} === "boolean" || ${B} === null
              || (${re} === "string" && ${B} && ${B} == +${B} && !(${B} % 1))`).assign(ve,(0,n._)`+${B}`);return;case"boolean":L.elseIf((0,n._)`${B} === "false" || ${B} === 0 || ${B} === null`).assign(ve,!1).elseIf((0,n._)`${B} === "true" || ${B} === 1`).assign(ve,!0);return;case"null":L.elseIf((0,n._)`${B} === "" || ${B} === 0 || ${B} === false`),L.assign(ve,null);return;case"array":L.elseIf((0,n._)`${re} === "string" || ${re} === "number"
              || ${re} === "boolean" || ${B} === null`).assign(ve,(0,n._)`[${B}]`)}}}function $({gen:x,parentData:P,parentDataProperty:K},L){x.if((0,n._)`${P} !== undefined`,()=>x.assign((0,n._)`${P}[${K}]`,L))}function C(x,P,K,L=i.Correct){const B=L===i.Correct?n.operators.EQ:n.operators.NEQ;let J;switch(x){case"null":return(0,n._)`${P} ${B} null`;case"array":J=(0,n._)`Array.isArray(${P})`;break;case"object":J=(0,n._)`${P} && typeof ${P} == "object" && !Array.isArray(${P})`;break;case"integer":J=re((0,n._)`!(${P} % 1) && !isNaN(${P})`);break;case"number":J=re();break;default:return(0,n._)`typeof ${P} ${B} ${x}`}return L===i.Correct?J:(0,n.not)(J);function re(ve=n.nil){return(0,n.and)((0,n._)`typeof ${P} == "number"`,ve,K?(0,n._)`isFinite(${P})`:n.nil)}}dataType$1.checkDataType=C;function D(x,P,K,L){if(x.length===1)return C(x[0],P,K,L);let B;const J=(0,s.toHash)(x);if(J.array&&J.object){const re=(0,n._)`typeof ${P} != "object"`;B=J.null?re:(0,n._)`!${P} || ${re}`,delete J.null,delete J.array,delete J.object}else B=n.nil;J.number&&delete J.integer;for(const re in J)B=(0,n.and)(B,C(re,P,K,L));return B}dataType$1.checkDataTypes=D;const F={message:({schema:x})=>`must be ${x}`,params:({schema:x,schemaValue:P})=>typeof x=="string"?(0,n._)`{type: ${x}}`:(0,n._)`{type: ${P}}`};function g(x){const P=q(x);(0,r.reportError)(P,F)}dataType$1.reportTypeError=g;function q(x){const{gen:P,data:K,schema:L}=x,B=(0,s.schemaRefOrVal)(x,L,"type");return{gen:P,keyword:"type",data:K,schema:L.type,schemaCode:B,schemaValue:B,parentSchema:L,params:{},it:x}}return dataType$1}var defaults$1={},hasRequiredDefaults$1;function requireDefaults$1(){if(hasRequiredDefaults$1)return defaults$1;hasRequiredDefaults$1=1,Object.defineProperty(defaults$1,"__esModule",{value:!0}),defaults$1.assignDefaults=void 0;const e=requireCodegen$1(),t=requireUtil$1();function r(s,i){const{properties:o,items:u}=s.schema;if(i==="object"&&o)for(const c in o)n(s,c,o[c].default);else i==="array"&&Array.isArray(u)&&u.forEach((c,d)=>n(s,d,c.default))}defaults$1.assignDefaults=r;function n(s,i,o){const{gen:u,compositeRule:c,data:d,opts:m}=s;if(o===void 0)return;const T=(0,e._)`${d}${(0,e.getProperty)(i)}`;if(c){(0,t.checkStrictMode)(s,`default is ignored for: ${T}`);return}let $=(0,e._)`${T} === undefined`;m.useDefaults==="empty"&&($=(0,e._)`${$} || ${T} === null || ${T} === ""`),u.if($,(0,e._)`${T} = ${(0,e.stringify)(o)}`)}return defaults$1}var keyword$1={},code$2={},hasRequiredCode$2;function requireCode$2(){if(hasRequiredCode$2)return code$2;hasRequiredCode$2=1,Object.defineProperty(code$2,"__esModule",{value:!0}),code$2.validateUnion=code$2.validateArray=code$2.usePattern=code$2.callValidateCode=code$2.schemaProperties=code$2.allSchemaProperties=code$2.noPropertyInData=code$2.propertyInData=code$2.isOwnProperty=code$2.hasPropFunc=code$2.reportMissingProp=code$2.checkMissingProp=code$2.checkReportMissingProp=void 0;const e=requireCodegen$1(),t=requireUtil$1(),r=requireNames$1(),n=requireUtil$1();function s(x,P){const{gen:K,data:L,it:B}=x;K.if(m(K,L,P,B.opts.ownProperties),()=>{x.setParams({missingProperty:(0,e._)`${P}`},!0),x.error()})}code$2.checkReportMissingProp=s;function i({gen:x,data:P,it:{opts:K}},L,B){return(0,e.or)(...L.map(J=>(0,e.and)(m(x,P,J,K.ownProperties),(0,e._)`${B} = ${J}`)))}code$2.checkMissingProp=i;function o(x,P){x.setParams({missingProperty:P},!0),x.error()}code$2.reportMissingProp=o;function u(x){return x.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}code$2.hasPropFunc=u;function c(x,P,K){return(0,e._)`${u(x)}.call(${P}, ${K})`}code$2.isOwnProperty=c;function d(x,P,K,L){const B=(0,e._)`${P}${(0,e.getProperty)(K)} !== undefined`;return L?(0,e._)`${B} && ${c(x,P,K)}`:B}code$2.propertyInData=d;function m(x,P,K,L){const B=(0,e._)`${P}${(0,e.getProperty)(K)} === undefined`;return L?(0,e.or)(B,(0,e.not)(c(x,P,K))):B}code$2.noPropertyInData=m;function T(x){return x?Object.keys(x).filter(P=>P!=="__proto__"):[]}code$2.allSchemaProperties=T;function $(x,P){return T(P).filter(K=>!(0,t.alwaysValidSchema)(x,P[K]))}code$2.schemaProperties=$;function C({schemaCode:x,data:P,it:{gen:K,topSchemaRef:L,schemaPath:B,errorPath:J},it:re},ve,ye,Se){const Ne=Se?(0,e._)`${x}, ${P}, ${L}${B}`:P,Ke=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,J)],[r.default.parentData,re.parentData],[r.default.parentDataProperty,re.parentDataProperty],[r.default.rootData,r.default.rootData]];re.opts.dynamicRef&&Ke.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Ar=(0,e._)`${Ne}, ${K.object(...Ke)}`;return ye!==e.nil?(0,e._)`${ve}.call(${ye}, ${Ar})`:(0,e._)`${ve}(${Ar})`}code$2.callValidateCode=C;const D=(0,e._)`new RegExp`;function F({gen:x,it:{opts:P}},K){const L=P.unicodeRegExp?"u":"",{regExp:B}=P.code,J=B(K,L);return x.scopeValue("pattern",{key:J.toString(),ref:J,code:(0,e._)`${B.code==="new RegExp"?D:(0,n.useFunc)(x,B)}(${K}, ${L})`})}code$2.usePattern=F;function g(x){const{gen:P,data:K,keyword:L,it:B}=x,J=P.name("valid");if(B.allErrors){const ve=P.let("valid",!0);return re(()=>P.assign(ve,!1)),ve}return P.var(J,!0),re(()=>P.break()),J;function re(ve){const ye=P.const("len",(0,e._)`${K}.length`);P.forRange("i",0,ye,Se=>{x.subschema({keyword:L,dataProp:Se,dataPropType:t.Type.Num},J),P.if((0,e.not)(J),ve)})}}code$2.validateArray=g;function q(x){const{gen:P,schema:K,keyword:L,it:B}=x;if(!Array.isArray(K))throw new Error("ajv implementation error");if(K.some(ve=>(0,t.alwaysValidSchema)(B,ve))&&!B.opts.unevaluated)return;const J=P.let("valid",!1),re=P.name("_valid");P.block(()=>K.forEach((ve,ye)=>{const Se=x.subschema({keyword:L,schemaProp:ye,compositeRule:!0},re);P.assign(J,(0,e._)`${J} || ${re}`),x.mergeValidEvaluated(Se,re)||P.if((0,e.not)(J))})),x.result(J,()=>x.reset(),()=>x.error(!0))}return code$2.validateUnion=q,code$2}var hasRequiredKeyword$1;function requireKeyword$1(){if(hasRequiredKeyword$1)return keyword$1;hasRequiredKeyword$1=1,Object.defineProperty(keyword$1,"__esModule",{value:!0}),keyword$1.validateKeywordUsage=keyword$1.validSchemaType=keyword$1.funcKeywordCode=keyword$1.macroKeywordCode=void 0;const e=requireCodegen$1(),t=requireNames$1(),r=requireCode$2(),n=requireErrors$1();function s($,C){const{gen:D,keyword:F,schema:g,parentSchema:q,it:x}=$,P=C.macro.call(x.self,g,q,x),K=d(D,F,P);x.opts.validateSchema!==!1&&x.self.validateSchema(P,!0);const L=D.name("valid");$.subschema({schema:P,schemaPath:e.nil,errSchemaPath:`${x.errSchemaPath}/${F}`,topSchemaRef:K,compositeRule:!0},L),$.pass(L,()=>$.error(!0))}keyword$1.macroKeywordCode=s;function i($,C){var D;const{gen:F,keyword:g,schema:q,parentSchema:x,$data:P,it:K}=$;c(K,C);const L=!P&&C.compile?C.compile.call(K.self,q,x,K):C.validate,B=d(F,g,L),J=F.let("valid");$.block$data(J,re),$.ok((D=C.valid)!==null&&D!==void 0?D:J);function re(){if(C.errors===!1)Se(),C.modifying&&o($),Ne(()=>$.error());else{const Ke=C.async?ve():ye();C.modifying&&o($),Ne(()=>u($,Ke))}}function ve(){const Ke=F.let("ruleErrs",null);return F.try(()=>Se((0,e._)`await `),Ar=>F.assign(J,!1).if((0,e._)`${Ar} instanceof ${K.ValidationError}`,()=>F.assign(Ke,(0,e._)`${Ar}.errors`),()=>F.throw(Ar))),Ke}function ye(){const Ke=(0,e._)`${B}.errors`;return F.assign(Ke,null),Se(e.nil),Ke}function Se(Ke=C.async?(0,e._)`await `:e.nil){const Ar=K.opts.passContext?t.default.this:t.default.self,hi=!("compile"in C&&!P||C.schema===!1);F.assign(J,(0,e._)`${Ke}${(0,r.callValidateCode)($,B,Ar,hi)}`,C.modifying)}function Ne(Ke){var Ar;F.if((0,e.not)((Ar=C.valid)!==null&&Ar!==void 0?Ar:J),Ke)}}keyword$1.funcKeywordCode=i;function o($){const{gen:C,data:D,it:F}=$;C.if(F.parentData,()=>C.assign(D,(0,e._)`${F.parentData}[${F.parentDataProperty}]`))}function u($,C){const{gen:D}=$;D.if((0,e._)`Array.isArray(${C})`,()=>{D.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${C} : ${t.default.vErrors}.concat(${C})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)($)},()=>$.error())}function c({schemaEnv:$},C){if(C.async&&!$.$async)throw new Error("async keyword in sync schema")}function d($,C,D){if(D===void 0)throw new Error(`keyword "${C}" failed to compile`);return $.scopeValue("keyword",typeof D=="function"?{ref:D}:{ref:D,code:(0,e.stringify)(D)})}function m($,C,D=!1){return!C.length||C.some(F=>F==="array"?Array.isArray($):F==="object"?$&&typeof $=="object"&&!Array.isArray($):typeof $==F||D&&typeof $>"u")}keyword$1.validSchemaType=m;function T({schema:$,opts:C,self:D,errSchemaPath:F},g,q){if(Array.isArray(g.keyword)?!g.keyword.includes(q):g.keyword!==q)throw new Error("ajv implementation error");const x=g.dependencies;if(x?.some(P=>!Object.prototype.hasOwnProperty.call($,P)))throw new Error(`parent schema must have dependencies of ${q}: ${x.join(",")}`);if(g.validateSchema&&!g.validateSchema($[q])){const P=`keyword "${q}" value is invalid at path "${F}": `+D.errorsText(g.validateSchema.errors);if(C.validateSchema==="log")D.logger.error(P);else throw new Error(P)}}return keyword$1.validateKeywordUsage=T,keyword$1}var subschema$1={},hasRequiredSubschema$1;function requireSubschema$1(){if(hasRequiredSubschema$1)return subschema$1;hasRequiredSubschema$1=1,Object.defineProperty(subschema$1,"__esModule",{value:!0}),subschema$1.extendSubschemaMode=subschema$1.extendSubschemaData=subschema$1.getSubschema=void 0;const e=requireCodegen$1(),t=requireUtil$1();function r(i,{keyword:o,schemaProp:u,schema:c,schemaPath:d,errSchemaPath:m,topSchemaRef:T}){if(o!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const $=i.schema[o];return u===void 0?{schema:$,schemaPath:(0,e._)`${i.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${i.errSchemaPath}/${o}`}:{schema:$[u],schemaPath:(0,e._)`${i.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(u)}`,errSchemaPath:`${i.errSchemaPath}/${o}/${(0,t.escapeFragment)(u)}`}}if(c!==void 0){if(d===void 0||m===void 0||T===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:d,topSchemaRef:T,errSchemaPath:m}}throw new Error('either "keyword" or "schema" must be passed')}subschema$1.getSubschema=r;function n(i,o,{dataProp:u,dataPropType:c,data:d,dataTypes:m,propertyName:T}){if(d!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:$}=o;if(u!==void 0){const{errorPath:D,dataPathArr:F,opts:g}=o,q=$.let("data",(0,e._)`${o.data}${(0,e.getProperty)(u)}`,!0);C(q),i.errorPath=(0,e.str)`${D}${(0,t.getErrorPath)(u,c,g.jsPropertySyntax)}`,i.parentDataProperty=(0,e._)`${u}`,i.dataPathArr=[...F,i.parentDataProperty]}if(d!==void 0){const D=d instanceof e.Name?d:$.let("data",d,!0);C(D),T!==void 0&&(i.propertyName=T)}m&&(i.dataTypes=m);function C(D){i.data=D,i.dataLevel=o.dataLevel+1,i.dataTypes=[],o.definedProperties=new Set,i.parentData=o.data,i.dataNames=[...o.dataNames,D]}}subschema$1.extendSubschemaData=n;function s(i,{jtdDiscriminator:o,jtdMetadata:u,compositeRule:c,createErrors:d,allErrors:m}){c!==void 0&&(i.compositeRule=c),d!==void 0&&(i.createErrors=d),m!==void 0&&(i.allErrors=m),i.jtdDiscriminator=o,i.jtdMetadata=u}return subschema$1.extendSubschemaMode=s,subschema$1}var resolve$1={},fastDeepEqual$1,hasRequiredFastDeepEqual$1;function requireFastDeepEqual$1(){return hasRequiredFastDeepEqual$1||(hasRequiredFastDeepEqual$1=1,fastDeepEqual$1=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}),fastDeepEqual$1}var jsonSchemaTraverse$1={exports:{}},hasRequiredJsonSchemaTraverse$1;function requireJsonSchemaTraverse$1(){if(hasRequiredJsonSchemaTraverse$1)return jsonSchemaTraverse$1.exports;hasRequiredJsonSchemaTraverse$1=1;var e=jsonSchemaTraverse$1.exports=function(n,s,i){typeof s=="function"&&(i=s,s={}),i=s.cb||i;var o=typeof i=="function"?i:i.pre||function(){},u=i.post||function(){};t(s,o,u,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,s,i,o,u,c,d,m,T,$){if(o&&typeof o=="object"&&!Array.isArray(o)){s(o,u,c,d,m,T,$);for(var C in o){var D=o[C];if(Array.isArray(D)){if(C in e.arrayKeywords)for(var F=0;F<D.length;F++)t(n,s,i,D[F],u+"/"+C+"/"+F,c,u,C,o,F)}else if(C in e.propsKeywords){if(D&&typeof D=="object")for(var g in D)t(n,s,i,D[g],u+"/"+C+"/"+r(g),c,u,C,o,g)}else(C in e.keywords||n.allKeys&&!(C in e.skipKeywords))&&t(n,s,i,D,u+"/"+C,c,u,C,o)}i(o,u,c,d,m,T,$)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse$1.exports}var hasRequiredResolve$1;function requireResolve$1(){if(hasRequiredResolve$1)return resolve$1;hasRequiredResolve$1=1,Object.defineProperty(resolve$1,"__esModule",{value:!0}),resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const e=requireUtil$1(),t=requireFastDeepEqual$1(),r=requireJsonSchemaTraverse$1(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function s(F,g=!0){return typeof F=="boolean"?!0:g===!0?!o(F):g?u(F)<=g:!1}resolve$1.inlineRef=s;const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(F){for(const g in F){if(i.has(g))return!0;const q=F[g];if(Array.isArray(q)&&q.some(o)||typeof q=="object"&&o(q))return!0}return!1}function u(F){let g=0;for(const q in F)if(q==="$ref"||(g++,!n.has(q)&&(typeof F[q]=="object"&&(0,e.eachItem)(F[q],x=>g+=u(x)),g===1/0)))return 1/0;return g}function c(F,g="",q){q!==!1&&(g=T(g));const x=F.parse(g);return d(F,x)}resolve$1.getFullPath=c;function d(F,g){return F.serialize(g).split("#")[0]+"#"}resolve$1._getFullPath=d;const m=/#\/?$/;function T(F){return F?F.replace(m,""):""}resolve$1.normalizeId=T;function $(F,g,q){return q=T(q),F.resolve(g,q)}resolve$1.resolveUrl=$;const C=/^[a-z_][-a-z0-9._]*$/i;function D(F,g){if(typeof F=="boolean")return{};const{schemaId:q,uriResolver:x}=this.opts,P=T(F[q]||g),K={"":P},L=c(x,P,!1),B={},J=new Set;return r(F,{allKeys:!0},(ye,Se,Ne,Ke)=>{if(Ke===void 0)return;const Ar=L+Se;let hi=K[Ke];typeof ye[q]=="string"&&(hi=gi.call(this,ye[q])),Gi.call(this,ye.$anchor),Gi.call(this,ye.$dynamicAnchor),K[Se]=hi;function gi(bs){const ua=this.opts.uriResolver.resolve;if(bs=T(hi?ua(hi,bs):bs),J.has(bs))throw ve(bs);J.add(bs);let Re=this.refs[bs];return typeof Re=="string"&&(Re=this.refs[Re]),typeof Re=="object"?re(ye,Re.schema,bs):bs!==T(Ar)&&(bs[0]==="#"?(re(ye,B[bs],bs),B[bs]=ye):this.refs[bs]=Ar),bs}function Gi(bs){if(typeof bs=="string"){if(!C.test(bs))throw new Error(`invalid anchor "${bs}"`);gi.call(this,`#${bs}`)}}}),B;function re(ye,Se,Ne){if(Se!==void 0&&!t(ye,Se))throw ve(Ne)}function ve(ye){return new Error(`reference "${ye}" resolves to more than one schema`)}}return resolve$1.getSchemaRefs=D,resolve$1}var hasRequiredValidate$1;function requireValidate$1(){if(hasRequiredValidate$1)return validate$1;hasRequiredValidate$1=1,Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.getData=validate$1.KeywordCxt=validate$1.validateFunctionCode=void 0;const e=requireBoolSchema$1(),t=requireDataType$1(),r=requireApplicability$1(),n=requireDataType$1(),s=requireDefaults$1(),i=requireKeyword$1(),o=requireSubschema$1(),u=requireCodegen$1(),c=requireNames$1(),d=requireResolve$1(),m=requireUtil$1(),T=requireErrors$1();function $(te){if(L(te)&&(J(te),K(te))){g(te);return}C(te,()=>(0,e.topBoolOrEmptySchema)(te))}validate$1.validateFunctionCode=$;function C({gen:te,validateName:se,schema:$e,schemaEnv:Ie,opts:Ye},Je){Ye.code.es5?te.func(se,(0,u._)`${c.default.data}, ${c.default.valCxt}`,Ie.$async,()=>{te.code((0,u._)`"use strict"; ${x($e,Ye)}`),F(te,Ye),te.code(Je)}):te.func(se,(0,u._)`${c.default.data}, ${D(Ye)}`,Ie.$async,()=>te.code(x($e,Ye)).code(Je))}function D(te){return(0,u._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${te.dynamicRef?(0,u._)`, ${c.default.dynamicAnchors}={}`:u.nil}}={}`}function F(te,se){te.if(c.default.valCxt,()=>{te.var(c.default.instancePath,(0,u._)`${c.default.valCxt}.${c.default.instancePath}`),te.var(c.default.parentData,(0,u._)`${c.default.valCxt}.${c.default.parentData}`),te.var(c.default.parentDataProperty,(0,u._)`${c.default.valCxt}.${c.default.parentDataProperty}`),te.var(c.default.rootData,(0,u._)`${c.default.valCxt}.${c.default.rootData}`),se.dynamicRef&&te.var(c.default.dynamicAnchors,(0,u._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{te.var(c.default.instancePath,(0,u._)`""`),te.var(c.default.parentData,(0,u._)`undefined`),te.var(c.default.parentDataProperty,(0,u._)`undefined`),te.var(c.default.rootData,c.default.data),se.dynamicRef&&te.var(c.default.dynamicAnchors,(0,u._)`{}`)})}function g(te){const{schema:se,opts:$e,gen:Ie}=te;C(te,()=>{$e.$comment&&se.$comment&&Ke(te),ye(te),Ie.let(c.default.vErrors,null),Ie.let(c.default.errors,0),$e.unevaluated&&q(te),re(te),Ar(te)})}function q(te){const{gen:se,validateName:$e}=te;te.evaluated=se.const("evaluated",(0,u._)`${$e}.evaluated`),se.if((0,u._)`${te.evaluated}.dynamicProps`,()=>se.assign((0,u._)`${te.evaluated}.props`,(0,u._)`undefined`)),se.if((0,u._)`${te.evaluated}.dynamicItems`,()=>se.assign((0,u._)`${te.evaluated}.items`,(0,u._)`undefined`))}function x(te,se){const $e=typeof te=="object"&&te[se.schemaId];return $e&&(se.code.source||se.code.process)?(0,u._)`/*# sourceURL=${$e} */`:u.nil}function P(te,se){if(L(te)&&(J(te),K(te))){B(te,se);return}(0,e.boolOrEmptySchema)(te,se)}function K({schema:te,self:se}){if(typeof te=="boolean")return!te;for(const $e in te)if(se.RULES.all[$e])return!0;return!1}function L(te){return typeof te.schema!="boolean"}function B(te,se){const{schema:$e,gen:Ie,opts:Ye}=te;Ye.$comment&&$e.$comment&&Ke(te),Se(te),Ne(te);const Je=Ie.const("_errs",c.default.errors);re(te,Je),Ie.var(se,(0,u._)`${Je} === ${c.default.errors}`)}function J(te){(0,m.checkUnknownRules)(te),ve(te)}function re(te,se){if(te.opts.jtd)return gi(te,[],!1,se);const $e=(0,t.getSchemaTypes)(te.schema),Ie=(0,t.coerceAndCheckDataType)(te,$e);gi(te,$e,!Ie,se)}function ve(te){const{schema:se,errSchemaPath:$e,opts:Ie,self:Ye}=te;se.$ref&&Ie.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(se,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function ye(te){const{schema:se,opts:$e}=te;se.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,m.checkStrictMode)(te,"default is ignored in the schema root")}function Se(te){const se=te.schema[te.opts.schemaId];se&&(te.baseId=(0,d.resolveUrl)(te.opts.uriResolver,te.baseId,se))}function Ne(te){if(te.schema.$async&&!te.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ke({gen:te,schemaEnv:se,schema:$e,errSchemaPath:Ie,opts:Ye}){const Je=$e.$comment;if(Ye.$comment===!0)te.code((0,u._)`${c.default.self}.logger.log(${Je})`);else if(typeof Ye.$comment=="function"){const pi=(0,u.str)`${Ie}/$comment`,Os=te.scopeValue("root",{ref:se.root});te.code((0,u._)`${c.default.self}.opts.$comment(${Je}, ${pi}, ${Os}.schema)`)}}function Ar(te){const{gen:se,schemaEnv:$e,validateName:Ie,ValidationError:Ye,opts:Je}=te;$e.$async?se.if((0,u._)`${c.default.errors} === 0`,()=>se.return(c.default.data),()=>se.throw((0,u._)`new ${Ye}(${c.default.vErrors})`)):(se.assign((0,u._)`${Ie}.errors`,c.default.vErrors),Je.unevaluated&&hi(te),se.return((0,u._)`${c.default.errors} === 0`))}function hi({gen:te,evaluated:se,props:$e,items:Ie}){$e instanceof u.Name&&te.assign((0,u._)`${se}.props`,$e),Ie instanceof u.Name&&te.assign((0,u._)`${se}.items`,Ie)}function gi(te,se,$e,Ie){const{gen:Ye,schema:Je,data:pi,allErrors:Os,opts:vi,self:Ui}=te,{RULES:ca}=Ui;if(Je.$ref&&(vi.ignoreKeywordsWithRef||!(0,m.schemaHasRulesButRef)(Je,ca))){Ye.block(()=>De(te,"$ref",ca.all.$ref.definition));return}vi.jtd||bs(te,se),Ye.block(()=>{for(const da of ca.rules)va(da);va(ca.post)});function va(da){(0,r.shouldUseGroup)(Je,da)&&(da.type?(Ye.if((0,n.checkDataType)(da.type,pi,vi.strictNumbers)),Gi(te,da),se.length===1&&se[0]===da.type&&$e&&(Ye.else(),(0,n.reportTypeError)(te)),Ye.endIf()):Gi(te,da),Os||Ye.if((0,u._)`${c.default.errors} === ${Ie||0}`))}}function Gi(te,se){const{gen:$e,schema:Ie,opts:{useDefaults:Ye}}=te;Ye&&(0,s.assignDefaults)(te,se.type),$e.block(()=>{for(const Je of se.rules)(0,r.shouldUseRule)(Ie,Je)&&De(te,Je.keyword,Je.definition,se.type)})}function bs(te,se){te.schemaEnv.meta||!te.opts.strictTypes||(ua(te,se),te.opts.allowUnionTypes||Re(te,se),ie(te,te.dataTypes))}function ua(te,se){if(se.length){if(!te.dataTypes.length){te.dataTypes=se;return}se.forEach($e=>{ue(te.dataTypes,$e)||X(te,`type "${$e}" not allowed by context "${te.dataTypes.join(",")}"`)}),G(te,se)}}function Re(te,se){se.length>1&&!(se.length===2&&se.includes("null"))&&X(te,"use allowUnionTypes to allow union type keyword")}function ie(te,se){const $e=te.self.RULES.all;for(const Ie in $e){const Ye=$e[Ie];if(typeof Ye=="object"&&(0,r.shouldUseRule)(te.schema,Ye)){const{type:Je}=Ye.definition;Je.length&&!Je.some(pi=>ke(se,pi))&&X(te,`missing type "${Je.join(",")}" for keyword "${Ie}"`)}}}function ke(te,se){return te.includes(se)||se==="number"&&te.includes("integer")}function ue(te,se){return te.includes(se)||se==="integer"&&te.includes("number")}function G(te,se){const $e=[];for(const Ie of te.dataTypes)ue(se,Ie)?$e.push(Ie):se.includes("integer")&&Ie==="number"&&$e.push("integer");te.dataTypes=$e}function X(te,se){const $e=te.schemaEnv.baseId+te.errSchemaPath;se+=` at "${$e}" (strictTypes)`,(0,m.checkStrictMode)(te,se,te.opts.strictTypes)}class ce{constructor(se,$e,Ie){if((0,i.validateKeywordUsage)(se,$e,Ie),this.gen=se.gen,this.allErrors=se.allErrors,this.keyword=Ie,this.data=se.data,this.schema=se.schema[Ie],this.$data=$e.$data&&se.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(se,this.schema,Ie,this.$data),this.schemaType=$e.schemaType,this.parentSchema=se.schema,this.params={},this.it=se,this.def=$e,this.$data)this.schemaCode=se.gen.const("vSchema",vr(this.$data,se));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${Ie} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=se.gen.const("_errs",c.default.errors))}result(se,$e,Ie){this.failResult((0,u.not)(se),$e,Ie)}failResult(se,$e,Ie){this.gen.if(se),Ie?Ie():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(se,$e){this.failResult((0,u.not)(se),void 0,$e)}fail(se){if(se===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(se),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(se){if(!this.$data)return this.fail(se);const{schemaCode:$e}=this;this.fail((0,u._)`${$e} !== undefined && (${(0,u.or)(this.invalid$data(),se)})`)}error(se,$e,Ie){if($e){this.setParams($e),this._error(se,Ie),this.setParams({});return}this._error(se,Ie)}_error(se,$e){(se?T.reportExtraError:T.reportError)(this,this.def.error,$e)}$dataError(){(0,T.reportError)(this,this.def.$dataError||T.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,T.resetErrorsCount)(this.gen,this.errsCount)}ok(se){this.allErrors||this.gen.if(se)}setParams(se,$e){$e?Object.assign(this.params,se):this.params=se}block$data(se,$e,Ie=u.nil){this.gen.block(()=>{this.check$data(se,Ie),$e()})}check$data(se=u.nil,$e=u.nil){if(!this.$data)return;const{gen:Ie,schemaCode:Ye,schemaType:Je,def:pi}=this;Ie.if((0,u.or)((0,u._)`${Ye} === undefined`,$e)),se!==u.nil&&Ie.assign(se,!0),(Je.length||pi.validateSchema)&&(Ie.elseIf(this.invalid$data()),this.$dataError(),se!==u.nil&&Ie.assign(se,!1)),Ie.else()}invalid$data(){const{gen:se,schemaCode:$e,schemaType:Ie,def:Ye,it:Je}=this;return(0,u.or)(pi(),Os());function pi(){if(Ie.length){if(!($e instanceof u.Name))throw new Error("ajv implementation error");const vi=Array.isArray(Ie)?Ie:[Ie];return(0,u._)`${(0,n.checkDataTypes)(vi,$e,Je.opts.strictNumbers,n.DataType.Wrong)}`}return u.nil}function Os(){if(Ye.validateSchema){const vi=se.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,u._)`!${vi}(${$e})`}return u.nil}}subschema(se,$e){const Ie=(0,o.getSubschema)(this.it,se);(0,o.extendSubschemaData)(Ie,this.it,se),(0,o.extendSubschemaMode)(Ie,se);const Ye={...this.it,...Ie,items:void 0,props:void 0};return P(Ye,$e),Ye}mergeEvaluated(se,$e){const{it:Ie,gen:Ye}=this;Ie.opts.unevaluated&&(Ie.props!==!0&&se.props!==void 0&&(Ie.props=m.mergeEvaluated.props(Ye,se.props,Ie.props,$e)),Ie.items!==!0&&se.items!==void 0&&(Ie.items=m.mergeEvaluated.items(Ye,se.items,Ie.items,$e)))}mergeValidEvaluated(se,$e){const{it:Ie,gen:Ye}=this;if(Ie.opts.unevaluated&&(Ie.props!==!0||Ie.items!==!0))return Ye.if($e,()=>this.mergeEvaluated(se,u.Name)),!0}}validate$1.KeywordCxt=ce;function De(te,se,$e,Ie){const Ye=new ce(te,$e,se);"code"in $e?$e.code(Ye,Ie):Ye.$data&&$e.validate?(0,i.funcKeywordCode)(Ye,$e):"macro"in $e?(0,i.macroKeywordCode)(Ye,$e):($e.compile||$e.validate)&&(0,i.funcKeywordCode)(Ye,$e)}const qe=/^\/(?:[^~]|~0|~1)*$/,bt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function vr(te,{dataLevel:se,dataNames:$e,dataPathArr:Ie}){let Ye,Je;if(te==="")return c.default.rootData;if(te[0]==="/"){if(!qe.test(te))throw new Error(`Invalid JSON-pointer: ${te}`);Ye=te,Je=c.default.rootData}else{const Ui=bt.exec(te);if(!Ui)throw new Error(`Invalid JSON-pointer: ${te}`);const ca=+Ui[1];if(Ye=Ui[2],Ye==="#"){if(ca>=se)throw new Error(vi("property/index",ca));return Ie[se-ca]}if(ca>se)throw new Error(vi("data",ca));if(Je=$e[se-ca],!Ye)return Je}let pi=Je;const Os=Ye.split("/");for(const Ui of Os)Ui&&(Je=(0,u._)`${Je}${(0,u.getProperty)((0,m.unescapeJsonPointer)(Ui))}`,pi=(0,u._)`${pi} && ${Je}`);return pi;function vi(Ui,ca){return`Cannot access ${Ui} ${ca} levels up, current level is ${se}`}}return validate$1.getData=vr,validate$1}var validation_error$1={},hasRequiredValidation_error$1;function requireValidation_error$1(){if(hasRequiredValidation_error$1)return validation_error$1;hasRequiredValidation_error$1=1,Object.defineProperty(validation_error$1,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return validation_error$1.default=e,validation_error$1}var ref_error$1={},hasRequiredRef_error$1;function requireRef_error$1(){if(hasRequiredRef_error$1)return ref_error$1;hasRequiredRef_error$1=1,Object.defineProperty(ref_error$1,"__esModule",{value:!0});const e=requireResolve$1();class t extends Error{constructor(n,s,i,o){super(o||`can't resolve reference ${i} from id ${s}`),this.missingRef=(0,e.resolveUrl)(n,s,i),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return ref_error$1.default=t,ref_error$1}var compile$1={},hasRequiredCompile$1;function requireCompile$1(){if(hasRequiredCompile$1)return compile$1;hasRequiredCompile$1=1,Object.defineProperty(compile$1,"__esModule",{value:!0}),compile$1.resolveSchema=compile$1.getCompilingSchema=compile$1.resolveRef=compile$1.compileSchema=compile$1.SchemaEnv=void 0;const e=requireCodegen$1(),t=requireValidation_error$1(),r=requireNames$1(),n=requireResolve$1(),s=requireUtil$1(),i=requireValidate$1();class o{constructor(q){var x;this.refs={},this.dynamicAnchors={};let P;typeof q.schema=="object"&&(P=q.schema),this.schema=q.schema,this.schemaId=q.schemaId,this.root=q.root||this,this.baseId=(x=q.baseId)!==null&&x!==void 0?x:(0,n.normalizeId)(P?.[q.schemaId||"$id"]),this.schemaPath=q.schemaPath,this.localRefs=q.localRefs,this.meta=q.meta,this.$async=P?.$async,this.refs={}}}compile$1.SchemaEnv=o;function u(g){const q=m.call(this,g);if(q)return q;const x=(0,n.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:P,lines:K}=this.opts.code,{ownProperties:L}=this.opts,B=new e.CodeGen(this.scope,{es5:P,lines:K,ownProperties:L});let J;g.$async&&(J=B.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const re=B.scopeName("validate");g.validateName=re;const ve={gen:B,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:B.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:re,ValidationError:J,schema:g.schema,schemaEnv:g,rootId:x,baseId:g.baseId||x,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let ye;try{this._compilations.add(g),(0,i.validateFunctionCode)(ve),B.optimize(this.opts.code.optimize);const Se=B.toString();ye=`${B.scopeRefs(r.default.scope)}return ${Se}`,this.opts.code.process&&(ye=this.opts.code.process(ye,g));const Ne=new Function(`${r.default.self}`,`${r.default.scope}`,ye)(this,this.scope.get());if(this.scope.value(re,{ref:Ne}),Ne.errors=null,Ne.schema=g.schema,Ne.schemaEnv=g,g.$async&&(Ne.$async=!0),this.opts.code.source===!0&&(Ne.source={validateName:re,validateCode:Se,scopeValues:B._values}),this.opts.unevaluated){const{props:Ke,items:Ar}=ve;Ne.evaluated={props:Ke instanceof e.Name?void 0:Ke,items:Ar instanceof e.Name?void 0:Ar,dynamicProps:Ke instanceof e.Name,dynamicItems:Ar instanceof e.Name},Ne.source&&(Ne.source.evaluated=(0,e.stringify)(Ne.evaluated))}return g.validate=Ne,g}catch(Se){throw delete g.validate,delete g.validateName,ye&&this.logger.error("Error compiling schema, function code:",ye),Se}finally{this._compilations.delete(g)}}compile$1.compileSchema=u;function c(g,q,x){var P;x=(0,n.resolveUrl)(this.opts.uriResolver,q,x);const K=g.refs[x];if(K)return K;let L=$.call(this,g,x);if(L===void 0){const B=(P=g.localRefs)===null||P===void 0?void 0:P[x],{schemaId:J}=this.opts;B&&(L=new o({schema:B,schemaId:J,root:g,baseId:q}))}if(L!==void 0)return g.refs[x]=d.call(this,L)}compile$1.resolveRef=c;function d(g){return(0,n.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:u.call(this,g)}function m(g){for(const q of this._compilations)if(T(q,g))return q}compile$1.getCompilingSchema=m;function T(g,q){return g.schema===q.schema&&g.root===q.root&&g.baseId===q.baseId}function $(g,q){let x;for(;typeof(x=this.refs[q])=="string";)q=x;return x||this.schemas[q]||C.call(this,g,q)}function C(g,q){const x=this.opts.uriResolver.parse(q),P=(0,n._getFullPath)(this.opts.uriResolver,x);let K=(0,n.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&P===K)return F.call(this,x,g);const L=(0,n.normalizeId)(P),B=this.refs[L]||this.schemas[L];if(typeof B=="string"){const J=C.call(this,g,B);return typeof J?.schema!="object"?void 0:F.call(this,x,J)}if(typeof B?.schema=="object"){if(B.validate||u.call(this,B),L===(0,n.normalizeId)(q)){const{schema:J}=B,{schemaId:re}=this.opts,ve=J[re];return ve&&(K=(0,n.resolveUrl)(this.opts.uriResolver,K,ve)),new o({schema:J,schemaId:re,root:g,baseId:K})}return F.call(this,x,B)}}compile$1.resolveSchema=C;const D=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function F(g,{baseId:q,schema:x,root:P}){var K;if(((K=g.fragment)===null||K===void 0?void 0:K[0])!=="/")return;for(const J of g.fragment.slice(1).split("/")){if(typeof x=="boolean")return;const re=x[(0,s.unescapeFragment)(J)];if(re===void 0)return;x=re;const ve=typeof x=="object"&&x[this.opts.schemaId];!D.has(J)&&ve&&(q=(0,n.resolveUrl)(this.opts.uriResolver,q,ve))}let L;if(typeof x!="boolean"&&x.$ref&&!(0,s.schemaHasRulesButRef)(x,this.RULES)){const J=(0,n.resolveUrl)(this.opts.uriResolver,q,x.$ref);L=C.call(this,P,J)}const{schemaId:B}=this.opts;if(L=L||new o({schema:x,schemaId:B,root:P,baseId:q}),L.schema!==L.root.schema)return L}return compile$1}const $id$1$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description$1="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1$1="object",required$1$1=["$data"],properties$2$1={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1$1=!1,require$$9$1={$id:$id$1$1,description:description$1,type:type$1$1,required:required$1$1,properties:properties$2$1,additionalProperties:additionalProperties$1$1};var uri$1={},fastUri$1={exports:{}},utils$1,hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r($){let C="",D=0,F=0;for(F=0;F<$.length;F++)if(D=$[F].charCodeAt(0),D!==48){if(!(D>=48&&D<=57||D>=65&&D<=70||D>=97&&D<=102))return"";C+=$[F];break}for(F+=1;F<$.length;F++){if(D=$[F].charCodeAt(0),!(D>=48&&D<=57||D>=65&&D<=70||D>=97&&D<=102))return"";C+=$[F]}return C}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function s($){return $.length=0,!0}function i($,C,D){if($.length){const F=r($);if(F!=="")C.push(F);else return D.error=!0,!1;$.length=0}return!0}function o($){let C=0;const D={error:!1,address:"",zone:""},F=[],g=[];let q=!1,x=!1,P=i;for(let K=0;K<$.length;K++){const L=$[K];if(!(L==="["||L==="]"))if(L===":"){if(q===!0&&(x=!0),!P(g,F,D))break;if(++C>7){D.error=!0;break}K>0&&$[K-1]===":"&&(q=!0),F.push(":");continue}else if(L==="%"){if(!P(g,F,D))break;P=s}else{g.push(L);continue}}return g.length&&(P===s?D.zone=g.join(""):x?F.push(g.join("")):F.push(r(g))),D.address=F.join(""),D}function u($){if(c($,":")<2)return{host:$,isIPV6:!1};const C=o($);if(C.error)return{host:$,isIPV6:!1};{let D=C.address,F=C.address;return C.zone&&(D+="%"+C.zone,F+="%25"+C.zone),{host:D,isIPV6:!0,escapedHost:F}}}function c($,C){let D=0;for(let F=0;F<$.length;F++)$[F]===C&&D++;return D}function d($){let C=$;const D=[];let F=-1,g=0;for(;g=C.length;){if(g===1){if(C===".")break;if(C==="/"){D.push("/");break}else{D.push(C);break}}else if(g===2){if(C[0]==="."){if(C[1]===".")break;if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&(C[1]==="."||C[1]==="/")){D.push("/");break}}else if(g===3&&C==="/.."){D.length!==0&&D.pop(),D.push("/");break}if(C[0]==="."){if(C[1]==="."){if(C[2]==="/"){C=C.slice(3);continue}}else if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&C[1]==="."){if(C[2]==="/"){C=C.slice(2);continue}else if(C[2]==="."&&C[3]==="/"){C=C.slice(3),D.length!==0&&D.pop();continue}}if((F=C.indexOf("/",1))===-1){D.push(C);break}else D.push(C.slice(0,F)),C=C.slice(F)}return D.join("")}function m($,C){const D=C!==!0?escape:unescape;return $.scheme!==void 0&&($.scheme=D($.scheme)),$.userinfo!==void 0&&($.userinfo=D($.userinfo)),$.host!==void 0&&($.host=D($.host)),$.path!==void 0&&($.path=D($.path)),$.query!==void 0&&($.query=D($.query)),$.fragment!==void 0&&($.fragment=D($.fragment)),$}function T($){const C=[];if($.userinfo!==void 0&&(C.push($.userinfo),C.push("@")),$.host!==void 0){let D=unescape($.host);if(!t(D)){const F=u(D);F.isIPV6===!0?D=`[${F.escapedHost}]`:D=$.host}C.push(D)}return(typeof $.port=="number"||typeof $.port=="string")&&(C.push(":"),C.push(String($.port))),C.length?C.join(""):void 0}return utils$1={nonSimpleDomain:n,recomposeAuthority:T,normalizeComponentEncoding:m,removeDotSegments:d,isIPv4:t,isUUID:e,normalizeIPv6:u,stringArrayToHexStripped:r},utils$1}var schemes$1,hasRequiredSchemes$1;function requireSchemes$1(){if(hasRequiredSchemes$1)return schemes$1;hasRequiredSchemes$1=1;const{isUUID:e}=requireUtils$1(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(P){return r.indexOf(P)!==-1}function s(P){return P.secure===!0?!0:P.secure===!1?!1:P.scheme?P.scheme.length===3&&(P.scheme[0]==="w"||P.scheme[0]==="W")&&(P.scheme[1]==="s"||P.scheme[1]==="S")&&(P.scheme[2]==="s"||P.scheme[2]==="S"):!1}function i(P){return P.host||(P.error=P.error||"HTTP URIs must have a host."),P}function o(P){const K=String(P.scheme).toLowerCase()==="https";return(P.port===(K?443:80)||P.port==="")&&(P.port=void 0),P.path||(P.path="/"),P}function u(P){return P.secure=s(P),P.resourceName=(P.path||"/")+(P.query?"?"+P.query:""),P.path=void 0,P.query=void 0,P}function c(P){if((P.port===(s(P)?443:80)||P.port==="")&&(P.port=void 0),typeof P.secure=="boolean"&&(P.scheme=P.secure?"wss":"ws",P.secure=void 0),P.resourceName){const[K,L]=P.resourceName.split("?");P.path=K&&K!=="/"?K:void 0,P.query=L,P.resourceName=void 0}return P.fragment=void 0,P}function d(P,K){if(!P.path)return P.error="URN can not be parsed",P;const L=P.path.match(t);if(L){const B=K.scheme||P.scheme||"urn";P.nid=L[1].toLowerCase(),P.nss=L[2];const J=`${B}:${K.nid||P.nid}`,re=x(J);P.path=void 0,re&&(P=re.parse(P,K))}else P.error=P.error||"URN can not be parsed.";return P}function m(P,K){if(P.nid===void 0)throw new Error("URN without nid cannot be serialized");const L=K.scheme||P.scheme||"urn",B=P.nid.toLowerCase(),J=`${L}:${K.nid||B}`,re=x(J);re&&(P=re.serialize(P,K));const ve=P,ye=P.nss;return ve.path=`${B||K.nid}:${ye}`,K.skipEscape=!0,ve}function T(P,K){const L=P;return L.uuid=L.nss,L.nss=void 0,!K.tolerant&&(!L.uuid||!e(L.uuid))&&(L.error=L.error||"UUID is not valid."),L}function $(P){const K=P;return K.nss=(P.uuid||"").toLowerCase(),K}const C={scheme:"http",domainHost:!0,parse:i,serialize:o},D={scheme:"https",domainHost:C.domainHost,parse:i,serialize:o},F={scheme:"ws",domainHost:!0,parse:u,serialize:c},g={scheme:"wss",domainHost:F.domainHost,parse:F.parse,serialize:F.serialize},q={http:C,https:D,ws:F,wss:g,urn:{scheme:"urn",parse:d,serialize:m,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:T,serialize:$,skipNormalize:!0}};Object.setPrototypeOf(q,null);function x(P){return P&&(q[P]||q[P.toLowerCase()])||void 0}return schemes$1={wsIsSecure:s,SCHEMES:q,isValidSchemeName:n,getSchemeHandler:x},schemes$1}var hasRequiredFastUri$1;function requireFastUri$1(){if(hasRequiredFastUri$1)return fastUri$1.exports;hasRequiredFastUri$1=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:s,nonSimpleDomain:i}=requireUtils$1(),{SCHEMES:o,getSchemeHandler:u}=requireSchemes$1();function c(g,q){return typeof g=="string"?g=$(D(g,q),q):typeof g=="object"&&(g=D($(g,q),q)),g}function d(g,q,x){const P=x?Object.assign({scheme:"null"},x):{scheme:"null"},K=m(D(g,P),D(q,P),P,!0);return P.skipEscape=!0,$(K,P)}function m(g,q,x,P){const K={};return P||(g=D($(g,x),x),q=D($(q,x),x)),x=x||{},!x.tolerant&&q.scheme?(K.scheme=q.scheme,K.userinfo=q.userinfo,K.host=q.host,K.port=q.port,K.path=t(q.path||""),K.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(K.userinfo=q.userinfo,K.host=q.host,K.port=q.port,K.path=t(q.path||""),K.query=q.query):(q.path?(q.path[0]==="/"?K.path=t(q.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?K.path="/"+q.path:g.path?K.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+q.path:K.path=q.path,K.path=t(K.path)),K.query=q.query):(K.path=g.path,q.query!==void 0?K.query=q.query:K.query=g.query),K.userinfo=g.userinfo,K.host=g.host,K.port=g.port),K.scheme=g.scheme),K.fragment=q.fragment,K}function T(g,q,x){return typeof g=="string"?(g=unescape(g),g=$(n(D(g,x),!0),{...x,skipEscape:!0})):typeof g=="object"&&(g=$(n(g,!0),{...x,skipEscape:!0})),typeof q=="string"?(q=unescape(q),q=$(n(D(q,x),!0),{...x,skipEscape:!0})):typeof q=="object"&&(q=$(n(q,!0),{...x,skipEscape:!0})),g.toLowerCase()===q.toLowerCase()}function $(g,q){const x={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},P=Object.assign({},q),K=[],L=u(P.scheme||x.scheme);L&&L.serialize&&L.serialize(x,P),x.path!==void 0&&(P.skipEscape?x.path=unescape(x.path):(x.path=escape(x.path),x.scheme!==void 0&&(x.path=x.path.split("%3A").join(":")))),P.reference!=="suffix"&&x.scheme&&K.push(x.scheme,":");const B=r(x);if(B!==void 0&&(P.reference!=="suffix"&&K.push("//"),K.push(B),x.path&&x.path[0]!=="/"&&K.push("/")),x.path!==void 0){let J=x.path;!P.absolutePath&&(!L||!L.absolutePath)&&(J=t(J)),B===void 0&&J[0]==="/"&&J[1]==="/"&&(J="/%2F"+J.slice(2)),K.push(J)}return x.query!==void 0&&K.push("?",x.query),x.fragment!==void 0&&K.push("#",x.fragment),K.join("")}const C=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function D(g,q){const x=Object.assign({},q),P={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let K=!1;x.reference==="suffix"&&(x.scheme?g=x.scheme+":"+g:g="//"+g);const L=g.match(C);if(L){if(P.scheme=L[1],P.userinfo=L[3],P.host=L[4],P.port=parseInt(L[5],10),P.path=L[6]||"",P.query=L[7],P.fragment=L[8],isNaN(P.port)&&(P.port=L[5]),P.host)if(s(P.host)===!1){const J=e(P.host);P.host=J.host.toLowerCase(),K=J.isIPV6}else K=!0;P.scheme===void 0&&P.userinfo===void 0&&P.host===void 0&&P.port===void 0&&P.query===void 0&&!P.path?P.reference="same-document":P.scheme===void 0?P.reference="relative":P.fragment===void 0?P.reference="absolute":P.reference="uri",x.reference&&x.reference!=="suffix"&&x.reference!==P.reference&&(P.error=P.error||"URI is not a "+x.reference+" reference.");const B=u(x.scheme||P.scheme);if(!x.unicodeSupport&&(!B||!B.unicodeSupport)&&P.host&&(x.domainHost||B&&B.domainHost)&&K===!1&&i(P.host))try{P.host=URL.domainToASCII(P.host.toLowerCase())}catch(J){P.error=P.error||"Host's domain name can not be converted to ASCII: "+J}(!B||B&&!B.skipNormalize)&&(g.indexOf("%")!==-1&&(P.scheme!==void 0&&(P.scheme=unescape(P.scheme)),P.host!==void 0&&(P.host=unescape(P.host))),P.path&&(P.path=escape(unescape(P.path))),P.fragment&&(P.fragment=encodeURI(decodeURIComponent(P.fragment)))),B&&B.parse&&B.parse(P,x)}else P.error=P.error||"URI can not be parsed.";return P}const F={SCHEMES:o,normalize:c,resolve:d,resolveComponent:m,equal:T,serialize:$,parse:D};return fastUri$1.exports=F,fastUri$1.exports.default=F,fastUri$1.exports.fastUri=F,fastUri$1.exports}var hasRequiredUri$1;function requireUri$1(){if(hasRequiredUri$1)return uri$1;hasRequiredUri$1=1,Object.defineProperty(uri$1,"__esModule",{value:!0});const e=requireFastUri$1();return e.code='require("ajv/dist/runtime/uri").default',uri$1.default=e,uri$1}var hasRequiredCore$1$1;function requireCore$1$1(){return hasRequiredCore$1$1||(hasRequiredCore$1$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=requireValidate$1();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=requireCodegen$1();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=requireValidation_error$1(),s=requireRef_error$1(),i=requireRules$1(),o=requireCompile$1(),u=requireCodegen$1(),c=requireResolve$1(),d=requireDataType$1(),m=requireUtil$1(),T=require$$9$1,$=requireUri$1(),C=(Re,ie)=>new RegExp(Re,ie);C.code="new RegExp";const D=["removeAdditional","useDefaults","coerceTypes"],F=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},q={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},x=200;function P(Re){var ie,ke,ue,G,X,ce,De,qe,bt,vr,te,se,$e,Ie,Ye,Je,pi,Os,vi,Ui,ca,va,da,ha,ya;const mi=Re.strict,fa=(ie=Re.code)===null||ie===void 0?void 0:ie.optimize,pa=fa===!0||fa===void 0?1:fa||0,_a=(ue=(ke=Re.code)===null||ke===void 0?void 0:ke.regExp)!==null&&ue!==void 0?ue:C,be=(G=Re.uriResolver)!==null&&G!==void 0?G:$.default;return{strictSchema:(ce=(X=Re.strictSchema)!==null&&X!==void 0?X:mi)!==null&&ce!==void 0?ce:!0,strictNumbers:(qe=(De=Re.strictNumbers)!==null&&De!==void 0?De:mi)!==null&&qe!==void 0?qe:!0,strictTypes:(vr=(bt=Re.strictTypes)!==null&&bt!==void 0?bt:mi)!==null&&vr!==void 0?vr:"log",strictTuples:(se=(te=Re.strictTuples)!==null&&te!==void 0?te:mi)!==null&&se!==void 0?se:"log",strictRequired:(Ie=($e=Re.strictRequired)!==null&&$e!==void 0?$e:mi)!==null&&Ie!==void 0?Ie:!1,code:Re.code?{...Re.code,optimize:pa,regExp:_a}:{optimize:pa,regExp:_a},loopRequired:(Ye=Re.loopRequired)!==null&&Ye!==void 0?Ye:x,loopEnum:(Je=Re.loopEnum)!==null&&Je!==void 0?Je:x,meta:(pi=Re.meta)!==null&&pi!==void 0?pi:!0,messages:(Os=Re.messages)!==null&&Os!==void 0?Os:!0,inlineRefs:(vi=Re.inlineRefs)!==null&&vi!==void 0?vi:!0,schemaId:(Ui=Re.schemaId)!==null&&Ui!==void 0?Ui:"$id",addUsedSchema:(ca=Re.addUsedSchema)!==null&&ca!==void 0?ca:!0,validateSchema:(va=Re.validateSchema)!==null&&va!==void 0?va:!0,validateFormats:(da=Re.validateFormats)!==null&&da!==void 0?da:!0,unicodeRegExp:(ha=Re.unicodeRegExp)!==null&&ha!==void 0?ha:!0,int32range:(ya=Re.int32range)!==null&&ya!==void 0?ya:!0,uriResolver:be}}class K{constructor(ie={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ie=this.opts={...ie,...P(ie)};const{es5:ke,lines:ue}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:F,es5:ke,lines:ue}),this.logger=Ne(ie.logger);const G=ie.validateFormats;ie.validateFormats=!1,this.RULES=(0,i.getRules)(),L.call(this,g,ie,"NOT SUPPORTED"),L.call(this,q,ie,"DEPRECATED","warn"),this._metaOpts=ye.call(this),ie.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ie.keywords&&ve.call(this,ie.keywords),typeof ie.meta=="object"&&this.addMetaSchema(ie.meta),J.call(this),ie.validateFormats=G}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ie,meta:ke,schemaId:ue}=this.opts;let G=T;ue==="id"&&(G={...T},G.id=G.$id,delete G.$id),ke&&ie&&this.addMetaSchema(G,G[ue],!1)}defaultMeta(){const{meta:ie,schemaId:ke}=this.opts;return this.opts.defaultMeta=typeof ie=="object"?ie[ke]||ie:void 0}validate(ie,ke){let ue;if(typeof ie=="string"){if(ue=this.getSchema(ie),!ue)throw new Error(`no schema with key or ref "${ie}"`)}else ue=this.compile(ie);const G=ue(ke);return"$async"in ue||(this.errors=ue.errors),G}compile(ie,ke){const ue=this._addSchema(ie,ke);return ue.validate||this._compileSchemaEnv(ue)}compileAsync(ie,ke){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ue}=this.opts;return G.call(this,ie,ke);async function G(vr,te){await X.call(this,vr.$schema);const se=this._addSchema(vr,te);return se.validate||ce.call(this,se)}async function X(vr){vr&&!this.getSchema(vr)&&await G.call(this,{$ref:vr},!0)}async function ce(vr){try{return this._compileSchemaEnv(vr)}catch(te){if(!(te instanceof s.default))throw te;return De.call(this,te),await qe.call(this,te.missingSchema),ce.call(this,vr)}}function De({missingSchema:vr,missingRef:te}){if(this.refs[vr])throw new Error(`AnySchema ${vr} is loaded but ${te} cannot be resolved`)}async function qe(vr){const te=await bt.call(this,vr);this.refs[vr]||await X.call(this,te.$schema),this.refs[vr]||this.addSchema(te,vr,ke)}async function bt(vr){const te=this._loading[vr];if(te)return te;try{return await(this._loading[vr]=ue(vr))}finally{delete this._loading[vr]}}}addSchema(ie,ke,ue,G=this.opts.validateSchema){if(Array.isArray(ie)){for(const ce of ie)this.addSchema(ce,void 0,ue,G);return this}let X;if(typeof ie=="object"){const{schemaId:ce}=this.opts;if(X=ie[ce],X!==void 0&&typeof X!="string")throw new Error(`schema ${ce} must be string`)}return ke=(0,c.normalizeId)(ke||X),this._checkUnique(ke),this.schemas[ke]=this._addSchema(ie,ue,ke,G,!0),this}addMetaSchema(ie,ke,ue=this.opts.validateSchema){return this.addSchema(ie,ke,!0,ue),this}validateSchema(ie,ke){if(typeof ie=="boolean")return!0;let ue;if(ue=ie.$schema,ue!==void 0&&typeof ue!="string")throw new Error("$schema must be a string");if(ue=ue||this.opts.defaultMeta||this.defaultMeta(),!ue)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const G=this.validate(ue,ie);if(!G&&ke){const X="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(X);else throw new Error(X)}return G}getSchema(ie){let ke;for(;typeof(ke=B.call(this,ie))=="string";)ie=ke;if(ke===void 0){const{schemaId:ue}=this.opts,G=new o.SchemaEnv({schema:{},schemaId:ue});if(ke=o.resolveSchema.call(this,G,ie),!ke)return;this.refs[ie]=ke}return ke.validate||this._compileSchemaEnv(ke)}removeSchema(ie){if(ie instanceof RegExp)return this._removeAllSchemas(this.schemas,ie),this._removeAllSchemas(this.refs,ie),this;switch(typeof ie){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ke=B.call(this,ie);return typeof ke=="object"&&this._cache.delete(ke.schema),delete this.schemas[ie],delete this.refs[ie],this}case"object":{const ke=ie;this._cache.delete(ke);let ue=ie[this.opts.schemaId];return ue&&(ue=(0,c.normalizeId)(ue),delete this.schemas[ue],delete this.refs[ue]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ie){for(const ke of ie)this.addKeyword(ke);return this}addKeyword(ie,ke){let ue;if(typeof ie=="string")ue=ie,typeof ke=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ke.keyword=ue);else if(typeof ie=="object"&&ke===void 0){if(ke=ie,ue=ke.keyword,Array.isArray(ue)&&!ue.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ar.call(this,ue,ke),!ke)return(0,m.eachItem)(ue,X=>hi.call(this,X)),this;Gi.call(this,ke);const G={...ke,type:(0,d.getJSONTypes)(ke.type),schemaType:(0,d.getJSONTypes)(ke.schemaType)};return(0,m.eachItem)(ue,G.type.length===0?X=>hi.call(this,X,G):X=>G.type.forEach(ce=>hi.call(this,X,G,ce))),this}getKeyword(ie){const ke=this.RULES.all[ie];return typeof ke=="object"?ke.definition:!!ke}removeKeyword(ie){const{RULES:ke}=this;delete ke.keywords[ie],delete ke.all[ie];for(const ue of ke.rules){const G=ue.rules.findIndex(X=>X.keyword===ie);G>=0&&ue.rules.splice(G,1)}return this}addFormat(ie,ke){return typeof ke=="string"&&(ke=new RegExp(ke)),this.formats[ie]=ke,this}errorsText(ie=this.errors,{separator:ke=", ",dataVar:ue="data"}={}){return!ie||ie.length===0?"No errors":ie.map(G=>`${ue}${G.instancePath} ${G.message}`).reduce((G,X)=>G+ke+X)}$dataMetaSchema(ie,ke){const ue=this.RULES.all;ie=JSON.parse(JSON.stringify(ie));for(const G of ke){const X=G.split("/").slice(1);let ce=ie;for(const De of X)ce=ce[De];for(const De in ue){const qe=ue[De];if(typeof qe!="object")continue;const{$data:bt}=qe.definition,vr=ce[De];bt&&vr&&(ce[De]=ua(vr))}}return ie}_removeAllSchemas(ie,ke){for(const ue in ie){const G=ie[ue];(!ke||ke.test(ue))&&(typeof G=="string"?delete ie[ue]:G&&!G.meta&&(this._cache.delete(G.schema),delete ie[ue]))}}_addSchema(ie,ke,ue,G=this.opts.validateSchema,X=this.opts.addUsedSchema){let ce;const{schemaId:De}=this.opts;if(typeof ie=="object")ce=ie[De];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ie!="boolean")throw new Error("schema must be object or boolean")}let qe=this._cache.get(ie);if(qe!==void 0)return qe;ue=(0,c.normalizeId)(ce||ue);const bt=c.getSchemaRefs.call(this,ie,ue);return qe=new o.SchemaEnv({schema:ie,schemaId:De,meta:ke,baseId:ue,localRefs:bt}),this._cache.set(qe.schema,qe),X&&!ue.startsWith("#")&&(ue&&this._checkUnique(ue),this.refs[ue]=qe),G&&this.validateSchema(ie,!0),qe}_checkUnique(ie){if(this.schemas[ie]||this.refs[ie])throw new Error(`schema with key or id "${ie}" already exists`)}_compileSchemaEnv(ie){if(ie.meta?this._compileMetaSchema(ie):o.compileSchema.call(this,ie),!ie.validate)throw new Error("ajv implementation error");return ie.validate}_compileMetaSchema(ie){const ke=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,ie)}finally{this.opts=ke}}}K.ValidationError=n.default,K.MissingRefError=s.default,e.default=K;function L(Re,ie,ke,ue="error"){for(const G in Re){const X=G;X in ie&&this.logger[ue](`${ke}: option ${G}. ${Re[X]}`)}}function B(Re){return Re=(0,c.normalizeId)(Re),this.schemas[Re]||this.refs[Re]}function J(){const Re=this.opts.schemas;if(Re)if(Array.isArray(Re))this.addSchema(Re);else for(const ie in Re)this.addSchema(Re[ie],ie)}function re(){for(const Re in this.opts.formats){const ie=this.opts.formats[Re];ie&&this.addFormat(Re,ie)}}function ve(Re){if(Array.isArray(Re)){this.addVocabulary(Re);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ie in Re){const ke=Re[ie];ke.keyword||(ke.keyword=ie),this.addKeyword(ke)}}function ye(){const Re={...this.opts};for(const ie of D)delete Re[ie];return Re}const Se={log(){},warn(){},error(){}};function Ne(Re){if(Re===!1)return Se;if(Re===void 0)return console;if(Re.log&&Re.warn&&Re.error)return Re;throw new Error("logger must implement log, warn and error methods")}const Ke=/^[a-z_$][a-z0-9_$:-]*$/i;function Ar(Re,ie){const{RULES:ke}=this;if((0,m.eachItem)(Re,ue=>{if(ke.keywords[ue])throw new Error(`Keyword ${ue} is already defined`);if(!Ke.test(ue))throw new Error(`Keyword ${ue} has invalid name`)}),!!ie&&ie.$data&&!("code"in ie||"validate"in ie))throw new Error('$data keyword must have "code" or "validate" function')}function hi(Re,ie,ke){var ue;const G=ie?.post;if(ke&&G)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:X}=this;let ce=G?X.post:X.rules.find(({type:qe})=>qe===ke);if(ce||(ce={type:ke,rules:[]},X.rules.push(ce)),X.keywords[Re]=!0,!ie)return;const De={keyword:Re,definition:{...ie,type:(0,d.getJSONTypes)(ie.type),schemaType:(0,d.getJSONTypes)(ie.schemaType)}};ie.before?gi.call(this,ce,De,ie.before):ce.rules.push(De),X.all[Re]=De,(ue=ie.implements)===null||ue===void 0||ue.forEach(qe=>this.addKeyword(qe))}function gi(Re,ie,ke){const ue=Re.rules.findIndex(G=>G.keyword===ke);ue>=0?Re.rules.splice(ue,0,ie):(Re.rules.push(ie),this.logger.warn(`rule ${ke} is not defined`))}function Gi(Re){let{metaSchema:ie}=Re;ie!==void 0&&(Re.$data&&this.opts.$data&&(ie=ua(ie)),Re.validateSchema=this.compile(ie,!0))}const bs={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ua(Re){return{anyOf:[Re,bs]}}})(core$1$1)),core$1$1}var draft7$1={},core$2={},id$1={},hasRequiredId$1;function requireId$1(){if(hasRequiredId$1)return id$1;hasRequiredId$1=1,Object.defineProperty(id$1,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id$1.default=e,id$1}var ref$1={},hasRequiredRef$1;function requireRef$1(){if(hasRequiredRef$1)return ref$1;hasRequiredRef$1=1,Object.defineProperty(ref$1,"__esModule",{value:!0}),ref$1.callRef=ref$1.getValidate=void 0;const e=requireRef_error$1(),t=requireCode$2(),r=requireCodegen$1(),n=requireNames$1(),s=requireCompile$1(),i=requireUtil$1(),o={keyword:"$ref",schemaType:"string",code(d){const{gen:m,schema:T,it:$}=d,{baseId:C,schemaEnv:D,validateName:F,opts:g,self:q}=$,{root:x}=D;if((T==="#"||T==="#/")&&C===x.baseId)return K();const P=s.resolveRef.call(q,x,C,T);if(P===void 0)throw new e.default($.opts.uriResolver,C,T);if(P instanceof s.SchemaEnv)return L(P);return B(P);function K(){if(D===x)return c(d,F,D,D.$async);const J=m.scopeValue("root",{ref:x});return c(d,(0,r._)`${J}.validate`,x,x.$async)}function L(J){const re=u(d,J);c(d,re,J,J.$async)}function B(J){const re=m.scopeValue("schema",g.code.source===!0?{ref:J,code:(0,r.stringify)(J)}:{ref:J}),ve=m.name("valid"),ye=d.subschema({schema:J,dataTypes:[],schemaPath:r.nil,topSchemaRef:re,errSchemaPath:T},ve);d.mergeEvaluated(ye),d.ok(ve)}}};function u(d,m){const{gen:T}=d;return m.validate?T.scopeValue("validate",{ref:m.validate}):(0,r._)`${T.scopeValue("wrapper",{ref:m})}.validate`}ref$1.getValidate=u;function c(d,m,T,$){const{gen:C,it:D}=d,{allErrors:F,schemaEnv:g,opts:q}=D,x=q.passContext?n.default.this:r.nil;$?P():K();function P(){if(!g.$async)throw new Error("async schema referenced by sync schema");const J=C.let("valid");C.try(()=>{C.code((0,r._)`await ${(0,t.callValidateCode)(d,m,x)}`),B(m),F||C.assign(J,!0)},re=>{C.if((0,r._)`!(${re} instanceof ${D.ValidationError})`,()=>C.throw(re)),L(re),F||C.assign(J,!1)}),d.ok(J)}function K(){d.result((0,t.callValidateCode)(d,m,x),()=>B(m),()=>L(m))}function L(J){const re=(0,r._)`${J}.errors`;C.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${re} : ${n.default.vErrors}.concat(${re})`),C.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function B(J){var re;if(!D.opts.unevaluated)return;const ve=(re=T?.validate)===null||re===void 0?void 0:re.evaluated;if(D.props!==!0)if(ve&&!ve.dynamicProps)ve.props!==void 0&&(D.props=i.mergeEvaluated.props(C,ve.props,D.props));else{const ye=C.var("props",(0,r._)`${J}.evaluated.props`);D.props=i.mergeEvaluated.props(C,ye,D.props,r.Name)}if(D.items!==!0)if(ve&&!ve.dynamicItems)ve.items!==void 0&&(D.items=i.mergeEvaluated.items(C,ve.items,D.items));else{const ye=C.var("items",(0,r._)`${J}.evaluated.items`);D.items=i.mergeEvaluated.items(C,ye,D.items,r.Name)}}}return ref$1.callRef=c,ref$1.default=o,ref$1}var hasRequiredCore$2;function requireCore$2(){if(hasRequiredCore$2)return core$2;hasRequiredCore$2=1,Object.defineProperty(core$2,"__esModule",{value:!0});const e=requireId$1(),t=requireRef$1(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return core$2.default=r,core$2}var validation$1={},limitNumber$1={},hasRequiredLimitNumber$1;function requireLimitNumber$1(){if(hasRequiredLimitNumber$1)return limitNumber$1;hasRequiredLimitNumber$1=1,Object.defineProperty(limitNumber$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:i,schemaCode:o})=>(0,e.str)`must be ${r[i].okStr} ${o}`,params:({keyword:i,schemaCode:o})=>(0,e._)`{comparison: ${r[i].okStr}, limit: ${o}}`},s={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(i){const{keyword:o,data:u,schemaCode:c}=i;i.fail$data((0,e._)`${u} ${r[o].fail} ${c} || isNaN(${u})`)}};return limitNumber$1.default=s,limitNumber$1}var multipleOf$1={},hasRequiredMultipleOf$1;function requireMultipleOf$1(){if(hasRequiredMultipleOf$1)return multipleOf$1;hasRequiredMultipleOf$1=1,Object.defineProperty(multipleOf$1,"__esModule",{value:!0});const e=requireCodegen$1(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:n,data:s,schemaCode:i,it:o}=r,u=o.opts.multipleOfPrecision,c=n.let("res"),d=u?(0,e._)`Math.abs(Math.round(${c}) - ${c}) > 1e-${u}`:(0,e._)`${c} !== parseInt(${c})`;r.fail$data((0,e._)`(${i} === 0 || (${c} = ${s}/${i}, ${d}))`)}};return multipleOf$1.default=t,multipleOf$1}var limitLength$1={},ucs2length$1={},hasRequiredUcs2length$1;function requireUcs2length$1(){if(hasRequiredUcs2length$1)return ucs2length$1;hasRequiredUcs2length$1=1,Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,s=0,i;for(;s<r;)n++,i=t.charCodeAt(s++),i>=55296&&i<=56319&&s<r&&(i=t.charCodeAt(s),(i&64512)===56320&&s++);return n}return ucs2length$1.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',ucs2length$1}var hasRequiredLimitLength$1;function requireLimitLength$1(){if(hasRequiredLimitLength$1)return limitLength$1;hasRequiredLimitLength$1=1,Object.defineProperty(limitLength$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireUcs2length$1(),n={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:i}){const o=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${i} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:i,data:o,schemaCode:u,it:c}=s,d=i==="maxLength"?e.operators.GT:e.operators.LT,m=c.opts.unicode===!1?(0,e._)`${o}.length`:(0,e._)`${(0,t.useFunc)(s.gen,r.default)}(${o})`;s.fail$data((0,e._)`${m} ${d} ${u}`)}};return limitLength$1.default=n,limitLength$1}var pattern$1={},hasRequiredPattern$1;function requirePattern$1(){if(hasRequiredPattern$1)return pattern$1;hasRequiredPattern$1=1,Object.defineProperty(pattern$1,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match pattern "${n}"`,params:({schemaCode:n})=>(0,t._)`{pattern: ${n}}`},code(n){const{data:s,$data:i,schema:o,schemaCode:u,it:c}=n,d=c.opts.unicodeRegExp?"u":"",m=i?(0,t._)`(new RegExp(${u}, ${d}))`:(0,e.usePattern)(n,o);n.fail$data((0,t._)`!${m}.test(${s})`)}};return pattern$1.default=r,pattern$1}var limitProperties$1={},hasRequiredLimitProperties$1;function requireLimitProperties$1(){if(hasRequiredLimitProperties$1)return limitProperties$1;hasRequiredLimitProperties$1=1,Object.defineProperty(limitProperties$1,"__esModule",{value:!0});const e=requireCodegen$1(),t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:n}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${n} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:n,data:s,schemaCode:i}=r,o=n==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${o} ${i}`)}};return limitProperties$1.default=t,limitProperties$1}var required$2={},hasRequiredRequired$1;function requireRequired$1(){if(hasRequiredRequired$1)return required$2;hasRequiredRequired$1=1,Object.defineProperty(required$2,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),r=requireUtil$1(),n={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:i,schema:o,schemaCode:u,data:c,$data:d,it:m}=s,{opts:T}=m;if(!d&&o.length===0)return;const $=o.length>=T.loopRequired;if(m.allErrors?C():D(),T.strictRequired){const q=s.parentSchema.properties,{definedProperties:x}=s.it;for(const P of o)if(q?.[P]===void 0&&!x.has(P)){const K=m.schemaEnv.baseId+m.errSchemaPath,L=`required property "${P}" is not defined at "${K}" (strictRequired)`;(0,r.checkStrictMode)(m,L,m.opts.strictRequired)}}function C(){if($||d)s.block$data(t.nil,F);else for(const q of o)(0,e.checkReportMissingProp)(s,q)}function D(){const q=i.let("missing");if($||d){const x=i.let("valid",!0);s.block$data(x,()=>g(q,x)),s.ok(x)}else i.if((0,e.checkMissingProp)(s,o,q)),(0,e.reportMissingProp)(s,q),i.else()}function F(){i.forOf("prop",u,q=>{s.setParams({missingProperty:q}),i.if((0,e.noPropertyInData)(i,c,q,T.ownProperties),()=>s.error())})}function g(q,x){s.setParams({missingProperty:q}),i.forOf(q,u,()=>{i.assign(x,(0,e.propertyInData)(i,c,q,T.ownProperties)),i.if((0,t.not)(x),()=>{s.error(),i.break()})},t.nil)}}};return required$2.default=n,required$2}var limitItems$1={},hasRequiredLimitItems$1;function requireLimitItems$1(){if(hasRequiredLimitItems$1)return limitItems$1;hasRequiredLimitItems$1=1,Object.defineProperty(limitItems$1,"__esModule",{value:!0});const e=requireCodegen$1(),t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:n}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${n} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:n,data:s,schemaCode:i}=r,o=n==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${o} ${i}`)}};return limitItems$1.default=t,limitItems$1}var uniqueItems$1={},equal$1={},hasRequiredEqual$1;function requireEqual$1(){if(hasRequiredEqual$1)return equal$1;hasRequiredEqual$1=1,Object.defineProperty(equal$1,"__esModule",{value:!0});const e=requireFastDeepEqual$1();return e.code='require("ajv/dist/runtime/equal").default',equal$1.default=e,equal$1}var hasRequiredUniqueItems$1;function requireUniqueItems$1(){if(hasRequiredUniqueItems$1)return uniqueItems$1;hasRequiredUniqueItems$1=1,Object.defineProperty(uniqueItems$1,"__esModule",{value:!0});const e=requireDataType$1(),t=requireCodegen$1(),r=requireUtil$1(),n=requireEqual$1(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i,j:o}})=>(0,t.str)`must NOT have duplicate items (items ## ${o} and ${i} are identical)`,params:({params:{i,j:o}})=>(0,t._)`{i: ${i}, j: ${o}}`},code(i){const{gen:o,data:u,$data:c,schema:d,parentSchema:m,schemaCode:T,it:$}=i;if(!c&&!d)return;const C=o.let("valid"),D=m.items?(0,e.getSchemaTypes)(m.items):[];i.block$data(C,F,(0,t._)`${T} === false`),i.ok(C);function F(){const P=o.let("i",(0,t._)`${u}.length`),K=o.let("j");i.setParams({i:P,j:K}),o.assign(C,!0),o.if((0,t._)`${P} > 1`,()=>(g()?q:x)(P,K))}function g(){return D.length>0&&!D.some(P=>P==="object"||P==="array")}function q(P,K){const L=o.name("item"),B=(0,e.checkDataTypes)(D,L,$.opts.strictNumbers,e.DataType.Wrong),J=o.const("indices",(0,t._)`{}`);o.for((0,t._)`;${P}--;`,()=>{o.let(L,(0,t._)`${u}[${P}]`),o.if(B,(0,t._)`continue`),D.length>1&&o.if((0,t._)`typeof ${L} == "string"`,(0,t._)`${L} += "_"`),o.if((0,t._)`typeof ${J}[${L}] == "number"`,()=>{o.assign(K,(0,t._)`${J}[${L}]`),i.error(),o.assign(C,!1).break()}).code((0,t._)`${J}[${L}] = ${P}`)})}function x(P,K){const L=(0,r.useFunc)(o,n.default),B=o.name("outer");o.label(B).for((0,t._)`;${P}--;`,()=>o.for((0,t._)`${K} = ${P}; ${K}--;`,()=>o.if((0,t._)`${L}(${u}[${P}], ${u}[${K}])`,()=>{i.error(),o.assign(C,!1).break(B)})))}}};return uniqueItems$1.default=s,uniqueItems$1}var _const$1={},hasRequired_const$1;function require_const$1(){if(hasRequired_const$1)return _const$1;hasRequired_const$1=1,Object.defineProperty(_const$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireEqual$1(),n={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:i,data:o,$data:u,schemaCode:c,schema:d}=s;u||d&&typeof d=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(i,r.default)}(${o}, ${c})`):s.fail((0,e._)`${d} !== ${o}`)}};return _const$1.default=n,_const$1}var _enum$1={},hasRequired_enum$1;function require_enum$1(){if(hasRequired_enum$1)return _enum$1;hasRequired_enum$1=1,Object.defineProperty(_enum$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireEqual$1(),n={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:i,data:o,$data:u,schema:c,schemaCode:d,it:m}=s;if(!u&&c.length===0)throw new Error("enum must have non-empty array");const T=c.length>=m.opts.loopEnum;let $;const C=()=>$??($=(0,t.useFunc)(i,r.default));let D;if(T||u)D=i.let("valid"),s.block$data(D,F);else{if(!Array.isArray(c))throw new Error("ajv implementation error");const q=i.const("vSchema",d);D=(0,e.or)(...c.map((x,P)=>g(q,P)))}s.pass(D);function F(){i.assign(D,!1),i.forOf("v",d,q=>i.if((0,e._)`${C()}(${o}, ${q})`,()=>i.assign(D,!0).break()))}function g(q,x){const P=c[x];return typeof P=="object"&&P!==null?(0,e._)`${C()}(${o}, ${q}[${x}])`:(0,e._)`${o} === ${P}`}}};return _enum$1.default=n,_enum$1}var hasRequiredValidation$1;function requireValidation$1(){if(hasRequiredValidation$1)return validation$1;hasRequiredValidation$1=1,Object.defineProperty(validation$1,"__esModule",{value:!0});const e=requireLimitNumber$1(),t=requireMultipleOf$1(),r=requireLimitLength$1(),n=requirePattern$1(),s=requireLimitProperties$1(),i=requireRequired$1(),o=requireLimitItems$1(),u=requireUniqueItems$1(),c=require_const$1(),d=require_enum$1(),m=[e.default,t.default,r.default,n.default,s.default,i.default,o.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,d.default];return validation$1.default=m,validation$1}var applicator$1={},additionalItems$1={},hasRequiredAdditionalItems$1;function requireAdditionalItems$1(){if(hasRequiredAdditionalItems$1)return additionalItems$1;hasRequiredAdditionalItems$1=1,Object.defineProperty(additionalItems$1,"__esModule",{value:!0}),additionalItems$1.validateAdditionalItems=void 0;const e=requireCodegen$1(),t=requireUtil$1(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:i,it:o}=s,{items:u}=i;if(!Array.isArray(u)){(0,t.checkStrictMode)(o,'"additionalItems" is ignored when "items" is not an array of schemas');return}n(s,u)}};function n(s,i){const{gen:o,schema:u,data:c,keyword:d,it:m}=s;m.items=!0;const T=o.const("len",(0,e._)`${c}.length`);if(u===!1)s.setParams({len:i.length}),s.pass((0,e._)`${T} <= ${i.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(m,u)){const C=o.var("valid",(0,e._)`${T} <= ${i.length}`);o.if((0,e.not)(C),()=>$(C)),s.ok(C)}function $(C){o.forRange("i",i.length,T,D=>{s.subschema({keyword:d,dataProp:D,dataPropType:t.Type.Num},C),m.allErrors||o.if((0,e.not)(C),()=>o.break())})}}return additionalItems$1.validateAdditionalItems=n,additionalItems$1.default=r,additionalItems$1}var prefixItems$1={},items$1={},hasRequiredItems$1;function requireItems$1(){if(hasRequiredItems$1)return items$1;hasRequiredItems$1=1,Object.defineProperty(items$1,"__esModule",{value:!0}),items$1.validateTuple=void 0;const e=requireCodegen$1(),t=requireUtil$1(),r=requireCode$2(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(i){const{schema:o,it:u}=i;if(Array.isArray(o))return s(i,"additionalItems",o);u.items=!0,!(0,t.alwaysValidSchema)(u,o)&&i.ok((0,r.validateArray)(i))}};function s(i,o,u=i.schema){const{gen:c,parentSchema:d,data:m,keyword:T,it:$}=i;F(d),$.opts.unevaluated&&u.length&&$.items!==!0&&($.items=t.mergeEvaluated.items(c,u.length,$.items));const C=c.name("valid"),D=c.const("len",(0,e._)`${m}.length`);u.forEach((g,q)=>{(0,t.alwaysValidSchema)($,g)||(c.if((0,e._)`${D} > ${q}`,()=>i.subschema({keyword:T,schemaProp:q,dataProp:q},C)),i.ok(C))});function F(g){const{opts:q,errSchemaPath:x}=$,P=u.length,K=P===g.minItems&&(P===g.maxItems||g[o]===!1);if(q.strictTuples&&!K){const L=`"${T}" is ${P}-tuple, but minItems or maxItems/${o} are not specified or different at path "${x}"`;(0,t.checkStrictMode)($,L,q.strictTuples)}}}return items$1.validateTuple=s,items$1.default=n,items$1}var hasRequiredPrefixItems$1;function requirePrefixItems$1(){if(hasRequiredPrefixItems$1)return prefixItems$1;hasRequiredPrefixItems$1=1,Object.defineProperty(prefixItems$1,"__esModule",{value:!0});const e=requireItems$1(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return prefixItems$1.default=t,prefixItems$1}var items2020$1={},hasRequiredItems2020$1;function requireItems2020$1(){if(hasRequiredItems2020$1)return items2020$1;hasRequiredItems2020$1=1,Object.defineProperty(items2020$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r=requireCode$2(),n=requireAdditionalItems$1(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,e.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,e._)`{limit: ${i}}`},code(i){const{schema:o,parentSchema:u,it:c}=i,{prefixItems:d}=u;c.items=!0,!(0,t.alwaysValidSchema)(c,o)&&(d?(0,n.validateAdditionalItems)(i,d):i.ok((0,r.validateArray)(i)))}};return items2020$1.default=s,items2020$1}var contains$1={},hasRequiredContains$1;function requireContains$1(){if(hasRequiredContains$1)return contains$1;hasRequiredContains$1=1,Object.defineProperty(contains$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:n,max:s}})=>s===void 0?(0,e.str)`must contain at least ${n} valid item(s)`:(0,e.str)`must contain at least ${n} and no more than ${s} valid item(s)`,params:({params:{min:n,max:s}})=>s===void 0?(0,e._)`{minContains: ${n}}`:(0,e._)`{minContains: ${n}, maxContains: ${s}}`},code(n){const{gen:s,schema:i,parentSchema:o,data:u,it:c}=n;let d,m;const{minContains:T,maxContains:$}=o;c.opts.next?(d=T===void 0?1:T,m=$):d=1;const C=s.const("len",(0,e._)`${u}.length`);if(n.setParams({min:d,max:m}),m===void 0&&d===0){(0,t.checkStrictMode)(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(m!==void 0&&d>m){(0,t.checkStrictMode)(c,'"minContains" > "maxContains" is always invalid'),n.fail();return}if((0,t.alwaysValidSchema)(c,i)){let x=(0,e._)`${C} >= ${d}`;m!==void 0&&(x=(0,e._)`${x} && ${C} <= ${m}`),n.pass(x);return}c.items=!0;const D=s.name("valid");m===void 0&&d===1?g(D,()=>s.if(D,()=>s.break())):d===0?(s.let(D,!0),m!==void 0&&s.if((0,e._)`${u}.length > 0`,F)):(s.let(D,!1),F()),n.result(D,()=>n.reset());function F(){const x=s.name("_valid"),P=s.let("count",0);g(x,()=>s.if(x,()=>q(P)))}function g(x,P){s.forRange("i",0,C,K=>{n.subschema({keyword:"contains",dataProp:K,dataPropType:t.Type.Num,compositeRule:!0},x),P()})}function q(x){s.code((0,e._)`${x}++`),m===void 0?s.if((0,e._)`${x} >= ${d}`,()=>s.assign(D,!0).break()):(s.if((0,e._)`${x} > ${m}`,()=>s.assign(D,!1).break()),d===1?s.assign(D,!0):s.if((0,e._)`${x} >= ${d}`,()=>s.assign(D,!0)))}}};return contains$1.default=r,contains$1}var dependencies$1={},hasRequiredDependencies$1;function requireDependencies$1(){return hasRequiredDependencies$1||(hasRequiredDependencies$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=requireCodegen$1(),r=requireUtil$1(),n=requireCode$2();e.error={message:({params:{property:c,depsCount:d,deps:m}})=>{const T=d===1?"property":"properties";return(0,t.str)`must have ${T} ${m} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:m,missingProperty:T}})=>(0,t._)`{property: ${c},
    missingProperty: ${T},
    depsCount: ${d},
    deps: ${m}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,m]=i(c);o(c,d),u(c,m)}};function i({schema:c}){const d={},m={};for(const T in c){if(T==="__proto__")continue;const $=Array.isArray(c[T])?d:m;$[T]=c[T]}return[d,m]}function o(c,d=c.schema){const{gen:m,data:T,it:$}=c;if(Object.keys(d).length===0)return;const C=m.let("missing");for(const D in d){const F=d[D];if(F.length===0)continue;const g=(0,n.propertyInData)(m,T,D,$.opts.ownProperties);c.setParams({property:D,depsCount:F.length,deps:F.join(", ")}),$.allErrors?m.if(g,()=>{for(const q of F)(0,n.checkReportMissingProp)(c,q)}):(m.if((0,t._)`${g} && (${(0,n.checkMissingProp)(c,F,C)})`),(0,n.reportMissingProp)(c,C),m.else())}}e.validatePropertyDeps=o;function u(c,d=c.schema){const{gen:m,data:T,keyword:$,it:C}=c,D=m.name("valid");for(const F in d)(0,r.alwaysValidSchema)(C,d[F])||(m.if((0,n.propertyInData)(m,T,F,C.opts.ownProperties),()=>{const g=c.subschema({keyword:$,schemaProp:F},D);c.mergeValidEvaluated(g,D)},()=>m.var(D,!0)),c.ok(D))}e.validateSchemaDeps=u,e.default=s})(dependencies$1)),dependencies$1}var propertyNames$1={},hasRequiredPropertyNames$1;function requirePropertyNames$1(){if(hasRequiredPropertyNames$1)return propertyNames$1;hasRequiredPropertyNames$1=1,Object.defineProperty(propertyNames$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:n})=>(0,e._)`{propertyName: ${n.propertyName}}`},code(n){const{gen:s,schema:i,data:o,it:u}=n;if((0,t.alwaysValidSchema)(u,i))return;const c=s.name("valid");s.forIn("key",o,d=>{n.setParams({propertyName:d}),n.subschema({keyword:"propertyNames",data:d,dataTypes:["string"],propertyName:d,compositeRule:!0},c),s.if((0,e.not)(c),()=>{n.error(!0),u.allErrors||s.break()})}),n.ok(c)}};return propertyNames$1.default=r,propertyNames$1}var additionalProperties$2={},hasRequiredAdditionalProperties$1;function requireAdditionalProperties$1(){if(hasRequiredAdditionalProperties$1)return additionalProperties$2;hasRequiredAdditionalProperties$1=1,Object.defineProperty(additionalProperties$2,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),r=requireNames$1(),n=requireUtil$1(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:i})=>(0,t._)`{additionalProperty: ${i.additionalProperty}}`},code(i){const{gen:o,schema:u,parentSchema:c,data:d,errsCount:m,it:T}=i;if(!m)throw new Error("ajv implementation error");const{allErrors:$,opts:C}=T;if(T.props=!0,C.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(T,u))return;const D=(0,e.allSchemaProperties)(c.properties),F=(0,e.allSchemaProperties)(c.patternProperties);g(),i.ok((0,t._)`${m} === ${r.default.errors}`);function g(){o.forIn("key",d,L=>{!D.length&&!F.length?P(L):o.if(q(L),()=>P(L))})}function q(L){let B;if(D.length>8){const J=(0,n.schemaRefOrVal)(T,c.properties,"properties");B=(0,e.isOwnProperty)(o,J,L)}else D.length?B=(0,t.or)(...D.map(J=>(0,t._)`${L} === ${J}`)):B=t.nil;return F.length&&(B=(0,t.or)(B,...F.map(J=>(0,t._)`${(0,e.usePattern)(i,J)}.test(${L})`))),(0,t.not)(B)}function x(L){o.code((0,t._)`delete ${d}[${L}]`)}function P(L){if(C.removeAdditional==="all"||C.removeAdditional&&u===!1){x(L);return}if(u===!1){i.setParams({additionalProperty:L}),i.error(),$||o.break();return}if(typeof u=="object"&&!(0,n.alwaysValidSchema)(T,u)){const B=o.name("valid");C.removeAdditional==="failing"?(K(L,B,!1),o.if((0,t.not)(B),()=>{i.reset(),x(L)})):(K(L,B),$||o.if((0,t.not)(B),()=>o.break()))}}function K(L,B,J){const re={keyword:"additionalProperties",dataProp:L,dataPropType:n.Type.Str};J===!1&&Object.assign(re,{compositeRule:!0,createErrors:!1,allErrors:!1}),i.subschema(re,B)}}};return additionalProperties$2.default=s,additionalProperties$2}var properties$1$1={},hasRequiredProperties$1;function requireProperties$1(){if(hasRequiredProperties$1)return properties$1$1;hasRequiredProperties$1=1,Object.defineProperty(properties$1$1,"__esModule",{value:!0});const e=requireValidate$1(),t=requireCode$2(),r=requireUtil$1(),n=requireAdditionalProperties$1(),s={keyword:"properties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,parentSchema:c,data:d,it:m}=i;m.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(m,n.default,"additionalProperties"));const T=(0,t.allSchemaProperties)(u);for(const g of T)m.definedProperties.add(g);m.opts.unevaluated&&T.length&&m.props!==!0&&(m.props=r.mergeEvaluated.props(o,(0,r.toHash)(T),m.props));const $=T.filter(g=>!(0,r.alwaysValidSchema)(m,u[g]));if($.length===0)return;const C=o.name("valid");for(const g of $)D(g)?F(g):(o.if((0,t.propertyInData)(o,d,g,m.opts.ownProperties)),F(g),m.allErrors||o.else().var(C,!0),o.endIf()),i.it.definedProperties.add(g),i.ok(C);function D(g){return m.opts.useDefaults&&!m.compositeRule&&u[g].default!==void 0}function F(g){i.subschema({keyword:"properties",schemaProp:g,dataProp:g},C)}}};return properties$1$1.default=s,properties$1$1}var patternProperties$1={},hasRequiredPatternProperties$1;function requirePatternProperties$1(){if(hasRequiredPatternProperties$1)return patternProperties$1;hasRequiredPatternProperties$1=1,Object.defineProperty(patternProperties$1,"__esModule",{value:!0});const e=requireCode$2(),t=requireCodegen$1(),r=requireUtil$1(),n=requireUtil$1(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,data:c,parentSchema:d,it:m}=i,{opts:T}=m,$=(0,e.allSchemaProperties)(u),C=$.filter(K=>(0,r.alwaysValidSchema)(m,u[K]));if($.length===0||C.length===$.length&&(!m.opts.unevaluated||m.props===!0))return;const D=T.strictSchema&&!T.allowMatchingProperties&&d.properties,F=o.name("valid");m.props!==!0&&!(m.props instanceof t.Name)&&(m.props=(0,n.evaluatedPropsToName)(o,m.props));const{props:g}=m;q();function q(){for(const K of $)D&&x(K),m.allErrors?P(K):(o.var(F,!0),P(K),o.if(F))}function x(K){for(const L in D)new RegExp(K).test(L)&&(0,r.checkStrictMode)(m,`property ${L} matches pattern ${K} (use allowMatchingProperties)`)}function P(K){o.forIn("key",c,L=>{o.if((0,t._)`${(0,e.usePattern)(i,K)}.test(${L})`,()=>{const B=C.includes(K);B||i.subschema({keyword:"patternProperties",schemaProp:K,dataProp:L,dataPropType:n.Type.Str},F),m.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${L}]`,!0):!B&&!m.allErrors&&o.if((0,t.not)(F),()=>o.break())})})}}};return patternProperties$1.default=s,patternProperties$1}var not$1={},hasRequiredNot$1;function requireNot$1(){if(hasRequiredNot$1)return not$1;hasRequiredNot$1=1,Object.defineProperty(not$1,"__esModule",{value:!0});const e=requireUtil$1(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:s,it:i}=r;if((0,e.alwaysValidSchema)(i,s)){r.fail();return}const o=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),r.failResult(o,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return not$1.default=t,not$1}var anyOf$1={},hasRequiredAnyOf$1;function requireAnyOf$1(){if(hasRequiredAnyOf$1)return anyOf$1;hasRequiredAnyOf$1=1,Object.defineProperty(anyOf$1,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode$2().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf$1.default=e,anyOf$1}var oneOf$1={},hasRequiredOneOf$1;function requireOneOf$1(){if(hasRequiredOneOf$1)return oneOf$1;hasRequiredOneOf$1=1,Object.defineProperty(oneOf$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:n})=>(0,e._)`{passingSchemas: ${n.passing}}`},code(n){const{gen:s,schema:i,parentSchema:o,it:u}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");if(u.opts.discriminator&&o.discriminator)return;const c=i,d=s.let("valid",!1),m=s.let("passing",null),T=s.name("_valid");n.setParams({passing:m}),s.block($),n.result(d,()=>n.reset(),()=>n.error(!0));function $(){c.forEach((C,D)=>{let F;(0,t.alwaysValidSchema)(u,C)?s.var(T,!0):F=n.subschema({keyword:"oneOf",schemaProp:D,compositeRule:!0},T),D>0&&s.if((0,e._)`${T} && ${d}`).assign(d,!1).assign(m,(0,e._)`[${m}, ${D}]`).else(),s.if(T,()=>{s.assign(d,!0),s.assign(m,D),F&&n.mergeEvaluated(F,e.Name)})})}}};return oneOf$1.default=r,oneOf$1}var allOf$1={},hasRequiredAllOf$1;function requireAllOf$1(){if(hasRequiredAllOf$1)return allOf$1;hasRequiredAllOf$1=1,Object.defineProperty(allOf$1,"__esModule",{value:!0});const e=requireUtil$1(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:s,it:i}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");const o=n.name("valid");s.forEach((u,c)=>{if((0,e.alwaysValidSchema)(i,u))return;const d=r.subschema({keyword:"allOf",schemaProp:c},o);r.ok(o),r.mergeEvaluated(d)})}};return allOf$1.default=t,allOf$1}var _if$1={},hasRequired_if$1;function require_if$1(){if(hasRequired_if$1)return _if$1;hasRequired_if$1=1,Object.defineProperty(_if$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireUtil$1(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:i,parentSchema:o,it:u}=s;o.then===void 0&&o.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const c=n(u,"then"),d=n(u,"else");if(!c&&!d)return;const m=i.let("valid",!0),T=i.name("_valid");if($(),s.reset(),c&&d){const D=i.let("ifClause");s.setParams({ifClause:D}),i.if(T,C("then",D),C("else",D))}else c?i.if(T,C("then")):i.if((0,e.not)(T),C("else"));s.pass(m,()=>s.error(!0));function $(){const D=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},T);s.mergeEvaluated(D)}function C(D,F){return()=>{const g=s.subschema({keyword:D},T);i.assign(m,T),s.mergeValidEvaluated(g,m),F?i.assign(F,(0,e._)`${D}`):s.setParams({ifClause:D})}}}};function n(s,i){const o=s.schema[i];return o!==void 0&&!(0,t.alwaysValidSchema)(s,o)}return _if$1.default=r,_if$1}var thenElse$1={},hasRequiredThenElse$1;function requireThenElse$1(){if(hasRequiredThenElse$1)return thenElse$1;hasRequiredThenElse$1=1,Object.defineProperty(thenElse$1,"__esModule",{value:!0});const e=requireUtil$1(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:s}){n.if===void 0&&(0,e.checkStrictMode)(s,`"${r}" without "if" is ignored`)}};return thenElse$1.default=t,thenElse$1}var hasRequiredApplicator$1;function requireApplicator$1(){if(hasRequiredApplicator$1)return applicator$1;hasRequiredApplicator$1=1,Object.defineProperty(applicator$1,"__esModule",{value:!0});const e=requireAdditionalItems$1(),t=requirePrefixItems$1(),r=requireItems$1(),n=requireItems2020$1(),s=requireContains$1(),i=requireDependencies$1(),o=requirePropertyNames$1(),u=requireAdditionalProperties$1(),c=requireProperties$1(),d=requirePatternProperties$1(),m=requireNot$1(),T=requireAnyOf$1(),$=requireOneOf$1(),C=requireAllOf$1(),D=require_if$1(),F=requireThenElse$1();function g(q=!1){const x=[m.default,T.default,$.default,C.default,D.default,F.default,o.default,u.default,i.default,c.default,d.default];return q?x.push(t.default,n.default):x.push(e.default,r.default),x.push(s.default),x}return applicator$1.default=g,applicator$1}var format$1$1={},format$2={},hasRequiredFormat$1$1;function requireFormat$1$1(){if(hasRequiredFormat$1$1)return format$2;hasRequiredFormat$1$1=1,Object.defineProperty(format$2,"__esModule",{value:!0});const e=requireCodegen$1(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,n){const{gen:s,data:i,$data:o,schema:u,schemaCode:c,it:d}=r,{opts:m,errSchemaPath:T,schemaEnv:$,self:C}=d;if(!m.validateFormats)return;o?D():F();function D(){const g=s.scopeValue("formats",{ref:C.formats,code:m.code.formats}),q=s.const("fDef",(0,e._)`${g}[${c}]`),x=s.let("fType"),P=s.let("format");s.if((0,e._)`typeof ${q} == "object" && !(${q} instanceof RegExp)`,()=>s.assign(x,(0,e._)`${q}.type || "string"`).assign(P,(0,e._)`${q}.validate`),()=>s.assign(x,(0,e._)`"string"`).assign(P,q)),r.fail$data((0,e.or)(K(),L()));function K(){return m.strictSchema===!1?e.nil:(0,e._)`${c} && !${P}`}function L(){const B=$.$async?(0,e._)`(${q}.async ? await ${P}(${i}) : ${P}(${i}))`:(0,e._)`${P}(${i})`,J=(0,e._)`(typeof ${P} == "function" ? ${B} : ${P}.test(${i}))`;return(0,e._)`${P} && ${P} !== true && ${x} === ${n} && !${J}`}}function F(){const g=C.formats[u];if(!g){K();return}if(g===!0)return;const[q,x,P]=L(g);q===n&&r.pass(B());function K(){if(m.strictSchema===!1){C.logger.warn(J());return}throw new Error(J());function J(){return`unknown format "${u}" ignored in schema at path "${T}"`}}function L(J){const re=J instanceof RegExp?(0,e.regexpCode)(J):m.code.formats?(0,e._)`${m.code.formats}${(0,e.getProperty)(u)}`:void 0,ve=s.scopeValue("formats",{key:u,ref:J,code:re});return typeof J=="object"&&!(J instanceof RegExp)?[J.type||"string",J.validate,(0,e._)`${ve}.validate`]:["string",J,ve]}function B(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!$.$async)throw new Error("async format in sync schema");return(0,e._)`await ${P}(${i})`}return typeof x=="function"?(0,e._)`${P}(${i})`:(0,e._)`${P}.test(${i})`}}}};return format$2.default=t,format$2}var hasRequiredFormat$2;function requireFormat$2(){if(hasRequiredFormat$2)return format$1$1;hasRequiredFormat$2=1,Object.defineProperty(format$1$1,"__esModule",{value:!0});const e=[requireFormat$1$1().default];return format$1$1.default=e,format$1$1}var metadata$1={},hasRequiredMetadata$1;function requireMetadata$1(){return hasRequiredMetadata$1||(hasRequiredMetadata$1=1,Object.defineProperty(metadata$1,"__esModule",{value:!0}),metadata$1.contentVocabulary=metadata$1.metadataVocabulary=void 0,metadata$1.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata$1.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata$1}var hasRequiredDraft7$1;function requireDraft7$1(){if(hasRequiredDraft7$1)return draft7$1;hasRequiredDraft7$1=1,Object.defineProperty(draft7$1,"__esModule",{value:!0});const e=requireCore$2(),t=requireValidation$1(),r=requireApplicator$1(),n=requireFormat$2(),s=requireMetadata$1(),i=[e.default,t.default,(0,r.default)(),n.default,s.metadataVocabulary,s.contentVocabulary];return draft7$1.default=i,draft7$1}var discriminator$1={},types$1={},hasRequiredTypes$1;function requireTypes$1(){if(hasRequiredTypes$1)return types$1;hasRequiredTypes$1=1,Object.defineProperty(types$1,"__esModule",{value:!0}),types$1.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(types$1.DiscrError=e={})),types$1}var hasRequiredDiscriminator$1;function requireDiscriminator$1(){if(hasRequiredDiscriminator$1)return discriminator$1;hasRequiredDiscriminator$1=1,Object.defineProperty(discriminator$1,"__esModule",{value:!0});const e=requireCodegen$1(),t=requireTypes$1(),r=requireCompile$1(),n=requireRef_error$1(),s=requireUtil$1(),i={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:o,tagName:u}})=>o===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:o,tag:u,tagName:c}})=>(0,e._)`{error: ${o}, tag: ${c}, tagValue: ${u}}`},code(o){const{gen:u,data:c,schema:d,parentSchema:m,it:T}=o,{oneOf:$}=m;if(!T.opts.discriminator)throw new Error("discriminator: requires discriminator option");const C=d.propertyName;if(typeof C!="string")throw new Error("discriminator: requires propertyName");if(d.mapping)throw new Error("discriminator: mapping is not supported");if(!$)throw new Error("discriminator: requires oneOf keyword");const D=u.let("valid",!1),F=u.const("tag",(0,e._)`${c}${(0,e.getProperty)(C)}`);u.if((0,e._)`typeof ${F} == "string"`,()=>g(),()=>o.error(!1,{discrError:t.DiscrError.Tag,tag:F,tagName:C})),o.ok(D);function g(){const P=x();u.if(!1);for(const K in P)u.elseIf((0,e._)`${F} === ${K}`),u.assign(D,q(P[K]));u.else(),o.error(!1,{discrError:t.DiscrError.Mapping,tag:F,tagName:C}),u.endIf()}function q(P){const K=u.name("valid"),L=o.subschema({keyword:"oneOf",schemaProp:P},K);return o.mergeEvaluated(L,e.Name),K}function x(){var P;const K={},L=J(m);let B=!0;for(let ye=0;ye<$.length;ye++){let Se=$[ye];if(Se?.$ref&&!(0,s.schemaHasRulesButRef)(Se,T.self.RULES)){const Ke=Se.$ref;if(Se=r.resolveRef.call(T.self,T.schemaEnv.root,T.baseId,Ke),Se instanceof r.SchemaEnv&&(Se=Se.schema),Se===void 0)throw new n.default(T.opts.uriResolver,T.baseId,Ke)}const Ne=(P=Se?.properties)===null||P===void 0?void 0:P[C];if(typeof Ne!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${C}"`);B=B&&(L||J(Se)),re(Ne,ye)}if(!B)throw new Error(`discriminator: "${C}" must be required`);return K;function J({required:ye}){return Array.isArray(ye)&&ye.includes(C)}function re(ye,Se){if(ye.const)ve(ye.const,Se);else if(ye.enum)for(const Ne of ye.enum)ve(Ne,Se);else throw new Error(`discriminator: "properties/${C}" must have "const" or "enum"`)}function ve(ye,Se){if(typeof ye!="string"||ye in K)throw new Error(`discriminator: "${C}" values must be unique strings`);K[ye]=Se}}}};return discriminator$1.default=i,discriminator$1}const $schema$1="http://json-schema.org/draft-07/schema#",$id$2="http://json-schema.org/draft-07/schema#",title$1="Core schema meta-schema",definitions$1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$2=["object","boolean"],properties$3={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3$1={$schema:$schema$1,$id:$id$2,title:title$1,definitions:definitions$1,type:type$2,properties:properties$3,default:!0};var hasRequiredAjv$1;function requireAjv$1(){return hasRequiredAjv$1||(hasRequiredAjv$1=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=requireCore$1$1(),n=requireDraft7$1(),s=requireDiscriminator$1(),i=require$$3$1,o=["/properties"],u="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(D=>this.addVocabulary(D)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const D=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(D,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=requireValidate$1();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var m=requireCodegen$1();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var T=requireValidation_error$1();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return T.default}});var $=requireRef_error$1();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return $.default}})})(ajv$1,ajv$1.exports)),ajv$1.exports}requireAjv$1();function __awaiter$3(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(m){try{d(n.next(m))}catch(T){o(T)}}function c(m){try{d(n.throw(m))}catch(T){o(T)}}function d(m){m.done?i(m.value):s(m.value).then(u,c)}d((n=n.apply(e,[])).next())})}function __generator$2(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(m){return c([d,m])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __read$1(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(u){o={error:u}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function __spreadArray$1(e,t,r){if(arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var defaultErrorConfig$1={withStackTrace:!1},createNeverThrowError$1=function(e,t,r){r===void 0&&(r=defaultErrorConfig$1);var n=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},s=r.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:s}},Result$1;(function(e){function t(r,n){return function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];try{var o=r.apply(void 0,__spreadArray$1([],__read$1(s),!1));return ok$2(o)}catch(u){return err$2(n?n(u):u)}}}e.fromThrowable=t})(Result$1||(Result$1={}));var ok$2=function(e){return new Ok$2(e)},err$2=function(e){return new Err$2(e)},Ok$2=(function(){function e(t){this.value=t}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$2(t(this.value))},e.prototype.mapErr=function(t){return ok$2(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.orElse=function(t){return ok$2(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$2.fromSafePromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype.match=function(t,r){return t(this.value)},e.prototype._unsafeUnwrap=function(t){return this.value},e.prototype._unsafeUnwrapErr=function(t){throw createNeverThrowError$1("Called `_unsafeUnwrapErr` on an Ok",this,t)},e})(),Err$2=(function(){function e(t){this.error=t}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$2(this.error)},e.prototype.mapErr=function(t){return err$2(t(this.error))},e.prototype.andThen=function(t){return err$2(this.error)},e.prototype.orElse=function(t){return t(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$2(this.error)},e.prototype.asyncMap=function(t){return errAsync$2(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype.match=function(t,r){return r(this.error)},e.prototype._unsafeUnwrap=function(t){throw createNeverThrowError$1("Called `_unsafeUnwrap` on an Err",this,t)},e.prototype._unsafeUnwrapErr=function(t){return this.error},e})();Result$1.fromThrowable;var ResultAsync$2=(function(){function e(t){this._promise=t}return e.fromSafePromise=function(t){var r=t.then(function(n){return new Ok$2(n)});return new e(r)},e.fromPromise=function(t,r){var n=t.then(function(s){return new Ok$2(s)}).catch(function(s){return new Err$2(r(s))});return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){var s;return __generator$2(this,function(i){switch(i.label){case 0:return n.isErr()?[2,new Err$2(n.error)]:(s=Ok$2.bind,[4,t(n.value)]);case 1:return[2,new(s.apply(Ok$2,[void 0,i.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){var s;return __generator$2(this,function(i){switch(i.label){case 0:return n.isOk()?[2,new Ok$2(n.value)]:(s=Err$2.bind,[4,t(n.error)]);case 1:return[2,new(s.apply(Err$2,[void 0,i.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$2(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.orElse=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$3(r,void 0,void 0,function(){return __generator$2(this,function(s){return n.isErr()?[2,t(n.error)]:[2,new Ok$2(n.value)]})})}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t,r){return this._promise.then(t,r)},e})(),errAsync$2=function(e){return new ResultAsync$2(Promise.resolve(new Err$2(e)))};ResultAsync$2.fromPromise;ResultAsync$2.fromSafePromise;let blockEndNewlines$1;try{blockEndNewlines$1=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{blockEndNewlines$1=/\n+(?!\n|$)/g}new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function decodeImplVars$1(e){const t={};for(const[r,n]of Object.entries(e.varInstances)){const s=[];for(const i of n){const o=e.varTypes[i[0]],u=e.variables[i[1]];let c=u.i,d=u.n;if(i.length>2){const T=[],$=[],C=(i.length-2)/2,D=i.slice(2,2+C);for(const F of D){const g=e.subscripts[F];T.push(g.i),$.push(g.n)}c+=`[${T.join(",")}]`,d+=`[${$.join(",")}]`}const m={varId:c,varName:d,varType:o,varIndex:u.x,subscriptIndices:i.length>2?i.slice(2+(i.length-2)/2):void 0};s.push(m)}t[r]=s}return t}function getImplVars$1(e){const t=decodeImplVars$1(e),r=new Map,n=[];function s(i,o){const u=[];for(const c of o){if(c.varType==="lookup"||c.varType==="data")continue;const d=`ModelImpl_${c.varId}`;r.set(d,c),u.push(d)}n.push({title:i,fn:i,datasetKeys:u})}return s("initConstants",t.constants||[]),s("initLevels",t.initVars||[]),s("evalLevels",t.levelVars||[]),s("evalAux",t.auxVars||[]),{implVars:r,implVarGroups:n}}function getInputVars$1(e){const t=new Map;for(const r of e){const n=r.varId,s={inputId:r.inputId,varId:n,varName:r.varName,defaultValue:r.defaultValue,minValue:r.minValue,maxValue:r.maxValue,value:createInputValue$1(n,r.defaultValue)};t.set(n,s)}return t}function setInputsForScenario$1(e,t){function r(d,m){m<d.minValue?(console.warn(`WARNING: Scenario input value ${m} is < min value (${d.minValue}) for input '${d.varName}'`),m=d.minValue):m>d.maxValue&&(console.warn(`WARNING: Scenario input value ${m} is > max value (${d.maxValue}) for input '${d.varName}'`),m=d.maxValue),d.value.set(m)}function n(d){d.value.reset()}function s(d){d.value.set(d.minValue)}function i(d){d.value.set(d.maxValue)}function o(){e.forEach(n)}function u(){e.forEach(s)}function c(){e.forEach(i)}switch(t.kind){case"all-inputs":{switch(t.position){case"at-default":o();break;case"at-minimum":u();break;case"at-maximum":c();break}break}case"input-settings":{o();for(const d of t.settings){const m=e.get(d.inputVarId);if(m)switch(d.kind){case"position":switch(d.position){case"at-default":n(m);break;case"at-minimum":s(m);break;case"at-maximum":i(m);break;default:assertNeverExports$1.assertNever(d.position)}break;case"value":r(m,d.value);break;default:assertNeverExports$1.assertNever(d)}else console.log(`No model input for scenario input ${d.inputVarId}`)}break}default:assertNeverExports$1.assertNever(t)}}function getOutputVars$1(e){const t=new Map;for(const r of e){const n=r.varId,s=datasetKeyForOutputVar$1(void 0,n);t.set(s,{datasetKey:s,sourceName:void 0,varId:n,varName:r.varName})}return t}function datasetKeyForOutputVar$1(e,t){return`Model_${t}`}const inputSpecs$1=[{inputId:"1",varId:"_initial_contact_rate",varName:"Initial Contact Rate",defaultValue:2.5,minValue:0,maxValue:5},{inputId:"2",varId:"_infectivity_i",varName:"Infectivity i",defaultValue:.25,minValue:-2,maxValue:2},{inputId:"3",varId:"_average_duration_of_illness_d",varName:"Average Duration of Illness d",defaultValue:2,minValue:0,maxValue:10}],outputSpecs$1=[{varId:"_infection_rate",varName:"Infection Rate"},{varId:"_infectious_population_i",varName:"Infectious Population I"},{varId:"_recovered_population_r",varName:"Recovered Population R"},{varId:"_recovery_rate",varName:"Recovery Rate"},{varId:"_susceptible_population_s",varName:"Susceptible Population S"}],encodedImplVars$1={subscripts:[],variables:[{n:"Average Duration of Illness d",i:"_average_duration_of_illness_d",x:1},{n:"FINAL TIME",i:"_final_time",x:2},{n:"INITIAL TIME",i:"_initial_time",x:3},{n:"Infectivity i",i:"_infectivity_i",x:4},{n:"Initial Contact Rate",i:"_initial_contact_rate",x:5},{n:"SAVEPER",i:"_saveper",x:6},{n:"TIME STEP",i:"_time_step",x:7},{n:"Total Population P",i:"_total_population_p",x:8},{n:"Recovered Population R",i:"_recovered_population_r",x:9},{n:"Infectious Population I",i:"_infectious_population_i",x:10},{n:"Susceptible Population S",i:"_susceptible_population_s",x:11},{n:"Recovery Rate",i:"_recovery_rate",x:12},{n:"Contact Rate c",i:"_contact_rate_c",x:13},{n:"Infection Rate",i:"_infection_rate",x:14}],varTypes:["const","level","aux"],varInstances:{constants:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7]],lookupVars:[],dataVars:[],initVars:[[1,8],[1,9],[1,10]],levelVars:[[1,9],[1,8],[1,10]],auxVars:[[2,11],[2,12],[2,13]]}},modelSizeInBytes$1=7601,dataSizeInBytes$1=0,modelWorkerJs$1='(function(){"use strict";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var worker={},isObservable,hasRequiredIsObservable;function requireIsObservable(){return hasRequiredIsObservable||(hasRequiredIsObservable=1,isObservable=e=>e?typeof Symbol.observable=="symbol"&&typeof e[Symbol.observable]=="function"?e===e[Symbol.observable]():typeof e["@@observable"]=="function"?e===e["@@observable"]():!1:!1),isObservable}var common={},serializers={},hasRequiredSerializers;function requireSerializers(){if(hasRequiredSerializers)return serializers;hasRequiredSerializers=1,Object.defineProperty(serializers,"__esModule",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0;function e(t,r){const i=t.deserialize.bind(t),o=t.serialize.bind(t);return{deserialize(a){return r.deserialize(a,i)},serialize(a){return r.serialize(a,o)}}}serializers.extendSerializer=e;const n={deserialize(t){return Object.assign(Error(t.message),{name:t.name,stack:t.stack})},serialize(t){return{__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack}}},s=t=>t&&typeof t=="object"&&"__error_marker"in t&&t.__error_marker==="$$error";return serializers.DefaultSerializer={deserialize(t){return s(t)?n.deserialize(t):t},serialize(t){return t instanceof Error?n.serialize(t):t}},serializers}var hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1,Object.defineProperty(common,"__esModule",{value:!0}),common.serialize=common.deserialize=common.registerSerializer=void 0;const e=requireSerializers();let n=e.DefaultSerializer;function s(i){n=e.extendSerializer(n,i)}common.registerSerializer=s;function t(i){return n.deserialize(i)}common.deserialize=t;function r(i){return n.serialize(i)}return common.serialize=r,common}var transferable={},symbols={},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,Object.defineProperty(symbols,"__esModule",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol("thread.errors"),symbols.$events=Symbol("thread.events"),symbols.$terminate=Symbol("thread.terminate"),symbols.$transferable=Symbol("thread.transferable"),symbols.$worker=Symbol("thread.worker")),symbols}var hasRequiredTransferable;function requireTransferable(){if(hasRequiredTransferable)return transferable;hasRequiredTransferable=1,Object.defineProperty(transferable,"__esModule",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;const e=requireSymbols();function n(r){return!(!r||typeof r!="object")}function s(r){return r&&typeof r=="object"&&r[e.$transferable]}transferable.isTransferDescriptor=s;function t(r,i){if(!i){if(!n(r))throw Error();i=[r]}return{[e.$transferable]:!0,send:r,transferables:i}}return transferable.Transfer=t,transferable}var messages={},hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageType=e.MasterMessageType=void 0,(function(n){n.cancel="cancel",n.run="run"})(e.MasterMessageType||(e.MasterMessageType={})),(function(n){n.error="error",n.init="init",n.result="result",n.running="running",n.uncaughtError="uncaughtError"})(e.WorkerMessageType||(e.WorkerMessageType={}))})(messages)),messages}var implementation={},implementation_browser={},hasRequiredImplementation_browser;function requireImplementation_browser(){if(hasRequiredImplementation_browser)return implementation_browser;hasRequiredImplementation_browser=1,Object.defineProperty(implementation_browser,"__esModule",{value:!0});const e=function(){const r=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!r)},n=function(r,i){self.postMessage(r,i)},s=function(r){const i=a=>{r(a.data)},o=()=>{self.removeEventListener("message",i)};return self.addEventListener("message",i),o};return implementation_browser.default={isWorkerRuntime:e,postMessageToMaster:n,subscribeToMasterMessages:s},implementation_browser}var implementation_tinyWorker={},hasRequiredImplementation_tinyWorker;function requireImplementation_tinyWorker(){if(hasRequiredImplementation_tinyWorker)return implementation_tinyWorker;hasRequiredImplementation_tinyWorker=1,Object.defineProperty(implementation_tinyWorker,"__esModule",{value:!0}),typeof self>"u"&&(commonjsGlobal.self=commonjsGlobal);const e=function(){return!!(typeof self<"u"&&self.postMessage)},n=function(o){self.postMessage(o)};let s=!1;const t=new Set,r=function(o){return s||(self.addEventListener("message",(c=>{t.forEach(l=>l(c.data))})),s=!0),t.add(o),()=>t.delete(o)};return implementation_tinyWorker.default={isWorkerRuntime:e,postMessageToMaster:n,subscribeToMasterMessages:r},implementation_tinyWorker}var implementation_worker_threads={},worker_threads={},hasRequiredWorker_threads;function requireWorker_threads(){if(hasRequiredWorker_threads)return worker_threads;hasRequiredWorker_threads=1,Object.defineProperty(worker_threads,"__esModule",{value:!0});let implementation;function selectImplementation(){return typeof __non_webpack_require__=="function"?__non_webpack_require__("worker_threads"):eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}return worker_threads.default=getImplementation,worker_threads}var hasRequiredImplementation_worker_threads;function requireImplementation_worker_threads(){if(hasRequiredImplementation_worker_threads)return implementation_worker_threads;hasRequiredImplementation_worker_threads=1;var e=implementation_worker_threads&&implementation_worker_threads.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(implementation_worker_threads,"__esModule",{value:!0});const n=e(requireWorker_threads());function s(a){if(!a)throw Error("Invariant violation: MessagePort to parent is not available.");return a}const t=function(){return!n.default().isMainThread},r=function(c,l){s(n.default().parentPort).postMessage(c,l)},i=function(c){const l=n.default().parentPort;if(!l)throw Error("Invariant violation: MessagePort to parent is not available.");const d=g=>{c(g)},p=()=>{s(l).off("message",d)};return s(l).on("message",d),p};function o(){n.default()}return implementation_worker_threads.default={isWorkerRuntime:t,postMessageToMaster:r,subscribeToMasterMessages:i,testImplementation:o},implementation_worker_threads}var hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var e=implementation&&implementation.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(implementation,"__esModule",{value:!0});const n=e(requireImplementation_browser()),s=e(requireImplementation_tinyWorker()),t=e(requireImplementation_worker_threads()),r=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function i(){try{return t.default.testImplementation(),t.default}catch{return s.default}}return implementation.default=r?i():n.default,implementation}var hasRequiredWorker;function requireWorker(){return hasRequiredWorker||(hasRequiredWorker=1,(function(e){var n=worker&&worker.__awaiter||function(u,f,v,w){function O(k){return k instanceof v?k:new v(function(B){B(k)})}return new(v||(v=Promise))(function(k,B){function A(R){try{z(w.next(R))}catch(W){B(W)}}function P(R){try{z(w.throw(R))}catch(W){B(W)}}function z(R){R.done?k(R.value):O(R.value).then(A,P)}z((w=w.apply(u,f||[])).next())})},s=worker&&worker.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;const t=s(requireIsObservable()),r=requireCommon(),i=requireTransferable(),o=requireMessages(),a=s(requireImplementation());var c=requireCommon();Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return c.registerSerializer}});var l=requireTransferable();Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return l.Transfer}}),e.isWorkerRuntime=a.default.isWorkerRuntime;let d=!1;const p=new Map,g=u=>u&&u.type===o.MasterMessageType.cancel,_=u=>u&&u.type===o.MasterMessageType.run,I=u=>t.default(u)||T(u);function T(u){return u&&typeof u=="object"&&typeof u.subscribe=="function"}function E(u){return i.isTransferDescriptor(u)?{payload:u.send,transferables:u.transferables}:{payload:u,transferables:void 0}}function S(){const u={type:o.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(u)}function y(u){const f={type:o.WorkerMessageType.init,exposed:{type:"module",methods:u}};a.default.postMessageToMaster(f)}function h(u,f){const{payload:v,transferables:w}=E(f),O={type:o.WorkerMessageType.error,uid:u,error:r.serialize(v)};a.default.postMessageToMaster(O,w)}function m(u,f,v){const{payload:w,transferables:O}=E(v),k={type:o.WorkerMessageType.result,uid:u,complete:f?!0:void 0,payload:w};a.default.postMessageToMaster(k,O)}function L(u,f){const v={type:o.WorkerMessageType.running,uid:u,resultType:f};a.default.postMessageToMaster(v)}function b(u){try{const f={type:o.WorkerMessageType.uncaughtError,error:r.serialize(u)};a.default.postMessageToMaster(f)}catch(f){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:`,f,`\nOriginal error:`,u)}}function M(u,f,v){return n(this,void 0,void 0,function*(){let w;try{w=f(...v)}catch(k){return h(u,k)}const O=I(w)?"observable":"promise";if(L(u,O),I(w)){const k=w.subscribe(B=>m(u,!1,r.serialize(B)),B=>{h(u,r.serialize(B)),p.delete(u)},()=>{m(u,!0),p.delete(u)});p.set(u,k)}else try{const k=yield w;m(u,!0,r.serialize(k))}catch(k){h(u,r.serialize(k))}})}function q(u){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(d)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(d=!0,typeof u=="function")a.default.subscribeToMasterMessages(f=>{_(f)&&!f.method&&M(f.uid,u,f.args.map(r.deserialize))}),S();else if(typeof u=="object"&&u){a.default.subscribeToMasterMessages(v=>{_(v)&&v.method&&M(v.uid,u[v.method],v.args.map(r.deserialize))});const f=Object.keys(u).filter(v=>typeof u[v]=="function");y(f)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${u}`);a.default.subscribeToMasterMessages(f=>{if(g(f)){const v=f.uid,w=p.get(v);w&&(w.unsubscribe(),p.delete(v))}})}e.expose=q,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",u=>{setTimeout(()=>b(u.error||u),250)}),self.addEventListener("unhandledrejection",u=>{const f=u.reason;f&&typeof f.message=="string"&&setTimeout(()=>b(f),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",u=>{setTimeout(()=>b(u),250)}),process.on("unhandledRejection",u=>{u&&typeof u.message=="string"&&setTimeout(()=>b(u),250)}))})(worker)),worker}var workerExports=requireWorker();const WorkerContext=getDefaultExportFromCjs(workerExports),expose=WorkerContext.expose;WorkerContext.registerSerializer;const Transfer=WorkerContext.Transfer;function getEncodedVarIndicesLength(e){var n;let s=1;for(const t of e){s+=2;const r=((n=t.subscriptIndices)==null?void 0:n.length)||0;s+=r}return s}function encodeVarIndices(e,n){let s=0;n[s++]=e.length;for(const t of e){n[s++]=t.varIndex;const r=t.subscriptIndices,i=r?.length||0;n[s++]=i;for(let o=0;o<i;o++)n[s++]=r[o]}}function getEncodedLookupBufferLengths(e){var n,s;let t=1,r=0;for(const i of e){const o=i.varRef.varSpec;if(o===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");t+=2;const a=((n=o.subscriptIndices)==null?void 0:n.length)||0;t+=a,t+=2,r+=((s=i.points)==null?void 0:s.length)||0}return{lookupIndicesLength:t,lookupsLength:r}}function encodeLookups(e,n,s){let t=0;n[t++]=e.length;let r=0;for(const i of e){const o=i.varRef.varSpec;n[t++]=o.varIndex;const a=o.subscriptIndices,c=a?.length||0;n[t++]=c;for(let l=0;l<c;l++)n[t++]=a[l];i.points!==void 0?(n[t++]=r,n[t++]=i.points.length,s?.set(i.points,r),r+=i.points.length):(n[t++]=-1,n[t++]=0)}}function decodeLookups(e,n){const s=[];let t=0;const r=e[t++];for(let i=0;i<r;i++){const o=e[t++],a=e[t++],c=a>0?Array(a):void 0;for(let _=0;_<a;_++)c[_]=e[t++];const l=e[t++],d=e[t++],p={varIndex:o,subscriptIndices:c};let g;l>=0?n?g=n.slice(l,l+d):g=new Float64Array(0):g=void 0,s.push({varRef:{varSpec:p},points:g})}return s}function resolveVarRef(e,n,s){if(!n.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${s} variable references by name or identifier when model listing is unavailable`);if(n.varId){const t=e?.getSpecForVarId(n.varId);if(t)n.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varId=${n.varId}`)}else{const t=e?.getSpecForVarName(n.varName);if(t)n.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varName=\'${n.varId}\'`)}}}var headerLengthInElements=16,extrasLengthInElements=1,Int32Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,n,s){this.view=s>0?new Int32Array(e,n,s):void 0,this.offsetInBytes=n,this.lengthInElements=s}},Float64Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,n,s){this.view=s>0?new Float64Array(e,n,s):void 0,this.offsetInBytes=n,this.lengthInElements=s}},BufferedRunModelParams=class{constructor(e){this.listing=e,this.header=new Int32Section,this.extras=new Float64Section,this.inputs=new Float64Section,this.outputs=new Float64Section,this.outputIndices=new Int32Section,this.lookups=new Float64Section,this.lookupIndices=new Int32Section}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(e,n){this.inputs.lengthInElements!==0&&((e===void 0||e.length<this.inputs.lengthInElements)&&(e=n(this.inputs.lengthInElements)),e.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(e,n){this.outputIndices.lengthInElements!==0&&((e===void 0||e.length<this.outputIndices.lengthInElements)&&(e=n(this.outputIndices.lengthInElements)),e.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(e){this.outputs.view!==void 0&&(e.length>this.outputs.view.length?this.outputs.view.set(e.subarray(0,this.outputs.view.length)):this.outputs.view.set(e))}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(e){this.extras.view[0]=e}finalizeOutputs(e){this.outputs.view&&e.updateFromBuffer(this.outputs.view,e.seriesLength),e.runTimeInMillis=this.getElapsedTime()}updateFromParams(e,n,s){const t=e.length,r=n.varIds.length*n.seriesLength;let i;const o=n.varSpecs;o!==void 0&&o.length>0?i=getEncodedVarIndicesLength(o):i=0;let a,c;if(s?.lookups!==void 0&&s.lookups.length>0){for(const M of s.lookups)resolveVarRef(this.listing,M.varRef,"lookup");const b=getEncodedLookupBufferLengths(s.lookups);a=b.lookupsLength,c=b.lookupIndicesLength}else a=0,c=0;let l=0;function d(b,M){const q=l,u=b==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,f=Math.round(M*u),v=Math.ceil(f/8)*8;return l+=v,q}const p=d("int32",headerLengthInElements),g=d("float64",extrasLengthInElements),_=d("float64",t),I=d("float64",r),T=d("int32",i),E=d("float64",a),S=d("int32",c),y=l;if(this.encoded===void 0||this.encoded.byteLength<y){const b=Math.ceil(y*1.2);this.encoded=new ArrayBuffer(b),this.header.update(this.encoded,p,headerLengthInElements)}const h=this.header.view;let m=0;h[m++]=g,h[m++]=extrasLengthInElements,h[m++]=_,h[m++]=t,h[m++]=I,h[m++]=r,h[m++]=T,h[m++]=i,h[m++]=E,h[m++]=a,h[m++]=S,h[m++]=c,this.inputs.update(this.encoded,_,t),this.extras.update(this.encoded,g,extrasLengthInElements),this.outputs.update(this.encoded,I,r),this.outputIndices.update(this.encoded,T,i),this.lookups.update(this.encoded,E,a),this.lookupIndices.update(this.encoded,S,c);const L=this.inputs.view;for(let b=0;b<e.length;b++){const M=e[b];typeof M=="number"?L[b]=M:L[b]=M.get()}this.outputIndices.view&&encodeVarIndices(o,this.outputIndices.view),c>0&&encodeLookups(s.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(e){const n=headerLengthInElements*Int32Array.BYTES_PER_ELEMENT;if(e.byteLength<n)throw new Error("Buffer must be long enough to contain header section");this.encoded=e,this.header.update(this.encoded,0,headerLengthInElements);const t=this.header.view;let r=0;const i=t[r++],o=t[r++],a=t[r++],c=t[r++],l=t[r++],d=t[r++],p=t[r++],g=t[r++],_=t[r++],I=t[r++],T=t[r++],E=t[r++],S=o*Float64Array.BYTES_PER_ELEMENT,y=c*Float64Array.BYTES_PER_ELEMENT,h=d*Float64Array.BYTES_PER_ELEMENT,m=g*Int32Array.BYTES_PER_ELEMENT,L=I*Float64Array.BYTES_PER_ELEMENT,b=E*Int32Array.BYTES_PER_ELEMENT,M=n+S+y+h+m+L+b;if(e.byteLength<M)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,i,o),this.inputs.update(this.encoded,a,c),this.outputs.update(this.encoded,l,d),this.outputIndices.update(this.encoded,p,g),this.lookups.update(this.encoded,_,I),this.lookupIndices.update(this.encoded,T,E)}},_NA_=-Number.MAX_VALUE,JsModelLookup=class{constructor(e,n){if(n&&n.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${n.length} size=${e}`);this.originalData=n,this.originalSize=e,this.dynamicData=void 0,this.dynamicSize=0,this.activeData=this.originalData,this.activeSize=this.originalSize,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}setData(e,n){if(n){if(n.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${n.length} size=${e}`);const s=e*2;if((this.dynamicData===void 0||s>this.dynamicData.length)&&(this.dynamicData=new Float64Array(s)),this.dynamicSize=e,e>0){const t=n.subarray(0,s);this.dynamicData.set(t)}this.activeData=this.dynamicData,this.activeSize=this.dynamicSize}else this.activeData=this.originalData,this.activeSize=this.originalSize;this.invertedData=void 0,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}getValueForX(e,n){return this.getValue(e,!1,n)}getValueForY(e){if(this.invertedData===void 0){const n=this.activeSize*2,s=this.activeData,t=Array(n);for(let r=0;r<n;r+=2)t[r]=s[r+1],t[r+1]=s[r];this.invertedData=t}return this.getValue(e,!0,"interpolate")}getValue(e,n,s){if(this.activeSize===0)return _NA_;const t=n?this.invertedData:this.activeData,r=this.activeSize*2,i=!n;let o;i&&e>=this.lastInput?o=this.lastHitIndex:o=0;for(let a=o;a<r;a+=2){const c=t[a];if(c>=e){if(i&&(this.lastInput=e,this.lastHitIndex=a),a===0||c===e)return t[a+1];switch(s){default:case"interpolate":{const l=t[a-2],d=t[a-1],p=t[a+1],g=c-l,_=p-d;return d+_/g*(e-l)}case"forward":return t[a+1];case"backward":return t[a-1]}}}return i&&(this.lastInput=e,this.lastHitIndex=r),t[r-1]}getValueForGameTime(e,n){if(this.activeSize<=0)return n;const s=this.activeData[0];return e<s?n:this.getValue(e,!1,"backward")}getValueBetweenTimes(e,n){if(this.activeSize===0)return _NA_;const s=this.activeData,t=this.activeSize*2;switch(n){case"forward":{e=Math.floor(e);for(let r=0;r<t;r+=2)if(s[r]>=e)return s[r+1];return s[t-1]}case"backward":{e=Math.floor(e);for(let r=2;r<t;r+=2)if(s[r]>=e)return s[r-1];return t>=4?s[t-3]:s[1]}case"interpolate":default:{if(e-Math.floor(e)>0){let r=`GET DATA BETWEEN TIMES was called with an input value (${e}) that has a fractional part. `;throw r+="When mode is 0 (interpolate) and the input value is not a whole number, Vensim produces unexpected ",r+="results that may differ from those produced by SDEverywhere.",new Error(r)}for(let r=2;r<t;r+=2){const i=s[r];if(i>=e){const o=s[r-2],a=s[r-1],c=s[r+1],l=i-o,d=c-a;return a+d/l*(e-o)}}return s[t-1]}}}},EPSILON=1e-6;function getJsModelFunctions(){let e;const n=new Map,s=new Map;return{setContext(t){e=t},ABS(t){return Math.abs(t)},ARCCOS(t){return Math.acos(t)},ARCSIN(t){return Math.asin(t)},ARCTAN(t){return Math.atan(t)},COS(t){return Math.cos(t)},EXP(t){return Math.exp(t)},GAME(t,r){return t?t.getValueForGameTime(e.currentTime,r):r},INTEG(t,r){return t+r*e.timeStep},INTEGER(t){return Math.trunc(t)},LN(t){return Math.log(t)},MAX(t,r){return Math.max(t,r)},MIN(t,r){return Math.min(t,r)},MODULO(t,r){return t%r},POW(t,r){return Math.pow(t,r)},POWER(t,r){return Math.pow(t,r)},PULSE(t,r){return pulse(e,t,r)},PULSE_TRAIN(t,r,i,o){const a=Math.floor((o-t)/i);for(let c=0;c<=a;c++)if(e.currentTime<=o&&pulse(e,t+c*i,r))return 1;return 0},QUANTUM(t,r){return r<=0?t:r*Math.trunc(t/r)},RAMP(t,r,i){return e.currentTime>r?e.currentTime<i||r>i?t*(e.currentTime-r):t*(i-r):0},SIN(t){return Math.sin(t)},SQRT(t){return Math.sqrt(t)},STEP(t,r){return e.currentTime+e.timeStep/2>r?t:0},TAN(t){return Math.tan(t)},VECTOR_SORT_ORDER(t,r,i){if(r>t.length)throw new Error(`VECTOR SORT ORDER input vector length (${t.length}) must be >= size (${r})`);let o=s.get(r);if(o===void 0){o=Array(r);for(let l=0;l<r;l++)o[l]={x:0,ind:0};s.set(r,o)}let a=n.get(r);a===void 0&&(a=Array(r),n.set(r,a));for(let l=0;l<r;l++)o[l].x=t[l],o[l].ind=l;const c=i>0?1:-1;o.sort((l,d)=>{let p;return l.x<d.x?p=-1:l.x>d.x?p=1:p=0,p*c});for(let l=0;l<r;l++)a[l]=o[l].ind;return a},XIDZ(t,r,i){return Math.abs(r)<EPSILON?i:t/r},ZIDZ(t,r){return Math.abs(r)<EPSILON?0:t/r},createLookup(t,r){return new JsModelLookup(t,r)},LOOKUP(t,r){return t?t.getValueForX(r,"interpolate"):_NA_},LOOKUP_FORWARD(t,r){return t?t.getValueForX(r,"forward"):_NA_},LOOKUP_BACKWARD(t,r){return t?t.getValueForX(r,"backward"):_NA_},LOOKUP_INVERT(t,r){return t?t.getValueForY(r):_NA_},WITH_LOOKUP(t,r){return r?r.getValueForX(t,"interpolate"):_NA_},GET_DATA_BETWEEN_TIMES(t,r,i){let o;return i>=1?o="forward":i<=-1?o="backward":o="interpolate",t?t.getValueBetweenTimes(r,o):_NA_}}}function pulse(e,n,s){const t=e.currentTime+e.timeStep/2;return s===0&&(s=e.timeStep),t>n&&t<n+s?1:0}var isWeb;function perfNow(){return isWeb===void 0&&(isWeb=typeof self<"u"&&self?.performance!==void 0),isWeb?self.performance.now():process==null?void 0:process.hrtime()}function perfElapsed(e){if(isWeb)return self.performance.now()-e;{const n=process.hrtime(e);return(n[0]*1e9+n[1])/1e6}}var BaseRunnableModel=class{constructor(e){this.startTime=e.startTime,this.endTime=e.endTime,this.saveFreq=e.saveFreq,this.numSavePoints=e.numSavePoints,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.onRunModel=e.onRunModel}runModel(e){var n;let s=e.getInputs();s===void 0&&(e.copyInputs(this.inputs,c=>(this.inputs=new Float64Array(c),this.inputs)),s=this.inputs);let t=e.getOutputIndices();t===void 0&&e.getOutputIndicesLength()>0&&(e.copyOutputIndices(this.outputIndices,c=>(this.outputIndices=new Int32Array(c),this.outputIndices)),t=this.outputIndices);const r=e.getOutputsLength();(this.outputs===void 0||this.outputs.length<r)&&(this.outputs=new Float64Array(r));const i=this.outputs,o=perfNow();(n=this.onRunModel)==null||n.call(this,s,i,{outputIndices:t,lookups:e.getLookups()});const a=perfElapsed(o);e.storeOutputs(i),e.storeElapsedTime(a)}terminate(){}};function initJsModel(e){let n=e.getModelFunctions();n===void 0&&(n=getJsModelFunctions(),e.setModelFunctions(n));const s=e.getInitialTime(),t=e.getFinalTime(),r=e.getTimeStep(),i=e.getSaveFreq(),o=Math.round((t-s)/i)+1;return new BaseRunnableModel({startTime:s,endTime:t,saveFreq:i,numSavePoints:o,outputVarIds:e.outputVarIds,modelListing:e.modelListing,onRunModel:(a,c,l)=>{runJsModel(e,s,t,r,i,o,a,c,l?.outputIndices,l?.lookups)}})}function runJsModel(e,n,s,t,r,i,o,a,c,l,d){let p=n;e.setTime(p);const g={timeStep:t,currentTime:p};if(e.getModelFunctions().setContext(g),e.initConstants(),l!==void 0)for(const y of l)e.setLookup(y.varRef.varSpec,y.points);o?.length>0&&e.setInputs(y=>o[y]),e.initLevels();const _=Math.round((s-n)/t),I=s;let T=0,E=0,S=0;for(;T<=_;){if(e.evalAux(),p%r<1e-6){S=0;const y=h=>{const m=S*i+E;a[m]=p<=I?h:void 0,S++};if(c!==void 0){let h=0;const m=c[h++];for(let L=0;L<m;L++){const b=c[h++],M=c[h++];let q;M>0&&(q=c.subarray(h,h+M),h+=M);const u={varIndex:b,subscriptIndices:q};e.storeOutput(u,y)}}else e.storeOutputs(y);E++}if(T===_)break;e.evalLevels(),p+=t,e.setTime(p),g.currentTime=p,T++}}var WasmBuffer=class{constructor(e,n,s,t){this.wasmModule=e,this.numElements=n,this.byteOffset=s,this.heapArray=t}getArrayView(){return this.heapArray}getAddress(){return this.byteOffset}dispose(){var e,n;this.heapArray&&((n=(e=this.wasmModule)._free)==null||n.call(e,this.byteOffset),this.numElements=void 0,this.heapArray=void 0,this.byteOffset=void 0)}};function createInt32WasmBuffer(e,n){const t=n*4,r=e._malloc(t),i=r/4,o=e.HEAP32.subarray(i,i+n);return new WasmBuffer(e,n,r,o)}function createFloat64WasmBuffer(e,n){const t=n*8,r=e._malloc(t),i=r/8,o=e.HEAPF64.subarray(i,i+n);return new WasmBuffer(e,n,r,o)}var WasmModel=class{constructor(e){this.wasmModule=e;function n(s){return e.cwrap(s,"number",[])()}this.startTime=n("getInitialTime"),this.endTime=n("getFinalTime"),this.saveFreq=n("getSaveper"),this.numSavePoints=Math.round((this.endTime-this.startTime)/this.saveFreq)+1,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.wasmSetLookup=e.cwrap("setLookup",null,["number","number","number","number"]),this.wasmRunModel=e.cwrap("runModelWithBuffers",null,["number","number","number"])}runModel(e){var n,s,t,r,i,o,a;const c=e.getLookups();if(c!==void 0)for(const _ of c){const I=_.varRef.varSpec,T=((n=I.subscriptIndices)==null?void 0:n.length)||0;let E;T>0?((this.lookupSubIndicesBuffer===void 0||this.lookupSubIndicesBuffer.numElements<T)&&((s=this.lookupSubIndicesBuffer)==null||s.dispose(),this.lookupSubIndicesBuffer=createInt32WasmBuffer(this.wasmModule,T)),this.lookupSubIndicesBuffer.getArrayView().set(I.subscriptIndices),E=this.lookupSubIndicesBuffer.getAddress()):E=0;let S,y;if(_.points){const m=_.points.length;(this.lookupDataBuffer===void 0||this.lookupDataBuffer.numElements<m)&&((t=this.lookupDataBuffer)==null||t.dispose(),this.lookupDataBuffer=createFloat64WasmBuffer(this.wasmModule,m)),this.lookupDataBuffer.getArrayView().set(_.points),S=this.lookupDataBuffer.getAddress(),y=m/2}else S=0,y=0;const h=I.varIndex;this.wasmSetLookup(h,E,S,y)}e.copyInputs((r=this.inputsBuffer)==null?void 0:r.getArrayView(),_=>{var I;return(I=this.inputsBuffer)==null||I.dispose(),this.inputsBuffer=createFloat64WasmBuffer(this.wasmModule,_),this.inputsBuffer.getArrayView()});let l;e.getOutputIndicesLength()>0?(e.copyOutputIndices((i=this.outputIndicesBuffer)==null?void 0:i.getArrayView(),_=>{var I;return(I=this.outputIndicesBuffer)==null||I.dispose(),this.outputIndicesBuffer=createInt32WasmBuffer(this.wasmModule,_),this.outputIndicesBuffer.getArrayView()}),l=this.outputIndicesBuffer):l=void 0;const d=e.getOutputsLength();(this.outputsBuffer===void 0||this.outputsBuffer.numElements<d)&&((o=this.outputsBuffer)==null||o.dispose(),this.outputsBuffer=createFloat64WasmBuffer(this.wasmModule,d));const p=perfNow();this.wasmRunModel(((a=this.inputsBuffer)==null?void 0:a.getAddress())||0,this.outputsBuffer.getAddress(),l?.getAddress()||0);const g=perfElapsed(p);e.storeOutputs(this.outputsBuffer.getArrayView()),e.storeElapsedTime(g)}terminate(){var e,n,s;(e=this.inputsBuffer)==null||e.dispose(),this.inputsBuffer=void 0,(n=this.outputsBuffer)==null||n.dispose(),this.outputsBuffer=void 0,(s=this.outputIndicesBuffer)==null||s.dispose(),this.outputIndicesBuffer=void 0}};function initWasmModel(e){return new WasmModel(e)}function createRunnableModel(e){switch(e.kind){case"js":return initJsModel(e);case"wasm":return initWasmModel(e);default:throw new Error("Unable to identify generated model kind")}}var initGeneratedModel,runnableModel,params=new BufferedRunModelParams,modelWorker={async initModel(){if(runnableModel)throw new Error("RunnableModel was already initialized");const e=await initGeneratedModel();return runnableModel=createRunnableModel(e),{outputVarIds:runnableModel.outputVarIds,modelListing:runnableModel.modelListing,startTime:runnableModel.startTime,endTime:runnableModel.endTime,saveFreq:runnableModel.saveFreq,outputRowLength:runnableModel.numSavePoints}},runModel(e){if(!runnableModel)throw new Error("RunnableModel must be initialized before running the model in worker");return params.updateFromEncodedBuffer(e),runnableModel.runModel(params),Transfer(e)}};function exposeModelWorker(e){initGeneratedModel=e,expose(modelWorker)}let _average_duration_of_illness_d,_contact_rate_c,_final_time,_infection_rate,_infectious_population_i,_infectivity_i,_initial_contact_rate,_initial_time,_recovered_population_r,_recovery_rate,_saveper,_susceptible_population_s,_time_step,_total_population_p,_time;function setTime(e){_time=e}let controlParamsInitialized=!1;function initControlParamsIfNeeded(){if(!controlParamsInitialized){if(fns===void 0)throw new Error("Must call setModelFunctions() before running the model");if(initConstants(),_initial_time===void 0)throw new Error("INITIAL TIME must be defined as a constant value");if(_time_step===void 0)throw new Error("TIME STEP must be defined as a constant value");if(_final_time===void 0||_saveper===void 0){if(setTime(_initial_time),fns.setContext({timeStep:_time_step,currentTime:_time}),initLevels(),evalAux(),_final_time===void 0)throw new Error("FINAL TIME must be defined");if(_saveper===void 0)throw new Error("SAVEPER must be defined")}controlParamsInitialized=!0}}function getInitialTime(){return initControlParamsIfNeeded(),_initial_time}function getFinalTime(){return initControlParamsIfNeeded(),_final_time}function getTimeStep(){return initControlParamsIfNeeded(),_time_step}function getSaveFreq(){return initControlParamsIfNeeded(),_saveper}let fns;function getModelFunctions(){return fns}function setModelFunctions(e){fns=e}function initConstants0(){_average_duration_of_illness_d=2,_final_time=200,_initial_time=0,_infectivity_i=.25,_initial_contact_rate=2.5,_saveper=1,_time_step=.0625,_total_population_p=1e4}function initConstants(){initConstants0()}function initLevels0(){_recovered_population_r=0,_infectious_population_i=1,_susceptible_population_s=_total_population_p-_infectious_population_i-_recovered_population_r}function initLevels(){initLevels0()}function evalAux0(){_recovery_rate=_infectious_population_i/_average_duration_of_illness_d,_contact_rate_c=_initial_contact_rate,_infection_rate=_contact_rate_c*_infectivity_i*_susceptible_population_s*_infectious_population_i/_total_population_p}function evalAux(){evalAux0()}function evalLevels0(){_infectious_population_i=fns.INTEG(_infectious_population_i,_infection_rate-_recovery_rate),_recovered_population_r=fns.INTEG(_recovered_population_r,_recovery_rate),_susceptible_population_s=fns.INTEG(_susceptible_population_s,-_infection_rate)}function evalLevels(){evalLevels0()}function setInputs(e){_initial_contact_rate=e(0),_infectivity_i=e(1),_average_duration_of_illness_d=e(2)}function setLookup(e,n){throw new Error("The setLookup function was not enabled for the generated model. Set the customLookups property in the spec/config file to allow for overriding lookups at runtime.")}const outputVarIds=["_infection_rate","_infectious_population_i","_recovered_population_r","_recovery_rate","_susceptible_population_s"],outputVarNames=["Infection Rate","Infectious Population I","Recovered Population R","Recovery Rate","Susceptible Population S"];function storeOutputs(e){e(_infection_rate),e(_infectious_population_i),e(_recovered_population_r),e(_recovery_rate),e(_susceptible_population_s)}function storeOutput(e,n){throw new Error("The storeOutput function was not enabled for the generated model. Set the customOutputs property in the spec/config file to allow for capturing arbitrary variables at runtime.")}const modelListing=void 0;async function loadGeneratedModel(){return{kind:"js",outputVarIds,outputVarNames,modelListing,getInitialTime,getFinalTime,getTimeStep,getSaveFreq,getModelFunctions,setModelFunctions,setTime,setInputs,setLookup,storeOutputs,storeOutput,initConstants,initLevels,evalAux,evalLevels}}exposeModelWorker(loadGeneratedModel)})();\n';let BundleModelRunner$1=class{constructor(t,r,n){this.modelSpec=t,this.inputMap=r,this.modelRunner=n,this.inputs=[...r.values()].map(s=>s.value),this.outputs=n.createOutputs()}async runModelForScenario(t,r){return setInputsForScenario$1(this.inputMap,t),r[0]?.startsWith("ModelImpl")?this.runModelWithImplOutputs(r):this.runModelWithNormalOutputs(r)}async runModelWithNormalOutputs(t){this.outputs=await this.modelRunner.runModel(this.inputs,this.outputs);const r=this.outputs.runTimeInMillis,n=new Map;for(const s of t){const i=this.modelSpec.outputVars.get(s);if(i)if(i.sourceName===void 0){const o=this.outputs.getSeriesForVar(i.varId);o&&n.set(s,datasetFromPoints$1(o.points))}else console.error("Static data sources not yet handled in default model check bundle")}return{datasetMap:n,modelRunTime:r}}async runModelWithImplOutputs(t){const r=[];for(const d of t){const m=this.modelSpec.implVars.get(d);m&&r.push(m)}const n=this.outputs.startTime,s=this.outputs.endTime,i=this.outputs.saveFreq;let o=createImplOutputs$1(r,n,s,i);o=await this.modelRunner.runModel(this.inputs,o);const u=o.runTimeInMillis,c=new Map;for(const d of t){const m=this.modelSpec.implVars.get(d),T=o.getSeriesForVar(m.varId);T&&c.set(d,datasetFromPoints$1(T.points))}return{datasetMap:c,modelRunTime:u}}};function datasetFromPoints$1(e){const t=new Map;for(const r of e)r.y!==void 0&&t.set(r.x,r.y);return t}function createImplOutputs$1(e,t,r,n){const s=[],i=[];for(const u of e)s.push(u.varId),i.push({varIndex:u.varIndex,subscriptIndices:u.subscriptIndices});const o=new Outputs$1(s,t,r,n);return o.varSpecs=i,o}const VERSION$1=1;let BundleModel$1=class{constructor(t,r){this.modelSpec=t,this.bundleModelRunner=r}async getDatasetsForScenario(t,r){return this.bundleModelRunner.runModelForScenario(t,r)}async getGraphDataForScenario(){}getGraphLinksForScenario(){return[]}};async function initBundleModel$1(e,t){const r=await spawnAsyncModelRunner$1({source:modelWorkerJs$1}),n=new BundleModelRunner$1(e,t,r);return new BundleModel$1(e,n)}function createBundle$1(){const e=getInputVars$1(inputSpecs$1),t=getOutputVars$1(outputSpecs$1),{implVars:r,implVarGroups:n}=getImplVars$1(encodedImplVars$1),s={modelSizeInBytes:modelSizeInBytes$1,dataSizeInBytes:dataSizeInBytes$1,inputVars:e,outputVars:t,implVars:r,implVarGroups:n};return{version:VERSION$1,modelSpec:s,initModel:()=>initBundleModel$1(s,e)}}var define_process_env_default={};let __non_webpack_require__=()=>worker_threads;const DefaultErrorSerializer={deserialize(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},isSerializedError=e=>e&&typeof e=="object"&&"__error_marker"in e&&e.__error_marker==="$$error",DefaultSerializer={deserialize(e){return isSerializedError(e)?DefaultErrorSerializer.deserialize(e):e},serialize(e){return e instanceof Error?DefaultErrorSerializer.serialize(e):e}};let registeredSerializer=DefaultSerializer;function deserialize(e){return registeredSerializer.deserialize(e)}function serialize(e){return registeredSerializer.serialize(e)}let bundleURL;function getBundleURLCached(){return bundleURL||(bundleURL=getBundleURL()),bundleURL}function getBundleURL(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return getBaseURL(t[0])}return"/"}function getBaseURL(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}const defaultPoolSize$1=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,isAbsoluteURL=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e);function createSourceBlobURL(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function selectWorkerImplementation$1(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(n,s){var i,o;typeof n=="string"&&s&&s._baseURL?n=new URL(n,s._baseURL):typeof n=="string"&&!isAbsoluteURL(n)&&getBundleURLCached().match(/^file:\/\//i)&&(n=new URL(n,getBundleURLCached().replace(/\/[^\/]+$/,"/")),(!((i=s?.CORSWorkaround)!==null&&i!==void 0)||i)&&(n=createSourceBlobURL(`importScripts(${JSON.stringify(n)});`))),typeof n=="string"&&isAbsoluteURL(n)&&(!((o=s?.CORSWorkaround)!==null&&o!==void 0)||o)&&(n=createSourceBlobURL(`importScripts(${JSON.stringify(n)});`)),super(n,s)}}class t extends e{constructor(n,s){const i=window.URL.createObjectURL(n);super(i,s)}static fromText(n,s){const i=new window.Blob([n],{type:"text/javascript"});return new t(i,s)}}return{blob:t,default:e}}let implementation$3;function getWorkerImplementation$2(){return implementation$3||(implementation$3=selectWorkerImplementation$1()),implementation$3}function isWorkerRuntime$4(){const e=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!e)}const BrowserImplementation=Object.freeze(Object.defineProperty({__proto__:null,defaultPoolSize:defaultPoolSize$1,getWorkerImplementation:getWorkerImplementation$2,isWorkerRuntime:isWorkerRuntime$4},Symbol.toStringTag,{value:"Module"})),getCallsites={};let tsNodeAvailable;const defaultPoolSize=cpus().length;function detectTsNode(){if(typeof __non_webpack_require__=="function")return!1;if(tsNodeAvailable)return tsNodeAvailable;try{eval("require").resolve("ts-node"),tsNodeAvailable=!0}catch(e){if(e&&e.code==="MODULE_NOT_FOUND")tsNodeAvailable=!1;else throw e}return tsNodeAvailable}function createTsNodeModule(e){return`
    require("ts-node/register/transpile-only");
    require(${JSON.stringify(e)});
  `}function rebaseScriptPath(e,t){const r=getCallsites().find(i=>{const o=i.getFileName();return!!(o&&!o.match(t)&&!o.match(/[\/\\]master[\/\\]implementation/)&&!o.match(/^internal\/process/))});let s=(r?r.getFileName():null)||null;return s&&s.startsWith("file:")&&(s=fileURLToPath()),s?join():e}function resolveScriptPath(scriptPath,baseURL){const makeRelative=filePath=>join(baseURL||eval("__dirname")),workerFilePath=typeof __non_webpack_require__=="function"?__non_webpack_require__.resolve(makeRelative()):eval("require").resolve(makeRelative(rebaseScriptPath(scriptPath,/[\/\\]worker_threads[\/\\]/)));return workerFilePath}function initWorkerThreadsWorker(){const NativeWorker=typeof __non_webpack_require__=="function"?__non_webpack_require__().Worker:eval("require")("worker_threads").Worker;let allWorkers=[];class Worker extends NativeWorker{constructor(t,r){const n=r&&r.fromSource?null:resolveScriptPath(t,(r||{})._baseURL);if(n)n.match(/\.tsx?$/i)&&detectTsNode()?super(createTsNodeModule(n),Object.assign(Object.assign({},r),{eval:!0})):n.match(/\.asar[\/\\]/)?super(n.replace(/\.asar([\/\\])/,".asar.unpacked$1"),r):super(n,r);else{const s=t;super(s,Object.assign(Object.assign({},r),{eval:!0}))}this.mappedEventListeners=new WeakMap,allWorkers.push(this)}addEventListener(t,r){const n=s=>{r({data:s})};this.mappedEventListeners.set(r,n),this.on(t,n)}removeEventListener(t,r){const n=this.mappedEventListeners.get(r)||r;this.off(t,n)}}const terminateWorkersAndMaster=()=>{Promise.all(allWorkers.map(e=>e.terminate())).then(()=>process.exit(0),()=>process.exit(1)),allWorkers=[]};process.on("SIGINT",()=>terminateWorkersAndMaster()),process.on("SIGTERM",()=>terminateWorkersAndMaster());class BlobWorker extends Worker{constructor(t,r){super(Buffer.from(t).toString("utf-8"),Object.assign(Object.assign({},r),{fromSource:!0}))}static fromText(t,r){return new Worker(t,Object.assign(Object.assign({},r),{fromSource:!0}))}}return{blob:BlobWorker,default:Worker}}function initTinyWorker(){const e=require("tiny-worker");let t=[];class r extends e{constructor(o,u){const c=u&&u.fromSource?null:process.platform==="win32"?`file:///${resolveScriptPath(o).replace(/\\/g,"/")}`:resolveScriptPath(o);if(c)c.match(/\.tsx?$/i)&&detectTsNode()?super(new Function(createTsNodeModule(resolveScriptPath(o))),[],{esm:!0}):c.match(/\.asar[\/\\]/)?super(c.replace(/\.asar([\/\\])/,".asar.unpacked$1"),[],{esm:!0}):super(c,[],{esm:!0});else{const d=o;super(new Function(d),[],{esm:!0})}t.push(this),this.emitter=new EventEmitter,this.onerror=d=>this.emitter.emit("error",d),this.onmessage=d=>this.emitter.emit("message",d)}addEventListener(o,u){this.emitter.addListener(o,u)}removeEventListener(o,u){this.emitter.removeListener(o,u)}terminate(){return t=t.filter(o=>o!==this),super.terminate()}}const n=()=>{Promise.all(t.map(i=>i.terminate())).then(()=>process.exit(0),()=>process.exit(1)),t=[]};process.on("SIGINT",()=>n()),process.on("SIGTERM",()=>n());class s extends r{constructor(o,u){super(Buffer.from(o).toString("utf-8"),Object.assign(Object.assign({},u),{fromSource:!0}))}static fromText(o,u){return new r(o,Object.assign(Object.assign({},u),{fromSource:!0}))}}return{blob:s,default:r}}let implementation$2,isTinyWorker;function selectWorkerImplementation(){try{return isTinyWorker=!1,initWorkerThreadsWorker()}catch{return console.debug("Node worker_threads not available. Trying to fall back to tiny-worker polyfill..."),isTinyWorker=!0,initTinyWorker()}}function getWorkerImplementation$1(){return implementation$2||(implementation$2=selectWorkerImplementation()),implementation$2}function isWorkerRuntime$3(){if(isTinyWorker)return!!(typeof self<"u"&&self.postMessage);{const isMainThread=typeof __non_webpack_require__=="function"?__non_webpack_require__().isMainThread:eval("require")("worker_threads").isMainThread;return!isMainThread}}const NodeImplementation=Object.freeze(Object.defineProperty({__proto__:null,defaultPoolSize,getWorkerImplementation:getWorkerImplementation$1,isWorkerRuntime:isWorkerRuntime$3},Symbol.toStringTag,{value:"Module"})),runningInNode$1=typeof process<"u"&&process.arch!=="browser"&&"pid"in process,implementation$1=runningInNode$1?NodeImplementation:BrowserImplementation,getWorkerImplementation=implementation$1.getWorkerImplementation;function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,r=t*60,n=r*24,s=n*7,i=n*365.25;ms=function(m,T){T=T||{};var $=typeof m;if($==="string"&&m.length>0)return o(m);if($==="number"&&isFinite(m))return T.long?c(m):u(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function o(m){if(m=String(m),!(m.length>100)){var T=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(T){var $=parseFloat(T[1]),C=(T[2]||"ms").toLowerCase();switch(C){case"years":case"year":case"yrs":case"yr":case"y":return $*i;case"weeks":case"week":case"w":return $*s;case"days":case"day":case"d":return $*n;case"hours":case"hour":case"hrs":case"hr":case"h":return $*r;case"minutes":case"minute":case"mins":case"min":case"m":return $*t;case"seconds":case"second":case"secs":case"sec":case"s":return $*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}}}function u(m){var T=Math.abs(m);return T>=n?Math.round(m/n)+"d":T>=r?Math.round(m/r)+"h":T>=t?Math.round(m/t)+"m":T>=e?Math.round(m/e)+"s":m+"ms"}function c(m){var T=Math.abs(m);return T>=n?d(m,T,n,"day"):T>=r?d(m,T,r,"hour"):T>=t?d(m,T,t,"minute"):T>=e?d(m,T,e,"second"):m+" ms"}function d(m,T,$,C){var D=T>=$*1.5;return Math.round(m/$)+" "+C+(D?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){n.debug=n,n.default=n,n.coerce=d,n.disable=u,n.enable=i,n.enabled=c,n.humanize=requireMs(),n.destroy=m,Object.keys(t).forEach(T=>{n[T]=t[T]}),n.names=[],n.skips=[],n.formatters={};function r(T){let $=0;for(let C=0;C<T.length;C++)$=($<<5)-$+T.charCodeAt(C),$|=0;return n.colors[Math.abs($)%n.colors.length]}n.selectColor=r;function n(T){let $,C=null,D,F;function g(...q){if(!g.enabled)return;const x=g,P=Number(new Date),K=P-($||P);x.diff=K,x.prev=$,x.curr=P,$=P,q[0]=n.coerce(q[0]),typeof q[0]!="string"&&q.unshift("%O");let L=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(B,J)=>{if(B==="%%")return"%";L++;const re=n.formatters[J];if(typeof re=="function"){const ve=q[L];B=re.call(x,ve),q.splice(L,1),L--}return B}),n.formatArgs.call(x,q),(x.log||n.log).apply(x,q)}return g.namespace=T,g.useColors=n.useColors(),g.color=n.selectColor(T),g.extend=s,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>C!==null?C:(D!==n.namespaces&&(D=n.namespaces,F=n.enabled(T)),F),set:q=>{C=q}}),typeof n.init=="function"&&n.init(g),g}function s(T,$){const C=n(this.namespace+(typeof $>"u"?":":$)+T);return C.log=this.log,C}function i(T){n.save(T),n.namespaces=T,n.names=[],n.skips=[];const $=(typeof T=="string"?T:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const C of $)C[0]==="-"?n.skips.push(C.slice(1)):n.names.push(C)}function o(T,$){let C=0,D=0,F=-1,g=0;for(;C<T.length;)if(D<$.length&&($[D]===T[C]||$[D]==="*"))$[D]==="*"?(F=D,g=C,D++):(C++,D++);else if(F!==-1)D=F+1,g++,C=g;else return!1;for(;D<$.length&&$[D]==="*";)D++;return D===$.length}function u(){const T=[...n.names,...n.skips.map($=>"-"+$)].join(",");return n.enable(""),T}function c(T){for(const $ of n.skips)if(o(T,$))return!1;for(const $ of n.names)if(o(T,$))return!0;return!1}function d(T){return T instanceof Error?T.stack||T.message:T}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return common=e,common}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(e,t){t.formatArgs=n,t.save=s,t.load=i,t.useColors=r,t.storage=o(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let m=0,T=0;c[0].replace(/%[a-zA-Z%]/g,$=>{$!=="%%"&&(m++,$==="%c"&&(T=m))}),c.splice(T,0,d)}t.log=console.debug||console.log||(()=>{});function s(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function i(){let c;try{c=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=define_process_env_default.DEBUG),c}function o(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:u}=e.exports;u.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(browser,browser.exports)),browser.exports}var browserExports=requireBrowser();const DebugLogger=getDefaultExportFromCjs(browserExports),hasSymbols=()=>typeof Symbol=="function",hasSymbol=e=>hasSymbols()&&!!Symbol[e],getSymbol=e=>hasSymbol(e)?Symbol[e]:"@@"+e;hasSymbol("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const SymbolIterator=getSymbol("iterator"),SymbolObservable=getSymbol("observable"),SymbolSpecies=getSymbol("species");function getMethod(e,t){const r=e[t];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function getSpecies(e){let t=e.constructor;return t!==void 0&&(t=t[SymbolSpecies],t===null&&(t=void 0)),t!==void 0?t:Observable}function isObservable(e){return e instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout(()=>{throw e},0)}function enqueue(e){Promise.resolve().then(()=>{try{e()}catch(t){hostReportError(t)}})}function cleanupSubscription(e){const t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{const r=getMethod(t,"unsubscribe");r&&r.call(t)}}catch(r){hostReportError(r)}}function closeSubscription(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function flushSubscription(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const r of t)if(notifySubscription(e,r.type,r.value),e._state==="closed")break}}function notifySubscription(e,t,r){e._state="running";const n=e._observer;try{const s=n?getMethod(n,t):void 0;switch(t){case"next":s&&s.call(n,r);break;case"error":if(closeSubscription(e),s)s.call(n,r);else throw r;break;case"complete":closeSubscription(e),s&&s.call(n);break}}catch(s){hostReportError(s)}e._state==="closed"?cleanupSubscription(e):e._state==="running"&&(e._state="ready")}function onNotify(e,t,r){if(e._state!=="closed"){if(e._state==="buffering"){e._queue=e._queue||[],e._queue.push({type:t,value:r});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:r}],enqueue(()=>flushSubscription(e));return}notifySubscription(e,t,r)}}class Subscription{constructor(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";const n=new SubscriptionObserver(this);try{this._cleanup=r.call(void 0,n)}catch(s){n.error(s)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(closeSubscription(this),cleanupSubscription(this))}}class SubscriptionObserver{constructor(t){this._subscription=t}get closed(){return this._subscription._state==="closed"}next(t){onNotify(this._subscription,"next",t)}error(t){onNotify(this._subscription,"error",t)}complete(){onNotify(this._subscription,"complete")}}class Observable{constructor(t){if(!(this instanceof Observable))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}subscribe(t,r,n){return(typeof t!="object"||t===null)&&(t={next:t,error:r,complete:n}),new Subscription(t,this._subscriber)}pipe(t,...r){let n=this;for(const s of[t,...r])n=s(n);return n}tap(t,r,n){const s=typeof t!="object"||t===null?{next:t,error:r,complete:n}:t;return new Observable(i=>this.subscribe({next(o){s.next&&s.next(o),i.next(o)},error(o){s.error&&s.error(o),i.error(o)},complete(){s.complete&&s.complete(),i.complete()},start(o){s.start&&s.start(o)}}))}forEach(t){return new Promise((r,n)=>{if(typeof t!="function"){n(new TypeError(t+" is not a function"));return}function s(){i.unsubscribe(),r(void 0)}const i=this.subscribe({next(o){try{t(o,s)}catch(u){n(u),i.unsubscribe()}},error(o){n(o)},complete(){r(void 0)}})})}map(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>this.subscribe({next(s){let i=s;try{i=t(s)}catch(o){return n.error(o)}n.next(i)},error(s){n.error(s)},complete(){n.complete()}}))}filter(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>this.subscribe({next(s){try{if(!t(s))return}catch(i){return n.error(i)}n.next(s)},error(s){n.error(s)},complete(){n.complete()}}))}reduce(t,r){if(typeof t!="function")throw new TypeError(t+" is not a function");const n=getSpecies(this),s=arguments.length>1;let i=!1,o=r;return new n(u=>this.subscribe({next(c){const d=!i;if(i=!0,!d||s)try{o=t(o,c)}catch(m){return u.error(m)}else o=c},error(c){u.error(c)},complete(){if(!i&&!s)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(o),u.complete()}}))}concat(...t){const r=getSpecies(this);return new r(n=>{let s,i=0;function o(u){s=u.subscribe({next(c){n.next(c)},error(c){n.error(c)},complete(){i===t.length?(s=void 0,n.complete()):o(r.from(t[i++]))}})}return o(this),()=>{s&&(s.unsubscribe(),s=void 0)}})}flatMap(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=getSpecies(this);return new r(n=>{const s=[],i=this.subscribe({next(u){let c;if(t)try{c=t(u)}catch(m){return n.error(m)}else c=u;const d=r.from(c).subscribe({next(m){n.next(m)},error(m){n.error(m)},complete(){const m=s.indexOf(d);m>=0&&s.splice(m,1),o()}});s.push(d)},error(u){n.error(u)},complete(){o()}});function o(){i.closed&&s.length===0&&n.complete()}return()=>{s.forEach(u=>u.unsubscribe()),i.unsubscribe()}})}[SymbolObservable](){return this}static from(t){const r=typeof this=="function"?this:Observable;if(t==null)throw new TypeError(t+" is not an object");const n=getMethod(t,SymbolObservable);if(n){const s=n.call(t);if(Object(s)!==s)throw new TypeError(s+" is not an object");return isObservable(s)&&s.constructor===r?s:new r(i=>s.subscribe(i))}if(hasSymbol("iterator")){const s=getMethod(t,SymbolIterator);if(s)return new r(i=>{enqueue(()=>{if(!i.closed){for(const o of s.call(t))if(i.next(o),i.closed)return;i.complete()}})})}if(Array.isArray(t))return new r(s=>{enqueue(()=>{if(!s.closed){for(const i of t)if(s.next(i),s.closed)return;s.complete()}})});throw new TypeError(t+" is not observable")}static of(...t){const r=typeof this=="function"?this:Observable;return new r(n=>{enqueue(()=>{if(!n.closed){for(const s of t)if(n.next(s),n.closed)return;n.complete()}})})}static get[SymbolSpecies](){return this}}hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:SymbolObservable,hostReportError},configurable:!0});function unsubscribe(e){typeof e=="function"?e():e&&typeof e.unsubscribe=="function"&&e.unsubscribe()}class MulticastSubject extends Observable{constructor(){super(t=>(this._observers.add(t),()=>this._observers.delete(t))),this._observers=new Set}next(t){for(const r of this._observers)r.next(t)}error(t){for(const r of this._observers)r.error(t)}complete(){for(const t of this._observers)t.complete()}}function multicast(e){const t=new MulticastSubject;let r,n=0;return new Observable(s=>{r||(r=e.subscribe(t));const i=t.subscribe(s);return n++,()=>{n--,i.unsubscribe(),n===0&&(unsubscribe(r),r=void 0)}})}const $errors=Symbol("thread.errors"),$events=Symbol("thread.events"),$terminate=Symbol("thread.terminate"),$transferable=Symbol("thread.transferable"),$worker=Symbol("thread.worker");function fail$1(e){throw Error(e)}const Thread={errors(e){return e[$errors]||fail$1("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(e){return e[$events]||fail$1("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(e){return e[$terminate]()}},doNothing$1=()=>{};function createPromiseWithResolver(){let e=!1,t,r=doNothing$1;return[new Promise(n=>{e?n(t):r=n}),n=>{e=!0,t=n,r(t)}]}var WorkerEventType;(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(WorkerEventType||(WorkerEventType={}));const doNothing=()=>{},returnInput=e=>e,runDeferred=e=>Promise.resolve().then(e);function fail(e){throw e}function isThenable(e){return e&&typeof e.then=="function"}class ObservablePromise extends Observable{constructor(t){super(r=>{const n=this,s=Object.assign(Object.assign({},r),{complete(){r.complete(),n.onCompletion()},error(i){r.error(i),n.onError(i)},next(i){r.next(i),n.onNext(i)}});try{return this.initHasRun=!0,t(s)}catch(i){s.error(i)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const r of this.rejectionCallbacks)runDeferred(()=>r(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)runDeferred(()=>t(this.firstValue))}then(t,r){const n=t||returnInput,s=r||fail;let i=!1;return new Promise((o,u)=>{const c=m=>{if(!i){i=!0;try{o(s(m))}catch(T){u(T)}}},d=m=>{try{o(n(m))}catch(T){c(T)}};if(this.initHasRun||this.subscribe({error:c}),this.state==="fulfilled")return o(n(this.firstValue));if(this.state==="rejected")return i=!0,o(s(this.rejection));this.fulfillmentCallbacks.push(d),this.rejectionCallbacks.push(c)})}catch(t){return this.then(void 0,t)}finally(t){const r=t||doNothing;return this.then(n=>(r(),n),()=>r())}static from(t){return isThenable(t)?new ObservablePromise(r=>{const n=i=>{r.next(i),r.complete()},s=i=>{r.error(i)};t.then(n,s)}):super.from(t)}}function isTransferable(e){return!(!e||typeof e!="object")}function isTransferDescriptor(e){return e&&typeof e=="object"&&e[$transferable]}function Transfer(e,t){if(!t){if(!isTransferable(e))throw Error();t=[e]}return{[$transferable]:!0,send:e,transferables:t}}var MasterMessageType;(function(e){e.cancel="cancel",e.run="run"})(MasterMessageType||(MasterMessageType={}));var WorkerMessageType;(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(WorkerMessageType||(WorkerMessageType={}));const debugMessages$1=DebugLogger("threads:master:messages");let nextJobUID=1;const dedupe=e=>Array.from(new Set(e)),isJobErrorMessage=e=>e&&e.type===WorkerMessageType.error,isJobResultMessage=e=>e&&e.type===WorkerMessageType.result,isJobStartMessage=e=>e&&e.type===WorkerMessageType.running;function createObservableForJob(e,t){return new Observable(r=>{let n;const s=(i=>{if(debugMessages$1("Message from worker:",i.data),!(!i.data||i.data.uid!==t)){if(isJobStartMessage(i.data))n=i.data.resultType;else if(isJobResultMessage(i.data))n==="promise"?(typeof i.data.payload<"u"&&r.next(deserialize(i.data.payload)),r.complete(),e.removeEventListener("message",s)):(i.data.payload&&r.next(deserialize(i.data.payload)),i.data.complete&&(r.complete(),e.removeEventListener("message",s)));else if(isJobErrorMessage(i.data)){const o=deserialize(i.data.error);r.error(o),e.removeEventListener("message",s)}}});return e.addEventListener("message",s),()=>{if(n==="observable"||!n){const i={type:MasterMessageType.cancel,uid:t};e.postMessage(i)}e.removeEventListener("message",s)}})}function prepareArguments(e){if(e.length===0)return{args:[],transferables:[]};const t=[],r=[];for(const n of e)isTransferDescriptor(n)?(t.push(serialize(n.send)),r.push(...n.transferables)):t.push(serialize(n));return{args:t,transferables:r.length===0?r:dedupe(r)}}function createProxyFunction(e,t){return((...r)=>{const n=nextJobUID++,{args:s,transferables:i}=prepareArguments(r),o={type:MasterMessageType.run,uid:n,method:t,args:s};debugMessages$1("Sending command to run function to worker:",o);try{e.postMessage(o,i)}catch(u){return ObservablePromise.from(Promise.reject(u))}return ObservablePromise.from(multicast(createObservableForJob(e,n)))})}function createProxyModule(e,t){const r={};for(const n of t)r[n]=createProxyFunction(e,n);return r}var __awaiter$2=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(m){try{d(n.next(m))}catch(T){o(T)}}function c(m){try{d(n.throw(m))}catch(T){o(T)}}function d(m){m.done?i(m.value):s(m.value).then(u,c)}d((n=n.apply(e,[])).next())})};const debugMessages=DebugLogger("threads:master:messages"),debugSpawn=DebugLogger("threads:master:spawn"),debugThreadUtils=DebugLogger("threads:master:thread-utils"),isInitMessage=e=>e&&e.type==="init",isUncaughtErrorMessage=e=>e&&e.type==="uncaughtError",initMessageTimeout=typeof process<"u"&&define_process_env_default.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(define_process_env_default.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function withTimeout(e,t,r){return __awaiter$2(this,void 0,void 0,function*(){let n;const s=new Promise((o,u)=>{n=setTimeout(()=>u(Error(r)),t)}),i=yield Promise.race([e,s]);return clearTimeout(n),i})}function receiveInitMessage(e){return new Promise((t,r)=>{const n=(s=>{debugMessages("Message from worker before finishing initialization:",s.data),isInitMessage(s.data)?(e.removeEventListener("message",n),t(s.data)):isUncaughtErrorMessage(s.data)&&(e.removeEventListener("message",n),r(deserialize(s.data.error)))});e.addEventListener("message",n)})}function createEventObservable(e,t){return new Observable(r=>{const n=(i=>{const o={type:WorkerEventType.message,data:i.data};r.next(o)}),s=(i=>{debugThreadUtils("Unhandled promise rejection event in thread:",i);const o={type:WorkerEventType.internalError,error:Error(i.reason)};r.next(o)});e.addEventListener("message",n),e.addEventListener("unhandledrejection",s),t.then(()=>{const i={type:WorkerEventType.termination};e.removeEventListener("message",n),e.removeEventListener("unhandledrejection",s),r.next(i),r.complete()})})}function createTerminator(e){const[t,r]=createPromiseWithResolver();return{terminate:()=>__awaiter$2(this,void 0,void 0,function*(){debugThreadUtils("Terminating worker"),yield e.terminate(),r()}),termination:t}}function setPrivateThreadProps(e,t,r,n){const s=r.filter(i=>i.type===WorkerEventType.internalError).map(i=>i.error);return Object.assign(e,{[$errors]:s,[$events]:r,[$terminate]:n,[$worker]:t})}function spawn(e,t){return __awaiter$2(this,void 0,void 0,function*(){debugSpawn("Initializing new thread");const r=initMessageTimeout,n=(yield withTimeout(receiveInitMessage(e),r,`Timeout: Did not receive an init message from worker after ${r}ms. Make sure the worker calls expose().`)).exposed,{termination:s,terminate:i}=createTerminator(e),o=createEventObservable(e,s);if(n.type==="function"){const u=createProxyFunction(e);return setPrivateThreadProps(u,e,o,i)}else if(n.type==="module"){const u=createProxyModule(e,n.methods);return setPrivateThreadProps(u,e,o,i)}else{const u=n.type;throw Error(`Worker init message states unexpected type of expose(): ${u}`)}})}const BlobWorker=getWorkerImplementation().blob,Worker$1=getWorkerImplementation().default,isWorkerRuntime$2=function e(){const t=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!t)},postMessageToMaster$2=function e(t,r){self.postMessage(t,r)},subscribeToMasterMessages$2=function e(t){const r=s=>{t(s.data)},n=()=>{self.removeEventListener("message",r)};return self.addEventListener("message",r),n},WebWorkerImplementation={isWorkerRuntime:isWorkerRuntime$2,postMessageToMaster:postMessageToMaster$2,subscribeToMasterMessages:subscribeToMasterMessages$2};typeof self>"u"&&(global.self=global);const isWorkerRuntime$1=function e(){return!!(typeof self<"u"&&self.postMessage)},postMessageToMaster$1=function e(t){self.postMessage(t)};let muxingHandlerSetUp=!1;const messageHandlers=new Set,subscribeToMasterMessages$1=function e(t){return muxingHandlerSetUp||(self.addEventListener("message",(r=>{messageHandlers.forEach(n=>n(r.data))})),muxingHandlerSetUp=!0),messageHandlers.add(t),()=>messageHandlers.delete(t)},TinyWorkerImplementation={isWorkerRuntime:isWorkerRuntime$1,postMessageToMaster:postMessageToMaster$1,subscribeToMasterMessages:subscribeToMasterMessages$1};let implementation;function selectImplementation(){return typeof __non_webpack_require__=="function"?__non_webpack_require__():eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}function assertMessagePort(e){if(!e)throw Error("Invariant violation: MessagePort to parent is not available.");return e}const isWorkerRuntime=function e(){return!getImplementation().isMainThread},postMessageToMaster=function e(t,r){assertMessagePort(getImplementation().parentPort).postMessage(t,r)},subscribeToMasterMessages=function e(t){const r=getImplementation().parentPort;if(!r)throw Error("Invariant violation: MessagePort to parent is not available.");const n=i=>{t(i)},s=()=>{assertMessagePort(r).off("message",n)};return assertMessagePort(r).on("message",n),s};function testImplementation(){getImplementation()}const WorkerThreadsImplementation={isWorkerRuntime,postMessageToMaster,subscribeToMasterMessages,testImplementation},runningInNode=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function selectNodeImplementation(){try{return WorkerThreadsImplementation.testImplementation(),WorkerThreadsImplementation}catch{return TinyWorkerImplementation}}const Implementation=runningInNode?selectNodeImplementation():WebWorkerImplementation;Implementation.isWorkerRuntime;function postUncaughtErrorMessage(e){try{const t={type:WorkerMessageType.uncaughtError,error:serialize(e)};Implementation.postMessageToMaster(t)}catch(t){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,t,`
Original error:`,e)}}typeof self<"u"&&typeof self.addEventListener=="function"&&Implementation.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>postUncaughtErrorMessage(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{const t=e.reason;t&&typeof t.message=="string"&&setTimeout(()=>postUncaughtErrorMessage(t),250)}));typeof process<"u"&&typeof process.on=="function"&&Implementation.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>postUncaughtErrorMessage(e),250)}),process.on("unhandledRejection",e=>{e&&typeof e.message=="string"&&setTimeout(()=>postUncaughtErrorMessage(e),250)}));var ok$1=function(e){return new Ok$1(e)},err$1=function(e){return new Err$1(e)},Ok$1=(function(){function e(t){var r=this;this.value=t,this.match=function(n,s){return n(r.value)}}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok$1(t(this.value))},e.prototype.mapErr=function(t){return ok$1(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync$1.fromPromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype._unsafeUnwrap=function(){return this.value},e.prototype._unsafeUnwrapErr=function(){throw new Error("Called `_unsafeUnwrapErr` on an Ok")},e})(),Err$1=(function(){function e(t){var r=this;this.error=t,this.match=function(n,s){return s(r.error)}}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err$1(this.error)},e.prototype.mapErr=function(t){return err$1(t(this.error))},e.prototype.andThen=function(t){return err$1(this.error)},e.prototype.asyncAndThen=function(t){return errAsync$1(this.error)},e.prototype.asyncMap=function(t){return errAsync$1(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype._unsafeUnwrap=function(){throw new Error("Called `_unsafeUnwrap` on an Err")},e.prototype._unsafeUnwrapErr=function(){return this.error},e})();function __awaiter$1(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(m){try{d(n.next(m))}catch(T){o(T)}}function c(m){try{d(n.throw(m))}catch(T){o(T)}}function d(m){m.done?i(m.value):s(m.value).then(u,c)}d((n=n.apply(e,[])).next())})}function __generator$1(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(m){return c([d,m])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var logWarning=function(e){if(typeof process!="object"){var t="\x1B[33m%s\x1B[0m",r=["[neverthrow]",e].join(" - ");console.warn(t,r)}},ResultAsync$1=(function(){function e(t){this._promise=t}return e.fromPromise=function(t,r){var n=t.then(function(i){return new Ok$1(i)});if(r)n=n.catch(function(i){return new Err$1(r(i))});else{var s=["`fromPromise` called without a promise rejection handler","Ensure that you are catching promise rejections yourself, or pass a second argument to `fromPromise` to convert a caught exception into an `Err` instance"].join(" - ");logWarning(s)}return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1(r,void 0,void 0,function(){var s;return __generator$1(this,function(i){switch(i.label){case 0:return n.isErr()?[2,new Err$1(n.error)]:(s=Ok$1.bind,[4,t(n.value)]);case 1:return[2,new(s.apply(Ok$1,[void 0,i.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter$1(r,void 0,void 0,function(){var s;return __generator$1(this,function(i){switch(i.label){case 0:return n.isOk()?[2,new Ok$1(n.value)]:(s=Err$1.bind,[4,t(n.error)]);case 1:return[2,new(s.apply(Err$1,[void 0,i.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err$1(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t){return this._promise.then(t)},e})(),errAsync$1=function(e){return new ResultAsync$1(Promise.resolve(new Err$1(e)))},__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e};function createInputValue(e,t,r){let n=t;const s={},i=()=>n,o=u=>{var c;u!==n&&(n=u,(c=s.onSet)==null||c.call(s))};return{varId:e,get:i,set:o,reset:()=>{o(t)},callbacks:s}}var Series=class Wm{constructor(t,r){this.varId=t,this.points=r}getValueAtTime(t){var r;return(r=this.points.find(n=>n.x===t))==null?void 0:r.y}copy(){const t=this.points.map(r=>__spreadValues({},r));return new Wm(this.varId,t)}},Outputs=class{constructor(e,t,r,n=1){this.varIds=e,this.startTime=t,this.endTime=r,this.saveFreq=n,this.seriesLength=Math.round((r-t)/n)+1,this.varSeries=new Array(e.length);for(let s=0;s<e.length;s++){const i=new Array(this.seriesLength);for(let u=0;u<this.seriesLength;u++)i[u]={x:t+u*n,y:0};const o=e[s];this.varSeries[s]=new Series(o,i)}}setVarSpecs(e){if(e.length!==this.varIds.length)throw new Error("Length of output varSpecs must match that of varIds");this.varSpecs=e}updateFromBuffer(e,t){const r=parseOutputsBuffer(e,t,this);return r.isOk()?ok$1(void 0):err$1(r.error)}getSeriesForVar(e){const t=this.varIds.indexOf(e);if(t>=0)return this.varSeries[t]}};function parseOutputsBuffer(e,t,r){const n=r.varIds.length,s=r.seriesLength;if(t<s||e.length<n*s)return err$1("invalid-point-count");for(let i=0;i<n;i++){const o=r.varSeries[i];let u=t*i;for(let c=0;c<s;c++)o.points[c].y=validateNumber(e[u]),u++}return ok$1(r)}function validateNumber(e){if(!isNaN(e)&&e>-1e32)return e}function getEncodedVarIndicesLength(e){var t;let r=1;for(const n of e){r+=2;const s=((t=n.subscriptIndices)==null?void 0:t.length)||0;r+=s}return r}function encodeVarIndices(e,t){let r=0;t[r++]=e.length;for(const n of e){t[r++]=n.varIndex;const s=n.subscriptIndices,i=s?.length||0;t[r++]=i;for(let o=0;o<i;o++)t[r++]=s[o]}}function getEncodedLookupBufferLengths(e){var t,r;let n=1,s=0;for(const i of e){const o=i.varRef.varSpec;if(o===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");n+=2;const u=((t=o.subscriptIndices)==null?void 0:t.length)||0;n+=u,n+=2,s+=((r=i.points)==null?void 0:r.length)||0}return{lookupIndicesLength:n,lookupsLength:s}}function encodeLookups(e,t,r){let n=0;t[n++]=e.length;let s=0;for(const i of e){const o=i.varRef.varSpec;t[n++]=o.varIndex;const u=o.subscriptIndices,c=u?.length||0;t[n++]=c;for(let d=0;d<c;d++)t[n++]=u[d];i.points!==void 0?(t[n++]=s,t[n++]=i.points.length,r?.set(i.points,s),s+=i.points.length):(t[n++]=-1,t[n++]=0)}}function decodeLookups(e,t){const r=[];let n=0;const s=e[n++];for(let i=0;i<s;i++){const o=e[n++],u=e[n++],c=u>0?Array(u):void 0;for(let C=0;C<u;C++)c[C]=e[n++];const d=e[n++],m=e[n++],T={varIndex:o,subscriptIndices:c};let $;d>=0?t?$=t.slice(d,d+m):$=new Float64Array(0):$=void 0,r.push({varRef:{varSpec:T},points:$})}return r}var ModelListing=class{constructor(e){this.varSpecs=new Map;const t=new Map;for(const s of e.dimensions){const i=s.id,o=[];for(let u=0;u<s.subIds.length;u++)o.push({id:s.subIds[u],index:u});t.set(i,{id:i,subscripts:o})}function r(s){const i=t.get(s);if(i===void 0)throw new Error(`No dimension info found for id=${s}`);return i}const n=new Set;for(const s of e.variables){const i=varIdWithoutSubscripts(s.id);if(!n.has(i)){const o=(s.dimIds||[]).map(r);if(o.length>0){const u=[];for(const d of o)u.push(d.subscripts);const c=cartesianProductOf(u);for(const d of c){const m=d.map(C=>C.id).join(","),T=d.map(C=>C.index),$=`${i}[${m}]`;this.varSpecs.set($,{varIndex:s.index,subscriptIndices:T})}}else this.varSpecs.set(i,{varIndex:s.index});n.add(i)}}}getSpecForVarId(e){return this.varSpecs.get(e)}getSpecForVarName(e){const t=sdeVarIdForVensimVarName(e);return this.varSpecs.get(t)}deriveOutputs(e,t){const r=[];for(const s of t){const i=this.varSpecs.get(s);i!==void 0?r.push(i):console.warn(`WARNING: No output var spec found for id=${s}`)}const n=new Outputs(t,e.startTime,e.endTime,e.saveFreq);return n.varSpecs=r,n}};function varIdWithoutSubscripts(e){const t=e.indexOf("[");return t>=0?e.substring(0,t):e}function cartesianProductOf(e){return e.reduce((t,r)=>t.map(n=>r.map(s=>n.concat([s]))).reduce((n,s)=>n.concat(s),[]),[[]])}function sdeVarIdForVensimName(e){return"_"+e.trim().replace(/"/g,"_").replace(/\s+!$/g,"!").replace(/\s/g,"_").replace(/,/g,"_").replace(/-/g,"_").replace(/\./g,"_").replace(/\$/g,"_").replace(/'/g,"_").replace(/&/g,"_").replace(/%/g,"_").replace(/\//g,"_").replace(/\|/g,"_").toLowerCase()}function sdeVarIdForVensimVarName(e){const t=e.match(/([^[]+)(?:\[([^\]]+)\])?/);if(!t)throw new Error(`Invalid Vensim name: ${e}`);let r=sdeVarIdForVensimName(t[1]);if(t[2]){const n=t[2].split(",").map(s=>sdeVarIdForVensimName(s));r+=`[${n.join(",")}]`}return r}function resolveVarRef(e,t,r){if(!t.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${r} variable references by name or identifier when model listing is unavailable`);if(t.varId){const n=e?.getSpecForVarId(t.varId);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varId=${t.varId}`)}else{const n=e?.getSpecForVarName(t.varName);if(n)t.varSpec=n;else throw new Error(`Failed to resolve ${r} variable reference for varName='${t.varId}'`)}}}var headerLengthInElements=16,extrasLengthInElements=1,Int32Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,t,r){this.view=r>0?new Int32Array(e,t,r):void 0,this.offsetInBytes=t,this.lengthInElements=r}},Float64Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,t,r){this.view=r>0?new Float64Array(e,t,r):void 0,this.offsetInBytes=t,this.lengthInElements=r}},BufferedRunModelParams=class{constructor(e){this.listing=e,this.header=new Int32Section,this.extras=new Float64Section,this.inputs=new Float64Section,this.outputs=new Float64Section,this.outputIndices=new Int32Section,this.lookups=new Float64Section,this.lookupIndices=new Int32Section}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(e,t){this.inputs.lengthInElements!==0&&((e===void 0||e.length<this.inputs.lengthInElements)&&(e=t(this.inputs.lengthInElements)),e.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(e,t){this.outputIndices.lengthInElements!==0&&((e===void 0||e.length<this.outputIndices.lengthInElements)&&(e=t(this.outputIndices.lengthInElements)),e.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(e){this.outputs.view!==void 0&&(e.length>this.outputs.view.length?this.outputs.view.set(e.subarray(0,this.outputs.view.length)):this.outputs.view.set(e))}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(e){this.extras.view[0]=e}finalizeOutputs(e){this.outputs.view&&e.updateFromBuffer(this.outputs.view,e.seriesLength),e.runTimeInMillis=this.getElapsedTime()}updateFromParams(e,t,r){const n=e.length,s=t.varIds.length*t.seriesLength;let i;const o=t.varSpecs;o!==void 0&&o.length>0?i=getEncodedVarIndicesLength(o):i=0;let u,c;if(r?.lookups!==void 0&&r.lookups.length>0){for(const J of r.lookups)resolveVarRef(this.listing,J.varRef,"lookup");const B=getEncodedLookupBufferLengths(r.lookups);u=B.lookupsLength,c=B.lookupIndicesLength}else u=0,c=0;let d=0;function m(B,J){const re=d,ve=B==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,ye=Math.round(J*ve),Se=Math.ceil(ye/8)*8;return d+=Se,re}const T=m("int32",headerLengthInElements),$=m("float64",extrasLengthInElements),C=m("float64",n),D=m("float64",s),F=m("int32",i),g=m("float64",u),q=m("int32",c),x=d;if(this.encoded===void 0||this.encoded.byteLength<x){const B=Math.ceil(x*1.2);this.encoded=new ArrayBuffer(B),this.header.update(this.encoded,T,headerLengthInElements)}const P=this.header.view;let K=0;P[K++]=$,P[K++]=extrasLengthInElements,P[K++]=C,P[K++]=n,P[K++]=D,P[K++]=s,P[K++]=F,P[K++]=i,P[K++]=g,P[K++]=u,P[K++]=q,P[K++]=c,this.inputs.update(this.encoded,C,n),this.extras.update(this.encoded,$,extrasLengthInElements),this.outputs.update(this.encoded,D,s),this.outputIndices.update(this.encoded,F,i),this.lookups.update(this.encoded,g,u),this.lookupIndices.update(this.encoded,q,c);const L=this.inputs.view;for(let B=0;B<e.length;B++){const J=e[B];typeof J=="number"?L[B]=J:L[B]=J.get()}this.outputIndices.view&&encodeVarIndices(o,this.outputIndices.view),c>0&&encodeLookups(r.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(e){const t=headerLengthInElements*Int32Array.BYTES_PER_ELEMENT;if(e.byteLength<t)throw new Error("Buffer must be long enough to contain header section");this.encoded=e,this.header.update(this.encoded,0,headerLengthInElements);const r=this.header.view;let n=0;const s=r[n++],i=r[n++],o=r[n++],u=r[n++],c=r[n++],d=r[n++],m=r[n++],T=r[n++],$=r[n++],C=r[n++],D=r[n++],F=r[n++],g=i*Float64Array.BYTES_PER_ELEMENT,q=u*Float64Array.BYTES_PER_ELEMENT,x=d*Float64Array.BYTES_PER_ELEMENT,P=T*Int32Array.BYTES_PER_ELEMENT,K=C*Float64Array.BYTES_PER_ELEMENT,L=F*Int32Array.BYTES_PER_ELEMENT,B=t+g+q+x+P+K+L;if(e.byteLength<B)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,s,i),this.inputs.update(this.encoded,o,u),this.outputs.update(this.encoded,c,d),this.outputIndices.update(this.encoded,m,T),this.lookups.update(this.encoded,$,C),this.lookupIndices.update(this.encoded,D,F)}};async function spawnAsyncModelRunner(e){return e.path?spawnAsyncModelRunnerWithWorker(new Worker$1(e.path)):spawnAsyncModelRunnerWithWorker(BlobWorker.fromText(e.source))}async function spawnAsyncModelRunnerWithWorker(e){const t=await spawn(e),r=await t.initModel(),n=r.modelListing?new ModelListing(r.modelListing):void 0,s=new BufferedRunModelParams(n);let i=!1,o=!1;return{createOutputs:()=>new Outputs(r.outputVarIds,r.startTime,r.endTime,r.saveFreq),runModel:async(u,c,d)=>{if(o)throw new Error("Async model runner has already been terminated");if(i)throw new Error("Async model runner only supports one `runModel` call at a time");i=!0,s.updateFromParams(u,c,d);let m;try{m=await t.runModel(Transfer(s.getEncodedBuffer()))}finally{i=!1}return s.updateFromEncodedBuffer(m),s.finalizeOutputs(c),c},terminate:()=>o?Promise.resolve():(o=!0,Thread.terminate(t))}}var assertNever={},hasRequiredAssertNever;function requireAssertNever(){if(hasRequiredAssertNever)return assertNever;hasRequiredAssertNever=1,Object.defineProperty(assertNever,"__esModule",{value:!0}),assertNever.assertNever=e;function e(t,r){if(typeof r=="string")throw new Error(r);if(typeof r=="function")throw new Error(r(t));if(r)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}return assertNever.default=e,assertNever}var assertNeverExports=requireAssertNever(),ajv={exports:{}},core$1={},validate={},boolSchema={},errors={},codegen={},code$1={},hasRequiredCode$1;function requireCode$1(){return hasRequiredCode$1||(hasRequiredCode$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(x){if(super(),!e.IDENTIFIER.test(x))throw new Error("CodeGen: name must be a valid identifier");this.str=x}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(x){super(),this._items=typeof x=="string"?[x]:x}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const x=this._items[0];return x===""||x==='""'}get str(){var x;return(x=this._str)!==null&&x!==void 0?x:this._str=this._items.reduce((P,K)=>`${P}${K}`,"")}get names(){var x;return(x=this._names)!==null&&x!==void 0?x:this._names=this._items.reduce((P,K)=>(K instanceof r&&(P[K.str]=(P[K.str]||0)+1),P),{})}}e._Code=n,e.nil=new n("");function s(q,...x){const P=[q[0]];let K=0;for(;K<x.length;)u(P,x[K]),P.push(q[++K]);return new n(P)}e._=s;const i=new n("+");function o(q,...x){const P=[C(q[0])];let K=0;for(;K<x.length;)P.push(i),u(P,x[K]),P.push(i,C(q[++K]));return c(P),new n(P)}e.str=o;function u(q,x){x instanceof n?q.push(...x._items):x instanceof r?q.push(x):q.push(T(x))}e.addCodeArg=u;function c(q){let x=1;for(;x<q.length-1;){if(q[x]===i){const P=d(q[x-1],q[x+1]);if(P!==void 0){q.splice(x-1,3,P);continue}q[x++]="+"}x++}}function d(q,x){if(x==='""')return q;if(q==='""')return x;if(typeof q=="string")return x instanceof r||q[q.length-1]!=='"'?void 0:typeof x!="string"?`${q.slice(0,-1)}${x}"`:x[0]==='"'?q.slice(0,-1)+x.slice(1):void 0;if(typeof x=="string"&&x[0]==='"'&&!(q instanceof r))return`"${q}${x.slice(1)}`}function m(q,x){return x.emptyStr()?q:q.emptyStr()?x:o`${q}${x}`}e.strConcat=m;function T(q){return typeof q=="number"||typeof q=="boolean"||q===null?q:C(Array.isArray(q)?q.join(","):q)}function $(q){return new n(C(q))}e.stringify=$;function C(q){return JSON.stringify(q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=C;function D(q){return typeof q=="string"&&e.IDENTIFIER.test(q)?new n(`.${q}`):s`[${q}]`}e.getProperty=D;function F(q){if(typeof q=="string"&&e.IDENTIFIER.test(q))return new n(`${q}`);throw new Error(`CodeGen: invalid export name: ${q}, use explicit $id name mapping`)}e.getEsmExportName=F;function g(q){return new n(q.toString())}e.regexpCode=g})(code$1)),code$1}var scope={},hasRequiredScope;function requireScope(){return hasRequiredScope||(hasRequiredScope=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=requireCode$1();class r extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:d,parent:m}={}){this._names={},this._prefixes=d,this._parent=m}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const m=this._names[d]||this._nameGroup(d);return`${d}${m.index++}`}_nameGroup(d){var m,T;if(!((T=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||T===void 0)&&T.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=s;class i extends t.Name{constructor(d,m){super(m),this.prefix=d}setValue(d,{property:m,itemIndex:T}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(m)}[${T}]`}}e.ValueScopeName=i;const o=(0,t._)`\n`;class u extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:t.nil}}get(){return this._scope}name(d){return new i(d,this._newName(d))}value(d,m){var T;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(d),{prefix:C}=$,D=(T=m.key)!==null&&T!==void 0?T:m.ref;let F=this._values[C];if(F){const x=F.get(D);if(x)return x}else F=this._values[C]=new Map;F.set(D,$);const g=this._scope[C]||(this._scope[C]=[]),q=g.length;return g[q]=m.ref,$.setValue(m,{property:C,itemIndex:q}),$}getValue(d,m){const T=this._values[d];if(T)return T.get(m)}scopeRefs(d,m=this._values){return this._reduceValues(m,T=>{if(T.scopePath===void 0)throw new Error(`CodeGen: name "${T}" has no value`);return(0,t._)`${d}${T.scopePath}`})}scopeCode(d=this._values,m,T){return this._reduceValues(d,$=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},m,T)}_reduceValues(d,m,T={},$){let C=t.nil;for(const D in d){const F=d[D];if(!F)continue;const g=T[D]=T[D]||new Map;F.forEach(q=>{if(g.has(q))return;g.set(q,n.Started);let x=m(q);if(x){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;C=(0,t._)`${C}${P} ${q} = ${x};${this.opts._n}`}else if(x=$?.(q))C=(0,t._)`${C}${x}${this.opts._n}`;else throw new r(q);g.set(q,n.Completed)})}return C}}e.ValueScope=u})(scope)),scope}var hasRequiredCodegen;function requireCodegen(){return hasRequiredCodegen||(hasRequiredCodegen=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=requireCode$1(),r=requireScope();var n=requireCode$1();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=requireScope();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(G,X){return this}}class o extends i{constructor(G,X,ce){super(),this.varKind=G,this.name=X,this.rhs=ce}render({es5:G,_n:X}){const ce=G?r.varKinds.var:this.varKind,De=this.rhs===void 0?"":` = ${this.rhs}`;return`${ce} ${this.name}${De};`+X}optimizeNames(G,X){if(G[this.name.str])return this.rhs&&(this.rhs=Ar(this.rhs,G,X)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends i{constructor(G,X,ce){super(),this.lhs=G,this.rhs=X,this.sideEffects=ce}render({_n:G}){return`${this.lhs} = ${this.rhs};`+G}optimizeNames(G,X){if(!(this.lhs instanceof t.Name&&!G[this.lhs.str]&&!this.sideEffects))return this.rhs=Ar(this.rhs,G,X),this}get names(){const G=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Ke(G,this.rhs)}}class c extends u{constructor(G,X,ce,De){super(G,ce,De),this.op=X}render({_n:G}){return`${this.lhs} ${this.op}= ${this.rhs};`+G}}class d extends i{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`${this.label}:`+G}}class m extends i{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`break${this.label?` ${this.label}`:""};`+G}}class T extends i{constructor(G){super(),this.error=G}render({_n:G}){return`throw ${this.error};`+G}get names(){return this.error.names}}class $ extends i{constructor(G){super(),this.code=G}render({_n:G}){return`${this.code};`+G}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(G,X){return this.code=Ar(this.code,G,X),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class C extends i{constructor(G=[]){super(),this.nodes=G}render(G){return this.nodes.reduce((X,ce)=>X+ce.render(G),"")}optimizeNodes(){const{nodes:G}=this;let X=G.length;for(;X--;){const ce=G[X].optimizeNodes();Array.isArray(ce)?G.splice(X,1,...ce):ce?G[X]=ce:G.splice(X,1)}return G.length>0?this:void 0}optimizeNames(G,X){const{nodes:ce}=this;let De=ce.length;for(;De--;){const qe=ce[De];qe.optimizeNames(G,X)||(hi(G,qe.names),ce.splice(De,1))}return ce.length>0?this:void 0}get names(){return this.nodes.reduce((G,X)=>Ne(G,X.names),{})}}class D extends C{render(G){return"{"+G._n+super.render(G)+"}"+G._n}}class F extends C{}class g extends D{}g.kind="else";class q extends D{constructor(G,X){super(X),this.condition=G}render(G){let X=`if(${this.condition})`+super.render(G);return this.else&&(X+="else "+this.else.render(G)),X}optimizeNodes(){super.optimizeNodes();const G=this.condition;if(G===!0)return this.nodes;let X=this.else;if(X){const ce=X.optimizeNodes();X=this.else=Array.isArray(ce)?new g(ce):ce}if(X)return G===!1?X instanceof q?X:X.nodes:this.nodes.length?this:new q(gi(G),X instanceof q?[X]:X.nodes);if(!(G===!1||!this.nodes.length))return this}optimizeNames(G,X){var ce;if(this.else=(ce=this.else)===null||ce===void 0?void 0:ce.optimizeNames(G,X),!!(super.optimizeNames(G,X)||this.else))return this.condition=Ar(this.condition,G,X),this}get names(){const G=super.names;return Ke(G,this.condition),this.else&&Ne(G,this.else.names),G}}q.kind="if";class x extends D{}x.kind="for";class P extends x{constructor(G){super(),this.iteration=G}render(G){return`for(${this.iteration})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iteration=Ar(this.iteration,G,X),this}get names(){return Ne(super.names,this.iteration.names)}}class K extends x{constructor(G,X,ce,De){super(),this.varKind=G,this.name=X,this.from=ce,this.to=De}render(G){const X=G.es5?r.varKinds.var:this.varKind,{name:ce,from:De,to:qe}=this;return`for(${X} ${ce}=${De}; ${ce}<${qe}; ${ce}++)`+super.render(G)}get names(){const G=Ke(super.names,this.from);return Ke(G,this.to)}}class L extends x{constructor(G,X,ce,De){super(),this.loop=G,this.varKind=X,this.name=ce,this.iterable=De}render(G){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iterable=Ar(this.iterable,G,X),this}get names(){return Ne(super.names,this.iterable.names)}}class B extends D{constructor(G,X,ce){super(),this.name=G,this.args=X,this.async=ce}render(G){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(G)}}B.kind="func";class J extends C{render(G){return"return "+super.render(G)}}J.kind="return";class re extends D{render(G){let X="try"+super.render(G);return this.catch&&(X+=this.catch.render(G)),this.finally&&(X+=this.finally.render(G)),X}optimizeNodes(){var G,X;return super.optimizeNodes(),(G=this.catch)===null||G===void 0||G.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(G,X){var ce,De;return super.optimizeNames(G,X),(ce=this.catch)===null||ce===void 0||ce.optimizeNames(G,X),(De=this.finally)===null||De===void 0||De.optimizeNames(G,X),this}get names(){const G=super.names;return this.catch&&Ne(G,this.catch.names),this.finally&&Ne(G,this.finally.names),G}}class ve extends D{constructor(G){super(),this.error=G}render(G){return`catch(${this.error})`+super.render(G)}}ve.kind="catch";class ye extends D{render(G){return"finally"+super.render(G)}}ye.kind="finally";class Se{constructor(G,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=G,this._scope=new r.Scope({parent:G}),this._nodes=[new F]}toString(){return this._root.render(this.opts)}name(G){return this._scope.name(G)}scopeName(G){return this._extScope.name(G)}scopeValue(G,X){const ce=this._extScope.value(G,X);return(this._values[ce.prefix]||(this._values[ce.prefix]=new Set)).add(ce),ce}getScopeValue(G,X){return this._extScope.getValue(G,X)}scopeRefs(G){return this._extScope.scopeRefs(G,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(G,X,ce,De){const qe=this._scope.toName(X);return ce!==void 0&&De&&(this._constants[qe.str]=ce),this._leafNode(new o(G,qe,ce)),qe}const(G,X,ce){return this._def(r.varKinds.const,G,X,ce)}let(G,X,ce){return this._def(r.varKinds.let,G,X,ce)}var(G,X,ce){return this._def(r.varKinds.var,G,X,ce)}assign(G,X,ce){return this._leafNode(new u(G,X,ce))}add(G,X){return this._leafNode(new c(G,e.operators.ADD,X))}code(G){return typeof G=="function"?G():G!==t.nil&&this._leafNode(new $(G)),this}object(...G){const X=["{"];for(const[ce,De]of G)X.length>1&&X.push(","),X.push(ce),(ce!==De||this.opts.es5)&&(X.push(":"),(0,t.addCodeArg)(X,De));return X.push("}"),new t._Code(X)}if(G,X,ce){if(this._blockNode(new q(G)),X&&ce)this.code(X).else().code(ce).endIf();else if(X)this.code(X).endIf();else if(ce)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(G){return this._elseNode(new q(G))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(q,g)}_for(G,X){return this._blockNode(G),X&&this.code(X).endFor(),this}for(G,X){return this._for(new P(G),X)}forRange(G,X,ce,De,qe=this.opts.es5?r.varKinds.var:r.varKinds.let){const bt=this._scope.toName(G);return this._for(new K(qe,bt,X,ce),()=>De(bt))}forOf(G,X,ce,De=r.varKinds.const){const qe=this._scope.toName(G);if(this.opts.es5){const bt=X instanceof t.Name?X:this.var("_arr",X);return this.forRange("_i",0,(0,t._)`${bt}.length`,vr=>{this.var(qe,(0,t._)`${bt}[${vr}]`),ce(qe)})}return this._for(new L("of",De,qe,X),()=>ce(qe))}forIn(G,X,ce,De=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(G,(0,t._)`Object.keys(${X})`,ce);const qe=this._scope.toName(G);return this._for(new L("in",De,qe,X),()=>ce(qe))}endFor(){return this._endBlockNode(x)}label(G){return this._leafNode(new d(G))}break(G){return this._leafNode(new m(G))}return(G){const X=new J;if(this._blockNode(X),this.code(G),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(J)}try(G,X,ce){if(!X&&!ce)throw new Error('CodeGen: "try" without "catch" and "finally"');const De=new re;if(this._blockNode(De),this.code(G),X){const qe=this.name("e");this._currNode=De.catch=new ve(qe),X(qe)}return ce&&(this._currNode=De.finally=new ye,this.code(ce)),this._endBlockNode(ve,ye)}throw(G){return this._leafNode(new T(G))}block(G,X){return this._blockStarts.push(this._nodes.length),G&&this.code(G).endBlock(X),this}endBlock(G){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const ce=this._nodes.length-X;if(ce<0||G!==void 0&&ce!==G)throw new Error(`CodeGen: wrong number of nodes: ${ce} vs ${G} expected`);return this._nodes.length=X,this}func(G,X=t.nil,ce,De){return this._blockNode(new B(G,X,ce)),De&&this.code(De).endFunc(),this}endFunc(){return this._endBlockNode(B)}optimize(G=1){for(;G-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(G){return this._currNode.nodes.push(G),this}_blockNode(G){this._currNode.nodes.push(G),this._nodes.push(G)}_endBlockNode(G,X){const ce=this._currNode;if(ce instanceof G||X&&ce instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${G.kind}/${X.kind}`:G.kind}"`)}_elseNode(G){const X=this._currNode;if(!(X instanceof q))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=G,this}get _root(){return this._nodes[0]}get _currNode(){const G=this._nodes;return G[G.length-1]}set _currNode(G){const X=this._nodes;X[X.length-1]=G}}e.CodeGen=Se;function Ne(ue,G){for(const X in G)ue[X]=(ue[X]||0)+(G[X]||0);return ue}function Ke(ue,G){return G instanceof t._CodeOrName?Ne(ue,G.names):ue}function Ar(ue,G,X){if(ue instanceof t.Name)return ce(ue);if(!De(ue))return ue;return new t._Code(ue._items.reduce((qe,bt)=>(bt instanceof t.Name&&(bt=ce(bt)),bt instanceof t._Code?qe.push(...bt._items):qe.push(bt),qe),[]));function ce(qe){const bt=X[qe.str];return bt===void 0||G[qe.str]!==1?qe:(delete G[qe.str],bt)}function De(qe){return qe instanceof t._Code&&qe._items.some(bt=>bt instanceof t.Name&&G[bt.str]===1&&X[bt.str]!==void 0)}}function hi(ue,G){for(const X in G)ue[X]=(ue[X]||0)-(G[X]||0)}function gi(ue){return typeof ue=="boolean"||typeof ue=="number"||ue===null?!ue:(0,t._)`!${ke(ue)}`}e.not=gi;const Gi=ie(e.operators.AND);function bs(...ue){return ue.reduce(Gi)}e.and=bs;const ua=ie(e.operators.OR);function Re(...ue){return ue.reduce(ua)}e.or=Re;function ie(ue){return(G,X)=>G===t.nil?X:X===t.nil?G:(0,t._)`${ke(G)} ${ue} ${ke(X)}`}function ke(ue){return ue instanceof t.Name?ue:(0,t._)`(${ue})`}})(codegen)),codegen}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1,Object.defineProperty(util,"__esModule",{value:!0}),util.checkStrictMode=util.getErrorPath=util.Type=util.useFunc=util.setEvaluated=util.evaluatedPropsToName=util.mergeEvaluated=util.eachItem=util.unescapeJsonPointer=util.escapeJsonPointer=util.escapeFragment=util.unescapeFragment=util.schemaRefOrVal=util.schemaHasRulesButRef=util.schemaHasRules=util.checkUnknownRules=util.alwaysValidSchema=util.toHash=void 0;const e=requireCodegen(),t=requireCode$1();function r(L){const B={};for(const J of L)B[J]=!0;return B}util.toHash=r;function n(L,B){return typeof B=="boolean"?B:Object.keys(B).length===0?!0:(s(L,B),!i(B,L.self.RULES.all))}util.alwaysValidSchema=n;function s(L,B=L.schema){const{opts:J,self:re}=L;if(!J.strictSchema||typeof B=="boolean")return;const ve=re.RULES.keywords;for(const ye in B)ve[ye]||K(L,`unknown keyword: "${ye}"`)}util.checkUnknownRules=s;function i(L,B){if(typeof L=="boolean")return!L;for(const J in L)if(B[J])return!0;return!1}util.schemaHasRules=i;function o(L,B){if(typeof L=="boolean")return!L;for(const J in L)if(J!=="$ref"&&B.all[J])return!0;return!1}util.schemaHasRulesButRef=o;function u({topSchemaRef:L,schemaPath:B},J,re,ve){if(!ve){if(typeof J=="number"||typeof J=="boolean")return J;if(typeof J=="string")return(0,e._)`${J}`}return(0,e._)`${L}${B}${(0,e.getProperty)(re)}`}util.schemaRefOrVal=u;function c(L){return T(decodeURIComponent(L))}util.unescapeFragment=c;function d(L){return encodeURIComponent(m(L))}util.escapeFragment=d;function m(L){return typeof L=="number"?`${L}`:L.replace(/~/g,"~0").replace(/\//g,"~1")}util.escapeJsonPointer=m;function T(L){return L.replace(/~1/g,"/").replace(/~0/g,"~")}util.unescapeJsonPointer=T;function $(L,B){if(Array.isArray(L))for(const J of L)B(J);else B(L)}util.eachItem=$;function C({mergeNames:L,mergeToName:B,mergeValues:J,resultToName:re}){return(ve,ye,Se,Ne)=>{const Ke=Se===void 0?ye:Se instanceof e.Name?(ye instanceof e.Name?L(ve,ye,Se):B(ve,ye,Se),Se):ye instanceof e.Name?(B(ve,Se,ye),ye):J(ye,Se);return Ne===e.Name&&!(Ke instanceof e.Name)?re(ve,Ke):Ke}}util.mergeEvaluated={props:C({mergeNames:(L,B,J)=>L.if((0,e._)`${J} !== true && ${B} !== undefined`,()=>{L.if((0,e._)`${B} === true`,()=>L.assign(J,!0),()=>L.assign(J,(0,e._)`${J} || {}`).code((0,e._)`Object.assign(${J}, ${B})`))}),mergeToName:(L,B,J)=>L.if((0,e._)`${J} !== true`,()=>{B===!0?L.assign(J,!0):(L.assign(J,(0,e._)`${J} || {}`),F(L,J,B))}),mergeValues:(L,B)=>L===!0?!0:{...L,...B},resultToName:D}),items:C({mergeNames:(L,B,J)=>L.if((0,e._)`${J} !== true && ${B} !== undefined`,()=>L.assign(J,(0,e._)`${B} === true ? true : ${J} > ${B} ? ${J} : ${B}`)),mergeToName:(L,B,J)=>L.if((0,e._)`${J} !== true`,()=>L.assign(J,B===!0?!0:(0,e._)`${J} > ${B} ? ${J} : ${B}`)),mergeValues:(L,B)=>L===!0?!0:Math.max(L,B),resultToName:(L,B)=>L.var("items",B)})};function D(L,B){if(B===!0)return L.var("props",!0);const J=L.var("props",(0,e._)`{}`);return B!==void 0&&F(L,J,B),J}util.evaluatedPropsToName=D;function F(L,B,J){Object.keys(J).forEach(re=>L.assign((0,e._)`${B}${(0,e.getProperty)(re)}`,!0))}util.setEvaluated=F;const g={};function q(L,B){return L.scopeValue("func",{ref:B,code:g[B.code]||(g[B.code]=new t._Code(B.code))})}util.useFunc=q;var x;(function(L){L[L.Num=0]="Num",L[L.Str=1]="Str"})(x||(util.Type=x={}));function P(L,B,J){if(L instanceof e.Name){const re=B===x.Num;return J?re?(0,e._)`"[" + ${L} + "]"`:(0,e._)`"['" + ${L} + "']"`:re?(0,e._)`"/" + ${L}`:(0,e._)`"/" + ${L}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return J?(0,e.getProperty)(L).toString():"/"+m(L)}util.getErrorPath=P;function K(L,B,J=L.opts.strictSchema){if(J){if(B=`strict mode: ${B}`,J===!0)throw new Error(B);L.self.logger.warn(B)}}return util.checkStrictMode=K,util}var names={},hasRequiredNames;function requireNames(){if(hasRequiredNames)return names;hasRequiredNames=1,Object.defineProperty(names,"__esModule",{value:!0});const e=requireCodegen(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return names.default=t,names}var hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=requireCodegen(),r=requireUtil(),n=requireNames();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:q})=>q?(0,t.str)`"${g}" keyword must be ${q} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function s(g,q=e.keywordError,x,P){const{it:K}=g,{gen:L,compositeRule:B,allErrors:J}=K,re=T(g,q,x);P??(B||J)?c(L,re):d(K,(0,t._)`[${re}]`)}e.reportError=s;function i(g,q=e.keywordError,x){const{it:P}=g,{gen:K,compositeRule:L,allErrors:B}=P,J=T(g,q,x);c(K,J),L||B||d(P,n.default.vErrors)}e.reportExtraError=i;function o(g,q){g.assign(n.default.errors,q),g.if((0,t._)`${n.default.vErrors} !== null`,()=>g.if(q,()=>g.assign((0,t._)`${n.default.vErrors}.length`,q),()=>g.assign(n.default.vErrors,null)))}e.resetErrorsCount=o;function u({gen:g,keyword:q,schemaValue:x,data:P,errsCount:K,it:L}){if(K===void 0)throw new Error("ajv implementation error");const B=g.name("err");g.forRange("i",K,n.default.errors,J=>{g.const(B,(0,t._)`${n.default.vErrors}[${J}]`),g.if((0,t._)`${B}.instancePath === undefined`,()=>g.assign((0,t._)`${B}.instancePath`,(0,t.strConcat)(n.default.instancePath,L.errorPath))),g.assign((0,t._)`${B}.schemaPath`,(0,t.str)`${L.errSchemaPath}/${q}`),L.opts.verbose&&(g.assign((0,t._)`${B}.schema`,x),g.assign((0,t._)`${B}.data`,P))})}e.extendErrors=u;function c(g,q){const x=g.const("err",q);g.if((0,t._)`${n.default.vErrors} === null`,()=>g.assign(n.default.vErrors,(0,t._)`[${x}]`),(0,t._)`${n.default.vErrors}.push(${x})`),g.code((0,t._)`${n.default.errors}++`)}function d(g,q){const{gen:x,validateName:P,schemaEnv:K}=g;K.$async?x.throw((0,t._)`new ${g.ValidationError}(${q})`):(x.assign((0,t._)`${P}.errors`,q),x.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function T(g,q,x){const{createErrors:P}=g.it;return P===!1?(0,t._)`{}`:$(g,q,x)}function $(g,q,x={}){const{gen:P,it:K}=g,L=[C(K,x),D(g,x)];return F(g,q,L),P.object(...L)}function C({errorPath:g},{instancePath:q}){const x=q?(0,t.str)`${g}${(0,r.getErrorPath)(q,r.Type.Str)}`:g;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,x)]}function D({keyword:g,it:{errSchemaPath:q}},{schemaPath:x,parentSchema:P}){let K=P?q:(0,t.str)`${q}/${g}`;return x&&(K=(0,t.str)`${K}${(0,r.getErrorPath)(x,r.Type.Str)}`),[m.schemaPath,K]}function F(g,{params:q,message:x},P){const{keyword:K,data:L,schemaValue:B,it:J}=g,{opts:re,propertyName:ve,topSchemaRef:ye,schemaPath:Se}=J;P.push([m.keyword,K],[m.params,typeof q=="function"?q(g):q||(0,t._)`{}`]),re.messages&&P.push([m.message,typeof x=="function"?x(g):x]),re.verbose&&P.push([m.schema,B],[m.parentSchema,(0,t._)`${ye}${Se}`],[n.default.data,L]),ve&&P.push([m.propertyName,ve])}})(errors)),errors}var hasRequiredBoolSchema;function requireBoolSchema(){if(hasRequiredBoolSchema)return boolSchema;hasRequiredBoolSchema=1,Object.defineProperty(boolSchema,"__esModule",{value:!0}),boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const e=requireErrors(),t=requireCodegen(),r=requireNames(),n={message:"boolean schema is false"};function s(u){const{gen:c,schema:d,validateName:m}=u;d===!1?o(u,!1):typeof d=="object"&&d.$async===!0?c.return(r.default.data):(c.assign((0,t._)`${m}.errors`,null),c.return(!0))}boolSchema.topBoolOrEmptySchema=s;function i(u,c){const{gen:d,schema:m}=u;m===!1?(d.var(c,!1),o(u)):d.var(c,!0)}boolSchema.boolOrEmptySchema=i;function o(u,c){const{gen:d,data:m}=u,T={gen:d,keyword:"false schema",data:m,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,e.reportError)(T,n,void 0,c)}return boolSchema}var dataType={},rules={},hasRequiredRules;function requireRules(){if(hasRequiredRules)return rules;hasRequiredRules=1,Object.defineProperty(rules,"__esModule",{value:!0}),rules.getRules=rules.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(s){return typeof s=="string"&&t.has(s)}rules.isJSONType=r;function n(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}return rules.getRules=n,rules}var applicability={},hasRequiredApplicability;function requireApplicability(){if(hasRequiredApplicability)return applicability;hasRequiredApplicability=1,Object.defineProperty(applicability,"__esModule",{value:!0}),applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function e({schema:n,self:s},i){const o=s.RULES.types[i];return o&&o!==!0&&t(n,o)}applicability.schemaHasRulesForType=e;function t(n,s){return s.rules.some(i=>r(n,i))}applicability.shouldUseGroup=t;function r(n,s){var i;return n[s.keyword]!==void 0||((i=s.definition.implements)===null||i===void 0?void 0:i.some(o=>n[o]!==void 0))}return applicability.shouldUseRule=r,applicability}var hasRequiredDataType;function requireDataType(){if(hasRequiredDataType)return dataType;hasRequiredDataType=1,Object.defineProperty(dataType,"__esModule",{value:!0}),dataType.reportTypeError=dataType.checkDataTypes=dataType.checkDataType=dataType.coerceAndCheckDataType=dataType.getJSONTypes=dataType.getSchemaTypes=dataType.DataType=void 0;const e=requireRules(),t=requireApplicability(),r=requireErrors(),n=requireCodegen(),s=requireUtil();var i;(function(x){x[x.Correct=0]="Correct",x[x.Wrong=1]="Wrong"})(i||(dataType.DataType=i={}));function o(x){const P=u(x.type);if(P.includes("null")){if(x.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!P.length&&x.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');x.nullable===!0&&P.push("null")}return P}dataType.getSchemaTypes=o;function u(x){const P=Array.isArray(x)?x:x?[x]:[];if(P.every(e.isJSONType))return P;throw new Error("type must be JSONType or JSONType[]: "+P.join(","))}dataType.getJSONTypes=u;function c(x,P){const{gen:K,data:L,opts:B}=x,J=m(P,B.coerceTypes),re=P.length>0&&!(J.length===0&&P.length===1&&(0,t.schemaHasRulesForType)(x,P[0]));if(re){const ve=D(P,L,B.strictNumbers,i.Wrong);K.if(ve,()=>{J.length?T(x,P,J):g(x)})}return re}dataType.coerceAndCheckDataType=c;const d=new Set(["string","number","integer","boolean","null"]);function m(x,P){return P?x.filter(K=>d.has(K)||P==="array"&&K==="array"):[]}function T(x,P,K){const{gen:L,data:B,opts:J}=x,re=L.let("dataType",(0,n._)`typeof ${B}`),ve=L.let("coerced",(0,n._)`undefined`);J.coerceTypes==="array"&&L.if((0,n._)`${re} == 'object' && Array.isArray(${B}) && ${B}.length == 1`,()=>L.assign(B,(0,n._)`${B}[0]`).assign(re,(0,n._)`typeof ${B}`).if(D(P,B,J.strictNumbers),()=>L.assign(ve,B))),L.if((0,n._)`${ve} !== undefined`);for(const Se of K)(d.has(Se)||Se==="array"&&J.coerceTypes==="array")&&ye(Se);L.else(),g(x),L.endIf(),L.if((0,n._)`${ve} !== undefined`,()=>{L.assign(B,ve),$(x,ve)});function ye(Se){switch(Se){case"string":L.elseIf((0,n._)`${re} == "number" || ${re} == "boolean"`).assign(ve,(0,n._)`"" + ${B}`).elseIf((0,n._)`${B} === null`).assign(ve,(0,n._)`""`);return;case"number":L.elseIf((0,n._)`${re} == "boolean" || ${B} === null
              || (${re} == "string" && ${B} && ${B} == +${B})`).assign(ve,(0,n._)`+${B}`);return;case"integer":L.elseIf((0,n._)`${re} === "boolean" || ${B} === null
              || (${re} === "string" && ${B} && ${B} == +${B} && !(${B} % 1))`).assign(ve,(0,n._)`+${B}`);return;case"boolean":L.elseIf((0,n._)`${B} === "false" || ${B} === 0 || ${B} === null`).assign(ve,!1).elseIf((0,n._)`${B} === "true" || ${B} === 1`).assign(ve,!0);return;case"null":L.elseIf((0,n._)`${B} === "" || ${B} === 0 || ${B} === false`),L.assign(ve,null);return;case"array":L.elseIf((0,n._)`${re} === "string" || ${re} === "number"
              || ${re} === "boolean" || ${B} === null`).assign(ve,(0,n._)`[${B}]`)}}}function $({gen:x,parentData:P,parentDataProperty:K},L){x.if((0,n._)`${P} !== undefined`,()=>x.assign((0,n._)`${P}[${K}]`,L))}function C(x,P,K,L=i.Correct){const B=L===i.Correct?n.operators.EQ:n.operators.NEQ;let J;switch(x){case"null":return(0,n._)`${P} ${B} null`;case"array":J=(0,n._)`Array.isArray(${P})`;break;case"object":J=(0,n._)`${P} && typeof ${P} == "object" && !Array.isArray(${P})`;break;case"integer":J=re((0,n._)`!(${P} % 1) && !isNaN(${P})`);break;case"number":J=re();break;default:return(0,n._)`typeof ${P} ${B} ${x}`}return L===i.Correct?J:(0,n.not)(J);function re(ve=n.nil){return(0,n.and)((0,n._)`typeof ${P} == "number"`,ve,K?(0,n._)`isFinite(${P})`:n.nil)}}dataType.checkDataType=C;function D(x,P,K,L){if(x.length===1)return C(x[0],P,K,L);let B;const J=(0,s.toHash)(x);if(J.array&&J.object){const re=(0,n._)`typeof ${P} != "object"`;B=J.null?re:(0,n._)`!${P} || ${re}`,delete J.null,delete J.array,delete J.object}else B=n.nil;J.number&&delete J.integer;for(const re in J)B=(0,n.and)(B,C(re,P,K,L));return B}dataType.checkDataTypes=D;const F={message:({schema:x})=>`must be ${x}`,params:({schema:x,schemaValue:P})=>typeof x=="string"?(0,n._)`{type: ${x}}`:(0,n._)`{type: ${P}}`};function g(x){const P=q(x);(0,r.reportError)(P,F)}dataType.reportTypeError=g;function q(x){const{gen:P,data:K,schema:L}=x,B=(0,s.schemaRefOrVal)(x,L,"type");return{gen:P,keyword:"type",data:K,schema:L.type,schemaCode:B,schemaValue:B,parentSchema:L,params:{},it:x}}return dataType}var defaults={},hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults;hasRequiredDefaults=1,Object.defineProperty(defaults,"__esModule",{value:!0}),defaults.assignDefaults=void 0;const e=requireCodegen(),t=requireUtil();function r(s,i){const{properties:o,items:u}=s.schema;if(i==="object"&&o)for(const c in o)n(s,c,o[c].default);else i==="array"&&Array.isArray(u)&&u.forEach((c,d)=>n(s,d,c.default))}defaults.assignDefaults=r;function n(s,i,o){const{gen:u,compositeRule:c,data:d,opts:m}=s;if(o===void 0)return;const T=(0,e._)`${d}${(0,e.getProperty)(i)}`;if(c){(0,t.checkStrictMode)(s,`default is ignored for: ${T}`);return}let $=(0,e._)`${T} === undefined`;m.useDefaults==="empty"&&($=(0,e._)`${$} || ${T} === null || ${T} === ""`),u.if($,(0,e._)`${T} = ${(0,e.stringify)(o)}`)}return defaults}var keyword={},code={},hasRequiredCode;function requireCode(){if(hasRequiredCode)return code;hasRequiredCode=1,Object.defineProperty(code,"__esModule",{value:!0}),code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const e=requireCodegen(),t=requireUtil(),r=requireNames(),n=requireUtil();function s(x,P){const{gen:K,data:L,it:B}=x;K.if(m(K,L,P,B.opts.ownProperties),()=>{x.setParams({missingProperty:(0,e._)`${P}`},!0),x.error()})}code.checkReportMissingProp=s;function i({gen:x,data:P,it:{opts:K}},L,B){return(0,e.or)(...L.map(J=>(0,e.and)(m(x,P,J,K.ownProperties),(0,e._)`${B} = ${J}`)))}code.checkMissingProp=i;function o(x,P){x.setParams({missingProperty:P},!0),x.error()}code.reportMissingProp=o;function u(x){return x.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=u;function c(x,P,K){return(0,e._)`${u(x)}.call(${P}, ${K})`}code.isOwnProperty=c;function d(x,P,K,L){const B=(0,e._)`${P}${(0,e.getProperty)(K)} !== undefined`;return L?(0,e._)`${B} && ${c(x,P,K)}`:B}code.propertyInData=d;function m(x,P,K,L){const B=(0,e._)`${P}${(0,e.getProperty)(K)} === undefined`;return L?(0,e.or)(B,(0,e.not)(c(x,P,K))):B}code.noPropertyInData=m;function T(x){return x?Object.keys(x).filter(P=>P!=="__proto__"):[]}code.allSchemaProperties=T;function $(x,P){return T(P).filter(K=>!(0,t.alwaysValidSchema)(x,P[K]))}code.schemaProperties=$;function C({schemaCode:x,data:P,it:{gen:K,topSchemaRef:L,schemaPath:B,errorPath:J},it:re},ve,ye,Se){const Ne=Se?(0,e._)`${x}, ${P}, ${L}${B}`:P,Ke=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,J)],[r.default.parentData,re.parentData],[r.default.parentDataProperty,re.parentDataProperty],[r.default.rootData,r.default.rootData]];re.opts.dynamicRef&&Ke.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Ar=(0,e._)`${Ne}, ${K.object(...Ke)}`;return ye!==e.nil?(0,e._)`${ve}.call(${ye}, ${Ar})`:(0,e._)`${ve}(${Ar})`}code.callValidateCode=C;const D=(0,e._)`new RegExp`;function F({gen:x,it:{opts:P}},K){const L=P.unicodeRegExp?"u":"",{regExp:B}=P.code,J=B(K,L);return x.scopeValue("pattern",{key:J.toString(),ref:J,code:(0,e._)`${B.code==="new RegExp"?D:(0,n.useFunc)(x,B)}(${K}, ${L})`})}code.usePattern=F;function g(x){const{gen:P,data:K,keyword:L,it:B}=x,J=P.name("valid");if(B.allErrors){const ve=P.let("valid",!0);return re(()=>P.assign(ve,!1)),ve}return P.var(J,!0),re(()=>P.break()),J;function re(ve){const ye=P.const("len",(0,e._)`${K}.length`);P.forRange("i",0,ye,Se=>{x.subschema({keyword:L,dataProp:Se,dataPropType:t.Type.Num},J),P.if((0,e.not)(J),ve)})}}code.validateArray=g;function q(x){const{gen:P,schema:K,keyword:L,it:B}=x;if(!Array.isArray(K))throw new Error("ajv implementation error");if(K.some(ve=>(0,t.alwaysValidSchema)(B,ve))&&!B.opts.unevaluated)return;const J=P.let("valid",!1),re=P.name("_valid");P.block(()=>K.forEach((ve,ye)=>{const Se=x.subschema({keyword:L,schemaProp:ye,compositeRule:!0},re);P.assign(J,(0,e._)`${J} || ${re}`),x.mergeValidEvaluated(Se,re)||P.if((0,e.not)(J))})),x.result(J,()=>x.reset(),()=>x.error(!0))}return code.validateUnion=q,code}var hasRequiredKeyword;function requireKeyword(){if(hasRequiredKeyword)return keyword;hasRequiredKeyword=1,Object.defineProperty(keyword,"__esModule",{value:!0}),keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const e=requireCodegen(),t=requireNames(),r=requireCode(),n=requireErrors();function s($,C){const{gen:D,keyword:F,schema:g,parentSchema:q,it:x}=$,P=C.macro.call(x.self,g,q,x),K=d(D,F,P);x.opts.validateSchema!==!1&&x.self.validateSchema(P,!0);const L=D.name("valid");$.subschema({schema:P,schemaPath:e.nil,errSchemaPath:`${x.errSchemaPath}/${F}`,topSchemaRef:K,compositeRule:!0},L),$.pass(L,()=>$.error(!0))}keyword.macroKeywordCode=s;function i($,C){var D;const{gen:F,keyword:g,schema:q,parentSchema:x,$data:P,it:K}=$;c(K,C);const L=!P&&C.compile?C.compile.call(K.self,q,x,K):C.validate,B=d(F,g,L),J=F.let("valid");$.block$data(J,re),$.ok((D=C.valid)!==null&&D!==void 0?D:J);function re(){if(C.errors===!1)Se(),C.modifying&&o($),Ne(()=>$.error());else{const Ke=C.async?ve():ye();C.modifying&&o($),Ne(()=>u($,Ke))}}function ve(){const Ke=F.let("ruleErrs",null);return F.try(()=>Se((0,e._)`await `),Ar=>F.assign(J,!1).if((0,e._)`${Ar} instanceof ${K.ValidationError}`,()=>F.assign(Ke,(0,e._)`${Ar}.errors`),()=>F.throw(Ar))),Ke}function ye(){const Ke=(0,e._)`${B}.errors`;return F.assign(Ke,null),Se(e.nil),Ke}function Se(Ke=C.async?(0,e._)`await `:e.nil){const Ar=K.opts.passContext?t.default.this:t.default.self,hi=!("compile"in C&&!P||C.schema===!1);F.assign(J,(0,e._)`${Ke}${(0,r.callValidateCode)($,B,Ar,hi)}`,C.modifying)}function Ne(Ke){var Ar;F.if((0,e.not)((Ar=C.valid)!==null&&Ar!==void 0?Ar:J),Ke)}}keyword.funcKeywordCode=i;function o($){const{gen:C,data:D,it:F}=$;C.if(F.parentData,()=>C.assign(D,(0,e._)`${F.parentData}[${F.parentDataProperty}]`))}function u($,C){const{gen:D}=$;D.if((0,e._)`Array.isArray(${C})`,()=>{D.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${C} : ${t.default.vErrors}.concat(${C})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)($)},()=>$.error())}function c({schemaEnv:$},C){if(C.async&&!$.$async)throw new Error("async keyword in sync schema")}function d($,C,D){if(D===void 0)throw new Error(`keyword "${C}" failed to compile`);return $.scopeValue("keyword",typeof D=="function"?{ref:D}:{ref:D,code:(0,e.stringify)(D)})}function m($,C,D=!1){return!C.length||C.some(F=>F==="array"?Array.isArray($):F==="object"?$&&typeof $=="object"&&!Array.isArray($):typeof $==F||D&&typeof $>"u")}keyword.validSchemaType=m;function T({schema:$,opts:C,self:D,errSchemaPath:F},g,q){if(Array.isArray(g.keyword)?!g.keyword.includes(q):g.keyword!==q)throw new Error("ajv implementation error");const x=g.dependencies;if(x?.some(P=>!Object.prototype.hasOwnProperty.call($,P)))throw new Error(`parent schema must have dependencies of ${q}: ${x.join(",")}`);if(g.validateSchema&&!g.validateSchema($[q])){const P=`keyword "${q}" value is invalid at path "${F}": `+D.errorsText(g.validateSchema.errors);if(C.validateSchema==="log")D.logger.error(P);else throw new Error(P)}}return keyword.validateKeywordUsage=T,keyword}var subschema={},hasRequiredSubschema;function requireSubschema(){if(hasRequiredSubschema)return subschema;hasRequiredSubschema=1,Object.defineProperty(subschema,"__esModule",{value:!0}),subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const e=requireCodegen(),t=requireUtil();function r(i,{keyword:o,schemaProp:u,schema:c,schemaPath:d,errSchemaPath:m,topSchemaRef:T}){if(o!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const $=i.schema[o];return u===void 0?{schema:$,schemaPath:(0,e._)`${i.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${i.errSchemaPath}/${o}`}:{schema:$[u],schemaPath:(0,e._)`${i.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(u)}`,errSchemaPath:`${i.errSchemaPath}/${o}/${(0,t.escapeFragment)(u)}`}}if(c!==void 0){if(d===void 0||m===void 0||T===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:d,topSchemaRef:T,errSchemaPath:m}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=r;function n(i,o,{dataProp:u,dataPropType:c,data:d,dataTypes:m,propertyName:T}){if(d!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:$}=o;if(u!==void 0){const{errorPath:D,dataPathArr:F,opts:g}=o,q=$.let("data",(0,e._)`${o.data}${(0,e.getProperty)(u)}`,!0);C(q),i.errorPath=(0,e.str)`${D}${(0,t.getErrorPath)(u,c,g.jsPropertySyntax)}`,i.parentDataProperty=(0,e._)`${u}`,i.dataPathArr=[...F,i.parentDataProperty]}if(d!==void 0){const D=d instanceof e.Name?d:$.let("data",d,!0);C(D),T!==void 0&&(i.propertyName=T)}m&&(i.dataTypes=m);function C(D){i.data=D,i.dataLevel=o.dataLevel+1,i.dataTypes=[],o.definedProperties=new Set,i.parentData=o.data,i.dataNames=[...o.dataNames,D]}}subschema.extendSubschemaData=n;function s(i,{jtdDiscriminator:o,jtdMetadata:u,compositeRule:c,createErrors:d,allErrors:m}){c!==void 0&&(i.compositeRule=c),d!==void 0&&(i.createErrors=d),m!==void 0&&(i.allErrors=m),i.jtdDiscriminator=o,i.jtdMetadata=u}return subschema.extendSubschemaMode=s,subschema}var resolve={},fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}),fastDeepEqual}var jsonSchemaTraverse={exports:{}},hasRequiredJsonSchemaTraverse;function requireJsonSchemaTraverse(){if(hasRequiredJsonSchemaTraverse)return jsonSchemaTraverse.exports;hasRequiredJsonSchemaTraverse=1;var e=jsonSchemaTraverse.exports=function(n,s,i){typeof s=="function"&&(i=s,s={}),i=s.cb||i;var o=typeof i=="function"?i:i.pre||function(){},u=i.post||function(){};t(s,o,u,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,s,i,o,u,c,d,m,T,$){if(o&&typeof o=="object"&&!Array.isArray(o)){s(o,u,c,d,m,T,$);for(var C in o){var D=o[C];if(Array.isArray(D)){if(C in e.arrayKeywords)for(var F=0;F<D.length;F++)t(n,s,i,D[F],u+"/"+C+"/"+F,c,u,C,o,F)}else if(C in e.propsKeywords){if(D&&typeof D=="object")for(var g in D)t(n,s,i,D[g],u+"/"+C+"/"+r(g),c,u,C,o,g)}else(C in e.keywords||n.allKeys&&!(C in e.skipKeywords))&&t(n,s,i,D,u+"/"+C,c,u,C,o)}i(o,u,c,d,m,T,$)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse.exports}var hasRequiredResolve;function requireResolve(){if(hasRequiredResolve)return resolve;hasRequiredResolve=1,Object.defineProperty(resolve,"__esModule",{value:!0}),resolve.getSchemaRefs=resolve.resolveUrl=resolve.normalizeId=resolve._getFullPath=resolve.getFullPath=resolve.inlineRef=void 0;const e=requireUtil(),t=requireFastDeepEqual(),r=requireJsonSchemaTraverse(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function s(F,g=!0){return typeof F=="boolean"?!0:g===!0?!o(F):g?u(F)<=g:!1}resolve.inlineRef=s;const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(F){for(const g in F){if(i.has(g))return!0;const q=F[g];if(Array.isArray(q)&&q.some(o)||typeof q=="object"&&o(q))return!0}return!1}function u(F){let g=0;for(const q in F)if(q==="$ref"||(g++,!n.has(q)&&(typeof F[q]=="object"&&(0,e.eachItem)(F[q],x=>g+=u(x)),g===1/0)))return 1/0;return g}function c(F,g="",q){q!==!1&&(g=T(g));const x=F.parse(g);return d(F,x)}resolve.getFullPath=c;function d(F,g){return F.serialize(g).split("#")[0]+"#"}resolve._getFullPath=d;const m=/#\/?$/;function T(F){return F?F.replace(m,""):""}resolve.normalizeId=T;function $(F,g,q){return q=T(q),F.resolve(g,q)}resolve.resolveUrl=$;const C=/^[a-z_][-a-z0-9._]*$/i;function D(F,g){if(typeof F=="boolean")return{};const{schemaId:q,uriResolver:x}=this.opts,P=T(F[q]||g),K={"":P},L=c(x,P,!1),B={},J=new Set;return r(F,{allKeys:!0},(ye,Se,Ne,Ke)=>{if(Ke===void 0)return;const Ar=L+Se;let hi=K[Ke];typeof ye[q]=="string"&&(hi=gi.call(this,ye[q])),Gi.call(this,ye.$anchor),Gi.call(this,ye.$dynamicAnchor),K[Se]=hi;function gi(bs){const ua=this.opts.uriResolver.resolve;if(bs=T(hi?ua(hi,bs):bs),J.has(bs))throw ve(bs);J.add(bs);let Re=this.refs[bs];return typeof Re=="string"&&(Re=this.refs[Re]),typeof Re=="object"?re(ye,Re.schema,bs):bs!==T(Ar)&&(bs[0]==="#"?(re(ye,B[bs],bs),B[bs]=ye):this.refs[bs]=Ar),bs}function Gi(bs){if(typeof bs=="string"){if(!C.test(bs))throw new Error(`invalid anchor "${bs}"`);gi.call(this,`#${bs}`)}}}),B;function re(ye,Se,Ne){if(Se!==void 0&&!t(ye,Se))throw ve(Ne)}function ve(ye){return new Error(`reference "${ye}" resolves to more than one schema`)}}return resolve.getSchemaRefs=D,resolve}var hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate;hasRequiredValidate=1,Object.defineProperty(validate,"__esModule",{value:!0}),validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const e=requireBoolSchema(),t=requireDataType(),r=requireApplicability(),n=requireDataType(),s=requireDefaults(),i=requireKeyword(),o=requireSubschema(),u=requireCodegen(),c=requireNames(),d=requireResolve(),m=requireUtil(),T=requireErrors();function $(te){if(L(te)&&(J(te),K(te))){g(te);return}C(te,()=>(0,e.topBoolOrEmptySchema)(te))}validate.validateFunctionCode=$;function C({gen:te,validateName:se,schema:$e,schemaEnv:Ie,opts:Ye},Je){Ye.code.es5?te.func(se,(0,u._)`${c.default.data}, ${c.default.valCxt}`,Ie.$async,()=>{te.code((0,u._)`"use strict"; ${x($e,Ye)}`),F(te,Ye),te.code(Je)}):te.func(se,(0,u._)`${c.default.data}, ${D(Ye)}`,Ie.$async,()=>te.code(x($e,Ye)).code(Je))}function D(te){return(0,u._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${te.dynamicRef?(0,u._)`, ${c.default.dynamicAnchors}={}`:u.nil}}={}`}function F(te,se){te.if(c.default.valCxt,()=>{te.var(c.default.instancePath,(0,u._)`${c.default.valCxt}.${c.default.instancePath}`),te.var(c.default.parentData,(0,u._)`${c.default.valCxt}.${c.default.parentData}`),te.var(c.default.parentDataProperty,(0,u._)`${c.default.valCxt}.${c.default.parentDataProperty}`),te.var(c.default.rootData,(0,u._)`${c.default.valCxt}.${c.default.rootData}`),se.dynamicRef&&te.var(c.default.dynamicAnchors,(0,u._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{te.var(c.default.instancePath,(0,u._)`""`),te.var(c.default.parentData,(0,u._)`undefined`),te.var(c.default.parentDataProperty,(0,u._)`undefined`),te.var(c.default.rootData,c.default.data),se.dynamicRef&&te.var(c.default.dynamicAnchors,(0,u._)`{}`)})}function g(te){const{schema:se,opts:$e,gen:Ie}=te;C(te,()=>{$e.$comment&&se.$comment&&Ke(te),ye(te),Ie.let(c.default.vErrors,null),Ie.let(c.default.errors,0),$e.unevaluated&&q(te),re(te),Ar(te)})}function q(te){const{gen:se,validateName:$e}=te;te.evaluated=se.const("evaluated",(0,u._)`${$e}.evaluated`),se.if((0,u._)`${te.evaluated}.dynamicProps`,()=>se.assign((0,u._)`${te.evaluated}.props`,(0,u._)`undefined`)),se.if((0,u._)`${te.evaluated}.dynamicItems`,()=>se.assign((0,u._)`${te.evaluated}.items`,(0,u._)`undefined`))}function x(te,se){const $e=typeof te=="object"&&te[se.schemaId];return $e&&(se.code.source||se.code.process)?(0,u._)`/*# sourceURL=${$e} */`:u.nil}function P(te,se){if(L(te)&&(J(te),K(te))){B(te,se);return}(0,e.boolOrEmptySchema)(te,se)}function K({schema:te,self:se}){if(typeof te=="boolean")return!te;for(const $e in te)if(se.RULES.all[$e])return!0;return!1}function L(te){return typeof te.schema!="boolean"}function B(te,se){const{schema:$e,gen:Ie,opts:Ye}=te;Ye.$comment&&$e.$comment&&Ke(te),Se(te),Ne(te);const Je=Ie.const("_errs",c.default.errors);re(te,Je),Ie.var(se,(0,u._)`${Je} === ${c.default.errors}`)}function J(te){(0,m.checkUnknownRules)(te),ve(te)}function re(te,se){if(te.opts.jtd)return gi(te,[],!1,se);const $e=(0,t.getSchemaTypes)(te.schema),Ie=(0,t.coerceAndCheckDataType)(te,$e);gi(te,$e,!Ie,se)}function ve(te){const{schema:se,errSchemaPath:$e,opts:Ie,self:Ye}=te;se.$ref&&Ie.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(se,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function ye(te){const{schema:se,opts:$e}=te;se.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,m.checkStrictMode)(te,"default is ignored in the schema root")}function Se(te){const se=te.schema[te.opts.schemaId];se&&(te.baseId=(0,d.resolveUrl)(te.opts.uriResolver,te.baseId,se))}function Ne(te){if(te.schema.$async&&!te.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ke({gen:te,schemaEnv:se,schema:$e,errSchemaPath:Ie,opts:Ye}){const Je=$e.$comment;if(Ye.$comment===!0)te.code((0,u._)`${c.default.self}.logger.log(${Je})`);else if(typeof Ye.$comment=="function"){const pi=(0,u.str)`${Ie}/$comment`,Os=te.scopeValue("root",{ref:se.root});te.code((0,u._)`${c.default.self}.opts.$comment(${Je}, ${pi}, ${Os}.schema)`)}}function Ar(te){const{gen:se,schemaEnv:$e,validateName:Ie,ValidationError:Ye,opts:Je}=te;$e.$async?se.if((0,u._)`${c.default.errors} === 0`,()=>se.return(c.default.data),()=>se.throw((0,u._)`new ${Ye}(${c.default.vErrors})`)):(se.assign((0,u._)`${Ie}.errors`,c.default.vErrors),Je.unevaluated&&hi(te),se.return((0,u._)`${c.default.errors} === 0`))}function hi({gen:te,evaluated:se,props:$e,items:Ie}){$e instanceof u.Name&&te.assign((0,u._)`${se}.props`,$e),Ie instanceof u.Name&&te.assign((0,u._)`${se}.items`,Ie)}function gi(te,se,$e,Ie){const{gen:Ye,schema:Je,data:pi,allErrors:Os,opts:vi,self:Ui}=te,{RULES:ca}=Ui;if(Je.$ref&&(vi.ignoreKeywordsWithRef||!(0,m.schemaHasRulesButRef)(Je,ca))){Ye.block(()=>De(te,"$ref",ca.all.$ref.definition));return}vi.jtd||bs(te,se),Ye.block(()=>{for(const da of ca.rules)va(da);va(ca.post)});function va(da){(0,r.shouldUseGroup)(Je,da)&&(da.type?(Ye.if((0,n.checkDataType)(da.type,pi,vi.strictNumbers)),Gi(te,da),se.length===1&&se[0]===da.type&&$e&&(Ye.else(),(0,n.reportTypeError)(te)),Ye.endIf()):Gi(te,da),Os||Ye.if((0,u._)`${c.default.errors} === ${Ie||0}`))}}function Gi(te,se){const{gen:$e,schema:Ie,opts:{useDefaults:Ye}}=te;Ye&&(0,s.assignDefaults)(te,se.type),$e.block(()=>{for(const Je of se.rules)(0,r.shouldUseRule)(Ie,Je)&&De(te,Je.keyword,Je.definition,se.type)})}function bs(te,se){te.schemaEnv.meta||!te.opts.strictTypes||(ua(te,se),te.opts.allowUnionTypes||Re(te,se),ie(te,te.dataTypes))}function ua(te,se){if(se.length){if(!te.dataTypes.length){te.dataTypes=se;return}se.forEach($e=>{ue(te.dataTypes,$e)||X(te,`type "${$e}" not allowed by context "${te.dataTypes.join(",")}"`)}),G(te,se)}}function Re(te,se){se.length>1&&!(se.length===2&&se.includes("null"))&&X(te,"use allowUnionTypes to allow union type keyword")}function ie(te,se){const $e=te.self.RULES.all;for(const Ie in $e){const Ye=$e[Ie];if(typeof Ye=="object"&&(0,r.shouldUseRule)(te.schema,Ye)){const{type:Je}=Ye.definition;Je.length&&!Je.some(pi=>ke(se,pi))&&X(te,`missing type "${Je.join(",")}" for keyword "${Ie}"`)}}}function ke(te,se){return te.includes(se)||se==="number"&&te.includes("integer")}function ue(te,se){return te.includes(se)||se==="integer"&&te.includes("number")}function G(te,se){const $e=[];for(const Ie of te.dataTypes)ue(se,Ie)?$e.push(Ie):se.includes("integer")&&Ie==="number"&&$e.push("integer");te.dataTypes=$e}function X(te,se){const $e=te.schemaEnv.baseId+te.errSchemaPath;se+=` at "${$e}" (strictTypes)`,(0,m.checkStrictMode)(te,se,te.opts.strictTypes)}class ce{constructor(se,$e,Ie){if((0,i.validateKeywordUsage)(se,$e,Ie),this.gen=se.gen,this.allErrors=se.allErrors,this.keyword=Ie,this.data=se.data,this.schema=se.schema[Ie],this.$data=$e.$data&&se.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(se,this.schema,Ie,this.$data),this.schemaType=$e.schemaType,this.parentSchema=se.schema,this.params={},this.it=se,this.def=$e,this.$data)this.schemaCode=se.gen.const("vSchema",vr(this.$data,se));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${Ie} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=se.gen.const("_errs",c.default.errors))}result(se,$e,Ie){this.failResult((0,u.not)(se),$e,Ie)}failResult(se,$e,Ie){this.gen.if(se),Ie?Ie():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(se,$e){this.failResult((0,u.not)(se),void 0,$e)}fail(se){if(se===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(se),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(se){if(!this.$data)return this.fail(se);const{schemaCode:$e}=this;this.fail((0,u._)`${$e} !== undefined && (${(0,u.or)(this.invalid$data(),se)})`)}error(se,$e,Ie){if($e){this.setParams($e),this._error(se,Ie),this.setParams({});return}this._error(se,Ie)}_error(se,$e){(se?T.reportExtraError:T.reportError)(this,this.def.error,$e)}$dataError(){(0,T.reportError)(this,this.def.$dataError||T.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,T.resetErrorsCount)(this.gen,this.errsCount)}ok(se){this.allErrors||this.gen.if(se)}setParams(se,$e){$e?Object.assign(this.params,se):this.params=se}block$data(se,$e,Ie=u.nil){this.gen.block(()=>{this.check$data(se,Ie),$e()})}check$data(se=u.nil,$e=u.nil){if(!this.$data)return;const{gen:Ie,schemaCode:Ye,schemaType:Je,def:pi}=this;Ie.if((0,u.or)((0,u._)`${Ye} === undefined`,$e)),se!==u.nil&&Ie.assign(se,!0),(Je.length||pi.validateSchema)&&(Ie.elseIf(this.invalid$data()),this.$dataError(),se!==u.nil&&Ie.assign(se,!1)),Ie.else()}invalid$data(){const{gen:se,schemaCode:$e,schemaType:Ie,def:Ye,it:Je}=this;return(0,u.or)(pi(),Os());function pi(){if(Ie.length){if(!($e instanceof u.Name))throw new Error("ajv implementation error");const vi=Array.isArray(Ie)?Ie:[Ie];return(0,u._)`${(0,n.checkDataTypes)(vi,$e,Je.opts.strictNumbers,n.DataType.Wrong)}`}return u.nil}function Os(){if(Ye.validateSchema){const vi=se.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,u._)`!${vi}(${$e})`}return u.nil}}subschema(se,$e){const Ie=(0,o.getSubschema)(this.it,se);(0,o.extendSubschemaData)(Ie,this.it,se),(0,o.extendSubschemaMode)(Ie,se);const Ye={...this.it,...Ie,items:void 0,props:void 0};return P(Ye,$e),Ye}mergeEvaluated(se,$e){const{it:Ie,gen:Ye}=this;Ie.opts.unevaluated&&(Ie.props!==!0&&se.props!==void 0&&(Ie.props=m.mergeEvaluated.props(Ye,se.props,Ie.props,$e)),Ie.items!==!0&&se.items!==void 0&&(Ie.items=m.mergeEvaluated.items(Ye,se.items,Ie.items,$e)))}mergeValidEvaluated(se,$e){const{it:Ie,gen:Ye}=this;if(Ie.opts.unevaluated&&(Ie.props!==!0||Ie.items!==!0))return Ye.if($e,()=>this.mergeEvaluated(se,u.Name)),!0}}validate.KeywordCxt=ce;function De(te,se,$e,Ie){const Ye=new ce(te,$e,se);"code"in $e?$e.code(Ye,Ie):Ye.$data&&$e.validate?(0,i.funcKeywordCode)(Ye,$e):"macro"in $e?(0,i.macroKeywordCode)(Ye,$e):($e.compile||$e.validate)&&(0,i.funcKeywordCode)(Ye,$e)}const qe=/^\/(?:[^~]|~0|~1)*$/,bt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function vr(te,{dataLevel:se,dataNames:$e,dataPathArr:Ie}){let Ye,Je;if(te==="")return c.default.rootData;if(te[0]==="/"){if(!qe.test(te))throw new Error(`Invalid JSON-pointer: ${te}`);Ye=te,Je=c.default.rootData}else{const Ui=bt.exec(te);if(!Ui)throw new Error(`Invalid JSON-pointer: ${te}`);const ca=+Ui[1];if(Ye=Ui[2],Ye==="#"){if(ca>=se)throw new Error(vi("property/index",ca));return Ie[se-ca]}if(ca>se)throw new Error(vi("data",ca));if(Je=$e[se-ca],!Ye)return Je}let pi=Je;const Os=Ye.split("/");for(const Ui of Os)Ui&&(Je=(0,u._)`${Je}${(0,u.getProperty)((0,m.unescapeJsonPointer)(Ui))}`,pi=(0,u._)`${pi} && ${Je}`);return pi;function vi(Ui,ca){return`Cannot access ${Ui} ${ca} levels up, current level is ${se}`}}return validate.getData=vr,validate}var validation_error={},hasRequiredValidation_error;function requireValidation_error(){if(hasRequiredValidation_error)return validation_error;hasRequiredValidation_error=1,Object.defineProperty(validation_error,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return validation_error.default=e,validation_error}var ref_error={},hasRequiredRef_error;function requireRef_error(){if(hasRequiredRef_error)return ref_error;hasRequiredRef_error=1,Object.defineProperty(ref_error,"__esModule",{value:!0});const e=requireResolve();class t extends Error{constructor(n,s,i,o){super(o||`can't resolve reference ${i} from id ${s}`),this.missingRef=(0,e.resolveUrl)(n,s,i),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return ref_error.default=t,ref_error}var compile={},hasRequiredCompile;function requireCompile(){if(hasRequiredCompile)return compile;hasRequiredCompile=1,Object.defineProperty(compile,"__esModule",{value:!0}),compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const e=requireCodegen(),t=requireValidation_error(),r=requireNames(),n=requireResolve(),s=requireUtil(),i=requireValidate();class o{constructor(q){var x;this.refs={},this.dynamicAnchors={};let P;typeof q.schema=="object"&&(P=q.schema),this.schema=q.schema,this.schemaId=q.schemaId,this.root=q.root||this,this.baseId=(x=q.baseId)!==null&&x!==void 0?x:(0,n.normalizeId)(P?.[q.schemaId||"$id"]),this.schemaPath=q.schemaPath,this.localRefs=q.localRefs,this.meta=q.meta,this.$async=P?.$async,this.refs={}}}compile.SchemaEnv=o;function u(g){const q=m.call(this,g);if(q)return q;const x=(0,n.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:P,lines:K}=this.opts.code,{ownProperties:L}=this.opts,B=new e.CodeGen(this.scope,{es5:P,lines:K,ownProperties:L});let J;g.$async&&(J=B.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const re=B.scopeName("validate");g.validateName=re;const ve={gen:B,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:B.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:re,ValidationError:J,schema:g.schema,schemaEnv:g,rootId:x,baseId:g.baseId||x,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let ye;try{this._compilations.add(g),(0,i.validateFunctionCode)(ve),B.optimize(this.opts.code.optimize);const Se=B.toString();ye=`${B.scopeRefs(r.default.scope)}return ${Se}`,this.opts.code.process&&(ye=this.opts.code.process(ye,g));const Ne=new Function(`${r.default.self}`,`${r.default.scope}`,ye)(this,this.scope.get());if(this.scope.value(re,{ref:Ne}),Ne.errors=null,Ne.schema=g.schema,Ne.schemaEnv=g,g.$async&&(Ne.$async=!0),this.opts.code.source===!0&&(Ne.source={validateName:re,validateCode:Se,scopeValues:B._values}),this.opts.unevaluated){const{props:Ke,items:Ar}=ve;Ne.evaluated={props:Ke instanceof e.Name?void 0:Ke,items:Ar instanceof e.Name?void 0:Ar,dynamicProps:Ke instanceof e.Name,dynamicItems:Ar instanceof e.Name},Ne.source&&(Ne.source.evaluated=(0,e.stringify)(Ne.evaluated))}return g.validate=Ne,g}catch(Se){throw delete g.validate,delete g.validateName,ye&&this.logger.error("Error compiling schema, function code:",ye),Se}finally{this._compilations.delete(g)}}compile.compileSchema=u;function c(g,q,x){var P;x=(0,n.resolveUrl)(this.opts.uriResolver,q,x);const K=g.refs[x];if(K)return K;let L=$.call(this,g,x);if(L===void 0){const B=(P=g.localRefs)===null||P===void 0?void 0:P[x],{schemaId:J}=this.opts;B&&(L=new o({schema:B,schemaId:J,root:g,baseId:q}))}if(L!==void 0)return g.refs[x]=d.call(this,L)}compile.resolveRef=c;function d(g){return(0,n.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:u.call(this,g)}function m(g){for(const q of this._compilations)if(T(q,g))return q}compile.getCompilingSchema=m;function T(g,q){return g.schema===q.schema&&g.root===q.root&&g.baseId===q.baseId}function $(g,q){let x;for(;typeof(x=this.refs[q])=="string";)q=x;return x||this.schemas[q]||C.call(this,g,q)}function C(g,q){const x=this.opts.uriResolver.parse(q),P=(0,n._getFullPath)(this.opts.uriResolver,x);let K=(0,n.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&P===K)return F.call(this,x,g);const L=(0,n.normalizeId)(P),B=this.refs[L]||this.schemas[L];if(typeof B=="string"){const J=C.call(this,g,B);return typeof J?.schema!="object"?void 0:F.call(this,x,J)}if(typeof B?.schema=="object"){if(B.validate||u.call(this,B),L===(0,n.normalizeId)(q)){const{schema:J}=B,{schemaId:re}=this.opts,ve=J[re];return ve&&(K=(0,n.resolveUrl)(this.opts.uriResolver,K,ve)),new o({schema:J,schemaId:re,root:g,baseId:K})}return F.call(this,x,B)}}compile.resolveSchema=C;const D=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function F(g,{baseId:q,schema:x,root:P}){var K;if(((K=g.fragment)===null||K===void 0?void 0:K[0])!=="/")return;for(const J of g.fragment.slice(1).split("/")){if(typeof x=="boolean")return;const re=x[(0,s.unescapeFragment)(J)];if(re===void 0)return;x=re;const ve=typeof x=="object"&&x[this.opts.schemaId];!D.has(J)&&ve&&(q=(0,n.resolveUrl)(this.opts.uriResolver,q,ve))}let L;if(typeof x!="boolean"&&x.$ref&&!(0,s.schemaHasRulesButRef)(x,this.RULES)){const J=(0,n.resolveUrl)(this.opts.uriResolver,q,x.$ref);L=C.call(this,P,J)}const{schemaId:B}=this.opts;if(L=L||new o({schema:x,schemaId:B,root:P,baseId:q}),L.schema!==L.root.schema)return L}return compile}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri={},fastUri={exports:{}},utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r($){let C="",D=0,F=0;for(F=0;F<$.length;F++)if(D=$[F].charCodeAt(0),D!==48){if(!(D>=48&&D<=57||D>=65&&D<=70||D>=97&&D<=102))return"";C+=$[F];break}for(F+=1;F<$.length;F++){if(D=$[F].charCodeAt(0),!(D>=48&&D<=57||D>=65&&D<=70||D>=97&&D<=102))return"";C+=$[F]}return C}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function s($){return $.length=0,!0}function i($,C,D){if($.length){const F=r($);if(F!=="")C.push(F);else return D.error=!0,!1;$.length=0}return!0}function o($){let C=0;const D={error:!1,address:"",zone:""},F=[],g=[];let q=!1,x=!1,P=i;for(let K=0;K<$.length;K++){const L=$[K];if(!(L==="["||L==="]"))if(L===":"){if(q===!0&&(x=!0),!P(g,F,D))break;if(++C>7){D.error=!0;break}K>0&&$[K-1]===":"&&(q=!0),F.push(":");continue}else if(L==="%"){if(!P(g,F,D))break;P=s}else{g.push(L);continue}}return g.length&&(P===s?D.zone=g.join(""):x?F.push(g.join("")):F.push(r(g))),D.address=F.join(""),D}function u($){if(c($,":")<2)return{host:$,isIPV6:!1};const C=o($);if(C.error)return{host:$,isIPV6:!1};{let D=C.address,F=C.address;return C.zone&&(D+="%"+C.zone,F+="%25"+C.zone),{host:D,isIPV6:!0,escapedHost:F}}}function c($,C){let D=0;for(let F=0;F<$.length;F++)$[F]===C&&D++;return D}function d($){let C=$;const D=[];let F=-1,g=0;for(;g=C.length;){if(g===1){if(C===".")break;if(C==="/"){D.push("/");break}else{D.push(C);break}}else if(g===2){if(C[0]==="."){if(C[1]===".")break;if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&(C[1]==="."||C[1]==="/")){D.push("/");break}}else if(g===3&&C==="/.."){D.length!==0&&D.pop(),D.push("/");break}if(C[0]==="."){if(C[1]==="."){if(C[2]==="/"){C=C.slice(3);continue}}else if(C[1]==="/"){C=C.slice(2);continue}}else if(C[0]==="/"&&C[1]==="."){if(C[2]==="/"){C=C.slice(2);continue}else if(C[2]==="."&&C[3]==="/"){C=C.slice(3),D.length!==0&&D.pop();continue}}if((F=C.indexOf("/",1))===-1){D.push(C);break}else D.push(C.slice(0,F)),C=C.slice(F)}return D.join("")}function m($,C){const D=C!==!0?escape:unescape;return $.scheme!==void 0&&($.scheme=D($.scheme)),$.userinfo!==void 0&&($.userinfo=D($.userinfo)),$.host!==void 0&&($.host=D($.host)),$.path!==void 0&&($.path=D($.path)),$.query!==void 0&&($.query=D($.query)),$.fragment!==void 0&&($.fragment=D($.fragment)),$}function T($){const C=[];if($.userinfo!==void 0&&(C.push($.userinfo),C.push("@")),$.host!==void 0){let D=unescape($.host);if(!t(D)){const F=u(D);F.isIPV6===!0?D=`[${F.escapedHost}]`:D=$.host}C.push(D)}return(typeof $.port=="number"||typeof $.port=="string")&&(C.push(":"),C.push(String($.port))),C.length?C.join(""):void 0}return utils={nonSimpleDomain:n,recomposeAuthority:T,normalizeComponentEncoding:m,removeDotSegments:d,isIPv4:t,isUUID:e,normalizeIPv6:u,stringArrayToHexStripped:r},utils}var schemes,hasRequiredSchemes;function requireSchemes(){if(hasRequiredSchemes)return schemes;hasRequiredSchemes=1;const{isUUID:e}=requireUtils(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(P){return r.indexOf(P)!==-1}function s(P){return P.secure===!0?!0:P.secure===!1?!1:P.scheme?P.scheme.length===3&&(P.scheme[0]==="w"||P.scheme[0]==="W")&&(P.scheme[1]==="s"||P.scheme[1]==="S")&&(P.scheme[2]==="s"||P.scheme[2]==="S"):!1}function i(P){return P.host||(P.error=P.error||"HTTP URIs must have a host."),P}function o(P){const K=String(P.scheme).toLowerCase()==="https";return(P.port===(K?443:80)||P.port==="")&&(P.port=void 0),P.path||(P.path="/"),P}function u(P){return P.secure=s(P),P.resourceName=(P.path||"/")+(P.query?"?"+P.query:""),P.path=void 0,P.query=void 0,P}function c(P){if((P.port===(s(P)?443:80)||P.port==="")&&(P.port=void 0),typeof P.secure=="boolean"&&(P.scheme=P.secure?"wss":"ws",P.secure=void 0),P.resourceName){const[K,L]=P.resourceName.split("?");P.path=K&&K!=="/"?K:void 0,P.query=L,P.resourceName=void 0}return P.fragment=void 0,P}function d(P,K){if(!P.path)return P.error="URN can not be parsed",P;const L=P.path.match(t);if(L){const B=K.scheme||P.scheme||"urn";P.nid=L[1].toLowerCase(),P.nss=L[2];const J=`${B}:${K.nid||P.nid}`,re=x(J);P.path=void 0,re&&(P=re.parse(P,K))}else P.error=P.error||"URN can not be parsed.";return P}function m(P,K){if(P.nid===void 0)throw new Error("URN without nid cannot be serialized");const L=K.scheme||P.scheme||"urn",B=P.nid.toLowerCase(),J=`${L}:${K.nid||B}`,re=x(J);re&&(P=re.serialize(P,K));const ve=P,ye=P.nss;return ve.path=`${B||K.nid}:${ye}`,K.skipEscape=!0,ve}function T(P,K){const L=P;return L.uuid=L.nss,L.nss=void 0,!K.tolerant&&(!L.uuid||!e(L.uuid))&&(L.error=L.error||"UUID is not valid."),L}function $(P){const K=P;return K.nss=(P.uuid||"").toLowerCase(),K}const C={scheme:"http",domainHost:!0,parse:i,serialize:o},D={scheme:"https",domainHost:C.domainHost,parse:i,serialize:o},F={scheme:"ws",domainHost:!0,parse:u,serialize:c},g={scheme:"wss",domainHost:F.domainHost,parse:F.parse,serialize:F.serialize},q={http:C,https:D,ws:F,wss:g,urn:{scheme:"urn",parse:d,serialize:m,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:T,serialize:$,skipNormalize:!0}};Object.setPrototypeOf(q,null);function x(P){return P&&(q[P]||q[P.toLowerCase()])||void 0}return schemes={wsIsSecure:s,SCHEMES:q,isValidSchemeName:n,getSchemeHandler:x},schemes}var hasRequiredFastUri;function requireFastUri(){if(hasRequiredFastUri)return fastUri.exports;hasRequiredFastUri=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:s,nonSimpleDomain:i}=requireUtils(),{SCHEMES:o,getSchemeHandler:u}=requireSchemes();function c(g,q){return typeof g=="string"?g=$(D(g,q),q):typeof g=="object"&&(g=D($(g,q),q)),g}function d(g,q,x){const P=x?Object.assign({scheme:"null"},x):{scheme:"null"},K=m(D(g,P),D(q,P),P,!0);return P.skipEscape=!0,$(K,P)}function m(g,q,x,P){const K={};return P||(g=D($(g,x),x),q=D($(q,x),x)),x=x||{},!x.tolerant&&q.scheme?(K.scheme=q.scheme,K.userinfo=q.userinfo,K.host=q.host,K.port=q.port,K.path=t(q.path||""),K.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(K.userinfo=q.userinfo,K.host=q.host,K.port=q.port,K.path=t(q.path||""),K.query=q.query):(q.path?(q.path[0]==="/"?K.path=t(q.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?K.path="/"+q.path:g.path?K.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+q.path:K.path=q.path,K.path=t(K.path)),K.query=q.query):(K.path=g.path,q.query!==void 0?K.query=q.query:K.query=g.query),K.userinfo=g.userinfo,K.host=g.host,K.port=g.port),K.scheme=g.scheme),K.fragment=q.fragment,K}function T(g,q,x){return typeof g=="string"?(g=unescape(g),g=$(n(D(g,x),!0),{...x,skipEscape:!0})):typeof g=="object"&&(g=$(n(g,!0),{...x,skipEscape:!0})),typeof q=="string"?(q=unescape(q),q=$(n(D(q,x),!0),{...x,skipEscape:!0})):typeof q=="object"&&(q=$(n(q,!0),{...x,skipEscape:!0})),g.toLowerCase()===q.toLowerCase()}function $(g,q){const x={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},P=Object.assign({},q),K=[],L=u(P.scheme||x.scheme);L&&L.serialize&&L.serialize(x,P),x.path!==void 0&&(P.skipEscape?x.path=unescape(x.path):(x.path=escape(x.path),x.scheme!==void 0&&(x.path=x.path.split("%3A").join(":")))),P.reference!=="suffix"&&x.scheme&&K.push(x.scheme,":");const B=r(x);if(B!==void 0&&(P.reference!=="suffix"&&K.push("//"),K.push(B),x.path&&x.path[0]!=="/"&&K.push("/")),x.path!==void 0){let J=x.path;!P.absolutePath&&(!L||!L.absolutePath)&&(J=t(J)),B===void 0&&J[0]==="/"&&J[1]==="/"&&(J="/%2F"+J.slice(2)),K.push(J)}return x.query!==void 0&&K.push("?",x.query),x.fragment!==void 0&&K.push("#",x.fragment),K.join("")}const C=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function D(g,q){const x=Object.assign({},q),P={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let K=!1;x.reference==="suffix"&&(x.scheme?g=x.scheme+":"+g:g="//"+g);const L=g.match(C);if(L){if(P.scheme=L[1],P.userinfo=L[3],P.host=L[4],P.port=parseInt(L[5],10),P.path=L[6]||"",P.query=L[7],P.fragment=L[8],isNaN(P.port)&&(P.port=L[5]),P.host)if(s(P.host)===!1){const J=e(P.host);P.host=J.host.toLowerCase(),K=J.isIPV6}else K=!0;P.scheme===void 0&&P.userinfo===void 0&&P.host===void 0&&P.port===void 0&&P.query===void 0&&!P.path?P.reference="same-document":P.scheme===void 0?P.reference="relative":P.fragment===void 0?P.reference="absolute":P.reference="uri",x.reference&&x.reference!=="suffix"&&x.reference!==P.reference&&(P.error=P.error||"URI is not a "+x.reference+" reference.");const B=u(x.scheme||P.scheme);if(!x.unicodeSupport&&(!B||!B.unicodeSupport)&&P.host&&(x.domainHost||B&&B.domainHost)&&K===!1&&i(P.host))try{P.host=URL.domainToASCII(P.host.toLowerCase())}catch(J){P.error=P.error||"Host's domain name can not be converted to ASCII: "+J}(!B||B&&!B.skipNormalize)&&(g.indexOf("%")!==-1&&(P.scheme!==void 0&&(P.scheme=unescape(P.scheme)),P.host!==void 0&&(P.host=unescape(P.host))),P.path&&(P.path=escape(unescape(P.path))),P.fragment&&(P.fragment=encodeURI(decodeURIComponent(P.fragment)))),B&&B.parse&&B.parse(P,x)}else P.error=P.error||"URI can not be parsed.";return P}const F={SCHEMES:o,normalize:c,resolve:d,resolveComponent:m,equal:T,serialize:$,parse:D};return fastUri.exports=F,fastUri.exports.default=F,fastUri.exports.fastUri=F,fastUri.exports}var hasRequiredUri;function requireUri(){if(hasRequiredUri)return uri;hasRequiredUri=1,Object.defineProperty(uri,"__esModule",{value:!0});const e=requireFastUri();return e.code='require("ajv/dist/runtime/uri").default',uri.default=e,uri}var hasRequiredCore$1;function requireCore$1(){return hasRequiredCore$1||(hasRequiredCore$1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=requireValidate();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=requireCodegen();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=requireValidation_error(),s=requireRef_error(),i=requireRules(),o=requireCompile(),u=requireCodegen(),c=requireResolve(),d=requireDataType(),m=requireUtil(),T=require$$9,$=requireUri(),C=(Re,ie)=>new RegExp(Re,ie);C.code="new RegExp";const D=["removeAdditional","useDefaults","coerceTypes"],F=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},q={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},x=200;function P(Re){var ie,ke,ue,G,X,ce,De,qe,bt,vr,te,se,$e,Ie,Ye,Je,pi,Os,vi,Ui,ca,va,da,ha,ya;const mi=Re.strict,fa=(ie=Re.code)===null||ie===void 0?void 0:ie.optimize,pa=fa===!0||fa===void 0?1:fa||0,_a=(ue=(ke=Re.code)===null||ke===void 0?void 0:ke.regExp)!==null&&ue!==void 0?ue:C,be=(G=Re.uriResolver)!==null&&G!==void 0?G:$.default;return{strictSchema:(ce=(X=Re.strictSchema)!==null&&X!==void 0?X:mi)!==null&&ce!==void 0?ce:!0,strictNumbers:(qe=(De=Re.strictNumbers)!==null&&De!==void 0?De:mi)!==null&&qe!==void 0?qe:!0,strictTypes:(vr=(bt=Re.strictTypes)!==null&&bt!==void 0?bt:mi)!==null&&vr!==void 0?vr:"log",strictTuples:(se=(te=Re.strictTuples)!==null&&te!==void 0?te:mi)!==null&&se!==void 0?se:"log",strictRequired:(Ie=($e=Re.strictRequired)!==null&&$e!==void 0?$e:mi)!==null&&Ie!==void 0?Ie:!1,code:Re.code?{...Re.code,optimize:pa,regExp:_a}:{optimize:pa,regExp:_a},loopRequired:(Ye=Re.loopRequired)!==null&&Ye!==void 0?Ye:x,loopEnum:(Je=Re.loopEnum)!==null&&Je!==void 0?Je:x,meta:(pi=Re.meta)!==null&&pi!==void 0?pi:!0,messages:(Os=Re.messages)!==null&&Os!==void 0?Os:!0,inlineRefs:(vi=Re.inlineRefs)!==null&&vi!==void 0?vi:!0,schemaId:(Ui=Re.schemaId)!==null&&Ui!==void 0?Ui:"$id",addUsedSchema:(ca=Re.addUsedSchema)!==null&&ca!==void 0?ca:!0,validateSchema:(va=Re.validateSchema)!==null&&va!==void 0?va:!0,validateFormats:(da=Re.validateFormats)!==null&&da!==void 0?da:!0,unicodeRegExp:(ha=Re.unicodeRegExp)!==null&&ha!==void 0?ha:!0,int32range:(ya=Re.int32range)!==null&&ya!==void 0?ya:!0,uriResolver:be}}class K{constructor(ie={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ie=this.opts={...ie,...P(ie)};const{es5:ke,lines:ue}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:F,es5:ke,lines:ue}),this.logger=Ne(ie.logger);const G=ie.validateFormats;ie.validateFormats=!1,this.RULES=(0,i.getRules)(),L.call(this,g,ie,"NOT SUPPORTED"),L.call(this,q,ie,"DEPRECATED","warn"),this._metaOpts=ye.call(this),ie.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ie.keywords&&ve.call(this,ie.keywords),typeof ie.meta=="object"&&this.addMetaSchema(ie.meta),J.call(this),ie.validateFormats=G}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ie,meta:ke,schemaId:ue}=this.opts;let G=T;ue==="id"&&(G={...T},G.id=G.$id,delete G.$id),ke&&ie&&this.addMetaSchema(G,G[ue],!1)}defaultMeta(){const{meta:ie,schemaId:ke}=this.opts;return this.opts.defaultMeta=typeof ie=="object"?ie[ke]||ie:void 0}validate(ie,ke){let ue;if(typeof ie=="string"){if(ue=this.getSchema(ie),!ue)throw new Error(`no schema with key or ref "${ie}"`)}else ue=this.compile(ie);const G=ue(ke);return"$async"in ue||(this.errors=ue.errors),G}compile(ie,ke){const ue=this._addSchema(ie,ke);return ue.validate||this._compileSchemaEnv(ue)}compileAsync(ie,ke){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ue}=this.opts;return G.call(this,ie,ke);async function G(vr,te){await X.call(this,vr.$schema);const se=this._addSchema(vr,te);return se.validate||ce.call(this,se)}async function X(vr){vr&&!this.getSchema(vr)&&await G.call(this,{$ref:vr},!0)}async function ce(vr){try{return this._compileSchemaEnv(vr)}catch(te){if(!(te instanceof s.default))throw te;return De.call(this,te),await qe.call(this,te.missingSchema),ce.call(this,vr)}}function De({missingSchema:vr,missingRef:te}){if(this.refs[vr])throw new Error(`AnySchema ${vr} is loaded but ${te} cannot be resolved`)}async function qe(vr){const te=await bt.call(this,vr);this.refs[vr]||await X.call(this,te.$schema),this.refs[vr]||this.addSchema(te,vr,ke)}async function bt(vr){const te=this._loading[vr];if(te)return te;try{return await(this._loading[vr]=ue(vr))}finally{delete this._loading[vr]}}}addSchema(ie,ke,ue,G=this.opts.validateSchema){if(Array.isArray(ie)){for(const ce of ie)this.addSchema(ce,void 0,ue,G);return this}let X;if(typeof ie=="object"){const{schemaId:ce}=this.opts;if(X=ie[ce],X!==void 0&&typeof X!="string")throw new Error(`schema ${ce} must be string`)}return ke=(0,c.normalizeId)(ke||X),this._checkUnique(ke),this.schemas[ke]=this._addSchema(ie,ue,ke,G,!0),this}addMetaSchema(ie,ke,ue=this.opts.validateSchema){return this.addSchema(ie,ke,!0,ue),this}validateSchema(ie,ke){if(typeof ie=="boolean")return!0;let ue;if(ue=ie.$schema,ue!==void 0&&typeof ue!="string")throw new Error("$schema must be a string");if(ue=ue||this.opts.defaultMeta||this.defaultMeta(),!ue)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const G=this.validate(ue,ie);if(!G&&ke){const X="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(X);else throw new Error(X)}return G}getSchema(ie){let ke;for(;typeof(ke=B.call(this,ie))=="string";)ie=ke;if(ke===void 0){const{schemaId:ue}=this.opts,G=new o.SchemaEnv({schema:{},schemaId:ue});if(ke=o.resolveSchema.call(this,G,ie),!ke)return;this.refs[ie]=ke}return ke.validate||this._compileSchemaEnv(ke)}removeSchema(ie){if(ie instanceof RegExp)return this._removeAllSchemas(this.schemas,ie),this._removeAllSchemas(this.refs,ie),this;switch(typeof ie){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ke=B.call(this,ie);return typeof ke=="object"&&this._cache.delete(ke.schema),delete this.schemas[ie],delete this.refs[ie],this}case"object":{const ke=ie;this._cache.delete(ke);let ue=ie[this.opts.schemaId];return ue&&(ue=(0,c.normalizeId)(ue),delete this.schemas[ue],delete this.refs[ue]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ie){for(const ke of ie)this.addKeyword(ke);return this}addKeyword(ie,ke){let ue;if(typeof ie=="string")ue=ie,typeof ke=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ke.keyword=ue);else if(typeof ie=="object"&&ke===void 0){if(ke=ie,ue=ke.keyword,Array.isArray(ue)&&!ue.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ar.call(this,ue,ke),!ke)return(0,m.eachItem)(ue,X=>hi.call(this,X)),this;Gi.call(this,ke);const G={...ke,type:(0,d.getJSONTypes)(ke.type),schemaType:(0,d.getJSONTypes)(ke.schemaType)};return(0,m.eachItem)(ue,G.type.length===0?X=>hi.call(this,X,G):X=>G.type.forEach(ce=>hi.call(this,X,G,ce))),this}getKeyword(ie){const ke=this.RULES.all[ie];return typeof ke=="object"?ke.definition:!!ke}removeKeyword(ie){const{RULES:ke}=this;delete ke.keywords[ie],delete ke.all[ie];for(const ue of ke.rules){const G=ue.rules.findIndex(X=>X.keyword===ie);G>=0&&ue.rules.splice(G,1)}return this}addFormat(ie,ke){return typeof ke=="string"&&(ke=new RegExp(ke)),this.formats[ie]=ke,this}errorsText(ie=this.errors,{separator:ke=", ",dataVar:ue="data"}={}){return!ie||ie.length===0?"No errors":ie.map(G=>`${ue}${G.instancePath} ${G.message}`).reduce((G,X)=>G+ke+X)}$dataMetaSchema(ie,ke){const ue=this.RULES.all;ie=JSON.parse(JSON.stringify(ie));for(const G of ke){const X=G.split("/").slice(1);let ce=ie;for(const De of X)ce=ce[De];for(const De in ue){const qe=ue[De];if(typeof qe!="object")continue;const{$data:bt}=qe.definition,vr=ce[De];bt&&vr&&(ce[De]=ua(vr))}}return ie}_removeAllSchemas(ie,ke){for(const ue in ie){const G=ie[ue];(!ke||ke.test(ue))&&(typeof G=="string"?delete ie[ue]:G&&!G.meta&&(this._cache.delete(G.schema),delete ie[ue]))}}_addSchema(ie,ke,ue,G=this.opts.validateSchema,X=this.opts.addUsedSchema){let ce;const{schemaId:De}=this.opts;if(typeof ie=="object")ce=ie[De];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ie!="boolean")throw new Error("schema must be object or boolean")}let qe=this._cache.get(ie);if(qe!==void 0)return qe;ue=(0,c.normalizeId)(ce||ue);const bt=c.getSchemaRefs.call(this,ie,ue);return qe=new o.SchemaEnv({schema:ie,schemaId:De,meta:ke,baseId:ue,localRefs:bt}),this._cache.set(qe.schema,qe),X&&!ue.startsWith("#")&&(ue&&this._checkUnique(ue),this.refs[ue]=qe),G&&this.validateSchema(ie,!0),qe}_checkUnique(ie){if(this.schemas[ie]||this.refs[ie])throw new Error(`schema with key or id "${ie}" already exists`)}_compileSchemaEnv(ie){if(ie.meta?this._compileMetaSchema(ie):o.compileSchema.call(this,ie),!ie.validate)throw new Error("ajv implementation error");return ie.validate}_compileMetaSchema(ie){const ke=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,ie)}finally{this.opts=ke}}}K.ValidationError=n.default,K.MissingRefError=s.default,e.default=K;function L(Re,ie,ke,ue="error"){for(const G in Re){const X=G;X in ie&&this.logger[ue](`${ke}: option ${G}. ${Re[X]}`)}}function B(Re){return Re=(0,c.normalizeId)(Re),this.schemas[Re]||this.refs[Re]}function J(){const Re=this.opts.schemas;if(Re)if(Array.isArray(Re))this.addSchema(Re);else for(const ie in Re)this.addSchema(Re[ie],ie)}function re(){for(const Re in this.opts.formats){const ie=this.opts.formats[Re];ie&&this.addFormat(Re,ie)}}function ve(Re){if(Array.isArray(Re)){this.addVocabulary(Re);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ie in Re){const ke=Re[ie];ke.keyword||(ke.keyword=ie),this.addKeyword(ke)}}function ye(){const Re={...this.opts};for(const ie of D)delete Re[ie];return Re}const Se={log(){},warn(){},error(){}};function Ne(Re){if(Re===!1)return Se;if(Re===void 0)return console;if(Re.log&&Re.warn&&Re.error)return Re;throw new Error("logger must implement log, warn and error methods")}const Ke=/^[a-z_$][a-z0-9_$:-]*$/i;function Ar(Re,ie){const{RULES:ke}=this;if((0,m.eachItem)(Re,ue=>{if(ke.keywords[ue])throw new Error(`Keyword ${ue} is already defined`);if(!Ke.test(ue))throw new Error(`Keyword ${ue} has invalid name`)}),!!ie&&ie.$data&&!("code"in ie||"validate"in ie))throw new Error('$data keyword must have "code" or "validate" function')}function hi(Re,ie,ke){var ue;const G=ie?.post;if(ke&&G)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:X}=this;let ce=G?X.post:X.rules.find(({type:qe})=>qe===ke);if(ce||(ce={type:ke,rules:[]},X.rules.push(ce)),X.keywords[Re]=!0,!ie)return;const De={keyword:Re,definition:{...ie,type:(0,d.getJSONTypes)(ie.type),schemaType:(0,d.getJSONTypes)(ie.schemaType)}};ie.before?gi.call(this,ce,De,ie.before):ce.rules.push(De),X.all[Re]=De,(ue=ie.implements)===null||ue===void 0||ue.forEach(qe=>this.addKeyword(qe))}function gi(Re,ie,ke){const ue=Re.rules.findIndex(G=>G.keyword===ke);ue>=0?Re.rules.splice(ue,0,ie):(Re.rules.push(ie),this.logger.warn(`rule ${ke} is not defined`))}function Gi(Re){let{metaSchema:ie}=Re;ie!==void 0&&(Re.$data&&this.opts.$data&&(ie=ua(ie)),Re.validateSchema=this.compile(ie,!0))}const bs={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ua(Re){return{anyOf:[Re,bs]}}})(core$1)),core$1}var draft7={},core={},id={},hasRequiredId;function requireId(){if(hasRequiredId)return id;hasRequiredId=1,Object.defineProperty(id,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id.default=e,id}var ref={},hasRequiredRef;function requireRef(){if(hasRequiredRef)return ref;hasRequiredRef=1,Object.defineProperty(ref,"__esModule",{value:!0}),ref.callRef=ref.getValidate=void 0;const e=requireRef_error(),t=requireCode(),r=requireCodegen(),n=requireNames(),s=requireCompile(),i=requireUtil(),o={keyword:"$ref",schemaType:"string",code(d){const{gen:m,schema:T,it:$}=d,{baseId:C,schemaEnv:D,validateName:F,opts:g,self:q}=$,{root:x}=D;if((T==="#"||T==="#/")&&C===x.baseId)return K();const P=s.resolveRef.call(q,x,C,T);if(P===void 0)throw new e.default($.opts.uriResolver,C,T);if(P instanceof s.SchemaEnv)return L(P);return B(P);function K(){if(D===x)return c(d,F,D,D.$async);const J=m.scopeValue("root",{ref:x});return c(d,(0,r._)`${J}.validate`,x,x.$async)}function L(J){const re=u(d,J);c(d,re,J,J.$async)}function B(J){const re=m.scopeValue("schema",g.code.source===!0?{ref:J,code:(0,r.stringify)(J)}:{ref:J}),ve=m.name("valid"),ye=d.subschema({schema:J,dataTypes:[],schemaPath:r.nil,topSchemaRef:re,errSchemaPath:T},ve);d.mergeEvaluated(ye),d.ok(ve)}}};function u(d,m){const{gen:T}=d;return m.validate?T.scopeValue("validate",{ref:m.validate}):(0,r._)`${T.scopeValue("wrapper",{ref:m})}.validate`}ref.getValidate=u;function c(d,m,T,$){const{gen:C,it:D}=d,{allErrors:F,schemaEnv:g,opts:q}=D,x=q.passContext?n.default.this:r.nil;$?P():K();function P(){if(!g.$async)throw new Error("async schema referenced by sync schema");const J=C.let("valid");C.try(()=>{C.code((0,r._)`await ${(0,t.callValidateCode)(d,m,x)}`),B(m),F||C.assign(J,!0)},re=>{C.if((0,r._)`!(${re} instanceof ${D.ValidationError})`,()=>C.throw(re)),L(re),F||C.assign(J,!1)}),d.ok(J)}function K(){d.result((0,t.callValidateCode)(d,m,x),()=>B(m),()=>L(m))}function L(J){const re=(0,r._)`${J}.errors`;C.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${re} : ${n.default.vErrors}.concat(${re})`),C.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function B(J){var re;if(!D.opts.unevaluated)return;const ve=(re=T?.validate)===null||re===void 0?void 0:re.evaluated;if(D.props!==!0)if(ve&&!ve.dynamicProps)ve.props!==void 0&&(D.props=i.mergeEvaluated.props(C,ve.props,D.props));else{const ye=C.var("props",(0,r._)`${J}.evaluated.props`);D.props=i.mergeEvaluated.props(C,ye,D.props,r.Name)}if(D.items!==!0)if(ve&&!ve.dynamicItems)ve.items!==void 0&&(D.items=i.mergeEvaluated.items(C,ve.items,D.items));else{const ye=C.var("items",(0,r._)`${J}.evaluated.items`);D.items=i.mergeEvaluated.items(C,ye,D.items,r.Name)}}}return ref.callRef=c,ref.default=o,ref}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core;hasRequiredCore=1,Object.defineProperty(core,"__esModule",{value:!0});const e=requireId(),t=requireRef(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return core.default=r,core}var validation={},limitNumber={},hasRequiredLimitNumber;function requireLimitNumber(){if(hasRequiredLimitNumber)return limitNumber;hasRequiredLimitNumber=1,Object.defineProperty(limitNumber,"__esModule",{value:!0});const e=requireCodegen(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:i,schemaCode:o})=>(0,e.str)`must be ${r[i].okStr} ${o}`,params:({keyword:i,schemaCode:o})=>(0,e._)`{comparison: ${r[i].okStr}, limit: ${o}}`},s={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(i){const{keyword:o,data:u,schemaCode:c}=i;i.fail$data((0,e._)`${u} ${r[o].fail} ${c} || isNaN(${u})`)}};return limitNumber.default=s,limitNumber}var multipleOf={},hasRequiredMultipleOf;function requireMultipleOf(){if(hasRequiredMultipleOf)return multipleOf;hasRequiredMultipleOf=1,Object.defineProperty(multipleOf,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:n,data:s,schemaCode:i,it:o}=r,u=o.opts.multipleOfPrecision,c=n.let("res"),d=u?(0,e._)`Math.abs(Math.round(${c}) - ${c}) > 1e-${u}`:(0,e._)`${c} !== parseInt(${c})`;r.fail$data((0,e._)`(${i} === 0 || (${c} = ${s}/${i}, ${d}))`)}};return multipleOf.default=t,multipleOf}var limitLength={},ucs2length={},hasRequiredUcs2length;function requireUcs2length(){if(hasRequiredUcs2length)return ucs2length;hasRequiredUcs2length=1,Object.defineProperty(ucs2length,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,s=0,i;for(;s<r;)n++,i=t.charCodeAt(s++),i>=55296&&i<=56319&&s<r&&(i=t.charCodeAt(s),(i&64512)===56320&&s++);return n}return ucs2length.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',ucs2length}var hasRequiredLimitLength;function requireLimitLength(){if(hasRequiredLimitLength)return limitLength;hasRequiredLimitLength=1,Object.defineProperty(limitLength,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireUcs2length(),n={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:i}){const o=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${i} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:i,data:o,schemaCode:u,it:c}=s,d=i==="maxLength"?e.operators.GT:e.operators.LT,m=c.opts.unicode===!1?(0,e._)`${o}.length`:(0,e._)`${(0,t.useFunc)(s.gen,r.default)}(${o})`;s.fail$data((0,e._)`${m} ${d} ${u}`)}};return limitLength.default=n,limitLength}var pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1,Object.defineProperty(pattern,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match pattern "${n}"`,params:({schemaCode:n})=>(0,t._)`{pattern: ${n}}`},code(n){const{data:s,$data:i,schema:o,schemaCode:u,it:c}=n,d=c.opts.unicodeRegExp?"u":"",m=i?(0,t._)`(new RegExp(${u}, ${d}))`:(0,e.usePattern)(n,o);n.fail$data((0,t._)`!${m}.test(${s})`)}};return pattern.default=r,pattern}var limitProperties={},hasRequiredLimitProperties;function requireLimitProperties(){if(hasRequiredLimitProperties)return limitProperties;hasRequiredLimitProperties=1,Object.defineProperty(limitProperties,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:n}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${n} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:n,data:s,schemaCode:i}=r,o=n==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${o} ${i}`)}};return limitProperties.default=t,limitProperties}var required={},hasRequiredRequired;function requireRequired(){if(hasRequiredRequired)return required;hasRequiredRequired=1,Object.defineProperty(required,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireUtil(),n={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:i,schema:o,schemaCode:u,data:c,$data:d,it:m}=s,{opts:T}=m;if(!d&&o.length===0)return;const $=o.length>=T.loopRequired;if(m.allErrors?C():D(),T.strictRequired){const q=s.parentSchema.properties,{definedProperties:x}=s.it;for(const P of o)if(q?.[P]===void 0&&!x.has(P)){const K=m.schemaEnv.baseId+m.errSchemaPath,L=`required property "${P}" is not defined at "${K}" (strictRequired)`;(0,r.checkStrictMode)(m,L,m.opts.strictRequired)}}function C(){if($||d)s.block$data(t.nil,F);else for(const q of o)(0,e.checkReportMissingProp)(s,q)}function D(){const q=i.let("missing");if($||d){const x=i.let("valid",!0);s.block$data(x,()=>g(q,x)),s.ok(x)}else i.if((0,e.checkMissingProp)(s,o,q)),(0,e.reportMissingProp)(s,q),i.else()}function F(){i.forOf("prop",u,q=>{s.setParams({missingProperty:q}),i.if((0,e.noPropertyInData)(i,c,q,T.ownProperties),()=>s.error())})}function g(q,x){s.setParams({missingProperty:q}),i.forOf(q,u,()=>{i.assign(x,(0,e.propertyInData)(i,c,q,T.ownProperties)),i.if((0,t.not)(x),()=>{s.error(),i.break()})},t.nil)}}};return required.default=n,required}var limitItems={},hasRequiredLimitItems;function requireLimitItems(){if(hasRequiredLimitItems)return limitItems;hasRequiredLimitItems=1,Object.defineProperty(limitItems,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:n}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${n} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:n,data:s,schemaCode:i}=r,o=n==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${o} ${i}`)}};return limitItems.default=t,limitItems}var uniqueItems={},equal={},hasRequiredEqual;function requireEqual(){if(hasRequiredEqual)return equal;hasRequiredEqual=1,Object.defineProperty(equal,"__esModule",{value:!0});const e=requireFastDeepEqual();return e.code='require("ajv/dist/runtime/equal").default',equal.default=e,equal}var hasRequiredUniqueItems;function requireUniqueItems(){if(hasRequiredUniqueItems)return uniqueItems;hasRequiredUniqueItems=1,Object.defineProperty(uniqueItems,"__esModule",{value:!0});const e=requireDataType(),t=requireCodegen(),r=requireUtil(),n=requireEqual(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i,j:o}})=>(0,t.str)`must NOT have duplicate items (items ## ${o} and ${i} are identical)`,params:({params:{i,j:o}})=>(0,t._)`{i: ${i}, j: ${o}}`},code(i){const{gen:o,data:u,$data:c,schema:d,parentSchema:m,schemaCode:T,it:$}=i;if(!c&&!d)return;const C=o.let("valid"),D=m.items?(0,e.getSchemaTypes)(m.items):[];i.block$data(C,F,(0,t._)`${T} === false`),i.ok(C);function F(){const P=o.let("i",(0,t._)`${u}.length`),K=o.let("j");i.setParams({i:P,j:K}),o.assign(C,!0),o.if((0,t._)`${P} > 1`,()=>(g()?q:x)(P,K))}function g(){return D.length>0&&!D.some(P=>P==="object"||P==="array")}function q(P,K){const L=o.name("item"),B=(0,e.checkDataTypes)(D,L,$.opts.strictNumbers,e.DataType.Wrong),J=o.const("indices",(0,t._)`{}`);o.for((0,t._)`;${P}--;`,()=>{o.let(L,(0,t._)`${u}[${P}]`),o.if(B,(0,t._)`continue`),D.length>1&&o.if((0,t._)`typeof ${L} == "string"`,(0,t._)`${L} += "_"`),o.if((0,t._)`typeof ${J}[${L}] == "number"`,()=>{o.assign(K,(0,t._)`${J}[${L}]`),i.error(),o.assign(C,!1).break()}).code((0,t._)`${J}[${L}] = ${P}`)})}function x(P,K){const L=(0,r.useFunc)(o,n.default),B=o.name("outer");o.label(B).for((0,t._)`;${P}--;`,()=>o.for((0,t._)`${K} = ${P}; ${K}--;`,()=>o.if((0,t._)`${L}(${u}[${P}], ${u}[${K}])`,()=>{i.error(),o.assign(C,!1).break(B)})))}}};return uniqueItems.default=s,uniqueItems}var _const={},hasRequired_const;function require_const(){if(hasRequired_const)return _const;hasRequired_const=1,Object.defineProperty(_const,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireEqual(),n={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:i,data:o,$data:u,schemaCode:c,schema:d}=s;u||d&&typeof d=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(i,r.default)}(${o}, ${c})`):s.fail((0,e._)`${d} !== ${o}`)}};return _const.default=n,_const}var _enum={},hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireEqual(),n={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:i,data:o,$data:u,schema:c,schemaCode:d,it:m}=s;if(!u&&c.length===0)throw new Error("enum must have non-empty array");const T=c.length>=m.opts.loopEnum;let $;const C=()=>$??($=(0,t.useFunc)(i,r.default));let D;if(T||u)D=i.let("valid"),s.block$data(D,F);else{if(!Array.isArray(c))throw new Error("ajv implementation error");const q=i.const("vSchema",d);D=(0,e.or)(...c.map((x,P)=>g(q,P)))}s.pass(D);function F(){i.assign(D,!1),i.forOf("v",d,q=>i.if((0,e._)`${C()}(${o}, ${q})`,()=>i.assign(D,!0).break()))}function g(q,x){const P=c[x];return typeof P=="object"&&P!==null?(0,e._)`${C()}(${o}, ${q}[${x}])`:(0,e._)`${o} === ${P}`}}};return _enum.default=n,_enum}var hasRequiredValidation;function requireValidation(){if(hasRequiredValidation)return validation;hasRequiredValidation=1,Object.defineProperty(validation,"__esModule",{value:!0});const e=requireLimitNumber(),t=requireMultipleOf(),r=requireLimitLength(),n=requirePattern(),s=requireLimitProperties(),i=requireRequired(),o=requireLimitItems(),u=requireUniqueItems(),c=require_const(),d=require_enum(),m=[e.default,t.default,r.default,n.default,s.default,i.default,o.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,d.default];return validation.default=m,validation}var applicator={},additionalItems={},hasRequiredAdditionalItems;function requireAdditionalItems(){if(hasRequiredAdditionalItems)return additionalItems;hasRequiredAdditionalItems=1,Object.defineProperty(additionalItems,"__esModule",{value:!0}),additionalItems.validateAdditionalItems=void 0;const e=requireCodegen(),t=requireUtil(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:i,it:o}=s,{items:u}=i;if(!Array.isArray(u)){(0,t.checkStrictMode)(o,'"additionalItems" is ignored when "items" is not an array of schemas');return}n(s,u)}};function n(s,i){const{gen:o,schema:u,data:c,keyword:d,it:m}=s;m.items=!0;const T=o.const("len",(0,e._)`${c}.length`);if(u===!1)s.setParams({len:i.length}),s.pass((0,e._)`${T} <= ${i.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(m,u)){const C=o.var("valid",(0,e._)`${T} <= ${i.length}`);o.if((0,e.not)(C),()=>$(C)),s.ok(C)}function $(C){o.forRange("i",i.length,T,D=>{s.subschema({keyword:d,dataProp:D,dataPropType:t.Type.Num},C),m.allErrors||o.if((0,e.not)(C),()=>o.break())})}}return additionalItems.validateAdditionalItems=n,additionalItems.default=r,additionalItems}var prefixItems={},items={},hasRequiredItems;function requireItems(){if(hasRequiredItems)return items;hasRequiredItems=1,Object.defineProperty(items,"__esModule",{value:!0}),items.validateTuple=void 0;const e=requireCodegen(),t=requireUtil(),r=requireCode(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(i){const{schema:o,it:u}=i;if(Array.isArray(o))return s(i,"additionalItems",o);u.items=!0,!(0,t.alwaysValidSchema)(u,o)&&i.ok((0,r.validateArray)(i))}};function s(i,o,u=i.schema){const{gen:c,parentSchema:d,data:m,keyword:T,it:$}=i;F(d),$.opts.unevaluated&&u.length&&$.items!==!0&&($.items=t.mergeEvaluated.items(c,u.length,$.items));const C=c.name("valid"),D=c.const("len",(0,e._)`${m}.length`);u.forEach((g,q)=>{(0,t.alwaysValidSchema)($,g)||(c.if((0,e._)`${D} > ${q}`,()=>i.subschema({keyword:T,schemaProp:q,dataProp:q},C)),i.ok(C))});function F(g){const{opts:q,errSchemaPath:x}=$,P=u.length,K=P===g.minItems&&(P===g.maxItems||g[o]===!1);if(q.strictTuples&&!K){const L=`"${T}" is ${P}-tuple, but minItems or maxItems/${o} are not specified or different at path "${x}"`;(0,t.checkStrictMode)($,L,q.strictTuples)}}}return items.validateTuple=s,items.default=n,items}var hasRequiredPrefixItems;function requirePrefixItems(){if(hasRequiredPrefixItems)return prefixItems;hasRequiredPrefixItems=1,Object.defineProperty(prefixItems,"__esModule",{value:!0});const e=requireItems(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return prefixItems.default=t,prefixItems}var items2020={},hasRequiredItems2020;function requireItems2020(){if(hasRequiredItems2020)return items2020;hasRequiredItems2020=1,Object.defineProperty(items2020,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r=requireCode(),n=requireAdditionalItems(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,e.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,e._)`{limit: ${i}}`},code(i){const{schema:o,parentSchema:u,it:c}=i,{prefixItems:d}=u;c.items=!0,!(0,t.alwaysValidSchema)(c,o)&&(d?(0,n.validateAdditionalItems)(i,d):i.ok((0,r.validateArray)(i)))}};return items2020.default=s,items2020}var contains={},hasRequiredContains;function requireContains(){if(hasRequiredContains)return contains;hasRequiredContains=1,Object.defineProperty(contains,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:n,max:s}})=>s===void 0?(0,e.str)`must contain at least ${n} valid item(s)`:(0,e.str)`must contain at least ${n} and no more than ${s} valid item(s)`,params:({params:{min:n,max:s}})=>s===void 0?(0,e._)`{minContains: ${n}}`:(0,e._)`{minContains: ${n}, maxContains: ${s}}`},code(n){const{gen:s,schema:i,parentSchema:o,data:u,it:c}=n;let d,m;const{minContains:T,maxContains:$}=o;c.opts.next?(d=T===void 0?1:T,m=$):d=1;const C=s.const("len",(0,e._)`${u}.length`);if(n.setParams({min:d,max:m}),m===void 0&&d===0){(0,t.checkStrictMode)(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(m!==void 0&&d>m){(0,t.checkStrictMode)(c,'"minContains" > "maxContains" is always invalid'),n.fail();return}if((0,t.alwaysValidSchema)(c,i)){let x=(0,e._)`${C} >= ${d}`;m!==void 0&&(x=(0,e._)`${x} && ${C} <= ${m}`),n.pass(x);return}c.items=!0;const D=s.name("valid");m===void 0&&d===1?g(D,()=>s.if(D,()=>s.break())):d===0?(s.let(D,!0),m!==void 0&&s.if((0,e._)`${u}.length > 0`,F)):(s.let(D,!1),F()),n.result(D,()=>n.reset());function F(){const x=s.name("_valid"),P=s.let("count",0);g(x,()=>s.if(x,()=>q(P)))}function g(x,P){s.forRange("i",0,C,K=>{n.subschema({keyword:"contains",dataProp:K,dataPropType:t.Type.Num,compositeRule:!0},x),P()})}function q(x){s.code((0,e._)`${x}++`),m===void 0?s.if((0,e._)`${x} >= ${d}`,()=>s.assign(D,!0).break()):(s.if((0,e._)`${x} > ${m}`,()=>s.assign(D,!1).break()),d===1?s.assign(D,!0):s.if((0,e._)`${x} >= ${d}`,()=>s.assign(D,!0)))}}};return contains.default=r,contains}var dependencies={},hasRequiredDependencies;function requireDependencies(){return hasRequiredDependencies||(hasRequiredDependencies=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=requireCodegen(),r=requireUtil(),n=requireCode();e.error={message:({params:{property:c,depsCount:d,deps:m}})=>{const T=d===1?"property":"properties";return(0,t.str)`must have ${T} ${m} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:m,missingProperty:T}})=>(0,t._)`{property: ${c},
    missingProperty: ${T},
    depsCount: ${d},
    deps: ${m}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,m]=i(c);o(c,d),u(c,m)}};function i({schema:c}){const d={},m={};for(const T in c){if(T==="__proto__")continue;const $=Array.isArray(c[T])?d:m;$[T]=c[T]}return[d,m]}function o(c,d=c.schema){const{gen:m,data:T,it:$}=c;if(Object.keys(d).length===0)return;const C=m.let("missing");for(const D in d){const F=d[D];if(F.length===0)continue;const g=(0,n.propertyInData)(m,T,D,$.opts.ownProperties);c.setParams({property:D,depsCount:F.length,deps:F.join(", ")}),$.allErrors?m.if(g,()=>{for(const q of F)(0,n.checkReportMissingProp)(c,q)}):(m.if((0,t._)`${g} && (${(0,n.checkMissingProp)(c,F,C)})`),(0,n.reportMissingProp)(c,C),m.else())}}e.validatePropertyDeps=o;function u(c,d=c.schema){const{gen:m,data:T,keyword:$,it:C}=c,D=m.name("valid");for(const F in d)(0,r.alwaysValidSchema)(C,d[F])||(m.if((0,n.propertyInData)(m,T,F,C.opts.ownProperties),()=>{const g=c.subschema({keyword:$,schemaProp:F},D);c.mergeValidEvaluated(g,D)},()=>m.var(D,!0)),c.ok(D))}e.validateSchemaDeps=u,e.default=s})(dependencies)),dependencies}var propertyNames={},hasRequiredPropertyNames;function requirePropertyNames(){if(hasRequiredPropertyNames)return propertyNames;hasRequiredPropertyNames=1,Object.defineProperty(propertyNames,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:n})=>(0,e._)`{propertyName: ${n.propertyName}}`},code(n){const{gen:s,schema:i,data:o,it:u}=n;if((0,t.alwaysValidSchema)(u,i))return;const c=s.name("valid");s.forIn("key",o,d=>{n.setParams({propertyName:d}),n.subschema({keyword:"propertyNames",data:d,dataTypes:["string"],propertyName:d,compositeRule:!0},c),s.if((0,e.not)(c),()=>{n.error(!0),u.allErrors||s.break()})}),n.ok(c)}};return propertyNames.default=r,propertyNames}var additionalProperties={},hasRequiredAdditionalProperties;function requireAdditionalProperties(){if(hasRequiredAdditionalProperties)return additionalProperties;hasRequiredAdditionalProperties=1,Object.defineProperty(additionalProperties,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireNames(),n=requireUtil(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:i})=>(0,t._)`{additionalProperty: ${i.additionalProperty}}`},code(i){const{gen:o,schema:u,parentSchema:c,data:d,errsCount:m,it:T}=i;if(!m)throw new Error("ajv implementation error");const{allErrors:$,opts:C}=T;if(T.props=!0,C.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(T,u))return;const D=(0,e.allSchemaProperties)(c.properties),F=(0,e.allSchemaProperties)(c.patternProperties);g(),i.ok((0,t._)`${m} === ${r.default.errors}`);function g(){o.forIn("key",d,L=>{!D.length&&!F.length?P(L):o.if(q(L),()=>P(L))})}function q(L){let B;if(D.length>8){const J=(0,n.schemaRefOrVal)(T,c.properties,"properties");B=(0,e.isOwnProperty)(o,J,L)}else D.length?B=(0,t.or)(...D.map(J=>(0,t._)`${L} === ${J}`)):B=t.nil;return F.length&&(B=(0,t.or)(B,...F.map(J=>(0,t._)`${(0,e.usePattern)(i,J)}.test(${L})`))),(0,t.not)(B)}function x(L){o.code((0,t._)`delete ${d}[${L}]`)}function P(L){if(C.removeAdditional==="all"||C.removeAdditional&&u===!1){x(L);return}if(u===!1){i.setParams({additionalProperty:L}),i.error(),$||o.break();return}if(typeof u=="object"&&!(0,n.alwaysValidSchema)(T,u)){const B=o.name("valid");C.removeAdditional==="failing"?(K(L,B,!1),o.if((0,t.not)(B),()=>{i.reset(),x(L)})):(K(L,B),$||o.if((0,t.not)(B),()=>o.break()))}}function K(L,B,J){const re={keyword:"additionalProperties",dataProp:L,dataPropType:n.Type.Str};J===!1&&Object.assign(re,{compositeRule:!0,createErrors:!1,allErrors:!1}),i.subschema(re,B)}}};return additionalProperties.default=s,additionalProperties}var properties$1={},hasRequiredProperties;function requireProperties(){if(hasRequiredProperties)return properties$1;hasRequiredProperties=1,Object.defineProperty(properties$1,"__esModule",{value:!0});const e=requireValidate(),t=requireCode(),r=requireUtil(),n=requireAdditionalProperties(),s={keyword:"properties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,parentSchema:c,data:d,it:m}=i;m.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(m,n.default,"additionalProperties"));const T=(0,t.allSchemaProperties)(u);for(const g of T)m.definedProperties.add(g);m.opts.unevaluated&&T.length&&m.props!==!0&&(m.props=r.mergeEvaluated.props(o,(0,r.toHash)(T),m.props));const $=T.filter(g=>!(0,r.alwaysValidSchema)(m,u[g]));if($.length===0)return;const C=o.name("valid");for(const g of $)D(g)?F(g):(o.if((0,t.propertyInData)(o,d,g,m.opts.ownProperties)),F(g),m.allErrors||o.else().var(C,!0),o.endIf()),i.it.definedProperties.add(g),i.ok(C);function D(g){return m.opts.useDefaults&&!m.compositeRule&&u[g].default!==void 0}function F(g){i.subschema({keyword:"properties",schemaProp:g,dataProp:g},C)}}};return properties$1.default=s,properties$1}var patternProperties={},hasRequiredPatternProperties;function requirePatternProperties(){if(hasRequiredPatternProperties)return patternProperties;hasRequiredPatternProperties=1,Object.defineProperty(patternProperties,"__esModule",{value:!0});const e=requireCode(),t=requireCodegen(),r=requireUtil(),n=requireUtil(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,data:c,parentSchema:d,it:m}=i,{opts:T}=m,$=(0,e.allSchemaProperties)(u),C=$.filter(K=>(0,r.alwaysValidSchema)(m,u[K]));if($.length===0||C.length===$.length&&(!m.opts.unevaluated||m.props===!0))return;const D=T.strictSchema&&!T.allowMatchingProperties&&d.properties,F=o.name("valid");m.props!==!0&&!(m.props instanceof t.Name)&&(m.props=(0,n.evaluatedPropsToName)(o,m.props));const{props:g}=m;q();function q(){for(const K of $)D&&x(K),m.allErrors?P(K):(o.var(F,!0),P(K),o.if(F))}function x(K){for(const L in D)new RegExp(K).test(L)&&(0,r.checkStrictMode)(m,`property ${L} matches pattern ${K} (use allowMatchingProperties)`)}function P(K){o.forIn("key",c,L=>{o.if((0,t._)`${(0,e.usePattern)(i,K)}.test(${L})`,()=>{const B=C.includes(K);B||i.subschema({keyword:"patternProperties",schemaProp:K,dataProp:L,dataPropType:n.Type.Str},F),m.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${L}]`,!0):!B&&!m.allErrors&&o.if((0,t.not)(F),()=>o.break())})})}}};return patternProperties.default=s,patternProperties}var not={},hasRequiredNot;function requireNot(){if(hasRequiredNot)return not;hasRequiredNot=1,Object.defineProperty(not,"__esModule",{value:!0});const e=requireUtil(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:s,it:i}=r;if((0,e.alwaysValidSchema)(i,s)){r.fail();return}const o=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),r.failResult(o,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return not.default=t,not}var anyOf={},hasRequiredAnyOf;function requireAnyOf(){if(hasRequiredAnyOf)return anyOf;hasRequiredAnyOf=1,Object.defineProperty(anyOf,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf.default=e,anyOf}var oneOf={},hasRequiredOneOf;function requireOneOf(){if(hasRequiredOneOf)return oneOf;hasRequiredOneOf=1,Object.defineProperty(oneOf,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:n})=>(0,e._)`{passingSchemas: ${n.passing}}`},code(n){const{gen:s,schema:i,parentSchema:o,it:u}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");if(u.opts.discriminator&&o.discriminator)return;const c=i,d=s.let("valid",!1),m=s.let("passing",null),T=s.name("_valid");n.setParams({passing:m}),s.block($),n.result(d,()=>n.reset(),()=>n.error(!0));function $(){c.forEach((C,D)=>{let F;(0,t.alwaysValidSchema)(u,C)?s.var(T,!0):F=n.subschema({keyword:"oneOf",schemaProp:D,compositeRule:!0},T),D>0&&s.if((0,e._)`${T} && ${d}`).assign(d,!1).assign(m,(0,e._)`[${m}, ${D}]`).else(),s.if(T,()=>{s.assign(d,!0),s.assign(m,D),F&&n.mergeEvaluated(F,e.Name)})})}}};return oneOf.default=r,oneOf}var allOf={},hasRequiredAllOf;function requireAllOf(){if(hasRequiredAllOf)return allOf;hasRequiredAllOf=1,Object.defineProperty(allOf,"__esModule",{value:!0});const e=requireUtil(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:s,it:i}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");const o=n.name("valid");s.forEach((u,c)=>{if((0,e.alwaysValidSchema)(i,u))return;const d=r.subschema({keyword:"allOf",schemaProp:c},o);r.ok(o),r.mergeEvaluated(d)})}};return allOf.default=t,allOf}var _if={},hasRequired_if;function require_if(){if(hasRequired_if)return _if;hasRequired_if=1,Object.defineProperty(_if,"__esModule",{value:!0});const e=requireCodegen(),t=requireUtil(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:i,parentSchema:o,it:u}=s;o.then===void 0&&o.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const c=n(u,"then"),d=n(u,"else");if(!c&&!d)return;const m=i.let("valid",!0),T=i.name("_valid");if($(),s.reset(),c&&d){const D=i.let("ifClause");s.setParams({ifClause:D}),i.if(T,C("then",D),C("else",D))}else c?i.if(T,C("then")):i.if((0,e.not)(T),C("else"));s.pass(m,()=>s.error(!0));function $(){const D=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},T);s.mergeEvaluated(D)}function C(D,F){return()=>{const g=s.subschema({keyword:D},T);i.assign(m,T),s.mergeValidEvaluated(g,m),F?i.assign(F,(0,e._)`${D}`):s.setParams({ifClause:D})}}}};function n(s,i){const o=s.schema[i];return o!==void 0&&!(0,t.alwaysValidSchema)(s,o)}return _if.default=r,_if}var thenElse={},hasRequiredThenElse;function requireThenElse(){if(hasRequiredThenElse)return thenElse;hasRequiredThenElse=1,Object.defineProperty(thenElse,"__esModule",{value:!0});const e=requireUtil(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:s}){n.if===void 0&&(0,e.checkStrictMode)(s,`"${r}" without "if" is ignored`)}};return thenElse.default=t,thenElse}var hasRequiredApplicator;function requireApplicator(){if(hasRequiredApplicator)return applicator;hasRequiredApplicator=1,Object.defineProperty(applicator,"__esModule",{value:!0});const e=requireAdditionalItems(),t=requirePrefixItems(),r=requireItems(),n=requireItems2020(),s=requireContains(),i=requireDependencies(),o=requirePropertyNames(),u=requireAdditionalProperties(),c=requireProperties(),d=requirePatternProperties(),m=requireNot(),T=requireAnyOf(),$=requireOneOf(),C=requireAllOf(),D=require_if(),F=requireThenElse();function g(q=!1){const x=[m.default,T.default,$.default,C.default,D.default,F.default,o.default,u.default,i.default,c.default,d.default];return q?x.push(t.default,n.default):x.push(e.default,r.default),x.push(s.default),x}return applicator.default=g,applicator}var format$1={},format={},hasRequiredFormat$1;function requireFormat$1(){if(hasRequiredFormat$1)return format;hasRequiredFormat$1=1,Object.defineProperty(format,"__esModule",{value:!0});const e=requireCodegen(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,n){const{gen:s,data:i,$data:o,schema:u,schemaCode:c,it:d}=r,{opts:m,errSchemaPath:T,schemaEnv:$,self:C}=d;if(!m.validateFormats)return;o?D():F();function D(){const g=s.scopeValue("formats",{ref:C.formats,code:m.code.formats}),q=s.const("fDef",(0,e._)`${g}[${c}]`),x=s.let("fType"),P=s.let("format");s.if((0,e._)`typeof ${q} == "object" && !(${q} instanceof RegExp)`,()=>s.assign(x,(0,e._)`${q}.type || "string"`).assign(P,(0,e._)`${q}.validate`),()=>s.assign(x,(0,e._)`"string"`).assign(P,q)),r.fail$data((0,e.or)(K(),L()));function K(){return m.strictSchema===!1?e.nil:(0,e._)`${c} && !${P}`}function L(){const B=$.$async?(0,e._)`(${q}.async ? await ${P}(${i}) : ${P}(${i}))`:(0,e._)`${P}(${i})`,J=(0,e._)`(typeof ${P} == "function" ? ${B} : ${P}.test(${i}))`;return(0,e._)`${P} && ${P} !== true && ${x} === ${n} && !${J}`}}function F(){const g=C.formats[u];if(!g){K();return}if(g===!0)return;const[q,x,P]=L(g);q===n&&r.pass(B());function K(){if(m.strictSchema===!1){C.logger.warn(J());return}throw new Error(J());function J(){return`unknown format "${u}" ignored in schema at path "${T}"`}}function L(J){const re=J instanceof RegExp?(0,e.regexpCode)(J):m.code.formats?(0,e._)`${m.code.formats}${(0,e.getProperty)(u)}`:void 0,ve=s.scopeValue("formats",{key:u,ref:J,code:re});return typeof J=="object"&&!(J instanceof RegExp)?[J.type||"string",J.validate,(0,e._)`${ve}.validate`]:["string",J,ve]}function B(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!$.$async)throw new Error("async format in sync schema");return(0,e._)`await ${P}(${i})`}return typeof x=="function"?(0,e._)`${P}(${i})`:(0,e._)`${P}.test(${i})`}}}};return format.default=t,format}var hasRequiredFormat;function requireFormat(){if(hasRequiredFormat)return format$1;hasRequiredFormat=1,Object.defineProperty(format$1,"__esModule",{value:!0});const e=[requireFormat$1().default];return format$1.default=e,format$1}var metadata={},hasRequiredMetadata;function requireMetadata(){return hasRequiredMetadata||(hasRequiredMetadata=1,Object.defineProperty(metadata,"__esModule",{value:!0}),metadata.contentVocabulary=metadata.metadataVocabulary=void 0,metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata}var hasRequiredDraft7;function requireDraft7(){if(hasRequiredDraft7)return draft7;hasRequiredDraft7=1,Object.defineProperty(draft7,"__esModule",{value:!0});const e=requireCore(),t=requireValidation(),r=requireApplicator(),n=requireFormat(),s=requireMetadata(),i=[e.default,t.default,(0,r.default)(),n.default,s.metadataVocabulary,s.contentVocabulary];return draft7.default=i,draft7}var discriminator={},types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(types.DiscrError=e={})),types}var hasRequiredDiscriminator;function requireDiscriminator(){if(hasRequiredDiscriminator)return discriminator;hasRequiredDiscriminator=1,Object.defineProperty(discriminator,"__esModule",{value:!0});const e=requireCodegen(),t=requireTypes(),r=requireCompile(),n=requireRef_error(),s=requireUtil(),i={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:o,tagName:u}})=>o===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:o,tag:u,tagName:c}})=>(0,e._)`{error: ${o}, tag: ${c}, tagValue: ${u}}`},code(o){const{gen:u,data:c,schema:d,parentSchema:m,it:T}=o,{oneOf:$}=m;if(!T.opts.discriminator)throw new Error("discriminator: requires discriminator option");const C=d.propertyName;if(typeof C!="string")throw new Error("discriminator: requires propertyName");if(d.mapping)throw new Error("discriminator: mapping is not supported");if(!$)throw new Error("discriminator: requires oneOf keyword");const D=u.let("valid",!1),F=u.const("tag",(0,e._)`${c}${(0,e.getProperty)(C)}`);u.if((0,e._)`typeof ${F} == "string"`,()=>g(),()=>o.error(!1,{discrError:t.DiscrError.Tag,tag:F,tagName:C})),o.ok(D);function g(){const P=x();u.if(!1);for(const K in P)u.elseIf((0,e._)`${F} === ${K}`),u.assign(D,q(P[K]));u.else(),o.error(!1,{discrError:t.DiscrError.Mapping,tag:F,tagName:C}),u.endIf()}function q(P){const K=u.name("valid"),L=o.subschema({keyword:"oneOf",schemaProp:P},K);return o.mergeEvaluated(L,e.Name),K}function x(){var P;const K={},L=J(m);let B=!0;for(let ye=0;ye<$.length;ye++){let Se=$[ye];if(Se?.$ref&&!(0,s.schemaHasRulesButRef)(Se,T.self.RULES)){const Ke=Se.$ref;if(Se=r.resolveRef.call(T.self,T.schemaEnv.root,T.baseId,Ke),Se instanceof r.SchemaEnv&&(Se=Se.schema),Se===void 0)throw new n.default(T.opts.uriResolver,T.baseId,Ke)}const Ne=(P=Se?.properties)===null||P===void 0?void 0:P[C];if(typeof Ne!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${C}"`);B=B&&(L||J(Se)),re(Ne,ye)}if(!B)throw new Error(`discriminator: "${C}" must be required`);return K;function J({required:ye}){return Array.isArray(ye)&&ye.includes(C)}function re(ye,Se){if(ye.const)ve(ye.const,Se);else if(ye.enum)for(const Ne of ye.enum)ve(Ne,Se);else throw new Error(`discriminator: "properties/${C}" must have "const" or "enum"`)}function ve(ye,Se){if(typeof ye!="string"||ye in K)throw new Error(`discriminator: "${C}" values must be unique strings`);K[ye]=Se}}}};return discriminator.default=i,discriminator}const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type,properties,default:!0};var hasRequiredAjv;function requireAjv(){return hasRequiredAjv||(hasRequiredAjv=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=requireCore$1(),n=requireDraft7(),s=requireDiscriminator(),i=require$$3,o=["/properties"],u="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(D=>this.addVocabulary(D)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const D=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(D,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=requireValidate();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var m=requireCodegen();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var T=requireValidation_error();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return T.default}});var $=requireRef_error();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return $.default}})})(ajv,ajv.exports)),ajv.exports}requireAjv();function __awaiter(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(m){try{d(n.next(m))}catch(T){o(T)}}function c(m){try{d(n.throw(m))}catch(T){o(T)}}function d(m){m.done?i(m.value):s(m.value).then(u,c)}d((n=n.apply(e,[])).next())})}function __generator(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(m){return c([d,m])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(u){o={error:u}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function __spreadArray(e,t,r){if(arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var defaultErrorConfig={withStackTrace:!1},createNeverThrowError=function(e,t,r){r===void 0&&(r=defaultErrorConfig);var n=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},s=r.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:s}},Result;(function(e){function t(r,n){return function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];try{var o=r.apply(void 0,__spreadArray([],__read(s),!1));return ok(o)}catch(u){return err(n?n(u):u)}}}e.fromThrowable=t})(Result||(Result={}));var ok=function(e){return new Ok(e)},err=function(e){return new Err(e)},Ok=(function(){function e(t){this.value=t}return e.prototype.isOk=function(){return!0},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return ok(t(this.value))},e.prototype.mapErr=function(t){return ok(this.value)},e.prototype.andThen=function(t){return t(this.value)},e.prototype.orElse=function(t){return ok(this.value)},e.prototype.asyncAndThen=function(t){return t(this.value)},e.prototype.asyncMap=function(t){return ResultAsync.fromSafePromise(t(this.value))},e.prototype.unwrapOr=function(t){return this.value},e.prototype.match=function(t,r){return t(this.value)},e.prototype._unsafeUnwrap=function(t){return this.value},e.prototype._unsafeUnwrapErr=function(t){throw createNeverThrowError("Called `_unsafeUnwrapErr` on an Ok",this,t)},e})(),Err=(function(){function e(t){this.error=t}return e.prototype.isOk=function(){return!1},e.prototype.isErr=function(){return!this.isOk()},e.prototype.map=function(t){return err(this.error)},e.prototype.mapErr=function(t){return err(t(this.error))},e.prototype.andThen=function(t){return err(this.error)},e.prototype.orElse=function(t){return t(this.error)},e.prototype.asyncAndThen=function(t){return errAsync(this.error)},e.prototype.asyncMap=function(t){return errAsync(this.error)},e.prototype.unwrapOr=function(t){return t},e.prototype.match=function(t,r){return r(this.error)},e.prototype._unsafeUnwrap=function(t){throw createNeverThrowError("Called `_unsafeUnwrap` on an Err",this,t)},e.prototype._unsafeUnwrapErr=function(t){return this.error},e})();Result.fromThrowable;var ResultAsync=(function(){function e(t){this._promise=t}return e.fromSafePromise=function(t){var r=t.then(function(n){return new Ok(n)});return new e(r)},e.fromPromise=function(t,r){var n=t.then(function(s){return new Ok(s)}).catch(function(s){return new Err(r(s))});return new e(n)},e.prototype.map=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){var s;return __generator(this,function(i){switch(i.label){case 0:return n.isErr()?[2,new Err(n.error)]:(s=Ok.bind,[4,t(n.value)]);case 1:return[2,new(s.apply(Ok,[void 0,i.sent()]))]}})})}))},e.prototype.mapErr=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){var s;return __generator(this,function(i){switch(i.label){case 0:return n.isOk()?[2,new Ok(n.value)]:(s=Err.bind,[4,t(n.error)]);case 1:return[2,new(s.apply(Err,[void 0,i.sent()]))]}})})}))},e.prototype.andThen=function(t){return new e(this._promise.then(function(r){if(r.isErr())return new Err(r.error);var n=t(r.value);return n instanceof e?n._promise:n}))},e.prototype.orElse=function(t){var r=this;return new e(this._promise.then(function(n){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(s){return n.isErr()?[2,t(n.error)]:[2,new Ok(n.value)]})})}))},e.prototype.match=function(t,r){return this._promise.then(function(n){return n.match(t,r)})},e.prototype.unwrapOr=function(t){return this._promise.then(function(r){return r.unwrapOr(t)})},e.prototype.then=function(t,r){return this._promise.then(t,r)},e})(),errAsync=function(e){return new ResultAsync(Promise.resolve(new Err(e)))};ResultAsync.fromPromise;ResultAsync.fromSafePromise;let blockEndNewlines;try{blockEndNewlines=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{blockEndNewlines=/\n+(?!\n|$)/g}new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function decodeImplVars(e){const t={};for(const[r,n]of Object.entries(e.varInstances)){const s=[];for(const i of n){const o=e.varTypes[i[0]],u=e.variables[i[1]];let c=u.i,d=u.n;if(i.length>2){const T=[],$=[],C=(i.length-2)/2,D=i.slice(2,2+C);for(const F of D){const g=e.subscripts[F];T.push(g.i),$.push(g.n)}c+=`[${T.join(",")}]`,d+=`[${$.join(",")}]`}const m={varId:c,varName:d,varType:o,varIndex:u.x,subscriptIndices:i.length>2?i.slice(2+(i.length-2)/2):void 0};s.push(m)}t[r]=s}return t}function getImplVars(e){const t=decodeImplVars(e),r=new Map,n=[];function s(i,o){const u=[];for(const c of o){if(c.varType==="lookup"||c.varType==="data")continue;const d=`ModelImpl_${c.varId}`;r.set(d,c),u.push(d)}n.push({title:i,fn:i,datasetKeys:u})}return s("initConstants",t.constants||[]),s("initLevels",t.initVars||[]),s("evalLevels",t.levelVars||[]),s("evalAux",t.auxVars||[]),{implVars:r,implVarGroups:n}}function getInputVars(e){const t=new Map;for(const r of e){const n=r.varId,s={inputId:r.inputId,varId:n,varName:r.varName,defaultValue:r.defaultValue,minValue:r.minValue,maxValue:r.maxValue,value:createInputValue(n,r.defaultValue)};t.set(n,s)}return t}function setInputsForScenario(e,t){function r(d,m){m<d.minValue?(console.warn(`WARNING: Scenario input value ${m} is < min value (${d.minValue}) for input '${d.varName}'`),m=d.minValue):m>d.maxValue&&(console.warn(`WARNING: Scenario input value ${m} is > max value (${d.maxValue}) for input '${d.varName}'`),m=d.maxValue),d.value.set(m)}function n(d){d.value.reset()}function s(d){d.value.set(d.minValue)}function i(d){d.value.set(d.maxValue)}function o(){e.forEach(n)}function u(){e.forEach(s)}function c(){e.forEach(i)}switch(t.kind){case"all-inputs":{switch(t.position){case"at-default":o();break;case"at-minimum":u();break;case"at-maximum":c();break}break}case"input-settings":{o();for(const d of t.settings){const m=e.get(d.inputVarId);if(m)switch(d.kind){case"position":switch(d.position){case"at-default":n(m);break;case"at-minimum":s(m);break;case"at-maximum":i(m);break;default:assertNeverExports.assertNever(d.position)}break;case"value":r(m,d.value);break;default:assertNeverExports.assertNever(d)}else console.log(`No model input for scenario input ${d.inputVarId}`)}break}default:assertNeverExports.assertNever(t)}}function getOutputVars(e){const t=new Map;for(const r of e){const n=r.varId,s=datasetKeyForOutputVar(void 0,n);t.set(s,{datasetKey:s,sourceName:void 0,varId:n,varName:r.varName})}return t}function datasetKeyForOutputVar(e,t){return`Model_${t}`}const inputSpecs=[{inputId:"1",varId:"_initial_contact_rate",varName:"Initial Contact Rate",defaultValue:2.5,minValue:0,maxValue:5},{inputId:"2",varId:"_infectivity_i",varName:"Infectivity i",defaultValue:.25,minValue:-2,maxValue:2},{inputId:"3",varId:"_average_duration_of_illness_d",varName:"Average Duration of Illness d",defaultValue:2,minValue:0,maxValue:10}],outputSpecs=[{varId:"_infection_rate",varName:"Infection Rate"},{varId:"_infectious_population_i",varName:"Infectious Population I"},{varId:"_recovered_population_r",varName:"Recovered Population R"},{varId:"_recovery_rate",varName:"Recovery Rate"},{varId:"_susceptible_population_s",varName:"Susceptible Population S"}],encodedImplVars={subscripts:[],variables:[{n:"Average Duration of Illness d",i:"_average_duration_of_illness_d",x:1},{n:"FINAL TIME",i:"_final_time",x:2},{n:"INITIAL TIME",i:"_initial_time",x:3},{n:"Infectivity i",i:"_infectivity_i",x:4},{n:"Initial Contact Rate",i:"_initial_contact_rate",x:5},{n:"SAVEPER",i:"_saveper",x:6},{n:"TIME STEP",i:"_time_step",x:7},{n:"Total Population P",i:"_total_population_p",x:8},{n:"Recovered Population R",i:"_recovered_population_r",x:9},{n:"Infectious Population I",i:"_infectious_population_i",x:10},{n:"Susceptible Population S",i:"_susceptible_population_s",x:11},{n:"Recovery Rate",i:"_recovery_rate",x:12},{n:"Contact Rate c",i:"_contact_rate_c",x:13},{n:"Infection Rate",i:"_infection_rate",x:14}],varTypes:["const","level","aux"],varInstances:{constants:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7]],lookupVars:[],dataVars:[],initVars:[[1,8],[1,9],[1,10]],levelVars:[[1,9],[1,8],[1,10]],auxVars:[[2,11],[2,12],[2,13]]}},modelSizeInBytes=7601,dataSizeInBytes=0,modelWorkerJs='(function(){"use strict";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var worker={},isObservable,hasRequiredIsObservable;function requireIsObservable(){return hasRequiredIsObservable||(hasRequiredIsObservable=1,isObservable=e=>e?typeof Symbol.observable=="symbol"&&typeof e[Symbol.observable]=="function"?e===e[Symbol.observable]():typeof e["@@observable"]=="function"?e===e["@@observable"]():!1:!1),isObservable}var common={},serializers={},hasRequiredSerializers;function requireSerializers(){if(hasRequiredSerializers)return serializers;hasRequiredSerializers=1,Object.defineProperty(serializers,"__esModule",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0;function e(t,r){const i=t.deserialize.bind(t),o=t.serialize.bind(t);return{deserialize(a){return r.deserialize(a,i)},serialize(a){return r.serialize(a,o)}}}serializers.extendSerializer=e;const n={deserialize(t){return Object.assign(Error(t.message),{name:t.name,stack:t.stack})},serialize(t){return{__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack}}},s=t=>t&&typeof t=="object"&&"__error_marker"in t&&t.__error_marker==="$$error";return serializers.DefaultSerializer={deserialize(t){return s(t)?n.deserialize(t):t},serialize(t){return t instanceof Error?n.serialize(t):t}},serializers}var hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1,Object.defineProperty(common,"__esModule",{value:!0}),common.serialize=common.deserialize=common.registerSerializer=void 0;const e=requireSerializers();let n=e.DefaultSerializer;function s(i){n=e.extendSerializer(n,i)}common.registerSerializer=s;function t(i){return n.deserialize(i)}common.deserialize=t;function r(i){return n.serialize(i)}return common.serialize=r,common}var transferable={},symbols={},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,Object.defineProperty(symbols,"__esModule",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol("thread.errors"),symbols.$events=Symbol("thread.events"),symbols.$terminate=Symbol("thread.terminate"),symbols.$transferable=Symbol("thread.transferable"),symbols.$worker=Symbol("thread.worker")),symbols}var hasRequiredTransferable;function requireTransferable(){if(hasRequiredTransferable)return transferable;hasRequiredTransferable=1,Object.defineProperty(transferable,"__esModule",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;const e=requireSymbols();function n(r){return!(!r||typeof r!="object")}function s(r){return r&&typeof r=="object"&&r[e.$transferable]}transferable.isTransferDescriptor=s;function t(r,i){if(!i){if(!n(r))throw Error();i=[r]}return{[e.$transferable]:!0,send:r,transferables:i}}return transferable.Transfer=t,transferable}var messages={},hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageType=e.MasterMessageType=void 0,(function(n){n.cancel="cancel",n.run="run"})(e.MasterMessageType||(e.MasterMessageType={})),(function(n){n.error="error",n.init="init",n.result="result",n.running="running",n.uncaughtError="uncaughtError"})(e.WorkerMessageType||(e.WorkerMessageType={}))})(messages)),messages}var implementation={},implementation_browser={},hasRequiredImplementation_browser;function requireImplementation_browser(){if(hasRequiredImplementation_browser)return implementation_browser;hasRequiredImplementation_browser=1,Object.defineProperty(implementation_browser,"__esModule",{value:!0});const e=function(){const r=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!r)},n=function(r,i){self.postMessage(r,i)},s=function(r){const i=a=>{r(a.data)},o=()=>{self.removeEventListener("message",i)};return self.addEventListener("message",i),o};return implementation_browser.default={isWorkerRuntime:e,postMessageToMaster:n,subscribeToMasterMessages:s},implementation_browser}var implementation_tinyWorker={},hasRequiredImplementation_tinyWorker;function requireImplementation_tinyWorker(){if(hasRequiredImplementation_tinyWorker)return implementation_tinyWorker;hasRequiredImplementation_tinyWorker=1,Object.defineProperty(implementation_tinyWorker,"__esModule",{value:!0}),typeof self>"u"&&(commonjsGlobal.self=commonjsGlobal);const e=function(){return!!(typeof self<"u"&&self.postMessage)},n=function(o){self.postMessage(o)};let s=!1;const t=new Set,r=function(o){return s||(self.addEventListener("message",(c=>{t.forEach(l=>l(c.data))})),s=!0),t.add(o),()=>t.delete(o)};return implementation_tinyWorker.default={isWorkerRuntime:e,postMessageToMaster:n,subscribeToMasterMessages:r},implementation_tinyWorker}var implementation_worker_threads={},worker_threads={},hasRequiredWorker_threads;function requireWorker_threads(){if(hasRequiredWorker_threads)return worker_threads;hasRequiredWorker_threads=1,Object.defineProperty(worker_threads,"__esModule",{value:!0});let implementation;function selectImplementation(){return typeof __non_webpack_require__=="function"?__non_webpack_require__("worker_threads"):eval("require")("worker_threads")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}return worker_threads.default=getImplementation,worker_threads}var hasRequiredImplementation_worker_threads;function requireImplementation_worker_threads(){if(hasRequiredImplementation_worker_threads)return implementation_worker_threads;hasRequiredImplementation_worker_threads=1;var e=implementation_worker_threads&&implementation_worker_threads.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(implementation_worker_threads,"__esModule",{value:!0});const n=e(requireWorker_threads());function s(a){if(!a)throw Error("Invariant violation: MessagePort to parent is not available.");return a}const t=function(){return!n.default().isMainThread},r=function(c,l){s(n.default().parentPort).postMessage(c,l)},i=function(c){const l=n.default().parentPort;if(!l)throw Error("Invariant violation: MessagePort to parent is not available.");const d=g=>{c(g)},p=()=>{s(l).off("message",d)};return s(l).on("message",d),p};function o(){n.default()}return implementation_worker_threads.default={isWorkerRuntime:t,postMessageToMaster:r,subscribeToMasterMessages:i,testImplementation:o},implementation_worker_threads}var hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var e=implementation&&implementation.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(implementation,"__esModule",{value:!0});const n=e(requireImplementation_browser()),s=e(requireImplementation_tinyWorker()),t=e(requireImplementation_worker_threads()),r=typeof process<"u"&&process.arch!=="browser"&&"pid"in process;function i(){try{return t.default.testImplementation(),t.default}catch{return s.default}}return implementation.default=r?i():n.default,implementation}var hasRequiredWorker;function requireWorker(){return hasRequiredWorker||(hasRequiredWorker=1,(function(e){var n=worker&&worker.__awaiter||function(u,f,v,w){function O(k){return k instanceof v?k:new v(function(B){B(k)})}return new(v||(v=Promise))(function(k,B){function A(R){try{z(w.next(R))}catch(W){B(W)}}function P(R){try{z(w.throw(R))}catch(W){B(W)}}function z(R){R.done?k(R.value):O(R.value).then(A,P)}z((w=w.apply(u,f||[])).next())})},s=worker&&worker.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;const t=s(requireIsObservable()),r=requireCommon(),i=requireTransferable(),o=requireMessages(),a=s(requireImplementation());var c=requireCommon();Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return c.registerSerializer}});var l=requireTransferable();Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return l.Transfer}}),e.isWorkerRuntime=a.default.isWorkerRuntime;let d=!1;const p=new Map,g=u=>u&&u.type===o.MasterMessageType.cancel,_=u=>u&&u.type===o.MasterMessageType.run,I=u=>t.default(u)||T(u);function T(u){return u&&typeof u=="object"&&typeof u.subscribe=="function"}function E(u){return i.isTransferDescriptor(u)?{payload:u.send,transferables:u.transferables}:{payload:u,transferables:void 0}}function S(){const u={type:o.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(u)}function y(u){const f={type:o.WorkerMessageType.init,exposed:{type:"module",methods:u}};a.default.postMessageToMaster(f)}function h(u,f){const{payload:v,transferables:w}=E(f),O={type:o.WorkerMessageType.error,uid:u,error:r.serialize(v)};a.default.postMessageToMaster(O,w)}function m(u,f,v){const{payload:w,transferables:O}=E(v),k={type:o.WorkerMessageType.result,uid:u,complete:f?!0:void 0,payload:w};a.default.postMessageToMaster(k,O)}function L(u,f){const v={type:o.WorkerMessageType.running,uid:u,resultType:f};a.default.postMessageToMaster(v)}function b(u){try{const f={type:o.WorkerMessageType.uncaughtError,error:r.serialize(u)};a.default.postMessageToMaster(f)}catch(f){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:`,f,`\nOriginal error:`,u)}}function M(u,f,v){return n(this,void 0,void 0,function*(){let w;try{w=f(...v)}catch(k){return h(u,k)}const O=I(w)?"observable":"promise";if(L(u,O),I(w)){const k=w.subscribe(B=>m(u,!1,r.serialize(B)),B=>{h(u,r.serialize(B)),p.delete(u)},()=>{m(u,!0),p.delete(u)});p.set(u,k)}else try{const k=yield w;m(u,!0,r.serialize(k))}catch(k){h(u,r.serialize(k))}})}function q(u){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(d)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(d=!0,typeof u=="function")a.default.subscribeToMasterMessages(f=>{_(f)&&!f.method&&M(f.uid,u,f.args.map(r.deserialize))}),S();else if(typeof u=="object"&&u){a.default.subscribeToMasterMessages(v=>{_(v)&&v.method&&M(v.uid,u[v.method],v.args.map(r.deserialize))});const f=Object.keys(u).filter(v=>typeof u[v]=="function");y(f)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${u}`);a.default.subscribeToMasterMessages(f=>{if(g(f)){const v=f.uid,w=p.get(v);w&&(w.unsubscribe(),p.delete(v))}})}e.expose=q,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",u=>{setTimeout(()=>b(u.error||u),250)}),self.addEventListener("unhandledrejection",u=>{const f=u.reason;f&&typeof f.message=="string"&&setTimeout(()=>b(f),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",u=>{setTimeout(()=>b(u),250)}),process.on("unhandledRejection",u=>{u&&typeof u.message=="string"&&setTimeout(()=>b(u),250)}))})(worker)),worker}var workerExports=requireWorker();const WorkerContext=getDefaultExportFromCjs(workerExports),expose=WorkerContext.expose;WorkerContext.registerSerializer;const Transfer=WorkerContext.Transfer;function getEncodedVarIndicesLength(e){var n;let s=1;for(const t of e){s+=2;const r=((n=t.subscriptIndices)==null?void 0:n.length)||0;s+=r}return s}function encodeVarIndices(e,n){let s=0;n[s++]=e.length;for(const t of e){n[s++]=t.varIndex;const r=t.subscriptIndices,i=r?.length||0;n[s++]=i;for(let o=0;o<i;o++)n[s++]=r[o]}}function getEncodedLookupBufferLengths(e){var n,s;let t=1,r=0;for(const i of e){const o=i.varRef.varSpec;if(o===void 0)throw new Error("Cannot compute lookup buffer lengths until all lookup var specs are defined");t+=2;const a=((n=o.subscriptIndices)==null?void 0:n.length)||0;t+=a,t+=2,r+=((s=i.points)==null?void 0:s.length)||0}return{lookupIndicesLength:t,lookupsLength:r}}function encodeLookups(e,n,s){let t=0;n[t++]=e.length;let r=0;for(const i of e){const o=i.varRef.varSpec;n[t++]=o.varIndex;const a=o.subscriptIndices,c=a?.length||0;n[t++]=c;for(let l=0;l<c;l++)n[t++]=a[l];i.points!==void 0?(n[t++]=r,n[t++]=i.points.length,s?.set(i.points,r),r+=i.points.length):(n[t++]=-1,n[t++]=0)}}function decodeLookups(e,n){const s=[];let t=0;const r=e[t++];for(let i=0;i<r;i++){const o=e[t++],a=e[t++],c=a>0?Array(a):void 0;for(let _=0;_<a;_++)c[_]=e[t++];const l=e[t++],d=e[t++],p={varIndex:o,subscriptIndices:c};let g;l>=0?n?g=n.slice(l,l+d):g=new Float64Array(0):g=void 0,s.push({varRef:{varSpec:p},points:g})}return s}function resolveVarRef(e,n,s){if(!n.varSpec){if(e===void 0)throw new Error(`Unable to resolve ${s} variable references by name or identifier when model listing is unavailable`);if(n.varId){const t=e?.getSpecForVarId(n.varId);if(t)n.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varId=${n.varId}`)}else{const t=e?.getSpecForVarName(n.varName);if(t)n.varSpec=t;else throw new Error(`Failed to resolve ${s} variable reference for varName=\'${n.varId}\'`)}}}var headerLengthInElements=16,extrasLengthInElements=1,Int32Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,n,s){this.view=s>0?new Int32Array(e,n,s):void 0,this.offsetInBytes=n,this.lengthInElements=s}},Float64Section=class{constructor(){this.offsetInBytes=0,this.lengthInElements=0}update(e,n,s){this.view=s>0?new Float64Array(e,n,s):void 0,this.offsetInBytes=n,this.lengthInElements=s}},BufferedRunModelParams=class{constructor(e){this.listing=e,this.header=new Int32Section,this.extras=new Float64Section,this.inputs=new Float64Section,this.outputs=new Float64Section,this.outputIndices=new Int32Section,this.lookups=new Float64Section,this.lookupIndices=new Int32Section}getEncodedBuffer(){return this.encoded}getInputs(){return this.inputs.view}copyInputs(e,n){this.inputs.lengthInElements!==0&&((e===void 0||e.length<this.inputs.lengthInElements)&&(e=n(this.inputs.lengthInElements)),e.set(this.inputs.view))}getOutputIndicesLength(){return this.outputIndices.lengthInElements}getOutputIndices(){return this.outputIndices.view}copyOutputIndices(e,n){this.outputIndices.lengthInElements!==0&&((e===void 0||e.length<this.outputIndices.lengthInElements)&&(e=n(this.outputIndices.lengthInElements)),e.set(this.outputIndices.view))}getOutputsLength(){return this.outputs.lengthInElements}getOutputs(){return this.outputs.view}getOutputsObject(){}storeOutputs(e){this.outputs.view!==void 0&&(e.length>this.outputs.view.length?this.outputs.view.set(e.subarray(0,this.outputs.view.length)):this.outputs.view.set(e))}getLookups(){if(this.lookupIndices.lengthInElements!==0)return decodeLookups(this.lookupIndices.view,this.lookups.view)}getElapsedTime(){return this.extras.view[0]}storeElapsedTime(e){this.extras.view[0]=e}finalizeOutputs(e){this.outputs.view&&e.updateFromBuffer(this.outputs.view,e.seriesLength),e.runTimeInMillis=this.getElapsedTime()}updateFromParams(e,n,s){const t=e.length,r=n.varIds.length*n.seriesLength;let i;const o=n.varSpecs;o!==void 0&&o.length>0?i=getEncodedVarIndicesLength(o):i=0;let a,c;if(s?.lookups!==void 0&&s.lookups.length>0){for(const M of s.lookups)resolveVarRef(this.listing,M.varRef,"lookup");const b=getEncodedLookupBufferLengths(s.lookups);a=b.lookupsLength,c=b.lookupIndicesLength}else a=0,c=0;let l=0;function d(b,M){const q=l,u=b==="float64"?Float64Array.BYTES_PER_ELEMENT:Int32Array.BYTES_PER_ELEMENT,f=Math.round(M*u),v=Math.ceil(f/8)*8;return l+=v,q}const p=d("int32",headerLengthInElements),g=d("float64",extrasLengthInElements),_=d("float64",t),I=d("float64",r),T=d("int32",i),E=d("float64",a),S=d("int32",c),y=l;if(this.encoded===void 0||this.encoded.byteLength<y){const b=Math.ceil(y*1.2);this.encoded=new ArrayBuffer(b),this.header.update(this.encoded,p,headerLengthInElements)}const h=this.header.view;let m=0;h[m++]=g,h[m++]=extrasLengthInElements,h[m++]=_,h[m++]=t,h[m++]=I,h[m++]=r,h[m++]=T,h[m++]=i,h[m++]=E,h[m++]=a,h[m++]=S,h[m++]=c,this.inputs.update(this.encoded,_,t),this.extras.update(this.encoded,g,extrasLengthInElements),this.outputs.update(this.encoded,I,r),this.outputIndices.update(this.encoded,T,i),this.lookups.update(this.encoded,E,a),this.lookupIndices.update(this.encoded,S,c);const L=this.inputs.view;for(let b=0;b<e.length;b++){const M=e[b];typeof M=="number"?L[b]=M:L[b]=M.get()}this.outputIndices.view&&encodeVarIndices(o,this.outputIndices.view),c>0&&encodeLookups(s.lookups,this.lookupIndices.view,this.lookups.view)}updateFromEncodedBuffer(e){const n=headerLengthInElements*Int32Array.BYTES_PER_ELEMENT;if(e.byteLength<n)throw new Error("Buffer must be long enough to contain header section");this.encoded=e,this.header.update(this.encoded,0,headerLengthInElements);const t=this.header.view;let r=0;const i=t[r++],o=t[r++],a=t[r++],c=t[r++],l=t[r++],d=t[r++],p=t[r++],g=t[r++],_=t[r++],I=t[r++],T=t[r++],E=t[r++],S=o*Float64Array.BYTES_PER_ELEMENT,y=c*Float64Array.BYTES_PER_ELEMENT,h=d*Float64Array.BYTES_PER_ELEMENT,m=g*Int32Array.BYTES_PER_ELEMENT,L=I*Float64Array.BYTES_PER_ELEMENT,b=E*Int32Array.BYTES_PER_ELEMENT,M=n+S+y+h+m+L+b;if(e.byteLength<M)throw new Error("Buffer must be long enough to contain sections declared in header");this.extras.update(this.encoded,i,o),this.inputs.update(this.encoded,a,c),this.outputs.update(this.encoded,l,d),this.outputIndices.update(this.encoded,p,g),this.lookups.update(this.encoded,_,I),this.lookupIndices.update(this.encoded,T,E)}},_NA_=-Number.MAX_VALUE,JsModelLookup=class{constructor(e,n){if(n&&n.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${n.length} size=${e}`);this.originalData=n,this.originalSize=e,this.dynamicData=void 0,this.dynamicSize=0,this.activeData=this.originalData,this.activeSize=this.originalSize,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}setData(e,n){if(n){if(n.length<e*2)throw new Error(`Lookup data array length must be >= 2*size (length=${n.length} size=${e}`);const s=e*2;if((this.dynamicData===void 0||s>this.dynamicData.length)&&(this.dynamicData=new Float64Array(s)),this.dynamicSize=e,e>0){const t=n.subarray(0,s);this.dynamicData.set(t)}this.activeData=this.dynamicData,this.activeSize=this.dynamicSize}else this.activeData=this.originalData,this.activeSize=this.originalSize;this.invertedData=void 0,this.lastInput=Number.MAX_VALUE,this.lastHitIndex=0}getValueForX(e,n){return this.getValue(e,!1,n)}getValueForY(e){if(this.invertedData===void 0){const n=this.activeSize*2,s=this.activeData,t=Array(n);for(let r=0;r<n;r+=2)t[r]=s[r+1],t[r+1]=s[r];this.invertedData=t}return this.getValue(e,!0,"interpolate")}getValue(e,n,s){if(this.activeSize===0)return _NA_;const t=n?this.invertedData:this.activeData,r=this.activeSize*2,i=!n;let o;i&&e>=this.lastInput?o=this.lastHitIndex:o=0;for(let a=o;a<r;a+=2){const c=t[a];if(c>=e){if(i&&(this.lastInput=e,this.lastHitIndex=a),a===0||c===e)return t[a+1];switch(s){default:case"interpolate":{const l=t[a-2],d=t[a-1],p=t[a+1],g=c-l,_=p-d;return d+_/g*(e-l)}case"forward":return t[a+1];case"backward":return t[a-1]}}}return i&&(this.lastInput=e,this.lastHitIndex=r),t[r-1]}getValueForGameTime(e,n){if(this.activeSize<=0)return n;const s=this.activeData[0];return e<s?n:this.getValue(e,!1,"backward")}getValueBetweenTimes(e,n){if(this.activeSize===0)return _NA_;const s=this.activeData,t=this.activeSize*2;switch(n){case"forward":{e=Math.floor(e);for(let r=0;r<t;r+=2)if(s[r]>=e)return s[r+1];return s[t-1]}case"backward":{e=Math.floor(e);for(let r=2;r<t;r+=2)if(s[r]>=e)return s[r-1];return t>=4?s[t-3]:s[1]}case"interpolate":default:{if(e-Math.floor(e)>0){let r=`GET DATA BETWEEN TIMES was called with an input value (${e}) that has a fractional part. `;throw r+="When mode is 0 (interpolate) and the input value is not a whole number, Vensim produces unexpected ",r+="results that may differ from those produced by SDEverywhere.",new Error(r)}for(let r=2;r<t;r+=2){const i=s[r];if(i>=e){const o=s[r-2],a=s[r-1],c=s[r+1],l=i-o,d=c-a;return a+d/l*(e-o)}}return s[t-1]}}}},EPSILON=1e-6;function getJsModelFunctions(){let e;const n=new Map,s=new Map;return{setContext(t){e=t},ABS(t){return Math.abs(t)},ARCCOS(t){return Math.acos(t)},ARCSIN(t){return Math.asin(t)},ARCTAN(t){return Math.atan(t)},COS(t){return Math.cos(t)},EXP(t){return Math.exp(t)},GAME(t,r){return t?t.getValueForGameTime(e.currentTime,r):r},INTEG(t,r){return t+r*e.timeStep},INTEGER(t){return Math.trunc(t)},LN(t){return Math.log(t)},MAX(t,r){return Math.max(t,r)},MIN(t,r){return Math.min(t,r)},MODULO(t,r){return t%r},POW(t,r){return Math.pow(t,r)},POWER(t,r){return Math.pow(t,r)},PULSE(t,r){return pulse(e,t,r)},PULSE_TRAIN(t,r,i,o){const a=Math.floor((o-t)/i);for(let c=0;c<=a;c++)if(e.currentTime<=o&&pulse(e,t+c*i,r))return 1;return 0},QUANTUM(t,r){return r<=0?t:r*Math.trunc(t/r)},RAMP(t,r,i){return e.currentTime>r?e.currentTime<i||r>i?t*(e.currentTime-r):t*(i-r):0},SIN(t){return Math.sin(t)},SQRT(t){return Math.sqrt(t)},STEP(t,r){return e.currentTime+e.timeStep/2>r?t:0},TAN(t){return Math.tan(t)},VECTOR_SORT_ORDER(t,r,i){if(r>t.length)throw new Error(`VECTOR SORT ORDER input vector length (${t.length}) must be >= size (${r})`);let o=s.get(r);if(o===void 0){o=Array(r);for(let l=0;l<r;l++)o[l]={x:0,ind:0};s.set(r,o)}let a=n.get(r);a===void 0&&(a=Array(r),n.set(r,a));for(let l=0;l<r;l++)o[l].x=t[l],o[l].ind=l;const c=i>0?1:-1;o.sort((l,d)=>{let p;return l.x<d.x?p=-1:l.x>d.x?p=1:p=0,p*c});for(let l=0;l<r;l++)a[l]=o[l].ind;return a},XIDZ(t,r,i){return Math.abs(r)<EPSILON?i:t/r},ZIDZ(t,r){return Math.abs(r)<EPSILON?0:t/r},createLookup(t,r){return new JsModelLookup(t,r)},LOOKUP(t,r){return t?t.getValueForX(r,"interpolate"):_NA_},LOOKUP_FORWARD(t,r){return t?t.getValueForX(r,"forward"):_NA_},LOOKUP_BACKWARD(t,r){return t?t.getValueForX(r,"backward"):_NA_},LOOKUP_INVERT(t,r){return t?t.getValueForY(r):_NA_},WITH_LOOKUP(t,r){return r?r.getValueForX(t,"interpolate"):_NA_},GET_DATA_BETWEEN_TIMES(t,r,i){let o;return i>=1?o="forward":i<=-1?o="backward":o="interpolate",t?t.getValueBetweenTimes(r,o):_NA_}}}function pulse(e,n,s){const t=e.currentTime+e.timeStep/2;return s===0&&(s=e.timeStep),t>n&&t<n+s?1:0}var isWeb;function perfNow(){return isWeb===void 0&&(isWeb=typeof self<"u"&&self?.performance!==void 0),isWeb?self.performance.now():process==null?void 0:process.hrtime()}function perfElapsed(e){if(isWeb)return self.performance.now()-e;{const n=process.hrtime(e);return(n[0]*1e9+n[1])/1e6}}var BaseRunnableModel=class{constructor(e){this.startTime=e.startTime,this.endTime=e.endTime,this.saveFreq=e.saveFreq,this.numSavePoints=e.numSavePoints,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.onRunModel=e.onRunModel}runModel(e){var n;let s=e.getInputs();s===void 0&&(e.copyInputs(this.inputs,c=>(this.inputs=new Float64Array(c),this.inputs)),s=this.inputs);let t=e.getOutputIndices();t===void 0&&e.getOutputIndicesLength()>0&&(e.copyOutputIndices(this.outputIndices,c=>(this.outputIndices=new Int32Array(c),this.outputIndices)),t=this.outputIndices);const r=e.getOutputsLength();(this.outputs===void 0||this.outputs.length<r)&&(this.outputs=new Float64Array(r));const i=this.outputs,o=perfNow();(n=this.onRunModel)==null||n.call(this,s,i,{outputIndices:t,lookups:e.getLookups()});const a=perfElapsed(o);e.storeOutputs(i),e.storeElapsedTime(a)}terminate(){}};function initJsModel(e){let n=e.getModelFunctions();n===void 0&&(n=getJsModelFunctions(),e.setModelFunctions(n));const s=e.getInitialTime(),t=e.getFinalTime(),r=e.getTimeStep(),i=e.getSaveFreq(),o=Math.round((t-s)/i)+1;return new BaseRunnableModel({startTime:s,endTime:t,saveFreq:i,numSavePoints:o,outputVarIds:e.outputVarIds,modelListing:e.modelListing,onRunModel:(a,c,l)=>{runJsModel(e,s,t,r,i,o,a,c,l?.outputIndices,l?.lookups)}})}function runJsModel(e,n,s,t,r,i,o,a,c,l,d){let p=n;e.setTime(p);const g={timeStep:t,currentTime:p};if(e.getModelFunctions().setContext(g),e.initConstants(),l!==void 0)for(const y of l)e.setLookup(y.varRef.varSpec,y.points);o?.length>0&&e.setInputs(y=>o[y]),e.initLevels();const _=Math.round((s-n)/t),I=s;let T=0,E=0,S=0;for(;T<=_;){if(e.evalAux(),p%r<1e-6){S=0;const y=h=>{const m=S*i+E;a[m]=p<=I?h:void 0,S++};if(c!==void 0){let h=0;const m=c[h++];for(let L=0;L<m;L++){const b=c[h++],M=c[h++];let q;M>0&&(q=c.subarray(h,h+M),h+=M);const u={varIndex:b,subscriptIndices:q};e.storeOutput(u,y)}}else e.storeOutputs(y);E++}if(T===_)break;e.evalLevels(),p+=t,e.setTime(p),g.currentTime=p,T++}}var WasmBuffer=class{constructor(e,n,s,t){this.wasmModule=e,this.numElements=n,this.byteOffset=s,this.heapArray=t}getArrayView(){return this.heapArray}getAddress(){return this.byteOffset}dispose(){var e,n;this.heapArray&&((n=(e=this.wasmModule)._free)==null||n.call(e,this.byteOffset),this.numElements=void 0,this.heapArray=void 0,this.byteOffset=void 0)}};function createInt32WasmBuffer(e,n){const t=n*4,r=e._malloc(t),i=r/4,o=e.HEAP32.subarray(i,i+n);return new WasmBuffer(e,n,r,o)}function createFloat64WasmBuffer(e,n){const t=n*8,r=e._malloc(t),i=r/8,o=e.HEAPF64.subarray(i,i+n);return new WasmBuffer(e,n,r,o)}var WasmModel=class{constructor(e){this.wasmModule=e;function n(s){return e.cwrap(s,"number",[])()}this.startTime=n("getInitialTime"),this.endTime=n("getFinalTime"),this.saveFreq=n("getSaveper"),this.numSavePoints=Math.round((this.endTime-this.startTime)/this.saveFreq)+1,this.outputVarIds=e.outputVarIds,this.modelListing=e.modelListing,this.wasmSetLookup=e.cwrap("setLookup",null,["number","number","number","number"]),this.wasmRunModel=e.cwrap("runModelWithBuffers",null,["number","number","number"])}runModel(e){var n,s,t,r,i,o,a;const c=e.getLookups();if(c!==void 0)for(const _ of c){const I=_.varRef.varSpec,T=((n=I.subscriptIndices)==null?void 0:n.length)||0;let E;T>0?((this.lookupSubIndicesBuffer===void 0||this.lookupSubIndicesBuffer.numElements<T)&&((s=this.lookupSubIndicesBuffer)==null||s.dispose(),this.lookupSubIndicesBuffer=createInt32WasmBuffer(this.wasmModule,T)),this.lookupSubIndicesBuffer.getArrayView().set(I.subscriptIndices),E=this.lookupSubIndicesBuffer.getAddress()):E=0;let S,y;if(_.points){const m=_.points.length;(this.lookupDataBuffer===void 0||this.lookupDataBuffer.numElements<m)&&((t=this.lookupDataBuffer)==null||t.dispose(),this.lookupDataBuffer=createFloat64WasmBuffer(this.wasmModule,m)),this.lookupDataBuffer.getArrayView().set(_.points),S=this.lookupDataBuffer.getAddress(),y=m/2}else S=0,y=0;const h=I.varIndex;this.wasmSetLookup(h,E,S,y)}e.copyInputs((r=this.inputsBuffer)==null?void 0:r.getArrayView(),_=>{var I;return(I=this.inputsBuffer)==null||I.dispose(),this.inputsBuffer=createFloat64WasmBuffer(this.wasmModule,_),this.inputsBuffer.getArrayView()});let l;e.getOutputIndicesLength()>0?(e.copyOutputIndices((i=this.outputIndicesBuffer)==null?void 0:i.getArrayView(),_=>{var I;return(I=this.outputIndicesBuffer)==null||I.dispose(),this.outputIndicesBuffer=createInt32WasmBuffer(this.wasmModule,_),this.outputIndicesBuffer.getArrayView()}),l=this.outputIndicesBuffer):l=void 0;const d=e.getOutputsLength();(this.outputsBuffer===void 0||this.outputsBuffer.numElements<d)&&((o=this.outputsBuffer)==null||o.dispose(),this.outputsBuffer=createFloat64WasmBuffer(this.wasmModule,d));const p=perfNow();this.wasmRunModel(((a=this.inputsBuffer)==null?void 0:a.getAddress())||0,this.outputsBuffer.getAddress(),l?.getAddress()||0);const g=perfElapsed(p);e.storeOutputs(this.outputsBuffer.getArrayView()),e.storeElapsedTime(g)}terminate(){var e,n,s;(e=this.inputsBuffer)==null||e.dispose(),this.inputsBuffer=void 0,(n=this.outputsBuffer)==null||n.dispose(),this.outputsBuffer=void 0,(s=this.outputIndicesBuffer)==null||s.dispose(),this.outputIndicesBuffer=void 0}};function initWasmModel(e){return new WasmModel(e)}function createRunnableModel(e){switch(e.kind){case"js":return initJsModel(e);case"wasm":return initWasmModel(e);default:throw new Error("Unable to identify generated model kind")}}var initGeneratedModel,runnableModel,params=new BufferedRunModelParams,modelWorker={async initModel(){if(runnableModel)throw new Error("RunnableModel was already initialized");const e=await initGeneratedModel();return runnableModel=createRunnableModel(e),{outputVarIds:runnableModel.outputVarIds,modelListing:runnableModel.modelListing,startTime:runnableModel.startTime,endTime:runnableModel.endTime,saveFreq:runnableModel.saveFreq,outputRowLength:runnableModel.numSavePoints}},runModel(e){if(!runnableModel)throw new Error("RunnableModel must be initialized before running the model in worker");return params.updateFromEncodedBuffer(e),runnableModel.runModel(params),Transfer(e)}};function exposeModelWorker(e){initGeneratedModel=e,expose(modelWorker)}let _average_duration_of_illness_d,_contact_rate_c,_final_time,_infection_rate,_infectious_population_i,_infectivity_i,_initial_contact_rate,_initial_time,_recovered_population_r,_recovery_rate,_saveper,_susceptible_population_s,_time_step,_total_population_p,_time;function setTime(e){_time=e}let controlParamsInitialized=!1;function initControlParamsIfNeeded(){if(!controlParamsInitialized){if(fns===void 0)throw new Error("Must call setModelFunctions() before running the model");if(initConstants(),_initial_time===void 0)throw new Error("INITIAL TIME must be defined as a constant value");if(_time_step===void 0)throw new Error("TIME STEP must be defined as a constant value");if(_final_time===void 0||_saveper===void 0){if(setTime(_initial_time),fns.setContext({timeStep:_time_step,currentTime:_time}),initLevels(),evalAux(),_final_time===void 0)throw new Error("FINAL TIME must be defined");if(_saveper===void 0)throw new Error("SAVEPER must be defined")}controlParamsInitialized=!0}}function getInitialTime(){return initControlParamsIfNeeded(),_initial_time}function getFinalTime(){return initControlParamsIfNeeded(),_final_time}function getTimeStep(){return initControlParamsIfNeeded(),_time_step}function getSaveFreq(){return initControlParamsIfNeeded(),_saveper}let fns;function getModelFunctions(){return fns}function setModelFunctions(e){fns=e}function initConstants0(){_average_duration_of_illness_d=2,_final_time=200,_initial_time=0,_infectivity_i=.25,_initial_contact_rate=2.5,_saveper=1,_time_step=.0625,_total_population_p=1e4}function initConstants(){initConstants0()}function initLevels0(){_recovered_population_r=0,_infectious_population_i=1,_susceptible_population_s=_total_population_p-_infectious_population_i-_recovered_population_r}function initLevels(){initLevels0()}function evalAux0(){_recovery_rate=_infectious_population_i/_average_duration_of_illness_d,_contact_rate_c=_initial_contact_rate,_infection_rate=_contact_rate_c*_infectivity_i*_susceptible_population_s*_infectious_population_i/_total_population_p}function evalAux(){evalAux0()}function evalLevels0(){_infectious_population_i=fns.INTEG(_infectious_population_i,_infection_rate-_recovery_rate),_recovered_population_r=fns.INTEG(_recovered_population_r,_recovery_rate),_susceptible_population_s=fns.INTEG(_susceptible_population_s,-_infection_rate)}function evalLevels(){evalLevels0()}function setInputs(e){_initial_contact_rate=e(0),_infectivity_i=e(1),_average_duration_of_illness_d=e(2)}function setLookup(e,n){throw new Error("The setLookup function was not enabled for the generated model. Set the customLookups property in the spec/config file to allow for overriding lookups at runtime.")}const outputVarIds=["_infection_rate","_infectious_population_i","_recovered_population_r","_recovery_rate","_susceptible_population_s"],outputVarNames=["Infection Rate","Infectious Population I","Recovered Population R","Recovery Rate","Susceptible Population S"];function storeOutputs(e){e(_infection_rate),e(_infectious_population_i),e(_recovered_population_r),e(_recovery_rate),e(_susceptible_population_s)}function storeOutput(e,n){throw new Error("The storeOutput function was not enabled for the generated model. Set the customOutputs property in the spec/config file to allow for capturing arbitrary variables at runtime.")}const modelListing=void 0;async function loadGeneratedModel(){return{kind:"js",outputVarIds,outputVarNames,modelListing,getInitialTime,getFinalTime,getTimeStep,getSaveFreq,getModelFunctions,setModelFunctions,setTime,setInputs,setLookup,storeOutputs,storeOutput,initConstants,initLevels,evalAux,evalLevels}}exposeModelWorker(loadGeneratedModel)})();\n';class BundleModelRunner{constructor(t,r,n){this.modelSpec=t,this.inputMap=r,this.modelRunner=n,this.inputs=[...r.values()].map(s=>s.value),this.outputs=n.createOutputs()}async runModelForScenario(t,r){return setInputsForScenario(this.inputMap,t),r[0]?.startsWith("ModelImpl")?this.runModelWithImplOutputs(r):this.runModelWithNormalOutputs(r)}async runModelWithNormalOutputs(t){this.outputs=await this.modelRunner.runModel(this.inputs,this.outputs);const r=this.outputs.runTimeInMillis,n=new Map;for(const s of t){const i=this.modelSpec.outputVars.get(s);if(i)if(i.sourceName===void 0){const o=this.outputs.getSeriesForVar(i.varId);o&&n.set(s,datasetFromPoints(o.points))}else console.error("Static data sources not yet handled in default model check bundle")}return{datasetMap:n,modelRunTime:r}}async runModelWithImplOutputs(t){const r=[];for(const d of t){const m=this.modelSpec.implVars.get(d);m&&r.push(m)}const n=this.outputs.startTime,s=this.outputs.endTime,i=this.outputs.saveFreq;let o=createImplOutputs(r,n,s,i);o=await this.modelRunner.runModel(this.inputs,o);const u=o.runTimeInMillis,c=new Map;for(const d of t){const m=this.modelSpec.implVars.get(d),T=o.getSeriesForVar(m.varId);T&&c.set(d,datasetFromPoints(T.points))}return{datasetMap:c,modelRunTime:u}}}function datasetFromPoints(e){const t=new Map;for(const r of e)r.y!==void 0&&t.set(r.x,r.y);return t}function createImplOutputs(e,t,r,n){const s=[],i=[];for(const u of e)s.push(u.varId),i.push({varIndex:u.varIndex,subscriptIndices:u.subscriptIndices});const o=new Outputs(s,t,r,n);return o.varSpecs=i,o}const VERSION=1;class BundleModel{constructor(t,r){this.modelSpec=t,this.bundleModelRunner=r}async getDatasetsForScenario(t,r){return this.bundleModelRunner.runModelForScenario(t,r)}async getGraphDataForScenario(){}getGraphLinksForScenario(){return[]}}async function initBundleModel(e,t){const r=await spawnAsyncModelRunner({source:modelWorkerJs}),n=new BundleModelRunner(e,t,r);return new BundleModel(e,n)}function createBundle(){const e=getInputVars(inputSpecs),t=getOutputVars(outputSpecs),{implVars:r,implVarGroups:n}=getImplVars(encodedImplVars),s={modelSizeInBytes,dataSizeInBytes,inputVars:e,outputVars:t,implVars:r,implVarGroups:n};return{version:VERSION,modelSpec:s,initModel:()=>initBundleModel(s,e)}}const w=`# yaml-language-server: $schema=../../node_modules/@sdeverywhere/plugin-check/node_modules/@sdeverywhere/check-core/schema/check.schema.json

#
# This is a simple example of "check" tests that exercise the model under different
# input scenarios.  For more guidance, consult the following wiki page:
#   https://github.com/climateinteractive/SDEverywhere/wiki/Testing-and-Comparing-Your-Model
#

- describe: Population Variables
  tests:
    - it: should be between 0 and 10000 for all input scenarios
      scenarios:
        - preset: matrix
      datasets:
        - name: Infectious Population I
        - name: Recovered Population R
        - name: Susceptible Population S
      predicates:
        - gte: 0
          lte: 10000
`,b=`# yaml-language-server: $schema=../../node_modules/@sdeverywhere/plugin-check/node_modules/@sdeverywhere/check-core/schema/comparison.schema.json

#
# This is a simple example of defining custom comparison scenarios, which allow you to see
# how the behavior of the model compares to that of previous versions.  For more guidance,
# consult the following wiki page:
#   https://github.com/climateinteractive/SDEverywhere/wiki/Testing-and-Comparing-Your-Model
#

- scenario:
    title: Custom scenario
    subtitle: with avg duration=4 and contact rate=2
    with:
      - input: Average Duration of Illness d
        at: 4
      - input: Initial contact rate
        at: 2

- scenario:
    title: Custom scenario
    subtitle: with avg duration=4 and contact rate=4
    with:
      - input: Average Duration of Illness d
        at: 4
      - input: Initial contact rate
        at: 4
`,h=Object.assign({"../../../../../model/checks/checks.yaml":w}),f=[];for(const e of Object.keys(h)){const t=h[e];f.push(t)}const y=Object.assign({"../../../../../model/comparisons/comparisons.yaml":b}),k=Object.entries(y).map(e=>({kind:"yaml",filename:e[0],content:e[1]})),_=new Map([]);async function I(e,t,r){let n;if(e&&e.version===t.version){const s=[S(e,t),...k];n={baseline:{name:r?.bundleNameL,bundle:e},thresholds:[1,5,10],specs:s,datasets:{renamedDatasetKeys:_}}}return{current:{name:r?.bundleNameR||"current",bundle:t},check:{tests:f},comparison:n}}function S(e,t){const r=new Set,n=(d,m)=>{for(const T of d.modelSpec.inputVars.values())r.add(T.inputId),m.set(T.inputId,T)},s=new Map,i=new Map;n(e,s),n(t,i);const o=[];o.push({kind:"scenario-with-all-inputs",id:"all_inputs_at_default",title:"All inputs",subtitle:"at default",position:"default"});const u=(d,m)=>{const T=s.get(d),$=i.get(d);if(T===void 0||$===void 0)return;if(m==="min"){if(T.minValue===T.defaultValue&&$.minValue===$.defaultValue)return}else if(T.maxValue===T.defaultValue&&$.maxValue===$.defaultValue)return;const C=$||T,D=C.relatedItem?.locationPath,F=D?D[D.length-1]:C.varName;o.push({kind:"scenario-with-inputs",id:`id_${d}_at_${m}`,title:F,subtitle:`at ${m}`,inputs:[{kind:"input-at-position",inputName:`id ${d}`,position:m}]})},c=[...r];for(const d of c)u(d,"min"),u(d,"max");return{scenarios:o,scenarioGroups:[],viewGroups:[]}}async function initForProduction(){const e='{"date":"2025-12-12T18:26:54.456Z","elapsed":88.6041839999998,"checkSummary":{"predicateSummaries":[]},"comparisonSummary":{"testSummaries":[],"perfReportL":{"minTime":0.3057560000002013,"maxTime":1.5739349999998922,"avgTime":0.5099248000000444,"allTimes":[0.3057560000002013,0.3552889999996296,0.4191599999999198,0.43835600000011254,0.4568410000001677,0.5223940000000766,0.712872999999945,0.8995279999999184,1.5739349999998922]},"perfReportR":{"minTime":0.22042599999986123,"maxTime":2.4539730000001327,"avgTime":0.39193983333332955,"allTimes":[0.22042599999986123,0.22253900000032445,0.2274480000000949,0.30650699999978315,0.41700499999979,0.4535249999998996,0.4734720000001289,0.4736820000002808,0.7465259999999034,0.7510950000000776,2.4539730000001327]}}}';let t;t=JSON.parse(e);const r=createBundle();let n;const s=createBundle$1();s.version===r.version&&(n=s);const o=await I(n,r,{bundleNameL:"main",bundleNameR:"main"});ap(o,{suiteSummary:t})}async function initBundlesAndUI(){const e=document.getElementById("app-shell-container");for(;e.firstChild;)e.removeChild(e.firstChild);await initForProduction()}initOverlay();initBundlesAndUI()});export default s0();
